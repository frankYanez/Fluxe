(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,98641,(e,t,r)=>{e.e,t.exports=function(){var e=[function(e,t,r){"use strict";var i=r(1),n=function(){function e(e,t,r){void 0===e&&(e=NaN),void 0===t&&(t=NaN),void 0===r&&(r=!1),this._minFPS=t,this._maxFPS=e,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new i.default,this._onPause=new i.default,this._onTick=new i.default,this._onTickOncePerFrame=new i.default,r||this.resume()}return e.prototype.updateOnce=function(e){e(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},e.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},e.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},e.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(e.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timeScale",{get:function(){return this._timeScale},set:function(e){this._timeScale!==e&&(this._timeScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),e.prototype.animateOnce=function(){var e=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return e.onFrame()})},e.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},e.prototype.update=function(e,t){void 0===t&&(t=!0),this._currentTick++,this._currentTime+=e,this._tickDeltaTime=e,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),t&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},e.prototype.getTimer=function(){return Date.now()},e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){e.exports=function(){var e=[function(e,t){"use strict";var r=function(){function e(){this.functions=[]}return e.prototype.add=function(e){return -1===this.functions.indexOf(e)&&(this.functions.push(e),!0)},e.prototype.remove=function(e){var t=this.functions.indexOf(e);return t>-1&&(this.functions.splice(t,1),!0)},e.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.functions.concat().forEach(function(t){t.apply(void 0,e)})},Object.defineProperty(e.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),e}();Object.defineProperty(t,"__esModule",{value:!0}),t.default=r}];function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}()}];function t(i){if(r[i])return r[i].exports;var n=r[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}()},55838,(e,t,r)=>{"use strict";var i=e.r(71645),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=i.useState,s=i.useEffect,o=i.useLayoutEffect,l=i.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),i=a({inst:{value:r,getSnapshot:t}}),n=i[0].inst,c=i[1];return o(function(){n.value=r,n.getSnapshot=t,u(n)&&c({inst:n})},[e,r,t]),s(function(){return u(n)&&c({inst:n}),e(function(){u(n)&&c({inst:n})})},[e]),l(r),r};r.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},2239,(e,t,r)=>{"use strict";t.exports=e.r(55838)},52822,(e,t,r)=>{"use strict";var i=e.r(71645),n=e.r(2239),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useSyncExternalStore,o=i.useRef,l=i.useEffect,u=i.useMemo,c=i.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,t,r,i,n){var h=o(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;var A=s(e,(h=u(function(){function e(e){if(!l){if(l=!0,s=e,e=i(e),void 0!==n&&d.hasValue){var t=d.value;if(n(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var r=i(e);return void 0!==n&&n(t,r)?(s=e,t):(s=e,o=r)}var s,o,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,i,n]))[0],h[1]);return l(function(){d.hasValue=!0,d.value=A},[A]),c(A),A}},30224,(e,t,r)=>{"use strict";t.exports=e.r(52822)},66936,(e,t,r)=>{"use strict";function i(e,t){var r=e.length;for(e.push(t);0<r;){var i=r-1>>>1,n=e[i];if(0<s(n,t))e[i]=t,e[r]=n,r=i;else break}}function n(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;for(var i=0,n=e.length,a=n>>>1;i<a;){var o=2*(i+1)-1,l=e[o],u=o+1,c=e[u];if(0>s(l,r))u<n&&0>s(c,l)?(e[i]=c,e[u]=r,i=u):(e[i]=l,e[o]=r,i=o);else if(u<n&&0>s(c,r))e[i]=c,e[u]=r,i=u;else break}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(r.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o,l=performance;r.unstable_now=function(){return l.now()}}else{var u=Date,c=u.now();r.unstable_now=function(){return u.now()-c}}var h=[],d=[],A=1,p=null,f=3,m=!1,g=!1,y=!1,v=!1,x="function"==typeof setTimeout?setTimeout:null,_="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function S(e){for(var t=n(d);null!==t;){if(null===t.callback)a(d);else if(t.startTime<=e)a(d),t.sortIndex=t.expirationTime,i(h,t);else break;t=n(d)}}function T(e){if(y=!1,S(e),!g)if(null!==n(h))g=!0,w||(w=!0,o());else{var t=n(d);null!==t&&L(T,t.startTime-e)}}var w=!1,M=-1,E=5,C=-1;function R(){return!!v||!(r.unstable_now()-C<E)}function N(){if(v=!1,w){var e=r.unstable_now();C=e;var t=!0;try{e:{g=!1,y&&(y=!1,_(M),M=-1),m=!0;var i=f;try{t:{for(S(e),p=n(h);null!==p&&!(p.expirationTime>e&&R());){var s=p.callback;if("function"==typeof s){p.callback=null,f=p.priorityLevel;var l=s(p.expirationTime<=e);if(e=r.unstable_now(),"function"==typeof l){p.callback=l,S(e),t=!0;break t}p===n(h)&&a(h),S(e)}else a(h);p=n(h)}if(null!==p)t=!0;else{var u=n(d);null!==u&&L(T,u.startTime-e),t=!1}}break e}finally{p=null,f=i,m=!1}}}finally{t?o():w=!1}}}if("function"==typeof b)o=function(){b(N)};else if("undefined"!=typeof MessageChannel){var P=new MessageChannel,I=P.port2;P.port1.onmessage=N,o=function(){I.postMessage(null)}}else o=function(){x(N,0)};function L(e,t){M=x(function(){e(r.unstable_now())},t)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(e){e.callback=null},r.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},r.unstable_getCurrentPriorityLevel=function(){return f},r.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},r.unstable_requestPaint=function(){v=!0},r.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},r.unstable_scheduleCallback=function(e,t,a){var s=r.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?s+a:s,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=0x3fffffff;break;case 4:l=1e4;break;default:l=5e3}return l=a+l,e={id:A++,callback:t,priorityLevel:e,startTime:a,expirationTime:l,sortIndex:-1},a>s?(e.sortIndex=a,i(d,e),null===n(h)&&e===n(d)&&(y?(_(M),M=-1):y=!0,L(T,a-s))):(e.sortIndex=l,i(h,e),g||m||(g=!0,w||(w=!0,o()))),e},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},89499,(e,t,r)=>{"use strict";t.exports=e.r(66936)},83958,e=>{e.v(JSON.parse('{"type":"FeatureCollection","crs":{"type":"name","properties":{"name":"urn:ogc:def:crs:OGC:1.3:CRS84"}},"features":[{"type":"Feature","properties":{"admin":"Afghanistan","name":"Afghanistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[61.21081709172573,35.65007233330922],[62.23065148300588,35.27066396742229],[62.984662306576595,35.404040839167614],[63.19353844590034,35.85716563571891],[63.982895949158696,36.007957465146596],[64.54647911973389,36.31207326918426],[64.74610517767739,37.1118177353333],[65.58894778835783,37.305216783185635],[65.74563073106681,37.66116404881206],[66.21738488145932,37.39379018813391],[66.51860680528866,37.362784328758785],[67.07578209825961,37.35614390720928],[67.8299996275595,37.14499400486468],[68.13556237170137,37.0231151393043],[68.85944583524592,37.34433584243059],[69.19627282092436,37.15114350030742],[69.51878543485795,37.60899669041341],[70.11657840361032,37.588222764632086],[70.27057417184012,37.73516469985401],[70.37630415230927,38.138395901027515],[70.80682050973287,38.48628164321641],[71.34813113799025,38.25890534113216],[71.23940392444815,37.95326508234188],[71.54191775908477,37.90577444106563],[71.44869347523023,37.06564484308051],[71.84463829945058,36.738171291646914],[72.19304080596238,36.94828766534566],[72.63688968291726,37.04755809177835],[73.26005577992498,37.495256862938994],[73.94869591664649,37.421566270490786],[74.9800024758954,37.41999013930589],[75.1580277851409,37.13303091078911],[74.57589277537296,37.02084137628345],[74.06755171091781,36.836175645488446],[72.92002485544445,36.72000702569631],[71.84629194528391,36.50994232842985],[71.26234826038574,36.0743875188578],[71.49876793812108,35.650563259415996],[71.6130762063507,35.15320343682286],[71.11501875192162,34.73312571872223],[71.15677330921345,34.348911444632144],[70.88180301298839,33.98885590263851],[69.93054324735958,34.0201201441751],[70.32359419137158,33.358532619758385],[69.68714725126485,33.10549896904123],[69.26252200712254,32.50194407808829],[69.31776411324255,31.901412258424436],[68.92667687365766,31.620189113892064],[68.55693200060931,31.71331004488201],[67.79268924344477,31.582930406209623],[67.68339358914746,31.303154201781417],[66.93889122911845,31.304911200479346],[66.38145755398601,30.73889923758645],[66.34647260932441,29.88794342703617],[65.04686201361609,29.472180691031905],[64.3504187356185,29.56003062592809],[64.14800215033124,29.340819200145965],[63.55026085801117,29.46833079682616],[62.549856805272775,29.318572496044304],[60.87424848820878,29.829238999952604],[61.78122155136343,30.73585032808123],[61.69931440618081,31.37950613049266],[60.941944614511115,31.548074652628745],[60.86365481958895,32.18291962333442],[60.53607791529076,32.98126882581156],[60.96370039250599,33.52883230237625],[60.528429803311575,33.676446031218],[60.80319339380744,34.404101874319856],[61.21081709172573,35.65007233330922]]]}},{"type":"Feature","properties":{"admin":"Angola","name":"Angola","continent":"Africa"},"geometry":{"type":"MultiPolygon","coordinates":[[[[16.326528354567042,-5.877470391466217],[16.57317996589614,-6.622644545115092],[16.860190870845226,-7.222297865429978],[17.089995965247166,-7.545688978712474],[17.47297000496229,-8.068551120641656],[18.134221632569048,-7.987677504104865],[18.464175652752683,-7.847014255406475],[19.016751743249664,-7.988245944860138],[19.16661339689608,-7.738183688999724],[19.417502475673217,-7.155428562044277],[20.037723016040218,-7.116361179231658],[20.091621534920616,-6.943090101756949],[20.60182295093832,-6.939317722199688],[20.514748162526526,-7.299605808138663],[21.728110792739752,-7.290872491081315],[21.74645592620336,-7.920084730667113],[21.949130893652033,-8.305900974158304],[21.80180138518795,-8.908706556842985],[21.875181919042397,-9.523707777548564],[22.208753289486417,-9.894796237836529],[22.15526818206433,-11.084801120653776],[22.40279829274243,-10.99307545333569],[22.83734541188476,-11.017621758674334],[23.45679080576746,-10.86786345789248],[23.912215203555743,-10.92682626713754],[24.017893507592618,-11.237298272347116],[23.904153680118235,-11.722281589406332],[24.079905226342895,-12.191296888887305],[23.930922072045373,-12.56584767013882],[24.0161365088947,-12.91104623784855],[21.93388634612594,-12.898437188369352],[21.88784264495387,-16.08031015387689],[22.562478468524283,-16.89845142992183],[23.21504845550609,-17.523116143465952],[21.37717614104559,-17.930636488519706],[18.956186964603628,-17.789094740472233],[18.263309360434217,-17.309950860262003],[14.209706658595048,-17.35310068122571],[14.058501417709037,-17.423380629142653],[13.462362094789963,-16.97121184658874],[12.814081251688403,-16.941342868724075],[12.21546146001938,-17.11166838955806],[11.734198846085146,-17.301889336824498],[11.640096062881607,-16.673142185129205],[11.778537224991563,-15.793816013250687],[12.123580763404444,-14.878316338767927],[12.175618930722264,-14.449143568583889],[12.500095249083014,-13.547699883684398],[12.73847863124544,-13.137905775609934],[13.312913852601834,-12.483630466362513],[13.633721144269824,-12.038644707897188],[13.738727654686924,-11.297863050993142],[13.686379428775291,-10.73107594161584],[13.38732791510216,-10.373578383020726],[13.120987583069873,-9.766897067914112],[12.875369500386569,-9.166933689005488],[12.929061313537796,-8.959091078327573],[13.23643273280987,-8.56262948978434],[12.933040398824314,-7.596538588087752],[12.728298374083916,-6.927122084178803],[12.22734703944644,-6.294447523629372],[12.322431674863562,-6.100092461779651],[12.735171339578695,-5.965682061388476],[13.024869419006988,-5.984388929878106],[13.375597364971892,-5.864241224799555],[16.326528354567042,-5.877470391466217]]],[[[12.43668826666092,-5.684303887559223],[12.182336866920275,-5.789930515163801],[11.914963006242116,-5.037986748884733],[12.318607618873925,-4.606230157086158],[12.620759718484548,-4.438023369976121],[12.995517205465202,-4.781103203961918],[12.631611769265842,-4.991271254092935],[12.46800418462976,-5.248361504744991],[12.43668826666092,-5.684303887559223]]]]}},{"type":"Feature","properties":{"admin":"Albania","name":"Albania","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.590247430104903,41.85540416113359],[20.463175083099195,41.51508901627533],[20.605181919037356,41.08622630468522],[21.020040317476397,40.84272695572587],[20.99998986174722,40.58000397395397],[20.67499677906363,40.43499990494302],[20.61500044117275,40.110006822259365],[20.150015903410516,39.624997666983965],[19.980000441170144,39.6949933945234],[19.9600016618732,39.91500580500604],[19.40608198413673,40.25077342382246],[19.31905887215714,40.727230129553554],[19.403549838954287,41.409565741535445],[19.5400272966371,41.71998607031275],[19.37176883309496,41.87754751237064],[19.304486118250782,42.195745144207805],[19.738051385179627,42.68824738216557],[19.80161339689868,42.500093492190835],[20.0707,42.58863],[20.28375451018189,42.320259507815074],[20.52295,42.21787],[20.590247430104903,41.85540416113359]]]}},{"type":"Feature","properties":{"admin":"United Arab Emirates","name":"United Arab Emirates","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[51.57951867046326,24.245497137951105],[51.75744062684418,24.294072984305465],[51.794389275932865,24.0198261581325],[52.57708051942559,24.177439276622703],[53.40400678896014,24.151316840099167],[54.008000929587574,24.121757920828212],[54.693023716048614,24.797892360935084],[55.439024692614126,25.439145209244938],[56.070820753814544,26.055464178973978],[56.26104170108094,25.71460643157676],[56.39684736514399,24.924732163995483],[55.88623253766799,24.92083059335744],[55.804118686756205,24.269604193615255],[55.981213820220454,24.130542914317825],[55.52863162620823,23.933604030853495],[55.52584109886446,23.52486928964093],[55.23448937360287,23.110992743415316],[55.20834109886319,22.70832998299704],[55.0068030129249,22.49694753670713],[52.00073327007432,23.001154486578937],[51.61770755392697,24.014219265228824],[51.57951867046326,24.245497137951105]]]}},{"type":"Feature","properties":{"admin":"Argentina","name":"Argentina","continent":"South America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-65.5,-55.2],[-66.45,-55.25],[-66.95992,-54.89681],[-67.56244,-54.87001],[-68.63335,-54.8695],[-68.63401022758315,-52.63637045887445],[-68.25,-53.1],[-67.75,-53.85],[-66.45,-54.45],[-65.05,-54.7],[-65.5,-55.2]]],[[[-64.96489213729457,-22.075861504812348],[-64.37702104354226,-22.79809132252354],[-63.98683814152246,-21.993644301035953],[-62.84646847192154,-22.034985446869452],[-62.685057135657885,-22.2490292294224],[-60.84656470400993,-23.8807125790383],[-60.02896603050397,-24.03279631927324],[-58.80712846539494,-24.77145924245327],[-57.77721716981795,-25.162339776309032],[-57.63366004091112,-25.603656508081663],[-58.61817359071971,-27.123718763947117],[-57.609759690976134,-27.39589853282842],[-56.48670162619299,-27.548499037386243],[-55.695845506398186,-27.387837009390815],[-54.78879492859504,-26.621785577096087],[-54.62529069682354,-25.73925546641548],[-54.13004960795442,-25.547639255477243],[-53.62834896504872,-26.12486500417743],[-53.648735317587885,-26.923472588816104],[-54.49072526713552,-27.474756768505767],[-55.162286342984586,-27.881915378533417],[-56.29089962423909,-28.85276051200085],[-57.62513342958291,-30.21629485445424],[-57.8749373032819,-31.01655608492616],[-58.14244035504074,-32.04450367607618],[-58.13264767112141,-33.04056690850201],[-58.34961117209882,-33.26318897881543],[-58.42707414410437,-33.90945444105754],[-58.49544206402654,-34.4314897600701],[-57.22582963726363,-35.288026625307886],[-57.36235877137874,-35.9773902320815],[-56.73748735210545,-36.413125909166574],[-56.78828528504834,-36.90157154718933],[-57.74915686708342,-38.1838705380799],[-59.231857062401865,-38.7202202288372],[-61.2374452378656,-38.92842457454114],[-62.335956997310134,-38.82770720800436],[-62.125763108962914,-39.42410491308486],[-62.33053097191943,-40.17258635840032],[-62.145994432205235,-40.67689666113672],[-62.74580278181697,-41.02876148861208],[-63.770494757732514,-41.16678923926366],[-64.7320898098197,-40.80267709733513],[-65.11803524439158,-41.064314874028874],[-64.97856055363583,-42.05800099056931],[-64.30340796574247,-42.359016208669495],[-63.75594784204234,-42.043686618824495],[-63.45805904809588,-42.563138116222355],[-64.37880388045629,-42.87355844499964],[-65.18180396183969,-43.49538095476778],[-65.32882341171013,-44.50136606219369],[-65.56526892766159,-45.03678557716978],[-66.50996578638934,-45.03962778094584],[-67.29379391139243,-45.55189625425518],[-67.58054643418008,-46.30177296324253],[-66.59706641301726,-47.03392465595381],[-65.64102657740143,-47.23613453551188],[-65.98508826360073,-48.13328907653113],[-67.16617896184765,-48.69733733499693],[-67.81608761256645,-49.86966887797042],[-68.72874508327315,-50.26421843851886],[-69.13853919134779,-50.732510267947795],[-68.81556148952352,-51.7711040115941],[-68.1499948798204,-52.3499834061277],[-68.57154537624133,-52.29944385534625],[-69.49836218939608,-52.14276091263723],[-71.91480383979632,-52.00902230586591],[-72.32940385607401,-51.425956312872394],[-72.30997351753234,-50.67700977966634],[-72.97574683296462,-50.7414502907343],[-73.32805091011447,-50.378785088909865],[-73.41543575712002,-49.31843637471295],[-72.64824744331493,-48.878618259476774],[-72.33116085477194,-48.24423837666182],[-72.44735531278026,-47.73853281025352],[-71.9172584703302,-46.884838148791786],[-71.55200944689123,-45.56073292417712],[-71.65931555854532,-44.97368865334143],[-71.22277889675972,-44.78424285255941],[-71.3298007880362,-44.40752166115168],[-71.79362260607193,-44.2071721331561],[-71.4640561591305,-43.78761117937832],[-71.9154239569839,-43.40856454851741],[-72.14889807807852,-42.254888197601375],[-71.74680375841545,-42.05138640723598],[-71.91573401557754,-40.83233936947072],[-71.68076127794644,-39.80816415787806],[-71.41351660834904,-38.91602223079111],[-70.8146642727347,-38.55299529394074],[-71.11862504747542,-37.57682748794719],[-71.12188066270977,-36.65812387466233],[-70.36476925320166,-36.00508879978993],[-70.38804948594908,-35.16968759535944],[-69.81730912950145,-34.19357146579828],[-69.81477698431921,-33.27388600029984],[-70.07439938015362,-33.09120981214803],[-70.53506893581944,-31.36501026787028],[-69.91900834825192,-30.336339206668303],[-70.01355038112986,-29.367922865518544],[-69.65613033718314,-28.45914112723369],[-69.00123491074827,-27.521213881136127],[-68.29554155137039,-26.899339694935787],[-68.59479977077267,-26.50690886811126],[-68.38600114609734,-26.18501637136523],[-68.41765296087611,-24.51855478281687],[-67.32844295924413,-24.025303236590908],[-66.98523393417763,-22.986348565362825],[-67.1066735500636,-22.735924574476392],[-66.27333940292483,-21.832310479420677],[-64.96489213729457,-22.075861504812348]]]]}},{"type":"Feature","properties":{"admin":"Armenia","name":"Armenia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[43.582745802592726,41.09214325618256],[44.97248009621807,41.24812856705558],[45.179495883979335,40.9853539088514],[45.56035118997043,40.81228953710592],[45.35917483905816,40.56150381119345],[45.89190717955507,40.21847565363999],[45.61001224140291,39.899993801425175],[46.03453413268066,39.62802073827306],[46.48349897643244,39.46415477147553],[46.505719842317966,38.77060537368629],[46.14362308124882,38.74120148371221],[45.735379266143006,39.319719143219736],[45.739978468616975,39.473999131827114],[45.298144972521456,39.47175120702242],[45.00198733905674,39.740003567049555],[44.79398969908193,39.71300263117704],[44.400008579288695,40.00500031184227],[43.656436395040934,40.25356395116618],[43.7526579119684,40.740200914058754],[43.582745802592726,41.09214325618256]]]}},{"type":"Feature","properties":{"admin":"French Southern and Antarctic Lands","name":"Fr. S. Antarctic Lands","continent":"Seven seas (open ocean)"},"geometry":{"type":"Polygon","coordinates":[[[68.935,-48.625],[69.58,-48.94],[70.525,-49.065],[70.56,-49.255],[70.28,-49.71],[68.745,-49.775],[68.72,-49.2425],[68.8675,-48.83],[68.935,-48.625]]]}},{"type":"Feature","properties":{"admin":"Australia","name":"Australia","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[145.39797814349478,-40.79254851660588],[146.3641207216237,-41.137695407883335],[146.90858361225082,-41.000546156580675],[147.68925947488412,-40.80825815202268],[148.289067824496,-40.87543751400212],[148.35986453673578,-42.06244516374644],[148.01730146707308,-42.40702361426861],[147.91405195535378,-43.211522312188485],[147.56456424376398,-42.937688897473855],[146.87034305235494,-43.63459726336208],[146.66332726459362,-43.58085377377854],[146.0483777203204,-43.54974456153888],[145.43192955951054,-42.693776137056275],[145.29509036680167,-42.03360971452755],[144.7180713238306,-41.16255177181571],[144.74375451067962,-40.703975111657705],[145.39797814349478,-40.79254851660588]]],[[[143.56181115129993,-13.763655694232208],[143.92209923723888,-14.548310642152],[144.5637138205748,-14.17117603928588],[144.89490807513351,-14.594457696188622],[145.37472374896342,-14.984976495018284],[145.27199100156724,-15.428205254785691],[145.48525963763575,-16.28567229580477],[145.63703331927695,-16.78491830817661],[145.88890425026767,-16.906926364817647],[146.16030887266447,-17.76165455492524],[146.06367394427866,-18.280072523677315],[146.38747846901958,-18.958274021075905],[147.4710815777479,-19.480722751546676],[148.17760176004248,-19.955939222902767],[148.84841352762322,-20.39120981209725],[148.71746544819558,-20.633468926681513],[149.28942020080206,-21.260510756111096],[149.67833703023064,-22.34251189543839],[150.0773824403886,-22.122783705333315],[150.48293908101516,-22.556142266533012],[150.72726525289116,-22.402404880464655],[150.89955447815225,-23.46223683033868],[151.6091752463842,-24.076256198830755],[152.07353966695905,-24.45788665130619],[152.8551973818059,-25.267501316023008],[153.13616214417672,-26.071173191026187],[153.16194868389036,-26.64131926850244],[153.09290897034856,-27.260299574494503],[153.56946902894418,-28.1100668271021],[153.51210818910022,-28.99507740653275],[153.33909549378708,-29.458201592732443],[153.06924116435886,-30.35024016695481],[153.0896016786818,-30.923641859665445],[152.8915775901394,-31.64044565198595],[152.4500024762053,-32.55000253675524],[151.70911746643677,-33.04134205498634],[151.3439717958624,-33.816023451473846],[151.0105554547151,-34.31036020277788],[150.71413943908902,-35.1734599749168],[150.32821984273326,-35.67187916437192],[150.07521203023225,-36.420205580390515],[149.94612430236714,-37.10905242284122],[149.99728397033613,-37.42526051203512],[149.42388227762552,-37.77268116633346],[148.3046224306159,-37.809061374666875],[147.38173302631526,-38.21921721776754],[146.92212283751132,-38.60653207779512],[146.31792199115478,-39.03575652441143],[145.48965213438055,-38.59376799901904],[144.87697635312816,-38.41744801203911],[145.03221235573295,-37.89618783951098],[144.485682407814,-38.08532358169926],[143.60997358619608,-38.80946542740532],[142.74542687395297,-38.53826751073752],[142.17832970598198,-38.380034275059835],[141.60658165910468,-38.30851409276787],[140.6385787294132,-38.01933277766254],[139.99215823787432,-37.402936293285094],[139.80658816951404,-36.64360279718827],[139.57414757706522,-36.138362318670666],[139.08280805883408,-35.732754001611774],[138.1207479188563,-35.6122962379394],[138.449461704665,-35.12726124444789],[138.20756432510666,-34.384722588845925],[137.71917036351613,-35.07682504653102],[136.8294055523147,-35.260534763328614],[137.35237104710848,-34.70733855564409],[137.50388634658833,-34.13026783624077],[137.89011600153765,-33.64047861097833],[137.8103275900791,-32.900007012668105],[136.99683719294035,-33.75277149834863],[136.37206912653164,-34.094766127256186],[135.98904341038434,-34.89011809666048],[135.2082125184541,-34.4786703427526],[135.23921837782916,-33.94795338311497],[134.6134167827746,-33.222778008763136],[134.0859037619391,-32.84807219821476],[134.27390262261702,-32.61723357516695],[132.9907768088098,-32.01122405368019],[132.28808068250487,-31.98264698662276],[131.3263306011209,-31.49580331800104],[129.53579389863967,-31.590422865527476],[128.2409375347022,-31.94848886487785],[127.10286746633828,-32.28226694105104],[126.14871382050113,-32.2159660784206],[125.08862348846559,-32.72875131605283],[124.22164798390492,-32.95948658623606],[124.02894656788851,-33.48384734470171],[123.65966678273072,-33.89017913181272],[122.81103641163362,-33.914467054989835],[122.18306440642284,-34.00340219496422],[121.29919070850258,-33.821036065406126],[120.58026818245811,-33.93017669040662],[119.89369510302822,-33.97606536228181],[119.29889936734878,-34.50936614353396],[119.00734093635798,-34.46414926527853],[118.50571780810077,-34.74681934991509],[118.02497195848952,-35.06473276137471],[117.29550744025744,-35.02545867283286],[116.62510908413492,-35.02509693780683],[115.56434695847969,-34.38642791111155],[115.02680870977952,-34.19651702243892],[115.04861616420676,-33.623425388322026],[115.54512332566708,-33.48725798923295],[115.71467370001666,-33.259571628554944],[115.67937869676138,-32.900368747694124],[115.80164513556396,-32.205062351207026],[115.6896106303551,-31.612437025683786],[115.16090905157695,-30.601594333622455],[114.99704308477942,-30.03072478609416],[115.04003787644626,-29.46109547294079],[114.64197431850198,-28.810230808224706],[114.61649783738216,-28.51639861421304],[114.17357913620845,-28.11807667410732],[114.04888390508813,-27.33476531342712],[113.47749759323688,-26.543134047147895],[113.33895307826248,-26.116545098578477],[113.77835778204026,-26.549025160429174],[113.44096235560659,-25.621278171493152],[113.93690107631164,-25.911234633082877],[114.2328520040473,-26.29844614024587],[114.216160516417,-25.786281019801105],[113.72125532435768,-24.998938897402123],[113.62534386602402,-24.683971042583146],[113.39352339076267,-24.384764499613265],[113.5020438985756,-23.80635019297025],[113.70699262904515,-23.56021534596406],[113.84341841029567,-23.059987481378737],[113.73655154831606,-22.475475355725372],[114.14975630092187,-21.75588103606101],[114.22530724493265,-22.51748829517863],[114.64776207891866,-21.829519952076904],[115.4601672709793,-21.49517343514854],[115.947372674627,-21.068687839443708],[116.71161543179154,-20.701681817306817],[117.16631635952768,-20.6235987281138],[117.44154503791424,-20.74689869556216],[118.22955895393294,-20.374208265873232],[118.8360852397427,-20.263310642174822],[118.98780724495175,-20.04420256925732],[119.25249393115062,-19.952941989829835],[119.80522505094454,-19.976506442954975],[120.85622033089663,-19.683707777589188],[121.3998563986072,-19.23975554776973],[121.65513797412906,-18.70531788500713],[122.24166548064176,-18.197648614171765],[122.28662397673565,-17.79860320401391],[122.31277225147541,-17.254967136303446],[123.0125744975719,-16.405199883695854],[123.43378909718301,-17.268558037996225],[123.85934451710659,-17.06903533291725],[123.50324222218323,-16.596506036040363],[123.81707319549191,-16.11131601325199],[124.25828657439985,-16.32794361741956],[124.3797261902858,-15.567059828353973],[124.92615278534002,-15.07510019293532],[125.16727501841387,-14.680395603090004],[125.67008670461382,-14.510070082256018],[125.68579634003049,-14.230655612853834],[126.1251493673761,-14.347340996968947],[126.14282270721988,-14.095986830301213],[126.58258914602375,-13.95279143642041],[127.06586714081733,-13.817967624570922],[127.80463341686193,-14.276906019755042],[128.35968997610894,-14.869169610252252],[128.9855432475959,-14.875990899314738],[129.6214734233796,-14.969783623924553],[129.409600050983,-14.420669854391033],[129.8886405783286,-13.61870330165348],[130.33946577364293,-13.357375583553472],[130.18350630098598,-13.1075200334223],[130.61779503796697,-12.536392103732464],[131.22349450086,-12.183648776908113],[131.73509118054946,-12.30245289474716],[132.5752982931831,-12.114040622611013],[132.55721154188103,-11.603012383676685],[131.82469811414364,-11.273781833545096],[132.3572237489114,-11.12851938237264],[133.0195605815964,-11.376411228076844],[133.55084598198903,-11.786515394745134],[134.39306847548198,-12.042365411022171],[134.67863244032702,-11.9411829565947],[135.29849124566798,-12.248606052299053],[135.8826933127276,-11.962266940969796],[136.25838097548944,-12.049341729381606],[136.49247521377163,-11.857208754120387],[136.951620314685,-12.351958916882737],[136.68512495335574,-12.887223402562054],[136.3054065288751,-13.291229750219896],[135.9617582541341,-13.324509372615887],[136.07761681533253,-13.72427825282578],[135.78383629775323,-14.223989353088212],[135.4286641786112,-14.715432224183896],[135.50018436090318,-14.997740573794427],[136.29517459528137,-15.55026498785912],[137.06536014215948,-15.870762220933353],[137.5804708192448,-16.215082289294084],[138.30321740127897,-16.807604261952658],[138.58516401586337,-16.806622409739173],[139.10854292211548,-17.062679131745366],[139.2605749859182,-17.371600843986183],[140.21524539607827,-17.710804945550063],[140.87546349503924,-17.36906869880394],[141.07111046769626,-16.83204721442672],[141.2740954937388,-16.388870131091604],[141.39822228410378,-15.840531508042584],[141.7021830588446,-15.044921156476928],[141.56338016170866,-14.561333103089506],[141.6355204611881,-14.270394789286284],[141.51986860571895,-13.698078301653805],[141.650920038011,-12.944687595270562],[141.8426912782462,-12.741547539931188],[141.68699018775078,-12.407614434461134],[141.92862918514754,-11.877465915578778],[142.11848839738798,-11.32804208745162],[142.14370649634634,-11.04273650476814],[142.51526004452495,-10.668185723516642],[142.79731001197405,-11.157354831591515],[142.86676313697427,-11.784706719614928],[143.11594689348567,-11.90562957117791],[143.15863162655876,-12.325655612846187],[143.52212365129986,-12.834358412327427],[143.59715783098767,-13.400422051652594],[143.56181115129993,-13.763655694232208]]]]}},{"type":"Feature","properties":{"admin":"Austria","name":"Austria","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[16.979666782304033,48.1234970159763],[16.903754103267257,47.71486562762832],[16.34058434415041,47.712901923201215],[16.534267612380372,47.4961709661691],[16.20229821133736,46.85238597267695],[16.011663852612653,46.68361074481169],[15.137091912504982,46.658702704447016],[14.632471551174827,46.431817328469535],[13.806475457421524,46.5093061386912],[12.376485223040811,46.76755910906984],[12.153088006243053,47.11539317482644],[11.164827915093268,46.94157949481272],[11.048555942436533,46.75135854754632],[10.442701450246629,46.893546250997424],[9.932448357796655,46.92072805438294],[9.47996951664902,47.10280996356337],[9.632931756232974,47.347601223329974],[9.594226108446346,47.525058091820256],[9.896068149463188,47.58019684507569],[10.402083774465208,47.30248769793915],[10.544504021861623,47.56639923765376],[11.426414015354736,47.52376618101297],[12.141357456112784,47.70308340106576],[12.620759718484493,47.672387600284395],[12.932626987365945,47.46764557554398],[13.025851271220487,47.637583523135824],[12.8841028174439,48.2891458196879],[13.243357374736998,48.41611481382904],[13.595945672264431,48.877171942737135],[14.33889773932472,48.55530528420719],[14.901447381254057,48.96440176044582],[15.25341556159398,49.039074205107575],[16.029647251050218,48.73389903420792],[16.49928266771877,48.785808010445095],[16.960288120194573,48.59698232685059],[16.879982944412998,48.47001333270946],[16.979666782304033,48.1234970159763]]]}},{"type":"Feature","properties":{"admin":"Azerbaijan","name":"Azerbaijan","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[45.00198733905679,39.74000356704959],[45.298144972521435,39.47175120702242],[45.739978468617,39.47399913182715],[45.735379266143084,39.319719143219785],[46.14362308124882,38.74120148371221],[45.45772179543873,38.8741391057831],[44.952688022650264,39.33576467544642],[44.79398969908199,39.71300263117703],[45.00198733905679,39.74000356704959]]],[[[47.373315464066216,41.21973236751125],[47.81566572448471,41.15141612402134],[47.98728315612603,41.40581920019422],[48.58435265482628,41.80886953385467],[49.11026370626065,41.28228668880052],[49.61891482930958,40.572924302729966],[50.08482954285309,40.52615713150578],[50.392821079312704,40.2565611842391],[49.569202101444795,40.1761009791607],[49.39525923035042,39.39948171646224],[49.2232283872507,39.04921885838791],[48.856532423707584,38.815486355131775],[48.88324913920253,38.32024526626264],[48.63437544128483,38.270377509100925],[48.0107442563865,38.79401479751453],[48.35552941263793,39.288764960276886],[48.060095249225256,39.58223541926244],[47.68507938008312,39.508363959301185],[46.505719842317966,38.77060537368625],[46.48349897643244,39.46415477147553],[46.0345341326807,39.62802073827304],[45.61001224140291,39.899993801425175],[45.89190717955513,40.21847565363997],[45.35917483905816,40.56150381119348],[45.56035118997047,40.81228953710595],[45.17949588397939,40.98535390885143],[44.97248009621816,41.24812856705562],[45.217426385281634,41.41145193131404],[45.96260053893044,41.12387258560979],[46.50163740416698,41.064444688474104],[46.63790815612057,41.18167267512822],[46.14543175637898,41.72280243587263],[46.40495079934882,41.86067515722734],[46.68607059101666,41.8271371526699],[47.373315464066216,41.21973236751125]]]]}},{"type":"Feature","properties":{"admin":"Burundi","name":"Burundi","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[29.339997592900342,-4.499983412294092],[29.276383904749046,-3.293907159034063],[29.02492638521678,-2.839257907730157],[29.632176141078585,-2.917857761246096],[29.938359002407935,-2.348486830254238],[30.469696079232975,-2.413857517103458],[30.527677036264457,-2.807631931167534],[30.74301272962469,-3.034284763199686],[30.752262811004943,-3.359329522315569],[30.50555952324356,-3.568567396665364],[30.11633263522117,-4.090137627787242],[29.75351240409992,-4.45238941815328],[29.339997592900342,-4.499983412294092]]]}},{"type":"Feature","properties":{"admin":"Belgium","name":"Belgium","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[3.314971144228536,51.34578095153607],[4.047071160507527,51.26725861266856],[4.973991326526913,51.47502370869813],[5.60697594567,51.03729848896977],[6.156658155958779,50.803721015010574],[6.043073357781109,50.12805166279422],[5.782417433300905,50.090327867221205],[5.674051954784828,49.52948354755749],[4.799221632515809,49.98537303323637],[4.286022983425084,49.90749664977254],[3.588184441755685,50.37899241800356],[3.123251580425801,50.78036326761456],[2.658422071960274,50.79684804951573],[2.513573032246142,51.148506171261815],[3.314971144228536,51.34578095153607]]]}},{"type":"Feature","properties":{"admin":"Benin","name":"Benin","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[2.691701694356254,6.258817246928628],[1.865240512712318,6.14215770102973],[1.618950636409238,6.832038072126236],[1.664477573258381,9.128590399609378],[1.46304284018467,9.334624335157086],[1.425060662450136,9.825395412632998],[1.077795037448737,10.175606594275022],[0.772335646171484,10.470808213742355],[0.899563022474069,10.997339382364258],[1.243469679376488,11.11051076908346],[1.447178175471066,11.547719224488857],[1.93598554851988,11.641150214072551],[2.154473504249921,11.940150051313337],[2.49016360841793,12.233052069543673],[2.84864301922667,12.235635891158266],[3.611180454125558,11.660167141155966],[3.572216424177469,11.327939357951516],[3.797112257511713,10.734745591673104],[3.600070021182801,10.332186184119406],[3.705438266625918,10.063210354040208],[3.220351596702101,9.4441525333997],[2.912308383810255,9.13760793704432],[2.723792758809509,8.506845404489708],[2.74906253420022,7.870734361192886],[2.691701694356254,6.258817246928628]]]}},{"type":"Feature","properties":{"admin":"Burkina Faso","name":"Burkina Faso","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-2.827496303712706,9.642460842319776],[-3.511898972986272,9.900326239456216],[-3.980449184576684,9.862344061721698],[-4.330246954760383,9.61083486575714],[-4.779883592131966,9.82198476810174],[-4.954653286143098,10.152713934769732],[-5.404341599946973,10.370736802609144],[-5.470564947929004,10.951269842976044],[-5.197842576508648,11.375145778850136],[-5.220941941743119,11.713858954307224],[-4.427166103523802,12.542645575404292],[-4.280405035814879,13.228443508349738],[-4.006390753587225,13.472485459848112],[-3.52280270019986,13.337661647998612],[-3.103706834312759,13.54126679122859],[-2.967694464520576,13.798150336151506],[-2.191824510090384,14.246417548067352],[-2.001035122068771,14.559008287000887],[-1.066363491205663,14.973815009007764],[-0.515854458000348,15.116157741755725],[-0.26625729003058,14.924308986872148],[0.374892205414682,14.928908189346128],[0.295646396495101,14.444234930880652],[0.429927605805517,13.988733018443922],[0.993045688490071,13.33574962000382],[1.024103224297477,12.851825669806573],[2.177107781593775,12.625017808477532],[2.154473504249921,11.940150051313337],[1.93598554851988,11.641150214072551],[1.447178175471066,11.547719224488857],[1.243469679376488,11.11051076908346],[0.899563022474069,10.997339382364258],[0.023802524423701,11.018681748900802],[-0.438701544588582,11.09834096927872],[-0.761575893548183,10.936929633015051],[-1.203357713211431,11.009819240762736],[-2.94040930827046,10.962690334512557],[-2.963896246747111,10.39533478438008],[-2.827496303712706,9.642460842319776]]]}},{"type":"Feature","properties":{"admin":"Bangladesh","name":"Bangladesh","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[92.67272098182555,22.041238918541247],[92.65225711463799,21.32404755297848],[92.30323449093864,21.475485337809815],[92.3685535013556,20.670883287025344],[92.08288618364612,21.192195135985767],[92.02521528520836,21.701569729086764],[91.83489098507741,22.18293569588556],[91.41708702999765,22.765019029221214],[90.49600630082725,22.805016587815125],[90.58695682166095,22.392793687422863],[90.27297081905556,21.836367702720107],[89.84746707556427,22.03914602303342],[89.70204959509492,21.8571157902853],[89.41886274613546,21.966178900637296],[89.0319612975662,22.055708319582973],[88.87631188350308,22.879146429937823],[88.52976972855376,23.631141872649163],[88.6999402200909,24.233714911388557],[88.0844222350624,24.50165721282192],[88.30637251175601,24.8660794133442],[88.93155398962307,25.23869232838477],[88.20978925980248,25.768065700782707],[88.56304935094974,26.446525580342716],[89.35509402868728,26.014407253518065],[89.83248091019958,25.965082098895476],[89.92069258012184,25.26974986419217],[90.87221072791212,25.13260061288954],[91.79959598182207,25.14743174895731],[92.37620161333479,24.97669281666496],[91.9150928079944,24.13041372323711],[91.46772993364367,24.07263947193479],[91.15896325069971,23.50352692310438],[91.70647505083208,22.985263983649183],[91.8699276061713,23.62434642180278],[92.1460347839068,23.62749868417259],[92.67272098182555,22.041238918541247]]]}},{"type":"Feature","properties":{"admin":"Bulgaria","name":"Bulgaria","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.657149692482985,44.23492300066128],[22.94483239105184,43.82378530534712],[23.33230228037632,43.89701080990471],[24.10067915212417,43.741051337247846],[25.569271681426923,43.68844472917471],[26.06515872569974,43.94349376075126],[27.242399529740904,44.1759860296324],[27.970107049275068,43.8124681666752],[28.55808149589199,43.70746165625812],[28.039095086384712,43.29317169857418],[27.67389773937804,42.577892361006214],[27.996720411905383,42.007358710287775],[27.135739373490473,42.141484890301335],[26.117041863720793,41.826904608724554],[26.106138136507205,41.328898830727766],[25.19720136892544,41.23448598893052],[24.49264489105803,41.583896185872035],[23.692073601992345,41.30908091894384],[22.952377150166445,41.33799388281114],[22.881373732197424,41.99929718685024],[22.380525750424585,42.32025950781508],[22.545011834409618,42.461362006188025],[22.436594679461273,42.58032115332393],[22.604801466571324,42.89851878516114],[22.98601850758848,43.21116120052696],[22.500156691180276,43.64281443946098],[22.410446404721593,44.008063462899955],[22.657149692482985,44.23492300066128]]]}},{"type":"Feature","properties":{"admin":"The Bahamas","name":"Bahamas","continent":"North America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-77.53466,23.75975],[-77.78,23.71],[-78.03405,24.28615],[-78.40848,24.57564],[-78.19087,25.2103],[-77.89,25.17],[-77.54,24.34],[-77.53466,23.75975]]],[[[-77.82,26.58],[-78.91,26.42],[-78.98,26.79],[-78.51,26.87],[-77.85,26.84],[-77.82,26.58]]],[[[-77.0,26.59],[-77.17255,25.87918],[-77.35641,26.00735],[-77.34,26.53],[-77.78802,26.92516],[-77.79,27.04],[-77.0,26.59]]]]}},{"type":"Feature","properties":{"admin":"Bosnia and Herzegovina","name":"Bosnia and Herz.","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[19.00548628101012,44.860233669609144],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.568100000000115],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[17.67492150235898,43.0285625270236],[17.29737348803445,43.44634064388735],[16.916156447017325,43.66772247982566],[16.45644290534886,44.041239732431265],[16.239660271884528,44.351143296885695],[15.750026075918978,44.81871165626255],[15.959367303133371,45.233776760430935],[16.31815677253587,45.0041266953259],[16.534939406000202,45.211607570977705],[17.00214603035101,45.233776760430935],[17.8617834815264,45.06774038347714],[18.55321414559165,45.08158966733145],[19.00548628101012,44.860233669609144]]]}},{"type":"Feature","properties":{"admin":"Belarus","name":"Belarus","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[23.48412763844984,53.91249766704112],[24.45068362803703,53.90570221619475],[25.53635379405699,54.282423407602515],[25.76843265147979,54.84696259217508],[26.588279249790386,55.16717560487166],[26.49433149588375,55.61510691997762],[27.102459751094525,55.78331370708767],[28.17670942557799,56.16912995057881],[29.2295133806603,55.91834422466635],[29.37157189303067,55.67009064393617],[29.896294386522353,55.789463202530406],[30.87390913262,55.55097646750339],[30.97183597181313,55.081547756564035],[30.75753380709871,54.8117709417843],[31.384472283663733,54.15705638286242],[31.79142418796223,53.97463857687212],[31.731272820774503,53.79402944601201],[32.40559858575116,53.618045355842035],[32.693643019346034,53.351420803432106],[32.304519484188226,53.1327261419729],[31.497643670382924,53.16742686625689],[31.30520063652801,53.073995876673195],[31.540018344862258,52.742052313846344],[31.78599816257158,52.10167796488544],[30.927549269338975,52.04235342061438],[30.619454380014837,51.82280609802236],[30.55511722181145,51.31950348571564],[30.15736372246089,51.416138414101454],[29.25493818534792,51.36823436136688],[28.99283532076352,51.60204437927146],[28.61761274589224,51.42771393493483],[28.241615024536564,51.57222707783906],[27.454066196408423,51.59230337178446],[26.33795861176855,51.832288723347915],[25.327787713327005,51.91065603291854],[24.55310631683951,51.88846100524918],[24.005077752384206,51.61744395609445],[23.52707075368437,51.57845408793023],[23.50800215016869,52.02364655212472],[23.19949384938618,52.486977444053664],[23.799198846133375,52.69109935160655],[23.804934930117778,53.08973135030606],[23.527535841574995,53.47012156840654],[23.48412763844984,53.91249766704112]]]}},{"type":"Feature","properties":{"admin":"Belize","name":"Belize","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-89.1430804105033,17.808318996649316],[-89.15090938999552,17.955467637600414],[-89.02985734735181,18.001511338772485],[-88.8483438789266,17.88319814704023],[-88.49012285027933,18.486830552641603],[-88.30003109409367,18.499982204659897],[-88.2963362291848,18.353272813383263],[-88.10681291375437,18.348673610909284],[-88.12347856316848,18.076674709541003],[-88.28535498732279,17.64414297125803],[-88.19786678745263,17.489475409408453],[-88.30264075392442,17.13169363043566],[-88.2395179918799,17.03606639247955],[-88.35542822951055,16.530774237529624],[-88.55182451043582,16.265467434143144],[-88.73243364129593,16.23363475185135],[-88.93061275913524,15.887273464415072],[-89.22912167026927,15.886937567605166],[-89.15080603713092,17.015576687075832],[-89.1430804105033,17.808318996649316]]]}},{"type":"Feature","properties":{"admin":"Bolivia","name":"Bolivia","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-62.84646847192154,-22.03498544686944],[-63.98683814152246,-21.993644301035943],[-64.37702104354224,-22.798091322523533],[-64.9648921372946,-22.07586150481232],[-66.27333940292483,-21.832310479420713],[-67.10667355006359,-22.735924574476417],[-67.82817989772272,-22.87291879648217],[-68.21991309271127,-21.494346612231855],[-68.75716712103373,-20.37265797290446],[-68.4422251044309,-19.405068454671422],[-68.96681840684185,-18.9816834449041],[-69.10024695501947,-18.26012542081267],[-69.59042375352404,-17.58001189541933],[-68.95963538275329,-16.500697930571267],[-69.3897641669347,-15.66012908291165],[-69.16034664577494,-15.323973890853017],[-69.339534674747,-14.953195489158828],[-68.94888668483658,-14.45363941819328],[-68.92922380234953,-13.602683607643009],[-68.88007951523996,-12.89972909917665],[-68.66507971868961,-12.561300144097173],[-69.52967810736493,-10.951734307502193],[-68.78615759954947,-11.036380303596276],[-68.27125362819325,-11.014521172736815],[-68.04819230820537,-10.712059014532484],[-67.17380123561072,-10.30681243249961],[-66.64690833196279,-9.93133147546686],[-65.33843522811641,-9.76198780684639],[-65.44483700220538,-10.51145110437543],[-65.321898769783,-10.895872084194677],[-65.40228146021302,-11.566270440317153],[-64.31635291203159,-12.461978041232191],[-63.19649878605056,-12.627032565972431],[-62.803060268796365,-13.000653171442682],[-62.12708085798637,-13.19878061284972],[-61.71320431176077,-13.489202162330049],[-61.084121263255646,-13.479383640194596],[-60.50330400251112,-13.775954685117656],[-60.459198167550014,-14.354007256734551],[-60.264326341377355,-14.645979099183638],[-60.25114885114292,-15.077218926659318],[-60.54296566429513,-15.093910414289592],[-60.15838965517902,-16.258283786690082],[-58.24121985536667,-16.29957325609129],[-58.38805843772403,-16.877109063385273],[-58.28080400250224,-17.271710300366014],[-57.73455827496099,-17.552468357007765],[-57.49837114117097,-18.17418751391129],[-57.6760088771743,-18.961839694904025],[-57.94999732118582,-19.400004164306814],[-57.853801642474494,-19.969995212486182],[-58.16639238140804,-20.17670094165367],[-58.1834714422805,-19.86839934660036],[-59.11504248720609,-19.3569060197754],[-60.04356462262648,-19.34274667732742],[-61.78632646345376,-19.633736667562957],[-62.265961269770784,-20.513734633061272],[-62.2911793687292,-21.05163461678739],[-62.68505713565787,-22.24902922942238],[-62.84646847192154,-22.03498544686944]]]}},{"type":"Feature","properties":{"admin":"Brazil","name":"Brazil","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-57.625133429582945,-30.216294854454254],[-56.29089962423907,-28.852760512000884],[-55.16228634298456,-27.881915378533456],[-54.49072526713551,-27.474756768505785],[-53.648735317587885,-26.92347258881609],[-53.62834896504874,-26.124865004177465],[-54.130049607954376,-25.547639255477247],[-54.62529069682356,-25.739255466415507],[-54.42894609233058,-25.16218474701216],[-54.293476325077435,-24.57079965586396],[-54.29295956075451,-24.02101409271072],[-54.65283423523512,-23.839578138933955],[-55.02790178080954,-24.001273695575225],[-55.40074723979541,-23.956935316668797],[-55.51763932963962,-23.57199757252663],[-55.61068274598113,-22.65561939869484],[-55.797958136606894,-22.356929620047815],[-56.47331743022938,-22.08630014413528],[-56.881509568902885,-22.282153822521476],[-57.93715572776129,-22.09017587655717],[-57.870673997617786,-20.732687676681948],[-58.16639238140804,-20.17670094165367],[-57.853801642474494,-19.969995212486182],[-57.94999732118582,-19.400004164306814],[-57.6760088771743,-18.961839694904025],[-57.49837114117097,-18.17418751391129],[-57.73455827496099,-17.552468357007765],[-58.28080400250224,-17.271710300366014],[-58.38805843772403,-16.877109063385273],[-58.24121985536667,-16.29957325609129],[-60.15838965517902,-16.258283786690082],[-60.54296566429513,-15.093910414289592],[-60.25114885114292,-15.077218926659318],[-60.264326341377355,-14.645979099183638],[-60.459198167550014,-14.354007256734551],[-60.50330400251112,-13.775954685117656],[-61.084121263255646,-13.479383640194596],[-61.71320431176077,-13.489202162330049],[-62.12708085798637,-13.19878061284972],[-62.803060268796365,-13.000653171442682],[-63.19649878605056,-12.627032565972431],[-64.31635291203159,-12.461978041232191],[-65.40228146021302,-11.566270440317153],[-65.321898769783,-10.895872084194677],[-65.44483700220538,-10.51145110437543],[-65.33843522811641,-9.76198780684639],[-66.64690833196279,-9.93133147546686],[-67.17380123561072,-10.30681243249961],[-68.04819230820537,-10.712059014532484],[-68.27125362819325,-11.014521172736815],[-68.78615759954947,-11.036380303596276],[-69.52967810736493,-10.951734307502193],[-70.09375220404688,-11.123971856331012],[-70.5486856757284,-11.009146823778462],[-70.48189388699116,-9.490118096558842],[-71.30241227892152,-10.079436130415372],[-72.18489071316982,-10.05359791426943],[-72.56303300646563,-9.520193780152717],[-73.22671342639015,-9.462212823121233],[-73.01538265653254,-9.03283334720806],[-73.57105933296705,-8.424446709835832],[-73.98723548042965,-7.523829847853063],[-73.72340145536349,-7.340998630404412],[-73.72448666044163,-6.918595472850638],[-73.12002743192357,-6.629930922068238],[-73.2197112698146,-6.089188734566076],[-72.96450720894119,-5.741251315944892],[-72.89192765978724,-5.274561455916979],[-71.74840572781653,-4.59398284263301],[-70.92884334988356,-4.401591485210367],[-70.79476884630229,-4.251264743673302],[-69.89363521999661,-4.298186944194326],[-69.4441019354896,-1.556287123219817],[-69.42048580593222,-1.122618503426409],[-69.57706539577659,-0.549991957200163],[-70.02065589057004,-0.185156345219539],[-70.0155657619893,0.541414292804205],[-69.45239600287245,0.706158758950693],[-69.25243404811904,0.602650865070075],[-69.21863766140017,0.985676581217433],[-69.8045967271577,1.089081122233466],[-69.81697323269161,1.714805202639624],[-67.86856502955882,1.692455145673392],[-67.53781002467468,2.037162787276329],[-67.25999752467358,1.719998684084956],[-67.06504818385248,1.130112209473225],[-66.87632585312257,1.253360500489336],[-66.32576514348494,0.724452215982012],[-65.54826738143755,0.78925446207603],[-65.35471330428835,1.0952822941085],[-64.61101192895985,1.328730576987041],[-64.1993057928905,1.49285492594602],[-64.08308549666607,1.91636912679408],[-63.36878801131165,2.200899562993129],[-63.422867397705105,2.411067613124174],[-64.26999915226578,2.497005520025566],[-64.4088278876179,3.126786200366623],[-64.36849443221409,3.797210394705246],[-64.816064012294,4.056445217297422],[-64.62865943058753,4.14848094320925],[-63.888342861574145,4.020530096854571],[-63.093197597899085,3.770571193858784],[-62.804533047116685,4.006965033377951],[-62.085429653559125,4.162123521334308],[-60.96689327660152,4.536467596856638],[-60.60117916527192,4.918098049332129],[-60.73357418480371,5.2002772078619],[-60.21368343773132,5.2444863956876],[-59.980958624904865,5.014061184098138],[-60.11100236676737,4.574966538914082],[-59.7674057684587,4.423502915866606],[-59.53803992373122,3.958802598481937],[-59.81541317405786,3.606498521332085],[-59.97452490908454,2.755232652188055],[-59.71854570172673,2.249630438644359],[-59.64604366722124,1.786893825686789],[-59.03086157900264,1.317697658692722],[-58.54001298687829,1.26808828369252],[-58.42947709820596,1.46394196207872],[-58.113449876525,1.507195135907025],[-57.66097103537736,1.682584947105638],[-57.33582292339689,1.948537705895759],[-56.782704230360814,1.863710842288653],[-56.53938574891454,1.89952260986692],[-55.99569800477174,1.817667141116601],[-55.90560014507087,2.021995754398659],[-56.07334184429028,2.220794989425499],[-55.97332210958936,2.510363877773016],[-55.569755011605984,2.42150625244713],[-55.097587449755125,2.523748073736612],[-54.52475419779971,2.311848863123785],[-54.08806250671724,2.105556545414629],[-53.7785206772889,2.376702785650081],[-53.55483924011354,2.33489655192595],[-53.4184651352953,2.05338918701598],[-52.93965715189495,2.124857692875636],[-52.55642473001841,2.504705308437053],[-52.24933753112394,3.241094468596244],[-51.65779741067888,4.156232408053028],[-51.31714636901084,4.203490505383953],[-51.06977128762965,3.65039765056403],[-50.50887529153364,1.901563828942456],[-49.974075893745045,1.736483465986069],[-49.947100796088705,1.046189683431223],[-50.6992512680969,0.222984117021681],[-50.38821082213212,-0.078444512536819],[-48.62056677915631,-0.235489190271821],[-48.58449662941658,-1.237805271005001],[-47.82495642759062,-0.5816179337628],[-46.56658362485122,-0.941027520352776],[-44.9057030909904,-1.551739597178134],[-44.41761918799366,-2.137750339367975],[-44.58158850765577,-2.691308282078523],[-43.418791266440195,-2.383110039889793],[-41.47265682632824,-2.912018324397116],[-39.97866533055403,-2.87305429444904],[-38.50038347019656,-3.700652357603394],[-37.22325212253519,-4.820945733258915],[-36.45293738457638,-5.109403578312153],[-35.597795783010454,-5.149504489770648],[-35.23538896334755,-5.464937432480245],[-34.896029832486825,-6.738193047719709],[-34.72999345553303,-7.343220716992965],[-35.128212042774216,-8.996401462442284],[-35.63696651868771,-9.649281508017811],[-37.04651872409699,-11.0407211239088],[-37.683611619607355,-12.17119475672582],[-38.42387651218843,-13.038118584854285],[-38.67388709161651,-13.057652276260615],[-38.95327572280254,-13.79336964280002],[-38.882298143049645,-15.667053724838764],[-39.161092495264306,-17.20840667080847],[-39.267339240056394,-17.86774627042048],[-39.58352149103422,-18.262295830968934],[-39.76082333022763,-19.5991134579274],[-40.77474077001034,-20.90451181405242],[-40.9447562322506,-21.937316989837807],[-41.75416419123821,-22.370675551037458],[-41.988284267736546,-22.97007048919089],[-43.07470374202474,-22.967693373305465],[-44.6478118556378,-23.35195932382784],[-45.35213578955991,-23.79684172942858],[-46.47209326840552,-24.08896860117454],[-47.648972337420645,-24.885199069927715],[-48.49545813657769,-25.877024834905647],[-48.641004808127725,-26.62369760509093],[-48.47473588722865,-27.175911960561887],[-48.66152035174762,-28.186134535435713],[-48.88845740415739,-28.674115085567877],[-49.587329474472675,-29.224469089476333],[-50.69687415221148,-30.984465020472953],[-51.57622616230615,-31.777698256153204],[-52.25608130553803,-32.24536996839466],[-52.71209998229768,-33.196578057591175],[-53.37366166849823,-33.76837778090076],[-53.65054399271808,-33.20200408298182],[-53.20958899597153,-32.72766611097472],[-53.787951626182185,-32.04724252698762],[-54.572451544805105,-31.494511407193745],[-55.60151017924933,-30.853878676071385],[-55.97324459494093,-30.883075860316296],[-56.97602576356472,-30.10968637463612],[-57.625133429582945,-30.216294854454254]]]}},{"type":"Feature","properties":{"admin":"Brunei","name":"Brunei","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[114.20401655482834,4.525873928236805],[114.59996137904871,4.900011298029965],[115.4507104838698,5.447729803891532],[115.40570031134357,4.955227565933837],[115.34746097215064,4.316636053887009],[114.86955732631537,4.348313706881924],[114.6595959819135,4.007636826997753],[114.20401655482834,4.525873928236805]]]}},{"type":"Feature","properties":{"admin":"Bhutan","name":"Bhutan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[91.69665652869664,27.77174184825166],[92.10371178585972,27.4526140406332],[92.03348351437508,26.83831045176355],[91.2175126484864,26.80864817962802],[90.37327477413406,26.875724188742872],[89.74452762243884,26.71940298105995],[88.83564253128937,27.098966376243755],[88.81424848832054,27.29931590423936],[89.4758101745211,28.04275889740639],[90.01582889197115,28.29643850352721],[90.73051395056778,28.06495392507575],[91.2588537943199,28.040614325466287],[91.69665652869664,27.77174184825166]]]}},{"type":"Feature","properties":{"admin":"Botswana","name":"Botswana","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[25.649163445750155,-18.536025892818987],[25.850391473094724,-18.714412937090533],[26.16479088715848,-19.293085625894935],[27.2965047543505,-20.391519870690995],[27.724747348753247,-20.499058526290387],[27.727227817503252,-20.85180185311471],[28.02137007010861,-21.485975030200574],[28.79465620292421,-21.639454034107445],[29.432188348109033,-22.091312758067584],[28.017235955525244,-22.82775359465907],[27.11940962088624,-23.57432301197977],[26.78640669119741,-24.24069060638348],[26.485753208123292,-24.616326592713097],[25.94165205252215,-24.696373386333217],[25.76584882986521,-25.17484547292367],[25.66466637543771,-25.486816094669702],[25.025170525825786,-25.71967009857689],[24.211266717228792,-25.670215752873567],[23.733569777122703,-25.39012948985161],[23.31209679535018,-25.268689873965712],[22.824271274514896,-25.500458672794768],[22.579531691180584,-25.979447523708146],[22.105968865657864,-26.28025603607913],[21.60589603036939,-26.72653370535175],[20.88960900237173,-26.828542982695907],[20.666470167735437,-26.477453301704916],[20.75860924651183,-25.86813648855145],[20.165725538827186,-24.917961928000768],[19.895767856534427,-24.767790215760588],[19.895457797940672,-21.849156996347865],[20.881134067475863,-21.814327080983144],[20.91064131031453,-18.252218926672015],[21.65504031747897,-18.219146010005225],[23.196858351339294,-17.869038181227783],[23.579005568137713,-18.281261081620055],[24.21736453623921,-17.889347019118485],[24.520705193792537,-17.887124932529932],[25.084443393664564,-17.661815687737366],[25.264225701608005,-17.736539808831413],[25.649163445750155,-18.536025892818987]]]}},{"type":"Feature","properties":{"admin":"Central African Republic","name":"Central African Rep.","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[15.279460483469109,7.421924546737968],[16.106231723706767,7.497087917506504],[16.290561557691884,7.754307359239304],[16.456184523187343,7.734773667832966],[16.70598839688625,7.508327541529978],[17.964929640380884,7.890914008002865],[18.389554884523218,8.281303615751822],[18.911021762780504,8.630894680206351],[18.81200971850927,8.982914536978596],[19.094008009526014,9.074846910025837],[20.059685499764267,9.01270600019485],[21.00086836109616,9.475985215691509],[21.723821648859452,10.567055568885973],[22.231129184668784,10.971888739460509],[22.864165480244218,11.142395127807545],[22.977543572692603,10.714462591998538],[23.554304233502187,10.089255275915306],[23.557249790142823,9.681218166538684],[23.39477908701718,9.26506785729222],[23.45901289235598,8.954285793488891],[23.805813429466745,8.666318874542425],[24.56736901215208,8.229187933785466],[25.114932488716786,7.825104071479172],[25.12413089366472,7.500085150579436],[25.79664798351117,6.979315904158069],[26.21341840994511,6.546603298362071],[26.46590945812323,5.94671743410187],[27.213409051225163,5.550953477394557],[27.374226108517483,5.233944403500059],[27.044065382604703,5.127852688004835],[26.402760857862535,5.150874538590869],[25.650455356557465,5.256087754737123],[25.278798455514305,5.170408229997191],[25.12883344900327,4.927244777847789],[24.80502892426241,4.897246608902349],[24.41053104014625,5.108784084489129],[23.297213982850135,4.609693101414221],[22.841479526468103,4.710126247573483],[22.704123569436284,4.633050848810156],[22.40512373219553,4.02916006104732],[21.65912275563002,4.224341945813719],[20.927591180106273,4.322785549329736],[20.290679152108932,4.691677761245287],[19.467783644293142,5.031527818212779],[18.932312452884755,4.709506130385973],[18.542982211997774,4.201785183118317],[18.453065219809925,3.504385891123348],[17.80990034350526,3.560196437998569],[17.133042433346297,3.728196519379451],[16.537058139724135,3.198254706226278],[16.01285241055535,2.267639675298084],[15.907380812247649,2.557389431158612],[15.86273237474748,3.013537298998982],[15.40539594896438,3.335300604664339],[15.036219516671247,3.851367295747123],[14.950953403389658,4.21038930909492],[14.478372430080466,4.732605495620446],[14.5589359880235,5.03059764243153],[14.459407179429345,5.451760565610299],[14.536560092841112,6.22695872642069],[14.776545444404572,6.408498033062044],[15.279460483469109,7.421924546737968]]]}},{"type":"Feature","properties":{"admin":"Canada","name":"Canada","continent":"North America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-63.6645,46.55001],[-62.9393,46.41587],[-62.01208,46.44314],[-62.50391,46.03339],[-62.87433,45.96818],[-64.1428,46.39265],[-64.39261,46.72747],[-64.01486,47.03601],[-63.6645,46.55001]]],[[[-61.806305,49.10506],[-62.29318,49.08717],[-63.58926,49.40069],[-64.51912,49.87304],[-64.17322,49.95718],[-62.85829,49.70641],[-61.835585,49.28855],[-61.806305,49.10506]]],[[[-123.51000158755112,48.51001089130343],[-124.01289078839947,48.3708462591414],[-125.65501277733834,48.825004584338494],[-125.95499446679273,49.17999583596764],[-126.85000443587185,49.53000031188042],[-127.02999344954438,49.81499583597007],[-128.0593363043662,49.994959011426594],[-128.44458410710214,50.53913768167611],[-128.3584136562554,50.77064809834368],[-127.30858109602988,50.552573554071955],[-126.6950009772123,50.40090322529538],[-125.75500667382317,50.29501821552937],[-125.41500158755878,49.95000051533261],[-124.92076818911931,49.47527497008339],[-123.922508708321,49.062483628935794],[-123.51000158755112,48.51001089130343]]],[[[-56.13403581401711,50.6870097926793],[-56.79588172059526,49.812308661490945],[-56.14310502788429,50.15011749938283],[-55.471492275602934,49.93581533466845],[-55.82240108908091,49.58712860777909],[-54.93514258484565,49.31301097268683],[-54.47377539734378,49.55669118915917],[-53.47654944519131,49.24913890237405],[-53.78601375997123,48.51678050393362],[-53.08613399922625,48.68780365660353],[-52.95864824076223,48.15716421161447],[-52.64809872090417,47.53554840757549],[-53.069158291218336,46.655498765644936],[-53.52145626485303,46.61829173439482],[-54.17893551290253,46.807065741557],[-53.96186865906047,47.62520701760191],[-54.24048214376212,47.75227936460762],[-55.40077307801148,46.88499380145312],[-55.997480841685835,46.91972036395329],[-55.291219041552765,47.38956248635098],[-56.250798712780515,47.63254507098738],[-57.325229254777085,47.57280711525799],[-59.26601518414676,47.6033478867425],[-59.41949418805369,47.89945384377485],[-58.7965864732074,48.25152537697947],[-59.23162451845652,48.52318838153779],[-58.39180497906521,49.12558055276416],[-57.358689744686025,50.718274034215845],[-56.738650071832,51.28743825947853],[-55.87097693543528,51.63209422464919],[-55.4069742498866,51.58827261006572],[-55.60021826844208,51.31707469339791],[-56.13403581401711,50.6870097926793]]],[[[-133.18000404171167,54.169975490935315],[-132.7100078844313,54.04000931542352],[-131.74998958400326,54.12000438090921],[-132.04948034735096,52.98462148702452],[-131.17904252182657,52.18043284769827],[-131.5778295498229,52.18237071390923],[-132.18042842677852,52.63970713969239],[-132.54999243231384,53.100014960332125],[-133.0546111787555,53.41146881775536],[-133.23966448279268,53.851080227262386],[-133.18000404171167,54.169975490935315]]],[[[-79.26582,62.158675],[-79.65752,61.63308],[-80.09956,61.7181],[-80.36215,62.01649],[-80.315395,62.085565],[-79.92939,62.3856],[-79.52002,62.36371],[-79.26582,62.158675]]],[[[-81.89825,62.7108],[-83.06857,62.15922],[-83.77462,62.18231],[-83.99367,62.4528],[-83.25048,62.91409],[-81.87699,62.90458],[-81.89825,62.7108]]],[[[-85.16130794954985,65.6572846543928],[-84.97576371940593,65.21751821558898],[-84.4640120104195,65.37177236598016],[-83.88262630891974,65.10961782496354],[-82.78757687043877,64.76669302027467],[-81.64201371939251,64.45513580998694],[-81.55344031444425,63.97960928003713],[-80.81736121287885,64.057485663501],[-80.1034513007666,63.7259813503486],[-80.99101986359565,63.41124603947496],[-82.547178107417,63.65172231714523],[-83.10879757356504,64.10187571883971],[-84.10041663281385,63.569711819098],[-85.52340471061899,63.05237905542408],[-85.86676876498234,63.63725291610354],[-87.22198320183672,63.54123810490522],[-86.35275977247126,64.0358332383707],[-86.22488644076513,64.82291697860826],[-85.88384782585486,65.73877838811704],[-85.16130794954985,65.6572846543928]]],[[[-75.86588,67.14886],[-76.98687,67.09873],[-77.2364,67.58809],[-76.81166,68.14856],[-75.89521,68.28721],[-75.1145,68.01036],[-75.10333,67.58202],[-75.21597,67.44425],[-75.86588,67.14886]]],[[[-95.64768120380047,69.10769035832176],[-96.26952120380058,68.75704035832173],[-97.61740120380054,69.06003035832178],[-98.43180120380052,68.95070035832177],[-99.79740120380052,69.40003035832179],[-98.91740120380052,69.71003035832179],[-98.21826120380047,70.14354035832174],[-97.15740120380053,69.8600303583218],[-96.55740120380052,69.68003035832176],[-96.2574012038005,69.49003035832176],[-95.64768120380047,69.10769035832176]]],[[[-90.5471,69.49766],[-90.55151,68.47499],[-89.21515,69.25873],[-88.01966,68.61508],[-88.31749,67.87338],[-87.35017,67.19872],[-86.30607,67.92146],[-85.57664,68.78456],[-85.52197,69.88211],[-84.10081,69.80539],[-82.62258,69.65826],[-81.28043,69.16202],[-81.2202,68.66567],[-81.96436,68.13253],[-81.25928,67.59716],[-81.38653,67.11078],[-83.34456,66.41154],[-84.73542,66.2573],[-85.76943,66.55833],[-86.0676,66.05625],[-87.03143,65.21297],[-87.32324,64.77563],[-88.48296,64.09897],[-89.91444,64.03273],[-90.70398,63.61017],[-90.77004,62.96021],[-91.93342,62.83508],[-93.15698,62.02469],[-94.24153,60.89865],[-94.62931,60.11021],[-94.6846,58.94882],[-93.21502,58.78212],[-92.76462,57.84571],[-92.29702999999989,57.08709],[-90.89769,57.28468],[-89.03953,56.85172],[-88.03978,56.47162],[-87.32421,55.99914],[-86.07121,55.72383],[-85.01181,55.3026],[-83.36055,55.24489],[-82.27285,55.14832],[-82.4362,54.28227],[-82.12502,53.27703],[-81.40075,52.15788],[-79.91289,51.20842],[-79.14301,51.53393],[-78.60191,52.56208],[-79.12421,54.14145],[-79.82958,54.66772],[-78.22874,55.13645],[-77.0956,55.83741],[-76.54137,56.53423],[-76.62319,57.20263],[-77.30226,58.05209],[-78.51688,58.80458],[-77.33676,59.85261],[-77.77272,60.75788],[-78.10687,62.31964],[-77.41067,62.55053],[-75.69621,62.2784],[-74.6682,62.18111],[-73.83988,62.4438],[-72.90853,62.10507],[-71.67708,61.52535],[-71.37369,61.13717],[-69.59042,61.06141],[-69.62033,60.22125],[-69.2879,58.95736],[-68.37455,58.80106],[-67.64976,58.21206],[-66.20178,58.76731],[-65.24517,59.87071],[-64.58352,60.33558],[-63.80475,59.4426],[-62.50236,58.16708],[-61.39655,56.96745],[-61.79866,56.33945],[-60.46853,55.77548],[-59.56962,55.20407],[-57.97508,54.94549],[-57.3332,54.6265],[-56.93689,53.78032],[-56.15811,53.64749],[-55.75632,53.27036],[-55.68338,52.14664],[-56.40916,51.7707],[-57.12691,51.41972],[-58.77482,51.0643],[-60.03309,50.24277],[-61.72366,50.08046],[-63.86251,50.29099],[-65.36331,50.2982],[-66.39905,50.22897],[-67.23631,49.51156],[-68.51114,49.06836],[-69.95362,47.74488],[-71.10458,46.82171],[-70.25522,46.98606],[-68.65,48.3],[-66.55243,49.1331],[-65.05626,49.23278],[-64.17099,48.74248],[-65.11545,48.07085],[-64.79854,46.99297],[-64.47219,46.23849],[-63.17329,45.73902],[-61.52072,45.88377],[-60.51815,47.00793],[-60.4486,46.28264],[-59.80287,45.9204],[-61.03988,45.26525],[-63.25471,44.67014],[-64.24656,44.26553],[-65.36406,43.54523],[-66.1234,43.61867],[-66.16173,44.46512],[-64.42549,45.29204],[-66.02605,45.25931],[-67.13741,45.13753],[-67.79134,45.70281],[-67.79046,47.06636],[-68.23444,47.35486],[-68.905,47.185],[-69.237216,47.447781],[-69.99997,46.69307],[-70.305,45.915],[-70.66,45.46],[-71.08482,45.30524],[-71.405,45.255],[-71.50506,45.0082],[-73.34783,45.00738],[-74.867,45.00048],[-75.31821,44.81645],[-76.375,44.09631],[-76.5,44.01845889375871],[-76.82003414580556,43.62878428809375],[-77.73788509795769,43.62905558936329],[-78.72027991404237,43.62508942318486],[-79.17167355011186,43.466339423184216],[-79.01,43.27],[-78.92,42.965],[-78.93936214874368,42.86361135514803],[-80.24744767934794,42.366199856122584],[-81.27774654816713,42.209025987306845],[-82.43927771679162,41.67510508886715],[-82.69008928092016,41.67510508886715],[-83.02981014680691,41.832795722005834],[-83.14199968131256,41.975681057292825],[-83.12,42.08],[-82.9,42.43],[-82.43,42.98],[-82.1376423815039,43.57108755143991],[-82.33776312543105,44.44],[-82.55092464875817,45.34751658790537],[-83.59285071484307,45.81689362241237],[-83.46955074739462,45.994686387712584],[-83.61613094759056,46.116926988299056],[-83.89076534700573,46.116926988299056],[-84.09185126416146,46.27541860613816],[-84.14211951367335,46.51222585711572],[-84.3367,46.40877],[-84.6049,46.4396],[-84.54374874544585,46.53868419044914],[-84.77923824739989,46.63710195574904],[-84.87607988151485,46.900083319682366],[-85.65236324740341,47.2202188177305],[-86.46199083122825,47.55333801939204],[-87.4397926233002,47.94],[-88.3781141832867,48.30291758889373],[-89.27291744663665,48.01980825458266],[-89.6,48.01],[-90.83,48.27],[-91.64,48.14],[-92.61,48.45],[-93.63087,48.60926],[-94.32914,48.67074],[-94.64,48.84],[-94.81758,49.38905],[-95.15609,49.38425],[-95.15906950917201,49.0],[-97.2287200000048,49.0007],[-100.65,49.0],[-104.04826,48.99986],[-107.05,49.0],[-110.05,49.0],[-113.0,49.0],[-116.04818,49.0],[-117.03121,49.0],[-120.0,49.0],[-122.84,49.0],[-122.97421,49.00253777777779],[-124.91024,49.98456],[-125.62461,50.41656],[-127.43561,50.83061],[-127.99276,51.71583],[-127.85032,52.32961],[-129.12979,52.75538],[-129.30523,53.56159],[-130.51497,54.28757],[-130.53611,54.80278],[-129.98,55.285],[-130.00778,55.91583],[-131.70781,56.55212],[-132.73042,57.69289],[-133.35556,58.41028],[-134.27111,58.86111],[-134.945,59.27056],[-135.47583,59.78778],[-136.47972,59.46389],[-137.4525,58.905],[-138.34089,59.56211],[-139.039,60.0],[-140.013,60.27682],[-140.99778,60.30639],[-140.9925,66.00003],[-140.986,69.712],[-139.12052,69.47102],[-137.54636,68.99002],[-136.50358,68.89804],[-135.62576,69.31512],[-134.41464,69.62743],[-132.92925,69.50534],[-131.43136,69.94451],[-129.79471,70.19369],[-129.10773,69.77927],[-128.36156,70.01286],[-128.13817,70.48384],[-127.44712,70.37721],[-125.75632,69.48058],[-124.42483,70.1584],[-124.28968,69.39969],[-123.06108,69.56372],[-122.6835,69.85553],[-121.47226,69.79778],[-119.94288,69.37786],[-117.60268,69.01128],[-116.22643,68.84151],[-115.2469,68.90591],[-113.89794,68.3989],[-115.30489,67.90261],[-113.49727,67.68815],[-110.798,67.80612],[-109.94619,67.98104],[-108.8802,67.38144],[-107.79239,67.88736],[-108.81299,68.31164],[-108.16721,68.65392],[-106.95,68.7],[-106.15,68.8],[-105.34282,68.56122],[-104.33791,68.018],[-103.22115,68.09775],[-101.45433,67.64689],[-99.90195,67.80566],[-98.4432,67.78165],[-98.5586,68.40394],[-97.66948,68.57864],[-96.11991,68.23939],[-96.12588,67.29338],[-95.48943,68.0907],[-94.685,68.06383],[-94.23282,69.06903],[-95.30408,69.68571],[-96.47131,70.08976],[-96.39115,71.19482],[-95.2088,71.92053],[-93.88997,71.76015],[-92.87818,71.31869],[-91.51964,70.19129],[-92.40692,69.69997],[-90.5471,69.49766]]],[[[-114.16716999999987,73.12145],[-114.66634,72.65277],[-112.44101999999987,72.9554],[-111.05039,72.4504],[-109.92034999999986,72.96113],[-109.00654,72.63335],[-108.18834999999989,71.65089],[-107.68599,72.06548],[-108.39639,73.08953],[-107.51645,73.23598],[-106.52258999999987,73.07601],[-105.40245999999988,72.67259],[-104.77484,71.6984],[-104.46475999999981,70.99297],[-102.78537,70.49776],[-100.98077999999987,70.02432],[-101.08928999999989,69.58447000000011],[-102.73115999999987,69.50402],[-102.09329,69.11962],[-102.43024,68.75282],[-104.24,68.91],[-105.96,69.18000000000013],[-107.12254,69.11922],[-108.99999999999987,68.78],[-111.53414887520012,68.63005915681792],[-113.3132,68.53554],[-113.8549599999998,69.0074400000001],[-115.22,69.28],[-116.10794,69.16821],[-117.34,69.96000000000011],[-116.67472999999987,70.06655],[-115.13112,70.2373],[-113.72141,70.19237],[-112.4161,70.36638],[-114.35,70.6],[-116.48684,70.52045],[-117.9048,70.54056000000013],[-118.43238,70.9092],[-116.11311,71.30918],[-117.65568,71.2952],[-119.40199,71.55859],[-118.56267,72.30785],[-117.86641999999988,72.70594],[-115.18909,73.31459000000011],[-114.16716999999987,73.12145]]],[[[-104.5,73.42],[-105.38,72.76],[-106.94,73.46],[-106.6,73.6],[-105.26,73.64],[-104.5,73.42]]],[[[-76.34,73.102684989953],[-76.25140380859372,72.82638549804686],[-77.3144378662109,72.85554504394527],[-78.3916702270508,72.87665557861325],[-79.48625183105464,72.74220275878906],[-79.77583312988283,72.80290222167973],[-80.87609863281251,73.3331832885742],[-80.83388519287105,73.69318389892577],[-80.35305786132811,73.75971984863277],[-78.06443786621092,73.65193176269533],[-76.34,73.102684989953]]],[[[-86.56217851433411,73.15744700793844],[-85.77437130404452,72.5341258816338],[-84.85011247428822,73.34027822538711],[-82.31559017610098,73.75095083281057],[-80.60008765330761,72.71654368762418],[-80.74894161652439,72.06190664335075],[-78.77063859731076,72.35217316353415],[-77.82462398955957,72.74961660429103],[-75.60584469267572,72.24367849393738],[-74.22861609566498,71.76714427355789],[-74.0991407945577,71.33084015571764],[-72.24222571479764,71.5569245469945],[-71.20001542833519,70.92001251899721],[-68.78605424668487,70.52502370877424],[-67.91497046575692,70.1219475368976],[-66.96903337265415,69.18608734809186],[-68.80512285020053,68.72019847276441],[-66.44986609563385,68.067163397892],[-64.86231441919522,67.84753856065161],[-63.424934454996745,66.92847321234065],[-61.85198137068057,66.86212067327783],[-62.163176845942296,66.1602513698896],[-63.91844438338417,64.99866852483284],[-65.14886023625361,65.42603261988667],[-66.72121904159853,66.38804108343219],[-68.01501603867395,66.26272573512439],[-68.14128740097915,65.68978913030436],[-67.08964616562339,65.10845510523698],[-65.73208045109975,64.64840566675862],[-65.32016760930127,64.38273712834605],[-64.66940629744967,63.39292674422747],[-65.0138038804589,62.674185085695974],[-66.27504472519045,62.94509878198607],[-68.78318620469271,63.745670071051805],[-67.36968075221303,62.88396556258487],[-66.3282972886672,62.28007477482204],[-66.16556820338015,61.93089712182588],[-68.87736650254463,62.3301492377128],[-71.02343705919382,62.91070811629583],[-72.23537858751898,63.397836005295154],[-71.88627844917129,63.67998932560884],[-73.37830624051837,64.19396312118381],[-74.83441891142259,64.67907562932378],[-74.8185025702767,64.38909332951796],[-77.70997982452002,64.22954234481678],[-78.55594885935416,64.57290639918013],[-77.89728105336191,65.30919220647478],[-76.01827429879718,65.32696889918314],[-73.95979529488271,65.45476471624089],[-74.29388342964963,65.81177134872938],[-73.94491248238262,66.31057811142672],[-72.65116716173938,67.28457550726385],[-72.92605994331608,67.72692576768237],[-73.31161780464573,68.0694371609129],[-74.8433072577768,68.55462718370127],[-76.86910091826674,68.89473562283025],[-76.22864905465734,69.14776927354741],[-77.28736996123709,69.76954010688327],[-78.16863399932659,69.8264875352689],[-78.95724219431672,70.1668801947754],[-79.49245500356365,69.8718077663889],[-81.30547095409173,69.74318512641433],[-84.94470618359847,69.96663401964439],[-87.06000342481785,70.26000112576536],[-88.6817132230015,70.4107412787608],[-89.51341956252301,70.76203766548097],[-88.46772111688075,71.21818553332132],[-89.88815121128748,71.22255219184994],[-90.20516028518199,72.2350743679608],[-89.43657670770493,73.12946421985235],[-88.40824154331278,73.53788890247121],[-85.8261510892009,73.80381582304521],[-86.56217851433411,73.15744700793844]]],[[[-100.35642,73.84389],[-99.16387,73.63339],[-97.38,73.76],[-97.12,73.47],[-98.05359,72.99052],[-96.54,72.56],[-96.72,71.66],[-98.35966,71.27285],[-99.32286,71.35639],[-100.01482,71.73827],[-102.5,72.51],[-102.48,72.83],[-100.43836,72.70588],[-101.54,73.36],[-100.35642,73.84389]]],[[[-93.1962955391002,72.77199249947334],[-94.26904659704724,72.02459625923595],[-95.40985551632264,72.06188080513458],[-96.03374508338243,72.94027680123179],[-96.01826799191096,73.43742991809579],[-95.495793423224,73.86241689726415],[-94.50365759965231,74.1349067247392],[-92.42001217321175,74.10002513294218],[-90.50979285354258,73.85673248971203],[-92.00396521682987,72.96624420845848],[-93.1962955391002,72.77199249947334]]],[[[-120.46,71.38360179308758],[-123.09219,70.90164],[-123.62,71.34],[-125.92894873747332,71.8686884630114],[-125.49999999999987,72.292260811795],[-124.80729,73.02256],[-123.94,73.68000000000013],[-124.9177499999999,74.29275000000011],[-121.53788,74.44893],[-120.10978,74.24135],[-117.55564,74.18577],[-116.58442,73.89607],[-115.51081,73.47519],[-116.76793999999988,73.22292],[-119.22,72.52],[-120.46,71.82],[-120.46,71.38360179308758]]],[[[-93.61275590694046,74.97999726022444],[-94.15690873897381,74.59234650338685],[-95.60868058956558,74.66686391875176],[-96.82093217648456,74.92762319609658],[-96.28858740922979,75.37782827422333],[-94.85081987178911,75.64721751576089],[-93.97774654821791,75.29648956979595],[-93.61275590694046,74.97999726022444]]],[[[-98.5,76.72],[-97.735585,76.25656],[-97.704415,75.74344],[-98.16,75.0],[-99.80874,74.89744],[-100.88366,75.05736],[-100.86292,75.64075],[-102.50209,75.5638],[-102.56552,76.3366],[-101.48973,76.30537],[-99.98349,76.64634],[-98.57699,76.58859],[-98.5,76.72]]],[[[-108.21141,76.20168],[-107.81943,75.84552],[-106.92893,76.01282],[-105.881,75.9694],[-105.70498,75.47951],[-106.31347,75.00527],[-109.7,74.85],[-112.22307,74.41696],[-113.74381,74.39427],[-113.87135,74.72029],[-111.79421,75.1625],[-116.31221,75.04343],[-117.7104,75.2222],[-116.34602,76.19903],[-115.40487,76.47887],[-112.59056,76.14134],[-110.81422,75.54919],[-109.0671,75.47321],[-110.49726,76.42982],[-109.5811,76.79417],[-108.54859,76.67832],[-108.21141,76.20168]]],[[[-94.68408586299944,77.09787832305837],[-93.5739210680731,76.77629588490606],[-91.60502315953659,76.7785179714946],[-90.74184587274921,76.4495974799568],[-90.96966142450796,76.07401317005944],[-89.82223792189924,75.84777374948563],[-89.18708289259978,75.61016551380762],[-87.83827633334961,75.56618886992722],[-86.37919226758868,75.48242137318216],[-84.7896252102906,75.6992040066465],[-82.75344458691005,75.78431509063124],[-81.12853084992436,75.71398346628202],[-80.05751095245914,75.33684886341587],[-79.83393286814832,74.9231273464872],[-80.45777075877582,74.65730377877777],[-81.94884253612551,74.44245901152432],[-83.2288936022114,74.56402781849093],[-86.09745235873329,74.41003205026114],[-88.1503503079602,74.39230703398498],[-89.76472205275836,74.51555532500112],[-92.42244096552942,74.83775788034097],[-92.76828548864279,75.38681997344213],[-92.88990597204172,75.88265534128263],[-93.89382402217598,76.31924367950052],[-95.9624574450358,76.44138092722244],[-97.12137895382945,76.75107778594759],[-96.74512285031234,77.16138865834513],[-94.68408586299944,77.09787832305837]]],[[[-116.19858659550732,77.6452867703262],[-116.33581336145835,76.87696157501055],[-117.10605058476877,76.53003184681911],[-118.0404121570381,76.48117178008708],[-119.89931758688569,76.05321340606197],[-121.49999507712647,75.90001862253278],[-122.85492448615896,76.11654287383568],[-122.85492529360319,76.11654287383568],[-121.15753536032824,76.86450755482834],[-119.10393897182102,77.51221995717461],[-117.57013078496595,77.4983189968881],[-116.19858659550732,77.6452867703262]]],[[[-93.84000301794397,77.51999726023449],[-94.29560828324524,77.49134267852868],[-96.16965410031005,77.55511139597688],[-96.43630449093611,77.83462921824362],[-94.42257727738635,77.82000478790498],[-93.72065629756587,77.63433136668031],[-93.84000301794397,77.51999726023449]]],[[[-110.18693803591295,77.69701487905029],[-112.05119116905844,77.40922882761684],[-113.53427893761904,77.73220652944114],[-112.72458675825384,78.05105011668194],[-111.26444332563082,78.15295604116154],[-109.85445187054707,77.99632477488481],[-110.18693803591295,77.69701487905029]]],[[[-109.66314571820256,78.60197256134568],[-110.88131425661884,78.40691986766],[-112.54209143761514,78.4079017198735],[-112.52589087609157,78.55055451121524],[-111.50001034223337,78.84999359813054],[-110.963660651476,78.8044408230652],[-109.66314571820256,78.60197256134568]]],[[[-95.83029496944931,78.05694122996324],[-97.30984290239797,77.85059723582178],[-98.12428931353396,78.08285696075757],[-98.55286780474664,78.45810537384509],[-98.6319844225855,78.87193024363837],[-97.3372314115126,78.83198436147676],[-96.75439876990878,78.76581268992699],[-95.55927792029456,78.41831452098026],[-95.83029496944931,78.05694122996324]]],[[[-100.06019182005211,78.32475434031589],[-99.6709390938136,77.90754466420739],[-101.303940192453,78.0189848904448],[-102.94980872273302,78.3432286648602],[-105.17613277873151,78.38033234324574],[-104.21042945027715,78.67742015249178],[-105.41958045125851,78.91833567983643],[-105.49228919149311,79.30159393992919],[-103.52928239623792,79.16534902619162],[-100.8251580472688,78.80046173777869],[-100.06019182005211,78.32475434031589]]],[[[-87.02,79.66],[-85.81435,79.3369],[-87.18756,79.0393],[-89.03535,78.28723],[-90.80436,78.21533],[-92.87669,78.34333],[-93.95116,78.75099],[-93.93574,79.11373],[-93.14524,79.3801],[-94.974,79.37248],[-96.07614,79.70502],[-96.70972,80.15777],[-96.01644,80.60233],[-95.32345,80.90729],[-94.29843,80.97727],[-94.73542,81.20646],[-92.40984,81.25739],[-91.13289,80.72345],[-89.45,80.50932203389826],[-87.81,80.32],[-87.02,79.66]]],[[[-68.5,83.10632151676573],[-65.82735,83.02801],[-63.68,82.9],[-61.85,82.6286],[-61.89388,82.36165],[-64.334,81.92775],[-66.75342,81.72527],[-67.65755,81.50141],[-65.48031,81.50657],[-67.84,80.9],[-69.4697,80.61683],[-71.18,79.8],[-73.2428,79.63415],[-73.88,79.43016220480207],[-76.90773,79.32309],[-75.52924,79.19766],[-76.22046,79.01907],[-75.39345,78.52581],[-76.34354,78.18296],[-77.88851,77.89991],[-78.36269,77.50859],[-79.75951,77.20968],[-79.61965,76.98336],[-77.91089,77.022045],[-77.88911,76.777955],[-80.56125,76.17812],[-83.17439,76.45403],[-86.11184,76.29901],[-87.6,76.42],[-89.49068,76.47239],[-89.6161,76.95213],[-87.76739,77.17833],[-88.26,77.9],[-87.65,77.9702222222222],[-84.97634,77.53873],[-86.34,78.18],[-87.96192,78.37181],[-87.15198,78.75867],[-85.37868,78.9969],[-85.09495,79.34543],[-86.50734,79.73624],[-86.93179,80.25145],[-84.19844,80.20836],[-83.40869565217382,80.1],[-81.84823,80.46442],[-84.1,80.58],[-87.59895,80.51627],[-89.36663,80.85569],[-90.2,81.26],[-91.36786,81.5531],[-91.58702,81.89429],[-90.1,82.085],[-88.93227,82.11751],[-86.97024,82.27961],[-85.5,82.65227345805702],[-84.260005,82.6],[-83.18,82.32],[-82.42,82.86],[-81.1,83.02],[-79.30664,83.13056],[-76.25,83.17205882352937],[-75.71878,83.06404],[-72.83153,83.23324],[-70.665765,83.16978075838283],[-68.5,83.10632151676573]]]]}},{"type":"Feature","properties":{"admin":"Switzerland","name":"Switzerland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[9.594226108446346,47.525058091820256],[9.632931756232974,47.347601223329974],[9.47996951664902,47.10280996356337],[9.932448357796655,46.92072805438294],[10.442701450246629,46.893546250997424],[10.36337812667861,46.48357127540985],[9.922836541390378,46.31489940040918],[9.182881707403054,46.440214748716976],[8.966305779667804,46.036931871111186],[8.489952426801322,46.00515086525167],[8.316629672894377,46.16364248309085],[7.755992058959832,45.8244900579593],[7.273850945676655,45.77694774025077],[6.843592970414504,45.991146552100595],[6.500099724970424,46.42967275652942],[6.022609490593537,46.272989813820466],[6.037388950229,46.72577871356186],[6.768713820023605,47.287708238303686],[6.736571079138058,47.54180125588284],[7.192202182655505,47.449765529971],[7.466759067422228,47.620581976911794],[8.31730146651415,47.613579820336255],[8.522611932009765,47.830827541691285],[9.594226108446346,47.525058091820256]]]}},{"type":"Feature","properties":{"admin":"Chile","name":"Chile","continent":"South America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-68.63401022758315,-52.63637045887435],[-68.63334999999988,-54.8695],[-67.56244,-54.87001],[-66.95992,-54.89681],[-67.29102999999988,-55.30124],[-68.14862999999984,-55.61183],[-68.6399908108118,-55.58001799908688],[-69.2321,-55.49906],[-69.95809,-55.19843],[-71.00568,-55.05383],[-72.2639,-54.49514],[-73.2852,-53.957519999999874],[-74.66253,-52.83749],[-73.8381,-53.04743],[-72.43418,-53.7154],[-71.10773,-54.07433],[-70.59177999999979,-53.61583],[-70.26748,-52.93123],[-69.34564999999988,-52.5183],[-68.63401022758315,-52.63637045887435]]],[[[-68.21991309271122,-21.49434661223183],[-67.82817989772263,-22.872918796482175],[-67.1066735500636,-22.735924574476392],[-66.98523393417763,-22.986348565362825],[-67.32844295924413,-24.025303236590908],[-68.41765296087611,-24.51855478281687],[-68.38600114609734,-26.18501637136523],[-68.59479977077267,-26.50690886811126],[-68.29554155137039,-26.899339694935787],[-69.00123491074827,-27.521213881136127],[-69.65613033718314,-28.45914112723369],[-70.01355038112986,-29.367922865518544],[-69.91900834825192,-30.336339206668303],[-70.53506893581944,-31.36501026787028],[-70.07439938015362,-33.09120981214803],[-69.81477698431921,-33.27388600029984],[-69.81730912950145,-34.19357146579828],[-70.38804948594908,-35.16968759535944],[-70.36476925320166,-36.00508879978993],[-71.12188066270977,-36.65812387466233],[-71.11862504747542,-37.57682748794719],[-70.8146642727347,-38.55299529394074],[-71.41351660834904,-38.91602223079111],[-71.68076127794644,-39.80816415787806],[-71.91573401557754,-40.83233936947072],[-71.74680375841545,-42.05138640723598],[-72.14889807807852,-42.254888197601375],[-71.9154239569839,-43.40856454851741],[-71.4640561591305,-43.78761117937832],[-71.79362260607193,-44.2071721331561],[-71.3298007880362,-44.40752166115168],[-71.22277889675972,-44.78424285255941],[-71.65931555854532,-44.97368865334143],[-71.55200944689123,-45.56073292417712],[-71.9172584703302,-46.884838148791786],[-72.44735531278026,-47.73853281025352],[-72.33116085477194,-48.24423837666182],[-72.64824744331493,-48.878618259476774],[-73.41543575712002,-49.31843637471295],[-73.32805091011447,-50.378785088909865],[-72.97574683296462,-50.7414502907343],[-72.30997351753234,-50.67700977966634],[-72.32940385607401,-51.425956312872394],[-71.91480383979632,-52.00902230586591],[-69.49836218939608,-52.14276091263723],[-68.57154537624133,-52.29944385534625],[-69.46128434922662,-52.29195077266392],[-69.94277950710611,-52.53793059037324],[-70.8451016913545,-52.89920052852571],[-71.00633216010522,-53.833252042201345],[-71.42979468452093,-53.85645476030037],[-72.55794287788484,-53.53141000118445],[-73.70275672066286,-52.83506926860725],[-73.70275672066286,-52.83507007605149],[-74.94676347522515,-52.26275358841902],[-75.2600260077785,-51.62935475037321],[-74.9766324530898,-51.043395684615675],[-75.47975419788348,-50.37837167745155],[-75.60801510283194,-48.673772881871784],[-75.18276974150213,-47.71191944762315],[-74.12658098010468,-46.93925343199509],[-75.64439531116544,-46.647643324572016],[-74.69215369332305,-45.76397633238097],[-74.35170935738425,-44.10304412208788],[-73.2403560045152,-44.45496062599561],[-72.71780392117977,-42.383355808278985],[-73.38889990913825,-42.11753224056957],[-73.70133561877483,-43.36577646257974],[-74.33194312203257,-43.224958184584395],[-74.01795711942715,-41.794812920906836],[-73.67709937202994,-39.94221282324311],[-73.21759253609065,-39.258688653318515],[-73.50555945503704,-38.282882582351064],[-73.58806087919108,-37.156284681956016],[-73.16671708849928,-37.12378020604435],[-72.55313696968172,-35.50884002049102],[-71.86173214383255,-33.90909270603152],[-71.4384504869299,-32.41889942803082],[-71.66872066922242,-30.920644626592516],[-71.37008256700771,-30.095682061484997],[-71.48989437527645,-28.86144215262591],[-70.90512386746157,-27.640379734001193],[-70.72495398627596,-25.70592416758721],[-70.40396582709504,-23.628996677344546],[-70.09124589708067,-21.393319187101223],[-70.16441972520597,-19.756468194256183],[-70.37257239447771,-18.34797535570888],[-69.8584435696058,-18.092693780187027],[-69.59042375352398,-17.580011895419286],[-69.1002469550194,-18.260125420812653],[-68.96681840684182,-18.98168344490409],[-68.44222510443092,-19.40506845467142],[-68.7571671210337,-20.37265797290447],[-68.21991309271122,-21.49434661223183]]]]}},{"type":"Feature","properties":{"admin":"China","name":"China","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[110.33918786015153,18.678395087147603],[109.4752095886637,18.19770091396861],[108.65520796105613,18.507681993071397],[108.62621748254043,19.367887885001977],[109.119055617308,19.821038519769385],[110.21159874882284,20.101253973872073],[110.78655073450223,20.077534491450077],[111.01005130416462,19.695929877190732],[110.5706466003868,19.255879218009305],[110.33918786015153,18.678395087147603]]],[[[127.65740726126238,49.76027049417293],[129.39781782442043,49.44060008401543],[130.58229332898236,48.72968740497611],[130.98728152885383,47.79013235126139],[132.5066719910995,47.78896963153488],[133.373595819228,48.183441677434914],[135.0263114767867,48.4782298854439],[134.5008138368106,47.57843984637783],[134.1123620952726,47.21246735288672],[133.76964399631288,46.116926988299056],[133.09712690646643,45.14406647397216],[131.88345421765956,45.32116160743643],[131.02521203015607,44.96795319272157],[131.28855512911554,44.11151968034826],[131.14468794161485,42.929989732426925],[130.6338664084098,42.90301463477054],[130.64001590385243,42.39500946712527],[129.99426720593323,42.98538686784379],[129.59666873587946,42.42498179785459],[128.0522152039723,41.994284572917984],[128.20843305879072,41.466771552082534],[127.34378299368302,41.50315176041595],[126.86908328664985,41.816569322266155],[126.18204511932944,41.10733612727636],[125.07994184784059,40.56982371679245],[124.26562462778531,39.928493353834135],[122.867570428561,39.637787583976255],[122.13138797413092,39.17045176854462],[121.05455447803287,38.89747101496291],[121.58599490772247,39.360853583324136],[121.37675703337264,39.75026133885952],[122.16859500538101,40.422442531896046],[121.64035851449354,40.946389878903304],[120.76862877816195,40.5933881699176],[119.63960208544906,39.89805593521421],[119.02346398323301,39.252333075511096],[118.0427486511979,39.204273993479674],[117.53270226447705,38.73763580988409],[118.05969852098968,38.06147553156105],[118.87814985562835,37.8973253443859],[118.9116361837535,37.44846385349872],[119.70280236214204,37.15638865818507],[120.82345747282365,37.87042776137797],[121.71125857959794,37.481123358707165],[122.35793745329846,37.45448415786069],[122.51999474496581,36.93061432550182],[121.10416385303303,36.65132904718043],[120.63700890511456,36.111439520811125],[119.66456180224608,35.60979055433773],[119.15120812385857,34.90985911716046],[120.22752485563372,34.36033193616861],[120.62036909391657,33.37672272392512],[121.22901411345022,32.460318711877186],[121.90814578663004,31.692174384074683],[121.89191938689034,30.949351508095095],[121.2642574402733,30.676267401648712],[121.50351932178472,30.14291494396425],[122.09211388558909,29.832520453403156],[121.93842817595304,29.018022365834803],[121.68443851123847,28.225512600206677],[121.12566124886644,28.135673122667175],[120.3954732605823,27.053206895449385],[119.58549686083956,25.740780544532605],[118.6568713725545,24.54739085540023],[117.28160647997083,23.62450145109971],[115.89073530483512,22.782873236578094],[114.76382734584621,22.668074042241663],[114.15254682826567,22.223760077396204],[113.80677981980075,22.548339748621423],[113.2410779155016,22.051367499270462],[111.84359215703245,21.550493679281512],[110.78546552942412,21.39714386645533],[110.44403934127166,20.34103261970639],[109.88986128137356,20.28245738370344],[109.62765506392464,21.008227037026725],[109.86448815311832,21.395050970947516],[108.52281294152442,21.71521230721182],[108.05018029178298,21.5523798690601],[107.04342003787264,21.8118989120299],[106.56727339073537,22.21820486092474],[106.72540327354847,22.794267889898375],[105.81124718630521,22.9768924016179],[105.32920942588662,23.352063300056976],[104.47685835166448,22.81915009204692],[103.5045146016605,22.703756618739217],[102.70699222210015,22.708795070887696],[102.17043582561355,22.464753119389336],[101.65201785686156,22.31819875740955],[101.8031197448829,21.17436676684505],[101.27002566936,21.201651923095167],[101.18000532430756,21.436572984294052],[101.15003299357824,21.849984442629015],[100.41653771362735,21.558839423096657],[99.98348921102155,21.74293671313645],[99.2408988789872,22.11831431730456],[99.5319922220874,22.94903880461259],[98.8987492207828,23.14272207284258],[98.66026248575578,24.06328603769],[97.60471967976203,23.89740469003305],[97.72460900267913,25.083637193293036],[98.67183800658921,25.91870250091349],[98.71209394734456,26.743535874940243],[98.68269005737051,27.508812160750654],[98.24623091023335,27.747221381129172],[97.91198774616944,28.335945136014367],[97.32711388549,28.26158274994634],[96.24883344928783,28.411030992134467],[96.58659061074752,28.83097951915436],[96.117678664131,29.452802028922513],[95.40480228066463,29.031716620392157],[94.56599043170293,29.27743805593996],[93.41334760943266,28.640629380807233],[92.50311893104362,27.89687632904644],[91.69665652869669,27.771741848251615],[91.25885379431988,28.040614325466343],[90.7305139505678,28.064953925075734],[90.01582889197118,28.296438503527177],[89.47581017452116,28.042758897406365],[88.81424848832057,27.29931590423939],[88.73032596227853,28.08686473236755],[88.12044070836994,27.876541652939572],[86.95451704300064,27.974261786403524],[85.82331994013153,28.203575954698746],[85.01163821812305,28.64277395274737],[84.23457970575015,28.83989370372469],[83.89899295444674,29.320226141877633],[83.33711510613719,29.463731594352193],[82.32751264845088,30.115268052688204],[81.52580447787479,30.42271698660866],[81.11125613802928,30.1834809433134],[79.72136681510712,30.882714748654728],[78.738894484374,31.515906073527045],[78.45844648632603,32.61816437431272],[79.17612877799556,32.48377981213775],[79.20889163606854,32.99439463961374],[78.81108646028572,33.5061980250324],[78.91226891471321,34.32193634697577],[77.83745079947461,35.494009507787794],[76.1928483417857,35.89840342868785],[75.89689741405017,36.66680613865187],[75.15802778514099,37.13303091078915],[74.9800024758954,37.41999013930589],[74.82998579295214,37.990007025701445],[74.86481570831678,38.37884634048159],[74.25751427602269,38.60650686294347],[73.9288521666464,38.50581533462272],[73.67537926625484,39.431236884105566],[73.96001305531843,39.660008449861714],[73.82224368682832,39.893973497063136],[74.77686242055604,40.36642527929162],[75.46782799673072,40.56207225194867],[76.52636803579745,40.42794607193514],[76.90448449087711,41.06648590754965],[78.18719689322604,41.1853158636048],[78.54366092317525,41.58224254003871],[80.11943037305142,42.12394074153822],[80.25999026888532,42.34999929459908],[80.18015018099437,42.92006785742685],[80.86620649610121,43.18036204688101],[79.96610639844143,44.91751699480462],[81.94707075391808,45.31702749285314],[82.45892581576904,45.5396495631665],[83.18048383986054,47.330031236350735],[85.16429039911321,47.0009557155161],[85.72048383987067,47.45296946877308],[85.76823286330837,48.455750637396896],[86.59877648310335,48.549181626980605],[87.35997033076269,49.214980780629155],[87.75126427607667,49.297197984405464],[88.01383222855168,48.599462795600594],[88.85429772334675,48.06908173277301],[90.2808256367639,47.6935490993079],[90.97080936072496,46.88814606382293],[90.58576826371831,45.71971609148749],[90.94553958533432,45.28607330991024],[92.13389082231822,45.11507599545643],[93.48073367714132,44.97547211362],[94.68892866412536,44.352331854828456],[95.3068754414715,44.24133087826546],[95.76245486855669,43.31944916439462],[96.34939578652781,42.72563528092864],[97.45175744017797,42.74888967546007],[99.51581749878,42.52469147396169],[100.84586551310827,42.66380442969142],[101.83304039917994,42.51487295182627],[103.31227827353479,41.90746816666761],[104.522281935649,41.90834666601662],[104.96499393109342,41.597409572916334],[106.12931562706166,42.13432770442889],[107.74477257693799,42.4815158147819],[109.24359581913143,42.51944631608415],[110.4121033061153,42.871233628911014],[111.12968224492022,43.40683401140017],[111.82958784388136,43.743118394539486],[111.6677372579432,44.073175767587706],[111.34837690637943,44.45744171811005],[111.87330610560024,45.10207937273511],[112.43606245325884,45.01164561622425],[113.4639066915442,44.80889313412711],[114.46033165899604,45.339816799493875],[115.98509647020013,45.727235012386],[116.71786828009884,46.38820241961524],[117.42170128791425,46.67273285581421],[118.8743257996387,46.805412095723646],[119.66326989143876,46.692679958678944],[119.77282392789756,47.048058783550125],[118.86657433479495,47.747060044946195],[118.06414269416672,48.06673045510373],[117.29550744025744,47.697709052107385],[116.30895267137323,47.85341014260282],[115.74283735561573,47.72654450132627],[115.48528201707302,48.13538259540344],[116.1918021993676,49.134598090199056],[116.67880089728618,49.8885313991214],[117.87924441942637,49.510983384796944],[119.28846072802584,50.14288279886203],[119.27936567594236,50.58290761982728],[120.18204959521692,51.64356639261802],[120.73819135954197,51.96411530212455],[120.72578901579197,52.516226304730814],[120.17708865771687,52.753886216841195],[121.00308475147023,53.25140106873123],[122.24574791879286,53.43172597921368],[123.57150678924084,53.45880442973463],[125.06821129771043,53.16104482686883],[125.94634891164618,52.792798570356936],[126.56439904185696,51.78425547953269],[126.93915652883767,51.353894151405896],[127.28745568248489,50.739797268265434],[127.65740726126238,49.76027049417293]]]]}},{"type":"Feature","properties":{"admin":"Ivory Coast","name":"Cte d\'Ivoire","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-2.856125047202397,4.994475816259508],[-3.311084357100071,4.984295559098014],[-4.008819545904941,5.179813340674314],[-4.64991736491791,5.168263658057084],[-5.834496222344525,4.993700669775135],[-6.528769090185845,4.705087795425015],[-7.518941209330434,4.338288479017307],[-7.712159389669749,4.364565944837721],[-7.63536821128403,5.188159084489455],[-7.53971513511176,5.313345241716517],[-7.570152553731686,5.707352199725903],[-7.993692592795879,6.126189683451541],[-8.311347622094017,6.193033148621081],[-8.602880214868618,6.467564195171659],[-8.385451626000572,6.911800645368742],[-8.485445522485348,7.395207831243068],[-8.439298468448696,7.686042792181736],[-8.280703497744936,7.687179673692156],[-8.221792364932197,8.123328762235571],[-8.299048631208562,8.316443589710302],[-8.203498907900878,8.455453192575446],[-7.832100389019186,8.575704250518625],[-8.079113735374348,9.376223863152031],[-8.309616461612249,9.78953196862244],[-8.22933712404682,10.129020290563895],[-8.029943610048617,10.206534939001711],[-7.89958980959237,10.297382106970824],[-7.622759161804808,10.147236232946792],[-6.850506557635057,10.138993841996236],[-6.666460944027547,10.430810655148449],[-6.493965013037267,10.411302801958268],[-6.205222947606429,10.524060777219132],[-6.050452032892266,10.096360785355442],[-5.816926235365286,10.222554633012193],[-5.404341599946973,10.370736802609144],[-4.954653286143098,10.152713934769732],[-4.779883592131966,9.82198476810174],[-4.330246954760383,9.61083486575714],[-3.980449184576684,9.862344061721698],[-3.511898972986272,9.900326239456216],[-2.827496303712706,9.642460842319776],[-2.56218950032624,8.219627793811481],[-2.983584967450326,7.379704901555511],[-3.244370083011261,6.2504715031135],[-2.810701463217839,5.389051215024109],[-2.856125047202397,4.994475816259508]]]}},{"type":"Feature","properties":{"admin":"Cameroon","name":"Cameroon","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[13.07582238124675,2.267097072759014],[12.951333855855603,2.321615708826939],[12.359380323952218,2.19281220133945],[11.751665480199788,2.326757513839993],[11.276449008843713,2.261050930180871],[9.649158155972628,2.283866075037735],[9.795195753629455,3.073404445809117],[9.404366896205998,3.734526882335202],[8.948115675501068,3.904128933117135],[8.744923943729416,4.352215277519959],[8.488815545290889,4.495617377129917],[8.500287713259693,4.771982937026847],[8.757532993208626,5.47966583904791],[9.233162876023044,6.444490668153334],[9.522705926154398,6.453482367372116],[10.118276808318257,7.038769639509879],[10.497375115611415,7.055357774275562],[11.058787876030348,6.644426784690593],[11.745774366918509,6.981382961449753],[11.8393087093668,7.397042344589434],[12.063946160539556,7.799808457872301],[12.218872104550597,8.305824082874322],[12.753671502339214,8.717762762888993],[12.955467970438972,9.417771714714702],[13.1675997249971,9.64062632897341],[13.308676385153914,10.160362046748926],[13.572949659894558,10.798565985553564],[14.415378859116682,11.572368882692071],[14.468192172918974,11.90475169519341],[14.57717776862253,12.0853608260535],[14.181336297266792,12.483656927943112],[14.213530714584634,12.802035427293344],[14.495787387762842,12.859396267137326],[14.893385857816522,12.219047756392582],[14.960151808337598,11.555574042197222],[14.923564894274955,10.891325181517471],[15.467872755605269,9.982336737503427],[14.909353875394713,9.99212942142273],[14.627200555081057,9.920919297724536],[14.171466098699025,10.021378282099928],[13.954218377344002,9.549494940626683],[14.544466586981766,8.965861314322266],[14.979995558337688,8.79610423424347],[15.120865512765333,8.382150173369423],[15.436091749745763,7.692812404811971],[15.279460483469109,7.421924546737968],[14.776545444404572,6.408498033062044],[14.536560092841112,6.22695872642069],[14.459407179429345,5.451760565610299],[14.5589359880235,5.03059764243153],[14.478372430080466,4.732605495620446],[14.950953403389658,4.21038930909492],[15.036219516671247,3.851367295747123],[15.40539594896438,3.335300604664339],[15.86273237474748,3.013537298998982],[15.907380812247649,2.557389431158612],[16.01285241055535,2.267639675298084],[15.94091881680506,1.727672634280295],[15.14634199388524,1.964014797367184],[14.337812534246575,2.22787466064949],[13.07582238124675,2.267097072759014]]]}},{"type":"Feature","properties":{"admin":"Democratic Republic of the Congo","name":"Dem. Rep. Congo","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[30.8338598975938,3.50916596111034],[30.773346795380036,2.339883327642127],[31.174149204235807,2.204465236821263],[30.852670118948048,1.849396470543809],[30.46850752129029,1.58380544677972],[30.086153598762703,1.062312730306288],[29.875778842902488,0.597379868976304],[29.81950320813663,-0.205310153813372],[29.587837762172164,-0.58740569417948],[29.579466180140876,-1.341313164885626],[29.29188683443661,-1.620055840667987],[29.254834832483336,-2.215109958508911],[29.117478875451543,-2.292211195488384],[29.02492638521678,-2.839257907730157],[29.276383904749046,-3.293907159034063],[29.339997592900342,-4.499983412294092],[29.519986606572925,-5.419978936386313],[29.41999271008816,-5.939998874539432],[29.620032179490003,-6.520015150583424],[30.199996779101692,-7.079980970898161],[30.74001549655178,-8.340007419470913],[30.34608605319081,-8.238256524288216],[29.002912225060467,-8.40703175215347],[28.734866570762495,-8.526559340044576],[28.449871046672815,-9.164918308146085],[28.67368167492892,-9.605924981324932],[28.496069777141763,-10.789883721564044],[28.37225304537042,-11.793646742401387],[28.642417433392342,-11.971568698782312],[29.341547885869087,-12.36074391037241],[29.616001417771223,-12.178894545137307],[29.699613885219485,-13.257226657771827],[28.934285922976834,-13.248958428605132],[28.52356163912102,-12.69860442469668],[28.15510867687998,-12.272480564017894],[27.38879886242378,-12.132747491100664],[27.164419793412456,-11.608748467661073],[26.55308759939961,-11.924439792532125],[25.75230960460473,-11.784965101776356],[25.418118116973197,-11.330935967659958],[24.783169793402948,-11.238693536018962],[24.314516228947948,-11.262826429899269],[24.257155389103985,-10.951992689663657],[23.91221520355571,-10.926826267137512],[23.456790805767433,-10.86786345789248],[22.837345411884733,-11.017621758674329],[22.40279829274237,-10.99307545333569],[22.155268182064304,-11.084801120653768],[22.20875328948639,-9.894796237836507],[21.87518191904234,-9.523707777548564],[21.801801385187897,-8.908706556842978],[21.949130893652036,-8.305900974158275],[21.746455926203303,-7.920084730667147],[21.728110792739695,-7.2908724910813],[20.514748162526494,-7.299605808138629],[20.601822950938292,-6.93931772219968],[20.091621534920645,-6.943090101756993],[20.037723016040218,-7.116361179231644],[19.417502475673157,-7.155428562044297],[19.166613396896107,-7.738183688999753],[19.016751743249664,-7.988245944860132],[18.464175652752683,-7.847014255406442],[18.134221632569048,-7.98767750410492],[17.47297000496223,-8.068551120641699],[17.089995965247166,-7.545688978712525],[16.860190870845198,-7.222297865429984],[16.57317996589614,-6.622644545115087],[16.326528354567042,-5.877470391466267],[13.375597364971892,-5.864241224799548],[13.02486941900696,-5.984388929878157],[12.735171339578695,-5.965682061388497],[12.322431674863507,-6.100092461779658],[12.182336866920249,-5.789930515163837],[12.436688266660866,-5.684303887559245],[12.468004184629734,-5.248361504745003],[12.631611769265788,-4.991271254092935],[12.995517205465172,-4.781103203961883],[13.258240187237044,-4.882957452009165],[13.600234816144676,-4.500138441590969],[14.144956088933297,-4.510008640158715],[14.20903486497522,-4.793092136253597],[14.58260379401318,-4.970238946150139],[15.17099165208844,-4.3435071753143],[15.753540073314747,-3.855164890156096],[16.006289503654298,-3.535132744972528],[15.972803175529148,-2.712392266453612],[16.40709191251005,-1.740927015798682],[16.86530683764212,-1.225816338713287],[17.523716261472853,-0.743830254726987],[17.638644646889983,-0.424831638189246],[17.663552687254676,-0.058083998213817],[17.826540154703245,0.288923244626105],[17.774191928791563,0.855658677571085],[17.89883548347958,1.741831976728278],[18.09427575040743,2.365721543788055],[18.39379235197114,2.90044342692822],[18.453065219809925,3.504385891123348],[18.542982211997774,4.201785183118317],[18.932312452884755,4.709506130385973],[19.467783644293142,5.031527818212779],[20.290679152108932,4.691677761245287],[20.927591180106273,4.322785549329736],[21.65912275563002,4.224341945813719],[22.40512373219553,4.02916006104732],[22.704123569436284,4.633050848810156],[22.841479526468103,4.710126247573483],[23.297213982850135,4.609693101414221],[24.41053104014625,5.108784084489129],[24.80502892426241,4.897246608902349],[25.12883344900327,4.927244777847789],[25.278798455514305,5.170408229997191],[25.650455356557465,5.256087754737123],[26.402760857862535,5.150874538590869],[27.044065382604703,5.127852688004835],[27.374226108517483,5.233944403500059],[27.979977247842807,4.408413397637373],[28.428993768026903,4.287154649264493],[28.696677687298795,4.455077215996936],[29.159078403446497,4.38926727947323],[29.715995314256013,4.600804755060024],[29.953500197069467,4.173699042167683],[30.8338598975938,3.50916596111034]]]}},{"type":"Feature","properties":{"admin":"Republic of Congo","name":"Congo","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[12.995517205465172,-4.781103203961883],[12.620759718484493,-4.438023369976135],[12.318607618873925,-4.606230157086187],[11.914963006242086,-5.037986748884789],[11.093772820691925,-3.978826592630546],[11.855121697648114,-3.42687061932105],[11.4780387712143,-2.765618991714241],[11.820963575903187,-2.514161472181982],[12.49570275233816,-2.391688327650242],[12.57528445806764,-1.948511244315134],[13.109618767965626,-2.428740329603513],[13.992407260807706,-2.470804945489099],[14.299210239324564,-1.998275648612213],[14.425455763413591,-1.333406670744971],[14.31641849127774,-0.552627455247048],[13.843320753645653,0.038757635901149],[14.276265903386951,1.196929836426619],[14.026668735417214,1.395677395021153],[13.282631463278816,1.31418366129688],[13.003113641012074,1.830896307783319],[13.07582238124675,2.267097072759014],[14.337812534246575,2.22787466064949],[15.14634199388524,1.964014797367184],[15.94091881680506,1.727672634280295],[16.01285241055535,2.267639675298084],[16.537058139724135,3.198254706226278],[17.133042433346297,3.728196519379451],[17.80990034350526,3.560196437998569],[18.453065219809925,3.504385891123348],[18.39379235197114,2.90044342692822],[18.09427575040743,2.365721543788055],[17.89883548347958,1.741831976728278],[17.774191928791563,0.855658677571085],[17.826540154703245,0.288923244626105],[17.663552687254676,-0.058083998213817],[17.638644646889983,-0.424831638189246],[17.523716261472853,-0.743830254726987],[16.86530683764212,-1.225816338713287],[16.40709191251005,-1.740927015798682],[15.972803175529148,-2.712392266453612],[16.006289503654298,-3.535132744972528],[15.753540073314747,-3.855164890156096],[15.17099165208844,-4.3435071753143],[14.58260379401318,-4.970238946150139],[14.20903486497522,-4.793092136253597],[14.144956088933297,-4.510008640158715],[13.600234816144676,-4.500138441590969],[13.258240187237044,-4.882957452009165],[12.995517205465172,-4.781103203961883]]]}},{"type":"Feature","properties":{"admin":"Colombia","name":"Colombia","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-75.37322323271384,-0.15203175212045],[-75.80146582711659,0.084801337073202],[-76.29231441924094,0.416047268064119],[-76.57637976754937,0.256935533037435],[-77.42498430043037,0.395686753741117],[-77.66861284047042,0.825893052570961],[-77.85506140817951,0.809925034992773],[-78.85525875518869,1.380923773601822],[-78.99093522817103,1.691369940595251],[-78.6178313870237,1.766404120283056],[-78.66211808949784,2.267355454920476],[-78.4276104397573,2.629555568854215],[-77.93154252797147,2.696605739752925],[-77.510431281225,3.325016994638246],[-77.12768978545525,3.849636135265356],[-77.49627193877699,4.087606105969427],[-77.30760128447938,4.667984117039452],[-77.53322058786571,5.582811997902496],[-77.31881507028672,5.845354112161359],[-77.47666073272227,6.691116441266301],[-77.88157141794524,7.223771267114783],[-77.75341386586139,7.709839789252141],[-77.43110795765698,7.638061224798733],[-77.24256649444007,7.935278225125442],[-77.47472286651131,8.524286200388216],[-77.35336076527386,8.670504665558068],[-76.83667395700354,8.638749497914715],[-76.08638383655784,9.336820583529486],[-75.67460018584003,9.443248195834595],[-75.66470414905615,9.774003200718736],[-75.48042599150334,10.618990383339304],[-74.90689510771197,11.08304474532032],[-74.27675269234486,11.102035834187586],[-74.19722266304768,11.310472723836863],[-73.41476396350028,11.22701528568548],[-72.62783525255962,11.73197154382552],[-72.2381949530789,11.955549628136325],[-71.75409013536863,12.437303168177303],[-71.39982235379169,12.376040757695288],[-71.13746110704587,12.112981879113503],[-71.33158362495028,11.776284084515805],[-71.97392167833827,11.608671576377116],[-72.22757544624292,11.108702093953235],[-72.6146577623252,10.821975409381777],[-72.90528601753469,10.45034434655477],[-73.02760413276955,9.73677033125244],[-73.30495154488003,9.151999823437604],[-72.78872982450038,9.085027167187333],[-72.66049475776809,8.62528778730268],[-72.43986223009796,8.405275376820027],[-72.36090064155596,8.002638454617893],[-72.47967892117883,7.632506008327352],[-72.44448727078806,7.42378489830048],[-72.19835242378187,7.340430813013682],[-71.96017574734863,6.991614895043538],[-70.6742335679815,7.087784735538717],[-70.09331295437241,6.960376491723109],[-69.3894799465571,6.099860541198835],[-68.98531856960233,6.206804917826856],[-68.26505245631822,6.153268133972473],[-67.695087246355,6.267318020040645],[-67.34143958196556,6.095468044454021],[-67.52153194850274,5.556870428891968],[-67.7446966213552,5.221128648291667],[-67.82301225449353,4.503937282728898],[-67.62183590358127,3.839481716319994],[-67.33756384954367,3.542342230641721],[-67.30317318385342,3.31845408773718],[-67.80993811712369,2.820655015469569],[-67.4470920477863,2.600280869960869],[-67.18129431829304,2.250638129074062],[-66.87632585312257,1.253360500489336],[-67.06504818385248,1.130112209473225],[-67.25999752467358,1.719998684084956],[-67.53781002467468,2.037162787276329],[-67.86856502955882,1.692455145673392],[-69.81697323269161,1.714805202639624],[-69.8045967271577,1.089081122233466],[-69.21863766140017,0.985676581217433],[-69.25243404811904,0.602650865070075],[-69.45239600287245,0.706158758950693],[-70.0155657619893,0.541414292804205],[-70.02065589057004,-0.185156345219539],[-69.57706539577659,-0.549991957200163],[-69.42048580593222,-1.122618503426409],[-69.4441019354896,-1.556287123219817],[-69.89363521999661,-4.298186944194326],[-70.39404395209498,-3.766591485207825],[-70.6926820543097,-3.742872002785858],[-70.04770850287484,-2.725156345229699],[-70.81347571479195,-2.256864515800742],[-71.41364579942977,-2.342802422702128],[-71.77476070828538,-2.169789727388937],[-72.32578650581364,-2.434218031426453],[-73.07039221870721,-2.308954359550952],[-73.65950354683459,-1.260491224781134],[-74.12239518908906,-1.002832533373848],[-74.44160051135596,-0.530820000819887],[-75.10662451852006,-0.05720549886486],[-75.37322323271384,-0.15203175212045]]]}},{"type":"Feature","properties":{"admin":"Costa Rica","name":"Costa Rica","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-82.96578304719735,8.225027980985983],[-83.50843726269429,8.446926581247281],[-83.71147396516906,8.656836249216864],[-83.59631303580663,8.830443223501417],[-83.63264156770782,9.05138580976532],[-83.90988562695372,9.29080272057358],[-84.30340165885636,9.487354030795712],[-84.64764421256865,9.615537421095707],[-84.71335079622774,9.908051866083849],[-84.9756603665413,10.086723130733004],[-84.91137488477021,9.79599152265892],[-85.11092342806529,9.557039699741308],[-85.33948828809226,9.834542141148658],[-85.66078650586697,9.93334747969072],[-85.79744483106282,10.134885565629032],[-85.79170874707842,10.439337266476612],[-85.65931372754666,10.754330959511718],[-85.94172543002175,10.8952784285878],[-85.71254045280729,11.088444932494822],[-85.56185197624417,11.217119248901591],[-84.90300330273892,10.952303371621896],[-84.67306901725624,11.08265717207814],[-84.35593075228103,10.9992255721429],[-84.19017859570482,10.793450018756673],[-83.89505449088593,10.726839097532444],[-83.65561174186156,10.938764146361418],[-83.40231970898294,10.39543813724465],[-83.01567664257516,9.992982082555551],[-82.54619625520347,9.566134751824674],[-82.93289099804356,9.476812038608172],[-82.92715491405916,9.074330145702914],[-82.71918311230051,8.925708726431493],[-82.86865719270475,8.80726634361852],[-82.82977067740515,8.626295477732368],[-82.9131764391242,8.423517157419068],[-82.96578304719735,8.225027980985983]]]}},{"type":"Feature","properties":{"admin":"Cuba","name":"Cuba","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-82.26815121125703,23.188610744717703],[-81.40445716014682,23.117271429938775],[-80.61876868358118,23.10598012948299],[-79.67952368846022,22.765303249598823],[-79.28148596873207,22.39920156502705],[-78.34743445505649,22.512166246017085],[-77.99329586456025,22.277193508385928],[-77.14642249216104,21.65785146736783],[-76.52382483590853,21.20681956632437],[-76.19462012399316,21.22056549731401],[-75.59822241891266,21.01662445727413],[-75.67106035022803,20.735091254148],[-74.93389604358448,20.69390513761138],[-74.17802486845125,20.284627793859737],[-74.29664811877724,20.05037852628068],[-74.96159461129292,19.923435370355687],[-75.63468014189458,19.873774318923193],[-76.32365617542598,19.952890936762056],[-77.75548092315304,19.855480861891873],[-77.08510840524674,20.41335378669879],[-77.49265458851661,20.67310537361389],[-78.13729224314157,20.739948838783427],[-78.48282670766116,21.028613389565848],[-78.719866502584,21.59811351163843],[-79.28499996612793,21.559175319906497],[-80.21747534861863,21.827324327069032],[-80.51753455272141,22.037078965741756],[-81.82094336620317,22.192056586185068],[-82.16999182811861,22.387109279870742],[-81.79500179719264,22.63696483000195],[-82.77589799674084,22.688150336187057],[-83.49445878775933,22.168517971276124],[-83.90880042187561,22.15456533455733],[-84.05215084505325,21.91057505949125],[-84.54703019889635,21.80122772876164],[-84.97491105827307,21.89602814380108],[-84.44706214062775,22.204949856041903],[-84.23035702181177,22.56575470630376],[-83.77823991569016,22.78811839445569],[-83.26754757356572,22.98304189706064],[-82.5104361640575,23.07874664966518],[-82.26815121125703,23.188610744717703]]]}},{"type":"Feature","properties":{"admin":"Northern Cyprus","name":"N. Cyprus","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[32.731780226377445,35.14002594658843],[32.80247358575274,35.14550364841136],[32.9469608904408,35.38670339613369],[33.66722700372494,35.37321584730551],[34.57647382990046,35.671595567358786],[33.9008044776842,35.24575592705761],[33.973616570783456,35.058506374648],[33.866439650210104,35.09359467217418],[33.67539188002706,35.017862860650446],[33.525685255677494,35.038688462864066],[33.475817498515845,35.0003445501035],[33.45592207208346,35.1014236516664],[33.383833449036295,35.16271190036456],[33.19097700372304,35.17312470147137],[32.91957238132613,35.087832749973636],[32.731780226377445,35.14002594658843]]]}},{"type":"Feature","properties":{"admin":"Cyprus","name":"Cyprus","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[33.973616570783456,35.058506374648],[34.00488081232003,34.97809784600185],[32.97982710137844,34.571869411755436],[32.49029625827753,34.70165477145647],[32.25666710788595,35.10323232679662],[32.731780226377445,35.14002594658843],[32.91957238132613,35.087832749973636],[33.19097700372304,35.17312470147137],[33.383833449036295,35.16271190036456],[33.45592207208346,35.1014236516664],[33.475817498515845,35.0003445501035],[33.525685255677494,35.038688462864066],[33.67539188002706,35.017862860650446],[33.866439650210104,35.09359467217418],[33.973616570783456,35.058506374648]]]}},{"type":"Feature","properties":{"admin":"Czech Republic","name":"Czech Rep.","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[16.960288120194573,48.59698232685059],[16.49928266771877,48.785808010445095],[16.029647251050218,48.73389903420792],[15.25341556159398,49.039074205107575],[14.901447381254057,48.96440176044582],[14.33889773932472,48.55530528420719],[13.595945672264431,48.877171942737135],[13.031328973043427,49.30706818297323],[12.52102420416119,49.54741526956272],[12.41519087082744,49.96912079528056],[12.240111118222556,50.26633779560727],[12.96683678554319,50.48407644306907],[13.338131951560282,50.733234361364346],[14.05622765468817,50.926917629594286],[14.307013380600631,51.1172677679414],[14.570718214586062,51.00233938252426],[15.016995883858666,51.106674099321566],[15.490972120839723,50.7847299261432],[16.238626743238566,50.69773265237983],[16.176253289462263,50.4226073268579],[16.71947594571443,50.21574656839353],[16.868769158605655,50.473973700556016],[17.554567091551117,50.36214590107641],[17.649445021238986,50.04903839781994],[18.39291385262217,49.98862864847074],[18.85314415861361,49.496229763377634],[18.55497114428948,49.49501536721878],[18.399993523846177,49.315000515330034],[18.17049848803796,49.27151479755642],[18.10497277189185,49.0439834661753],[17.91351159025046,48.99649282489907],[17.886484816161808,48.903475246773695],[17.5450069515771,48.80001902932536],[17.101984897538895,48.8169688991171],[16.960288120194573,48.59698232685059]]]}},{"type":"Feature","properties":{"admin":"Germany","name":"Germany","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[9.92190636560923,54.983104153048025],[9.939579705452898,54.59664195415324],[10.950112338920515,54.36360708273315],[10.939466993868448,54.00869334575258],[11.95625247564328,54.196485500701144],[12.518440382546713,54.47037059184798],[13.647467075259495,54.075510972705885],[14.119686313542555,53.757029120491026],[14.353315463934164,53.248171291713085],[14.074521111719433,52.981262518925334],[14.437599725002196,52.62485016540829],[14.685026482815712,52.08994741475521],[14.607098422919645,51.74518809671997],[15.01699588385878,51.1066740993217],[14.57071821458612,51.00233938252437],[14.307013380600662,51.11726776794136],[14.05622765468831,50.92691762959435],[13.338131951560396,50.733234361364275],[12.966836785543247,50.48407644306917],[12.240111118222668,50.266337795607214],[12.41519087082747,49.9691207952806],[12.521024204161332,49.54741526956274],[13.031328973043513,49.30706818297323],[13.595945672264577,48.87717194273715],[13.243357374737112,48.416114813829026],[12.884102817443871,48.289145819687846],[13.025851271220514,47.637583523135945],[12.93262698736606,47.46764557554398],[12.62075971848452,47.67238760028441],[12.141357456112868,47.70308340106577],[11.426414015354847,47.523766181013045],[10.544504021861597,47.56639923765378],[10.40208377446532,47.30248769793917],[9.896068149463188,47.58019684507569],[9.594226108446376,47.525058091820185],[8.522611932009793,47.83082754169134],[8.317301466514092,47.61357982033626],[7.466759067422286,47.62058197691191],[7.59367638513106,48.33301911070373],[8.099278598674855,49.01778351500342],[6.658229607783709,49.20195831969163],[6.186320428094176,49.4638028021145],[6.242751092156992,49.90222565367872],[6.043073357781109,50.12805166279422],[6.156658155958779,50.803721015010574],[5.988658074577812,51.85161570902504],[6.589396599970825,51.85202912048338],[6.842869500362381,52.22844025329754],[7.092053256873895,53.14404328064488],[6.905139601274128,53.48216217713063],[7.100424838905268,53.69393219666266],[7.936239454793961,53.74829580343378],[8.121706170289483,53.527792466844275],[8.800734490604667,54.02078563090889],[8.572117954145368,54.395646470754045],[8.526229282270206,54.962743638725144],[9.282048780971136,54.8308653835163],[9.92190636560923,54.983104153048025]]]}},{"type":"Feature","properties":{"admin":"Djibouti","name":"Djibouti","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[43.08122602720015,12.699638576707112],[43.31785241066466,12.390148423711022],[43.28638146339891,11.974928290245884],[42.71587365089652,11.735640570518338],[43.14530480324213,11.462039699748852],[42.77685184100094,10.926878566934416],[42.55493000000012,11.105110000000192],[42.314140000000116,11.0342],[41.75557000000019,11.05091],[41.73959000000018,11.355110000000137],[41.66176000000012,11.6312],[42.00000000000011,12.100000000000133],[42.351560000000106,12.54223000000013],[42.77964236834474,12.455415757695672],[43.08122602720015,12.699638576707112]]]}},{"type":"Feature","properties":{"admin":"Denmark","name":"Denmark","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[12.690006137755628,55.60999095318077],[12.089991082414738,54.80001455343792],[11.043543328504226,55.36486379660424],[10.90391360845163,55.779954738988735],[12.370904168353288,56.11140737570882],[12.690006137755628,55.60999095318077]]],[[[10.91218183761836,56.4586213242779],[10.667803989309986,56.08138336854721],[10.369992710011983,56.19000722922472],[9.649984978889306,55.46999949810204],[9.921906365609171,54.983104153048046],[9.282048780971136,54.830865383516155],[8.526229282270235,54.96274363872497],[8.120310906617588,55.51772268332362],[8.089976840862247,56.54001170513759],[8.256581658571262,56.809969387430286],[8.543437534223385,57.11000275331689],[9.424469028367607,57.172066148499475],[9.77555870935856,57.44794078228965],[10.580005730846151,57.73001658795484],[10.54610599126269,57.21573273378614],[10.250000034230222,56.890016181050456],[10.369992710011983,56.60998159446082],[10.91218183761836,56.4586213242779]]]]}},{"type":"Feature","properties":{"admin":"Dominican Republic","name":"Dominican Rep.","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-71.71236141629295,19.714455878167353],[-71.5873044501466,19.884910590082093],[-70.80670610216173,19.88028554939198],[-70.21436499701612,19.622885240146157],[-69.95081519232757,19.64799998624],[-69.76925004747007,19.293267116772437],[-69.22212582057986,19.313214219637096],[-69.25434607611382,19.01519623460987],[-68.80941199408082,18.97907440843785],[-68.31794328476896,18.61219757738169],[-68.6893159654345,18.20514232021861],[-69.1649458482489,18.422648423735108],[-69.62398759629762,18.38071299893025],[-69.95293392605153,18.428306993071057],[-70.13323299831788,18.245915025296892],[-70.5171372138142,18.18429087978883],[-70.66929846869762,18.42688589118303],[-70.99995012071717,18.28332876227621],[-71.40020992703388,17.598564357976596],[-71.657661912712,17.757572740138695],[-71.70830481635804,18.04499705654609],[-71.68773759630587,18.316660061104468],[-71.94511206733554,18.616900132720257],[-71.70130265978248,18.78541697842405],[-71.62487321642281,19.169837958243303],[-71.71236141629295,19.714455878167353]]]}},{"type":"Feature","properties":{"admin":"Algeria","name":"Algeria","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[11.99950564947161,23.471668402596443],[8.572893100629782,21.565660712159136],[5.677565952180684,19.601206976799713],[4.267419467800038,19.155265204336995],[3.158133172222704,19.05736420336003],[3.146661004253899,19.69357859952144],[2.683588494486428,19.856230170160114],[2.060990838233919,20.14223338467948],[1.823227573259032,20.61080943448604],[-1.550054897457613,22.792665920497377],[-4.92333736817423,24.974574082940993],[-8.68439978680905,27.395744126896],[-8.66512447756419,27.58947907155822],[-8.665589565454805,27.65642588959235],[-8.674116176782972,28.841288967396572],[-7.059227667661928,29.57922842052452],[-6.060632290053772,29.731699734001687],[-5.242129278982786,30.00044302013558],[-4.859646165374469,30.50118764904384],[-3.690441046554695,30.896951605751152],[-3.647497931320145,31.637294012980668],[-3.068980271812647,31.724497992473207],[-2.616604783529567,32.09434621838614],[-1.30789913573787,32.262888902306095],[-1.124551153966308,32.651521511357124],[-1.388049282222567,32.8640150009413],[-1.733454555661467,33.91971283623198],[-1.792985805661686,34.5279186060912],[-2.169913702798624,35.16839630791667],[-1.208602871089056,35.71484874118709],[-0.127454392894606,35.8886624212008],[0.503876580415209,36.30127289483527],[1.466918572606545,36.6056470810344],[3.161698846050824,36.783904934225205],[4.815758090849129,36.86503693292346],[5.320120070017792,36.716518866516616],[6.261819695672611,37.11065501560673],[7.330384962603969,37.11838064223437],[7.737078484741003,36.88570750584021],[8.420964389691674,36.946427313783154],[8.217824334352313,36.43317698826027],[8.376367628623766,35.47987600355594],[8.140981479534302,34.65514598239378],[7.524481642292242,34.09737641045145],[7.612641635782181,33.344114895148955],[8.430472853233367,32.748337307255944],[8.439102817426116,32.506284898400814],[9.055602654668148,32.102691962201284],[9.482139926805273,30.30755605724618],[9.805634392952411,29.424638373323383],[9.859997999723443,28.959989732371007],[9.683884718472765,28.144173895779193],[9.75612837081678,27.68825857188414],[9.629056023811073,27.140953477480913],[9.716285841519747,26.51220632578569],[9.31941084151816,26.094324856057447],[9.910692579801774,25.365454616796733],[9.948261346077969,24.93695364023251],[10.30384687667836,24.37931325937091],[10.771363559622923,24.562532050061744],[11.560669386449002,24.09790924732551],[11.99950564947161,23.471668402596443]]]}},{"type":"Feature","properties":{"admin":"Ecuador","name":"Ecuador","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-80.30256059438719,-3.404856459164712],[-79.77029334178091,-2.65751189535964],[-79.9865592109224,-2.220794366061014],[-80.36878394236923,-2.685158786635788],[-80.96776546906433,-2.246942640800703],[-80.76480628123801,-1.965047702648532],[-80.9336590237517,-1.057454522306358],[-80.58337032746124,-0.906662692878683],[-80.39932471385373,-0.283703301600141],[-80.02089820018035,0.360340074053468],[-80.0906097073421,0.768428859862396],[-79.54276201039977,0.982937730305963],[-78.85525875518869,1.380923773601822],[-77.85506140817951,0.809925034992773],[-77.66861284047042,0.825893052570961],[-77.42498430043037,0.395686753741117],[-76.57637976754937,0.256935533037435],[-76.29231441924094,0.416047268064119],[-75.80146582711659,0.084801337073202],[-75.37322323271384,-0.15203175212045],[-75.23372270374193,-0.911416924649529],[-75.54499569365203,-1.56160979574588],[-76.6353942532267,-2.608677666843817],[-77.83790483265858,-3.003020521663103],[-78.45068396677563,-3.873096612161375],[-78.63989722361232,-4.547784112164072],[-79.20528906931771,-4.959128513207388],[-79.62497921417615,-4.454198093283494],[-80.02890804718558,-4.346090996928893],[-80.44224199087213,-4.425724379090673],[-80.46929460317692,-4.059286797708999],[-80.18401485870965,-3.821161797708043],[-80.30256059438719,-3.404856459164712]]]}},{"type":"Feature","properties":{"admin":"Egypt","name":"Egypt","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[34.9226,29.50133],[34.64174,29.09942],[34.42655,28.34399],[34.15451,27.8233],[33.92136,27.6487],[33.58811,27.97136],[33.13676,28.41765],[32.42323,29.85108],[32.32046,29.76043],[32.73482,28.70523],[33.34876,27.69989],[34.10455,26.14227],[34.47387,25.59856],[34.79507,25.03375],[35.69241,23.92671],[35.49372,23.75237],[35.52598,23.10244],[36.69069,22.20485],[36.86623,22.0],[32.9,22.0],[29.02,22.0],[25.0,22.0],[25.0,25.682499996360992],[25.0,29.238654529533452],[24.70007,30.04419],[24.95762,30.6616],[24.80287,31.08929],[25.16482,31.56915],[26.49533,31.58568],[27.45762,31.32126],[28.45048,31.02577],[28.91353,30.87005],[29.68342,31.18686],[30.09503,31.4734],[30.97693,31.55586],[31.68796,31.4296],[31.96041,30.9336],[32.19247,31.26034],[32.99392,31.02407],[33.7734,30.96746],[34.26544,31.21936],[34.9226,29.50133]]]}},{"type":"Feature","properties":{"admin":"Eritrea","name":"Eritrea","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[42.351560000000106,12.54223000000013],[42.00975,12.86582],[41.59856,13.452090000000108],[41.15519371924983,13.773319810435224],[40.8966,14.118640000000138],[40.02621870296917,14.51957916916228],[39.34061,14.53155],[39.0994,14.74064],[38.51295,14.50547],[37.90607,14.959430000000165],[37.59377,14.2131],[36.42951,14.42211],[36.32318891779811,14.822480577041055],[36.753860304518575,16.29187409104429],[36.852530000000115,16.95655],[37.16747,17.263140000000128],[37.9040000000001,17.42754],[38.41008995947322,17.99830739997031],[38.99062299984,16.84062612555169],[39.266110060388016,15.922723496967246],[39.81429365414021,15.435647284400314],[41.179274936697645,14.491079616753208],[41.734951613132345,13.921036892141554],[42.27683068214485,13.34399201095442],[42.589576450375255,13.0004212508619],[43.08122602720015,12.699638576707112],[42.77964236834474,12.455415757695672],[42.351560000000106,12.54223000000013]]]}},{"type":"Feature","properties":{"admin":"Spain","name":"Spain","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-9.034817674180244,41.88057058365967],[-8.98443315269567,42.59277517350626],[-9.392883673530644,43.026624660812686],[-7.978189663108308,43.74833771420098],[-6.754491746436754,43.56790945085392],[-5.411886359061596,43.57423981380967],[-4.347842779955783,43.403449205085025],[-3.51753170410609,43.455900783861296],[-1.901351284177764,43.42280202897834],[-1.502770961910528,43.034014390630425],[0.338046909190581,42.57954600683954],[0.701590610363894,42.7957343613326],[1.826793247087153,42.34338471126568],[2.985998976258457,42.47301504166985],[3.039484083680548,41.89212026627689],[2.091841668312184,41.22608856868308],[0.810524529635188,41.014731960609325],[0.721331007499401,40.67831838638923],[0.106691521819869,40.123933620762],[-0.278711310212941,39.30997813573271],[0.111290724293838,38.73851430923303],[-0.467123582349103,38.29236583104114],[-0.683389451490598,37.64235382745781],[-1.438382127274849,37.443063666324214],[-2.146452602538119,36.67414419203728],[-3.415780808923386,36.65889964451117],[-4.368900926114718,36.67783905694614],[-4.995219285492211,36.32470815687963],[-5.377159796561457,35.94685008396146],[-5.866432257500902,36.02981659600605],[-6.236693894872174,36.36767711033033],[-6.520190802425402,36.94291331638731],[-7.45372555177809,37.09778758396605],[-7.537105475281022,37.42890432387623],[-7.166507941099863,37.80389435480222],[-7.029281175148794,38.07576406508976],[-7.374092169616317,38.373058580064914],[-7.098036668313126,39.03007274022378],[-7.498632371439724,39.6295710312418],[-7.066591559263527,39.71189158788277],[-7.026413133156593,40.18452423762424],[-6.864019944679383,40.33087189387482],[-6.851126674822551,41.11108266861751],[-6.389087693700914,41.38181549739464],[-6.668605515967655,41.88338694921958],[-7.251308966490822,41.91834605566504],[-7.422512986673794,41.79207469335982],[-8.01317460776991,41.79088613541712],[-8.26385698081779,42.280468654950326],[-8.671945766626719,42.13468943945495],[-9.034817674180244,41.88057058365967]]]}},{"type":"Feature","properties":{"admin":"Estonia","name":"Estonia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[24.312862583114615,57.793423570376966],[24.42892785004215,58.383413397853275],[24.06119835785318,58.257374579493394],[23.42656009287668,58.61275340436462],[23.33979536305864,59.18724030215336],[24.604214308376186,59.46585378685501],[25.86418908051663,59.61109039981133],[26.94913577648452,59.44580333112577],[27.981114129353237,59.47538808861286],[28.131699253051742,59.300825100330904],[27.42016645682494,58.724581203844224],[27.71668582531571,57.791899115624354],[27.28818484875151,57.47452830670382],[26.46353234223778,57.47638865826632],[25.602809685984365,57.84752879498656],[25.164593540149266,57.970156968815175],[24.312862583114615,57.793423570376966]]]}},{"type":"Feature","properties":{"admin":"Ethiopia","name":"Ethiopia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[37.90607,14.959430000000165],[38.51295,14.50547],[39.0994,14.74064],[39.34061,14.53155],[40.02625000000011,14.51959],[40.8966,14.118640000000138],[41.1552,13.77333],[41.59856,13.452090000000108],[42.00975,12.86582],[42.351560000000106,12.54223000000013],[42.00000000000011,12.100000000000133],[41.66176000000012,11.6312],[41.73959000000018,11.355110000000137],[41.75557000000019,11.05091],[42.314140000000116,11.0342],[42.55493000000012,11.105110000000192],[42.77685184100094,10.926878566934416],[42.55876,10.572580000000126],[42.92812,10.02194000000014],[43.29699,9.540480000000167],[43.67875,9.183580000000116],[46.94834,7.99688],[47.78942,8.003],[44.9636,5.001620000000115],[43.66087,4.95755],[42.76967000000012,4.252590000000223],[42.12861,4.234130000000163],[41.855083092644115,3.918911920483764],[41.171800000000125,3.91909],[40.76848000000012,4.257020000000124],[39.854940000000106,3.83879000000013],[39.55938425876592,3.422060000000215],[38.89251,3.50074],[38.67114,3.61607],[38.43697000000014,3.58851],[38.120915000000124,3.598605],[36.85509323800823,4.447864127672857],[36.159078632855646,4.447864127672857],[35.81744766235362,4.776965663462021],[35.81744766235362,5.338232082790852],[35.298007118233095,5.506],[34.70702,6.59422000000012],[34.25032,6.82607],[34.075100000000184,7.22595],[33.56829,7.71334],[32.95418000000023,7.7849700000001],[33.294800000000116,8.35458],[33.82550000000014,8.37916],[33.97498,8.684560000000145],[33.96162,9.58358],[34.25745,10.63009],[34.73115000000012,10.910170000000106],[34.831630000000125,11.318960000000116],[35.26049,12.08286],[35.863630000000164,12.57828],[36.27022,13.563330000000118],[36.42951,14.42211],[37.59377,14.2131],[37.90607,14.959430000000165]]]}},{"type":"Feature","properties":{"admin":"Finland","name":"Finland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[28.591929559043187,69.06477692328664],[28.44594363781865,68.36461294216403],[29.9774263852206,67.69829702419264],[29.05458865735232,66.94428620062192],[30.21765,65.80598],[29.544429559046986,64.94867157659047],[30.444684686003704,64.20445343693908],[30.03587243014271,63.552813625738544],[31.516092156711117,62.86768748641287],[31.13999108249089,62.357692776124395],[30.211107212044443,61.78002777774967],[28.06999759289527,60.50351654727583],[26.25517296723697,60.42396067976249],[24.496623976344516,60.05731639265163],[22.869694858499457,59.84637319603621],[22.29076378753359,60.391921291741525],[21.322244093519313,60.7201699896595],[21.544866163832687,61.70532949487178],[21.05921105315368,62.607393296958726],[21.5360294939108,63.18973501245586],[22.442744174903986,63.81781037053128],[24.73051150889753,64.90234365504082],[25.39806766124394,65.11142650009373],[25.2940430030404,65.53434642197044],[23.903378533633795,66.0069273952796],[23.565879754335576,66.39605093043741],[23.539473097434435,67.93600861273524],[21.978534783626113,68.61684560818068],[20.64559288908952,69.10624726020085],[21.244936150810663,69.37044302029307],[22.356237827247405,68.8417414415149],[23.66204959483075,68.89124746365053],[24.73567915212672,68.64955678982145],[25.68921268077636,69.09211375596902],[26.17962202322624,69.82529897732611],[27.732292107867856,70.16419302029624],[29.01557295097197,69.76649119737797],[28.591929559043187,69.06477692328664]]]}},{"type":"Feature","properties":{"admin":"Fiji","name":"Fiji","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[178.3736,-17.33992],[178.71806,-17.62846],[178.55271,-18.15059],[177.93266,-18.28799],[177.38146,-18.16432],[177.28504,-17.72465],[177.67087,-17.38114],[178.12557,-17.50481],[178.3736,-17.33992]]],[[[179.36414266196422,-16.801354076946847],[178.72505936299706,-17.012041674368017],[178.59683859511702,-16.63915],[179.09660936299713,-16.43398427754742],[179.41350936299708,-16.379054277547393],[180.00000000000014,-16.067132663642436],[180.00000000000014,-16.555216566639157],[179.36414266196422,-16.801354076946847]]],[[[-179.91736938476524,-16.501783135649358],[-180.0,-16.555216566639157],[-180.0,-16.067132663642436],[-179.79332010904855,-16.020882256741228],[-179.91736938476524,-16.501783135649358]]]]}},{"type":"Feature","properties":{"admin":"Falkland Islands","name":"Falkland Is.","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-61.2,-51.85],[-60.0,-51.25],[-59.15,-51.5],[-58.55,-51.1],[-57.75,-51.55],[-58.05,-51.9],[-59.4,-52.2],[-59.85,-51.85],[-60.7,-52.3],[-61.2,-51.85]]]}},{"type":"Feature","properties":{"admin":"France","name":"France","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-52.55642473001838,2.504705308437053],[-52.93965715189496,2.124857692875622],[-53.41846513529525,2.053389187016037],[-53.55483924011348,2.334896551925964],[-53.77852067728888,2.376702785650053],[-54.088062506717264,2.105556545414629],[-54.52475419779974,2.311848863123785],[-54.27122962097578,2.738747870286942],[-54.18428402364474,3.194172268075234],[-54.01150387227682,3.622569891774857],[-54.3995422023565,4.212611395683481],[-54.4786329819792,4.896755682795642],[-53.95804460307092,5.756548163267808],[-53.61845292826484,5.646529038918401],[-52.88214128275406,5.409850979021598],[-51.82334286152592,4.565768133966144],[-51.657797410678874,4.156232408053028],[-52.24933753112398,3.241094468596287],[-52.55642473001838,2.504705308437053]]],[[[9.560016310269132,42.15249197037956],[9.229752231491773,41.38000682226444],[8.77572309737536,41.58361196549443],[8.544212680707828,42.25651662858308],[8.746009148807586,42.628121853193946],[9.3900008480289,43.009984849614725],[9.560016310269132,42.15249197037956]]],[[[3.588184441755714,50.37899241800356],[4.28602298342514,49.90749664977254],[4.799221632515752,49.985373033236314],[5.674051954784885,49.52948354755743],[5.897759230176375,49.442667141307155],[6.186320428094204,49.46380280211445],[6.658229607783538,49.20195831969155],[8.09927859867477,49.017783515003366],[7.59367638513106,48.33301911070373],[7.466759067422228,47.62058197691185],[7.192202182655533,47.44976552997098],[6.736571079138086,47.54180125588287],[6.768713820023634,47.28770823830367],[6.037388950228971,46.725778713561894],[6.022609490593566,46.2729898138205],[6.500099724970453,46.42967275652942],[6.84359297041456,45.99114655210066],[6.80235517744566,45.70857982032867],[7.096652459347835,45.33309886329586],[6.749955275101711,45.028517971367584],[7.007562290076661,44.25476675066138],[7.549596388386161,44.12790110938481],[7.435184767291841,43.69384491634917],[6.529245232783068,43.12889232031835],[4.556962517931395,43.39965098731158],[3.100410597352719,43.07520050716712],[2.985998976258486,42.47301504166988],[1.826793247087181,42.34338471126565],[0.701590610363922,42.79573436133264],[0.338046909190581,42.57954600683955],[-1.502770961910471,43.03401439063048],[-1.901351284177735,43.42280202897834],[-1.384225226232956,44.022610378590166],[-1.193797573237361,46.01491771095486],[-2.225724249673788,47.0643626979382],[-2.963276129559573,47.57032664650796],[-4.491554938159481,47.95495433205641],[-4.592349819344746,48.68416046812694],[-3.295813971357745,48.901692409859635],[-1.616510789384932,48.64442129169458],[-1.933494025063254,49.77634186461576],[-0.98946895995536,49.34737580016087],[1.338761020522753,50.127173163445256],[1.6390010921385,50.9466063502975],[2.51357303224617,51.14850617126185],[2.65842207196033,50.796848049515646],[3.123251580425716,50.780363267614504],[3.588184441755714,50.37899241800356]]]]}},{"type":"Feature","properties":{"admin":"Gabon","name":"Gabon","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[11.093772820691925,-3.978826592630546],[10.066135288135738,-2.969482517105681],[9.405245395554967,-2.144313246269042],[8.797995639693168,-1.111301364754496],[8.830086704146423,-0.779073581550037],[9.048419630579586,-0.459351494960217],[9.291350538783687,0.268666083167687],[9.49288862472198,1.010119533691494],[9.83028405115564,1.067893784993799],[11.28507897303646,1.057661851400013],[11.276449008843713,2.261050930180871],[11.751665480199788,2.326757513839993],[12.359380323952218,2.19281220133945],[12.951333855855603,2.321615708826939],[13.07582238124675,2.267097072759014],[13.003113641012074,1.830896307783319],[13.282631463278816,1.31418366129688],[14.026668735417214,1.395677395021153],[14.276265903386951,1.196929836426619],[13.843320753645653,0.038757635901149],[14.31641849127774,-0.552627455247048],[14.425455763413591,-1.333406670744971],[14.299210239324564,-1.998275648612213],[13.992407260807706,-2.470804945489099],[13.109618767965626,-2.428740329603513],[12.57528445806764,-1.948511244315134],[12.49570275233816,-2.391688327650242],[11.820963575903187,-2.514161472181982],[11.4780387712143,-2.765618991714241],[11.855121697648114,-3.42687061932105],[11.093772820691925,-3.978826592630546]]]}},{"type":"Feature","properties":{"admin":"United Kingdom","name":"United Kingdom","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-5.661948614921896,54.55460317648384],[-6.197884894220976,53.86756500916333],[-6.953730231137994,54.07370229757562],[-7.572167934591078,54.05995636658598],[-7.366030646178785,54.59584096945269],[-7.572167934591078,55.13162221945488],[-6.733847011736144,55.17286001242378],[-5.661948614921896,54.55460317648384]]],[[[-3.00500484863528,58.63500010846632],[-4.073828497728015,57.55302480735525],[-3.055001796877661,57.69001902936093],[-1.959280564776918,57.68479970969951],[-2.219988165689301,56.870017401753515],[-3.119003058271118,55.97379303651546],[-2.085009324543023,55.909998480851264],[-2.005675679673856,55.80490285035022],[-1.11499101399221,54.624986477265395],[-0.4304849918542,54.464376125702145],[0.184981316742039,53.32501414653102],[0.469976840831777,52.92999949809196],[1.681530795914739,52.73952016866399],[1.559987827164377,52.099998480836],[1.050561557630914,51.80676056579568],[1.4498653499503,51.28942780212195],[0.550333693045502,50.76573883727586],[-0.787517462558639,50.774988918656206],[-2.489997524414377,50.50001862243123],[-2.956273972984035,50.696879991247],[-3.617448085942327,50.2283556178727],[-4.542507900399243,50.34183706318566],[-5.245023159191134,49.95999990498108],[-5.776566941745299,50.159677639356815],[-4.309989793301837,51.210001125689146],[-3.414850633142122,51.42600861266923],[-3.422719467108322,51.42684816740608],[-4.984367234710873,51.59346609151096],[-5.267295701508885,51.99140045837457],[-4.222346564134852,52.30135569926135],[-4.770013393564112,52.84000499125561],[-4.579999152026914,53.495003770555165],[-3.093830673788658,53.40454740066967],[-3.092079637047106,53.404440822963544],[-2.945008510744343,53.98499970154667],[-3.614700825433033,54.60093677329256],[-3.63000545898933,54.615012925833],[-4.844169073903003,54.79097117778684],[-5.082526617849224,55.06160065369936],[-4.719112107756643,55.50847260194347],[-5.047980922862108,55.78398550070752],[-5.586397670911139,55.311146145236805],[-5.64499874513018,56.27501496034479],[-6.149980841486352,56.78500967063353],[-5.78682471355529,57.81884837506463],[-5.009998745127574,58.63001333275004],[-4.211494513353555,58.55084503847915],[-3.00500484863528,58.63500010846632]]]]}},{"type":"Feature","properties":{"admin":"Georgia","name":"Georgia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[41.55408410011065,41.53565623632756],[41.7031706072727,41.96294281673291],[41.45347008643838,42.645123399417926],[40.875469191253785,43.01362803809128],[40.32139448422031,43.12863393815683],[39.95500857927092,43.434997666999216],[40.07696495947976,43.55310415300231],[40.92218468604562,43.38215851498078],[42.394394565608806,43.22030792904262],[43.75601688006738,42.74082815202248],[43.93119998553683,42.55497386328476],[44.53762291848198,42.71199270280362],[45.4702791684857,42.50278066666996],[45.77641035338276,42.09244395605635],[46.40495079934882,41.8606751572273],[46.14543175637901,41.72280243587257],[46.637908156120574,41.18167267512822],[46.50163740416692,41.064444688474104],[45.96260053893038,41.12387258560977],[45.21742638528158,41.41145193131404],[44.97248009621807,41.24812856705558],[43.582745802592726,41.09214325618256],[42.61954878110448,41.583172715819934],[41.55408410011065,41.53565623632756]]]}},{"type":"Feature","properties":{"admin":"Ghana","name":"Ghana","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[1.060121697604927,5.928837388528875],[-0.507637905265938,5.343472601742675],[-1.063624640294193,5.000547797053811],[-1.964706590167594,4.71046214438337],[-2.856125047202397,4.994475816259508],[-2.810701463217839,5.389051215024109],[-3.244370083011261,6.2504715031135],[-2.983584967450326,7.379704901555511],[-2.56218950032624,8.219627793811481],[-2.827496303712706,9.642460842319776],[-2.963896246747111,10.39533478438008],[-2.94040930827046,10.962690334512557],[-1.203357713211431,11.009819240762736],[-0.761575893548183,10.936929633015051],[-0.438701544588582,11.09834096927872],[0.023802524423701,11.018681748900802],[-0.049784715159944,10.706917832883928],[0.367579990245389,10.191212876827176],[0.365900506195885,9.46500397382948],[0.461191847342121,8.677222601756013],[0.712029249686878,8.312464504423827],[0.490957472342245,7.411744289576474],[0.570384148774849,6.914358628767188],[0.836931186536333,6.279978745952147],[1.060121697604927,5.928837388528875]]]}},{"type":"Feature","properties":{"admin":"Guinea","name":"Guinea","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-8.439298468448696,7.686042792181736],[-8.722123582382123,7.711674302598509],[-8.926064622422002,7.309037380396375],[-9.208786383490844,7.313920803247952],[-9.403348151069748,7.526905218938906],[-9.33727983238458,7.928534450711351],[-9.755342169625832,8.541055202666923],[-10.016566534861251,8.42850393313523],[-10.230093553091276,8.40620555260129],[-10.505477260774668,8.348896389189603],[-10.494315151399627,8.715540676300433],[-10.65477047366589,8.977178452994194],[-10.622395188835036,9.267910061068276],[-10.8391519840833,9.688246161330367],[-11.117481248407328,10.045872911006285],[-11.917277390988655,10.046983954300556],[-12.150338100625005,9.858571682164378],[-12.425928514037562,9.835834051955953],[-12.596719122762206,9.620188300001969],[-12.711957566773076,9.342711696810763],[-13.246550258832512,8.903048610871506],[-13.685153977909788,9.494743760613458],[-14.074044969122278,9.886166897008248],[-14.330075852912367,10.015719712763966],[-14.579698859098254,10.214467271358512],[-14.6932319808435,10.65630076745404],[-14.83955379887794,10.87657156009814],[-15.130311245168167,11.040411688679525],[-14.685687221728896,11.527823798056485],[-14.382191534878729,11.509271958863692],[-14.121406419317776,11.677117010947692],[-13.900799729863772,11.678718980348744],[-13.743160773157411,11.811269029177408],[-13.828271857142122,12.14264415124904],[-13.718743658899513,12.247185573775509],[-13.700476040084322,12.586182969610192],[-13.217818162478236,12.575873521367964],[-12.49905066573056,12.332089952031051],[-12.278599005573438,12.354440008997283],[-12.20356482588563,12.4656476912894],[-11.658300950557928,12.386582749882834],[-11.513942836950587,12.442987575729417],[-11.456168585648268,12.076834214725336],[-11.297573614944508,12.077971096235768],[-11.036555955438256,12.211244615116511],[-10.870829637078211,12.177887478072106],[-10.593223842806278,11.923975328005977],[-10.165213792348837,11.844083563682744],[-9.890992804392011,12.060478623904968],[-9.567911749703212,12.194243068892472],[-9.327616339546008,12.334286200403453],[-9.12747351727958,12.308060411015331],[-8.905264858424529,12.088358059126431],[-8.786099005559462,11.812560939984705],[-8.37630489748491,11.393645941610629],[-8.581305304386772,11.1362456323648],[-8.620321010767126,10.81089081465518],[-8.407310756860026,10.90925690352276],[-8.28235714357828,10.792597357623842],[-8.335377163109738,10.494811916541932],[-8.029943610048617,10.206534939001711],[-8.22933712404682,10.129020290563895],[-8.309616461612249,9.78953196862244],[-8.079113735374348,9.376223863152031],[-7.832100389019186,8.575704250518625],[-8.203498907900878,8.455453192575446],[-8.299048631208562,8.316443589710302],[-8.221792364932197,8.123328762235571],[-8.280703497744936,7.687179673692156],[-8.439298468448696,7.686042792181736]]]}},{"type":"Feature","properties":{"admin":"Gambia","name":"Gambia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-16.84152462408127,13.151393947802555],[-16.713728807023468,13.594958604379851],[-15.624596320039936,13.623587347869556],[-15.398770310924457,13.860368760630916],[-15.081735398813816,13.876491807505982],[-14.687030808968483,13.63035696049978],[-14.376713833055785,13.625680243377372],[-14.046992356817478,13.794067898000446],[-13.844963344772404,13.505041612192],[-14.277701788784553,13.28058502853224],[-14.712197231494626,13.298206691943774],[-15.141163295949465,13.509511623585237],[-15.511812506562933,13.278569647672864],[-15.691000535534991,13.270353094938455],[-15.931295945692208,13.130284125211332],[-16.84152462408127,13.151393947802555]]]}},{"type":"Feature","properties":{"admin":"Guinea Bissau","name":"Guinea-Bissau","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-15.130311245168167,11.040411688679525],[-15.664180467175523,11.458474025920792],[-16.08521419927356,11.524594021038236],[-16.3147867497302,11.806514797406548],[-16.308947312881227,11.958701890506116],[-16.613838263403277,12.170911159712698],[-16.67745195155457,12.38485158940105],[-16.14771684413058,12.547761542201185],[-15.816574266004253,12.515567124883344],[-15.548476935274005,12.628170070847345],[-13.700476040084322,12.586182969610192],[-13.718743658899513,12.247185573775509],[-13.828271857142122,12.14264415124904],[-13.743160773157411,11.811269029177408],[-13.900799729863772,11.678718980348744],[-14.121406419317776,11.677117010947692],[-14.382191534878729,11.509271958863692],[-14.685687221728896,11.527823798056485],[-15.130311245168167,11.040411688679525]]]}},{"type":"Feature","properties":{"admin":"Equatorial Guinea","name":"Eq. Guinea","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[9.49288862472198,1.010119533691494],[9.305613234096256,1.160911363119183],[9.649158155972628,2.283866075037735],[11.276449008843713,2.261050930180871],[11.28507897303646,1.057661851400013],[9.83028405115564,1.067893784993799],[9.49288862472198,1.010119533691494]]]}},{"type":"Feature","properties":{"admin":"Greece","name":"Greece","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[23.699980096133,35.705004380835526],[24.246665073348673,35.36802236586015],[25.025015496528873,35.42499563246198],[25.769207797964185,35.35401805270907],[25.74502322765158,35.17999766696621],[26.29000288260172,35.29999034274791],[26.16499759288765,35.00499542900979],[24.7249821306423,34.9199876978896],[24.73500735850694,35.08499054619758],[23.514978468528103,35.27999156345097],[23.699980096133,35.705004380835526]]],[[[26.60419559093628,41.5621145696611],[26.294602085075777,40.93626129817424],[26.0569421729655,40.82412344010083],[25.44767703624418,40.852545477861455],[24.925848422960932,40.947061672523226],[23.71481123220081,40.68712921809512],[24.407998894964063,40.12499298762408],[23.89996788910258,39.96200552017557],[23.342999301860797,39.960997829745786],[22.81398766448896,40.47600515396655],[22.626298862404777,40.256561184239175],[22.849747755634805,39.65931081802576],[23.350027296652595,39.190011298167256],[22.97309939951554,38.97090322524965],[23.53001631032495,38.51000112563846],[24.025024855248937,38.21999298761644],[24.0400110206136,37.65501455336942],[23.115002882589145,37.920011298162215],[23.409971958111065,37.40999074965739],[22.77497195810863,37.30501007745655],[23.154225294698612,36.42250580499204],[22.4900281104511,36.410000108377446],[21.670026482843692,36.84498647719419],[21.295010613701574,37.64498932550469],[21.12003421396133,38.31032339126272],[20.73003217945458,38.76998525649878],[20.217712029712853,39.34023468683963],[20.150015903410516,39.62499766698402],[20.61500044117278,40.11000682225942],[20.67499677906363,40.43499990494305],[20.99998986174727,40.58000397395397],[21.020040317476425,40.84272695572587],[21.67416059742697,40.931274522457976],[22.055377638444263,41.149865831052686],[22.597308383889008,41.1304871689432],[22.76177,41.3048],[22.95237715016656,41.33799388281122],[23.692073601992455,41.30908091894385],[24.49264489105803,41.583896185872035],[25.19720136892553,41.23448598893065],[26.106138136507177,41.32889883072782],[26.11704186372091,41.826904608724725],[26.60419559093628,41.5621145696611]]]]}},{"type":"Feature","properties":{"admin":"Greenland","name":"Greenland","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-46.76379,82.62796],[-43.40644,83.22516],[-39.89753,83.18018],[-38.62214,83.54905],[-35.08787,83.64513],[-27.10046,83.51966],[-20.84539,82.72669],[-22.69182,82.34165],[-26.51753,82.29765],[-31.9,82.2],[-31.39646,82.02154],[-27.85666,82.13178],[-24.84448,81.78697],[-22.90328,82.09317],[-22.07175,81.73449],[-23.16961,81.15271],[-20.62363,81.52462],[-15.76818,81.91245],[-12.77018,81.71885],[-12.20855,81.29154],[-16.28533,80.58004],[-16.85,80.35],[-20.04624,80.17708],[-17.73035,80.12912],[-18.9,79.4],[-19.70499,78.75128],[-19.67353,77.63859],[-18.47285,76.98565],[-20.03503,76.94434],[-21.67944,76.62795],[-19.83407,76.09808],[-19.59896,75.24838],[-20.66818,75.15585],[-19.37281,74.29561],[-21.59422,74.22382],[-20.43454,73.81713],[-20.76234,73.46436],[-22.17221,73.30955],[-23.56593,73.30663],[-22.31311,72.62928],[-22.29954,72.18409],[-24.27834,72.59788],[-24.79296,72.3302],[-23.44296,72.08016],[-22.13281,71.46898],[-21.75356,70.66369],[-23.53603,70.471],[-24.30702,70.85649],[-25.54341,71.43094],[-25.20135,70.75226],[-26.36276,70.22646],[-23.72742,70.18401],[-22.34902,70.12946],[-25.02927,69.2588],[-27.74737,68.47046],[-30.67371,68.12503],[-31.77665,68.12078],[-32.81105,67.73547],[-34.20196,66.67974],[-36.35284,65.9789],[-37.04378,65.93768],[-38.37505,65.69213],[-39.81222,65.45848],[-40.66899,64.83997],[-40.68281,64.13902],[-41.1887,63.48246],[-42.81938,62.68233],[-42.41666,61.90093],[-42.86619,61.07404],[-43.3784,60.09772],[-44.7875,60.03676],[-46.26364,60.85328],[-48.26294,60.85843],[-49.23308,61.40681],[-49.90039,62.38336],[-51.63325,63.62691],[-52.14014,64.27842],[-52.27659,65.1767],[-53.66166,66.09957],[-53.30161,66.8365],[-53.96911,67.18899],[-52.9804,68.35759],[-51.47536,68.72958],[-51.08041,69.14781],[-50.87122,69.9291],[-52.013585,69.574925],[-52.55792,69.42616],[-53.45629,69.283625],[-54.68336,69.61003],[-54.75001,70.28932],[-54.35884,70.821315],[-53.431315,70.835755],[-51.39014,70.56978],[-53.10937,71.20485],[-54.00422,71.54719],[-55.0,71.40653696727256],[-55.83468,71.65444],[-54.71819,72.58625],[-55.32634,72.95861],[-56.12003,73.64977],[-57.32363,74.71026],[-58.59679,75.09861],[-58.58516,75.51727],[-61.26861,76.10238],[-63.39165,76.1752],[-66.06427,76.13486],[-68.50438,76.06141],[-69.66485,76.37975],[-71.40257,77.00857],[-68.77671,77.32312],[-66.76397,77.37595],[-71.04293,77.63595],[-73.297,78.04419],[-73.15938,78.43271],[-69.37345,78.91388],[-65.7107,79.39436],[-65.3239,79.75814],[-68.02298,80.11721],[-67.15129,80.51582],[-63.68925,81.21396],[-62.23444,81.3211],[-62.65116,81.77042],[-60.28249,82.03363],[-57.20744,82.19074],[-54.13442,82.19962],[-53.04328,81.88833],[-50.39061,82.43883],[-48.00386,82.06481],[-46.59984,81.985945],[-44.523,81.6607],[-46.9007,82.19979],[-46.76379,82.62796]]]}},{"type":"Feature","properties":{"admin":"Guatemala","name":"Guatemala","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-90.09555457229095,13.73533763270073],[-90.60862403030082,13.909771429901948],[-91.23241024449604,13.927832342987951],[-91.6897466702791,14.126218166556452],[-92.22775000686981,14.538828640190925],[-92.2032295397473,14.830102850804066],[-92.08721594925204,15.064584662328436],[-92.22924862340625,15.251446641495855],[-91.7479601712559,16.06656484625172],[-90.46447262242263,16.06956207932465],[-90.43886695022202,16.41010976812809],[-90.6008467272409,16.470777899638758],[-90.7118218655877,16.687483018454724],[-91.08167009150064,16.918476670799404],[-91.45392127151514,17.25217723232417],[-91.0022692532842,17.254657701074176],[-91.00151994501594,17.817594916245707],[-90.06793351923095,17.819326076727474],[-89.1430804105033,17.808318996649316],[-89.15080603713092,17.015576687075832],[-89.22912167026927,15.886937567605166],[-88.93061275913524,15.887273464415072],[-88.60458614780585,15.706380113177358],[-88.51836402052685,15.855389105690971],[-88.22502275262201,15.7277224797139],[-88.68067969435562,15.3462470565353],[-89.15481096063354,15.066419175674806],[-89.22522009963124,14.874286200413618],[-89.14553504103715,14.67801911056908],[-89.35332597528277,14.424132798719112],[-89.58734269891654,14.362586167859485],[-89.5342193265205,14.244815578666302],[-89.7219339668207,14.134228013561694],[-90.06467790399658,13.881969509328924],[-90.09555457229095,13.73533763270073]]]}},{"type":"Feature","properties":{"admin":"Guyana","name":"Guyana","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-59.75828487815918,8.367034816924045],[-59.10168412945864,7.99920197187049],[-58.48296220562804,7.347691351750696],[-58.454876064677414,6.832787380394463],[-58.07810319683736,6.809093736188641],[-57.54221859397063,6.321268215353355],[-57.147436489476874,5.973149929219161],[-57.307245856339485,5.073566595882225],[-57.91428890647212,4.812626451024413],[-57.86020952007869,4.576801052260449],[-58.044694383360664,4.060863552258382],[-57.60156897645785,3.334654649260684],[-57.2814334784097,3.333491929534119],[-57.1500978257399,2.768926906745406],[-56.53938574891454,1.89952260986692],[-56.782704230360814,1.863710842288653],[-57.33582292339689,1.948537705895759],[-57.66097103537736,1.682584947105638],[-58.113449876525,1.507195135907025],[-58.42947709820596,1.46394196207872],[-58.54001298687829,1.26808828369252],[-59.03086157900264,1.317697658692722],[-59.64604366722124,1.786893825686789],[-59.71854570172673,2.249630438644359],[-59.97452490908454,2.755232652188055],[-59.81541317405786,3.606498521332085],[-59.53803992373122,3.958802598481937],[-59.7674057684587,4.423502915866606],[-60.11100236676737,4.574966538914082],[-59.980958624904865,5.014061184098138],[-60.21368343773132,5.2444863956876],[-60.73357418480371,5.2002772078619],[-61.41030290388194,5.959068101419616],[-61.13941504580794,6.234296779806142],[-61.15933631045647,6.696077378766317],[-60.543999192940966,6.856584377464881],[-60.29566809756238,7.043911444522918],[-60.63797278506375,7.414999904810853],[-60.550587938058186,7.779602972846178],[-59.75828487815918,8.367034816924045]]]}},{"type":"Feature","properties":{"admin":"Honduras","name":"Honduras","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-87.31665442579546,12.984685777229],[-87.48940873894712,13.29753489832393],[-87.7931111315265,13.384480495655165],[-87.72350297722927,13.785050360565602],[-87.8595153470216,13.893312486217097],[-88.06534257684011,13.964625962779788],[-88.50399797234962,13.84548594813094],[-88.54123084181593,13.98015473068352],[-88.84307288283273,14.140506700085208],[-89.05851192905764,14.340029405164213],[-89.35332597528279,14.424132798719084],[-89.14553504103716,14.678019110569148],[-89.22522009963123,14.874286200413676],[-89.15481096063353,15.066419175674865],[-88.68067969435556,15.346247056535386],[-88.22502275262192,15.727722479714028],[-88.12115312371536,15.688655096901355],[-87.9018125068524,15.864458319558194],[-87.61568010125231,15.878798529519198],[-87.52292090528844,15.79727895757878],[-87.36776241733212,15.846940009011286],[-86.90319129102816,15.756712958229564],[-86.44094560417737,15.782835394753189],[-86.11923397494432,15.893448798073958],[-86.00195431185783,16.005405788634388],[-85.68331743034625,15.953651841693947],[-85.44400387240255,15.885749009662444],[-85.18244361035718,15.909158433490628],[-84.98372188997881,15.995923163308698],[-84.52697974316712,15.857223619037423],[-84.36825558138257,15.835157782448729],[-84.0630545722668,15.648244126849132],[-83.77397661002611,15.42407176356687],[-83.41038123242036,15.27090281825377],[-83.14721900097412,14.995829169164208],[-83.489988776366,15.01626719813566],[-83.62858496777287,14.880073960830368],[-83.97572140169356,14.749435939996484],[-84.2283416409524,14.748764146376626],[-84.44933590364859,14.62161428472251],[-84.64958207877963,14.666805324761864],[-84.82003679069429,14.819586696832628],[-84.9245006985723,14.790492865452332],[-85.05278744173687,14.55154104253472],[-85.14875057650288,14.560196844943617],[-85.1653645494848,14.354369615125048],[-85.51441301140026,14.079011745657905],[-85.69866533073694,13.960078436737998],[-85.8012947252685,13.8360549992376],[-86.0962638007906,14.03818736414723],[-86.31214209668983,13.771356106008223],[-86.52070817741989,13.778487453664464],[-86.7550866360796,13.754845485890936],[-86.73382178419146,13.263092556201398],[-86.88055701368435,13.254204209847211],[-87.00576900912743,13.025794379117254],[-87.31665442579546,12.984685777229]]]}},{"type":"Feature","properties":{"admin":"Croatia","name":"Croatia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[18.82983808765004,45.90887767189184],[19.072768995854172,45.52151113543208],[19.390475701584588,45.23651561134237],[19.00548628101012,44.860233669609144],[18.55321414559165,45.08158966733145],[17.8617834815264,45.06774038347714],[17.00214603035101,45.233776760430935],[16.534939406000202,45.211607570977705],[16.31815677253587,45.0041266953259],[15.959367303133371,45.233776760430935],[15.750026075918978,44.81871165626255],[16.239660271884528,44.351143296885695],[16.45644290534886,44.041239732431265],[16.916156447017325,43.66772247982566],[17.29737348803445,43.44634064388735],[17.67492150235898,43.0285625270236],[18.56,42.65],[18.450016310304814,42.47999136002931],[17.509970330483323,42.84999461523914],[16.93000573087164,43.20999848080037],[16.01538455573768,43.5072154811272],[15.174453973052094,44.24319122982791],[15.376250441151791,44.317915350922064],[14.920309279040504,44.73848399512945],[14.901602410550874,45.0760602890761],[14.258747592839992,45.233776760430935],[13.952254672917032,44.80212352149685],[13.65697553880119,45.13693512631595],[13.679403110415816,45.48414907488499],[13.715059848697248,45.50032379819242],[14.411968214585496,45.4661656764474],[14.595109490627916,45.63494090431282],[14.93524376797296,45.47169505470276],[15.327674594797424,45.452316392593325],[15.323953891672428,45.73178253842769],[15.671529575267638,45.8341535507979],[15.768732944408608,46.23810822202352],[16.56480838386494,46.503750922219794],[16.88251508959541,46.380631822284435],[17.630066359129554,45.95176911069409],[18.456062452882858,45.75948110613614],[18.82983808765004,45.90887767189184]]]}},{"type":"Feature","properties":{"admin":"Haiti","name":"Haiti","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-73.1897906155176,19.91568390551191],[-72.5796728176636,19.87150055590235],[-71.71236141629295,19.714455878167353],[-71.62487321642281,19.169837958243303],[-71.70130265978248,18.78541697842405],[-71.94511206733554,18.616900132720257],[-71.68773759630587,18.316660061104468],[-71.70830481635804,18.04499705654609],[-72.37247616238933,18.214960842354053],[-72.84441118029484,18.14561107021836],[-73.45455481636502,18.217906398994696],[-73.92243323433564,18.030992743395],[-74.45803361682476,18.342549953682703],[-74.36992529976712,18.664907538319408],[-73.44954220243271,18.52605296475114],[-72.69493709989062,18.445799465401855],[-72.33488155789699,18.66842153571525],[-72.79164954292489,19.101625067618027],[-72.78410478381028,19.483591416903405],[-73.41502234566174,19.639550889560276],[-73.1897906155176,19.91568390551191]]]}},{"type":"Feature","properties":{"admin":"Hungary","name":"Hungary","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[16.20229821133736,46.85238597267695],[16.534267612380372,47.4961709661691],[16.34058434415041,47.712901923201215],[16.903754103267257,47.71486562762832],[16.979666782304033,48.1234970159763],[17.488472934649813,47.86746613218621],[17.857132602620023,47.758428860050365],[18.696512892336923,47.88095368101439],[18.777024773847668,48.08176829690063],[19.174364861739885,48.11137889260386],[19.66136355965849,48.26661489520865],[19.76947065601311,48.2026911484636],[20.239054396249344,48.327567247096916],[20.473562045989866,48.56285004332181],[20.80129397958492,48.62385407164237],[21.87223636240173,48.31997081155001],[22.085608351334848,48.42226430927178],[22.640819939878742,48.15023956968735],[22.710531447040488,47.882193915389394],[22.09976769378283,47.672439276716695],[21.62651492685387,46.99423777931814],[21.021952345471245,46.316087958351886],[20.220192498462833,46.12746898048655],[19.59604454924158,46.17172984474453],[18.829838087649957,45.908877671891915],[18.456062452882858,45.75948110613612],[17.630066359129554,45.95176911069418],[16.882515089595298,46.380631822284435],[16.564808383864854,46.50375092221982],[16.370504998447412,46.8413272161665],[16.20229821133736,46.85238597267695]]]}},{"type":"Feature","properties":{"admin":"Indonesia","name":"Indonesia","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[120.71560875863044,-10.239581394087862],[120.29501427620687,-10.258649997603523],[118.96780846565468,-9.55796925215803],[119.90030968636161,-9.361340427287514],[120.4257556499054,-9.665921319215796],[120.77550174365672,-9.969675388227456],[120.71560875863044,-10.239581394087862]]],[[[124.4359501486194,-10.14000090906144],[123.5799817241367,-10.35998748132796],[123.459989048355,-10.239994805546171],[123.55000939340744,-9.900015557497978],[123.9800089865081,-9.290026950724693],[124.9686824891162,-8.892790215697046],[125.07001997284061,-9.089987481322837],[125.08852013560107,-9.39317310957932],[124.4359501486194,-10.14000090906144]]],[[[117.90001834520774,-8.095681247594923],[118.26061648974047,-8.362383314653327],[118.87845991422212,-8.280682875199828],[119.12650678922309,-8.705824883665072],[117.97040164598928,-8.906639499551257],[117.27773074754901,-9.040894870645555],[116.74014082241662,-9.032936700072636],[117.08373742072531,-8.45715789147654],[117.63202436734213,-8.44930307376819],[117.90001834520774,-8.095681247594923]]],[[[122.90353722543608,-8.094234307490735],[122.75698286345629,-8.649807631060638],[121.2544905945701,-8.933666273639941],[119.92439090380957,-8.810417982623873],[119.9209285828461,-8.44485890059107],[120.71509199430754,-8.236964613480863],[121.34166873584655,-8.53673959720602],[122.0073645366304,-8.46062021244016],[122.90353722543608,-8.094234307490735]]],[[[108.62347863162893,-6.777673841990675],[110.53922732955328,-6.877357679881682],[110.75957563684591,-6.465186455921751],[112.61481123255635,-6.946035658397589],[112.97876834518809,-7.594213148634578],[114.47893517462114,-7.776527601760277],[115.70552697150106,-8.370806573116864],[114.56451134649647,-8.75181690840483],[113.46473351446087,-8.348947442257424],[112.55967247930103,-8.376180922075163],[111.52206139531245,-8.302128594600957],[110.5861495300743,-8.12260466881902],[109.42766727095518,-7.740664157749761],[108.6936552266813,-7.641600437046219],[108.2777632995963,-7.766657403192579],[106.45410200401612,-7.354899590690947],[106.28062422081229,-6.924899997590201],[105.36548628135552,-6.851416110871169],[106.05164594932705,-5.895918877794499],[107.26500857954017,-5.954985039904058],[108.07209109907468,-6.345762220895237],[108.48684614464923,-6.421984958525768],[108.62347863162893,-6.777673841990675]]],[[[134.72462446506665,-6.214400730009286],[134.2101339051689,-6.895237725454704],[134.112775506731,-6.142467136259014],[134.29033572808578,-5.783057549669038],[134.49962527886788,-5.445042006047898],[134.7270015809521,-5.737582289252158],[134.72462446506665,-6.214400730009286]]],[[[127.2492151225889,-3.459065036638889],[126.87492272349884,-3.790982761249579],[126.1838021180273,-3.607376397316556],[125.98903364471927,-3.177273451351325],[127.00065148326496,-3.12931772218441],[127.2492151225889,-3.459065036638889]]],[[[130.47134402885177,-3.09376433676762],[130.83483605359277,-3.858472181822761],[129.99054650280812,-3.446300957862817],[129.1552486512424,-3.362636813982248],[128.59068362845363,-3.428679294451256],[127.89889122936233,-3.393435967628192],[128.13587934785278,-2.843650404474914],[129.3709977560609,-2.802154229344551],[130.47134402885177,-3.09376433676762]]],[[[134.14336795464777,-1.151867364103594],[134.42262739475302,-2.769184665542383],[135.45760298069467,-3.367752780779113],[136.29331424371875,-2.30704233155609],[137.4407377463275,-1.703513278819372],[138.32972741104476,-1.70268645590265],[139.18492068904294,-2.051295668143637],[139.9266841981604,-2.409051608900284],[141.00021040259185,-2.600151055515624],[141.017056919519,-5.85902190513802],[141.03385176001387,-9.117892754760415],[140.14341515519254,-8.297167657100955],[139.1277665549281,-8.096042982620942],[138.88147667862495,-8.380935153846094],[137.6144739116928,-8.41168263105976],[138.03909915583517,-7.597882175327354],[138.66862145401478,-7.320224704623072],[138.40791385310234,-6.232849216337483],[137.92783979711083,-5.393365573755998],[135.98925011611345,-4.546543877789047],[135.16459760959967,-4.462931410340771],[133.66288048719787,-3.538853448097526],[133.36770470594678,-4.024818617370314],[132.98395551974733,-4.112978610860281],[132.75694095268895,-3.746282647317129],[132.7537886903192,-3.311787204607071],[131.98980431531618,-2.820551039240455],[133.06684451714347,-2.460417982598443],[133.7800309592035,-2.479848321140209],[133.69621178602614,-2.214541517753687],[132.2323734884942,-2.212526136894325],[131.83622195854468,-1.617161960459597],[130.9428397970828,-1.432522067880796],[130.51955814018004,-0.937720228686075],[131.8675378765136,-0.695461114101818],[132.38011640841677,-0.369537855636977],[133.98554813042838,-0.780210463060442],[134.14336795464777,-1.151867364103594]]],[[[125.24050052297157,1.419836127117605],[124.43703535369734,0.427881171058971],[123.6855049988767,0.235593166500877],[122.72308312387285,0.431136786293337],[121.0567248881891,0.381217352699451],[120.18308312386272,0.23724681233422],[120.04086958219546,-0.519657891444851],[120.9359053894907,-1.408905938323372],[121.47582075407615,-0.955962009285116],[123.34056481332848,-0.615672702643081],[123.25839928598448,-1.076213067228337],[122.8227152853316,-0.930950616055881],[122.38852990121536,-1.516858005381124],[121.50827355355545,-1.904482924002422],[122.45457238168427,-3.186058444840881],[122.27189619353254,-3.529500013852696],[123.17096276254654,-4.683693129091707],[123.16233279835376,-5.34060393638596],[122.62851525277868,-5.634591159694494],[122.23639448454806,-5.282933037948281],[122.71956912647704,-4.46417164471579],[121.73823367725436,-4.851331475446499],[121.48946333220124,-4.574552504091215],[121.61917117725386,-4.188477878438674],[120.89818159391768,-3.602105401222828],[120.97238895068877,-2.627642917494909],[120.30545291552988,-2.931603692235725],[120.39004723519172,-4.097579034037223],[120.43071658740537,-5.528241062037778],[119.79654341031949,-5.67340016034565],[119.36690555224492,-5.379878024927804],[119.65360639860009,-4.459417412944958],[119.49883548388597,-3.49441171632651],[119.07834435432699,-3.487021986508764],[118.76776899625287,-2.801999200047688],[119.18097374885866,-2.147103773612798],[119.32339399625505,-1.35314706788047],[119.82599897672583,0.154254462073496],[120.03570193896634,0.566477362465804],[120.88577925016769,1.309222723796835],[121.66681684782696,1.013943589681076],[122.92756676645182,0.875192368977465],[124.07752241424284,0.917101955566139],[125.0659892111218,1.643259182131558],[125.24050052297157,1.419836127117605]]],[[[128.6882487326207,1.132385972494106],[128.63595218314134,0.258485826006179],[128.12016971243617,0.356412665199286],[127.96803429576885,-0.252077325037533],[128.3799988139997,-0.780003757331286],[128.1000159038423,-0.899996433112974],[127.696474644075,-0.266598402511505],[127.39949018769374,1.011721503092573],[127.60051150930904,1.81069082275718],[127.93237755748748,2.174596258956555],[128.0041561219408,1.628531398928331],[128.59455936087545,1.540810655112864],[128.6882487326207,1.132385972494106]]],[[[117.875627069166,1.827640692548911],[118.99674726773816,0.902219143066048],[117.81185835171779,0.784241848143722],[117.47833865770605,0.102474676917026],[117.52164350796659,-0.803723239753211],[116.56004845587948,-1.487660821136231],[116.53379682827516,-2.483517347832901],[116.14808393764861,-4.012726332214014],[116.00085778204907,-3.657037448749008],[114.86480309454451,-4.106984144714416],[114.46865156459508,-3.49570362713382],[113.7556718282641,-3.439169610206519],[113.25699425664756,-3.118775729996854],[112.06812625534064,-3.478392022316071],[111.70329064336,-2.994442233902631],[111.0482401876282,-3.049425957861188],[110.22384606327597,-2.934032484553483],[110.07093550012434,-1.592874037282414],[109.57194786991404,-1.314906507984489],[109.09187381392252,-0.459506524257051],[108.95265750532816,0.415375474444346],[109.06913618371404,1.341933905437642],[109.66326012577372,2.006466986494984],[109.83022667850884,1.338135687664191],[110.5140609070271,0.773131415200993],[111.15913781132656,0.976478176269509],[111.79754845586042,0.904441229654651],[112.38025190638365,1.410120957846757],[112.85980919805218,1.497790025229946],[113.80584964401953,1.217548732911041],[114.62135542201747,1.430688177898886],[115.13403730678523,2.821481838386219],[115.51907840379198,3.169238389494395],[115.86551720587676,4.306559149590156],[117.01521447150634,4.306094061699468],[117.88203494677016,4.137551377779487],[117.31323245653353,3.234428208830578],[118.04832970588535,2.287690131027361],[117.875627069166,1.827640692548911]]],[[[105.81765506390936,-5.852355645372411],[104.7103841491915,-5.873284600450644],[103.86821333213074,-5.037314955264974],[102.5842606954069,-4.220258884298203],[102.15617313030099,-3.614146009946765],[101.39911339722505,-2.799777113459171],[100.90250288290014,-2.05026213949786],[100.1419808288606,-0.650347588710957],[99.26373986206022,0.183141587724663],[98.97001102091332,1.042882391764536],[98.60135135294308,1.823506577965616],[97.69959760944988,2.453183905442116],[97.17694217324988,3.30879059489861],[96.42401655475732,3.86885976807791],[95.38087609251347,4.970782172053673],[95.2930261576173,5.479820868344816],[95.93686282754174,5.439513251157108],[97.48488203327709,5.24632090903401],[98.36916914265568,4.268370266126366],[99.14255862833579,3.590349636240915],[99.6939978373224,3.174328518075156],[100.64143354696166,2.099381211755798],[101.65801232300731,2.083697414555189],[102.49827111207321,1.398700466310217],[103.076840448013,0.561361395668854],[103.83839603069835,0.104541734208666],[103.43764529827497,-0.711945896002845],[104.010788608824,-1.059211521004229],[104.36999148968488,-1.084843031421016],[104.53949018760215,-1.782371514496716],[104.88789269411399,-2.340425306816655],[105.62211144411698,-2.42884368246807],[106.10859337771268,-3.06177662517895],[105.85744591677411,-4.305524997579723],[105.81765506390936,-5.852355645372411]]]]}},{"type":"Feature","properties":{"admin":"India","name":"India","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[77.83745079947457,35.49400950778776],[78.91226891471321,34.32193634697578],[78.81108646028572,33.506198025032404],[79.20889163606857,32.99439463961371],[79.1761287779955,32.483779812137705],[78.458446486326,32.61816437431272],[78.738894484374,31.515906073527056],[79.72136681510709,30.882714748654724],[81.11125613802929,30.1834809433134],[80.47672122591737,29.729865220655338],[80.08842451367626,28.794470119740136],[81.057202589852,28.416095282499036],[81.99998742058496,27.925479234319987],[83.30424889519954,27.36450572357555],[84.67501793817377,27.23490123138753],[85.25177859898335,26.726198431906337],[86.02439293817915,26.630984605408567],[87.22747195836628,26.39789805755607],[88.0602376647498,26.414615383402484],[88.17480431514089,26.810405178325944],[88.0431327656612,27.445818589786818],[88.12044070836984,27.876541652939583],[88.73032596227853,28.08686473236751],[88.81424848832054,27.29931590423936],[88.83564253128937,27.098966376243755],[89.74452762243884,26.71940298105995],[90.37327477413406,26.875724188742872],[91.2175126484864,26.80864817962802],[92.03348351437508,26.83831045176355],[92.10371178585972,27.4526140406332],[91.69665652869664,27.77174184825166],[92.50311893104362,27.89687632904644],[93.41334760943266,28.64062938080722],[94.56599043170293,29.277438055939975],[95.40480228066461,29.031716620392125],[96.117678664131,29.45280202892246],[96.58659061074748,28.830979519154337],[96.24883344928776,28.411030992134435],[97.32711388549,28.26158274994633],[97.40256147663612,27.88253611908544],[97.05198855996807,27.699058946233144],[97.13399905801528,27.08377350514996],[96.41936567585094,27.26458934173922],[95.12476769407493,26.573572089132295],[95.15515343626257,26.00130727793208],[94.60324913938535,25.1624954289704],[94.55265791217161,24.67523834889033],[94.10674197792505,23.850740871673477],[93.32518761594277,24.078556423432197],[93.28632693885925,23.043658352139],[93.0602942240146,22.703110663335565],[93.16612755734837,22.2784595809771],[92.67272098182555,22.041238918541247],[92.1460347839068,23.62749868417259],[91.8699276061713,23.62434642180278],[91.70647505083208,22.985263983649183],[91.15896325069971,23.50352692310438],[91.46772993364367,24.07263947193479],[91.9150928079944,24.13041372323711],[92.37620161333479,24.97669281666496],[91.79959598182207,25.14743174895731],[90.87221072791212,25.13260061288954],[89.92069258012184,25.26974986419217],[89.83248091019958,25.965082098895476],[89.35509402868728,26.014407253518065],[88.56304935094974,26.446525580342716],[88.20978925980248,25.768065700782707],[88.93155398962307,25.23869232838477],[88.30637251175601,24.8660794133442],[88.0844222350624,24.50165721282192],[88.6999402200909,24.233714911388557],[88.52976972855376,23.631141872649163],[88.87631188350308,22.879146429937823],[89.0319612975662,22.055708319582973],[88.8887659036854,21.69058848722474],[88.20849734899521,21.703171698487804],[86.97570438024026,21.4955616317552],[87.03316857294885,20.74330780688241],[86.49935102737378,20.151638495356604],[85.06026574090967,19.478578802971096],[83.9410058939,18.30200979254972],[83.18921715691783,17.671221421778977],[82.1927921894659,17.016636053937813],[82.19124189649717,16.556664130107844],[81.69271935417746,16.3102192245079],[80.79199913933012,15.951972357644488],[80.32489586784388,15.899184882058346],[80.02506920768643,15.136414903214144],[80.23327355339039,13.835770778859978],[80.28629357292185,13.006260687710832],[79.86254682812849,12.056215318240886],[79.85799930208681,10.357275091997108],[79.34051150911598,10.308854274939618],[78.88534549348917,9.54613597252772],[79.18971967968828,9.216543687370146],[78.27794070833049,8.933046779816932],[77.94116539908434,8.25295909263974],[77.53989790233793,7.965534776232331],[76.59297895702166,8.899276231314188],[76.13006147655106,10.299630031775518],[75.74646731964847,11.308250637248303],[75.39610110870957,11.781245022015822],[74.86481570831681,12.741935736537895],[74.61671715688352,13.992582912649675],[74.4438594908672,14.617221787977693],[73.53419925323338,15.990652167214956],[73.11990929554942,17.928570054592495],[72.82090945830863,19.20823354743616],[72.82447513213678,20.41950328214153],[72.63053348174539,21.356009426351],[71.17527347197394,20.757441311114228],[70.47045861194509,20.87733063403138],[69.16413008003882,22.089298000572697],[69.64492760608239,22.450774644454334],[69.34959679553432,22.84317963306269],[68.17664513537338,23.691965033456704],[68.84259931831876,24.35913361256093],[71.0432401874682,24.356523952730193],[70.84469933460282,25.21510203704351],[70.28287316272558,25.722228705339823],[70.168926629522,26.491871649678835],[69.51439293811312,26.940965684511365],[70.61649620960192,27.98919627533586],[71.77766564320031,27.91318024343452],[72.82375166208469,28.961591701772047],[73.45063846221741,29.976413479119863],[74.42138024282026,30.97981476493117],[74.405928989565,31.692639471965272],[75.25864179881319,32.27110545504049],[74.4515592792787,32.76489960380549],[74.10429365427733,33.441473293586846],[73.74994835805195,34.317698879527846],[74.24020267120495,34.74888703057125],[75.75706098826832,34.50492259372131],[76.87172163280401,34.65354401299273],[77.83745079947457,35.49400950778776]]]}},{"type":"Feature","properties":{"admin":"Ireland","name":"Ireland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-6.197884894220989,53.86756500916335],[-6.032985398777609,53.153164170944336],[-6.788856573910847,52.26011790629232],[-8.561616583683557,51.66930125589935],[-9.977085740590269,51.82045482035307],[-9.16628251793078,52.86462881124267],[-9.688524542672452,53.881362616585285],[-8.327987433292007,54.664518947968624],[-7.572167934591064,55.131622219454854],[-7.366030646178785,54.59584096945271],[-7.572167934591064,54.059956366585986],[-6.953730231138065,54.07370229757562],[-6.197884894220989,53.86756500916335]]]}},{"type":"Feature","properties":{"admin":"Iran","name":"Iran","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[53.92159793479554,37.198918361961255],[54.80030398948656,37.39242076267818],[55.511578403551894,37.96411713312315],[56.18037479027332,37.93512665460742],[56.619366082592805,38.12139435480348],[57.33043379092896,38.02922943781093],[58.43615441267819,37.522309475243794],[59.234761997316795,37.412987982730336],[60.377637973883864,36.52738312432836],[61.12307050969413,36.49159719496624],[61.21081709172573,35.65007233330922],[60.80319339380744,34.404101874319856],[60.528429803311575,33.676446031218],[60.96370039250599,33.52883230237625],[60.53607791529076,32.98126882581156],[60.86365481958895,32.18291962333442],[60.941944614511115,31.548074652628745],[61.69931440618081,31.37950613049266],[61.78122155136343,30.73585032808123],[60.87424848820878,29.829238999952604],[61.369308709564926,29.303276272085917],[61.771868117118615,28.699333807890792],[62.727830438085974,28.259644883735383],[62.75542565292985,27.378923448184985],[63.23389773952028,27.217047024030705],[63.31663170761958,26.75653249766166],[61.874187453056535,26.239974880472097],[61.49736290878418,25.078237006118492],[59.61613406763083,25.380156561783775],[58.5257613462723,25.609961656185725],[57.39725141788238,25.739902045183634],[56.97076582217754,26.966106268821356],[56.4921387062902,27.14330475515019],[55.72371015811006,26.964633490501036],[54.715089552637245,26.480657863871507],[53.493096958231334,26.81236888275304],[52.4835978534096,27.580849107365488],[51.52076256694741,27.86568960215829],[50.85294803243953,28.814520575469377],[50.11500857931157,30.14777252859971],[49.57685021342398,29.9857152369324],[48.941333449098536,30.31709035900403],[48.56797122578974,29.926778265903515],[48.014568312376085,30.45245677339259],[48.00469811380831,30.985137437457237],[47.68528608581226,30.98485321707962],[47.849203729042095,31.709175930298663],[47.334661492711895,32.469155381799105],[46.109361606639304,33.017287299119],[45.416690708199035,33.96779775647958],[45.64845950702808,34.74813772230301],[46.15178795755093,35.09325877536428],[46.076340366404786,35.67738332777548],[45.4206181170532,35.97754588474282],[44.77267,37.17045],[44.22575564960052,37.971584377589345],[44.42140262225754,38.281281236314534],[44.109225294782334,39.42813629816809],[44.79398969908193,39.71300263117704],[44.9526880226503,39.33576467544636],[45.457721795438765,38.87413910578305],[46.14362308124882,38.74120148371221],[46.505719842317966,38.77060537368629],[47.68507938008308,39.50836395930121],[48.060095249225235,39.58223541926245],[48.35552941263787,39.2887649602769],[48.010744256386474,38.794014797514514],[48.6343754412848,38.27037750910096],[48.88324913920248,38.32024526626261],[49.199612257693325,37.58287425388988],[50.147771437384606,37.37456655532133],[50.842354363819695,36.872814235983384],[52.26402469260141,36.700421657857696],[53.82578982932641,36.96503082940822],[53.92159793479554,37.198918361961255]]]}},{"type":"Feature","properties":{"admin":"Iraq","name":"Iraq","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[45.4206181170532,35.97754588474282],[46.076340366404786,35.67738332777548],[46.15178795755093,35.09325877536428],[45.64845950702808,34.74813772230301],[45.416690708199035,33.96779775647958],[46.109361606639304,33.017287299119],[47.334661492711895,32.469155381799105],[47.849203729042095,31.709175930298663],[47.68528608581226,30.98485321707962],[48.00469811380831,30.985137437457237],[48.014568312376085,30.45245677339259],[48.56797122578974,29.926778265903515],[47.97451907734989,29.975819200148493],[47.30262210469095,30.05906993257071],[46.56871341328174,29.099025173452283],[44.709498732284736,29.178891099559376],[41.88998091000783,31.19000865327836],[40.39999433773624,31.88999176688793],[39.19546837744496,32.16100881604266],[38.79234052913608,33.37868642835222],[41.00615888851992,34.41937226006211],[41.38396528500581,35.62831655531435],[41.28970747250545,36.35881460219226],[41.837064243340954,36.60585378676357],[42.34959109881176,37.22987254490409],[42.77912560402182,37.38526357680574],[43.94225874204729,37.25622752537294],[44.293451775902845,37.00151439060629],[44.77269900897769,37.17044464776843],[45.4206181170532,35.97754588474282]]]}},{"type":"Feature","properties":{"admin":"Iceland","name":"Iceland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-14.508695441129232,66.45589223903141],[-14.739637417041603,65.80874827744029],[-13.609732224979808,65.12667104761985],[-14.9098337467949,64.36408193628867],[-17.79443803554342,63.67874909123384],[-18.65624589687499,63.496382961675806],[-19.972754685942757,63.643634955491514],[-22.76297197111015,63.96017894149537],[-21.778484259517676,64.4021157904555],[-23.955043911219104,64.89112986923348],[-22.18440263517035,65.08496816676029],[-22.22742326505333,65.37859365504272],[-24.326184047939332,65.61118927678845],[-23.65051469572308,66.26251902939521],[-22.134922451250883,66.41046865504686],[-20.576283738679543,65.73211212835142],[-19.056841600001587,66.27660085719475],[-17.798623826559048,65.99385325790976],[-16.16781897629212,66.52679230413585],[-14.508695441129232,66.45589223903141]]]}},{"type":"Feature","properties":{"admin":"Israel","name":"Israel","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.71991824722274,32.70919240979486],[35.545665317534535,32.39399201103057],[35.18393029149143,32.532510687788935],[34.97464074070932,31.866582343059715],[35.22589155451242,31.75434113212176],[34.97050662612599,31.616778469360803],[34.927408481594554,31.35343537040141],[35.39756066258604,31.48908600516757],[35.42091840998196,31.10006582287435],[34.92260257339142,29.501326198844517],[34.26543338393568,31.219360866820143],[34.5563716977389,31.54882396089699],[34.48810713068135,31.60553884533731],[34.752587111151165,32.07292633720116],[34.95541710789677,32.82737641044637],[35.09845747248067,33.08053925224426],[35.12605268732454,33.090900376918775],[35.4607092628467,33.089040025356276],[35.552796665190805,33.26427480725801],[35.82110070165023,33.27742645927629],[35.83639692560862,32.868123277308506],[35.700797967274745,32.716013698857374],[35.71991824722274,32.70919240979486]]]}},{"type":"Feature","properties":{"admin":"Italy","name":"Italy","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[15.52037601081383,38.231155096991465],[15.160242954171732,37.44404551853781],[15.309897902089002,37.13421946873179],[15.099988234119444,36.61998729099539],[14.335228712632013,36.99663096775475],[13.826732618879928,37.104531358380186],[12.431003859108808,37.612949937483805],[12.570943637755132,38.12638113051968],[13.74115644700458,38.03496552179535],[14.761249220446157,38.1438736028505],[15.52037601081383,38.231155096991465]]],[[[9.210011834356264,41.209991360024205],[9.809975213264972,40.500008856766094],[9.669518670295671,39.17737641047179],[9.214817742559486,39.24047333430013],[8.806935662479729,38.90661774347847],[8.428302443077113,39.17184703221661],[8.388253208050939,40.3783108587188],[8.159998406617659,40.950007229163774],[8.709990675500107,40.899984442705225],[9.210011834356264,41.209991360024205]]],[[[12.376485223040842,46.76755910906987],[13.806475457421552,46.50930613869118],[13.698109978905476,46.01677806251737],[13.937630242578336,45.59101593686465],[13.141606479554294,45.73669179949541],[12.328581170306304,45.38177806251484],[12.3838749528586,44.885374253919075],[12.261453484759157,44.60048208269401],[12.589237094786482,44.09136587175446],[13.526905958722493,43.5877273626379],[14.029820997787024,42.76100779883247],[15.142569614327952,41.95513967545689],[15.926191033601892,41.96131500911573],[16.16989708829041,41.74029490820342],[15.889345737377791,41.541082261718195],[16.785001661860573,41.17960561783658],[17.519168735431204,40.87714345963223],[18.376687452882575,40.35562490494265],[18.4802470231954,40.16886627863982],[18.293385044028096,39.810774441073235],[17.73838016121328,40.27767100683029],[16.869595981522334,40.44223460546384],[16.44874311693732,39.79540070246647],[17.171489698971495,39.42469981542072],[17.05284061042934,38.90287120213729],[16.63508833178184,38.843572496082395],[16.100960727613053,37.985898749334176],[15.684086948314498,37.90884918878702],[15.687962680736318,38.21459280044185],[15.891981235424703,38.75094249119922],[16.109332309644312,38.96454702407768],[15.718813510814638,39.54407237401494],[15.413612501698818,40.04835683853516],[14.998495721098234,40.17294871679091],[14.703268263414769,40.60455027929262],[14.06067182786526,40.786347968095434],[13.627985060285392,41.18828725846165],[12.888081902730418,41.2530895045556],[12.106682570044908,41.7045348170574],[11.191906365614184,42.35542531998967],[10.511947869517794,42.93146251074721],[10.200028924204046,43.92000682227461],[9.702488234097812,44.03627879493131],[8.888946160526869,44.36633616797953],[8.428560825238575,44.23122813575241],[7.8507666357832,43.76714793555523],[7.435184767291841,43.69384491634917],[7.549596388386161,44.12790110938481],[7.007562290076661,44.25476675066138],[6.749955275101711,45.028517971367584],[7.096652459347835,45.33309886329586],[6.80235517744566,45.70857982032867],[6.84359297041456,45.99114655210066],[7.273850945676683,45.776947740250755],[7.755992058959832,45.82449005795927],[8.316629672894377,46.16364248309084],[8.489952426801294,46.005150865251736],[8.966305779667833,46.03693187111115],[9.18288170740311,46.440214748716976],[9.92283654139035,46.31489940040918],[10.363378126678665,46.48357127540983],[10.4427014502466,46.89354625099743],[11.048555942436504,46.7513585475464],[11.164827915093325,46.94157949481273],[12.15308800624308,47.11539317482642],[12.376485223040842,46.76755910906987]]]]}},{"type":"Feature","properties":{"admin":"Jamaica","name":"Jamaica","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-77.5696007961992,18.490525417550483],[-76.89661861846211,18.40086680752408],[-76.36535905628551,18.16070058844759],[-76.19965857614163,17.886867173732963],[-76.90256140817566,17.868237819891743],[-77.20634131540345,17.701116237859818],[-77.76602291534059,17.861597398342237],[-78.3377192857856,18.225967922432226],[-78.21772661000387,18.454532782459193],[-77.79736467152561,18.524218451404774],[-77.5696007961992,18.490525417550483]]]}},{"type":"Feature","properties":{"admin":"Jordan","name":"Jordan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.545665317534535,32.39399201103057],[35.71991824722274,32.70919240979486],[36.83406212743554,32.31293752698077],[38.79234052913608,33.37868642835222],[39.19546837744496,32.16100881604266],[39.004885695152545,32.01021698661497],[37.00216556168101,31.508412990844736],[37.99884891129437,30.508499864213128],[37.668119744626374,30.338665269485897],[37.50358198420902,30.003776150018396],[36.74052778498724,29.865283311476183],[36.50121422704358,29.505253607698705],[36.06894087092205,29.19749461518445],[34.95603722508425,29.356554673778835],[34.92260257339142,29.501326198844517],[35.42091840998196,31.10006582287435],[35.39756066258604,31.48908600516757],[35.545251906076196,31.782504787720832],[35.545665317534535,32.39399201103057]]]}},{"type":"Feature","properties":{"admin":"Japan","name":"Japan","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[134.63842817600386,34.14923371025642],[134.76637902235848,33.80633474378367],[134.20341596897083,33.20117788342962],[133.79295006727648,33.52198517509758],[133.28026818250885,33.28957042086494],[133.01485802625785,32.70456736910477],[132.36311486219267,32.98938202568137],[132.37117638563018,33.46364248304007],[132.92437259331479,34.060298570282036],[133.4929683778222,33.944620876596694],[133.90410607313635,34.36493113864261],[134.63842817600386,34.14923371025642]]],[[[140.97638756730527,37.14207428644016],[140.59976972876208,36.343983466124534],[140.77407433488264,35.84287710219023],[140.25327925024507,35.13811391859365],[138.9755277853962,34.6676000025761],[137.2175989116912,34.60628591566184],[135.79298302626887,33.46480520276662],[135.1209827007454,33.84907115328905],[135.0794348491827,34.59654490817481],[133.34031619683196,34.375938218720755],[132.1567708680513,33.9049333765965],[130.98614464734345,33.88576142021628],[132.00003624891002,33.14999237724461],[131.33279015515734,31.450354519164836],[130.68631798718593,31.029579169228235],[130.20241987520495,31.41823761649541],[130.44767622286213,32.31947459566572],[129.81469160371887,32.610309556604385],[129.40846316947255,33.29605581311758],[130.35393517468464,33.60415070244169],[130.87845096244712,34.23274282484003],[131.8842293641439,34.74971385348791],[132.6176729676625,35.43339305270941],[134.60830081597777,35.73161774346581],[135.6775378765289,35.52713410088682],[136.72383060114242,37.304984239240376],[137.39061160700447,36.82739065199882],[138.85760216690625,37.82748464614345],[139.42640465714288,38.215962225897634],[140.05479007381206,39.43880748143638],[139.88337934789985,40.56331248632368],[140.30578250545366,41.19500519465955],[141.36897342342667,41.37855988216028],[141.91426313697048,39.99161611587868],[141.88460086483497,39.18086456965149],[140.95948937394573,38.17400096287658],[140.97638756730527,37.14207428644016]]],[[[143.91016198137947,44.17409983985373],[144.61342654843966,43.96088288021751],[145.32082523008307,44.38473297787544],[145.54313724180275,43.26208832455059],[144.05966189999987,42.98835826270055],[143.1838497255173,41.99521474869918],[141.61149092017246,42.67879059505607],[141.06728641170662,41.58459381770799],[139.95510623592105,41.56955597591103],[139.81754357315992,42.56375885677439],[140.31208703019317,43.33327261003264],[141.38054894426,43.38882477474649],[141.6719523459539,44.77212535255148],[141.96764489152798,45.55148346616134],[143.1428703147098,44.51035838477696],[143.91016198137947,44.17409983985373]]]]}},{"type":"Feature","properties":{"admin":"Kazakhstan","name":"Kazakhstan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[70.96231489449927,42.26615428320553],[70.38896487822078,42.08130768489752],[69.07002729683522,41.384244289712335],[68.63248294462004,40.668680731766855],[68.25989586779563,40.662324530594894],[67.9858557473518,41.1359907089822],[66.71404707221659,41.16844350846156],[66.51064863471571,41.98764415136855],[66.02339155463561,41.99464630794403],[66.09801232286519,42.997660020513074],[64.90082441595932,43.72808055274265],[63.18578698105658,43.650074978198],[62.013300408786264,43.50447663021565],[61.05831994003249,44.405816962250576],[60.23997195825847,44.78403677019474],[58.68998904809579,45.50001373959872],[58.503127068928436,45.58680430763296],[55.92891727074117,44.99585846615916],[55.96819135928301,41.30864166926937],[55.455251092353805,41.259859117185826],[54.75534549339265,42.04397146256661],[54.07941775901496,42.32410940202083],[52.944293247291725,42.116034247397565],[52.50245975119628,41.78331553808646],[52.44633914572721,42.02715078385556],[52.69211225770725,42.44389537207336],[52.501426222550315,42.79229787858518],[51.3424271991082,43.13297475846934],[50.89129194520022,44.031033637053774],[50.33912926616136,44.28401561133846],[50.30564293803626,44.609835516938915],[51.27850345236321,44.51485423438645],[51.316899041556034,45.245998236667894],[52.16738976421571,45.4083914251451],[53.04087649924519,45.25904653582175],[53.22086551291771,46.23464590105992],[53.04273685080777,46.853006089864486],[52.0420227394756,46.80463694923923],[51.19194542827426,47.04870473895391],[50.034083286342465,46.60898997658221],[49.10116,46.39933000000012],[48.593241001180495,46.56103424741547],[48.69473351420173,47.07562816017792],[48.05725304544926,47.74375275327952],[47.31523115417024,47.715847479841955],[46.466445753776256,48.39415233010492],[47.043671502476506,49.1520388860976],[46.75159630716273,49.35600576435376],[47.5494804217493,50.45469839131112],[48.57784142435752,49.87475962991566],[48.70238162618101,50.605128485712825],[50.766648390512145,51.69276235615989],[52.32872358583096,51.71865224873811],[54.53287845237621,51.0262397324593],[55.7169405454798,50.62171662047853],[56.77796105329655,51.04355133727704],[58.36329064314673,51.06365346943856],[59.6422823423706,50.54544220641571],[59.93280724471549,50.84219411885186],[61.33742435084092,50.79907013610425],[61.58800337102416,51.2726587998432],[59.96753380721553,51.960420437215696],[60.92726850774026,52.44754832621502],[60.73999311711458,52.719986477257734],[61.699986199800584,52.979996446334255],[60.97806644068315,53.66499339457913],[61.43659142440906,54.006264553434775],[65.17853356309591,54.35422781027209],[65.66687584825398,54.60126699484345],[68.16910037625881,54.97039175070431],[69.06816694527286,55.38525014914352],[70.86526655465512,55.16973358827009],[71.1801310566094,54.13328522400825],[72.22415001820217,54.37665538188673],[73.50851606638439,54.035616766976595],[73.42567874542043,53.48981028910974],[74.38484500519004,53.546861070360066],[76.89110029491341,54.49052440044191],[76.52517947785473,54.17700348572713],[77.80091556184422,53.40441498474756],[80.03555952344166,50.86475088154724],[80.56844689323547,51.388336493528456],[81.94598554883991,50.812195949906354],[83.38300377801237,51.06918284769391],[83.93511478061883,50.88924551045356],[84.41637739455305,50.31139964456582],[85.11555952346201,50.11730296487763],[85.54126997268246,49.69285858824815],[86.82935672398962,49.826674709668154],[87.35997033076265,49.214980780629155],[86.59877648310338,48.549181626980605],[85.76823286330828,48.455750637396974],[85.72048383987071,47.45296946877311],[85.16429039911336,47.0009557155161],[83.18048383986044,47.33003123635085],[82.4589258157691,45.5396495631665],[81.94707075391811,45.317027492853235],[79.9661063984414,44.91751699480464],[80.86620649610136,43.18036204688104],[80.18015018099429,42.920067857426936],[80.25999026888533,42.3499992945991],[79.64364546094012,42.49668284765965],[79.14217736197978,42.85609243424959],[77.6583919615832,42.96068553320833],[76.00035363149856,42.98802236589062],[75.63696495962209,42.877899888676765],[74.21286583852257,43.298339341803505],[73.6453035826609,43.09127187760986],[73.48975752146234,42.50089447689128],[71.84463829945064,42.84539541276518],[71.18628055205225,42.70429291439222],[70.96231489449927,42.26615428320553]]]}},{"type":"Feature","properties":{"admin":"Kenya","name":"Kenya","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[40.993,-0.85829],[41.58513,-1.68325],[40.88477,-2.08255],[40.63785,-2.49979],[40.26304,-2.57309],[40.12119,-3.27768],[39.80006,-3.68116],[39.60489,-4.34653],[39.20222,-4.67677],[37.7669,-3.67712],[37.69869,-3.09699],[34.07262,-1.05982],[33.90371119710452,-0.95],[33.89356896966694,0.109813537861896],[34.18,0.515],[34.6721,1.17694],[35.03599,1.90584],[34.59607,3.05374],[34.47913,3.5556],[34.005,4.249884947362047],[34.62019626785387,4.847122742081987],[35.298007118232974,5.506],[35.8174476623535,5.338232082790795],[35.8174476623535,4.776965663461889],[36.15907863285564,4.447864127672768],[36.85509323800811,4.447864127672768],[38.120915,3.598605],[38.43697,3.58851],[38.67114,3.61607],[38.89251,3.50074],[39.559384258765846,3.42206],[39.85494,3.83879],[40.76848,4.25702],[41.1718,3.91909],[41.855083092643966,3.918911920483726],[40.98105,2.78452],[40.993,-0.85829]]]}},{"type":"Feature","properties":{"admin":"Kyrgyzstan","name":"Kyrgyzstan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[70.96231489449913,42.26615428320548],[71.18628055205211,42.70429291439213],[71.84463829945058,42.84539541276509],[73.48975752146234,42.50089447689131],[73.6453035826609,43.09127187760982],[74.21286583852255,43.29833934180336],[75.636964959622,42.87789988867667],[76.00035363149844,42.988022365890664],[77.6583919615832,42.960685533208256],[79.14217736197976,42.85609243424951],[79.6436454609401,42.496682847659514],[80.25999026888529,42.34999929459904],[80.11943037305136,42.123940741538235],[78.5436609231753,41.582242540038685],[78.18719689322594,41.18531586360479],[76.90448449087707,41.066485907549634],[76.52636803579745,40.42794607193511],[75.46782799673069,40.56207225194866],[74.77686242055604,40.36642527929162],[73.82224368682829,39.89397349706318],[73.96001305531841,39.66000844986172],[73.67537926625478,39.431236884105594],[71.78469363799199,39.27946320246436],[70.5491618183256,39.6041979029865],[69.46488691597752,39.52668325454869],[69.5596098163685,40.10321137141297],[70.64801883329996,39.93575389257116],[71.01419803252016,40.244365546218226],[71.77487511585655,40.14584442805376],[73.05541710804916,40.86603302668945],[71.87011478057045,41.39290009212126],[71.15785851429158,41.14358714452911],[70.4200224140282,41.519998277343134],[71.25924767444822,42.167710679689456],[70.96231489449913,42.26615428320548]]]}},{"type":"Feature","properties":{"admin":"Cambodia","name":"Cambodia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[103.49727990113968,10.632555446815926],[103.09068973186723,11.153660590047162],[102.58493248902668,12.18659495691328],[102.348099399833,13.39424734135822],[102.9884220723616,14.225721136934464],[104.28141808473659,14.416743068901363],[105.21877689007886,14.27321177821069],[106.04394616091552,13.881091009979952],[106.49637332563084,14.57058380783428],[107.38272749230106,14.202440904186968],[107.6145479675624,13.535530707244202],[107.49140302941086,12.337205918827944],[105.8105237162531,11.567614650921223],[106.24967003786944,10.961811835163584],[105.19991499229232,10.889309800658094],[104.33433475140345,10.486543687375228],[103.49727990113968,10.632555446815926]]]}},{"type":"Feature","properties":{"admin":"South Korea","name":"Korea","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[128.3497164246766,38.61224294692784],[129.21291954968004,37.43239248305594],[129.46044966035814,36.78418915460282],[129.46830447806647,35.63214061130394],[129.09137658092956,35.08248423923142],[128.18585045787907,34.890377102186385],[127.38651940318837,34.47567373304411],[126.48574751190873,34.39004588473647],[126.3739197124291,34.93456045179594],[126.55923139862777,35.684540513647896],[126.11739790253226,36.725484727519245],[126.86014326386336,36.893924058574605],[126.17475874237621,37.74968577732803],[126.23733890188174,37.84037791600027],[126.68371992401887,37.804772854151174],[127.07330854706734,38.25611481378839],[127.78003543509097,38.30453563084589],[128.20574588431143,38.37039724380188],[128.3497164246766,38.61224294692784]]]}},{"type":"Feature","properties":{"admin":"Kosovo","name":"Kosovo","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.76216,42.05186],[20.717310000000108,41.84711],[20.59023,41.85541],[20.52295,42.21787],[20.28374,42.32025],[20.0707,42.58863],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.06868500000012],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.576635989402117,42.24522439706185],[21.352700000000137,42.2068],[20.76216,42.05186]]]}},{"type":"Feature","properties":{"admin":"Kuwait","name":"Kuwait","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[47.97451907734989,29.975819200148493],[48.18318851094448,29.53447663015976],[48.09394331237641,29.306299343375],[48.41609419128394,28.552004299426663],[47.70885053893738,28.526062730416136],[47.45982181172282,29.002519436147217],[46.56871341328174,29.099025173452283],[47.30262210469095,30.05906993257071],[47.97451907734989,29.975819200148493]]]}},{"type":"Feature","properties":{"admin":"Laos","name":"Lao PDR","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[105.21877689007886,14.27321177821069],[105.54433841351766,14.723933620660414],[105.58903852745013,15.570316066952856],[104.77932050986877,16.441864935771445],[104.71694705609247,17.428858954330078],[103.95647667848527,18.240954087796872],[103.20019209189373,18.30963206631277],[102.9987056823877,17.961694647691598],[102.41300499879158,17.93278168382428],[102.11359175009245,18.10910167080416],[101.05954756063514,17.512497259994486],[101.03593143107774,18.40892833096161],[101.28201460165167,19.46258494717676],[100.60629357300314,19.508344427971217],[100.54888105672684,20.109237982661124],[100.11598758341782,20.41784963630818],[100.32910119018952,20.78612173103623],[101.18000532430752,21.436572984294024],[101.27002566935994,21.201651923095177],[101.8031197448829,21.174366766845065],[101.65201785686149,22.318198757409544],[102.17043582561355,22.464753119389297],[102.75489627483464,21.675137233969465],[103.20386111858643,20.766562201413745],[104.43500044150804,20.758733221921528],[104.82257368369707,19.88664175056388],[104.18338789267891,19.624668077060218],[103.8965320170267,19.2651809758218],[105.09459842328151,18.666974595611073],[105.925762160264,17.485315456608955],[106.55600792849566,16.6042839624648],[107.31270592654556,15.908538316303176],[107.56452518110387,15.202173163305554],[107.38272749230106,14.202440904186968],[106.49637332563084,14.57058380783428],[106.04394616091552,13.881091009979952],[105.21877689007886,14.27321177821069]]]}},{"type":"Feature","properties":{"admin":"Lebanon","name":"Lebanon","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.82110070165023,33.27742645927629],[35.552796665190805,33.26427480725801],[35.4607092628467,33.089040025356276],[35.12605268732454,33.090900376918775],[35.48220665868012,33.905450140919434],[35.97959231948939,34.610058295219126],[35.99840254084363,34.6449140488],[36.448194207512095,34.59393524834406],[36.611750115715886,34.201788641897174],[36.06646040217205,33.82491242119254],[35.82110070165023,33.27742645927629]]]}},{"type":"Feature","properties":{"admin":"Liberia","name":"Liberia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-7.712159389669749,4.364565944837721],[-7.974107224957249,4.355755113131961],[-9.004793667018673,4.832418524592199],[-9.913420376006682,5.593560695819205],[-10.765383876986643,6.140710760925556],[-11.438779466182051,6.785916856305746],[-11.199801805048278,7.105845648624735],[-11.14670427086838,7.396706447779534],[-10.695594855176475,7.939464016141085],[-10.230093553091276,8.40620555260129],[-10.016566534861251,8.42850393313523],[-9.755342169625832,8.541055202666923],[-9.33727983238458,7.928534450711351],[-9.403348151069748,7.526905218938906],[-9.208786383490844,7.313920803247952],[-8.926064622422002,7.309037380396375],[-8.722123582382123,7.711674302598509],[-8.439298468448696,7.686042792181736],[-8.485445522485348,7.395207831243068],[-8.385451626000572,6.911800645368742],[-8.602880214868618,6.467564195171659],[-8.311347622094017,6.193033148621081],[-7.993692592795879,6.126189683451541],[-7.570152553731686,5.707352199725903],[-7.53971513511176,5.313345241716517],[-7.63536821128403,5.188159084489455],[-7.712159389669749,4.364565944837721]]]}},{"type":"Feature","properties":{"admin":"Libya","name":"Libya","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[14.8513,22.86295000000012],[14.14387088385524,22.491288967371126],[13.58142459479046,23.040506089769274],[11.999505649471695,23.471668402596432],[11.560669386449032,24.09790924732561],[10.771363559622952,24.56253205006174],[10.303846876678444,24.379313259370967],[9.948261346078024,24.936953640232613],[9.910692579801774,25.36545461679679],[9.319410841518218,26.094324856057476],[9.716285841519662,26.51220632578565],[9.629056023811073,27.14095347748104],[9.75612837081678,27.6882585718842],[9.68388471847288,28.14417389577931],[9.859997999723472,28.959989732371064],[9.805634392952353,29.42463837332337],[9.482139926805417,30.30755605724618],[9.970017124072966,30.539324856075375],[10.056575148161697,30.961831366493517],[9.950225050505194,31.376069647745275],[10.636901482799484,31.76142080334568],[10.944789666394511,32.08181468355536],[11.43225345220378,32.368903103152824],[11.488787469131008,33.136995754523234],[12.66331,32.79278],[13.08326,32.87882],[13.91868,32.71196],[15.24563,32.26508],[15.71394,31.37626],[16.61162,31.18218],[18.02109,30.76357],[19.08641,30.26639],[19.57404,30.52582],[20.05335,30.98576],[19.82033,31.751790000000135],[20.13397,32.2382],[20.85452,32.7068],[21.54298,32.8432],[22.89576,32.63858],[23.2368,32.19149],[23.6091300000001,32.18726],[23.9275,32.01667],[24.92114,31.89936],[25.16482,31.56915],[24.80287,31.08929],[24.95762,30.6616],[24.70007,30.04419],[25.00000000000011,29.23865452953355],[25.00000000000011,25.682499996360995],[25.00000000000011,22.0],[25.00000000000011,20.00304],[23.85000000000013,20.0],[23.837660000000135,19.5804700000001],[19.84926,21.49509],[15.86085,23.40972],[14.8513,22.86295000000012]]]}},{"type":"Feature","properties":{"admin":"Sri Lanka","name":"Sri Lanka","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[81.78795901889137,7.523055324733162],[81.63732221876057,6.481775214051921],[81.21801964714432,6.197141424988287],[80.3483569681044,5.968369859232154],[79.87246870312852,6.763463446474928],[79.6951668639351,8.200843410673384],[80.14780073437963,9.824077663609554],[80.83881798698654,9.268426825391186],[81.30431928907176,8.564206244333688],[81.78795901889137,7.523055324733162]]]}},{"type":"Feature","properties":{"admin":"Lesotho","name":"Lesotho","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[28.978262566857236,-28.955596612261708],[29.325166456832587,-29.257386976846245],[29.018415154748016,-29.74376555757736],[28.848399692507737,-30.070050551068245],[28.291069370239903,-30.226216729454293],[28.10720462414542,-30.545732110314944],[27.74939700695648,-30.645105889612218],[26.99926191580763,-29.875953871379977],[27.53251102062747,-29.242710870075353],[28.07433841320778,-28.85146860119358],[28.54170006685549,-28.64750172293756],[28.978262566857236,-28.955596612261708]]]}},{"type":"Feature","properties":{"admin":"Lithuania","name":"Lithuania","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.73109866709265,54.32753693299331],[22.651051873472536,54.58274099386673],[22.757763706155256,54.856574408581366],[22.31572350433057,55.01529857036585],[21.26844892750346,55.1904816758353],[21.05580040862241,56.03107636171105],[22.20115685393949,56.33780182557948],[23.878263787539957,56.27367137310526],[24.860684441840753,56.372528388079616],[25.000934279080887,56.16453074810483],[25.533046502390327,56.10029694276603],[26.49433149588375,55.61510691997762],[26.588279249790386,55.16717560487166],[25.76843265147979,54.84696259217508],[25.53635379405699,54.282423407602515],[24.45068362803703,53.90570221619475],[23.48412763844984,53.91249766704112],[23.243987257589502,54.22056671814913],[22.73109866709265,54.32753693299331]]]}},{"type":"Feature","properties":{"admin":"Luxembourg","name":"Luxembourg","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[6.043073357781109,50.12805166279422],[6.242751092156992,49.90222565367872],[6.186320428094176,49.4638028021145],[5.897759230176403,49.442667141307005],[5.674051954784828,49.52948354755749],[5.782417433300905,50.090327867221205],[6.043073357781109,50.12805166279422]]]}},{"type":"Feature","properties":{"admin":"Latvia","name":"Latvia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[21.05580040862241,56.03107636171105],[21.090423618257965,56.78387278912293],[21.58186648935367,57.41187063254991],[22.52434126149287,57.75337433535075],[23.31845299652209,57.006236477274854],[24.120729607853423,57.02569265403275],[24.312862583114615,57.793423570376966],[25.164593540149266,57.970156968815175],[25.602809685984365,57.84752879498656],[26.46353234223778,57.47638865826632],[27.28818484875151,57.47452830670382],[27.770015903440925,57.24425812441122],[27.85528201672252,56.75932648378428],[28.17670942557799,56.16912995057881],[27.102459751094525,55.78331370708767],[26.49433149588375,55.61510691997762],[25.533046502390327,56.10029694276603],[25.000934279080887,56.16453074810483],[24.860684441840753,56.372528388079616],[23.878263787539957,56.27367137310526],[22.20115685393949,56.33780182557948],[21.05580040862241,56.03107636171105]]]}},{"type":"Feature","properties":{"admin":"Morocco","name":"Morocco","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-5.193863491222031,35.755182196590845],[-4.591006232105143,35.330711981745644],[-3.640056525070007,35.39985504815197],[-2.604305792644111,35.17909332940112],[-2.169913702798624,35.168396307916694],[-1.792985805661658,34.5279186060913],[-1.73345455566141,33.919712836232115],[-1.388049282222596,32.86401500094137],[-1.124551153966195,32.651521511357195],[-1.30789913573787,32.262888902306024],[-2.616604783529567,32.09434621838616],[-3.068980271812648,31.724497992473285],[-3.647497931320145,31.637294012980817],[-3.690441046554666,30.896951605751152],[-4.859646165374442,30.50118764904387],[-5.242129278982786,30.00044302013557],[-6.060632290053745,29.7316997340018],[-7.059227667661899,29.57922842052465],[-8.67411617678283,28.841288967396643],[-8.665589565454836,27.656425889592462],[-8.817809007940523,27.656425889592462],[-8.817828334986642,27.656425889592462],[-8.794883999049032,27.120696316022553],[-9.413037482124508,27.08847606048854],[-9.735343390328747,26.86094472910741],[-10.189424200877452,26.86094472910741],[-10.551262579785258,26.99080760345688],[-11.392554897496948,26.883423977154383],[-11.71821977380034,26.1040917017608],[-12.030758836301654,26.03086619720312],[-12.500962693725368,24.770116278578136],[-13.891110398809044,23.691009019459383],[-14.22116777185715,22.310163072188335],[-14.630832688850942,21.860939846274867],[-14.750954555713404,21.5006000839038],[-17.00296179856107,21.42073415779668],[-17.020428432675768,21.42231028898163],[-16.973247849993182,21.88574453377495],[-16.589136928767626,22.15823436125009],[-16.26192175949566,22.679339504481273],[-16.326413946995896,23.017768459560894],[-15.98261064295806,23.723358466074096],[-15.426003790742184,24.359133612561035],[-15.089331834360728,24.520260728446964],[-14.824645148161688,25.103532619725307],[-14.800925665739666,25.636264960222285],[-14.439939947964827,26.254418443297645],[-13.773804897506462,26.61889232025228],[-13.13994177901429,27.64014781342049],[-13.121613369914709,27.654147671719805],[-12.61883663578311,28.038185533148656],[-11.68891923669076,28.148643907172577],[-10.9009569971044,28.832142238880913],[-10.39959225100864,29.09858592377778],[-9.564811163765624,29.933573716749855],[-9.814718390329174,31.177735500609053],[-9.434793260119362,32.03809642183648],[-9.300692918321827,32.56467926689063],[-8.657476365585039,33.24024526624239],[-7.654178432638217,33.697064927702506],[-6.912544114601358,34.11047638603744],[-6.24434200685141,35.14586538343752],[-5.929994269219832,35.75998810479398],[-5.193863491222031,35.755182196590845]]]}},{"type":"Feature","properties":{"admin":"Moldova","name":"Moldova","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[26.61933678559779,48.22072622333346],[26.8578235206248,48.36821076109449],[27.52253746919515,48.4671194525011],[28.259546746541837,48.155562242213406],[28.670891147585163,48.11814850523409],[29.122698195113024,47.84909516050646],[29.05086795422732,47.51022695575249],[29.415135125452732,47.34664520933257],[29.559674106573105,46.92858287209131],[29.908851759569295,46.67436066343145],[29.83821007662629,46.525325832701675],[30.024658644335364,46.42393667254503],[29.759971958136383,46.349987697935354],[29.17065392427988,46.37926239682869],[29.072106967899288,46.51767772072248],[28.862972446414055,46.437889309263824],[28.93371748222162,46.25883047137249],[28.659987420371575,45.939986884131635],[28.48526940279276,45.59690705014589],[28.233553501099035,45.48828318946837],[28.054442986775392,45.94458608660562],[28.160017937947707,46.37156260841721],[28.128030226359037,46.81047638608824],[27.55116621268484,47.40511709247082],[27.233872918412736,47.826770941756365],[26.92417605968756,48.12326447203098],[26.61933678559779,48.22072622333346]]]}},{"type":"Feature","properties":{"admin":"Madagascar","name":"Madagascar","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[49.54351891459574,-12.469832858940553],[49.80898074727908,-12.895284925999553],[50.05651085795715,-13.55576140712198],[50.217431268114055,-14.758788750876796],[50.476536899625515,-15.22651213955054],[50.37711144389594,-15.706069431219122],[50.20027469259317,-16.000263360256763],[49.860605503138665,-15.414252618066913],[49.67260664246085,-15.710203545802475],[49.86334435405014,-16.451036879138773],[49.774564243372694,-16.875042006093597],[49.49861209493411,-17.10603565843827],[49.4356185239703,-17.953064060134363],[49.04179243347393,-19.11878101977444],[48.548540887247995,-20.49688811613412],[47.93074913919865,-22.391501153251077],[47.547723423051295,-23.781958916928513],[47.095761346226595,-24.94162973399045],[46.28247765481708,-25.178462823184105],[45.40950768411045,-25.60143442149308],[44.83357384621755,-25.346101169538933],[44.039720493349755,-24.9883452287823],[43.76376834491115,-24.460677178649988],[43.69777754087444,-23.574116306250595],[43.34565433123761,-22.77690398528387],[43.254187046080986,-22.057413018484116],[43.43329756040463,-21.336475111580185],[43.89368289569292,-21.16330738697012],[43.89637007017209,-20.830459486578167],[44.37432539243965,-20.072366224856385],[44.464397413924374,-19.435454196859045],[44.23242190936616,-18.9619947242009],[44.04297610858415,-18.331387220943167],[43.9630843442609,-17.40994475674678],[44.31246870298627,-16.85049570075495],[44.44651736835139,-16.216219170804504],[44.94493655780652,-16.179373874580396],[45.502731967964976,-15.974373467678538],[45.872993605336255,-15.79345427822468],[46.3122432798172,-15.780018405828796],[46.88218265156427,-15.210182386946308],[47.70512983581235,-14.594302666891762],[48.00521487813124,-14.091232598530372],[47.86904747904215,-13.663868503476582],[48.29382775248137,-13.784067884987484],[48.84506025573877,-13.08917489995866],[48.863508742066976,-12.487867933810415],[49.1946513201933,-12.040556735891968],[49.54351891459574,-12.469832858940553]]]}},{"type":"Feature","properties":{"admin":"Mexico","name":"Mexico","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-97.14000830767068,25.869997463478395],[-97.52807247596654,24.992144069920297],[-97.70294552284221,24.27234304452673],[-97.77604183631902,22.932579860927653],[-97.8723667061111,22.444211737553356],[-97.69904395220416,21.898689480064256],[-97.38895952023674,21.411018988525814],[-97.18933346229328,20.635433254473124],[-96.5255755277203,19.89093089444406],[-96.29212724484174,19.32037140550954],[-95.90088497595994,18.828024196848727],[-94.8390634834427,18.562717393462204],[-94.4257295397562,18.144370835843343],[-93.54865129268237,18.423836981677933],[-92.78611385778348,18.524838568592255],[-92.03734819209038,18.704569200103432],[-91.40790340855924,18.876083278880227],[-90.77186987991085,19.284120388256778],[-90.53358985061303,19.867418117751292],[-90.45147599970123,20.707521877520428],[-90.27861833368489,20.999855454995547],[-89.60132117385147,21.261725775634485],[-88.54386633986284,21.493675441976613],[-87.65841651075769,21.458845526611977],[-87.05189022494805,21.543543199138295],[-86.81198238803293,21.331514797444747],[-86.8459079658326,20.849864610268348],[-87.38329118523583,20.255404771398727],[-87.62105445021072,19.646553046135917],[-87.43675045444176,19.472403469312265],[-87.5865604316559,19.040130113190735],[-87.83719112827148,18.259815985583423],[-88.09066402866316,18.516647854074048],[-88.30003109409363,18.499982204659997],[-88.49012285027928,18.486830552641717],[-88.84834387892657,17.88319814704033],[-89.02985734735175,18.001511338772556],[-89.15090938999546,17.955467637600403],[-89.14308041050332,17.8083189966494],[-90.06793351923089,17.819326076727517],[-91.00151994501594,17.817594916245692],[-91.00226925328415,17.254657701074272],[-91.45392127151511,17.252177232324183],[-91.08167009150056,16.918476670799517],[-90.71182186558761,16.687483018454767],[-90.60084672724093,16.470777899638787],[-90.438866950222,16.410109768128105],[-90.46447262242263,16.069562079324722],[-91.74796017125593,16.06656484625176],[-92.22924862340628,15.251446641495871],[-92.08721594925201,15.06458466232851],[-92.20322953974724,14.830102850804108],[-92.22775000686981,14.538828640190951],[-93.35946387406175,15.61542959234367],[-93.87516883011851,15.94016429286591],[-94.69165646033011,16.20097524664288],[-95.25022701697301,16.12831818284064],[-96.0533821276533,15.752087917539592],[-96.55743404822827,15.653515122942787],[-97.26359249549662,15.917064927631312],[-98.0130299548096,16.107311713113912],[-98.94767574745649,16.566043402568763],[-99.69739742714702,16.706164048728166],[-100.8294988675813,17.171071071842047],[-101.66608862995444,17.649026394109622],[-101.9185280017002,17.916090196193974],[-102.47813208698891,17.975750637275095],[-103.50098954955807,18.292294623278845],[-103.91752743204681,18.748571682200005],[-104.99200965047547,19.31613393806168],[-105.49303849976141,19.94676727953543],[-105.73139604370763,20.43410187426411],[-105.39777299683132,20.531718654863425],[-105.5006607735244,20.81689504646612],[-105.27075232625792,21.076284898355137],[-105.26581722697402,21.422103583252348],[-105.60316097697537,21.871145941652568],[-105.69341386597311,22.26908030851615],[-106.02871639689894,22.77375234627862],[-106.90998043498834,23.767774359628895],[-107.91544877809136,24.548915310152942],[-108.40190487347095,25.17231395110593],[-109.26019873740663,25.580609442644057],[-109.44408932171731,25.824883938087673],[-109.29164384645627,26.44293406829842],[-109.8014576892318,26.676175645447923],[-110.39173173708569,27.162114976504533],[-110.6410188464616,27.85987600352552],[-111.17891883018783,27.941240546169062],[-111.75960689985162,28.467952582303944],[-112.22823462609037,28.95440867768348],[-112.27182369672866,29.266844387320074],[-112.80959448937396,30.02111359305234],[-113.16381059451865,30.786880804969424],[-113.14866939985714,31.170965887978912],[-113.87188106978184,31.56760834403519],[-114.2057366606035,31.524045111613123],[-114.776451178835,31.79953217216114],[-114.93669979537212,31.393484605427595],[-114.77123185917348,30.91361725516526],[-114.67389929895174,30.162681179315985],[-114.33097449426292,29.750432440707407],[-113.58887508833541,29.061611436473008],[-113.42405310754052,28.826173610951223],[-113.2719693673055,28.754782619739892],[-113.14003943566436,28.41128937429595],[-112.96229834679647,28.425190334582503],[-112.76158708377484,27.78021678314752],[-112.45791052941163,27.525813706974752],[-112.24495195193676,27.171726792910754],[-111.61648902061918,26.662817287700474],[-111.284674648873,25.732589830014422],[-110.98781938357239,25.294606228124557],[-110.71000688357132,24.826004340101857],[-110.65504899782887,24.298594672131113],[-110.17285620811344,24.265547593680417],[-109.77184709352852,23.81118256275419],[-109.4091043770557,23.36467234953624],[-109.4333923002329,23.185587673428696],[-109.85421932660168,22.81827159269806],[-110.03139197471444,22.8230775009012],[-110.29507097048364,23.430973212166684],[-110.94950130902802,24.000964260345988],[-111.6705684070127,24.484423122652508],[-112.18203589562147,24.73841278736716],[-112.14898881717082,25.470125230404044],[-112.30071082237967,26.012004299416613],[-112.77729671919153,26.32195954030316],[-113.4646707833219,26.768185533143416],[-113.5967299060438,26.639459540304465],[-113.84893673384424,26.900063788352437],[-114.46574662968003,27.14209035899136],[-115.05514217818497,27.722726752222904],[-114.98225257043738,27.79820018158511],[-114.57036556685492,27.741485297144884],[-114.19932878299923,28.115002549750553],[-114.16201839888461,28.566111965442296],[-114.9318422107366,29.279479275015483],[-115.51865393762696,29.556361599235395],[-115.88736528202956,30.18079376883417],[-116.2583503894529,30.836464341753572],[-116.72152625208496,31.635743720012037],[-117.12775999999984,32.53534],[-115.99135,32.61239000000011],[-114.72139,32.72083],[-114.815,32.52528],[-113.30498,32.03914],[-111.02361,31.33472],[-109.035,31.34194000000013],[-108.24194,31.34222],[-108.24,31.75485371816637],[-106.50758999999985,31.75452],[-106.1429,31.39995],[-105.63159,31.08383],[-105.03737,30.64402],[-104.70575,30.12173],[-104.45696999999988,29.57196],[-103.94,29.27],[-103.11,28.97],[-102.48,29.76],[-101.6624,29.7793],[-100.9576,29.380710000000125],[-100.45584,28.69612000000012],[-100.11,28.11000000000012],[-99.52,27.54],[-99.3,26.84],[-99.01999999999991,26.37],[-98.24,26.06],[-97.52999999999989,25.84],[-97.14000830767068,25.869997463478395]]]}},{"type":"Feature","properties":{"admin":"Macedonia","name":"Macedonia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.59023,41.85541],[20.717310000000108,41.84711],[20.76216,42.05186],[21.352700000000137,42.2068],[21.576635989402117,42.24522439706185],[21.917080000000105,42.30364],[22.38052575042467,42.320259507815074],[22.88137373219734,41.99929718685035],[22.952377150166505,41.337993882811176],[22.76177,41.3048],[22.597308383889008,41.1304871689432],[22.055377638444263,41.149865831052686],[21.67416059742697,40.93127452245794],[21.020040317476397,40.84272695572587],[20.60518,41.08622],[20.46315,41.51509],[20.59023,41.85541]]]}},{"type":"Feature","properties":{"admin":"Mali","name":"Mali","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-12.1707502913803,14.616834214735505],[-11.834207526079464,14.799096991428936],[-11.666078253617853,15.388208319556297],[-11.349095017939502,15.411256008358476],[-10.650791388379414,15.132745876521422],[-10.086846482778212,15.330485744686268],[-9.700255092802704,15.26410736740736],[-9.550238409859388,15.486496893775437],[-5.537744309908446,15.501689764869251],[-5.315277268891931,16.201853745991837],[-5.488522508150438,16.325102037007962],[-5.971128709324247,20.640833441647622],[-6.453786586930334,24.956590684503418],[-4.92333736817423,24.974574082940993],[-1.550054897457613,22.792665920497377],[1.823227573259032,20.61080943448604],[2.060990838233919,20.14223338467948],[2.683588494486428,19.856230170160114],[3.146661004253899,19.69357859952144],[3.158133172222704,19.05736420336003],[4.267419467800038,19.155265204336995],[4.270209995143801,16.85222748460121],[3.723421665063482,16.18428375901261],[3.638258904646476,15.568119818580453],[2.749992709981483,15.409524847876693],[1.385528191746857,15.323561102759168],[1.01578331869851,14.968182277887944],[0.374892205414682,14.928908189346128],[-0.26625729003058,14.924308986872148],[-0.515854458000348,15.116157741755725],[-1.066363491205663,14.973815009007764],[-2.001035122068771,14.559008287000887],[-2.191824510090384,14.246417548067352],[-2.967694464520576,13.798150336151506],[-3.103706834312759,13.54126679122859],[-3.52280270019986,13.337661647998612],[-4.006390753587225,13.472485459848112],[-4.280405035814879,13.228443508349738],[-4.427166103523802,12.542645575404292],[-5.220941941743119,11.713858954307224],[-5.197842576508648,11.375145778850136],[-5.470564947929004,10.951269842976044],[-5.404341599946973,10.370736802609144],[-5.816926235365286,10.222554633012193],[-6.050452032892266,10.096360785355442],[-6.205222947606429,10.524060777219132],[-6.493965013037267,10.411302801958268],[-6.666460944027547,10.430810655148449],[-6.850506557635057,10.138993841996236],[-7.622759161804808,10.147236232946792],[-7.89958980959237,10.297382106970824],[-8.029943610048617,10.206534939001711],[-8.335377163109738,10.494811916541932],[-8.28235714357828,10.792597357623842],[-8.407310756860026,10.90925690352276],[-8.620321010767126,10.81089081465518],[-8.581305304386772,11.1362456323648],[-8.37630489748491,11.393645941610629],[-8.786099005559462,11.812560939984705],[-8.905264858424529,12.088358059126431],[-9.12747351727958,12.308060411015331],[-9.327616339546008,12.334286200403453],[-9.567911749703212,12.194243068892472],[-9.890992804392011,12.060478623904968],[-10.165213792348837,11.844083563682744],[-10.593223842806278,11.923975328005977],[-10.870829637078211,12.177887478072106],[-11.036555955438256,12.211244615116511],[-11.297573614944508,12.077971096235768],[-11.456168585648268,12.076834214725336],[-11.513942836950587,12.442987575729417],[-11.467899135778522,12.754518947800973],[-11.553397793005429,13.141213690641065],[-11.927716030311611,13.422075100147392],[-12.124887457721256,13.994727484589784],[-12.1707502913803,14.616834214735505]]]}},{"type":"Feature","properties":{"admin":"Myanmar","name":"Myanmar","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[99.54330936075928,20.186597601802056],[98.95967573445485,19.752980658440944],[98.25372399291558,19.70820302986004],[97.7977828308044,18.62708038988175],[97.37589643757352,18.44543773037581],[97.85912275593485,17.567946071843657],[98.49376102091132,16.837835598207928],[98.90334842325672,16.177824204976115],[98.53737592976567,15.30849742274608],[98.19207400919137,15.123702500870348],[98.43081912637986,14.622027696180831],[99.09775516153871,13.827502549693277],[99.21201175333606,13.269293728076462],[99.19635379435164,12.804748439988666],[99.5872860046397,11.892762762901697],[99.03812055867395,10.960545762572435],[98.55355065307302,9.932959906448543],[98.4571741068487,10.675266018105146],[98.76454552612076,11.441291612183743],[98.42833865762982,12.03298676192568],[98.50957400919266,13.122377631070677],[98.10360395710767,13.64045970301285],[97.77773237507517,14.837285874892638],[97.59707156778275,16.100567938699765],[97.16453982949977,16.928734442609336],[96.50576867064296,16.427240505432845],[95.36935224811238,15.7143899601826],[94.80840457558409,15.803454291237635],[94.18880415240451,16.037936102762014],[94.53348595579133,17.277240301985724],[94.32481652219674,18.213513902249893],[93.54098839719362,19.36649262133002],[93.6632548359962,19.726961574781992],[93.07827762245216,19.855144965081973],[92.3685535013556,20.670883287025344],[92.30323449093864,21.475485337809815],[92.65225711463799,21.32404755297848],[92.67272098182555,22.041238918541247],[93.16612755734837,22.2784595809771],[93.0602942240146,22.703110663335565],[93.28632693885925,23.043658352139],[93.32518761594277,24.078556423432197],[94.10674197792505,23.850740871673477],[94.55265791217161,24.67523834889033],[94.60324913938535,25.1624954289704],[95.15515343626257,26.00130727793208],[95.12476769407493,26.573572089132295],[96.41936567585094,27.26458934173922],[97.13399905801528,27.08377350514996],[97.05198855996807,27.699058946233144],[97.40256147663612,27.88253611908544],[97.32711388549,28.26158274994633],[97.91198774616944,28.335945136014335],[98.24623091023328,27.747221381129172],[98.68269005737045,27.50881216075061],[98.7120939473445,26.74353587494026],[98.67183800658913,25.91870250091352],[97.72460900267912,25.083637193292994],[97.60471967976196,23.89740469003304],[98.66026248575574,24.06328603768996],[98.89874922078275,23.142722072842524],[99.53199222208738,22.949038804612577],[99.24089887898724,22.118314317304577],[99.98348921102148,21.7429367131364],[100.41653771362735,21.558839423096607],[101.15003299357822,21.849984442629015],[101.18000532430752,21.436572984294024],[100.32910119018952,20.78612173103623],[100.11598758341782,20.41784963630818],[99.54330936075928,20.186597601802056]]]}},{"type":"Feature","properties":{"admin":"Montenegro","name":"Montenegro","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[19.80161339689868,42.500093492190835],[19.738051385179627,42.68824738216557],[19.30449,42.19574],[19.371770000000136,41.87755],[19.16246,41.95502],[18.88214,42.28151],[18.45,42.48],[18.56,42.65],[18.70648,43.20011],[19.03165,43.43253],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.21377997027052],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.0707,42.58863],[19.80161339689868,42.500093492190835]]]}},{"type":"Feature","properties":{"admin":"Mongolia","name":"Mongolia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[87.75126427607671,49.29719798440548],[88.80556684769549,49.47052073831241],[90.71366743364067,50.33181183532107],[92.23471154171966,50.80217072204171],[93.10421919146266,50.495290228876414],[94.14756635943561,50.48053660745708],[94.8159493346987,50.01343333597084],[95.81402794798397,49.977466539095715],[97.2597278177814,49.72606069599573],[98.23176150919154,50.42240062112874],[97.82573978067428,51.010995184933165],[98.8614905131003,52.04736603454669],[99.98173221232351,51.63400625264398],[100.88948042196259,51.51685578063832],[102.0652226094673,51.25992055928311],[102.2559086446243,50.51056061461867],[103.6765454447602,50.08996613219511],[104.62155236208169,50.27532949482607],[105.88659142458673,50.40601919209221],[106.88880415245532,50.27429596618022],[107.86817589725095,49.79370514586581],[108.47516727095127,49.282547715850725],[109.40244917199664,49.292960516957535],[110.66201053267876,49.13012807880586],[111.5812309102866,49.37796824807768],[112.89773969935437,49.543565375356984],[114.36245649623523,50.2483027207374],[114.96210981655015,50.14024730081511],[115.48569542853139,49.80517731383459],[116.67880089728614,49.888531399121376],[116.19180219936756,49.13459809019909],[115.48528201707302,48.13538259540342],[115.74283735561575,47.72654450132627],[116.3089526713732,47.853410142602826],[117.2955074402574,47.69770905210742],[118.06414269416669,48.066730455103674],[118.86657433479493,47.74706004494615],[119.77282392789748,47.048058783550125],[119.66326989143872,46.69267995867891],[118.8743257996387,46.805412095723646],[117.42170128791417,46.67273285581425],[116.71786828009884,46.388202419615205],[115.98509647020006,45.72723501238599],[114.46033165899604,45.33981679949381],[113.46390669154414,44.80889313412711],[112.43606245325878,45.01164561622428],[111.87330610560028,45.102079372735055],[111.34837690637943,44.45744171811008],[111.6677372579432,44.073175767587706],[111.82958784388134,43.743118394539515],[111.12968224492022,43.406834011400136],[110.41210330611527,42.871233628911014],[109.24359581913143,42.51944631608409],[107.74477257693793,42.481515814781865],[106.12931562706166,42.1343277044289],[104.96499393109345,41.597409572916334],[104.52228193564898,41.90834666601654],[103.31227827353479,41.90746816666759],[101.83304039917992,42.51487295182627],[100.84586551310824,42.66380442969144],[99.51581749878001,42.52469147396172],[97.45175744017799,42.74888967546001],[96.3493957865278,42.72563528092868],[95.76245486855667,43.3194491643946],[95.3068754414715,44.24133087826546],[94.6889286641253,44.352331854828414],[93.48073367714127,44.97547211361995],[92.1338908223182,45.11507599545645],[90.94553958533429,45.286073309910265],[90.58576826371828,45.71971609148751],[90.97080936072499,46.88814606382292],[90.2808256367639,47.69354909930792],[88.85429772334673,48.06908173277295],[88.01383222855173,48.5994627956006],[87.75126427607671,49.29719798440548]]]}},{"type":"Feature","properties":{"admin":"Mozambique","name":"Mozambique","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[34.559989047999345,-11.520020033415925],[35.31239790216903,-11.439146416879144],[36.51408165868425,-11.720938002166733],[36.77515099462279,-11.594537448780804],[37.47128421402659,-11.568750909067155],[37.82764489111138,-11.268769219612834],[38.427556593587745,-11.285202325081654],[39.52102990088377,-10.896853936408224],[40.31658857601718,-10.317096042525696],[40.47838748552302,-10.765440769089992],[40.43725304541867,-11.761710707245014],[40.56081139502856,-12.639176527561023],[40.59962039567974,-14.201975192931858],[40.775475294768995,-14.69176441819424],[40.47725060401259,-15.406294447493968],[40.08926395036521,-16.100774021064456],[39.45255862809704,-16.720891208566936],[38.53835086442151,-17.101023044505954],[37.411132846838875,-17.586368096591233],[36.28127933120934,-18.659687595293445],[35.896496616364054,-18.84226043058063],[35.19839969253314,-19.552811374593887],[34.78638349787004,-19.784011732667732],[34.701892531072836,-20.497043145431007],[35.17612715021536,-21.254361260668407],[35.37342776870573,-21.84083709074887],[35.3858482537054,-22.14],[35.56254553636908,-22.09],[35.5339347674043,-23.07078785572775],[35.371774122872374,-23.535358982031692],[35.60747033055562,-23.706563002214676],[35.458745558419615,-24.122609958596545],[35.040734897610655,-24.4783505184938],[34.21582400893546,-24.816314385682652],[33.013210076639005,-25.35757333750773],[32.57463219577786,-25.72731821055609],[32.66036339695008,-26.148584486599443],[32.915955031065685,-26.21586720144346],[32.83012047702888,-26.74219166433619],[32.07166548028106,-26.733820082304906],[31.98577924981196,-26.29177988048022],[31.837777947728057,-25.843331801051345],[31.75240848158187,-25.48428394948741],[31.93058882012424,-24.369416599222532],[31.670397983534645,-23.65896900807386],[31.19140913262128,-22.251509698172395],[32.24498823418801,-21.11648853931369],[32.508693068173436,-20.395292250248303],[32.65974327976257,-20.30429005298231],[32.77270796075262,-19.715592136313298],[32.611994256324884,-19.419382826416268],[32.65488569512714,-18.67208993904349],[32.849860874164385,-17.979057305577175],[32.84763878757584,-16.713398125884613],[32.32823896661022,-16.39207406989375],[31.852040643040592,-16.319417006091374],[31.636498243951188,-16.07199024827788],[31.173063999157673,-15.860943698797868],[30.338954705534537,-15.880839125230242],[30.274255812305103,-15.507786960515208],[30.179481235481827,-14.796099134991524],[33.21402469252521,-13.97186003993615],[33.78970014825668,-14.451830743063068],[34.06482547377862,-14.359950046448118],[34.459633416488536,-14.61300953538142],[34.517666049952304,-15.013708591372607],[34.30729129409209,-15.478641452702592],[34.381291945134045,-16.18355966559604],[35.03381025568353,-16.80129973721309],[35.33906294123164,-16.107440280830108],[35.77190473810835,-15.89685881924072],[35.686845330555926,-14.611045830954328],[35.267956170398,-13.887834161029565],[34.90715132013616,-13.565424899960565],[34.559989047999345,-13.579997653866872],[34.28000613784197,-12.280025323132504],[34.559989047999345,-11.520020033415925]]]}},{"type":"Feature","properties":{"admin":"Mauritania","name":"Mauritania","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-12.1707502913803,14.616834214735505],[-12.830658331747513,15.303691514542942],[-13.43573767745306,16.039383042866188],[-14.099521450242175,16.30430227301049],[-14.577347581428976,16.598263658102805],[-15.135737270558812,16.58728241624078],[-15.623666144258689,16.36933706304981],[-16.120690070041928,16.45566254319338],[-16.46309811040788,16.135036119038457],[-16.54970781092906,16.67389211676196],[-16.270551723688353,17.166962795474866],[-16.146347418674846,18.108481553616652],[-16.256883307347163,19.096715806550304],[-16.377651129613266,19.59381724698198],[-16.277838100641514,20.092520656814695],[-16.536323614965465,20.56786631925149],[-17.063423224342568,20.99975210213082],[-16.84519365077399,21.333323472574875],[-12.929101935263528,21.32707062426756],[-13.118754441774708,22.77122020109625],[-12.874221564169574,23.28483226164517],[-11.93722449385332,23.374594224536164],[-11.96941891117116,25.93335276946826],[-8.687293667017398,25.8810562199889],[-8.68439978680905,27.395744126896],[-4.92333736817423,24.974574082940993],[-6.453786586930334,24.956590684503418],[-5.971128709324247,20.640833441647622],[-5.488522508150438,16.325102037007962],[-5.315277268891931,16.201853745991837],[-5.537744309908446,15.501689764869251],[-9.550238409859388,15.486496893775437],[-9.700255092802704,15.26410736740736],[-10.086846482778212,15.330485744686268],[-10.650791388379414,15.132745876521422],[-11.349095017939502,15.411256008358476],[-11.666078253617853,15.388208319556297],[-11.834207526079464,14.799096991428936],[-12.1707502913803,14.616834214735505]]]}},{"type":"Feature","properties":{"admin":"Malawi","name":"Malawi","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[34.559989047999345,-11.520020033415925],[34.28000613784197,-12.280025323132504],[34.559989047999345,-13.579997653866872],[34.90715132013616,-13.565424899960565],[35.267956170398,-13.887834161029565],[35.686845330555926,-14.611045830954328],[35.77190473810835,-15.89685881924072],[35.33906294123164,-16.107440280830108],[35.03381025568353,-16.80129973721309],[34.381291945134045,-16.18355966559604],[34.30729129409209,-15.478641452702592],[34.517666049952304,-15.013708591372607],[34.459633416488536,-14.61300953538142],[34.06482547377862,-14.359950046448118],[33.78970014825668,-14.451830743063068],[33.21402469252521,-13.97186003993615],[32.68816531752312,-13.712857761289271],[32.99176435723788,-12.783870537978272],[33.30642215346307,-12.435778090060214],[33.11428917820191,-11.607198174692313],[33.31531049981728,-10.796549981329695],[33.485687697083584,-10.525558770391113],[33.23138797377529,-9.6767216935648],[32.759375441221316,-9.230599053589058],[33.73972903823044,-9.417150974162722],[33.94083772409653,-9.693673841980292],[34.28000613784197,-10.159999688358402],[34.559989047999345,-11.520020033415925]]]}},{"type":"Feature","properties":{"admin":"Malaysia","name":"Malaysia","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[101.0755155782133,6.204867051615891],[101.15421878459381,5.691384182147713],[101.81428185425801,5.810808417174228],[102.14118696493641,6.221636053894655],[102.37114708863521,6.12820506431096],[102.96170535686667,5.524495144061077],[103.38121463421214,4.855001125503746],[103.43857547405617,4.181605536308381],[103.33212202353485,3.72669790284297],[103.42942874554052,3.382868760589019],[103.50244754436888,2.791018581550204],[103.85467410687033,2.515454006353763],[104.24793175661148,1.631141058759055],[104.22881147666352,1.293048000489534],[103.51970747275443,1.226333726400682],[102.57361535035477,1.967115383304744],[101.39063846232916,2.760813706875623],[101.27353966675584,3.27029165284118],[100.69543541870668,3.939139715994869],[100.55740766805509,4.767280381688279],[100.19670617065772,5.312492580583678],[100.30626020711651,6.040561835143875],[100.08575687052708,6.46448944745029],[100.25959638875692,6.64282481528957],[101.0755155782133,6.204867051615891]]],[[[118.61832075406483,4.47820241944754],[117.88203494677016,4.137551377779487],[117.01521447150634,4.306094061699468],[115.86551720587676,4.306559149590156],[115.51907840379198,3.169238389494395],[115.13403730678523,2.821481838386219],[114.62135542201747,1.430688177898886],[113.80584964401953,1.217548732911041],[112.85980919805218,1.497790025229946],[112.38025190638365,1.410120957846757],[111.79754845586042,0.904441229654651],[111.15913781132656,0.976478176269509],[110.5140609070271,0.773131415200993],[109.83022667850884,1.338135687664191],[109.66326012577372,2.006466986494984],[110.39613528853704,1.663774725751395],[111.16885298059748,1.850636704918784],[111.37008100794208,2.697303371588872],[111.79692833867284,2.885896511238073],[112.99561486211525,3.102394924324869],[113.71293541875872,3.893509426281127],[114.2040165548284,4.525873928236819],[114.65959598191353,4.00763682699781],[114.86955732631537,4.348313706881952],[115.34746097215067,4.316636053887009],[115.4057003113436,4.955227565933824],[115.4507104838698,5.447729803891561],[116.22074100145096,6.143191229675621],[116.72510298061974,6.924771429873998],[117.12962609260046,6.928052883324566],[117.6433931824463,6.422166449403305],[117.68907514859234,5.98749013918018],[118.3476912781522,5.708695786965462],[119.18190392463993,5.407835598162249],[119.11069380094172,5.016128241389864],[118.43972700406408,4.966518866389619],[118.61832075406483,4.47820241944754]]]]}},{"type":"Feature","properties":{"admin":"Namibia","name":"Namibia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[16.34497684089524,-28.576705010697697],[15.601818068105812,-27.821247247022797],[15.210472446359455,-27.09095590587404],[14.989710727608548,-26.117371921495153],[14.74321414557633,-25.392920017195376],[14.40814415859583,-23.85301401132984],[14.385716586981143,-22.656652927340687],[14.257714064194172,-22.11120818449995],[13.868642205468657,-21.699036960539978],[13.352497999737436,-20.872834161057497],[12.82684533046449,-19.67316578540166],[12.608564080463616,-19.045348809487695],[11.794918654028065,-18.069129327061912],[11.734198846085118,-17.30188933682447],[12.215461460019352,-17.11166838955808],[12.814081251688403,-16.941342868724067],[13.462362094789963,-16.97121184658877],[14.058501417709008,-17.42338062914266],[14.20970665859502,-17.353100681225715],[18.26330936043416,-17.309950860262003],[18.9561869646036,-17.789094740472255],[21.377176141045563,-17.93063648851969],[23.215048455506057,-17.52311614346598],[24.03386152517077,-17.29584319424632],[24.6823490740015,-17.35341073981947],[25.076950310982255,-17.578823337476617],[25.084443393664564,-17.661815687737366],[24.520705193792537,-17.887124932529932],[24.21736453623921,-17.889347019118485],[23.579005568137713,-18.281261081620055],[23.196858351339294,-17.869038181227783],[21.65504031747897,-18.219146010005225],[20.91064131031453,-18.252218926672015],[20.881134067475863,-21.814327080983144],[19.895457797940672,-21.849156996347865],[19.895767856534427,-24.767790215760588],[19.89473432788861,-28.46110483166077],[19.00212731291108,-28.972443129188857],[18.464899122804745,-29.04546192801727],[17.836151971109526,-28.85637786226131],[17.3874971859515,-28.783514092729774],[17.2189286638154,-28.355943291946804],[16.8240173682409,-28.082161553664463],[16.34497684089524,-28.576705010697697]]]}},{"type":"Feature","properties":{"admin":"New Caledonia","name":"New Caledonia","continent":"Australia"},"geometry":{"type":"Polygon","coordinates":[[[165.77998986232635,-21.08000497811562],[166.5999914899338,-21.700018812753523],[167.12001142808688,-22.159990736583488],[166.74003462144475,-22.399976088146943],[166.18973229396863,-22.129708347260447],[165.47437544175216,-21.67960662199823],[164.82981530177565,-21.149819838141948],[164.16799523341362,-20.444746595951624],[164.02960574773596,-20.105645847252347],[164.45996707586266,-20.120011895429492],[165.020036249042,-20.45999114347773],[165.46000939357506,-20.800022067958253],[165.77998986232635,-21.08000497811562]]]}},{"type":"Feature","properties":{"admin":"Niger","name":"Niger","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[2.154473504249949,11.940150051313422],[2.177107781593917,12.625017808477534],[1.024103224297619,12.851825669806598],[0.993045688490156,13.335749620003863],[0.429927605805517,13.988733018443892],[0.295646396495215,14.444234930880665],[0.374892205414767,14.928908189346144],[1.015783318698481,14.968182277887989],[1.385528191746971,15.323561102759236],[2.74999270998154,15.409524847876751],[3.63825890464659,15.56811981858044],[3.723421665063596,16.184283759012654],[4.270209995143886,16.85222748460131],[4.267419467800095,19.155265204337123],[5.677565952180712,19.60120697679979],[8.572893100629868,21.565660712159225],[11.999505649471695,23.471668402596432],[13.58142459479046,23.040506089769274],[14.14387088385524,22.491288967371126],[14.8513,22.86295000000012],[15.096887648181848,21.308518785074902],[15.471076694407314,21.04845713956598],[15.487148064850144,20.73041453702563],[15.90324669766431,20.3876189234175],[15.68574059414777,19.957180080642384],[15.300441114979716,17.927949937405],[15.247731154041842,16.62730581305078],[13.97220177578168,15.68436595302114],[13.540393507550784,14.36713369390122],[13.956698846094124,13.996691189016923],[13.954476759505608,13.353448798063765],[14.595781284247604,13.33042694747786],[14.4957873877629,12.859396267137353],[14.213530714584746,12.80203542729333],[14.181336297266906,12.483656927943168],[13.995352817448287,12.4615652531383],[13.318701613018558,13.55635630945795],[13.083987257548808,13.596147162322492],[12.302071160540546,13.037189032437537],[11.527803175511504,13.328980007373556],[10.989593133191532,13.387322699431191],[10.701031935273816,13.246917832894038],[10.114814487354748,13.277251898649464],[9.524928012743088,12.85110219975456],[9.014933302454436,12.826659247280414],[7.804671258178869,13.343526923063733],[7.330746697630046,13.098038031461211],[6.82044192874781,13.115091254117598],[6.445426059605721,13.492768459522718],[5.443058302440135,13.865923977102224],[4.368343540066006,13.747481594289408],[4.107945997747378,13.53121572514794],[3.967282749048933,12.956108710171574],[3.680633579125924,12.552903347214167],[3.611180454125587,11.660167141155965],[2.848643019226585,12.235635891158209],[2.490163608418015,12.233052069543588],[2.154473504249949,11.940150051313422]]]}},{"type":"Feature","properties":{"admin":"Nigeria","name":"Nigeria","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[8.500287713259693,4.771982937026847],[7.462108188515939,4.41210826254624],[7.082596469764438,4.464689032403228],[6.698072137080598,4.240594183769516],[5.898172641634686,4.262453314628984],[5.362804803090881,4.887970689305957],[5.033574252959368,5.611802476418233],[4.325607130560683,6.270651149923466],[3.574180128604552,6.258300482605717],[2.691701694356254,6.258817246928628],[2.74906253420022,7.870734361192886],[2.723792758809509,8.506845404489708],[2.912308383810255,9.13760793704432],[3.220351596702101,9.4441525333997],[3.705438266625918,10.063210354040208],[3.600070021182801,10.332186184119406],[3.797112257511713,10.734745591673104],[3.572216424177469,11.327939357951516],[3.611180454125558,11.660167141155966],[3.68063357912581,12.552903347214222],[3.967282749048848,12.956108710171572],[4.107945997747321,13.531215725147828],[4.368343540066063,13.747481594289324],[5.443058302440163,13.865923977102296],[6.445426059605636,13.492768459522676],[6.820441928747753,13.115091254117514],[7.330746697630017,13.0980380314612],[7.804671258178784,13.343526923063743],[9.014933302454462,12.826659247280428],[9.524928012742944,12.851102199754475],[10.114814487354687,13.277251898649409],[10.701031935273702,13.24691783289408],[10.989593133191532,13.387322699431108],[11.527803175511393,13.328980007373584],[12.30207116054052,13.03718903243752],[13.083987257548866,13.596147162322564],[13.318701613018558,13.556356309457824],[13.995352817448346,12.461565253138344],[14.181336297266792,12.483656927943112],[14.57717776862253,12.0853608260535],[14.468192172918974,11.90475169519341],[14.415378859116682,11.572368882692071],[13.572949659894558,10.798565985553564],[13.308676385153914,10.160362046748926],[13.1675997249971,9.64062632897341],[12.955467970438972,9.417771714714702],[12.753671502339214,8.717762762888993],[12.218872104550597,8.305824082874322],[12.063946160539556,7.799808457872301],[11.8393087093668,7.397042344589434],[11.745774366918509,6.981382961449753],[11.058787876030348,6.644426784690593],[10.497375115611415,7.055357774275562],[10.118276808318257,7.038769639509879],[9.522705926154398,6.453482367372116],[9.233162876023044,6.444490668153334],[8.757532993208626,5.47966583904791],[8.500287713259693,4.771982937026847]]]}},{"type":"Feature","properties":{"admin":"Nicaragua","name":"Nicaragua","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-85.71254045280729,11.088444932494822],[-86.05848832878524,11.40343862552994],[-86.52584998243293,11.806876532432591],[-86.7459915839963,12.143961900272483],[-87.16751624220113,12.458257961471656],[-87.6684934150547,12.909909979702627],[-87.5574666002756,13.06455170333606],[-87.3923862373192,12.914018256069836],[-87.31665442579546,12.984685777228972],[-87.00576900912756,13.025794379117157],[-86.88055701368434,13.25420420984724],[-86.73382178419159,13.26309255620144],[-86.7550866360797,13.754845485890907],[-86.52070817741988,13.778487453664436],[-86.31214209668991,13.771356106008168],[-86.09626380079058,14.038187364147245],[-85.80129472526858,13.836054999237586],[-85.6986653307369,13.960078436738083],[-85.51441301140022,14.079011745657834],[-85.1653645494848,14.354369615125076],[-85.14875057650295,14.560196844943617],[-85.05278744173692,14.55154104253472],[-84.92450069857239,14.790492865452348],[-84.82003679069435,14.819586696832667],[-84.6495820787796,14.66680532476175],[-84.44933590364859,14.621614284722494],[-84.2283416409524,14.748764146376654],[-83.97572140169356,14.749435939996458],[-83.6285849677729,14.880073960830298],[-83.48998877636612,15.016267198135534],[-83.14721900097412,14.995829169164107],[-83.2332344225239,14.8998660343981],[-83.28416154654758,14.676623846897195],[-83.18212643098727,14.310703029838448],[-83.41249996614441,13.970077826386554],[-83.51983191601467,13.56769928634588],[-83.55220720084553,13.127054348193084],[-83.49851538769425,12.869292303921226],[-83.47332312695197,12.419087225794424],[-83.62610449902289,12.320850328007564],[-83.71961300325503,11.893124497927724],[-83.6508575100907,11.629032090700116],[-83.85547034375037,11.373311265503784],[-83.80893571647154,11.103043524617274],[-83.65561174186156,10.938764146361418],[-83.89505449088593,10.726839097532444],[-84.19017859570482,10.793450018756673],[-84.35593075228103,10.9992255721429],[-84.67306901725624,11.08265717207814],[-84.90300330273892,10.952303371621896],[-85.56185197624417,11.217119248901591],[-85.71254045280729,11.088444932494822]]]}},{"type":"Feature","properties":{"admin":"Netherlands","name":"Netherlands","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[6.074182570020922,53.51040334737813],[6.905139601274128,53.48216217713063],[7.092053256873895,53.14404328064488],[6.842869500362381,52.22844025329754],[6.589396599970825,51.85202912048338],[5.988658074577812,51.85161570902504],[6.156658155958779,50.803721015010574],[5.60697594567,51.03729848896977],[4.973991326526913,51.47502370869813],[4.047071160507527,51.26725861266856],[3.314971144228536,51.3457551133199],[3.830288527043137,51.620544542031936],[4.705997348661184,53.09179840759776],[6.074182570020922,53.51040334737813]]]}},{"type":"Feature","properties":{"admin":"Norway","name":"Norway","continent":"Europe"},"geometry":{"type":"MultiPolygon","coordinates":[[[[28.16554731620291,71.1854743516805],[31.293418409965472,70.4537877468599],[30.005435011522785,70.18625885688488],[31.10107872897512,69.55808014594486],[29.39958051933288,69.15691600206306],[28.591929559043187,69.06477692328669],[29.01557295097197,69.76649119737796],[27.732292107867885,70.16419302029628],[26.179622023226298,69.82529897732614],[25.68921268077639,69.092113755969],[24.73567915212671,68.64955678982143],[23.66204959483076,68.89124746365052],[22.356237827247405,68.84174144151494],[21.244936150810723,69.37044302029311],[20.64559288908958,69.10624726020085],[20.02526899585791,69.0651386583127],[19.87855960458125,68.4071943223726],[17.993868442464386,68.56739126247733],[17.729181756265344,68.01055186631622],[16.768878614985535,68.01393667263137],[16.10871219245683,67.30245555283689],[15.108411492583055,66.19386688909542],[13.555689731509087,64.78702769638146],[13.919905226302202,64.44542064071611],[13.571916131248766,64.04911408146965],[12.57993533697393,64.06621898055833],[11.930569288794228,63.12831757267698],[11.992064243221533,61.80036245385656],[12.63114668137524,61.29357168237008],[12.300365838274896,60.117932847730046],[11.468271925511171,59.43239329694599],[11.027368605196925,58.856149400459394],[10.356556837616097,59.46980703392536],[8.38200035974364,58.313288479233265],[7.048748406613297,58.07888418235727],[5.665835402050418,58.58815542259366],[5.308234490590733,59.663231919993805],[4.992078077829005,61.97099803328426],[5.912900424837885,62.61447296818268],[8.553411085655766,63.45400828719646],[10.527709181366784,64.48603831649747],[12.358346795306373,65.87972585719315],[14.7611458675816,67.81064158799512],[16.435927361728968,68.56320547146167],[19.184028354578512,69.8174441596178],[21.378416375420606,70.25516937934604],[23.02374230316158,70.20207184516626],[24.546543409938515,71.03049673123722],[26.370049676221807,70.98626170519536],[28.16554731620291,71.1854743516805]]],[[[24.72412,77.85385],[22.49032,77.44493],[20.72601,77.67704],[21.41611,77.93504],[20.8119,78.25463],[22.88426,78.45494],[23.28134,78.07954],[24.72412,77.85385]]],[[[18.25183,79.70175],[21.54383,78.95611],[19.02737,78.5626],[18.47172,77.82669],[17.59441,77.63796],[17.1182,76.80941],[15.91315,76.77045],[13.76259,77.38035],[14.66956,77.73565],[13.1706,78.02493],[11.22231,78.8693],[10.44453,79.65239],[13.17077,80.01046],[13.71852,79.66039],[15.14282,79.67431],[15.52255,80.01608],[16.99085,80.05086],[18.25183,79.70175]]],[[[25.447625359811887,80.4073403998945],[27.407505730913492,80.05640574820045],[25.92465050629817,79.51783397085454],[23.024465773213613,79.40001170522909],[20.075188429451877,79.56682322866723],[19.897266473070907,79.8423619656475],[18.46226362475792,79.8598802761944],[17.368015170977454,80.318896186027],[20.455992059010693,80.59815562613223],[21.907944777115397,80.35767934846207],[22.91925255706743,80.65714427359349],[25.447625359811887,80.4073403998945]]]]}},{"type":"Feature","properties":{"admin":"Nepal","name":"Nepal","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[88.12044070836984,27.876541652939583],[88.0431327656612,27.445818589786818],[88.17480431514089,26.810405178325944],[88.0602376647498,26.414615383402484],[87.22747195836628,26.39789805755607],[86.02439293817915,26.630984605408567],[85.25177859898335,26.726198431906337],[84.67501793817377,27.23490123138753],[83.30424889519954,27.36450572357555],[81.99998742058496,27.925479234319987],[81.057202589852,28.416095282499036],[80.08842451367626,28.794470119740136],[80.47672122591737,29.729865220655338],[81.11125613802929,30.1834809433134],[81.52580447787473,30.422716986608627],[82.32751264845086,30.115268052688126],[83.33711510613719,29.463731594352193],[83.89899295444673,29.320226141877654],[84.23457970575015,28.83989370372469],[85.01163821812303,28.642773952747337],[85.8233199401315,28.2035759546987],[86.95451704300059,27.97426178640351],[88.12044070836984,27.876541652939583]]]}},{"type":"Feature","properties":{"admin":"New Zealand","name":"New Zealand","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[173.0203747907407,-40.91905242285642],[173.247234328502,-41.33199879330078],[173.95840538970288,-40.9267005348356],[174.2475867048081,-41.34915536882166],[174.24851688058945,-41.77000823340675],[173.87644656808789,-42.23318409603882],[173.22273969959562,-42.97003834408856],[172.71124637277072,-43.3722876930485],[173.0801127464702,-43.85334360125358],[172.30858361235244,-43.865694268571325],[171.45292524646362,-44.24251881284372],[171.18513797432723,-44.897104180684885],[170.6166972191166,-45.9089287249597],[169.83142215400926,-46.355774834987585],[169.33233117093425,-46.64123544696785],[168.41135379462852,-46.61994475686358],[167.76374474514682,-46.290197442409195],[166.6768860211842,-46.21991749449224],[166.50914432196467,-45.85270476662621],[167.04642418850324,-45.110941257508664],[168.30376346259686,-44.12397307716612],[168.9494088076515,-43.93581918719142],[169.66781456937315,-43.555325616226334],[170.52491987536615,-43.03168832781282],[171.125089960004,-42.51275359473778],[171.5697139834432,-41.76742441179213],[171.94870893787188,-41.514416599291145],[172.09722700427872,-40.95610442480967],[172.79857954334395,-40.493962090823466],[173.0203747907407,-40.91905242285642]]],[[[174.61200890533053,-36.15639739354054],[175.33661583892717,-37.20909799575826],[175.3575964704375,-36.52619394302112],[175.80888675364247,-36.79894215265768],[175.95849002512747,-37.55538176854606],[176.76319542877656,-37.881253350578696],[177.43881310456047,-37.96124846776649],[178.01035444570869,-37.57982472102013],[178.51709354076283,-37.69537322362479],[178.2747310733138,-38.582812595373085],[177.97046023997933,-39.16634286881297],[177.20699262929912,-39.14577564876084],[176.939980503647,-39.44973642350156],[177.03294640534014,-39.87994272233147],[176.8858236026052,-40.06597787858216],[176.50801720611935,-40.60480803808958],[176.01244022044028,-41.28962411882149],[175.23956749908297,-41.68830779395323],[175.0678983910094,-41.425894870775075],[174.65097293527845,-41.28182097754544],[175.22763024322362,-40.4592355283234],[174.90015669178996,-39.908933200847216],[173.824046665744,-39.508854262043506],[173.85226199777532,-39.14660247167746],[174.57480187408035,-38.797683200842755],[174.74347374908103,-38.02780771255838],[174.69701663645057,-37.381128838857954],[174.2920284365792,-36.71109221776144],[174.31900353423555,-36.53482390721389],[173.84099653553577,-36.12198088963411],[173.05417117745958,-35.23712533950033],[172.63600548735374,-34.52910654066938],[173.00704227120949,-34.450661716450334],[173.55129845610747,-35.00618336358796],[174.32939049712624,-35.265495700828616],[174.61200890533053,-36.15639739354054]]]]}},{"type":"Feature","properties":{"admin":"Oman","name":"Oman","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[58.86114139184657,21.1140345321443],[58.48798587426696,20.4289859074671],[58.03431847517659,20.481437486243347],[57.8263725116341,20.24300242764863],[57.66576216007094,19.73600495043311],[57.78870039249337,19.06757029873765],[57.69439090356067,18.9447095809638],[57.2342639504338,18.947991034414255],[56.60965091332197,18.574267076079476],[56.51218916201948,18.087113348863937],[56.28352094912801,17.876066799383945],[55.66149173363068,17.884128322821535],[55.26993940615519,17.632309068263194],[55.27490034365509,17.22835439703766],[54.79100223167411,16.950696926333357],[54.23925296409375,17.04498057704998],[53.57050825380459,16.707662665264674],[53.1085726255475,16.651051133688977],[52.782184279192066,17.34974233649123],[52.00000980002223,19.00000336351607],[54.999981723862405,19.99999400479612],[55.66665937685987,22.000001125572307],[55.20834109886319,22.708329982997007],[55.23448937360287,23.11099274341535],[55.52584109886449,23.52486928964091],[55.52863162620829,23.933604030853495],[55.9812138202205,24.130542914317857],[55.80411868675624,24.269604193615287],[55.88623253766805,24.920830593357486],[56.396847365143984,24.924732163995508],[56.84514041527605,24.241673081961487],[57.40345258975742,23.87859446867883],[58.13694786970832,23.747930609628835],[58.72921146020543,23.565667832935414],[59.180501743410346,22.992395331305456],[59.45009769067703,22.660270900965592],[59.80806033716285,22.5336119654182],[59.80614830916809,22.31052480721419],[59.4421911965364,21.71454051359208],[59.28240766788987,21.433885809814875],[58.86114139184657,21.1140345321443]]],[[[56.39142133975339,25.895990708921257],[56.26104170108091,25.714606431576748],[56.070820753814544,26.055464178973946],[56.362017449779344,26.395934353128947],[56.48567915225381,26.309117946878665],[56.39142133975339,25.895990708921257]]]]}},{"type":"Feature","properties":{"admin":"Pakistan","name":"Pakistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[75.1580277851409,37.13303091078911],[75.89689741405012,36.66680613865183],[76.19284834178568,35.89840342868782],[77.83745079947457,35.49400950778776],[76.87172163280401,34.65354401299273],[75.75706098826832,34.50492259372131],[74.24020267120495,34.74888703057125],[73.74994835805195,34.317698879527846],[74.10429365427733,33.441473293586846],[74.4515592792787,32.76489960380549],[75.25864179881319,32.27110545504049],[74.405928989565,31.692639471965272],[74.42138024282026,30.97981476493117],[73.45063846221741,29.976413479119863],[72.82375166208469,28.961591701772047],[71.77766564320031,27.91318024343452],[70.61649620960192,27.98919627533586],[69.51439293811312,26.940965684511365],[70.168926629522,26.491871649678835],[70.28287316272558,25.722228705339823],[70.84469933460282,25.21510203704351],[71.0432401874682,24.356523952730193],[68.84259931831876,24.35913361256093],[68.17664513537338,23.691965033456704],[67.44366661974546,23.944843654876983],[67.14544192898906,24.66361115162464],[66.37282758979326,25.425140896093847],[64.53040774929111,25.237038682551425],[62.905700718034595,25.2184093287102],[61.49736290878418,25.078237006118492],[61.874187453056535,26.239974880472097],[63.31663170761958,26.75653249766166],[63.23389773952028,27.217047024030705],[62.75542565292985,27.378923448184985],[62.727830438085974,28.259644883735383],[61.771868117118615,28.699333807890792],[61.369308709564926,29.303276272085917],[60.87424848820878,29.829238999952604],[62.549856805272775,29.318572496044304],[63.55026085801117,29.46833079682616],[64.14800215033124,29.340819200145965],[64.3504187356185,29.56003062592809],[65.04686201361609,29.472180691031905],[66.34647260932441,29.88794342703617],[66.38145755398601,30.73889923758645],[66.93889122911845,31.304911200479346],[67.68339358914746,31.303154201781417],[67.79268924344477,31.582930406209623],[68.55693200060931,31.71331004488201],[68.92667687365766,31.620189113892064],[69.31776411324255,31.901412258424436],[69.26252200712254,32.50194407808829],[69.68714725126485,33.10549896904123],[70.32359419137158,33.358532619758385],[69.93054324735958,34.0201201441751],[70.88180301298839,33.98885590263851],[71.15677330921345,34.348911444632144],[71.11501875192162,34.73312571872223],[71.6130762063507,35.15320343682286],[71.49876793812108,35.650563259415996],[71.26234826038574,36.0743875188578],[71.84629194528391,36.50994232842985],[72.92002485544445,36.72000702569631],[74.06755171091781,36.836175645488446],[74.57589277537296,37.02084137628345],[75.1580277851409,37.13303091078911]]]}},{"type":"Feature","properties":{"admin":"Panama","name":"Panama","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-77.88157141794524,7.223771267114783],[-78.2149360826601,7.512254950384159],[-78.42916073272606,8.052041123888925],[-78.18209570993861,8.319182440621772],[-78.43546525746568,8.387705389840788],[-78.62212053090394,8.718124497915026],[-79.12030717641373,8.996092027213022],[-79.55787736684519,8.932374986197145],[-79.76057817251004,8.584515082224398],[-80.16448116730332,8.333315944853593],[-80.38265906443962,8.29840851484043],[-80.48068925649729,8.090307522001067],[-80.00368994822715,7.54752411542337],[-80.27667070180898,7.419754136581713],[-80.42115800649707,7.271571966984763],[-80.88640092642079,7.220541490096535],[-81.0595428128147,7.817921047390596],[-81.18971574575794,7.647905585150339],[-81.51951473664467,7.706610012233908],[-81.72131120474445,8.108962714058434],[-82.13144120962889,8.175392767769635],[-82.39093441438254,8.292362372262287],[-82.8200813463504,8.290863755725821],[-82.8509580146448,8.073822740099954],[-82.96578304719735,8.225027980985983],[-82.9131764391242,8.423517157419068],[-82.82977067740515,8.626295477732368],[-82.86865719270475,8.80726634361852],[-82.71918311230051,8.925708726431493],[-82.92715491405916,9.074330145702914],[-82.93289099804356,9.476812038608172],[-82.54619625520347,9.566134751824674],[-82.1871225654234,9.20744863528678],[-82.20758643261094,8.995575262890098],[-81.80856686066926,8.95061676679617],[-81.71415401887202,9.03195547122358],[-81.43928707551153,8.786234035675715],[-80.94730160187675,8.858503526235905],[-80.52190121125005,9.11107208906243],[-79.91459977895597,9.312765204297618],[-79.5733027818843,9.611610012241526],[-79.02119177927791,9.552931423374105],[-79.05845048696035,9.454565334506524],[-78.50088762074716,9.42045888919388],[-78.05592770049799,9.247730414258296],[-77.7295135159264,8.946844387238867],[-77.35336076527386,8.670504665558068],[-77.47472286651131,8.524286200388216],[-77.24256649444007,7.935278225125442],[-77.43110795765698,7.638061224798733],[-77.75341386586139,7.709839789252141],[-77.88157141794524,7.223771267114783]]]}},{"type":"Feature","properties":{"admin":"Peru","name":"Peru","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-69.59042375352404,-17.58001189541933],[-69.85844356960584,-18.09269378018701],[-70.3725723944777,-18.34797535570886],[-71.37525021023691,-17.77379851651385],[-71.46204077827112,-17.36348764411638],[-73.4445295885004,-16.359362888252992],[-75.23788265654143,-15.26568287522778],[-76.00920508492993,-14.649286390850316],[-76.42346920439773,-13.823186944232432],[-76.25924150257416,-13.53503915777294],[-77.10619238962181,-12.222716159720816],[-78.09215287953462,-10.377712497604062],[-79.03695309112692,-8.38656788496589],[-79.44592037628483,-7.930833428583859],[-79.76057817251004,-7.194340915560081],[-80.53748165558605,-6.541667575713715],[-81.24999630402641,-6.136834405139182],[-80.92634680858242,-5.690556735866563],[-81.41094255239943,-4.736764825055459],[-81.09966956248935,-4.036394138203696],[-80.30256059438719,-3.404856459164712],[-80.18401485870965,-3.821161797708043],[-80.46929460317692,-4.059286797708999],[-80.44224199087213,-4.425724379090673],[-80.02890804718558,-4.346090996928893],[-79.62497921417615,-4.454198093283494],[-79.20528906931771,-4.959128513207388],[-78.63989722361232,-4.547784112164072],[-78.45068396677563,-3.873096612161375],[-77.83790483265858,-3.003020521663103],[-76.6353942532267,-2.608677666843817],[-75.54499569365203,-1.56160979574588],[-75.23372270374193,-0.911416924649529],[-75.37322323271384,-0.15203175212045],[-75.10662451852006,-0.05720549886486],[-74.44160051135596,-0.530820000819887],[-74.12239518908906,-1.002832533373848],[-73.65950354683459,-1.260491224781134],[-73.07039221870721,-2.308954359550952],[-72.32578650581364,-2.434218031426453],[-71.77476070828538,-2.169789727388937],[-71.41364579942977,-2.342802422702128],[-70.81347571479195,-2.256864515800742],[-70.04770850287484,-2.725156345229699],[-70.6926820543097,-3.742872002785858],[-70.39404395209498,-3.766591485207825],[-69.89363521999661,-4.298186944194326],[-70.79476884630229,-4.251264743673302],[-70.92884334988356,-4.401591485210367],[-71.74840572781653,-4.59398284263301],[-72.89192765978724,-5.274561455916979],[-72.96450720894119,-5.741251315944892],[-73.2197112698146,-6.089188734566076],[-73.12002743192357,-6.629930922068238],[-73.72448666044163,-6.918595472850638],[-73.72340145536349,-7.340998630404412],[-73.98723548042965,-7.523829847853063],[-73.57105933296705,-8.424446709835832],[-73.01538265653254,-9.03283334720806],[-73.22671342639015,-9.462212823121233],[-72.56303300646563,-9.520193780152717],[-72.18489071316982,-10.05359791426943],[-71.30241227892152,-10.079436130415372],[-70.48189388699116,-9.490118096558842],[-70.5486856757284,-11.009146823778462],[-70.09375220404688,-11.123971856331012],[-69.52967810736493,-10.951734307502193],[-68.66507971868961,-12.561300144097173],[-68.88007951523996,-12.89972909917665],[-68.92922380234953,-13.602683607643009],[-68.94888668483658,-14.45363941819328],[-69.339534674747,-14.953195489158828],[-69.16034664577494,-15.323973890853017],[-69.3897641669347,-15.66012908291165],[-68.95963538275329,-16.500697930571267],[-69.59042375352404,-17.58001189541933]]]}},{"type":"Feature","properties":{"admin":"Philippines","name":"Philippines","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[126.37681359263745,8.414706325713352],[126.47851281138787,7.750354112168976],[126.53742394420061,7.189380601424572],[126.19677290253252,6.274294338400038],[125.83142052622908,7.293715318221855],[125.36385216685228,6.78648529706099],[125.6831608419837,6.049656887227257],[125.39651167206063,5.581003322772288],[124.21978763234233,6.16135549562618],[123.93871951710692,6.88513560630612],[124.24366214406132,7.360610459823659],[123.61021243702754,7.833527329942753],[123.2960714051252,7.418875637232786],[122.82550581267539,7.457374579290216],[122.08549930225577,6.899424139834847],[121.9199280131926,7.192119452336072],[122.31235884001713,8.034962063016506],[122.94239790251964,8.316236883981174],[123.48768761606351,8.693009751821192],[123.8411544129398,8.240324204944384],[124.6014697612502,8.514157619659015],[124.76461225799562,8.960409450715458],[125.47139082245154,8.98699697512964],[125.41211795461275,9.760334784377545],[126.22271447154316,9.28607432701885],[126.30663699758507,8.782487494334573],[126.37681359263745,8.414706325713352]]],[[[123.9824377788258,10.278778591345812],[123.62318322153276,9.950090643753295],[123.30992068897933,9.318268744336676],[122.99588300994164,9.022188625520398],[122.38005496631946,9.7133609074242],[122.58608890186707,9.981044826696104],[122.8370813335087,10.261156927934234],[122.94741051645191,10.881868394408029],[123.49884972543845,10.940624497923944],[123.33777428598472,10.267383938025445],[124.07793582570122,11.232725531453706],[123.9824377788258,10.278778591345812]]],[[[118.50458092659034,9.316382554558087],[117.17427453010067,8.367499904814663],[117.66447716682137,9.066888739452931],[118.38691369026172,9.684499619989223],[118.98734215706104,10.376292019080507],[119.51149620979754,11.36966807702721],[119.68967654833989,10.554291490109872],[119.02945844937898,10.003653265823868],[118.50458092659034,9.316382554558087]]],[[[121.8835478048591,11.891755072471977],[122.48382124236146,11.582187404827506],[123.12021650603596,11.583660183147868],[123.10083784392644,11.165933742716486],[122.63771365772669,10.741308498574226],[122.00261030485956,10.441016750526089],[121.96736697803652,10.905691229694622],[122.03837039600552,11.41584096928004],[121.8835478048591,11.891755072471977]]],[[[125.50255171112349,12.162694606978349],[125.78346479706214,11.046121934447768],[125.01188398651226,11.311454576050377],[125.03276126515811,10.975816148314705],[125.27744917206024,10.358722032101308],[124.80181928924571,10.134678859899887],[124.76016808481847,10.8379951033923],[124.45910119028605,10.889929917845633],[124.30252160044172,11.495370998577227],[124.89101281138157,11.415582587118587],[124.87799035044395,11.794189968304988],[124.2667615092957,12.557760931849682],[125.22711632700782,12.53572093347719],[125.50255171112349,12.162694606978349]]],[[[121.52739383350348,13.069590155484516],[121.26219038298153,12.2055602075644],[120.83389611214653,12.704496161342416],[120.32343631396748,13.466413479053866],[121.18012820850214,13.42969737391044],[121.52739383350348,13.069590155484516]]],[[[121.32130822152357,18.504064642811013],[121.93760135303637,18.21855235439838],[122.24600630095428,18.478949896717097],[122.33695682178796,18.224882717354173],[122.17427941293317,17.81028270107637],[122.51565392465336,17.09350474697197],[122.25231082569388,16.262444362854122],[121.66278608610826,15.931017564350125],[121.50506961475337,15.12481354416462],[121.72882856657725,14.328376369682244],[122.25892540902731,14.218202216035971],[122.70127566944564,14.336541245984415],[123.95029503794024,13.782130642141066],[123.85510704965859,13.237771104378464],[124.18128869028487,12.997527370653469],[124.07741906137822,12.536676947474572],[123.29803510955225,13.02752553959898],[122.9286519715299,13.552919826710404],[122.67135501514866,13.185836289925131],[122.03464969288054,13.784481919810345],[121.12638471891859,13.63668732345556],[120.6286373230833,13.857655747935649],[120.67938357959382,14.27101552983832],[120.99181928923052,14.52539276779508],[120.69333621631269,14.756670640517282],[120.56414513558298,14.39627920171382],[120.07042850146637,14.970869452367094],[119.9209285828461,15.406346747290735],[119.88377322802825,16.363704331929963],[120.28648766487878,16.034628811095327],[120.39004723519172,17.599081122299506],[120.7158671407919,18.505227362537536],[121.32130822152357,18.504064642811013]]]]}},{"type":"Feature","properties":{"admin":"Papua New Guinea","name":"Papua New Guinea","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[155.8800256695784,-6.819996840037758],[155.59999108298877,-6.919990736522491],[155.16699425681506,-6.535931491729299],[154.72919152243833,-5.900828138862208],[154.51411421123964,-5.139117526880012],[154.65250369691734,-5.042430922061839],[154.75999067608436,-5.339983819198493],[155.06291792217934,-5.566791680527486],[155.5477462099417,-6.200654799019658],[156.01996544822478,-6.540013929880386],[155.8800256695784,-6.819996840037758]]],[[[151.98279585185446,-5.478063246282344],[151.45910688700866,-5.560280450058739],[151.30139041565388,-5.840728448106701],[150.75444705627666,-6.083762709175387],[150.2411967307538,-6.317753594592984],[149.70996300679332,-6.316513360218051],[148.89006473205046,-6.026040134305432],[148.3189368023607,-5.74714242922613],[148.40182579975686,-5.437755629094722],[149.29841190002082,-5.583741550319216],[149.84556196512725,-5.505503431829339],[149.99625044169028,-5.026101169457674],[150.13975589416492,-5.001348158389788],[150.23690758687349,-5.53222014732428],[150.80746707580806,-5.455842380396886],[151.08967207255398,-5.113692722192368],[151.6478808941708,-4.757073662946168],[151.53786176982152,-4.167807305521889],[152.13679162008435,-4.148790378438519],[152.338743117481,-4.31296640382976],[152.31869266175175,-4.867661228050748],[151.98279585185446,-5.478063246282344]]],[[[147.19187381407494,-7.388024183789978],[148.08463585834937,-8.04410816816761],[148.73410525939357,-9.104663588093755],[149.3068351584844,-9.071435642130067],[149.26663089416132,-9.514406019736027],[150.0387284690343,-9.684318129111698],[149.73879845601226,-9.872937106977002],[150.80162763895913,-10.29368661869742],[150.69057498596385,-10.582712904505865],[150.02839318257583,-10.652476088099927],[149.78231001200197,-10.39326710372394],[148.92313764871722,-10.28092253992136],[147.913018426708,-10.130440769087468],[147.13544315001224,-9.492443536012017],[146.56788089415062,-8.942554619994153],[146.04848107318492,-8.067414239131308],[144.744167922138,-7.630128269077473],[143.89708784400966,-7.915330498896279],[143.28637576718427,-8.245491224809056],[143.41391320208066,-8.983068942910945],[142.62843143124422,-9.3268205705165],[142.0682589052002,-9.159595635620034],[141.03385176001387,-9.117892754760415],[141.017056919519,-5.85902190513802],[141.00021040259185,-2.600151055515624],[142.73524661679144,-3.289152927263216],[144.58397098203324,-3.861417738463401],[145.27317955950997,-4.373737888205027],[145.82978641172568,-4.876497897972683],[145.98192182839296,-5.465609226100012],[147.64807335834757,-6.083659356310803],[147.89110761941615,-6.614014580922315],[146.97090538959486,-6.721656589386255],[147.19187381407494,-7.388024183789978]]],[[[153.14003787659874,-4.499983412294113],[152.82729210836825,-4.766427097190998],[152.63867313050298,-4.176127211120927],[152.40602583232493,-3.789742526874561],[151.95323693258356,-3.462062269711821],[151.38427941305002,-3.035421644710111],[150.6620495953388,-2.741486097833956],[150.93996544820453,-2.500002129734028],[151.4799841656545,-2.779985039891386],[151.82001509013506,-2.999971612157907],[152.23998945537107,-3.24000864015366],[152.64001671774253,-3.659983005389647],[153.01999352438463,-3.980015150573293],[153.14003787659874,-4.499983412294113]]]]}},{"type":"Feature","properties":{"admin":"Poland","name":"Poland","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[15.016995883858666,51.106674099321566],[14.607098422919533,51.74518809671997],[14.685026482815683,52.08994741475519],[14.437599725002196,52.62485016540838],[14.074521111719488,52.981262518925426],[14.353315463934136,53.24817129171296],[14.119686313542584,53.757029120491026],[14.802900424873457,54.050706285205735],[16.363477003655728,54.51315867778571],[17.62283165860867,54.8515359564329],[18.620858595461637,54.682605699270766],[18.69625451017546,54.43871877706928],[19.6606400896064,54.42608388937391],[20.89224450041862,54.31252492941252],[22.73109866709265,54.32753693299331],[23.243987257589502,54.22056671814913],[23.48412763844984,53.91249766704112],[23.527535841574995,53.47012156840654],[23.804934930117778,53.08973135030606],[23.799198846133375,52.69109935160655],[23.19949384938618,52.486977444053664],[23.50800215016869,52.02364655212472],[23.52707075368437,51.57845408793023],[24.0299857927489,50.705406602575174],[23.92275719574326,50.42488108987874],[23.42650841644439,50.30850576435745],[22.518450148211596,49.476773586619736],[22.77641889821262,49.02739533140961],[22.55813764821175,49.08573802346713],[21.607808058364206,49.47010732685408],[20.88795535653841,49.32877228453582],[20.41583947111985,49.431453355499755],[19.825022820726865,49.21712535256922],[19.32071251799047,49.57157400165918],[18.909574822676316,49.43584585224456],[18.85314415861361,49.496229763377634],[18.39291385262217,49.98862864847074],[17.649445021238986,50.04903839781994],[17.554567091551117,50.36214590107641],[16.868769158605655,50.473973700556016],[16.71947594571443,50.21574656839353],[16.176253289462263,50.4226073268579],[16.238626743238566,50.69773265237983],[15.490972120839723,50.7847299261432],[15.016995883858666,51.106674099321566]]]}},{"type":"Feature","properties":{"admin":"Puerto Rico","name":"Puerto Rico","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-66.2824344550082,18.51476166429536],[-65.77130286320929,18.426679185453875],[-65.59100379094293,18.228034979723912],[-65.84716386581376,17.975905666571855],[-66.59993445500947,17.98182261806927],[-67.18416236028526,17.946553453030074],[-67.24242753769434,18.374460150622937],[-67.10067908391773,18.520601101144347],[-66.2824344550082,18.51476166429536]]]}},{"type":"Feature","properties":{"admin":"North Korea","name":"Dem. Rep. Korea","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[130.6400159038524,42.39500946712527],[130.7800073589311,42.22000722916884],[130.400030552289,42.2800035670597],[129.96594852103723,41.94136790625105],[129.6673620952548,41.60110443782522],[129.70518924369244,40.88282786718432],[129.18811486217996,40.661807766271984],[129.0103996115282,40.4854361028598],[128.6333683615267,40.1898469101503],[127.96741417858132,40.02541250259755],[127.53343550019414,39.756850083976694],[127.50211958222528,39.323930772451526],[127.38543419811026,39.21347239842765],[127.78334272675771,39.050898342437414],[128.3497164246766,38.61224294692784],[128.20574588431143,38.37039724380188],[127.78003543509097,38.30453563084589],[127.07330854706734,38.25611481378839],[126.68371992401887,37.804772854151174],[126.23733890188174,37.84037791600027],[126.17475874237621,37.74968577732803],[125.68910363169717,37.940010077459014],[125.56843916229568,37.752088731429616],[125.2753304383362,37.66907054295271],[125.24008711151312,37.857224432927424],[124.98103315643395,37.94882090916477],[124.71216067921937,38.10834605564978],[124.98599409393395,38.54847422947967],[125.22194868377868,38.665857245430665],[125.13285851450748,38.84855927179858],[125.38658979706057,39.38795787206116],[125.32111575734677,39.5513845891842],[124.73748213104238,39.660344346671614],[124.26562462778529,39.92849335383415],[125.0799418478406,40.56982371679244],[126.1820451193294,41.10733612727636],[126.86908328664984,41.816569322266176],[127.34378299368299,41.50315176041596],[128.20843305879063,41.46677155208248],[128.05221520397228,41.994284572917934],[129.5966687358795,42.42498179785454],[129.9942672059332,42.98538686784378],[130.6400159038524,42.39500946712527]]]}},{"type":"Feature","properties":{"admin":"Portugal","name":"Portugal","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[-9.034817674180244,41.88057058365967],[-8.671945766626719,42.13468943945495],[-8.26385698081779,42.280468654950326],[-8.01317460776991,41.79088613541712],[-7.422512986673794,41.79207469335982],[-7.251308966490822,41.91834605566504],[-6.668605515967655,41.88338694921958],[-6.389087693700914,41.38181549739464],[-6.851126674822551,41.11108266861751],[-6.864019944679383,40.33087189387482],[-7.026413133156593,40.18452423762424],[-7.066591559263527,39.71189158788277],[-7.498632371439724,39.6295710312418],[-7.098036668313126,39.03007274022378],[-7.374092169616317,38.373058580064914],[-7.029281175148794,38.07576406508976],[-7.166507941099863,37.80389435480222],[-7.537105475281022,37.42890432387623],[-7.45372555177809,37.09778758396605],[-7.855613165711985,36.83826854099625],[-8.382816127953687,36.97888011326245],[-8.898856980820325,36.86880931248077],[-8.746101446965552,37.6513455266766],[-8.839997524439879,38.26624339451761],[-9.28746375165522,38.35848582615859],[-9.526570603869713,38.737429104154906],[-9.44698889814023,39.39206614842836],[-9.048305223008423,39.755093085278766],[-8.97735348147168,40.1593061386658],[-8.7686840478771,40.76063894303018],[-8.790853237330309,41.18433401139125],[-8.990789353867568,41.543459377603625],[-9.034817674180244,41.88057058365967]]]}},{"type":"Feature","properties":{"admin":"Paraguay","name":"Paraguay","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-62.68505713565787,-22.24902922942238],[-62.2911793687292,-21.05163461678739],[-62.265961269770784,-20.513734633061272],[-61.78632646345376,-19.633736667562957],[-60.04356462262648,-19.34274667732742],[-59.11504248720609,-19.3569060197754],[-58.1834714422805,-19.86839934660036],[-58.16639238140804,-20.17670094165367],[-57.870673997617786,-20.732687676681948],[-57.93715572776129,-22.09017587655717],[-56.881509568902885,-22.282153822521476],[-56.47331743022938,-22.08630014413528],[-55.797958136606894,-22.356929620047815],[-55.61068274598113,-22.65561939869484],[-55.51763932963962,-23.57199757252663],[-55.40074723979541,-23.956935316668797],[-55.02790178080954,-24.001273695575225],[-54.65283423523512,-23.839578138933955],[-54.29295956075451,-24.02101409271072],[-54.293476325077435,-24.57079965586396],[-54.42894609233058,-25.16218474701216],[-54.62529069682356,-25.739255466415507],[-54.78879492859504,-26.621785577096126],[-55.69584550639814,-27.387837009390857],[-56.48670162619299,-27.54849903738629],[-57.609759690976134,-27.395898532828383],[-58.618173590719735,-27.12371876394709],[-57.63366004091112,-25.60365650808164],[-57.77721716981792,-25.162339776309032],[-58.80712846539497,-24.771459242453307],[-60.028966030504016,-24.032796319273267],[-60.84656470400991,-23.88071257903829],[-62.68505713565787,-22.24902922942238]]]}},{"type":"Feature","properties":{"admin":"Palestine","name":"Palestine","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[35.545665317534535,32.39399201103057],[35.545251906076196,31.782504787720832],[35.39756066258604,31.48908600516757],[34.927408481594554,31.35343537040141],[34.97050662612599,31.616778469360803],[35.22589155451242,31.75434113212176],[34.97464074070932,31.866582343059715],[35.18393029149143,32.532510687788935],[35.545665317534535,32.39399201103057]]]}},{"type":"Feature","properties":{"admin":"Qatar","name":"Qatar","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[50.81010827006956,24.75474253997137],[50.74391076030368,25.48242422128939],[51.01335167827348,26.00699168548419],[51.286461622936045,26.114582017515865],[51.58907881043724,25.801112779233375],[51.6067004738488,25.215670477798735],[51.38960778179062,24.62738597258805],[51.11241539897701,24.55633087818672],[50.81010827006956,24.75474253997137]]]}},{"type":"Feature","properties":{"admin":"Romania","name":"Romania","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.710531447040488,47.882193915389394],[23.1422363624068,48.09634105080694],[23.760958286237404,47.98559845640545],[24.402056105250377,47.98187775328042],[24.86631717296057,47.73752574318831],[25.207743361112986,47.89105642352746],[25.94594119640239,47.98714874937421],[26.197450392366925,48.22088125263034],[26.61933678559779,48.22072622333346],[26.92417605968756,48.12326447203098],[27.233872918412736,47.826770941756365],[27.55116621268484,47.40511709247082],[28.128030226359037,46.81047638608824],[28.160017937947707,46.37156260841721],[28.054442986775392,45.94458608660562],[28.233553501099035,45.48828318946837],[28.67977949393937,45.30403087013169],[29.14972496920165,45.46492544207244],[29.603289015427425,45.29330801043112],[29.62654340995876,45.03539093686239],[29.14161176933183,44.82021027279904],[28.837857700320196,44.91387380632804],[28.55808149589199,43.70746165625812],[27.970107049275068,43.8124681666752],[27.242399529740904,44.1759860296324],[26.06515872569974,43.94349376075126],[25.569271681426923,43.68844472917471],[24.10067915212417,43.741051337247846],[23.33230228037632,43.89701080990471],[22.94483239105184,43.82378530534712],[22.657149692482985,44.23492300066128],[22.474008416440594,44.40922760678176],[22.70572553883735,44.578002834647016],[22.459022251075933,44.70251719825429],[22.145087924902807,44.47842234962057],[21.562022739353605,44.768947251965486],[21.483526238702233,45.18117015235777],[20.87431277841335,45.41637543393422],[20.76217492033998,45.73457306577142],[20.220192498462833,46.12746898048655],[21.021952345471245,46.316087958351886],[21.62651492685387,46.99423777931814],[22.09976769378283,47.672439276716695],[22.710531447040488,47.882193915389394]]]}},{"type":"Feature","properties":{"admin":"Russia","name":"Russia","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[143.64800744036285,50.74760040954151],[144.6541475770856,48.97639069273758],[143.17392785051717,49.306551418650365],[142.55866824765008,47.861575018904915],[143.53349246640403,46.83672801369248],[143.5052771343726,46.137907619809475],[142.7477006369739,46.74076487892656],[142.09203006405448,45.96675527605878],[141.906925083585,46.805928860046535],[142.01844282447087,47.78013296161292],[141.90444461483503,48.85918854429956],[142.13580000220566,49.61516307229745],[142.17998335181528,50.9523424342819],[141.59407596249002,51.93543488220253],[141.68254601457363,53.30196645772877],[142.60693403541075,53.76214508728789],[142.20974897681538,54.22547597921685],[142.65478641171293,54.365880845753864],[142.91461551327654,53.704577541714734],[143.26084760963204,52.74076040303903],[143.23526777564763,51.75666026468873],[143.64800744036285,50.74760040954151]]],[[[22.73109866709265,54.32753693299331],[20.892244500418652,54.31252492941257],[19.6606400896064,54.42608388937397],[19.88848147958134,54.86616038677148],[21.268448927503492,55.19048167583528],[22.3157235043306,55.015298570365886],[22.75776370615528,54.856574408581416],[22.651051873472564,54.58274099386669],[22.73109866709265,54.32753693299331]]],[[[180.00000000000014,70.83219920854667],[178.903425,70.78114],[178.7253,71.0988],[180.00000000000014,71.51571433642825],[180.00000000000014,70.83219920854667]]],[[[143.60385,73.21244],[142.08763,73.20544],[140.038155,73.31692],[139.86312,73.36983],[140.81171,73.76506],[142.06207,73.85758],[143.48283,73.47525],[143.60385,73.21244]]],[[[150.73167,75.08406],[149.575925,74.68892],[147.977465,74.778355],[146.11919,75.17298],[146.358485,75.49682],[148.22223,75.345845],[150.73167,75.08406]]],[[[145.086285,75.562625],[144.3,74.82],[140.61381,74.84768],[138.95544,74.61148],[136.97439,75.26167],[137.51176,75.94917],[138.831075,76.13676],[141.471615,76.09289],[145.086285,75.562625]]],[[[57.535692579992386,70.72046397570215],[56.94497928246393,70.63274323188665],[53.67737511578419,70.76265778266846],[53.41201663596538,71.20666168892019],[51.601894565645715,71.47475901965048],[51.45575361512421,72.01488108996513],[52.47827518088357,72.22944163684095],[52.44416873557084,72.77473135038484],[54.42761355979765,73.62754751249757],[53.508289829325136,73.74981395130014],[55.90245893740765,74.62748647734533],[55.6319328143597,75.08141225859715],[57.86864383324884,75.60939036732319],[61.1700443866475,76.25188345000812],[64.49836836127021,76.43905548776927],[66.21097700385509,76.80978221303123],[68.15705976753482,76.93969676381289],[68.85221113472512,76.5448113064546],[68.18057254422764,76.23364166940908],[64.637326287703,75.73775462513622],[61.58350752141475,75.26088450794678],[58.477082147053366,74.30905630156282],[56.98678551618799,73.33304352486623],[55.41933597191094,72.37126760526596],[55.62283776227629,71.54059479439032],[57.535692579992386,70.72046397570215]]],[[[106.97013000000011,76.97419],[107.24000000000012,76.48],[108.1538,76.72335000000014],[111.07726000000014,76.71],[113.33151,76.22224],[114.13417,75.84764],[113.88539,75.32779000000012],[112.77918,75.03186],[110.15125000000018,74.47673],[109.4,74.18],[110.64,74.04],[112.11919,73.78774000000011],[113.01954000000023,73.97693000000014],[113.5295800000003,73.33505],[113.96881,73.59488],[115.56782,73.75285],[118.77633000000021,73.58772],[119.02,73.12],[123.20066,72.97122],[123.25777000000018,73.73503],[125.38000000000017,73.56],[126.97644,73.56549],[128.59126,73.03871],[129.05157,72.39872],[128.46,71.98],[129.7159900000002,71.19304],[131.28858000000025,70.7869900000001],[132.25350000000014,71.8363],[133.8576600000003,71.38642000000014],[135.56193,71.65525000000012],[137.49755,71.34763],[138.23409000000012,71.62803],[139.86983,71.48783000000012],[139.14791,72.4161900000001],[140.46817,72.84941000000013],[149.5,72.2],[150.35118000000017,71.60643],[152.9689000000002,70.84222],[157.00688,71.03141],[158.99779,70.86672],[159.83031000000022,70.45324],[159.70866,69.72198],[160.94053000000028,69.43728],[162.2790700000001,69.64204],[164.05248,69.66823],[165.94037000000017,69.47199],[167.83567,69.58269],[169.57763000000017,68.6938],[170.81688000000025,69.01363],[170.00820000000016,69.65276],[170.45345000000026,70.09703],[173.6439100000002,69.81743],[175.72403000000017,69.87725000000022],[178.6,69.4],[180.00000000000014,68.96363636363655],[180.00000000000014,64.97970870219847],[179.99281,64.97433],[178.7072000000002,64.53493],[177.41128000000015,64.60821],[178.3130000000002,64.07593],[178.90825000000018,63.25197000000013],[179.37034,62.98262],[179.48636,62.56894],[179.22825000000012,62.30410000000013],[177.3643,62.5219],[174.5692900000002,61.76915],[173.68013,61.65261],[172.15,60.95],[170.6985,60.33618],[170.33085000000028,59.88177],[168.90046,60.57355],[166.29498000000027,59.7885500000002],[165.8400000000002,60.16],[164.87674,59.7316],[163.5392900000001,59.86871],[163.21711000000022,59.21101],[162.01733,58.24328],[162.05297,57.83912],[163.19191,57.61503],[163.05794000000012,56.15924000000011],[162.1295800000002,56.12219],[161.70146,55.28568000000014],[162.11749000000012,54.85514],[160.36877000000032,54.34433],[160.02173000000022,53.20257],[158.53094000000016,52.95868000000024],[158.23118,51.94269],[156.78979000000027,51.01105],[156.42000000000013,51.7],[155.99182,53.15895],[155.43366,55.38103000000011],[155.9144200000003,56.767920000000125],[156.75815,57.3647],[156.81035,57.83204],[158.36433000000017,58.05575],[160.15064000000012,59.31477000000011],[161.87204,60.34300000000012],[163.66969,61.1409],[164.4735500000001,62.55061],[163.25842000000017,62.46627],[162.65791,61.6425],[160.12148,60.54423],[159.30232,61.77396],[156.72068,61.43442],[154.2180600000003,59.75818000000012],[155.04375,59.14495],[152.81185,58.88385],[151.26573000000025,58.78089],[151.33815,59.50396],[149.78371,59.655730000000126],[148.54481,59.16448],[145.48722,59.33637],[142.19782000000012,59.03998],[138.9584800000003,57.08805],[135.12619,54.72959],[136.70171,54.60355000000011],[137.19342,53.97732],[138.1647,53.75501000000025],[138.80463,54.25455],[139.90151,54.189680000000166],[141.34531,53.08957000000011],[141.37923,52.23877],[140.59742000000017,51.23967],[140.51308,50.04553000000011],[140.0619300000002,48.44671000000015],[138.5547200000002,46.99965],[138.21971,46.30795],[136.86232,45.143500000000174],[135.51535000000018,43.989],[134.86939000000024,43.39821],[133.53687000000025,42.81147],[132.90627,42.79849],[132.27807000000024,43.284560000000106],[130.93587000000014,42.55274],[130.78,42.22000000000019],[130.64000000000016,42.395],[130.6338664084098,42.90301463477054],[131.14468794161496,42.929989732426925],[131.2885551291156,44.11151968034826],[131.02519000000024,44.96796],[131.88345421765956,45.321161607436515],[133.0971200000002,45.14409],[133.76964399631316,46.11692698829915],[134.11235000000016,47.21248000000013],[134.50081,47.57845000000014],[135.02631147678676,48.4782298854439],[133.373595819228,48.183441677434836],[132.5066900000001,47.78896],[130.9872600000001,47.79013],[130.58229332898264,48.72968740497619],[129.39781782442049,49.4406000840156],[127.65740000000035,49.76027],[127.28745568248489,50.739797268265434],[126.93915652883783,51.353894151405896],[126.56439904185696,51.78425547953269],[125.94634891164644,52.792798570356936],[125.06821129771043,53.16104482686893],[123.57147,53.4588],[122.24574791879304,53.43172597921368],[121.00308475147035,53.25140106873123],[120.17708865771687,52.753886216841195],[120.72578901579197,52.51622630473089],[120.7382,51.96411],[120.18208000000016,51.64355],[119.27939,50.58292],[119.28846072802584,50.14288279886195],[117.87924441942648,49.51098338479704],[116.67880089728618,49.8885313991214],[115.48569542853141,49.80517731383473],[114.96210981655035,50.14024730081512],[114.36245649623532,50.24830272073747],[112.89773969935437,49.543565375356984],[111.58123091028665,49.37796824807767],[110.66201053267883,49.130128078805846],[109.40244917199671,49.292960516957685],[108.47516727095127,49.282547715850704],[107.86817589725109,49.79370514586587],[106.8888041524553,50.27429596618027],[105.88659142458687,50.40601919209216],[104.62158,50.27532000000016],[103.67654544476034,50.08996613219513],[102.25589,50.510560000000105],[102.06521,51.25991],[100.88948042196263,51.51685578063841],[99.98173221232356,51.63400625264395],[98.86149051310049,52.0473660345467],[97.82573978067452,51.01099518493323],[98.2317615091917,50.42240062112872],[97.2597600000002,49.72605],[95.81402000000016,49.977460000000114],[94.81594933469876,50.01343333597088],[94.1475663594356,50.48053660745716],[93.10421,50.49529],[92.23471154171968,50.80217072204174],[90.71366743364077,50.3318118353211],[88.80556684769557,49.47052073831246],[87.75126427607684,49.29719798440554],[87.35997033076269,49.214980780629155],[86.82935672398965,49.82667470966813],[85.54126997268249,49.69285858824815],[85.11555952346208,50.11730296487763],[84.41637739455304,50.31139964456582],[83.93511478061889,50.88924551045356],[83.38300377801245,51.06918284769388],[81.94598554883994,50.812195949906325],[80.56844689323545,51.388336493528435],[80.0355595234417,50.86475088154721],[77.80091556184432,53.40441498474753],[76.52517947785475,54.17700348572713],[76.89110029491344,54.49052440044191],[74.38482000000012,53.54685000000011],[73.42567874542051,53.48981028910974],[73.50851606638436,54.035616766976595],[72.2241500182022,54.37665538188678],[71.18013105660947,54.13328522400825],[70.86526655465515,55.16973358827009],[69.06816694527289,55.38525014914349],[68.1691003762589,54.970391750704366],[65.66687,54.60125000000015],[65.17853356309594,54.354227810272064],[61.436600000000126,54.00625],[60.97806644068323,53.66499339457913],[61.69998619980062,52.979996446334255],[60.73999311711453,52.719986477257734],[60.92726850774024,52.447548326215],[59.96753380721557,51.96042043721566],[61.588003371024136,51.27265879984317],[61.337424350841,50.79907013610425],[59.932807244715555,50.84219411885182],[59.64228234237056,50.54544220641571],[58.36332000000012,51.06364],[56.77798,51.04355],[55.71694,50.62171000000014],[54.53287845237618,51.02623973245936],[52.32872358583104,51.71865224873809],[50.766648390512174,51.69276235615986],[48.70238162618104,50.605128485712825],[48.5778414243576,49.87475962991563],[47.54948042174938,50.45469839131112],[46.75159630716277,49.356005764353725],[47.043671502476585,49.15203888609757],[46.46644575377629,48.39415233010492],[47.31524000000015,47.71585],[48.05725,47.74377],[48.69473351420187,47.075628160177885],[48.59325000000014,46.56104],[49.10116000000012,46.39933],[48.645410000000105,45.80629],[47.67591,45.64149000000011],[46.68201,44.6092],[47.59094,43.66016000000012],[47.49252,42.98658],[48.58437000000017,41.80888],[47.98728315612603,41.40581920019439],[47.81566572448465,41.15141612402134],[47.37331546406639,41.219732367511135],[46.6860705910167,41.8271371526699],[46.40495079934893,41.860675157227426],[45.7764,42.092440000000224],[45.47027916848591,42.50278066667004],[44.53762291848206,42.71199270280368],[43.93121,42.5549600000001],[43.75599000000018,42.74083],[42.394400000000154,43.2203],[40.92219000000013,43.38215000000013],[40.07696495947984,43.55310415300249],[39.95500857927108,43.43499766699929],[38.68,44.28],[37.5391200000001,44.65721],[36.67546000000012,45.24469],[37.40317,45.40451],[38.23295,46.24087],[37.67372,46.63657],[39.14767,47.04475000000013],[39.12120000000012,47.26336],[38.22353803889947,47.10218984637597],[38.2551123390298,47.54640045835696],[38.77057,47.82562000000022],[39.73827762223898,47.89893707945206],[39.895620000000136,48.23241],[39.67465,48.78382000000013],[40.08078901546948,49.30742991799936],[40.069040000000115,49.60105],[38.59498823421355,49.92646190042372],[38.010631137857075,49.915661526074715],[37.393459506995235,50.383953355503664],[36.62616784032539,50.22559092874513],[35.35611616388811,50.57719737405914],[35.37791,50.77394],[35.02218305841793,51.207572333371495],[34.2248157081544,51.25599315042892],[34.14197838719061,51.56641347920619],[34.39173058445723,51.768881740925885],[33.75269982273587,52.335074571331646],[32.71576053236716,52.23846548116216],[32.41205813978777,52.28869497334976],[32.15944000000021,52.0612500000001],[31.78597,52.10168],[31.540018344862258,52.74205231384643],[31.305200636527974,53.0739958766733],[31.49764,53.16743000000013],[32.30451948418837,53.13272614197284],[32.69364301934612,53.35142080343214],[32.40559858575116,53.618045355842],[31.731272820774585,53.79402944601201],[31.7914241879624,53.97463857687218],[31.384472283663815,54.157056382862365],[30.757533807098778,54.81177094178438],[30.971835971813245,55.08154775656412],[30.873909132620064,55.55097646750351],[29.896294386522435,55.78946320253048],[29.371571893030783,55.67009064393626],[29.22951338066039,55.9183442246664],[28.176709425577933,56.16912995057878],[27.85528201672252,56.75932648378436],[27.770015903440985,57.24425812441119],[27.288184848751648,57.4745283067039],[27.71668582531577,57.79189911562444],[27.4201500000002,58.72457000000013],[28.131699253051856,59.30082510033098],[27.98112,59.47537],[29.1177,60.02805000000011],[28.07,60.50352000000014],[30.211107212044645,61.78002777774967],[31.13999108249103,62.35769277612443],[31.516092156711263,62.8676874864129],[30.035872430142796,63.55281362573855],[30.444684686003736,64.20445343693906],[29.544429559047018,64.94867157659054],[30.21765,65.80598],[29.054588657352376,66.94428620062202],[29.97742638522069,67.69829702419274],[28.445943637818765,68.36461294216399],[28.59192955904336,69.06477692328669],[29.39955,69.15692000000017],[31.101080000000103,69.55811],[32.132720000000255,69.90595000000023],[33.77547,69.3014200000001],[36.51396,69.06342],[40.29234000000016,67.9324],[41.05987000000013,67.4571300000001],[41.125950000000174,66.79158000000011],[40.01583,66.26618000000012],[38.38295,65.99953],[33.91871000000017,66.75961],[33.18444,66.63253],[34.81477,65.90015000000012],[34.87857425307876,65.43621287704819],[34.94391000000015,64.41437000000015],[36.23129,64.10945],[37.01273000000011,63.84983],[37.14197000000014,64.33471],[36.5395790350898,64.76446],[37.176040000000135,65.14322000000011],[39.59345,64.52079000000016],[40.4356,64.76446],[39.76260000000014,65.49682],[42.09309,66.47623],[43.01604000000011,66.41858],[43.94975000000013,66.06908],[44.53226,66.75634000000012],[43.69839,67.35245],[44.187950000000136,67.95051],[43.45282,68.57079],[46.250000000000135,68.25],[46.82134000000016,67.68997],[45.55517,67.56652],[45.56202,67.01005000000019],[46.34915000000014,66.66767],[47.89416000000025,66.88455000000015],[48.13876,67.52238],[50.22766000000014,67.99867000000013],[53.71743000000016,68.85738],[54.47171,68.80815],[53.48582000000012,68.20131],[54.72628,68.09702],[55.44268000000013,68.43866],[57.31702000000015,68.46628],[58.802000000000206,68.88082],[59.94142000000018,68.27844],[61.077840000000165,68.94069],[60.03,69.52],[60.55,69.85],[63.50400000000015,69.54739],[64.888115,69.23483500000013],[68.51216000000011,68.09233000000016],[69.18068,68.61563000000011],[68.16444,69.14436],[68.13522,69.35649],[66.9300800000001,69.4546100000001],[67.25976,69.92873],[66.72492000000013,70.70889000000012],[66.69466,71.02897000000023],[68.54006000000011,71.93450000000023],[69.19636,72.84336000000015],[69.94,73.04000000000012],[72.58754,72.77629],[72.79603,72.22006],[71.84811,71.40898],[72.47011,71.09019],[72.79188,70.39114],[72.5647000000002,69.02085],[73.66787,68.4079],[73.2387,67.7404],[71.2800000000001,66.32000000000015],[72.42301000000015,66.17267000000017],[72.82077,66.53267],[73.92099000000013,66.78946000000012],[74.18651000000017,67.28429],[75.052,67.76047000000015],[74.46926000000015,68.32899],[74.93584,68.98918],[73.84236,69.07146],[73.6018700000002,69.62763],[74.3998,70.63175],[73.1011,71.44717000000024],[74.8908200000002,72.12119],[74.65926,72.83227],[75.15801000000017,72.85497000000011],[75.68351,72.30056000000012],[75.28898000000011,71.33556],[76.35911,71.15287000000014],[75.90313000000016,71.87401],[77.5766500000001,72.26717],[79.6520200000001,72.32011],[81.5,71.75],[80.61071,72.58285000000011],[80.51109,73.6482],[82.25,73.85],[84.65526,73.80591000000015],[86.82230000000023,73.93688],[86.00956,74.45967000000014],[87.16682000000014,75.11643],[88.31571,75.14393],[90.26,75.64],[92.90058,75.77333],[93.23421000000013,76.0472],[95.86000000000013,76.14],[96.67821,75.91548],[98.9225400000002,76.44689],[100.7596700000002,76.43028],[101.03532,76.86189],[101.9908400000001,77.28754000000019],[104.3516,77.69792],[106.06664000000013,77.37389],[104.70500000000021,77.1274],[106.97013000000011,76.97419]]],[[[105.07547,78.30689],[99.43814,77.921],[101.2649,79.23399],[102.08635,79.34641],[102.837815,79.28129],[105.37243,78.71334],[105.07547,78.30689]]],[[[51.136186557831266,80.54728017854093],[49.793684523320685,80.4154277615482],[48.894411248577526,80.33956675894369],[48.75493655782175,80.17546824820083],[47.58611901224415,80.01018117951533],[46.50282596210965,80.24724681265434],[47.0724552752629,80.55942414012945],[44.84695804218111,80.58980988231717],[46.799138624871226,80.77191762971363],[48.31847741068465,80.78400991486993],[48.52280602396668,80.51456899690014],[49.0971895688909,80.75398590770841],[50.0397676938946,80.91888540315179],[51.52293297710368,80.6997256538019],[51.136186557831266,80.54728017854093]]],[[[99.93976,78.88094],[97.75794,78.7562],[94.97259,79.044745],[93.31288,79.4265],[92.5454,80.14379],[91.18107,80.34146],[93.77766,81.0246],[95.940895,81.2504],[97.88385,80.746975],[100.186655,79.780135],[99.93976,78.88094]]]]}},{"type":"Feature","properties":{"admin":"Rwanda","name":"Rwanda","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[30.419104852019235,-1.134659112150416],[30.816134881317705,-1.698914076345388],[30.758308953583104,-2.287250257988368],[30.469696079232975,-2.413857517103458],[29.938359002407935,-2.348486830254238],[29.632176141078585,-2.917857761246096],[29.02492638521678,-2.839257907730157],[29.117478875451543,-2.292211195488384],[29.254834832483336,-2.215109958508911],[29.29188683443661,-1.620055840667987],[29.579466180140876,-1.341313164885626],[29.821518588996003,-1.443322442229785],[30.419104852019235,-1.134659112150416]]]}},{"type":"Feature","properties":{"admin":"Western Sahara","name":"W. Sahara","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-8.794883999049075,27.120696316022503],[-8.81782833498667,27.65642588959235],[-8.665589565454805,27.65642588959235],[-8.66512447756419,27.58947907155822],[-8.68439978680905,27.395744126896],[-8.687293667017398,25.8810562199889],[-11.96941891117116,25.93335276946826],[-11.93722449385332,23.374594224536164],[-12.874221564169574,23.28483226164517],[-13.118754441774708,22.77122020109625],[-12.929101935263528,21.32707062426756],[-16.84519365077399,21.333323472574875],[-17.063423224342568,20.99975210213082],[-17.020428432675736,21.422310288981475],[-17.002961798561085,21.420734157796577],[-14.750954555713532,21.50060008390366],[-14.630832688851068,21.8609398462749],[-14.221167771857251,22.310163072188153],[-13.891110398809044,23.691009019459297],[-12.500962693725368,24.770116278578193],[-12.030758836301612,26.030866197203036],[-11.718219773800351,26.104091701760616],[-11.392554897496977,26.88342397715436],[-10.551262579785272,26.99080760345688],[-10.18942420087758,26.8609447291074],[-9.735343390328875,26.8609447291074],[-9.413037482124464,27.088476060488514],[-8.794883999049075,27.120696316022503]]]}},{"type":"Feature","properties":{"admin":"Saudi Arabia","name":"Saudi Arabia","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[42.77933230975096,16.34789134364868],[42.64957278826607,16.77463532151496],[42.347989129410706,17.075805568911996],[42.27088789243122,17.47472178798912],[41.75438195167395,17.83304616950097],[41.22139122901557,18.67159963630121],[40.93934126156653,19.486485297111752],[40.24765221533982,20.174634507726488],[39.801684604660934,20.338862209550054],[39.13939944840828,21.29190481209293],[39.02369591650678,21.98687531177019],[39.06632897314758,22.579655666590263],[38.492772251140075,23.68845103606085],[38.023860304523616,24.078685614512928],[37.48363488134438,24.28549469654501],[37.15481774267118,24.8584829777973],[37.209491408035994,25.084541530858104],[36.93162723160258,25.602959499610172],[36.63960371272122,25.82622752532722],[36.24913659032381,26.570135606384873],[35.640181512196385,27.376520494083415],[35.130186801907875,28.06335195567471],[34.63233605320797,28.05854604747156],[34.78777876154194,28.60742727305969],[34.83222049331294,28.95748342540484],[34.95603722508425,29.356554673778835],[36.06894087092205,29.19749461518445],[36.50121422704358,29.505253607698705],[36.74052778498724,29.865283311476183],[37.50358198420902,30.003776150018396],[37.668119744626374,30.338665269485897],[37.99884891129437,30.508499864213128],[37.00216556168101,31.508412990844736],[39.004885695152545,32.01021698661497],[39.19546837744496,32.16100881604266],[40.39999433773624,31.88999176688793],[41.88998091000783,31.19000865327836],[44.709498732284736,29.178891099559376],[46.56871341328174,29.099025173452283],[47.45982181172282,29.002519436147217],[47.70885053893738,28.526062730416136],[48.41609419128394,28.552004299426663],[48.80759484232716,27.689627997339876],[49.299554477745815,27.461218166609804],[49.47091352722565,27.10999929453808],[50.152422316290874,26.68966319427599],[50.21293541850467,26.27702688242537],[50.11330325704593,25.943972276304248],[50.23985883972874,25.608049628190923],[50.52738650900073,25.3278083358721],[50.660556675016885,24.999895534764015],[50.81010827006956,24.75474253997137],[51.11241539897701,24.55633087818672],[51.38960778179062,24.62738597258805],[51.57951867046326,24.245497137951105],[51.61770755392697,24.014219265228824],[52.00073327007432,23.001154486578937],[55.0068030129249,22.49694753670713],[55.20834109886319,22.70832998299704],[55.666659376859805,22.000001125572336],[54.999981723862355,19.999994004796104],[52.00000980002223,19.000003363516058],[49.11667158386486,18.61666758877494],[48.18334354024133,18.16666921637731],[47.466694777217626,17.116681626854877],[47.00000491718975,16.949999294497438],[46.74999433776164,17.283338120996174],[46.36665856302053,17.233315334537632],[45.39999922056875,17.333335069238554],[45.21665123879718,17.43332896572333],[44.06261315285507,17.41035879156959],[43.791518589051904,17.319976711491105],[43.3807943051961,17.579986680567668],[43.11579756040335,17.08844045660737],[43.218375278502734,16.666889960186406],[42.77933230975096,16.34789134364868]]]}},{"type":"Feature","properties":{"admin":"Sudan","name":"Sudan","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[33.96339279497118,9.464285229420623],[33.824963480907506,9.48406084571536],[33.842130853028145,9.981914637215992],[33.7219592481831,10.325262079630193],[33.20693808456178,10.720111638406593],[33.08676647971673,11.441141267476493],[33.20693808456178,12.179338268667092],[32.74341903730254,12.24800775714999],[32.67474954881964,12.024831919580716],[32.07389152459478,11.973329803218515],[32.314234734284746,11.68148447716652],[32.40007159488834,11.080626452941486],[31.85071568702551,10.531270545078822],[31.352861895524875,9.810240916008691],[30.837840731903377,9.70723668328452],[29.996639497988543,10.290927335388684],[29.61895731133284,10.084918869940225],[29.515953078608607,9.793073543888053],[29.000931914987166,9.604232450560287],[28.96659717074578,9.398223985111654],[27.970889587744345,9.398223985111654],[27.833550610778783,9.604232450560287],[27.112520981708876,9.638567194801622],[26.75200616717381,9.466893473594492],[26.477328213242508,9.552730334198086],[25.96230704962101,10.136420986302422],[25.790633328413943,10.411098940233726],[25.06960369934398,10.27375996326799],[24.79492574541268,9.810240916008691],[24.537415163602017,8.917537565731719],[24.194067721187643,8.728696472403895],[23.886979580860665,8.619729712933063],[23.805813429466745,8.666318874542522],[23.45901289235598,8.954285793489019],[23.39477908701729,9.26506785729225],[23.557249790142915,9.681218166538766],[23.554304233502187,10.08925527591532],[22.97754357269275,10.714462591998538],[22.86416548024425,11.142395127807616],[22.87622,11.38461000000012],[22.50869,11.67936],[22.49762,12.26024],[22.28801,12.64605],[21.93681,12.588180000000133],[22.03759,12.95546],[22.29658,13.37232],[22.18329,13.78648],[22.51202,14.09318],[22.30351,14.32682],[22.567950000000103,14.944290000000134],[23.02459,15.68072],[23.8868900000001,15.61084],[23.837660000000135,19.5804700000001],[23.85000000000013,20.0],[25.00000000000011,20.00304],[25.00000000000011,22.0],[29.02,22.0],[32.9,22.0],[36.86623,22.0],[37.18872,21.01885],[36.96941,20.837440000000125],[37.114700000000134,19.80796],[37.48179,18.61409],[37.86276,18.36786],[38.41008995947322,17.99830739997031],[37.9040000000001,17.42754],[37.16747,17.263140000000128],[36.852530000000115,16.95655],[36.75389,16.29186],[36.32322,14.82249],[36.42951,14.42211],[36.27022,13.563330000000118],[35.86363,12.57828],[35.26049,12.08286],[34.831630000000125,11.318960000000116],[34.73115000000012,10.910170000000106],[34.25745,10.63009],[33.96162,9.58358],[33.96339279497118,9.464285229420623]]]}},{"type":"Feature","properties":{"admin":"South Sudan","name":"S. Sudan","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[33.96339279497118,9.464285229420623],[33.97498,8.68456],[33.82550000000014,8.37916],[33.294800000000116,8.35458],[32.95418,7.7849700000001],[33.56829,7.71334],[34.0751,7.22595],[34.25032,6.82607],[34.70702,6.59422000000012],[35.298007118233095,5.506],[34.620196267853935,4.847122742082034],[34.005,4.249884947362147],[33.39,3.79],[32.68642,3.79232],[31.881450000000136,3.55827],[31.24556,3.7819],[30.83385,3.50917],[29.95349,4.1737],[29.715995314256013,4.600804755060152],[29.159078403446635,4.389267279473244],[28.696677687298795,4.455077215996993],[28.42899376802699,4.287154649264607],[27.979977247842942,4.408413397637388],[27.374226108517625,5.233944403500173],[27.21340905122525,5.550953477394613],[26.46590945812329,5.946717434101855],[26.213418409945113,6.546603298362127],[25.796647983511257,6.979315904158169],[25.124130893664805,7.500085150579422],[25.114932488716867,7.825104071479244],[24.56736901215219,8.229187933785452],[23.886979580860665,8.619729712933063],[24.194067721187643,8.728696472403895],[24.537415163602017,8.917537565731719],[24.79492574541268,9.810240916008691],[25.06960369934398,10.27375996326799],[25.790633328413943,10.411098940233726],[25.96230704962101,10.136420986302422],[26.477328213242508,9.552730334198086],[26.75200616717381,9.466893473594492],[27.112520981708876,9.638567194801622],[27.833550610778783,9.604232450560287],[27.970889587744345,9.398223985111654],[28.96659717074578,9.398223985111654],[29.000931914987166,9.604232450560287],[29.515953078608607,9.793073543888053],[29.61895731133284,10.084918869940225],[29.996639497988543,10.290927335388684],[30.837840731903377,9.70723668328452],[31.352861895524875,9.810240916008691],[31.85071568702551,10.531270545078822],[32.40007159488834,11.080626452941486],[32.314234734284746,11.68148447716652],[32.07389152459478,11.973329803218515],[32.67474954881964,12.024831919580716],[32.74341903730254,12.24800775714999],[33.20693808456178,12.179338268667092],[33.08676647971673,11.441141267476493],[33.20693808456178,10.720111638406593],[33.7219592481831,10.325262079630193],[33.842130853028145,9.981914637215992],[33.824963480907506,9.48406084571536],[33.96339279497118,9.464285229420623]]]}},{"type":"Feature","properties":{"admin":"Senegal","name":"Senegal","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-16.713728807023468,13.594958604379851],[-17.12610673671261,14.37351573328922],[-17.625042690490655,14.72954051356407],[-17.185172898822227,14.91947724045286],[-16.70070634608592,15.621527411354108],[-16.46309811040788,16.135036119038457],[-16.120690070041928,16.45566254319338],[-15.623666144258689,16.36933706304981],[-15.135737270558812,16.58728241624078],[-14.577347581428976,16.598263658102805],[-14.099521450242175,16.30430227301049],[-13.43573767745306,16.039383042866188],[-12.830658331747513,15.303691514542942],[-12.1707502913803,14.616834214735505],[-12.124887457721256,13.994727484589784],[-11.927716030311611,13.422075100147392],[-11.553397793005429,13.141213690641065],[-11.467899135778522,12.754518947800973],[-11.513942836950587,12.442987575729417],[-11.658300950557928,12.386582749882834],[-12.20356482588563,12.4656476912894],[-12.278599005573438,12.354440008997283],[-12.49905066573056,12.332089952031051],[-13.217818162478236,12.575873521367964],[-13.700476040084322,12.586182969610192],[-15.548476935274005,12.628170070847345],[-15.816574266004253,12.515567124883344],[-16.14771684413058,12.547761542201185],[-16.67745195155457,12.38485158940105],[-16.84152462408127,13.151393947802555],[-15.931295945692208,13.130284125211332],[-15.691000535534991,13.270353094938455],[-15.511812506562933,13.278569647672864],[-15.141163295949465,13.509511623585237],[-14.712197231494626,13.298206691943774],[-14.277701788784553,13.28058502853224],[-13.844963344772404,13.505041612192],[-14.046992356817478,13.794067898000446],[-14.376713833055785,13.625680243377372],[-14.687030808968483,13.63035696049978],[-15.081735398813816,13.876491807505982],[-15.398770310924457,13.860368760630916],[-15.624596320039936,13.623587347869556],[-16.713728807023468,13.594958604379851]]]}},{"type":"Feature","properties":{"admin":"Solomon Islands","name":"Solomon Is.","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[162.11902469304084,-10.482719008021132],[162.3986458681722,-10.82636728276212],[161.70003218001835,-10.820011081590222],[161.3197969912147,-10.204751478723123],[161.91738325423793,-10.446700534713653],[162.11902469304084,-10.482719008021132]]],[[[160.85222863183787,-9.872937106977002],[160.46258833235723,-9.89520964929484],[159.84944746321418,-9.794027194867368],[159.64000288313514,-9.639979750205269],[159.70294477766663,-9.242949720906775],[160.36295617089843,-9.400304457235531],[160.68851769433718,-9.610162448772808],[160.85222863183787,-9.872937106977002]]],[[[161.67998172428912,-9.599982191611373],[161.52939660059053,-9.784312025596432],[160.7882532086605,-8.917543226764918],[160.57999718652434,-8.320008640173965],[160.9200281110049,-8.320008640173965],[161.28000613834996,-9.120011488484447],[161.67998172428912,-9.599982191611373]]],[[[159.87502729719859,-8.337320244991714],[159.91740197167798,-8.538289890174864],[159.13367719953933,-8.114181410355398],[158.5861137229747,-7.754823500197713],[158.21114953026483,-7.421872246941147],[158.35997765526545,-7.320017998893915],[158.82000125552767,-7.56000335045739],[159.64000288313514,-8.020026950719567],[159.87502729719859,-8.337320244991714]]],[[[157.53842573468927,-7.347819919466928],[157.33941979393322,-7.404767347852554],[156.9020304710148,-7.176874281445391],[156.4913578635913,-6.765943291860394],[156.54282759015393,-6.599338474151478],[157.14000044171888,-7.021638278840653],[157.53842573468927,-7.347819919466928]]]]}},{"type":"Feature","properties":{"admin":"Sierra Leone","name":"Sierra Leone","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[-11.438779466182051,6.785916856305746],[-11.708194545935736,6.860098374860724],[-12.428098924193815,7.262942002792029],[-12.949049038128193,7.798645738145736],[-13.12402543786848,8.163946438016977],[-13.246550258832512,8.903048610871506],[-12.711957566773076,9.342711696810763],[-12.596719122762206,9.620188300001969],[-12.425928514037562,9.835834051955953],[-12.150338100625005,9.858571682164378],[-11.917277390988655,10.046983954300556],[-11.117481248407328,10.045872911006285],[-10.8391519840833,9.688246161330367],[-10.622395188835036,9.267910061068276],[-10.65477047366589,8.977178452994194],[-10.494315151399627,8.715540676300433],[-10.505477260774668,8.348896389189603],[-10.230093553091276,8.40620555260129],[-10.695594855176475,7.939464016141085],[-11.14670427086838,7.396706447779534],[-11.199801805048278,7.105845648624735],[-11.438779466182051,6.785916856305746]]]}},{"type":"Feature","properties":{"admin":"El Salvador","name":"El Salvador","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-87.79311113152656,13.384480495655051],[-87.9041121080895,13.149016831917134],[-88.48330156121678,13.163951320849488],[-88.84322791212969,13.259733588102474],[-89.25674272332928,13.4585328231293],[-89.81239356154764,13.520622056527994],[-90.09555457229095,13.73533763270073],[-90.06467790399658,13.881969509328924],[-89.7219339668207,14.134228013561694],[-89.5342193265205,14.244815578666302],[-89.58734269891654,14.362586167859485],[-89.35332597528277,14.424132798719112],[-89.05851192905764,14.340029405164085],[-88.84307288283281,14.140506700085169],[-88.54123084181597,13.980154730683475],[-88.50399797234968,13.845485948130854],[-88.06534257684012,13.964625962779774],[-87.85951534702158,13.89331248621698],[-87.72350297722939,13.785050360565505],[-87.79311113152656,13.384480495655051]]]}},{"type":"Feature","properties":{"admin":"Somaliland","name":"Somaliland","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[48.93812951029649,9.451748968946672],[48.486735874226994,8.837626247589979],[47.78942,8.003],[46.94832848489794,7.996876532417386],[43.67875,9.183580000000116],[43.296975132018744,9.540477403191742],[42.92812,10.02194000000014],[42.55876,10.572580000000126],[42.77685184100094,10.926878566934416],[43.14530480324213,11.462039699748852],[43.47065962095166,11.27770986576388],[43.666668328634834,10.864169216348158],[44.117803582542805,10.445538438351605],[44.61425906757085,10.44220530846894],[45.55694054543913,10.698029486529776],[46.645401238803,10.816549383991171],[47.52565758646278,11.127228094929986],[48.02159630716777,11.19306386966974],[48.37878380716926,11.375481675660122],[48.94820641459346,11.410621649618516],[48.94200524271842,11.394266058798165],[48.938491245322595,10.982327378783452],[48.93823286316107,9.97350006758148],[48.93812951029649,9.451748968946672]]]}},{"type":"Feature","properties":{"admin":"Somalia","name":"Somalia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[49.72862,11.5789],[50.25878,11.67957],[50.73202,12.0219],[51.1112,12.02464],[51.13387,11.74815],[51.04153,11.16651],[51.04531,10.6409],[50.83418,10.27972],[50.55239,9.19874],[50.07092,8.08173],[49.4527,6.80466],[48.59455,5.33911],[47.74079,4.2194],[46.56476,2.85529],[45.56399,2.04576],[44.06815,1.05283],[43.13597,0.2922],[42.04157,-0.91916],[41.81095,-1.44647],[41.58513,-1.68325],[40.993,-0.85829],[40.98105,2.78452],[41.855083092643966,3.918911920483726],[42.12861,4.23413],[42.76967,4.25259],[43.66087,4.95755],[44.9636,5.00162],[47.78942,8.003],[48.48673587422694,8.837626247589993],[48.93812951029644,9.451748968946616],[48.938232863161026,9.973500067581508],[48.93849124532248,10.982327378783465],[48.942005242718345,11.394266058798136],[48.948204758509725,11.41061728169796],[49.26776,11.43033],[49.72862,11.5789]]]}},{"type":"Feature","properties":{"admin":"Republic of Serbia","name":"Serbia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[20.874312778413408,45.416375433934306],[21.483526238702204,45.181170152357865],[21.56202273935372,44.768947251965635],[22.145087924902892,44.47842234962057],[22.45902225107596,44.70251719825443],[22.70572553883743,44.578002834647],[22.47400841644065,44.40922760678176],[22.657149692483067,44.23492300066135],[22.410446404721593,44.00806346290005],[22.50015669118022,43.642814439461],[22.98601850758848,43.211161200527094],[22.604801466571352,42.89851878516111],[22.43659467946139,42.58032115332394],[22.54501183440964,42.461362006188025],[22.38052575042467,42.320259507815074],[21.917080000000105,42.30364],[21.576635989402117,42.24522439706185],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.06868500000012],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.21377997027052],[19.48389,43.35229],[19.21852,43.52384],[19.454,43.568100000000115],[19.59976,44.03847],[19.11761,44.42307],[19.36803,44.863],[19.00548,44.86023],[19.390475701584588,45.23651561134237],[19.072768995854172,45.52151113543208],[18.82982,45.90888],[19.596044549241636,46.17172984474455],[20.22019249846289,46.12746898048657],[20.76217492033998,45.73457306577148],[20.874312778413408,45.416375433934306]]]}},{"type":"Feature","properties":{"admin":"Suriname","name":"Suriname","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-57.147436489476874,5.973149929219161],[-55.949318406789786,5.772877915872],[-55.84177975119041,5.953125311706059],[-55.03325029155176,6.025291449401662],[-53.95804460307089,5.756548163267764],[-54.478632981979224,4.896755682795585],[-54.3995422023565,4.212611395683466],[-54.00693050801899,3.620037746592558],[-54.18172604024626,3.189779771330421],[-54.26970516622318,2.732391669115046],[-54.52475419779971,2.311848863123785],[-55.097587449755125,2.523748073736612],[-55.569755011605984,2.42150625244713],[-55.97332210958936,2.510363877773016],[-56.07334184429028,2.220794989425499],[-55.90560014507087,2.021995754398659],[-55.99569800477174,1.817667141116601],[-56.53938574891454,1.89952260986692],[-57.1500978257399,2.768926906745406],[-57.2814334784097,3.333491929534119],[-57.60156897645785,3.334654649260684],[-58.044694383360664,4.060863552258382],[-57.86020952007869,4.576801052260449],[-57.91428890647212,4.812626451024413],[-57.307245856339485,5.073566595882225],[-57.147436489476874,5.973149929219161]]]}},{"type":"Feature","properties":{"admin":"Slovakia","name":"Slovakia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[18.85314415861361,49.496229763377634],[18.909574822676316,49.43584585224456],[19.32071251799047,49.57157400165918],[19.825022820726865,49.21712535256922],[20.41583947111985,49.431453355499755],[20.88795535653841,49.32877228453582],[21.607808058364206,49.47010732685408],[22.55813764821175,49.08573802346713],[22.280841912533553,48.82539215758066],[22.085608351334848,48.42226430927178],[21.87223636240173,48.31997081155001],[20.80129397958492,48.62385407164237],[20.473562045989866,48.56285004332181],[20.239054396249344,48.327567247096916],[19.76947065601311,48.2026911484636],[19.66136355965849,48.26661489520865],[19.174364861739885,48.11137889260386],[18.777024773847668,48.08176829690063],[18.696512892336923,47.88095368101439],[17.857132602620023,47.758428860050365],[17.488472934649813,47.86746613218621],[16.979666782304033,48.1234970159763],[16.879982944412998,48.47001333270946],[16.960288120194573,48.59698232685059],[17.101984897538895,48.8169688991171],[17.5450069515771,48.80001902932536],[17.886484816161808,48.903475246773695],[17.91351159025046,48.99649282489907],[18.10497277189185,49.0439834661753],[18.17049848803796,49.27151479755642],[18.399993523846177,49.315000515330034],[18.55497114428948,49.49501536721878],[18.85314415861361,49.496229763377634]]]}},{"type":"Feature","properties":{"admin":"Slovenia","name":"Slovenia","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[13.806475457421524,46.5093061386912],[14.632471551174827,46.431817328469535],[15.137091912504982,46.658702704447016],[16.011663852612653,46.68361074481169],[16.20229821133736,46.85238597267695],[16.370504998447412,46.8413272161665],[16.564808383864854,46.50375092221982],[15.768732944408548,46.23810822202344],[15.671529575267552,45.834153550797865],[15.323953891672405,45.73178253842767],[15.327674594797424,45.45231639259322],[14.935243767972931,45.47169505470267],[14.595109490627804,45.6349409043127],[14.411968214585412,45.466165676447446],[13.71505984869722,45.50032379819237],[13.937630242578305,45.59101593686461],[13.698109978905476,46.01677806251734],[13.806475457421524,46.5093061386912]]]}},{"type":"Feature","properties":{"admin":"Sweden","name":"Sweden","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[22.18317345550192,65.72374054632016],[21.213516879977213,65.02600535751526],[21.36963138193095,64.41358795842427],[19.778875766690216,63.60955434839502],[17.847779168375208,62.7494001328968],[17.11955488451812,61.341165676510954],[17.831346062906388,60.636583360427394],[18.78772179533209,60.08191437442258],[17.869224887776337,58.95376618105869],[16.829185011470084,58.719826972073385],[16.44770958829147,57.04111806907187],[15.87978559740378,56.10430186626865],[14.666681349352071,56.20088511822216],[14.10072106289146,55.40778107362264],[12.942910597392054,55.36173737245056],[12.625100538797025,56.30708018658195],[11.787942335668673,57.44181712506306],[11.027368605196866,58.856149400459344],[11.468271925511145,59.432393296946024],[12.300365838274896,60.117932847730025],[12.63114668137518,61.29357168237012],[11.99206424322156,61.80036245385654],[11.930569288794228,63.12831757267696],[12.57993533697393,64.06621898055832],[13.571916131248711,64.0491140814697],[13.9199052263022,64.44542064071607],[13.555689731509087,64.7870276963815],[15.108411492583,66.19386688909546],[16.108712192456775,67.30245555283688],[16.76887861498548,68.01393667263139],[17.729181756265344,68.01055186631626],[17.99386844246433,68.56739126247734],[19.87855960458125,68.40719432237256],[20.02526899585788,69.06513865831269],[20.64559288908952,69.10624726020085],[21.978534783626113,68.61684560818068],[23.539473097434435,67.93600861273524],[23.565879754335576,66.39605093043741],[23.903378533633795,66.0069273952796],[22.18317345550192,65.72374054632016]]]}},{"type":"Feature","properties":{"admin":"Swaziland","name":"Swaziland","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[32.07166548028106,-26.733820082304906],[31.868060337051073,-27.17792734142127],[31.282773064913325,-27.28587940847899],[30.685961948374477,-26.74384531016953],[30.676608514129633,-26.398078301704604],[30.949666782359905,-26.022649021104144],[31.044079624157146,-25.731452325139436],[31.3331575863979,-25.660190525008943],[31.837777947728057,-25.843331801051345],[31.98577924981196,-26.29177988048022],[32.07166548028106,-26.733820082304906]]]}},{"type":"Feature","properties":{"admin":"Syria","name":"Syria","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[38.79234052913608,33.37868642835222],[36.83406212743554,32.31293752698077],[35.71991824722274,32.70919240979486],[35.700797967274745,32.716013698857374],[35.83639692560862,32.868123277308506],[35.82110070165023,33.27742645927629],[36.06646040217205,33.82491242119254],[36.611750115715886,34.201788641897174],[36.448194207512095,34.59393524834406],[35.99840254084363,34.6449140488],[35.90502322769222,35.41000946709732],[36.14976281102653,35.821534735653664],[36.41755008316303,36.04061697035505],[36.685389031731795,36.25969920505646],[36.739494256341395,36.81752045343108],[37.066761102045824,36.623036200500614],[38.16772749202419,36.901210435527766],[38.699891391765895,36.712927354472335],[39.52258019385254,36.716053778625984],[40.67325931169568,37.091276353497285],[41.21208947120304,37.07435232192169],[42.34959109881176,37.22987254490409],[41.837064243340954,36.60585378676357],[41.28970747250545,36.35881460219226],[41.38396528500581,35.62831655531435],[41.00615888851992,34.41937226006211],[38.79234052913608,33.37868642835222]]]}},{"type":"Feature","properties":{"admin":"Chad","name":"Chad","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[14.4957873877629,12.859396267137353],[14.595781284247604,13.33042694747786],[13.954476759505608,13.353448798063765],[13.956698846094124,13.996691189016923],[13.540393507550784,14.36713369390122],[13.97217,15.68437],[15.247731154041842,16.62730581305078],[15.300441114979716,17.927949937405],[15.68574059414777,19.957180080642384],[15.90324669766431,20.3876189234175],[15.487148064850144,20.73041453702563],[15.47106,21.04845],[15.096887648181848,21.308518785074902],[14.8513,22.86295000000012],[15.86085,23.40972],[19.84926,21.49509],[23.837660000000135,19.5804700000001],[23.8868900000001,15.61084],[23.02459,15.68072],[22.567950000000103,14.944290000000134],[22.30351,14.32682],[22.51202,14.09318],[22.18329,13.78648],[22.29658,13.37232],[22.03759,12.95546],[21.93681,12.588180000000133],[22.28801,12.64605],[22.49762,12.26024],[22.50869,11.67936],[22.87622,11.38461000000012],[22.86416548024425,11.142395127807616],[22.231129184668756,10.971888739460608],[21.723821648859538,10.56705556888596],[21.000868361096305,9.47598521569148],[20.059685499764267,9.012706000194838],[19.09400800952607,9.074846910025768],[18.81200971850927,8.982914536978623],[18.91102176278059,8.630894680206435],[18.389554884523303,8.28130361575188],[17.964929640380884,7.890914008002992],[16.705988396886365,7.508327541529978],[16.4561845231874,7.734773667832938],[16.290561557691884,7.754307359239417],[16.10623172370674,7.497087917506461],[15.279460483469164,7.42192454673801],[15.436091749745737,7.692812404811887],[15.120865512765302,8.382150173369437],[14.979995558337688,8.796104234243442],[14.544466586981851,8.965861314322238],[13.954218377344088,9.549494940626683],[14.17146609869911,10.021378282100043],[14.627200555081057,9.920919297724591],[14.909353875394796,9.992129421422758],[15.46787275560524,9.982336737503545],[14.923564894275042,10.891325181517514],[14.96015180833768,11.555574042197234],[14.89336,12.21905],[14.4957873877629,12.859396267137353]]]}},{"type":"Feature","properties":{"admin":"Togo","name":"Togo","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[1.865240512712318,6.14215770102973],[1.060121697604927,5.928837388528875],[0.836931186536333,6.279978745952147],[0.570384148774849,6.914358628767188],[0.490957472342245,7.411744289576474],[0.712029249686878,8.312464504423827],[0.461191847342121,8.677222601756013],[0.365900506195885,9.46500397382948],[0.367579990245389,10.191212876827176],[-0.049784715159944,10.706917832883928],[0.023802524423701,11.018681748900802],[0.899563022474069,10.997339382364258],[0.772335646171484,10.470808213742355],[1.077795037448737,10.175606594275022],[1.425060662450136,9.825395412632998],[1.46304284018467,9.334624335157086],[1.664477573258381,9.128590399609378],[1.618950636409238,6.832038072126236],[1.865240512712318,6.14215770102973]]]}},{"type":"Feature","properties":{"admin":"Thailand","name":"Thailand","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[102.58493248902668,12.18659495691328],[101.68715783081994,12.645740057826568],[100.83180952352483,12.627084865769204],[100.97846723836918,13.412721665902565],[100.0977974792511,13.406856390837428],[100.01873253784453,12.307001044153353],[99.4789205261236,10.846366685423543],[99.15377241414313,9.963061428258554],[99.22239871622675,9.239255479362424],[99.87383182169812,9.207862046745118],[100.2796468444862,8.29515289960605],[100.45927412313272,7.429572658717175],[101.01732791545271,6.856868597842476],[101.62307905477803,6.740622463401918],[102.14118696493637,6.221636053894626],[101.81428185425796,5.810808417174242],[101.15421878459384,5.691384182147713],[101.07551557821333,6.20486705161592],[100.25959638875693,6.642824815289542],[100.08575687052709,6.46448944745029],[99.69069054565573,6.848212795433595],[99.5196415547696,7.343453884302759],[98.98825280151229,7.907993068875325],[98.50378624877597,8.382305202666286],[98.33966189981699,7.794511623562384],[98.15000939330581,8.350007432483876],[98.25915001830623,8.9739228377598],[98.55355065307302,9.932959906448543],[99.03812055867395,10.960545762572435],[99.5872860046397,11.892762762901697],[99.19635379435164,12.804748439988666],[99.21201175333606,13.269293728076462],[99.09775516153871,13.827502549693277],[98.43081912637986,14.622027696180831],[98.19207400919137,15.123702500870348],[98.53737592976567,15.30849742274608],[98.90334842325672,16.177824204976115],[98.49376102091132,16.837835598207928],[97.85912275593485,17.567946071843657],[97.37589643757352,18.44543773037581],[97.7977828308044,18.62708038988175],[98.25372399291558,19.70820302986004],[98.95967573445485,19.752980658440944],[99.54330936075928,20.186597601802056],[100.11598758341782,20.41784963630818],[100.54888105672684,20.109237982661124],[100.60629357300314,19.508344427971217],[101.28201460165167,19.46258494717676],[101.03593143107774,18.40892833096161],[101.05954756063514,17.512497259994486],[102.11359175009245,18.10910167080416],[102.41300499879158,17.93278168382428],[102.9987056823877,17.961694647691598],[103.20019209189373,18.30963206631277],[103.95647667848527,18.240954087796872],[104.71694705609247,17.428858954330078],[104.77932050986877,16.441864935771445],[105.58903852745013,15.570316066952856],[105.54433841351766,14.723933620660414],[105.21877689007886,14.27321177821069],[104.28141808473659,14.416743068901363],[102.9884220723616,14.225721136934464],[102.348099399833,13.39424734135822],[102.58493248902668,12.18659495691328]]]}},{"type":"Feature","properties":{"admin":"Tajikistan","name":"Tajikistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[71.01419803252016,40.244365546218226],[70.64801883329996,39.93575389257116],[69.5596098163685,40.10321137141297],[69.46488691597752,39.52668325454869],[70.5491618183256,39.6041979029865],[71.78469363799199,39.27946320246436],[73.67537926625478,39.431236884105594],[73.9288521666464,38.50581533462272],[74.25751427602272,38.60650686294344],[74.86481570831681,38.37884634048159],[74.82998579295209,37.990007025701395],[74.9800024758954,37.41999013930589],[73.94869591664649,37.421566270490786],[73.26005577992498,37.495256862938994],[72.63688968291726,37.04755809177835],[72.19304080596238,36.94828766534566],[71.84463829945058,36.738171291646914],[71.44869347523023,37.06564484308051],[71.54191775908477,37.90577444106563],[71.23940392444815,37.95326508234188],[71.34813113799025,38.25890534113216],[70.80682050973287,38.48628164321641],[70.37630415230927,38.138395901027515],[70.27057417184012,37.73516469985401],[70.11657840361032,37.588222764632086],[69.51878543485795,37.60899669041341],[69.19627282092436,37.15114350030742],[68.85944583524592,37.34433584243059],[68.13556237170137,37.0231151393043],[67.8299996275595,37.14499400486468],[68.39203250516594,38.15702525486873],[68.17602501818591,38.9015534531139],[67.4422196796413,39.14014354100548],[67.70142866401734,39.58047842056452],[68.53641645698941,39.53345286717892],[69.01163292834548,40.08615814875665],[69.32949466337281,40.72782440852484],[70.66662234892503,40.96021332454141],[70.45815962105961,40.49649485937028],[70.60140669137267,40.21852733007229],[71.01419803252016,40.244365546218226]]]}},{"type":"Feature","properties":{"admin":"Turkmenistan","name":"Turkmenistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[61.21081709172573,35.65007233330922],[61.12307050969413,36.49159719496624],[60.377637973883864,36.52738312432836],[59.234761997316795,37.412987982730336],[58.43615441267819,37.522309475243794],[57.33043379092896,38.02922943781093],[56.619366082592805,38.12139435480348],[56.18037479027332,37.93512665460742],[55.511578403551894,37.96411713312315],[54.80030398948656,37.39242076267818],[53.92159793479554,37.198918361961255],[53.735511102112504,37.906136176091685],[53.88092858258183,38.95209300389535],[53.101027866432894,39.29057363540712],[53.357808058491216,39.97528636327444],[52.69397260926981,40.03362905533197],[52.91525109234361,40.87652334244472],[53.85813927594112,40.631034450842165],[54.736845330632136,40.951014919593455],[54.0083109881813,41.55121084244741],[53.721713494690576,42.123191433270016],[52.91674970888007,41.86811656347732],[52.81468875510361,41.135370591794704],[52.502459751196135,41.78331553808635],[52.94429324729164,42.116034247397586],[54.07941775901494,42.32410940202082],[54.755345493392625,42.04397146256656],[55.455251092353755,41.259859117185826],[55.9681913592829,41.30864166926936],[57.09639122907909,41.32231008561056],[56.93221520368779,41.82602610937559],[57.786529982337065,42.17055288346551],[58.62901085799145,42.751551011723045],[59.97642215356977,42.2230819768902],[60.083340691981654,41.42514618587139],[60.46595299667068,41.22032664648254],[61.54717898951355,41.2663703476546],[61.88271406438468,41.08485687922939],[62.37426028834499,40.05388621679038],[63.51801476426102,39.36325653742563],[64.17022301621675,38.89240672459823],[65.21599897650738,38.402695013984285],[66.5461503437002,37.974684963526855],[66.51860680528866,37.362784328758785],[66.21738488145932,37.39379018813391],[65.74563073106681,37.66116404881206],[65.58894778835783,37.305216783185635],[64.74610517767739,37.1118177353333],[64.54647911973389,36.31207326918426],[63.982895949158696,36.007957465146596],[63.19353844590034,35.85716563571891],[62.984662306576595,35.404040839167614],[62.23065148300588,35.27066396742229],[61.21081709172573,35.65007233330922]]]}},{"type":"Feature","properties":{"admin":"East Timor","name":"Timor-Leste","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[124.9686824891162,-8.892790215697081],[125.08624637258026,-8.656887302284678],[125.94707238169823,-8.432094821815033],[126.64470421763852,-8.39824675866385],[126.95724328013979,-8.273344821814396],[127.3359281759746,-8.3973165828826],[126.96799197805652,-8.668256117388891],[125.92588504445855,-9.106007175333351],[125.08852013560107,-9.393173109579292],[125.07001997284057,-9.08998748132287],[124.9686824891162,-8.892790215697081]]]}},{"type":"Feature","properties":{"admin":"Trinidad and Tobago","name":"Trinidad and Tobago","continent":"North America"},"geometry":{"type":"Polygon","coordinates":[[[-61.68,10.76],[-61.105,10.89],[-60.895,10.855],[-60.935,10.11],[-61.77,10.0],[-61.95,10.09],[-61.66,10.365],[-61.68,10.76]]]}},{"type":"Feature","properties":{"admin":"Tunisia","name":"Tunisia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[9.482139926805273,30.30755605724618],[9.055602654668148,32.102691962201284],[8.439102817426116,32.506284898400814],[8.430472853233367,32.748337307255944],[7.612641635782181,33.344114895148955],[7.524481642292242,34.09737641045145],[8.140981479534302,34.65514598239378],[8.376367628623766,35.47987600355594],[8.217824334352313,36.43317698826027],[8.420964389691674,36.946427313783154],[9.509993523810603,37.34999441176653],[10.210002475636315,37.23000173598481],[10.180650262094527,36.72403778741507],[11.028867221733348,37.09210317641395],[11.100025668999248,36.899996039368915],[10.600004510143092,36.41000010837737],[10.593286573945134,35.947444362932806],[10.939518670300686,35.69898407647349],[10.807847120821007,34.83350718844918],[10.149592726287125,34.3307730168977],[10.339658644256613,33.78574168551531],[10.856836378633684,33.768740139291275],[11.108500603895118,33.29334280042219],[11.488787469131008,33.136995754523134],[11.432253452203692,32.36890310315287],[10.944789666394453,32.08181468355536],[10.636901482799484,31.761420803345747],[9.95022505050508,31.37606964774525],[10.056575148161752,30.961831366493595],[9.97001712407285,30.539324856075236],[9.482139926805273,30.30755605724618]]]}},{"type":"Feature","properties":{"admin":"Turkey","name":"Turkey","continent":"Asia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[36.91312706884215,41.33535838476429],[38.3476648292645,40.94858612727571],[39.51260664242024,41.10276276301856],[40.373432651538245,41.01367259374734],[41.55408410011071,41.5356562363276],[42.61954878110454,41.58317271581992],[43.582745802592704,41.09214325618256],[43.75265791196849,40.74020091405881],[43.65643639504096,40.25356395116616],[44.40000857928876,40.0050003118423],[44.79398969908199,39.71300263117703],[44.109225294782355,39.42813629816805],[44.421402622257595,38.28128123631451],[44.22575564960052,37.971584377589345],[44.77269900897774,37.17044464776844],[44.293451775902845,37.00151439060635],[43.94225874204734,37.25622752537293],[42.77912560402185,37.3852635768058],[42.34959109881176,37.229872544904104],[41.212089471203015,37.07435232192173],[40.6732593116957,37.09127635349736],[39.52258019385251,36.71605377862602],[38.69989139176592,36.71292735447231],[38.16772749202416,36.90121043552778],[37.066761102045824,36.623036200500614],[36.73949425634137,36.8175204534311],[36.685389031731816,36.2596992050565],[36.417550083163086,36.040616970355096],[36.149762811026584,35.821534735653664],[35.78208499526985,36.274995429014915],[36.16082156753705,36.65060557712837],[35.550936313628334,36.565442816711325],[34.71455325698437,36.79553213149091],[34.026894972476455,36.219960028623966],[32.509158156064096,36.10756378838919],[31.69959516777956,36.6442752141726],[30.621624790171065,36.6778648951623],[30.391096225717114,36.26298065850698],[29.69997562024556,36.144357408181],[28.732902866335387,36.67683136651643],[27.641186557737363,36.65882212986275],[27.04876793794329,37.653360907536005],[26.31821821463304,38.20813324640538],[26.80470014822873,38.98576019953355],[26.170785353304375,39.46361216893646],[27.280019972449388,40.4200137395783],[28.81997765474721,40.460011298172205],[29.240003696415577,41.21999074967268],[31.14593387220443,41.08762156835706],[32.347979363745786,41.73626414648463],[33.51328291192751,42.018960069337304],[35.16770389175186,42.04022492122544],[36.91312706884215,41.33535838476429]]],[[[27.19237674328241,40.69056570084245],[26.358009067497782,40.15199392349648],[26.043351271272535,40.61775360774316],[26.056942172965332,40.824123440100735],[26.29460208507569,40.936261298174166],[26.60419559093628,41.56211456966101],[26.117041863720825,41.826904608724554],[27.135739373490505,42.14148489030131],[27.996720411905407,42.00735871028777],[28.11552452974444,41.62288605403628],[28.98844282401878,41.299934190428175],[28.806438429486743,41.05496206314853],[27.619017368284112,40.9998233098931],[27.19237674328241,40.69056570084245]]]]}},{"type":"Feature","properties":{"admin":"Taiwan","name":"Taiwan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[121.7778178243899,24.394273586519393],[121.17563235889271,22.790857245367164],[120.7470797058962,21.970571397382106],[120.22008344938365,22.814860948166732],[120.10618859261237,23.55626272225823],[120.69467980355223,24.53845083261373],[121.49504438688876,25.29545888925738],[121.95124393116143,24.99759593352703],[121.7778178243899,24.394273586519393]]]}},{"type":"Feature","properties":{"admin":"United Republic of Tanzania","name":"Tanzania","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[33.90371119710459,-0.95],[34.07262,-1.05982],[37.69869,-3.09699],[37.7669,-3.67712],[39.20222,-4.67677],[38.74054,-5.90895],[38.79977,-6.47566],[39.44,-6.84],[39.470000000000134,-7.1],[39.19469,-7.7039],[39.25203,-8.00781],[39.18652,-8.48551],[39.53574,-9.112369999999885],[39.9496,-10.0984],[40.31659,-10.317099999999868],[39.521,-10.89688],[38.42755659358777,-11.285202325081626],[37.82764,-11.26879],[37.47129,-11.56876],[36.77515099462288,-11.59453744878078],[36.5140816586844,-11.720938002166744],[35.312397902169145,-11.439146416879163],[34.55998904799945,-11.520020033415843],[34.28,-10.16],[33.94083772409652,-9.693673841980283],[33.73972,-9.41715],[32.75937544122137,-9.230599053589],[32.191864861791935,-8.930358981973255],[31.55634809746663,-8.762048841998647],[31.157751336950064,-8.594578747317312],[30.74,-8.34],[30.2,-7.08],[29.62,-6.52],[29.419992710088305,-5.939998874539297],[29.519986606573063,-5.419978936386257],[29.339997592900367,-4.499983412294113],[29.753512404099855,-4.452389418153301],[30.11632,-4.09012],[30.50554,-3.56858],[30.75224,-3.35931],[30.74301,-3.03431],[30.52766,-2.80762],[30.46967,-2.41383],[30.758308953583132,-2.287250257988375],[30.816134881317844,-1.698914076345374],[30.41910485201929,-1.134659112150416],[30.7698600000001,-1.01455],[31.86617,-1.02736],[33.90371119710459,-0.95]]]}},{"type":"Feature","properties":{"admin":"Uganda","name":"Uganda","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[31.86617,-1.02736],[30.7698600000001,-1.01455],[30.41910485201929,-1.134659112150416],[29.82151858899612,-1.443322442229771],[29.57946618014102,-1.341313164885605],[29.587837762172164,-0.587405694179381],[29.8195,-0.2053],[29.87577884290243,0.597379868976361],[30.086153598762785,1.062312730306416],[30.468507521290285,1.583805446779706],[30.852670118948133,1.849396470543752],[31.174149204235952,2.204465236821306],[30.77332,2.339890000000139],[30.83385,3.50917],[31.24556,3.7819],[31.88145,3.55827],[32.68642,3.79232],[33.39,3.79],[34.005,4.249884947362147],[34.47913,3.5556],[34.59607,3.053740000000118],[35.03599,1.90584],[34.6721,1.17694],[34.18,0.515],[33.893568969666994,0.109813537861839],[33.90371119710459,-0.95],[31.86617,-1.02736]]]}},{"type":"Feature","properties":{"admin":"Ukraine","name":"Ukraine","continent":"Europe"},"geometry":{"type":"Polygon","coordinates":[[[31.78599816257158,52.10167796488544],[32.15941206231266,52.0612669948332],[32.412058139787625,52.288694973349735],[32.715760532366964,52.23846548116204],[33.7526998227357,52.33507457133168],[34.391730584457,51.76888174092578],[34.141978387190385,51.566413479206226],[34.22481570815426,51.25599315042894],[35.02218305841787,51.207572333371445],[35.377923618315116,50.77395539001034],[35.35611616388794,50.577197374059054],[36.62616784032533,50.22559092874513],[37.393459506995065,50.383953355503586],[38.01063113785689,49.91566152607462],[38.59498823421341,49.92646190042362],[40.0690584653391,49.60105540628169],[40.08078901546934,49.30742991799927],[39.674663934087526,48.78381846780187],[39.895632358567575,48.232405097031425],[39.73827762223882,47.89893707945198],[38.770584751141186,47.82560822202981],[38.25511233902974,47.54640045835681],[38.22353803889941,47.10218984637587],[37.42513715998998,47.0222205674042],[36.75985477066438,46.69870026304092],[35.82368452326482,46.645964463887054],[34.96234174982387,46.27319651954963],[35.02078779474598,45.65121898048465],[35.51000857925316,45.40999339454618],[36.52999799983015,45.46998973243705],[36.334712762199146,45.11321564389395],[35.23999922052811,44.9399962428516],[33.88251102065288,44.361478583344066],[33.32642093276004,44.564877020844875],[33.54692426934945,45.03477081967488],[32.454174432105496,45.32746613217606],[32.63080447767913,45.519185695978905],[33.58816206231838,45.85156850848023],[33.298567335754704,46.08059845639783],[31.74414025241517,46.33334788673738],[31.6753072446024,46.70624502215553],[30.748748813609097,46.583100084003995],[30.37760867688888,46.03241018328566],[29.603289015427425,45.29330801043112],[29.14972496920165,45.46492544207244],[28.67977949393937,45.30403087013169],[28.233553501099035,45.48828318946837],[28.48526940279276,45.59690705014589],[28.659987420371575,45.939986884131635],[28.93371748222162,46.25883047137249],[28.862972446414055,46.437889309263824],[29.072106967899288,46.51767772072248],[29.17065392427988,46.37926239682869],[29.759971958136383,46.349987697935354],[30.024658644335364,46.42393667254503],[29.83821007662629,46.525325832701675],[29.908851759569295,46.67436066343145],[29.559674106573105,46.92858287209131],[29.415135125452732,47.34664520933257],[29.05086795422732,47.51022695575249],[29.122698195113024,47.84909516050646],[28.670891147585163,48.11814850523409],[28.259546746541837,48.155562242213406],[27.52253746919515,48.4671194525011],[26.8578235206248,48.36821076109449],[26.61933678559779,48.22072622333346],[26.197450392366925,48.22088125263034],[25.94594119640239,47.98714874937421],[25.207743361112986,47.89105642352746],[24.86631717296057,47.73752574318831],[24.402056105250377,47.98187775328042],[23.760958286237404,47.98559845640545],[23.1422363624068,48.09634105080694],[22.710531447040488,47.882193915389394],[22.640819939878742,48.15023956968735],[22.085608351334848,48.42226430927178],[22.280841912533553,48.82539215758066],[22.55813764821175,49.08573802346713],[22.77641889821262,49.02739533140961],[22.518450148211596,49.476773586619736],[23.42650841644439,50.30850576435745],[23.92275719574326,50.42488108987874],[24.0299857927489,50.705406602575174],[23.52707075368437,51.57845408793023],[24.005077752384206,51.61744395609445],[24.55310631683951,51.88846100524918],[25.327787713327005,51.91065603291854],[26.33795861176855,51.832288723347915],[27.454066196408423,51.59230337178446],[28.241615024536564,51.57222707783906],[28.61761274589224,51.42771393493483],[28.99283532076352,51.60204437927146],[29.25493818534792,51.36823436136688],[30.15736372246089,51.416138414101454],[30.55511722181145,51.31950348571564],[30.619454380014837,51.82280609802236],[30.927549269338975,52.04235342061438],[31.78599816257158,52.10167796488544]]]}},{"type":"Feature","properties":{"admin":"Uruguay","name":"Uruguay","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-57.625133429582945,-30.216294854454254],[-56.97602576356472,-30.10968637463612],[-55.97324459494093,-30.883075860316296],[-55.60151017924933,-30.853878676071385],[-54.572451544805105,-31.494511407193745],[-53.787951626182185,-32.04724252698762],[-53.20958899597153,-32.72766611097472],[-53.65054399271808,-33.20200408298182],[-53.37366166849823,-33.76837778090076],[-53.80642595072652,-34.396814874002224],[-54.93586605489771,-34.95264657973362],[-55.674089728403274,-34.752658786764066],[-56.21529700379605,-34.85983570733741],[-57.139685024633096,-34.43045623142424],[-57.81786068381549,-34.46254729587749],[-58.42707414410438,-33.90945444105757],[-58.349611172098854,-33.2631889788154],[-58.13264767112143,-33.04056690850201],[-58.142440355040755,-32.04450367607615],[-57.874937303281875,-31.0165560849262],[-57.625133429582945,-30.216294854454254]]]}},{"type":"Feature","properties":{"admin":"United States of America","name":"United States","continent":"North America"},"geometry":{"type":"MultiPolygon","coordinates":[[[[-155.54211,19.08348],[-155.68817,18.91619],[-155.93665,19.05939],[-155.90806,19.33888],[-156.07347,19.70294],[-156.02368,19.81422],[-155.85008,19.97729],[-155.91907,20.17395],[-155.86108,20.26721],[-155.78505,20.2487],[-155.40214,20.07975],[-155.22452,19.99302],[-155.06226,19.8591],[-154.80741,19.50871],[-154.83147,19.45328],[-155.2221699999999,19.23972],[-155.54211,19.08348]]],[[[-156.07926,20.64397],[-156.41445,20.57241],[-156.58673,20.783],[-156.70167,20.8643],[-156.71055,20.92676],[-156.61258,21.01249],[-156.25711,20.91745],[-155.99566,20.76404],[-156.07926,20.64397]]],[[[-156.75824,21.17684],[-156.78933,21.06873],[-157.32521,21.09777],[-157.25027,21.21958],[-156.75824,21.17684]]],[[[-157.65283,21.32217],[-157.70703,21.26442],[-157.7786,21.27729],[-158.12667,21.31244],[-158.2538,21.53919],[-158.29265,21.57912],[-158.0252,21.71696],[-157.94161,21.65272],[-157.65283,21.32217]]],[[[-159.34512,21.982],[-159.46372,21.88299],[-159.80051,22.06533],[-159.74877,22.1382],[-159.5962,22.23618],[-159.36569,22.21494],[-159.34512,21.982]]],[[[-94.81758,49.38905],[-94.63999999999986,48.8400000000001],[-94.32914,48.67074],[-93.63087,48.60926],[-92.61,48.45],[-91.64,48.14],[-90.82999999999986,48.27],[-89.6,48.01],[-89.27291744663665,48.019808254582834],[-88.37811418328651,48.302917588893806],[-87.4397926233002,47.94],[-86.46199083122812,47.55333801939204],[-85.65236324740322,47.2202188177305],[-84.87607988151485,46.900083319682366],[-84.77923824739982,46.63710195574912],[-84.54374874544564,46.538684190449224],[-84.6049,46.4396],[-84.3367,46.4087700000001],[-84.14211951367328,46.51222585711572],[-84.09185126416146,46.27541860613825],[-83.89076534700565,46.11692698829915],[-83.61613094759049,46.11692698829915],[-83.46955074739462,45.994686387712584],[-83.59285071484307,45.81689362241254],[-82.55092464875817,45.347516587905446],[-82.33776312543105,44.44],[-82.13764238150395,43.57108755143999],[-82.43,42.98],[-82.89999999999988,42.430000000000135],[-83.11999999999988,42.08],[-83.14199968131256,41.975681057292995],[-83.02981014680691,41.832795722006],[-82.69008928092016,41.67510508886732],[-82.43927771679162,41.67510508886732],[-81.27774654816706,42.209025987306845],[-80.24744767934784,42.36619985612267],[-78.93936214874368,42.86361135514811],[-78.92,42.965],[-79.00999999999986,43.27],[-79.17167355011186,43.4663394231843],[-78.72027991404237,43.62508942318495],[-77.7378850979576,43.62905558936338],[-76.82003414580556,43.62878428809375],[-76.5,44.0184588937586],[-76.375,44.09631],[-75.31821,44.81645000000016],[-74.867,45.00048000000011],[-73.34782999999987,45.00738],[-71.50505999999986,45.0082],[-71.405,45.25500000000012],[-71.08482,45.305240000000154],[-70.65999999999978,45.46],[-70.305,45.915],[-69.99997,46.69307],[-69.237216,47.447781],[-68.905,47.185],[-68.23444,47.35486],[-67.79046,47.06636],[-67.79134,45.702810000000134],[-67.13741,45.13753],[-66.96466,44.80970000000015],[-68.03252,44.3252],[-69.05999999999987,43.98],[-70.1161699999999,43.68405000000014],[-70.64547563341097,43.09023834896404],[-70.81489,42.8653],[-70.825,42.335],[-70.49499999999989,41.805],[-70.08,41.78],[-70.185,42.145],[-69.88497,41.92283000000011],[-69.96503,41.63717000000016],[-70.64,41.475],[-71.12039,41.49445000000016],[-71.85999999999983,41.32],[-72.295,41.27],[-72.87643,41.22065],[-73.71,40.93110235165448],[-72.24126,41.11948000000014],[-71.94499999999981,40.93],[-73.345,40.63],[-73.982,40.628],[-73.952325,40.75075],[-74.25671,40.47351],[-73.96244,40.42763],[-74.17838,39.70926],[-74.90604,38.93954],[-74.98041,39.1964],[-75.20002,39.24845],[-75.52805,39.4985],[-75.32,38.96],[-75.0718347647898,38.78203223017928],[-75.05673,38.404120000000106],[-75.37747,38.01551],[-75.94023,37.21689],[-76.03127,37.2566],[-75.72204999999978,37.937050000000106],[-76.23287,38.319215],[-76.35,39.15],[-76.542725,38.717615],[-76.32933,38.08326],[-76.98999793161353,38.239991766913384],[-76.30161999999989,37.917945],[-76.25874,36.9664000000001],[-75.9718,36.89726],[-75.86803999999981,36.55125],[-75.72749,35.550740000000125],[-76.36318,34.80854000000013],[-77.39763499999988,34.51201],[-78.05496,33.92547],[-78.55434999999981,33.861330000000116],[-79.06067,33.49395],[-79.20357,33.15839],[-80.301325,32.509355],[-80.86498,32.0333],[-81.33629,31.44049],[-81.49042,30.72999000000012],[-81.31371,30.03552],[-80.98,29.18000000000011],[-80.53558499999987,28.47213],[-80.52999999999977,28.04],[-80.05653928497753,26.88000000000013],[-80.088015,26.205765],[-80.13155999999984,25.816775],[-80.38103,25.20616],[-80.67999999999988,25.08],[-81.17213,25.20126000000013],[-81.33,25.64],[-81.7099999999998,25.87],[-82.23999999999988,26.730000000000125],[-82.70515,27.49504],[-82.85526,27.88624],[-82.65,28.550000000000143],[-82.92999999999988,29.10000000000013],[-83.70959,29.93656],[-84.1,30.090000000000114],[-85.10882,29.63615],[-85.28784,29.686120000000127],[-85.7731,30.152610000000116],[-86.39999999999988,30.400000000000112],[-87.53035999999982,30.27433],[-88.41782,30.3849],[-89.18048999999984,30.31598],[-89.59383117841975,30.159994004836843],[-89.413735,29.89419],[-89.43,29.48864],[-89.21767,29.29108],[-89.40823,29.15961],[-89.77928,29.307140000000135],[-90.15463,29.11743],[-90.88022499999991,29.148535000000116],[-91.62678499999984,29.677000000000127],[-92.49906,29.5523],[-93.22637,29.78375],[-93.84842,29.71363],[-94.69,29.480000000000125],[-95.60026,28.73863],[-96.59404,28.30748],[-97.1399999999998,27.83],[-97.37,27.38],[-97.37999999999985,26.69],[-97.33,26.210000000000115],[-97.1399999999998,25.87],[-97.52999999999986,25.84],[-98.23999999999988,26.06000000000011],[-99.01999999999985,26.37],[-99.3,26.84],[-99.52,27.54],[-100.11,28.11000000000012],[-100.45584,28.69612000000012],[-100.95759999999989,29.380710000000125],[-101.6624,29.779300000000113],[-102.48,29.76],[-103.11,28.97],[-103.94,29.27],[-104.45696999999981,29.57196],[-104.70574999999988,30.12173],[-105.03737,30.64402],[-105.63159,31.083830000000113],[-106.1429,31.39995],[-106.5075899999998,31.75452],[-108.24,31.7548537181664],[-108.24194,31.34222],[-109.035,31.34194000000016],[-111.02361,31.33472],[-113.30498,32.03914],[-114.815,32.52528],[-114.72138999999983,32.72083],[-115.99134999999987,32.61239000000014],[-117.12775999999975,32.53534],[-117.29593769127385,33.04622461520389],[-117.944,33.62123643120139],[-118.41060227589747,33.7409092231245],[-118.51989482279969,34.027781577575745],[-119.081,34.078],[-119.43884064201666,34.34847717828429],[-120.36778,34.44711],[-120.62286,34.60855],[-120.74433,35.1568600000001],[-121.71456999999985,36.16153],[-122.54747,37.5517600000001],[-122.51201,37.783390000000125],[-122.95319,38.113710000000104],[-123.7272,38.95166000000011],[-123.86516999999988,39.76699000000013],[-124.39807,40.3132],[-124.17886,41.14202000000011],[-124.2137,41.999640000000134],[-124.5328399999999,42.76599],[-124.14214,43.70838],[-124.020535,44.615895],[-123.8989299999999,45.52341],[-124.079635,46.86475],[-124.39566999999991,47.72017],[-124.68721008300781,48.18443298339854],[-124.56610107421874,48.379714965820384],[-123.12,48.04],[-122.58735999999988,47.096],[-122.34,47.36],[-122.5,48.18],[-122.84,49.0],[-120.0,49.0],[-117.03121,49.0],[-116.04818,49.0],[-112.99999999999987,49.0],[-110.04999999999981,49.0],[-107.0499999999999,49.0],[-104.04826,48.99986],[-100.65,49.0],[-97.2287200000047,49.0007],[-95.15906950917194,49.0],[-95.15609,49.38425],[-94.81758,49.38905]]],[[[-153.00631405333684,57.11584219016588],[-154.0050902984581,56.73467682558105],[-154.51640275777007,56.99274892844669],[-154.6709928049711,57.46119578717249],[-153.76277950744145,57.81657461204377],[-153.2287294179211,57.96896841087242],[-152.5647906158351,57.90142731386696],[-152.14114722390627,57.59105866152198],[-153.00631405333684,57.11584219016588]]],[[[-165.57916419173355,59.90998688418754],[-166.19277014876724,59.75444082298896],[-166.84833736882194,59.94140615502094],[-167.45527706609005,60.213069159579376],[-166.46779212142457,60.384169826897775],[-165.67442969466364,60.29360687930623],[-165.57916419173355,59.90998688418754]]],[[[-171.73165686753936,63.782515367275906],[-171.11443356024517,63.59219106714498],[-170.49111243394069,63.694975490973505],[-169.68250545965356,63.43111562769114],[-168.68943946030066,63.297506212000584],[-168.77194088445458,63.18859813094544],[-169.52943986720499,62.97693146427788],[-170.29055620021592,63.194437567794445],[-170.67138566799085,63.375821845138965],[-171.55306311753864,63.31778921167508],[-171.79111060289117,63.40584585230048],[-171.73165686753936,63.782515367275906]]],[[[-155.0677902903242,71.14777639432369],[-154.3441652089412,70.69640859647019],[-153.90000627339256,70.88998851183568],[-152.21000606993528,70.82999217394483],[-152.2700024078261,70.60000621202984],[-150.7399924387445,70.4300165880057],[-149.7200030181675,70.53001048449043],[-147.61336157935705,70.21403493924178],[-145.68998980022525,70.12000967068674],[-144.9200109590764,69.98999176704048],[-143.58944618042517,70.1525141465983],[-142.07251034871337,69.85193817817263],[-140.9859875215607,69.71199839952637],[-140.98598832900487,69.71199839952637],[-140.99249875202938,66.00002859156866],[-140.99776974812312,60.30639679629859],[-140.01299781615307,60.276837877027575],[-139.03900042031583,60.00000722924002],[-138.3408899999999,59.562110000000146],[-137.4525,58.9050000000001],[-136.47972,59.46389],[-135.47583,59.78778],[-134.945,59.27056000000012],[-134.27111,58.86111],[-133.3555488822072,58.41028514264515],[-132.73042,57.692890000000105],[-131.70780999999985,56.55212],[-130.00778,55.91583],[-129.97999426335826,55.28499787049721],[-130.53611018946722,54.80275340434939],[-131.08581823797212,55.178906155002025],[-131.96721146714228,55.49777558045905],[-132.25001074285944,56.36999624289744],[-133.5391810843564,57.178887437562125],[-134.07806292029602,58.12306753196689],[-135.03821103227904,58.18771474876393],[-136.62806230995463,58.21220937767045],[-137.80000627968602,58.49999542910378],[-139.86778704141298,59.537761542389134],[-140.82527381713302,59.72751740176507],[-142.57444353556443,60.08444651960498],[-143.95888099487985,59.99918040632339],[-145.92555681682782,60.458609727614274],[-147.11437394914662,60.88465607364462],[-148.22430620012764,60.67298940697715],[-148.01806555885076,59.97832896589363],[-148.57082251686086,59.9141726752033],[-149.72785783587585,59.705658270905545],[-150.60824337461642,59.36821116803949],[-151.7163927886833,59.155821031319974],[-151.8594331532671,59.74498403587959],[-151.40971900124714,60.72580272077939],[-150.3469414947325,61.033587551509854],[-150.62111080625695,61.28442495385445],[-151.89583919981683,60.72719798445127],[-152.57832984109558,60.061657212964285],[-154.01917212625756,59.350279446034264],[-153.28751135965317,58.86472768821979],[-154.23249243875844,58.14637360293053],[-155.3074914215102,57.72779450136632],[-156.30833472392308,57.42277435976363],[-156.5560973785463,56.97998484967064],[-158.1172165598677,56.463608099994175],[-158.4333212961971,55.99415355083853],[-159.60332739971741,55.56668610292011],[-160.28971961163418,55.64358063417056],[-161.22304765525777,55.36473460552348],[-162.23776607974105,55.0241869167201],[-163.06944658104638,54.68973704692717],[-164.78556922102717,54.40417308208216],[-164.94222632552,54.57222483989533],[-163.84833960676562,55.03943146424611],[-162.8700013906159,55.3480431178932],[-161.804174974596,55.89498647727043],[-160.5636047027811,56.008054511125025],[-160.07055986228448,56.418055324928744],[-158.68444291891942,57.01667511659785],[-158.46109737855394,57.216921291728866],[-157.7227703521839,57.570000515363056],[-157.55027442119356,58.32832632103022],[-157.04167497457695,58.918884589261715],[-158.19473120830543,58.61580231386982],[-158.51721798402303,58.787781480537305],[-159.0586061269287,58.42418610293167],[-159.71166704001732,58.93139028587633],[-159.98128882550017,58.57254914004162],[-160.3552711659965,59.071123358793635],[-161.355003425115,58.67083771426074],[-161.9688936025263,58.67166453717737],[-162.05498653872465,59.26692536074744],[-161.87417070213533,59.63362132429059],[-162.51805904849203,59.989723619213905],[-163.81834143782012,59.79805573184338],[-164.6622175771464,60.26748444278264],[-165.34638770247477,60.5074956325624],[-165.35083187565183,61.0738951686975],[-166.1213791575559,61.500019029376205],[-165.73445187077047,62.07499685327179],[-164.9191786367178,62.63307648380792],[-164.56250790103934,63.14637848576304],[-163.75333248599696,63.21944896102376],[-163.06722449445783,63.05945872664801],[-162.2605553863817,63.54193573674116],[-161.53444983624857,63.45581696232676],[-160.7725066803211,63.76610810002326],[-160.95833513084253,64.22279857040276],[-161.51806840721218,64.40278758407531],[-160.77777767641473,64.7886038275664],[-161.3919262359876,64.77723501246233],[-162.45305009666882,64.5594446885682],[-162.75778601789403,64.3386054551688],[-163.54639421288428,64.55916046819048],[-164.96082984114514,64.44694509546885],[-166.42528825586447,64.6866720648707],[-166.84500423893903,65.08889557561453],[-168.11056006576715,65.66999705673673],[-166.70527116602193,66.08831777613939],[-164.47470964257545,66.57666006129749],[-163.65251176659564,66.57666006129749],[-163.78860165103612,66.07720734319666],[-161.67777442121013,66.1161196967124],[-162.48971452537998,66.7355650905951],[-163.71971696679108,67.11639455837009],[-164.4309913808565,67.61633820257778],[-165.39028683170667,68.04277212185023],[-166.764440680996,68.35887685817967],[-166.20470740462656,68.88303091091616],[-164.43081051334343,68.91553538682773],[-163.1686136546145,69.37111481391288],[-162.93056616926197,69.85806183539925],[-161.9088972646355,70.33332998318762],[-160.93479651593367,70.44768992784957],[-159.03917578838713,70.89164215766893],[-158.11972286683394,70.82472117785103],[-156.58082455139802,71.35776357694174],[-155.0677902903242,71.14777639432369]]]]}},{"type":"Feature","properties":{"admin":"Uzbekistan","name":"Uzbekistan","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[66.51860680528866,37.362784328758785],[66.5461503437002,37.974684963526855],[65.21599897650738,38.402695013984285],[64.17022301621675,38.89240672459823],[63.51801476426102,39.36325653742563],[62.37426028834499,40.05388621679038],[61.88271406438468,41.08485687922939],[61.54717898951355,41.2663703476546],[60.46595299667068,41.22032664648254],[60.083340691981654,41.42514618587139],[59.97642215356977,42.2230819768902],[58.62901085799145,42.751551011723045],[57.786529982337065,42.17055288346551],[56.93221520368779,41.82602610937559],[57.09639122907909,41.32231008561056],[55.9681913592829,41.30864166926936],[55.92891727074108,44.9958584661591],[58.50312706892846,45.58680430763282],[58.68998904809588,45.50001373959862],[60.23997195825832,44.78403677019472],[61.05831994003244,44.405816962250505],[62.01330040878624,43.50447663021564],[63.18578698105656,43.650074978198],[64.90082441595926,43.728080552742576],[66.09801232286507,42.99766002051309],[66.02339155463561,41.994646307943974],[66.51064863471571,41.987644151368436],[66.7140470722165,41.16844350846149],[67.9858557473518,41.13599070898221],[68.2598958677956,40.662324530594894],[68.63248294462001,40.6686807317668],[69.0700272968353,41.38424428971236],[70.38896487822078,42.08130768489744],[70.96231489449913,42.26615428320548],[71.25924767444822,42.167710679689456],[70.4200224140282,41.519998277343134],[71.15785851429158,41.14358714452911],[71.87011478057045,41.39290009212126],[73.05541710804916,40.86603302668945],[71.77487511585655,40.14584442805376],[71.01419803252016,40.244365546218226],[70.60140669137267,40.21852733007229],[70.45815962105961,40.49649485937028],[70.66662234892503,40.96021332454141],[69.32949466337281,40.72782440852484],[69.01163292834548,40.08615814875665],[68.53641645698941,39.53345286717892],[67.70142866401734,39.58047842056452],[67.4422196796413,39.14014354100548],[68.17602501818591,38.9015534531139],[68.39203250516594,38.15702525486873],[67.8299996275595,37.14499400486468],[67.07578209825961,37.35614390720928],[66.51860680528866,37.362784328758785]]]}},{"type":"Feature","properties":{"admin":"Venezuela","name":"Venezuela","continent":"South America"},"geometry":{"type":"Polygon","coordinates":[[[-71.33158362495028,11.776284084515805],[-71.36000566271079,11.53999359786121],[-71.9470499335465,11.423282375530018],[-71.62086829292016,10.969459947142791],[-71.63306393094106,10.446494452349029],[-72.0741739569845,9.865651353388367],[-71.69564409044652,9.072263088411246],[-71.26455929226772,9.13719452558598],[-71.03999935574338,9.859992784052409],[-71.35008378771077,10.211935126176211],[-71.40062333849222,10.968969021036012],[-70.1552988349065,11.37548167566004],[-70.29384334988102,11.846822414594213],[-69.94324459499681,12.162307033736097],[-69.58430009629745,11.459610907431212],[-68.88299923366444,11.44338450769156],[-68.23327145045872,10.885744126829945],[-68.19412655299762,10.55465322513592],[-67.29624854192632,10.545868231646306],[-66.22786414250798,10.648626817258684],[-65.65523759628174,10.20079885501732],[-64.89045223657816,10.077214667191296],[-64.32947872583372,10.38959870039568],[-64.31800655786493,10.641417954953978],[-63.079322475828725,10.701724351438598],[-61.88094601098018,10.7156253117251],[-62.7301189846164,10.420268662960904],[-62.38851192895097,9.948204453974636],[-61.58876746280192,9.873066921422264],[-60.83059668643171,9.38133982994894],[-60.67125240745972,8.580174261911877],[-60.150095587796166,8.602756862823425],[-59.75828487815918,8.367034816924045],[-60.550587938058186,7.779602972846178],[-60.63797278506375,7.414999904810853],[-60.29566809756238,7.043911444522918],[-60.543999192940966,6.856584377464881],[-61.15933631045647,6.696077378766317],[-61.13941504580794,6.234296779806142],[-61.41030290388194,5.959068101419616],[-60.73357418480371,5.2002772078619],[-60.60117916527192,4.918098049332129],[-60.96689327660152,4.536467596856638],[-62.085429653559125,4.162123521334308],[-62.804533047116685,4.006965033377951],[-63.093197597899085,3.770571193858784],[-63.888342861574145,4.020530096854571],[-64.62865943058753,4.14848094320925],[-64.816064012294,4.056445217297422],[-64.36849443221409,3.797210394705246],[-64.4088278876179,3.126786200366623],[-64.26999915226578,2.497005520025566],[-63.422867397705105,2.411067613124174],[-63.36878801131165,2.200899562993129],[-64.08308549666607,1.91636912679408],[-64.1993057928905,1.49285492594602],[-64.61101192895985,1.328730576987041],[-65.35471330428835,1.0952822941085],[-65.54826738143755,0.78925446207603],[-66.32576514348494,0.724452215982012],[-66.87632585312257,1.253360500489336],[-67.18129431829304,2.250638129074062],[-67.4470920477863,2.600280869960869],[-67.80993811712369,2.820655015469569],[-67.30317318385342,3.31845408773718],[-67.33756384954367,3.542342230641721],[-67.62183590358127,3.839481716319994],[-67.82301225449353,4.503937282728898],[-67.7446966213552,5.221128648291667],[-67.52153194850274,5.556870428891968],[-67.34143958196556,6.095468044454021],[-67.695087246355,6.267318020040645],[-68.26505245631822,6.153268133972473],[-68.98531856960233,6.206804917826856],[-69.3894799465571,6.099860541198835],[-70.09331295437241,6.960376491723109],[-70.6742335679815,7.087784735538717],[-71.96017574734863,6.991614895043538],[-72.19835242378187,7.340430813013682],[-72.44448727078806,7.42378489830048],[-72.47967892117883,7.632506008327352],[-72.36090064155596,8.002638454617893],[-72.43986223009796,8.405275376820027],[-72.66049475776809,8.62528778730268],[-72.78872982450038,9.085027167187333],[-73.30495154488003,9.151999823437604],[-73.02760413276955,9.73677033125244],[-72.90528601753469,10.45034434655477],[-72.6146577623252,10.821975409381777],[-72.22757544624292,11.108702093953235],[-71.97392167833827,11.608671576377116],[-71.33158362495028,11.776284084515805]]]}},{"type":"Feature","properties":{"admin":"Vietnam","name":"Vietnam","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[108.05018029178291,21.55237986906011],[106.71506798709007,20.696850694252017],[105.881682163519,19.752050482659698],[105.66200564984628,19.058165188060567],[106.42681684776598,18.004120998603224],[107.36195356651972,16.69745656988705],[108.2694950704296,16.079742336486145],[108.87710656131743,15.276690578670436],[109.33526981001721,13.42602834721772],[109.20013593957395,11.66685923913776],[108.36612999881542,11.00832062422627],[107.2209285827952,10.36448395430183],[106.4051127462034,9.530839748569315],[105.15826378786508,8.599759629750492],[104.79518517458237,9.2410383162765],[105.0762016133856,9.918490505406806],[104.33433475140345,10.486543687375228],[105.19991499229232,10.889309800658094],[106.24967003786944,10.961811835163584],[105.8105237162531,11.567614650921223],[107.49140302941086,12.337205918827944],[107.6145479675624,13.535530707244202],[107.38272749230106,14.202440904186968],[107.56452518110387,15.202173163305554],[107.31270592654556,15.908538316303176],[106.55600792849566,16.6042839624648],[105.925762160264,17.485315456608955],[105.09459842328151,18.666974595611073],[103.8965320170267,19.2651809758218],[104.18338789267891,19.624668077060218],[104.82257368369707,19.88664175056388],[104.43500044150804,20.758733221921528],[103.20386111858643,20.766562201413745],[102.75489627483464,21.675137233969465],[102.17043582561355,22.464753119389297],[102.70699222210008,22.708795070887668],[103.50451460166055,22.7037566187392],[104.47685835166445,22.81915009204696],[105.3292094258866,23.35206330005691],[105.81124718630521,22.9768924016179],[106.72540327354845,22.794267889898418],[106.5672733907353,22.218204860924768],[107.04342003787261,21.811898912029907],[108.05018029178291,21.55237986906011]]]}},{"type":"Feature","properties":{"admin":"Vanuatu","name":"Vanuatu","continent":"Australia"},"geometry":{"type":"MultiPolygon","coordinates":[[[[167.84487674384508,-16.466333103097153],[167.51518110582285,-16.597849623279966],[167.1800077659778,-16.159995212470957],[167.2168013857696,-15.891846205308449],[167.84487674384508,-16.466333103097153]]],[[[167.10771243720149,-14.933920179913953],[167.2700281110302,-15.74002084723487],[167.00120731024793,-15.614602146062492],[166.79315799384085,-15.66881072353672],[166.64985924709555,-15.392703545801192],[166.62913699774643,-14.6264970842096],[167.10771243720149,-14.933920179913953]]]]}},{"type":"Feature","properties":{"admin":"Yemen","name":"Yemen","continent":"Asia"},"geometry":{"type":"Polygon","coordinates":[[[53.1085726255475,16.65105113368895],[52.385205926325874,16.38241120041965],[52.191729363825075,15.938433132384018],[52.168164910699986,15.597420355689945],[51.17251508973247,15.175249742081489],[49.574576450403136,14.708766587782746],[48.67923058451415,14.003202419485657],[48.238947381387405,13.948089504446369],[47.93891401550077,14.007233181204423],[47.3544535662797,13.59221975346838],[46.71707645039173,13.399699204965016],[45.87759280781026,13.34776439051168],[45.62505008319987,13.29094615320676],[45.40645877460524,13.02690542241143],[45.14435591002085,12.953938300015306],[44.9895333188744,12.699586900274708],[44.49457645038285,12.721652736863344],[44.175112745954486,12.585950425664873],[43.48295861183712,12.63680003504008],[43.22287112811212,13.220950425667422],[43.25144819516952,13.767583726450848],[43.08794396339805,14.062630316621306],[42.89224531430872,14.802249253798744],[42.604872674333606,15.213335272680592],[42.80501549660004,15.261962795467252],[42.70243777850066,15.718885809791995],[42.82367068865741,15.911742255105263],[42.77933230975096,16.34789134364868],[43.218375278502734,16.666889960186406],[43.11579756040335,17.08844045660737],[43.3807943051961,17.579986680567668],[43.791518589051904,17.319976711491105],[44.06261315285507,17.41035879156959],[45.21665123879718,17.43332896572333],[45.39999922056875,17.333335069238554],[46.36665856302053,17.233315334537632],[46.74999433776164,17.283338120996174],[47.00000491718975,16.949999294497438],[47.466694777217626,17.116681626854877],[48.18334354024133,18.16666921637731],[49.11667158386486,18.61666758877494],[52.00000980002223,19.000003363516058],[52.78218427919204,17.34974233649123],[53.1085726255475,16.65105113368895]]]}},{"type":"Feature","properties":{"admin":"South Africa","name":"South Africa","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[31.52100141777887,-29.257386976846245],[31.32556115085099,-29.401977634398907],[30.901762729625336,-29.909956963828034],[30.622813348113816,-30.42377573010612],[30.055716180142777,-31.14026946383295],[28.925552605919535,-32.17204111097249],[28.219755893677092,-32.77195281344885],[27.464608188595967,-33.226963799778794],[26.419452345492815,-33.614950453426175],[25.90966434093348,-33.66704029717639],[25.78062828950069,-33.944646091448334],[25.172861769315965,-33.79685149509358],[24.67785322439212,-33.98717579522454],[23.594043409934635,-33.79447437920815],[22.98818891774473,-33.916430759416976],[22.574157342222232,-33.864082533505304],[21.542799106541025,-34.25883879978292],[20.689052768647,-34.41717538832523],[20.07126102059763,-34.795136814107984],[19.616405063564567,-34.819166355123706],[19.19327843595871,-34.46259897230978],[18.855314568769867,-34.44430551527846],[18.424643182049376,-33.99787281670896],[18.37741092293461,-34.13652068454806],[18.244499139079917,-33.86775156019802],[18.25008019376744,-33.281430759414434],[17.925190463948436,-32.61129078545342],[18.247909783611185,-32.42913136162456],[18.221761508871477,-31.661632989225662],[17.56691775886886,-30.72572112398754],[17.0644161312627,-29.87864104585916],[17.06291751472622,-29.875953871379977],[16.34497684089524,-28.576705010697697],[16.8240173682409,-28.082161553664463],[17.2189286638154,-28.355943291946804],[17.3874971859515,-28.783514092729774],[17.836151971109526,-28.85637786226131],[18.464899122804745,-29.04546192801727],[19.00212731291108,-28.972443129188857],[19.89473432788861,-28.46110483166077],[19.895767856534427,-24.767790215760588],[20.165725538827186,-24.917961928000768],[20.75860924651183,-25.86813648855145],[20.666470167735437,-26.477453301704916],[20.88960900237173,-26.828542982695907],[21.60589603036939,-26.72653370535175],[22.105968865657864,-26.28025603607913],[22.579531691180584,-25.979447523708146],[22.824271274514896,-25.500458672794768],[23.31209679535018,-25.268689873965712],[23.733569777122703,-25.39012948985161],[24.211266717228792,-25.670215752873567],[25.025170525825786,-25.71967009857689],[25.66466637543771,-25.486816094669702],[25.76584882986521,-25.17484547292367],[25.94165205252215,-24.696373386333217],[26.485753208123292,-24.616326592713097],[26.78640669119741,-24.24069060638348],[27.11940962088624,-23.57432301197977],[28.017235955525244,-22.82775359465907],[29.432188348109033,-22.091312758067584],[29.839036899542965,-22.102216485281172],[30.322883335091767,-22.27161183033393],[30.659865350067083,-22.15156747811991],[31.19140913262128,-22.251509698172395],[31.670397983534645,-23.65896900807386],[31.93058882012424,-24.369416599222532],[31.75240848158187,-25.48428394948741],[31.837777947728057,-25.843331801051345],[31.3331575863979,-25.660190525008943],[31.044079624157146,-25.731452325139436],[30.949666782359905,-26.022649021104144],[30.676608514129633,-26.398078301704604],[30.685961948374477,-26.74384531016953],[31.282773064913325,-27.28587940847899],[31.868060337051073,-27.17792734142127],[32.07166548028106,-26.733820082304906],[32.83012047702888,-26.74219166433619],[32.58026492689768,-27.47015756603181],[32.462132602678444,-28.30101124442055],[32.20338870619303,-28.752404880490065],[31.52100141777887,-29.257386976846245]],[[28.978262566857236,-28.955596612261708],[28.54170006685549,-28.64750172293756],[28.07433841320778,-28.85146860119358],[27.53251102062747,-29.242710870075353],[26.99926191580763,-29.875953871379977],[27.74939700695648,-30.645105889612218],[28.10720462414542,-30.545732110314944],[28.291069370239903,-30.226216729454293],[28.848399692507737,-30.070050551068245],[29.018415154748016,-29.74376555757736],[29.325166456832587,-29.257386976846245],[28.978262566857236,-28.955596612261708]]]}},{"type":"Feature","properties":{"admin":"Zambia","name":"Zambia","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[32.759375441221316,-9.230599053589058],[33.23138797377529,-9.6767216935648],[33.485687697083584,-10.525558770391113],[33.31531049981728,-10.796549981329695],[33.11428917820191,-11.607198174692313],[33.30642215346307,-12.435778090060214],[32.99176435723788,-12.783870537978272],[32.68816531752312,-13.712857761289271],[33.21402469252521,-13.97186003993615],[30.179481235481827,-14.796099134991524],[30.274255812305103,-15.507786960515208],[29.51683434420314,-15.644677829656386],[28.947463413211256,-16.043051446194436],[28.825868768028492,-16.38974863044061],[28.467906121542676,-16.468400160388843],[27.598243442502753,-17.290830580314005],[27.04442711763073,-17.938026218337427],[26.706773309035633,-17.961228936436477],[26.38193525564892,-17.846042168857892],[25.264225701608005,-17.736539808831413],[25.084443393664564,-17.661815687737366],[25.076950310982255,-17.578823337476617],[24.6823490740015,-17.35341073981947],[24.03386152517077,-17.29584319424632],[23.215048455506057,-17.52311614346598],[22.562478468524255,-16.89845142992181],[21.887842644953867,-16.080310153876876],[21.933886346125913,-12.898437188369355],[24.01613650889467,-12.91104623784857],[23.930922072045373,-12.565847670138854],[24.07990522634284,-12.19129688888736],[23.90415368011818,-11.722281589406318],[24.017893507592586,-11.237298272347088],[23.91221520355571,-10.926826267137512],[24.257155389103985,-10.951992689663657],[24.314516228947948,-11.262826429899269],[24.783169793402948,-11.238693536018962],[25.418118116973197,-11.330935967659958],[25.75230960460473,-11.784965101776356],[26.55308759939961,-11.924439792532125],[27.164419793412456,-11.608748467661073],[27.38879886242378,-12.132747491100664],[28.15510867687998,-12.272480564017894],[28.52356163912102,-12.69860442469668],[28.934285922976834,-13.248958428605132],[29.699613885219485,-13.257226657771827],[29.616001417771223,-12.178894545137307],[29.341547885869087,-12.36074391037241],[28.642417433392342,-11.971568698782312],[28.37225304537042,-11.793646742401387],[28.496069777141763,-10.789883721564044],[28.67368167492892,-9.605924981324932],[28.449871046672815,-9.164918308146085],[28.734866570762495,-8.526559340044576],[29.002912225060467,-8.40703175215347],[30.34608605319081,-8.238256524288216],[30.74001549655178,-8.340007419470913],[31.15775133695004,-8.594578747317362],[31.55634809746649,-8.76204884199864],[32.19186486179196,-8.930358981973276],[32.759375441221316,-9.230599053589058]]]}},{"type":"Feature","properties":{"admin":"Zimbabwe","name":"Zimbabwe","continent":"Africa"},"geometry":{"type":"Polygon","coordinates":[[[31.19140913262128,-22.251509698172395],[30.659865350067083,-22.15156747811991],[30.322883335091767,-22.27161183033393],[29.839036899542965,-22.102216485281172],[29.432188348109033,-22.091312758067584],[28.79465620292421,-21.639454034107445],[28.02137007010861,-21.485975030200574],[27.727227817503252,-20.85180185311471],[27.724747348753247,-20.499058526290387],[27.2965047543505,-20.391519870690995],[26.16479088715848,-19.293085625894935],[25.850391473094724,-18.714412937090533],[25.649163445750155,-18.536025892818987],[25.264225701608005,-17.736539808831413],[26.38193525564892,-17.846042168857892],[26.706773309035633,-17.961228936436477],[27.04442711763073,-17.938026218337427],[27.598243442502753,-17.290830580314005],[28.467906121542676,-16.468400160388843],[28.825868768028492,-16.38974863044061],[28.947463413211256,-16.043051446194436],[29.51683434420314,-15.644677829656386],[30.274255812305103,-15.507786960515208],[30.338954705534537,-15.880839125230242],[31.173063999157673,-15.860943698797868],[31.636498243951188,-16.07199024827788],[31.852040643040592,-16.319417006091374],[32.32823896661022,-16.39207406989375],[32.84763878757584,-16.713398125884613],[32.849860874164385,-17.979057305577175],[32.65488569512714,-18.67208993904349],[32.611994256324884,-19.419382826416268],[32.77270796075262,-19.715592136313298],[32.65974327976257,-20.30429005298231],[32.508693068173436,-20.395292250248303],[32.24498823418801,-21.11648853931369],[31.19140913262128,-22.251509698172395]]]}}]}'))},6101,e=>{"use strict";let t,r,i,n,a,s,o,l,u,c,h,d,A,p,f,m,g,y,v,x,_,b,S,T,w,M;var E,C,R,N,P,I,L,D,B,F,O,U,k,z,V,q,G,H,j,W,X,Q,$,Y,K,Z,J,ee,et,er,ei,en,ea,es,eo,el=e.i(43476),eu=e.i(71645);let ec={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},eh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},ed="attached",eA="detached",ep="srgb",ef="srgb-linear",em="linear",eg="srgb",ey="300 es",ev={COMPUTE:"compute",RENDER:"render"},ex={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},e_={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function eb(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}let eS={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function eT(e,t){return new eS[e](t)}function ew(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function eM(){let e=ew("canvas");return e.style.display="block",e}let eE={},eC=null;function eR(e){eC=e}function eN(){return eC}function eP(...e){let t="THREE."+e.shift();eC?eC("log",t,...e):console.log(t,...e)}function eI(...e){let t="THREE."+e.shift();eC?eC("warn",t,...e):console.warn(t,...e)}function eL(...e){let t="THREE."+e.shift();eC?eC("error",t,...e):console.error(t,...e)}function eD(...e){let t=e.join(" ");t in eE||(eE[t]=!0,eI(...e))}class eB{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){let r=this._listeners;return void 0!==r&&void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){let r=this._listeners;if(void 0===r)return;let i=r[e];if(void 0!==i){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){let t=this._listeners;if(void 0===t)return;let r=t[e.type];if(void 0!==r){e.target=this;let t=r.slice(0);for(let r=0,i=t.length;r<i;r++)t[r].call(this,e);e.target=null}}}let eF=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],eO=1234567,eU=Math.PI/180,ek=180/Math.PI;function ez(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,r=0xffffffff*Math.random()|0,i=0xffffffff*Math.random()|0;return(eF[255&e]+eF[e>>8&255]+eF[e>>16&255]+eF[e>>24&255]+"-"+eF[255&t]+eF[t>>8&255]+"-"+eF[t>>16&15|64]+eF[t>>24&255]+"-"+eF[63&r|128]+eF[r>>8&255]+"-"+eF[r>>16&255]+eF[r>>24&255]+eF[255&i]+eF[i>>8&255]+eF[i>>16&255]+eF[i>>24&255]).toLowerCase()}function eV(e,t,r){return Math.max(t,Math.min(r,e))}function eq(e,t){return(e%t+t)%t}function eG(e,t,r){return(1-r)*e+r*t}function eH(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/0xffffffff;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/0x7fffffff,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function ej(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(0xffffffff*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(0x7fffffff*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}let eW={DEG2RAD:eU,RAD2DEG:ek,generateUUID:ez,clamp:eV,euclideanModulo:eq,mapLinear:function(e,t,r,i,n){return i+(e-t)*(n-i)/(r-t)},inverseLerp:function(e,t,r){return e!==t?(r-e)/(t-e):0},lerp:eG,damp:function(e,t,r,i){return eG(e,t,1-Math.exp(-r*i))},pingpong:function(e,t=1){return t-Math.abs(eq(e,2*t)-t)},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(eO=e);let t=eO+=0x6d2b79f5;return t=Math.imul(t^t>>>15,1|t),(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000},degToRad:function(e){return e*eU},radToDeg:function(e){return e*ek},isPowerOfTwo:function(e){return(e&e-1)==0&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,r,i,n){let a=Math.cos,s=Math.sin,o=a(r/2),l=s(r/2),u=a((t+i)/2),c=s((t+i)/2),h=a((t-i)/2),d=s((t-i)/2),A=a((i-t)/2),p=s((i-t)/2);switch(n){case"XYX":e.set(o*c,l*h,l*d,o*u);break;case"YZY":e.set(l*d,o*c,l*h,o*u);break;case"ZXZ":e.set(l*h,l*d,o*c,o*u);break;case"XZX":e.set(o*c,l*p,l*A,o*u);break;case"YXY":e.set(l*A,o*c,l*p,o*u);break;case"ZYZ":e.set(l*p,l*A,o*c,o*u);break;default:eI("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}},normalize:ej,denormalize:eH};class eX{constructor(e=0,t=0){eX.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=eV(this.x,e.x,t.x),this.y=eV(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=eV(this.x,e,t),this.y=eV(this.y,e,t),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(eV(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(eV(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let r=Math.cos(t),i=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*r-a*i+e.x,this.y=n*i+a*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class eQ{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,n,a,s){let o=r[i+0],l=r[i+1],u=r[i+2],c=r[i+3],h=n[a+0],d=n[a+1],A=n[a+2],p=n[a+3];if(s<=0){e[t+0]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c;return}if(s>=1){e[t+0]=h,e[t+1]=d,e[t+2]=A,e[t+3]=p;return}if(c!==p||o!==h||l!==d||u!==A){let e=o*h+l*d+u*A+c*p;e<0&&(h=-h,d=-d,A=-A,p=-p,e=-e);let t=1-s;if(e<.9995){let r=Math.acos(e),i=Math.sin(r);o=o*(t=Math.sin(t*r)/i)+h*(s=Math.sin(s*r)/i),l=l*t+d*s,u=u*t+A*s,c=c*t+p*s}else{let e=1/Math.sqrt((o=o*t+h*s)*o+(l=l*t+d*s)*l+(u=u*t+A*s)*u+(c=c*t+p*s)*c);o*=e,l*=e,u*=e,c*=e}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}static multiplyQuaternionsFlat(e,t,r,i,n,a){let s=r[i],o=r[i+1],l=r[i+2],u=r[i+3],c=n[a],h=n[a+1],d=n[a+2],A=n[a+3];return e[t]=s*A+u*c+o*d-l*h,e[t+1]=o*A+u*h+l*c-s*d,e[t+2]=l*A+u*d+s*h-o*c,e[t+3]=u*A-s*c-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let r=e._x,i=e._y,n=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(r/2),u=s(i/2),c=s(n/2),h=o(r/2),d=o(i/2),A=o(n/2);switch(a){case"XYZ":this._x=h*u*c+l*d*A,this._y=l*d*c-h*u*A,this._z=l*u*A+h*d*c,this._w=l*u*c-h*d*A;break;case"YXZ":this._x=h*u*c+l*d*A,this._y=l*d*c-h*u*A,this._z=l*u*A-h*d*c,this._w=l*u*c+h*d*A;break;case"ZXY":this._x=h*u*c-l*d*A,this._y=l*d*c+h*u*A,this._z=l*u*A+h*d*c,this._w=l*u*c-h*d*A;break;case"ZYX":this._x=h*u*c-l*d*A,this._y=l*d*c+h*u*A,this._z=l*u*A-h*d*c,this._w=l*u*c+h*d*A;break;case"YZX":this._x=h*u*c+l*d*A,this._y=l*d*c+h*u*A,this._z=l*u*A-h*d*c,this._w=l*u*c-h*d*A;break;case"XZY":this._x=h*u*c-l*d*A,this._y=l*d*c-h*u*A,this._z=l*u*A+h*d*c,this._w=l*u*c+h*d*A;break;default:eI("Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,r=t[0],i=t[4],n=t[8],a=t[1],s=t[5],o=t[9],l=t[2],u=t[6],c=t[10],h=r+s+c;if(h>0){let e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(u-o)*e,this._y=(n-l)*e,this._z=(a-i)*e}else if(r>s&&r>c){let e=2*Math.sqrt(1+r-s-c);this._w=(u-o)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(n+l)/e}else if(s>c){let e=2*Math.sqrt(1+s-r-c);this._w=(n-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(o+u)/e}else{let e=2*Math.sqrt(1+c-r-s);this._w=(a-i)/e,this._x=(n+l)/e,this._y=(o+u)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-8?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=r,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(eV(this.dot(e),-1,1)))}rotateTowards(e,t){let r=this.angleTo(e);if(0===r)return this;let i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let r=e._x,i=e._y,n=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=r*u+a*s+i*l-n*o,this._y=i*u+a*o+n*s-r*l,this._z=n*u+a*l+r*o-i*s,this._w=a*u-r*s-i*o-n*l,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let r=e._x,i=e._y,n=e._z,a=e._w,s=this.dot(e);s<0&&(r=-r,i=-i,n=-n,a=-a,s=-s);let o=1-t;if(s<.9995){let e=Math.acos(s),l=Math.sin(e);o=Math.sin(o*e)/l,t=Math.sin(t*e)/l,this._x=this._x*o+r*t,this._y=this._y*o+i*t,this._z=this._z*o+n*t,this._w=this._w*o+a*t,this._onChangeCallback()}else this._x=this._x*o+r*t,this._y=this._y*o+i*t,this._z=this._z*o+n*t,this._w=this._w*o+a*t,this.normalize();return this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),r=Math.random(),i=Math.sqrt(1-r),n=Math.sqrt(r);return this.set(i*Math.sin(e),i*Math.cos(e),n*Math.sin(t),n*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class e${constructor(e=0,t=0,r=0){e$.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return void 0===r&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(eK.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(eK.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6]*i,this.y=n[1]*t+n[4]*r+n[7]*i,this.z=n[2]*t+n[5]*r+n[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=e.elements,a=1/(n[3]*t+n[7]*r+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*r+n[8]*i+n[12])*a,this.y=(n[1]*t+n[5]*r+n[9]*i+n[13])*a,this.z=(n[2]*t+n[6]*r+n[10]*i+n[14])*a,this}applyQuaternion(e){let t=this.x,r=this.y,i=this.z,n=e.x,a=e.y,s=e.z,o=e.w,l=2*(a*i-s*r),u=2*(s*t-n*i),c=2*(n*r-a*t);return this.x=t+o*l+a*c-s*u,this.y=r+o*u+s*l-n*c,this.z=i+o*c+n*u-a*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,r=this.y,i=this.z,n=e.elements;return this.x=n[0]*t+n[4]*r+n[8]*i,this.y=n[1]*t+n[5]*r+n[9]*i,this.z=n[2]*t+n[6]*r+n[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=eV(this.x,e.x,t.x),this.y=eV(this.y,e.y,t.y),this.z=eV(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=eV(this.x,e,t),this.y=eV(this.y,e,t),this.z=eV(this.z,e,t),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(eV(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let r=e.x,i=e.y,n=e.z,a=t.x,s=t.y,o=t.z;return this.x=i*o-n*s,this.y=n*a-r*o,this.z=r*s-i*a,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return eY.copy(this).projectOnVector(e),this.sub(eY)}reflect(e){return this.sub(eY.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(eV(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){let i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=2*Math.random()-1,r=Math.sqrt(1-t*t);return this.x=r*Math.cos(e),this.y=t,this.z=r*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let eY=new e$,eK=new eQ;class eZ{constructor(e,t,r,i,n,a,s,o,l){eZ.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,r,i,n,a,s,o,l)}set(e,t,r,i,n,a,s,o,l){let u=this.elements;return u[0]=e,u[1]=i,u[2]=s,u[3]=t,u[4]=n,u[5]=o,u[6]=r,u[7]=a,u[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],s=r[3],o=r[6],l=r[1],u=r[4],c=r[7],h=r[2],d=r[5],A=r[8],p=i[0],f=i[3],m=i[6],g=i[1],y=i[4],v=i[7],x=i[2],_=i[5],b=i[8];return n[0]=a*p+s*g+o*x,n[3]=a*f+s*y+o*_,n[6]=a*m+s*v+o*b,n[1]=l*p+u*g+c*x,n[4]=l*f+u*y+c*_,n[7]=l*m+u*v+c*b,n[2]=h*p+d*g+A*x,n[5]=h*f+d*y+A*_,n[8]=h*m+d*v+A*b,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-r*n*u+r*s*o+i*n*l-i*a*o}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=u*a-s*l,h=s*o-u*n,d=l*n-a*o,A=t*c+r*h+i*d;if(0===A)return this.set(0,0,0,0,0,0,0,0,0);let p=1/A;return e[0]=c*p,e[1]=(i*l-u*r)*p,e[2]=(s*r-i*a)*p,e[3]=h*p,e[4]=(u*t-i*o)*p,e[5]=(i*n-s*t)*p,e[6]=d*p,e[7]=(r*o-l*t)*p,e[8]=(a*t-r*n)*p,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,n,a,s){let o=Math.cos(n),l=Math.sin(n);return this.set(r*o,r*l,-r*(o*a+l*s)+a+e,-i*l,i*o,-i*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(eJ.makeScale(e,t)),this}rotate(e){return this.premultiply(eJ.makeRotation(-e)),this}translate(e,t){return this.premultiply(eJ.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,r=e.elements;for(let e=0;e<9;e++)if(t[e]!==r[e])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let eJ=new eZ,e0=new eZ().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),e1=new eZ().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715),e2=(x=[.64,.33,.3,.6,.15,.06],_=[.2126,.7152,.0722],b=[.3127,.329],(v={enabled:!0,workingColorSpace:ef,spaces:{},convert:function(e,t,r){return!1!==this.enabled&&t!==r&&t&&r&&(this.spaces[t].transfer===eg&&(e.r=e3(e.r),e.g=e3(e.g),e.b=e3(e.b)),this.spaces[t].primaries!==this.spaces[r].primaries&&(e.applyMatrix3(this.spaces[t].toXYZ),e.applyMatrix3(this.spaces[r].fromXYZ)),this.spaces[r].transfer===eg&&(e.r=e4(e.r),e.g=e4(e.g),e.b=e4(e.b))),e},workingToColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},colorSpaceToWorking:function(e,t){return this.convert(e,t,this.workingColorSpace)},getPrimaries:function(e){return this.spaces[e].primaries},getTransfer:function(e){return""===e?em:this.spaces[e].transfer},getToneMappingMode:function(e){return this.spaces[e].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(e,t=this.workingColorSpace){return e.fromArray(this.spaces[t].luminanceCoefficients)},define:function(e){Object.assign(this.spaces,e)},_getMatrix:function(e,t,r){return e.copy(this.spaces[t].toXYZ).multiply(this.spaces[r].fromXYZ)},_getDrawingBufferColorSpace:function(e){return this.spaces[e].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(e=this.workingColorSpace){return this.spaces[e].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(e,t){return eD("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),v.workingToColorSpace(e,t)},toWorkingColorSpace:function(e,t){return eD("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),v.colorSpaceToWorking(e,t)}}).define({[ef]:{primaries:x,whitePoint:b,transfer:em,toXYZ:e0,fromXYZ:e1,luminanceCoefficients:_,workingColorSpaceConfig:{unpackColorSpace:ep},outputColorSpaceConfig:{drawingBufferColorSpace:ep}},[ep]:{primaries:x,whitePoint:b,transfer:eg,toXYZ:e0,fromXYZ:e1,luminanceCoefficients:_,outputColorSpaceConfig:{drawingBufferColorSpace:ep}}}),v);function e3(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function e4(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class e5{static getDataURL(e,r="image/png"){let i;if(/^data:/i.test(e.src)||"undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)i=e;else{void 0===t&&(t=ew("canvas")),t.width=e.width,t.height=e.height;let r=t.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=t}return i.toDataURL(r)}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){let t=ew("canvas");t.width=e.width,t.height=e.height;let r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);let i=r.getImageData(0,0,e.width,e.height),n=i.data;for(let e=0;e<n.length;e++)n[e]=255*e3(n[e]/255);return r.putImageData(i,0,0),t}if(!e.data)return eI("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*e3(t[e]/255)):t[e]=e3(t[e]);return{data:t,width:e.width,height:e.height}}}}let e8=0;class e6{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:e8++}),this.uuid=ez(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){let t=this.data;return"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):null!==t?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let r={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,r=i.length;t<r;t++)i[t].isDataTexture?e.push(e7(i[t].image)):e.push(e7(i[t]))}else e=e7(i);r.url=e}return t||(e.images[this.uuid]=r),r}}function e7(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?e5.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(eI("Texture: Unable to serialize Texture."),{})}let e9=0,te=new e$;class tt extends eB{constructor(e=tt.DEFAULT_IMAGE,t=tt.DEFAULT_MAPPING,r=1001,i=1001,n=1006,a=1008,s=1023,o=1009,l=tt.DEFAULT_ANISOTROPY,u=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:e9++}),this.uuid=ez(),this.name="",this.source=new e6(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=n,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new eX(0,0),this.repeat=new eX(1,1),this.center=new eX(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new eZ,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!e&&!!e.depth&&e.depth>1,this.pmremVersion=0}get width(){return this.source.getSize(te).x}get height(){return this.source.getSize(te).y}get depth(){return this.source.getSize(te).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(let t in e){let r=e[t];if(void 0===r){eI(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}let i=this[t];if(void 0===i){eI(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&r&&i.isVector2&&r.isVector2||i&&r&&i.isVector3&&r.isVector3||i&&r&&i.isMatrix3&&r.isMatrix3?i.copy(r):this[t]=r}}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}tt.DEFAULT_IMAGE=null,tt.DEFAULT_MAPPING=300,tt.DEFAULT_ANISOTROPY=1;class tr{constructor(e=0,t=0,r=0,i=1){tr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,r=this.y,i=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*r+a[8]*i+a[12]*n,this.y=a[1]*t+a[5]*r+a[9]*i+a[13]*n,this.z=a[2]*t+a[6]*r+a[10]*i+a[14]*n,this.w=a[3]*t+a[7]*r+a[11]*i+a[15]*n,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,n,a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],c=a[5],h=a[9],d=a[2],A=a[6],p=a[10];if(.01>Math.abs(o-u)&&.01>Math.abs(l-d)&&.01>Math.abs(h-A)){if(.1>Math.abs(o+u)&&.1>Math.abs(l+d)&&.1>Math.abs(h+A)&&.1>Math.abs(s+c+p-3))return this.set(1,0,0,0),this;t=Math.PI;let e=(s+1)/2,a=(c+1)/2,f=(p+1)/2,m=(o+u)/4,g=(l+d)/4,y=(h+A)/4;return e>a&&e>f?e<.01?(r=0,i=.707106781,n=.707106781):(i=m/(r=Math.sqrt(e)),n=g/r):a>f?a<.01?(r=.707106781,i=0,n=.707106781):(r=m/(i=Math.sqrt(a)),n=y/i):f<.01?(r=.707106781,i=.707106781,n=0):(r=g/(n=Math.sqrt(f)),i=y/n),this.set(r,i,n,t),this}let f=Math.sqrt((A-h)*(A-h)+(l-d)*(l-d)+(u-o)*(u-o));return .001>Math.abs(f)&&(f=1),this.x=(A-h)/f,this.y=(l-d)/f,this.z=(u-o)/f,this.w=Math.acos((s+c+p-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=eV(this.x,e.x,t.x),this.y=eV(this.y,e.y,t.y),this.z=eV(this.z,e.z,t.z),this.w=eV(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=eV(this.x,e,t),this.y=eV(this.y,e,t),this.z=eV(this.z,e,t),this.w=eV(this.w,e,t),this}clampLength(e,t){let r=this.length();return this.divideScalar(r||1).multiplyScalar(eV(r,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ti extends eB{constructor(e=1,t=1,r={}){super(),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},r),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=r.depth,this.scissor=new tr(0,0,e,t),this.scissorTest=!1,this.viewport=new tr(0,0,e,t);const i=new tt({width:e,height:t,depth:r.depth});this.textures=[];const n=r.count;for(let e=0;e<n;e++)this.textures[e]=i.clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;this._setTextureOptions(r),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.resolveDepthBuffer=r.resolveDepthBuffer,this.resolveStencilBuffer=r.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=r.depthTexture,this.samples=r.samples,this.multiview=r.multiview}_setTextureOptions(e={}){let t={minFilter:1006,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==e.mapping&&(t.mapping=e.mapping),void 0!==e.wrapS&&(t.wrapS=e.wrapS),void 0!==e.wrapT&&(t.wrapT=e.wrapT),void 0!==e.wrapR&&(t.wrapR=e.wrapR),void 0!==e.magFilter&&(t.magFilter=e.magFilter),void 0!==e.minFilter&&(t.minFilter=e.minFilter),void 0!==e.format&&(t.format=e.format),void 0!==e.type&&(t.type=e.type),void 0!==e.anisotropy&&(t.anisotropy=e.anisotropy),void 0!==e.colorSpace&&(t.colorSpace=e.colorSpace),void 0!==e.flipY&&(t.flipY=e.flipY),void 0!==e.generateMipmaps&&(t.generateMipmaps=e.generateMipmaps),void 0!==e.internalFormat&&(t.internalFormat=e.internalFormat);for(let e=0;e<this.textures.length;e++)this.textures[e].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==e&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,n=this.textures.length;i<n;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=r,!0!==this.textures[i].isData3DTexture&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,r=e.textures.length;t<r;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;let r=Object.assign({},e.textures[t].image);this.textures[t].source=new e6(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class tn extends ti{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class ta extends tt{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ts extends tn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ta(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class to extends tt{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class tl extends tn{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new to(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class tu{constructor(e=new e$(Infinity,Infinity,Infinity),t=new e$(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(th.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(th.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=th.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let r=e.geometry;if(void 0!==r){let i=r.getAttribute("position");if(!0===t&&void 0!==i&&!0!==e.isInstancedMesh)for(let t=0,r=i.count;t<r;t++)!0===e.isMesh?e.getVertexPosition(t,th):th.fromBufferAttribute(i,t),th.applyMatrix4(e.matrixWorld),this.expandByPoint(th);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),td.copy(e.boundingBox)):(null===r.boundingBox&&r.computeBoundingBox(),td.copy(r.boundingBox)),td.applyMatrix4(e.matrixWorld),this.union(td)}let i=e.children;for(let e=0,r=i.length;e<r;e++)this.expandByObject(i[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,th),th.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(tv),tx.subVectors(this.max,tv),tA.subVectors(e.a,tv),tp.subVectors(e.b,tv),tf.subVectors(e.c,tv),tm.subVectors(tp,tA),tg.subVectors(tf,tp),ty.subVectors(tA,tf);let t=[0,-tm.z,tm.y,0,-tg.z,tg.y,0,-ty.z,ty.y,tm.z,0,-tm.x,tg.z,0,-tg.x,ty.z,0,-ty.x,-tm.y,tm.x,0,-tg.y,tg.x,0,-ty.y,ty.x,0];return!!tS(t,tA,tp,tf,tx)&&!!tS(t=[1,0,0,0,1,0,0,0,1],tA,tp,tf,tx)&&(t_.crossVectors(tm,tg),tS(t=[t_.x,t_.y,t_.z],tA,tp,tf,tx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,th).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(th).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(tc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),tc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),tc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),tc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),tc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),tc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),tc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),tc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(tc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}let tc=[new e$,new e$,new e$,new e$,new e$,new e$,new e$,new e$],th=new e$,td=new tu,tA=new e$,tp=new e$,tf=new e$,tm=new e$,tg=new e$,ty=new e$,tv=new e$,tx=new e$,t_=new e$,tb=new e$;function tS(e,t,r,i,n){for(let a=0,s=e.length-3;a<=s;a+=3){tb.fromArray(e,a);let s=n.x*Math.abs(tb.x)+n.y*Math.abs(tb.y)+n.z*Math.abs(tb.z),o=t.dot(tb),l=r.dot(tb),u=i.dot(tb);if(Math.max(-Math.max(o,l,u),Math.min(o,l,u))>s)return!1}return!0}let tT=new tu,tw=new e$,tM=new e$;class tE{constructor(e=new e$,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let r=this.center;void 0!==t?r.copy(t):tT.setFromPoints(e).getCenter(r);let i=0;for(let t=0,n=e.length;t<n;t++)i=Math.max(i,r.distanceToSquared(e[t]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;tw.subVectors(e,this.center);let t=tw.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),r=(e-this.radius)*.5;this.center.addScaledVector(tw,r/e),this.radius+=r}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(tM.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(tw.copy(e.center).add(tM)),this.expandByPoint(tw.copy(e.center).sub(tM)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}let tC=new e$,tR=new e$,tN=new e$,tP=new e$,tI=new e$,tL=new e$,tD=new e$;class tB{constructor(e=new e$,t=new e$(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,tC)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=tC.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(tC.copy(this.origin).addScaledVector(this.direction,t),tC.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){let n,a,s,o;tR.copy(e).add(t).multiplyScalar(.5),tN.copy(t).sub(e).normalize(),tP.copy(this.origin).sub(tR);let l=.5*e.distanceTo(t),u=-this.direction.dot(tN),c=tP.dot(this.direction),h=-tP.dot(tN),d=tP.lengthSq(),A=Math.abs(1-u*u);if(A>0)if(n=u*h-c,a=u*c-h,o=l*A,n>=0)if(a>=-o)if(a<=o){let e=1/A;n*=e,a*=e,s=n*(n+u*a+2*c)+a*(u*n+a+2*h)+d}else s=-(n=Math.max(0,-(u*(a=l)+c)))*n+a*(a+2*h)+d;else s=-(n=Math.max(0,-(u*(a=-l)+c)))*n+a*(a+2*h)+d;else a<=-o?(a=(n=Math.max(0,-(-u*l+c)))>0?-l:Math.min(Math.max(-l,-h),l),s=-n*n+a*(a+2*h)+d):a<=o?(n=0,s=(a=Math.min(Math.max(-l,-h),l))*(a+2*h)+d):(a=(n=Math.max(0,-(u*l+c)))>0?l:Math.min(Math.max(-l,-h),l),s=-n*n+a*(a+2*h)+d);else a=u>0?-l:l,s=-(n=Math.max(0,-(u*a+c)))*n+a*(a+2*h)+d;return r&&r.copy(this.origin).addScaledVector(this.direction,n),i&&i.copy(tR).addScaledVector(tN,a),s}intersectSphere(e,t){tC.subVectors(e.center,this.origin);let r=tC.dot(this.direction),i=tC.dot(tC)-r*r,n=e.radius*e.radius;if(i>n)return null;let a=Math.sqrt(n-i),s=r-a,o=r+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return!(e.radius<0)&&this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){let r=this.distanceToPlane(e);return null===r?null:this.at(r,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let r,i,n,a,s,o,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,h=this.origin;return(l>=0?(r=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(r=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),u>=0?(n=(e.min.y-h.y)*u,a=(e.max.y-h.y)*u):(n=(e.max.y-h.y)*u,a=(e.min.y-h.y)*u),r>a||n>i||((n>r||isNaN(r))&&(r=n),(a<i||isNaN(i))&&(i=a),c>=0?(s=(e.min.z-h.z)*c,o=(e.max.z-h.z)*c):(s=(e.max.z-h.z)*c,o=(e.min.z-h.z)*c),r>o||s>i||((s>r||r!=r)&&(r=s),(o<i||i!=i)&&(i=o),i<0)))?null:this.at(r>=0?r:i,t)}intersectsBox(e){return null!==this.intersectBox(e,tC)}intersectTriangle(e,t,r,i,n){let a;tI.subVectors(t,e),tL.subVectors(r,e),tD.crossVectors(tI,tL);let s=this.direction.dot(tD);if(s>0){if(i)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}tP.subVectors(this.origin,e);let o=a*this.direction.dot(tL.crossVectors(tP,tL));if(o<0)return null;let l=a*this.direction.dot(tI.cross(tP));if(l<0||o+l>s)return null;let u=-a*tP.dot(tD);return u<0?null:this.at(u/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class tF{constructor(e,t,r,i,n,a,s,o,l,u,c,h,d,A,p,f){tF.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,r,i,n,a,s,o,l,u,c,h,d,A,p,f)}set(e,t,r,i,n,a,s,o,l,u,c,h,d,A,p,f){let m=this.elements;return m[0]=e,m[4]=t,m[8]=r,m[12]=i,m[1]=n,m[5]=a,m[9]=s,m[13]=o,m[2]=l,m[6]=u,m[10]=c,m[14]=h,m[3]=d,m[7]=A,m[11]=p,m[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tF().fromArray(this.elements)}copy(e){let t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){let t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,r=e.elements,i=1/tO.setFromMatrixColumn(e,0).length(),n=1/tO.setFromMatrixColumn(e,1).length(),a=1/tO.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*n,t[5]=r[5]*n,t[6]=r[6]*n,t[7]=0,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,r=e.x,i=e.y,n=e.z,a=Math.cos(r),s=Math.sin(r),o=Math.cos(i),l=Math.sin(i),u=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){let e=a*u,r=a*c,i=s*u,n=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=r+i*l,t[5]=e-n*l,t[9]=-s*o,t[2]=n-e*l,t[6]=i+r*l,t[10]=a*o}else if("YXZ"===e.order){let e=o*u,r=o*c,i=l*u,n=l*c;t[0]=e+n*s,t[4]=i*s-r,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-s,t[2]=r*s-i,t[6]=n+e*s,t[10]=a*o}else if("ZXY"===e.order){let e=o*u,r=o*c,i=l*u,n=l*c;t[0]=e-n*s,t[4]=-a*c,t[8]=i+r*s,t[1]=r+i*s,t[5]=a*u,t[9]=n-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){let e=a*u,r=a*c,i=s*u,n=s*c;t[0]=o*u,t[4]=i*l-r,t[8]=e*l+n,t[1]=o*c,t[5]=n*l+e,t[9]=r*l-i,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){let e=a*o,r=a*l,i=s*o,n=s*l;t[0]=o*u,t[4]=n-e*c,t[8]=i*c+r,t[1]=c,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=r*c+i,t[10]=e-n*c}else if("XZY"===e.order){let e=a*o,r=a*l,i=s*o,n=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=e*c+n,t[5]=a*u,t[9]=r*c-i,t[2]=i*c-r,t[6]=s*u,t[10]=n*c+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tk,e,tz)}lookAt(e,t,r){let i=this.elements;return tG.subVectors(e,t),0===tG.lengthSq()&&(tG.z=1),tG.normalize(),tV.crossVectors(r,tG),0===tV.lengthSq()&&(1===Math.abs(r.z)?tG.x+=1e-4:tG.z+=1e-4,tG.normalize(),tV.crossVectors(r,tG)),tV.normalize(),tq.crossVectors(tG,tV),i[0]=tV.x,i[4]=tq.x,i[8]=tG.x,i[1]=tV.y,i[5]=tq.y,i[9]=tG.y,i[2]=tV.z,i[6]=tq.z,i[10]=tG.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let r=e.elements,i=t.elements,n=this.elements,a=r[0],s=r[4],o=r[8],l=r[12],u=r[1],c=r[5],h=r[9],d=r[13],A=r[2],p=r[6],f=r[10],m=r[14],g=r[3],y=r[7],v=r[11],x=r[15],_=i[0],b=i[4],S=i[8],T=i[12],w=i[1],M=i[5],E=i[9],C=i[13],R=i[2],N=i[6],P=i[10],I=i[14],L=i[3],D=i[7],B=i[11],F=i[15];return n[0]=a*_+s*w+o*R+l*L,n[4]=a*b+s*M+o*N+l*D,n[8]=a*S+s*E+o*P+l*B,n[12]=a*T+s*C+o*I+l*F,n[1]=u*_+c*w+h*R+d*L,n[5]=u*b+c*M+h*N+d*D,n[9]=u*S+c*E+h*P+d*B,n[13]=u*T+c*C+h*I+d*F,n[2]=A*_+p*w+f*R+m*L,n[6]=A*b+p*M+f*N+m*D,n[10]=A*S+p*E+f*P+m*B,n[14]=A*T+p*C+f*I+m*F,n[3]=g*_+y*w+v*R+x*L,n[7]=g*b+y*M+v*N+x*D,n[11]=g*S+y*E+v*P+x*B,n[15]=g*T+y*C+v*I+x*F,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],r=e[4],i=e[8],n=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],h=e[10],d=e[14];return e[3]*(n*o*c-i*l*c-n*s*h+r*l*h+i*s*d-r*o*d)+e[7]*(t*o*d-t*l*h+n*a*h-i*a*d+i*l*u-n*o*u)+e[11]*(t*l*c-t*s*d-n*a*c+r*a*d+n*s*u-r*l*u)+e[15]*(-i*s*u-t*o*c+t*s*h+i*a*c-r*a*h+r*o*u)}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,r){let i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){let e=this.elements,t=e[0],r=e[1],i=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8],c=e[9],h=e[10],d=e[11],A=e[12],p=e[13],f=e[14],m=e[15],g=c*f*l-p*h*l+p*o*d-s*f*d-c*o*m+s*h*m,y=A*h*l-u*f*l-A*o*d+a*f*d+u*o*m-a*h*m,v=u*p*l-A*c*l+A*s*d-a*p*d-u*s*m+a*c*m,x=A*c*o-u*p*o-A*s*h+a*p*h+u*s*f-a*c*f,_=t*g+r*y+i*v+n*x;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let b=1/_;return e[0]=g*b,e[1]=(p*h*n-c*f*n-p*i*d+r*f*d+c*i*m-r*h*m)*b,e[2]=(s*f*n-p*o*n+p*i*l-r*f*l-s*i*m+r*o*m)*b,e[3]=(c*o*n-s*h*n-c*i*l+r*h*l+s*i*d-r*o*d)*b,e[4]=y*b,e[5]=(u*f*n-A*h*n+A*i*d-t*f*d-u*i*m+t*h*m)*b,e[6]=(A*o*n-a*f*n-A*i*l+t*f*l+a*i*m-t*o*m)*b,e[7]=(a*h*n-u*o*n+u*i*l-t*h*l-a*i*d+t*o*d)*b,e[8]=v*b,e[9]=(A*c*n-u*p*n-A*r*d+t*p*d+u*r*m-t*c*m)*b,e[10]=(a*p*n-A*s*n+A*r*l-t*p*l-a*r*m+t*s*m)*b,e[11]=(u*s*n-a*c*n-u*r*l+t*c*l+a*r*d-t*s*d)*b,e[12]=x*b,e[13]=(u*p*i-A*c*i+A*r*h-t*p*h-u*r*f+t*c*f)*b,e[14]=(A*s*i-a*p*i-A*r*o+t*p*o+a*r*f-t*s*f)*b,e[15]=(a*c*i-u*s*i+u*r*o-t*c*o-a*r*h+t*s*h)*b,this}scale(e){let t=this.elements,r=e.x,i=e.y,n=e.z;return t[0]*=r,t[4]*=i,t[8]*=n,t[1]*=r,t[5]*=i,t[9]*=n,t[2]*=r,t[6]*=i,t[10]*=n,t[3]*=r,t[7]*=i,t[11]*=n,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let r=Math.cos(t),i=Math.sin(t),n=1-r,a=e.x,s=e.y,o=e.z,l=n*a,u=n*s;return this.set(l*a+r,l*s-i*o,l*o+i*s,0,l*s+i*o,u*s+r,u*o-i*a,0,l*o-i*s,u*o+i*a,n*o*o+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,n,a){return this.set(1,r,n,0,e,1,a,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){let i=this.elements,n=t._x,a=t._y,s=t._z,o=t._w,l=n+n,u=a+a,c=s+s,h=n*l,d=n*u,A=n*c,p=a*u,f=a*c,m=s*c,g=o*l,y=o*u,v=o*c,x=r.x,_=r.y,b=r.z;return i[0]=(1-(p+m))*x,i[1]=(d+v)*x,i[2]=(A-y)*x,i[3]=0,i[4]=(d-v)*_,i[5]=(1-(h+m))*_,i[6]=(f+g)*_,i[7]=0,i[8]=(A+y)*b,i[9]=(f-g)*b,i[10]=(1-(h+p))*b,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){let i=this.elements,n=tO.set(i[0],i[1],i[2]).length(),a=tO.set(i[4],i[5],i[6]).length(),s=tO.set(i[8],i[9],i[10]).length();0>this.determinant()&&(n=-n),e.x=i[12],e.y=i[13],e.z=i[14],tU.copy(this);let o=1/n,l=1/a,u=1/s;return tU.elements[0]*=o,tU.elements[1]*=o,tU.elements[2]*=o,tU.elements[4]*=l,tU.elements[5]*=l,tU.elements[6]*=l,tU.elements[8]*=u,tU.elements[9]*=u,tU.elements[10]*=u,t.setFromRotationMatrix(tU),r.x=n,r.y=a,r.z=s,this}makePerspective(e,t,r,i,n,a,s=2e3,o=!1){let l,u,c=this.elements;if(o)l=n/(a-n),u=a*n/(a-n);else if(2e3===s)l=-(a+n)/(a-n),u=-2*a*n/(a-n);else if(2001===s)l=-a/(a-n),u=-a*n/(a-n);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);return c[0]=2*n/(t-e),c[4]=0,c[8]=(t+e)/(t-e),c[12]=0,c[1]=0,c[5]=2*n/(r-i),c[9]=(r+i)/(r-i),c[13]=0,c[2]=0,c[6]=0,c[10]=l,c[14]=u,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,r,i,n,a,s=2e3,o=!1){let l,u,c=this.elements;if(o)l=1/(a-n),u=a/(a-n);else if(2e3===s)l=-2/(a-n),u=-(a+n)/(a-n);else if(2001===s)l=-1/(a-n),u=-n/(a-n);else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);return c[0]=2/(t-e),c[4]=0,c[8]=0,c[12]=-(t+e)/(t-e),c[1]=0,c[5]=2/(r-i),c[9]=0,c[13]=-(r+i)/(r-i),c[2]=0,c[6]=0,c[10]=l,c[14]=u,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let t=this.elements,r=e.elements;for(let e=0;e<16;e++)if(t[e]!==r[e])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){let r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}let tO=new e$,tU=new tF,tk=new e$(0,0,0),tz=new e$(1,1,1),tV=new e$,tq=new e$,tG=new e$,tH=new tF,tj=new eQ;class tW{constructor(e=0,t=0,r=0,i=tW.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){let i=e.elements,n=i[0],a=i[4],s=i[8],o=i[1],l=i[5],u=i[9],c=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(eV(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-a,n)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-eV(u,-1,1)),.9999999>Math.abs(u)?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-c,n),this._z=0);break;case"ZXY":this._x=Math.asin(eV(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(-c,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,n));break;case"ZYX":this._y=Math.asin(-eV(c,-1,1)),.9999999>Math.abs(c)?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,n)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(eV(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,n)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-eV(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,n)):(this._x=Math.atan2(-u,d),this._y=0);break;default:eI("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return tH.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tH,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return tj.setFromEuler(this),this.setFromQuaternion(tj,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}tW.DEFAULT_ORDER="XYZ";class tX{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&1<<e)!=0}}let tQ=0,t$=new e$,tY=new eQ,tK=new tF,tZ=new e$,tJ=new e$,t0=new e$,t1=new eQ,t2=new e$(1,0,0),t3=new e$(0,1,0),t4=new e$(0,0,1),t5={type:"added"},t8={type:"removed"},t6={type:"childadded",child:null},t7={type:"childremoved",child:null};class t9 extends eB{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:tQ++}),this.uuid=ez(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=t9.DEFAULT_UP.clone();const e=new e$,t=new tW,r=new eQ,i=new e$(1,1,1);t._onChange(function(){r.setFromEuler(t,!1)}),r._onChange(function(){t.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new tF},normalMatrix:{value:new eZ}}),this.matrix=new tF,this.matrixWorld=new tF,this.matrixAutoUpdate=t9.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=t9.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new tX,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return tY.setFromAxisAngle(e,t),this.quaternion.multiply(tY),this}rotateOnWorldAxis(e,t){return tY.setFromAxisAngle(e,t),this.quaternion.premultiply(tY),this}rotateX(e){return this.rotateOnAxis(t2,e)}rotateY(e){return this.rotateOnAxis(t3,e)}rotateZ(e){return this.rotateOnAxis(t4,e)}translateOnAxis(e,t){return t$.copy(e).applyQuaternion(this.quaternion),this.position.add(t$.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(t2,e)}translateY(e){return this.translateOnAxis(t3,e)}translateZ(e){return this.translateOnAxis(t4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(tK.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?tZ.copy(e):tZ.set(e,t,r);let i=this.parent;this.updateWorldMatrix(!0,!1),tJ.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?tK.lookAt(tJ,tZ,this.up):tK.lookAt(tZ,tJ,this.up),this.quaternion.setFromRotationMatrix(tK),i&&(tK.extractRotation(i.matrixWorld),tY.setFromRotationMatrix(tK),this.quaternion.premultiply(tY.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?eL("Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(t5),t6.child=e,this.dispatchEvent(t6),t6.child=null):eL("Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(t8),t7.child=e,this.dispatchEvent(t7),t7.child=null),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),tK.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),tK.multiply(e.parent.matrixWorld)),e.applyMatrix4(tK),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(t5),t6.child=e,this.dispatchEvent(t6),t6.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){let i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t,r=[]){this[e]===t&&r.push(this);let i=this.children;for(let n=0,a=i.length;n<a;n++)i[n].getObjectsByProperty(e,t,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tJ,e,t0),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(tJ,t1,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].updateMatrixWorld(e)}updateWorldMatrix(e,t){let r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){let e=this.children;for(let t=0,r=e.length;t<r;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let i={};function n(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(e=>({...e,boundingBox:e.boundingBox?e.boundingBox.toJSON():void 0,boundingSphere:e.boundingSphere?e.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(e=>({...e})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),null!==this._colorsTexture&&(i.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(i.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(i.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=n(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let r=t.shapes;if(Array.isArray(r))for(let t=0,i=r.length;t<i;t++){let i=r[t];n(e.shapes,i)}else n(e.shapes,r)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(n(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let t=[];for(let r=0,i=this.material.length;r<i;r++)t.push(n(e.materials,this.material[r]));i.material=t}else i.material=n(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){let r=this.animations[t];i.animations.push(n(e.animations,r))}}if(t){let t=a(e.geometries),i=a(e.materials),n=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),u=a(e.animations),c=a(e.nodes);t.length>0&&(r.geometries=t),i.length>0&&(r.materials=i),n.length>0&&(r.textures=n),s.length>0&&(r.images=s),o.length>0&&(r.shapes=o),l.length>0&&(r.skeletons=l),u.length>0&&(r.animations=u),c.length>0&&(r.nodes=c)}return r.object=i,r;function a(e){let t=[];for(let r in e){let i=e[r];delete i.metadata,t.push(i)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let r=e.children[t];this.add(r.clone())}return this}}t9.DEFAULT_UP=new e$(0,1,0),t9.DEFAULT_MATRIX_AUTO_UPDATE=!0,t9.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let re=new e$,rt=new e$,rr=new e$,ri=new e$,rn=new e$,ra=new e$,rs=new e$,ro=new e$,rl=new e$,ru=new e$,rc=new tr,rh=new tr,rd=new tr;class rA{constructor(e=new e$,t=new e$,r=new e$){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),re.subVectors(e,t),i.cross(re);let n=i.lengthSq();return n>0?i.multiplyScalar(1/Math.sqrt(n)):i.set(0,0,0)}static getBarycoord(e,t,r,i,n){re.subVectors(i,t),rt.subVectors(r,t),rr.subVectors(e,t);let a=re.dot(re),s=re.dot(rt),o=re.dot(rr),l=rt.dot(rt),u=rt.dot(rr),c=a*l-s*s;if(0===c)return n.set(0,0,0),null;let h=1/c,d=(l*o-s*u)*h,A=(a*u-s*o)*h;return n.set(1-d-A,A,d)}static containsPoint(e,t,r,i){return null!==this.getBarycoord(e,t,r,i,ri)&&ri.x>=0&&ri.y>=0&&ri.x+ri.y<=1}static getInterpolation(e,t,r,i,n,a,s,o){return null===this.getBarycoord(e,t,r,i,ri)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(n,ri.x),o.addScaledVector(a,ri.y),o.addScaledVector(s,ri.z),o)}static getInterpolatedAttribute(e,t,r,i,n,a){return rc.setScalar(0),rh.setScalar(0),rd.setScalar(0),rc.fromBufferAttribute(e,t),rh.fromBufferAttribute(e,r),rd.fromBufferAttribute(e,i),a.setScalar(0),a.addScaledVector(rc,n.x),a.addScaledVector(rh,n.y),a.addScaledVector(rd,n.z),a}static isFrontFacing(e,t,r,i){return re.subVectors(r,t),rt.subVectors(e,t),0>re.cross(rt).dot(i)}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return re.subVectors(this.c,this.b),rt.subVectors(this.a,this.b),.5*re.cross(rt).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rA.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rA.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,r,i,n){return rA.getInterpolation(e,this.a,this.b,this.c,t,r,i,n)}containsPoint(e){return rA.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rA.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let r,i,n=this.a,a=this.b,s=this.c;rn.subVectors(a,n),ra.subVectors(s,n),ro.subVectors(e,n);let o=rn.dot(ro),l=ra.dot(ro);if(o<=0&&l<=0)return t.copy(n);rl.subVectors(e,a);let u=rn.dot(rl),c=ra.dot(rl);if(u>=0&&c<=u)return t.copy(a);let h=o*c-u*l;if(h<=0&&o>=0&&u<=0)return r=o/(o-u),t.copy(n).addScaledVector(rn,r);ru.subVectors(e,s);let d=rn.dot(ru),A=ra.dot(ru);if(A>=0&&d<=A)return t.copy(s);let p=d*l-o*A;if(p<=0&&l>=0&&A<=0)return i=l/(l-A),t.copy(n).addScaledVector(ra,i);let f=u*A-d*c;if(f<=0&&c-u>=0&&d-A>=0)return rs.subVectors(s,a),i=(c-u)/(c-u+(d-A)),t.copy(a).addScaledVector(rs,i);let m=1/(f+p+h);return r=p*m,i=h*m,t.copy(n).addScaledVector(rn,r).addScaledVector(ra,i)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let rp={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},rf={h:0,s:0,l:0},rm={h:0,s:0,l:0};function rg(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*6*(2/3-r):e}class ry{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){return void 0===t&&void 0===r?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,r),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=ep){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,e2.colorSpaceToWorking(this,t),this}setRGB(e,t,r,i=e2.workingColorSpace){return this.r=e,this.g=t,this.b=r,e2.colorSpaceToWorking(this,i),this}setHSL(e,t,r,i=e2.workingColorSpace){if(e=eq(e,1),t=eV(t,0,1),r=eV(r,0,1),0===t)this.r=this.g=this.b=r;else{let i=r<=.5?r*(1+t):r+t-r*t,n=2*r-i;this.r=rg(n,i,e+1/3),this.g=rg(n,i,e),this.b=rg(n,i,e-1/3)}return e2.colorSpaceToWorking(this,i),this}setStyle(e,t=ep){let r;function i(t){void 0!==t&&1>parseFloat(t)&&eI("Color: Alpha component of "+e+" will be ignored.")}if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let n,a=r[1],s=r[2];switch(a){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(n[4]),this.setRGB(Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255,t);if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(n[4]),this.setRGB(Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100,t);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(n[4]),this.setHSL(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,t);break;default:eI("Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let i=r[1],n=i.length;if(3===n)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,t);if(6===n)return this.setHex(parseInt(i,16),t);eI("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=ep){let r=rp[e.toLowerCase()];return void 0!==r?this.setHex(r,t):eI("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=e3(e.r),this.g=e3(e.g),this.b=e3(e.b),this}copyLinearToSRGB(e){return this.r=e4(e.r),this.g=e4(e.g),this.b=e4(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=ep){return e2.workingToColorSpace(rv.copy(this),e),65536*Math.round(eV(255*rv.r,0,255))+256*Math.round(eV(255*rv.g,0,255))+Math.round(eV(255*rv.b,0,255))}getHexString(e=ep){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=e2.workingColorSpace){let r,i;e2.workingToColorSpace(rv.copy(this),t);let n=rv.r,a=rv.g,s=rv.b,o=Math.max(n,a,s),l=Math.min(n,a,s),u=(l+o)/2;if(l===o)r=0,i=0;else{let e=o-l;switch(i=u<=.5?e/(o+l):e/(2-o-l),o){case n:r=(a-s)/e+6*(a<s);break;case a:r=(s-n)/e+2;break;case s:r=(n-a)/e+4}r/=6}return e.h=r,e.s=i,e.l=u,e}getRGB(e,t=e2.workingColorSpace){return e2.workingToColorSpace(rv.copy(this),t),e.r=rv.r,e.g=rv.g,e.b=rv.b,e}getStyle(e=ep){e2.workingToColorSpace(rv.copy(this),e);let t=rv.r,r=rv.g,i=rv.b;return e!==ep?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*r)},${Math.round(255*i)})`}offsetHSL(e,t,r){return this.getHSL(rf),this.setHSL(rf.h+e,rf.s+t,rf.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(rf),e.getHSL(rm);let r=eG(rf.h,rm.h,t),i=eG(rf.s,rm.s,t),n=eG(rf.l,rm.l,t);return this.setHSL(r,i,n),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,r=this.g,i=this.b,n=e.elements;return this.r=n[0]*t+n[3]*r+n[6]*i,this.g=n[1]*t+n[4]*r+n[7]*i,this.b=n[2]*t+n[5]*r+n[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let rv=new ry;ry.NAMES=rp;let rx=0;class r_ extends eB{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rx++}),this.uuid=ez(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ry(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let r=e[t];if(void 0===r){eI(`Material: parameter '${t}' has value of undefined.`);continue}let i=this[t];if(void 0===i){eI(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let r={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function i(e){let t=[];for(let r in e){let i=e[r];delete i.metadata,t.push(i)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),void 0!==this.sheen&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(r.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(r.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),void 0!==this.dispersion&&(r.dispersion=this.dispersion),void 0!==this.iridescence&&(r.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(r.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(r.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(r.combine=this.combine)),void 0!==this.envMapRotation&&(r.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(r.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(r.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(r.size=this.size),null!==this.shadowSide&&(r.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(r.blending=this.blending),0!==this.side&&(r.side=this.side),!0===this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=!0),204!==this.blendSrc&&(r.blendSrc=this.blendSrc),205!==this.blendDst&&(r.blendDst=this.blendDst),100!==this.blendEquation&&(r.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(r.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(r.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(r.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(r.depthFunc=this.depthFunc),!1===this.depthTest&&(r.depthTest=this.depthTest),!1===this.depthWrite&&(r.depthWrite=this.depthWrite),!1===this.colorWrite&&(r.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(r.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(r.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(r.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(r.stencilFuncMask=this.stencilFuncMask),7680!==this.stencilFail&&(r.stencilFail=this.stencilFail),7680!==this.stencilZFail&&(r.stencilZFail=this.stencilZFail),7680!==this.stencilZPass&&(r.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(r.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.alphaHash&&(r.alphaHash=!0),!0===this.alphaToCoverage&&(r.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=!0),!0===this.forceSinglePass&&(r.forceSinglePass=!0),!0===this.wireframe&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(r.flatShading=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),!1===this.fog&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData),t){let t=i(e.textures),n=i(e.images);t.length>0&&(r.textures=t),n.length>0&&(r.images=n)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,r=null;if(null!==t){let e=t.length;r=Array(e);for(let i=0;i!==e;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class rb extends r_{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ry(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tW,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let rS=function(){let e=new ArrayBuffer(4),t=new Float32Array(e),r=new Uint32Array(e),i=new Uint32Array(512),n=new Uint32Array(512);for(let e=0;e<256;++e){let t=e-127;t<-27?(i[e]=0,i[256|e]=32768,n[e]=24,n[256|e]=24):t<-14?(i[e]=1024>>-t-14,i[256|e]=1024>>-t-14|32768,n[e]=-t-1,n[256|e]=-t-1):t<=15?(i[e]=t+15<<10,i[256|e]=t+15<<10|32768,n[e]=13,n[256|e]=13):t<128?(i[e]=31744,i[256|e]=64512,n[e]=24,n[256|e]=24):(i[e]=31744,i[256|e]=64512,n[e]=13,n[256|e]=13)}let a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,r=0;for(;(8388608&t)==0;)t<<=1,r-=8388608;t&=-8388609,r+=0x38800000,a[e]=t|r}for(let e=1024;e<2048;++e)a[e]=0x38000000+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=0x47800000,s[32]=0x80000000;for(let e=33;e<63;++e)s[e]=0x80000000+(e-32<<23);s[63]=0xc7800000;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:r,baseTable:i,shiftTable:n,mantissaTable:a,exponentTable:s,offsetTable:o}}();function rT(e){Math.abs(e)>65504&&eI("DataUtils.toHalfFloat(): Value out of range."),e=eV(e,-65504,65504),rS.floatView[0]=e;let t=rS.uint32View[0],r=t>>23&511;return rS.baseTable[r]+((8388607&t)>>rS.shiftTable[r])}function rw(e){let t=e>>10;return rS.uint32View[0]=rS.mantissaTable[rS.offsetTable[t]+(1023&e)]+rS.exponentTable[t],rS.floatView[0]}class rM{static toHalfFloat(e){return rT(e)}static fromHalfFloat(e){return rw(e)}}let rE=new e$,rC=new eX,rR=0;class rN{constructor(e,t,r=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:rR++}),this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=r,this.usage=35044,this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,r=this.count;t<r;t++)rC.fromBufferAttribute(this,t),rC.applyMatrix3(e),this.setXY(t,rC.x,rC.y);else if(3===this.itemSize)for(let t=0,r=this.count;t<r;t++)rE.fromBufferAttribute(this,t),rE.applyMatrix3(e),this.setXYZ(t,rE.x,rE.y,rE.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)rE.fromBufferAttribute(this,t),rE.applyMatrix4(e),this.setXYZ(t,rE.x,rE.y,rE.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)rE.fromBufferAttribute(this,t),rE.applyNormalMatrix(e),this.setXYZ(t,rE.x,rE.y,rE.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)rE.fromBufferAttribute(this,t),rE.transformDirection(e),this.setXYZ(t,rE.x,rE.y,rE.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=eH(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ej(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=eH(t,this.array)),t}setX(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=eH(t,this.array)),t}setY(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=eH(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=eH(t,this.array)),t}setW(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array),i=ej(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array),i=ej(i,this.array),n=ej(n,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class rP extends rN{constructor(e,t,r){super(new Int8Array(e),t,r)}}class rI extends rN{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class rL extends rN{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class rD extends rN{constructor(e,t,r){super(new Int16Array(e),t,r)}}class rB extends rN{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class rF extends rN{constructor(e,t,r){super(new Int32Array(e),t,r)}}class rO extends rN{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class rU extends rN{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=rw(this.array[e*this.itemSize]);return this.normalized&&(t=eH(t,this.array)),t}setX(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize]=rT(t),this}getY(e){let t=rw(this.array[e*this.itemSize+1]);return this.normalized&&(t=eH(t,this.array)),t}setY(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize+1]=rT(t),this}getZ(e){let t=rw(this.array[e*this.itemSize+2]);return this.normalized&&(t=eH(t,this.array)),t}setZ(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize+2]=rT(t),this}getW(e){let t=rw(this.array[e*this.itemSize+3]);return this.normalized&&(t=eH(t,this.array)),t}setW(e,t){return this.normalized&&(t=ej(t,this.array)),this.array[e*this.itemSize+3]=rT(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array)),this.array[e+0]=rT(t),this.array[e+1]=rT(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array),i=ej(i,this.array)),this.array[e+0]=rT(t),this.array[e+1]=rT(r),this.array[e+2]=rT(i),this}setXYZW(e,t,r,i,n){return e*=this.itemSize,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array),i=ej(i,this.array),n=ej(n,this.array)),this.array[e+0]=rT(t),this.array[e+1]=rT(r),this.array[e+2]=rT(i),this.array[e+3]=rT(n),this}}class rk extends rN{constructor(e,t,r){super(new Float32Array(e),t,r)}}let rz=0,rV=new tF,rq=new t9,rG=new e$,rH=new tu,rj=new tu,rW=new e$;class rX extends eB{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rz++}),this.uuid=ez(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eb(e)?rO:rB)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let r=this.attributes.normal;if(void 0!==r){let t=new eZ().getNormalMatrix(e);r.applyNormalMatrix(t),r.needsUpdate=!0}let i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return rV.makeRotationFromQuaternion(e),this.applyMatrix4(rV),this}rotateX(e){return rV.makeRotationX(e),this.applyMatrix4(rV),this}rotateY(e){return rV.makeRotationY(e),this.applyMatrix4(rV),this}rotateZ(e){return rV.makeRotationZ(e),this.applyMatrix4(rV),this}translate(e,t,r){return rV.makeTranslation(e,t,r),this.applyMatrix4(rV),this}scale(e,t,r){return rV.makeScale(e,t,r),this.applyMatrix4(rV),this}lookAt(e){return rq.lookAt(e),rq.updateMatrix(),this.applyMatrix4(rq.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(rG).negate(),this.translate(rG.x,rG.y,rG.z),this}setFromPoints(e){let t=this.getAttribute("position");if(void 0===t){let t=[];for(let r=0,i=e.length;r<i;r++){let i=e[r];t.push(i.x,i.y,i.z||0)}this.setAttribute("position",new rk(t,3))}else{let r=Math.min(e.length,t.count);for(let i=0;i<r;i++){let r=e[i];t.setXYZ(i,r.x,r.y,r.z||0)}e.length>t.count&&eI("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tu);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){eL("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new e$(-1/0,-1/0,-1/0),new e$(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){let r=t[e];rH.setFromBufferAttribute(r),this.morphTargetsRelative?(rW.addVectors(this.boundingBox.min,rH.min),this.boundingBox.expandByPoint(rW),rW.addVectors(this.boundingBox.max,rH.max),this.boundingBox.expandByPoint(rW)):(this.boundingBox.expandByPoint(rH.min),this.boundingBox.expandByPoint(rH.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&eL('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new tE);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){eL("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new e$,1/0);return}if(e){let r=this.boundingSphere.center;if(rH.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){let r=t[e];rj.setFromBufferAttribute(r),this.morphTargetsRelative?(rW.addVectors(rH.min,rj.min),rH.expandByPoint(rW),rW.addVectors(rH.max,rj.max),rH.expandByPoint(rW)):(rH.expandByPoint(rj.min),rH.expandByPoint(rj.max))}rH.getCenter(r);let i=0;for(let t=0,n=e.count;t<n;t++)rW.fromBufferAttribute(e,t),i=Math.max(i,r.distanceToSquared(rW));if(t)for(let n=0,a=t.length;n<a;n++){let a=t[n],s=this.morphTargetsRelative;for(let t=0,n=a.count;t<n;t++)rW.fromBufferAttribute(a,t),s&&(rG.fromBufferAttribute(e,t),rW.add(rG)),i=Math.max(i,r.distanceToSquared(rW))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&eL('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void eL("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let r=t.position,i=t.normal,n=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new rN(new Float32Array(4*r.count),4));let a=this.getAttribute("tangent"),s=[],o=[];for(let e=0;e<r.count;e++)s[e]=new e$,o[e]=new e$;let l=new e$,u=new e$,c=new e$,h=new eX,d=new eX,A=new eX,p=new e$,f=new e$,m=this.groups;0===m.length&&(m=[{start:0,count:e.count}]);for(let t=0,i=m.length;t<i;++t){let i=m[t],a=i.start,g=i.count;for(let t=a,i=a+g;t<i;t+=3)!function(e,t,i){l.fromBufferAttribute(r,e),u.fromBufferAttribute(r,t),c.fromBufferAttribute(r,i),h.fromBufferAttribute(n,e),d.fromBufferAttribute(n,t),A.fromBufferAttribute(n,i),u.sub(l),c.sub(l),d.sub(h),A.sub(h);let a=1/(d.x*A.y-A.x*d.y);isFinite(a)&&(p.copy(u).multiplyScalar(A.y).addScaledVector(c,-d.y).multiplyScalar(a),f.copy(c).multiplyScalar(d.x).addScaledVector(u,-A.x).multiplyScalar(a),s[e].add(p),s[t].add(p),s[i].add(p),o[e].add(f),o[t].add(f),o[i].add(f))}(e.getX(t+0),e.getX(t+1),e.getX(t+2))}let g=new e$,y=new e$,v=new e$,x=new e$;function _(e){v.fromBufferAttribute(i,e),x.copy(v);let t=s[e];g.copy(t),g.sub(v.multiplyScalar(v.dot(t))).normalize(),y.crossVectors(x,t);let r=y.dot(o[e]);a.setXYZW(e,g.x,g.y,g.z,r<0?-1:1)}for(let t=0,r=m.length;t<r;++t){let r=m[t],i=r.start,n=r.count;for(let t=i,r=i+n;t<r;t+=3)_(e.getX(t+0)),_(e.getX(t+1)),_(e.getX(t+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let r=this.getAttribute("normal");if(void 0===r)r=new rN(new Float32Array(3*t.count),3),this.setAttribute("normal",r);else for(let e=0,t=r.count;e<t;e++)r.setXYZ(e,0,0,0);let i=new e$,n=new e$,a=new e$,s=new e$,o=new e$,l=new e$,u=new e$,c=new e$;if(e)for(let h=0,d=e.count;h<d;h+=3){let d=e.getX(h+0),A=e.getX(h+1),p=e.getX(h+2);i.fromBufferAttribute(t,d),n.fromBufferAttribute(t,A),a.fromBufferAttribute(t,p),u.subVectors(a,n),c.subVectors(i,n),u.cross(c),s.fromBufferAttribute(r,d),o.fromBufferAttribute(r,A),l.fromBufferAttribute(r,p),s.add(u),o.add(u),l.add(u),r.setXYZ(d,s.x,s.y,s.z),r.setXYZ(A,o.x,o.y,o.z),r.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)i.fromBufferAttribute(t,e+0),n.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),u.subVectors(a,n),c.subVectors(i,n),u.cross(c),r.setXYZ(e+0,u.x,u.y,u.z),r.setXYZ(e+1,u.x,u.y,u.z),r.setXYZ(e+2,u.x,u.y,u.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)rW.fromBufferAttribute(e,t),rW.normalize(),e.setXYZ(t,rW.x,rW.y,rW.z)}toNonIndexed(){function e(e,t){let r=e.array,i=e.itemSize,n=e.normalized,a=new r.constructor(t.length*i),s=0,o=0;for(let n=0,l=t.length;n<l;n++){s=e.isInterleavedBufferAttribute?t[n]*e.data.stride+e.offset:t[n]*i;for(let e=0;e<i;e++)a[o++]=r[s++]}return new rN(a,i,n)}if(null===this.index)return eI("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new rX,r=this.index.array,i=this.attributes;for(let n in i){let a=e(i[n],r);t.setAttribute(n,a)}let n=this.morphAttributes;for(let i in n){let a=[],s=n[i];for(let t=0,i=s.length;t<i;t++){let i=e(s[t],r);a.push(i)}t.morphAttributes[i]=a}t.morphTargetsRelative=this.morphTargetsRelative;let a=this.groups;for(let e=0,r=a.length;e<r;e++){let r=a[e];t.addGroup(r.start,r.count,r.materialIndex)}return t}toJSON(){let e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let r=this.attributes;for(let t in r){let i=r[t];e.data.attributes[t]=i.toJSON(e.data)}let i={},n=!1;for(let t in this.morphAttributes){let r=this.morphAttributes[t],a=[];for(let t=0,i=r.length;t<i;t++){let i=r[t];a.push(i.toJSON(e.data))}a.length>0&&(i[t]=a,n=!0)}n&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);let a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));let s=this.boundingSphere;return null!==s&&(e.data.boundingSphere=s.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let r=e.index;null!==r&&this.setIndex(r.clone());let i=e.attributes;for(let e in i){let r=i[e];this.setAttribute(e,r.clone(t))}let n=e.morphAttributes;for(let e in n){let r=[],i=n[e];for(let e=0,n=i.length;e<n;e++)r.push(i[e].clone(t));this.morphAttributes[e]=r}this.morphTargetsRelative=e.morphTargetsRelative;let a=e.groups;for(let e=0,t=a.length;e<t;e++){let t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}let s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());let o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let rQ=new tF,r$=new tB,rY=new tE,rK=new e$,rZ=new e$,rJ=new e$,r0=new e$,r1=new e$,r2=new e$,r3=new e$,r4=new e$;class r5 extends t9{constructor(e=new rX,t=new rb){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=r.length;e<t;e++){let t=r[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let r=this.geometry,i=r.attributes.position,n=r.morphAttributes.position,a=r.morphTargetsRelative;t.fromBufferAttribute(i,e);let s=this.morphTargetInfluences;if(n&&s){r2.set(0,0,0);for(let r=0,i=n.length;r<i;r++){let i=s[r],o=n[r];0!==i&&(r1.fromBufferAttribute(o,e),a?r2.addScaledVector(r1,i):r2.addScaledVector(r1.sub(t),i))}t.add(r2)}return t}raycast(e,t){let r=this.geometry,i=this.material,n=this.matrixWorld;void 0===i||(null===r.boundingSphere&&r.computeBoundingSphere(),rY.copy(r.boundingSphere),rY.applyMatrix4(n),r$.copy(e.ray).recast(e.near),!1===rY.containsPoint(r$.origin)&&(null===r$.intersectSphere(rY,rK)||r$.origin.distanceToSquared(rK)>(e.far-e.near)**2)||(rQ.copy(n).invert(),r$.copy(e.ray).applyMatrix4(rQ),(null===r.boundingBox||!1!==r$.intersectsBox(r.boundingBox))&&this._computeIntersections(e,t,r$)))}_computeIntersections(e,t,r){let i,n=this.geometry,a=this.material,s=n.index,o=n.attributes.position,l=n.attributes.uv,u=n.attributes.uv1,c=n.attributes.normal,h=n.groups,d=n.drawRange;if(null!==s)if(Array.isArray(a))for(let n=0,o=h.length;n<o;n++){let o=h[n],A=a[o.materialIndex],p=Math.max(o.start,d.start),f=Math.min(s.count,Math.min(o.start+o.count,d.start+d.count));for(let n=p;n<f;n+=3)(i=r8(this,A,e,r,l,u,c,s.getX(n),s.getX(n+1),s.getX(n+2)))&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=o.materialIndex,t.push(i))}else{let n=Math.max(0,d.start),o=Math.min(s.count,d.start+d.count);for(let h=n;h<o;h+=3)(i=r8(this,a,e,r,l,u,c,s.getX(h),s.getX(h+1),s.getX(h+2)))&&(i.faceIndex=Math.floor(h/3),t.push(i))}else if(void 0!==o)if(Array.isArray(a))for(let n=0,s=h.length;n<s;n++){let s=h[n],A=a[s.materialIndex],p=Math.max(s.start,d.start),f=Math.min(o.count,Math.min(s.start+s.count,d.start+d.count));for(let n=p;n<f;n+=3)(i=r8(this,A,e,r,l,u,c,n,n+1,n+2))&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=s.materialIndex,t.push(i))}else{let n=Math.max(0,d.start),s=Math.min(o.count,d.start+d.count);for(let o=n;o<s;o+=3)(i=r8(this,a,e,r,l,u,c,o,o+1,o+2))&&(i.faceIndex=Math.floor(o/3),t.push(i))}}}function r8(e,t,r,i,n,a,s,o,l,u){e.getVertexPosition(o,rZ),e.getVertexPosition(l,rJ),e.getVertexPosition(u,r0);let c=function(e,t,r,i,n,a,s,o){if(null===(1===t.side?i.intersectTriangle(s,a,n,!0,o):i.intersectTriangle(n,a,s,0===t.side,o)))return null;r4.copy(o),r4.applyMatrix4(e.matrixWorld);let l=r.ray.origin.distanceTo(r4);return l<r.near||l>r.far?null:{distance:l,point:r4.clone(),object:e}}(e,t,r,i,rZ,rJ,r0,r3);if(c){let e=new e$;rA.getBarycoord(r3,rZ,rJ,r0,e),n&&(c.uv=rA.getInterpolatedAttribute(n,o,l,u,e,new eX)),a&&(c.uv1=rA.getInterpolatedAttribute(a,o,l,u,e,new eX)),s&&(c.normal=rA.getInterpolatedAttribute(s,o,l,u,e,new e$),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));let t={a:o,b:l,c:u,normal:new e$,materialIndex:0};rA.getNormal(rZ,rJ,r0,t.normal),c.face=t,c.barycoord=e}return c}class r6 extends rX{constructor(e=1,t=1,r=1,i=1,n=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:n,depthSegments:a};const s=this;i=Math.floor(i),n=Math.floor(n);const o=[],l=[],u=[],c=[];let h=0,d=0;function A(e,t,r,i,n,a,A,p,f,m,g){let y=a/f,v=A/m,x=a/2,_=A/2,b=p/2,S=f+1,T=m+1,w=0,M=0,E=new e$;for(let a=0;a<T;a++){let s=a*v-_;for(let o=0;o<S;o++){let h=o*y-x;E[e]=h*i,E[t]=s*n,E[r]=b,l.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[r]=p>0?1:-1,u.push(E.x,E.y,E.z),c.push(o/f),c.push(1-a/m),w+=1}}for(let e=0;e<m;e++)for(let t=0;t<f;t++){let r=h+t+S*e,i=h+t+S*(e+1),n=h+(t+1)+S*(e+1),a=h+(t+1)+S*e;o.push(r,i,a),o.push(i,n,a),M+=6}s.addGroup(d,M,g),d+=M,h+=w}A("z","y","x",-1,-1,r,t,e,a=Math.floor(a),n,0),A("z","y","x",1,-1,r,t,-e,a,n,1),A("x","z","y",1,1,e,r,t,i,a,2),A("x","z","y",1,-1,e,r,-t,i,a,3),A("x","y","z",1,-1,e,t,r,i,n,4),A("x","y","z",-1,-1,e,t,-r,i,n,5),this.setIndex(o),this.setAttribute("position",new rk(l,3)),this.setAttribute("normal",new rk(u,3)),this.setAttribute("uv",new rk(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new r6(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function r7(e){let t={};for(let r in e)for(let i in t[r]={},e[r]){let n=e[r][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(eI("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[r][i]=null):t[r][i]=n.clone():Array.isArray(n)?t[r][i]=n.slice():t[r][i]=n}return t}function r9(e){let t={};for(let r=0;r<e.length;r++){let i=r7(e[r]);for(let e in i)t[e]=i[e]}return t}function ie(e){let t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:e2.workingColorSpace}let it={clone:r7,merge:r9};class ir extends r_{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=r7(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let r=0;r<e.length;r++)t.push(e[r].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let i=this.uniforms[r].value;i&&i.isTexture?t.uniforms[r]={type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?t.uniforms[r]={type:"c",value:i.getHex()}:i&&i.isVector2?t.uniforms[r]={type:"v2",value:i.toArray()}:i&&i.isVector3?t.uniforms[r]={type:"v3",value:i.toArray()}:i&&i.isVector4?t.uniforms[r]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?t.uniforms[r]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?t.uniforms[r]={type:"m4",value:i.toArray()}:t.uniforms[r]={value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let r={};for(let e in this.extensions)!0===this.extensions[e]&&(r[e]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class ii extends t9{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tF,this.projectionMatrix=new tF,this.projectionMatrixInverse=new tF,this.coordinateSystem=2e3,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let ia=new e$,is=new eX,io=new eX;class il extends ii{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*ek*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*eU*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ek*Math.atan(Math.tan(.5*eU*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,r){ia.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ia.x,ia.y).multiplyScalar(-e/ia.z),ia.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(ia.x,ia.y).multiplyScalar(-e/ia.z)}getViewSize(e,t){return this.getViewBounds(e,is,io),t.subVectors(io,is)}setViewOffset(e,t,r,i,n,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*eU*this.fov)/this.zoom,r=2*t,i=this.aspect*r,n=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){let e=a.fullWidth,s=a.fullHeight;n+=a.offsetX*i/e,t-=a.offsetY*r/s,i*=a.width/e,r*=a.height/s}let s=this.filmOffset;0!==s&&(n+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-r,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class iu extends t9{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new il(-90,1,e,t);i.layers=this.layers,this.add(i);const n=new il(-90,1,e,t);n.layers=this.layers,this.add(n);const a=new il(-90,1,e,t);a.layers=this.layers,this.add(a);const s=new il(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new il(-90,1,e,t);o.layers=this.layers,this.add(o);const l=new il(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[r,i,n,a,s,o]=t;for(let e of t)this.remove(e);if(2e3===e)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),n.up.set(0,0,-1),n.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else if(2001===e)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),n.up.set(0,0,1),n.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[n,a,s,o,l,u]=this.children,c=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),A=e.xr.enabled;e.xr.enabled=!1;let p=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(t,n),e.setRenderTarget(r,1,i),e.render(t,a),e.setRenderTarget(r,2,i),e.render(t,s),e.setRenderTarget(r,3,i),e.render(t,o),e.setRenderTarget(r,4,i),e.render(t,l),r.texture.generateMipmaps=p,e.setRenderTarget(r,5,i),e.render(t,u),e.setRenderTarget(c,h,d),e.xr.enabled=A,r.texture.needsPMREMUpdate=!0}}class ic extends tt{constructor(e=[],t=301,r,i,n,a,s,o,l,u){super(e,t,r,i,n,a,s,o,l,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ih extends tn{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1};this.texture=new ic([r,r,r,r,r,r]),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new r6(5,5,5),n=new ir({name:"CubemapFromEquirect",uniforms:r7(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:1,blending:0});n.uniforms.tEquirect.value=t;let a=new r5(i,n),s=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new iu(1,10,this).update(e,a),t.minFilter=s,a.geometry.dispose(),a.material.dispose(),this}clear(e,t=!0,r=!0,i=!0){let n=e.getRenderTarget();for(let n=0;n<6;n++)e.setRenderTarget(this,n),e.clear(t,r,i);e.setRenderTarget(n)}}class id extends t9{constructor(){super(),this.isGroup=!0,this.type="Group"}}let iA={type:"move"};class ip{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new id,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new id,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new e$,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new e$),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new id,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new e$,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new e$),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,r){let i=null,n=null,a=null,s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let i of(a=!0,e.hand.values())){let e=t.getJointPose(i,r),n=this._getHandJoint(l,i);null!==e&&(n.matrix.fromArray(e.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,n.jointRadius=e.radius),n.visible=null!==e}let i=l.joints["index-finger-tip"],n=l.joints["thumb-tip"],s=i.position.distanceTo(n.position);l.inputState.pinching&&s>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(n=t.getPose(e.gripSpace,r))&&(o.matrix.fromArray(n.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,n.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(n.linearVelocity)):o.hasLinearVelocity=!1,n.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(n.angularVelocity)):o.hasAngularVelocity=!1);null!==s&&(null===(i=t.getPose(e.targetRaySpace,r))&&null!==n&&(i=n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(iA)))}return null!==s&&(s.visible=null!==i),null!==o&&(o.visible=null!==n),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let r=new id;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class im{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ry(e),this.density=t}clone(){return new im(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class ig{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new ry(e),this.near=t,this.far=r}clone(){return new ig(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class iy extends t9{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new tW,this.environmentIntensity=1,this.environmentRotation=new tW,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class iv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRanges=[],this.version=0,this.uuid=ez()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,n=this.stride;i<n;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ez()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=ez()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}let ix=new e$;class i_{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)ix.fromBufferAttribute(this,t),ix.applyMatrix4(e),this.setXYZ(t,ix.x,ix.y,ix.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ix.fromBufferAttribute(this,t),ix.applyNormalMatrix(e),this.setXYZ(t,ix.x,ix.y,ix.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ix.fromBufferAttribute(this,t),ix.transformDirection(e),this.setXYZ(t,ix.x,ix.y,ix.z);return this}getComponent(e,t){let r=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(r=eH(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=ej(r,this.array)),this.data.array[e*this.data.stride+this.offset+t]=r,this}setX(e,t){return this.normalized&&(t=ej(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=ej(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=ej(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=ej(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=eH(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=eH(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=eH(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=eH(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array),i=ej(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=ej(t,this.array),r=ej(r,this.array),i=ej(i,this.array),n=ej(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=n,this}clone(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new i_(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized);{eP("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[r+t])}return new rN(new this.array.constructor(e),this.itemSize,this.normalized)}}toJSON(e){if(void 0!==e)return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized};{eP("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let e=[];for(let t=0;t<this.count;t++){let r=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[r+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}}}class ib extends r_{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ry(0xffffff),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let iS=new e$,iT=new e$,iw=new e$,iM=new eX,iE=new eX,iC=new tF,iR=new e$,iN=new e$,iP=new e$,iI=new eX,iL=new eX,iD=new eX;class iB extends t9{constructor(e=new ib){if(super(),this.isSprite=!0,this.type="Sprite",void 0===r){r=new rX;const e=new iv(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);r.setIndex([0,1,2,0,2,3]),r.setAttribute("position",new i_(e,3,0,!1)),r.setAttribute("uv",new i_(e,2,3,!1))}this.geometry=r,this.material=e,this.center=new eX(.5,.5),this.count=1}raycast(e,t){let r,i;null===e.camera&&eL('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),iT.setFromMatrixScale(this.matrixWorld),iC.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),iw.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&iT.multiplyScalar(-iw.z);let n=this.material.rotation;0!==n&&(i=Math.cos(n),r=Math.sin(n));let a=this.center;iF(iR.set(-.5,-.5,0),iw,a,iT,r,i),iF(iN.set(.5,-.5,0),iw,a,iT,r,i),iF(iP.set(.5,.5,0),iw,a,iT,r,i),iI.set(0,0),iL.set(1,0),iD.set(1,1);let s=e.ray.intersectTriangle(iR,iN,iP,!1,iS);if(null===s&&(iF(iN.set(-.5,.5,0),iw,a,iT,r,i),iL.set(0,1),null===(s=e.ray.intersectTriangle(iR,iP,iN,!1,iS))))return;let o=e.ray.origin.distanceTo(iS);o<e.near||o>e.far||t.push({distance:o,point:iS.clone(),uv:rA.getInterpolation(iS,iR,iN,iP,iI,iL,iD,new eX),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function iF(e,t,r,i,n,a){iM.subVectors(e,r).addScalar(.5).multiply(i),void 0!==n?(iE.x=a*iM.x-n*iM.y,iE.y=n*iM.x+a*iM.y):iE.copy(iM),e.copy(t),e.x+=iE.x,e.y+=iE.y,e.applyMatrix4(iC)}let iO=new e$,iU=new e$;class ik extends t9{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);let t=e.levels;for(let e=0,r=t.length;e<r;e++){let r=t[e];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){let i;t=Math.abs(t);let n=this.levels;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}removeLevel(e){let t=this.levels;for(let r=0;r<t.length;r++)if(t[r].distance===e){let e=t.splice(r,1);return this.remove(e[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){let t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let i=t[r].distance;if(t[r].object.visible&&(i-=i*t[r].hysteresis),e<i)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){iO.setFromMatrixPosition(this.matrixWorld);let r=e.ray.origin.distanceTo(iO);this.getObjectForDistance(r).raycast(e,t)}}update(e){let t=this.levels;if(t.length>1){let r,i;iO.setFromMatrixPosition(e.matrixWorld),iU.setFromMatrixPosition(this.matrixWorld);let n=iO.distanceTo(iU)/e.zoom;for(r=1,t[0].object.visible=!0,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),n>=e)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){let t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];let r=this.levels;for(let e=0,i=r.length;e<i;e++){let i=r[e];t.object.levels.push({object:i.object.uuid,distance:i.distance,hysteresis:i.hysteresis})}return t}}let iz=new e$,iV=new tr,iq=new tr,iG=new e$,iH=new tF,ij=new e$,iW=new tE,iX=new tF,iQ=new tB;class i$ extends r5{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ed,this.bindMatrix=new tF,this.bindMatrixInverse=new tF,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){let e=this.geometry;null===this.boundingBox&&(this.boundingBox=new tu),this.boundingBox.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,ij),this.boundingBox.expandByPoint(ij)}computeBoundingSphere(){let e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new tE),this.boundingSphere.makeEmpty();let t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,ij),this.boundingSphere.expandByPoint(ij)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){let r=this.material,i=this.matrixWorld;void 0===r||(null===this.boundingSphere&&this.computeBoundingSphere(),iW.copy(this.boundingSphere),iW.applyMatrix4(i),!1===e.ray.intersectsSphere(iW)||(iX.copy(i).invert(),iQ.copy(e.ray).applyMatrix4(iX),(null===this.boundingBox||!1!==iQ.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,iQ)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){let e=new tr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);let i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ed?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===eA?this.bindMatrixInverse.copy(this.bindMatrix).invert():eI("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){let r=this.skeleton,i=this.geometry;iV.fromBufferAttribute(i.attributes.skinIndex,e),iq.fromBufferAttribute(i.attributes.skinWeight,e),iz.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){let i=iq.getComponent(e);if(0!==i){let n=iV.getComponent(e);iH.multiplyMatrices(r.bones[n].matrixWorld,r.boneInverses[n]),t.addScaledVector(iG.copy(iz).applyMatrix4(iH),i)}}return t.applyMatrix4(this.bindMatrixInverse)}}class iY extends t9{constructor(){super(),this.isBone=!0,this.type="Bone"}}class iK extends tt{constructor(e=null,t=1,r=1,i,n,a,s,o,l=1003,u=1003,c,h){super(null,a,s,o,l,u,i,n,c,h),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}let iZ=new tF,iJ=new tF;class i0{constructor(e=[],t=[]){this.uuid=ez(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){let e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){eI("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new tF)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){let t=new tF;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){let t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){let e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let i=0,n=e.length;i<n;i++){let n=e[i]?e[i].matrixWorld:iJ;iZ.multiplyMatrices(n,t[i]),iZ.toArray(r,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new i0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length),t=new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4);t.set(this.boneMatrices);let r=new iK(t,e,e,1023,1015);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){let r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){let i=e.bones[r],n=t[i];void 0===n&&(eI("Skeleton: No bone found with UUID:",i),n=new iY),this.bones.push(n),this.boneInverses.push(new tF().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){let e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;let t=this.bones,r=this.boneInverses;for(let i=0,n=t.length;i<n;i++){let n=t[i];e.bones.push(n.uuid);let a=r[i];e.boneInverses.push(a.toArray())}return e}}class i1 extends rN{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){let e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}let i2=new tF,i3=new tF,i4=[],i5=new tu,i8=new tF,i6=new r5,i7=new tE;class i9 extends r5{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new i1(new Float32Array(16*r),16),this.instanceColor=null,this.morphTexture=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<r;e++)this.setMatrixAt(e,i8)}computeBoundingBox(){let e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new tu),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,i2),i5.copy(e.boundingBox).applyMatrix4(i2),this.boundingBox.union(i5)}computeBoundingSphere(){let e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new tE),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,i2),i7.copy(e.boundingSphere).applyMatrix4(i2),this.boundingSphere.union(i7)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){let r=t.morphTargetInfluences,i=this.morphTexture.source.data.data,n=e*(r.length+1)+1;for(let e=0;e<r.length;e++)r[e]=i[n+e]}raycast(e,t){let r=this.matrixWorld,i=this.count;if((i6.geometry=this.geometry,i6.material=this.material,void 0!==i6.material)&&(null===this.boundingSphere&&this.computeBoundingSphere(),i7.copy(this.boundingSphere),i7.applyMatrix4(r),!1!==e.ray.intersectsSphere(i7)))for(let n=0;n<i;n++){this.getMatrixAt(n,i2),i3.multiplyMatrices(r,i2),i6.matrixWorld=i3,i6.raycast(e,i4);for(let e=0,r=i4.length;e<r;e++){let r=i4[e];r.instanceId=n,r.object=this,t.push(r)}i4.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new i1(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){let r=t.morphTargetInfluences,i=r.length+1;null===this.morphTexture&&(this.morphTexture=new iK(new Float32Array(i*this.count),i,this.count,1028,1015));let n=this.morphTexture.source.data.data,a=0;for(let e=0;e<r.length;e++)a+=r[e];let s=this.geometry.morphTargetsRelative?1:1-a,o=i*e;n[o]=s,n.set(r,o+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null)}}let ne=new e$,nt=new e$,nr=new eZ;class ni{constructor(e=new e$(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){let i=ne.subVectors(r,t).cross(nt.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let r=e.delta(ne),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let n=-(e.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:t.copy(e.start).addScaledVector(r,n)}intersectsLine(e){let t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let r=t||nr.getNormalMatrix(e),i=this.coplanarPoint(ne).applyMatrix4(e),n=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let nn=new tE,na=new eX(.5,.5),ns=new e$;class no{constructor(e=new ni,t=new ni,r=new ni,i=new ni,n=new ni,a=new ni){this.planes=[e,t,r,i,n,a]}set(e,t,r,i,n,a){let s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(r),s[3].copy(i),s[4].copy(n),s[5].copy(a),this}copy(e){let t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=2e3,r=!1){let i=this.planes,n=e.elements,a=n[0],s=n[1],o=n[2],l=n[3],u=n[4],c=n[5],h=n[6],d=n[7],A=n[8],p=n[9],f=n[10],m=n[11],g=n[12],y=n[13],v=n[14],x=n[15];if(i[0].setComponents(l-a,d-u,m-A,x-g).normalize(),i[1].setComponents(l+a,d+u,m+A,x+g).normalize(),i[2].setComponents(l+s,d+c,m+p,x+y).normalize(),i[3].setComponents(l-s,d-c,m-p,x-y).normalize(),r)i[4].setComponents(o,h,f,v).normalize(),i[5].setComponents(l-o,d-h,m-f,x-v).normalize();else if(i[4].setComponents(l-o,d-h,m-f,x-v).normalize(),2e3===t)i[5].setComponents(l+o,d+h,m+f,x+v).normalize();else if(2001===t)i[5].setComponents(o,h,f,v).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),nn.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),nn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nn)}intersectsSprite(e){return nn.center.set(0,0,0),nn.radius=.7071067811865476+na.distanceTo(e.center),nn.applyMatrix4(e.matrixWorld),this.intersectsSphere(nn)}intersectsSphere(e){let t=this.planes,r=e.center,i=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){let t=this.planes;for(let r=0;r<6;r++){let i=t[r];if(ns.x=i.normal.x>0?e.max.x:e.min.x,ns.y=i.normal.y>0?e.max.y:e.min.y,ns.z=i.normal.z>0?e.max.z:e.min.z,0>i.distanceToPoint(ns))return!1}return!0}containsPoint(e){let t=this.planes;for(let r=0;r<6;r++)if(0>t[r].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}let nl=new tF,nu=new no;class nc{constructor(){this.coordinateSystem=2e3}intersectsObject(e,t){if(!t.isArrayCamera||0===t.cameras.length)return!1;for(let r=0;r<t.cameras.length;r++){let i=t.cameras[r];if(nl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),nu.setFromProjectionMatrix(nl,i.coordinateSystem,i.reversedDepth),nu.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let r=0;r<t.cameras.length;r++){let i=t.cameras[r];if(nl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),nu.setFromProjectionMatrix(nl,i.coordinateSystem,i.reversedDepth),nu.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let r=0;r<t.cameras.length;r++){let i=t.cameras[r];if(nl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),nu.setFromProjectionMatrix(nl,i.coordinateSystem,i.reversedDepth),nu.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let r=0;r<t.cameras.length;r++){let i=t.cameras[r];if(nl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),nu.setFromProjectionMatrix(nl,i.coordinateSystem,i.reversedDepth),nu.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||0===t.cameras.length)return!1;for(let r=0;r<t.cameras.length;r++){let i=t.cameras[r];if(nl.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),nu.setFromProjectionMatrix(nl,i.coordinateSystem,i.reversedDepth),nu.containsPoint(e))return!0}return!1}clone(){return new nc}}function nh(e,t){return e-t}function nd(e,t){return e.z-t.z}function nA(e,t){return t.z-e.z}let np=new tF,nf=new ry(1,1,1),nm=new no,ng=new nc,ny=new tu,nv=new tE,nx=new e$,n_=new e$,nb=new e$,nS=new class{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,r,i){let n=this.pool,a=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1,index:-1});let s=n[this.index];a.push(s),this.index++,s.start=e,s.count=t,s.z=r,s.index=i}reset(){this.list.length=0,this.index=0}},nT=new r5,nw=[];function nM(e,t){if(e.constructor!==t.constructor){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++)t[i]=e[i]}else{let r=Math.min(e.length,t.length);t.set(new e.constructor(e.buffer,0,r))}}class nE extends r5{constructor(e,t,r=2*t,i){super(new rX,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=r,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount),t=new iK(new Float32Array((e=Math.max(e=4*Math.ceil(e/4),4))*e*4),e,e,1023,1015);this._matricesTexture=t}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new iK(new Uint32Array((e=Math.ceil(e))*e),e,e,1029,1014);this._indirectTexture=t}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount),t=new iK(new Float32Array((e=Math.ceil(e))*e*4).fill(1),e,e,1023,1015);t.colorSpace=e2.workingColorSpace,this._colorsTexture=t}_initializeGeometry(e){let t=this.geometry,r=this._maxVertexCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(let i in e.attributes){let{array:n,itemSize:a,normalized:s}=e.getAttribute(i),o=new rN(new n.constructor(r*a),a,s);t.setAttribute(i,o)}if(null!==e.getIndex()){let e=r>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new rN(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){let t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(let r in t.attributes){if(!e.hasAttribute(r))throw Error(`THREE.BatchedMesh: Added geometry missing "${r}". All geometries must have consistent attributes.`);let i=e.getAttribute(r),n=t.getAttribute(r);if(i.itemSize!==n.itemSize||i.normalized!==n.normalized)throw Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){let t=this._instanceInfo;if(e<0||e>=t.length||!1===t[e].active)throw Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){let t=this._geometryInfo;if(e<0||e>=t.length||!1===t[e].active)throw Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tu);let e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(!1===t[r].active)continue;let i=t[r].geometryIndex;this.getMatrixAt(r,np),this.getBoundingBoxAt(i,ny).applyMatrix4(np),e.union(ny)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new tE);let e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let r=0,i=t.length;r<i;r++){if(!1===t[r].active)continue;let i=t[r].geometryIndex;this.getMatrixAt(r,np),this.getBoundingSphereAt(i,nv).applyMatrix4(np),e.union(nv)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&0===this._availableInstanceIds.length)throw Error("THREE.BatchedMesh: Maximum item count reached.");let t={visible:!0,active:!0,geometryIndex:e},r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(nh),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=t):(r=this._instanceInfo.length,this._instanceInfo.push(t));let i=this._matricesTexture;np.identity().toArray(i.image.data,16*r),i.needsUpdate=!0;let n=this._colorsTexture;return n&&(nf.toArray(n.image.data,4*r),n.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,r=-1){let i;this._initializeGeometry(e),this._validateGeometry(e);let n={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},a=this._geometryInfo;n.vertexStart=this._nextVertexStart,n.reservedVertexCount=-1===t?e.getAttribute("position").count:t;let s=e.getIndex();if(null!==s&&(n.indexStart=this._nextIndexStart,n.reservedIndexCount=-1===r?s.count:r),-1!==n.indexStart&&n.indexStart+n.reservedIndexCount>this._maxIndexCount||n.vertexStart+n.reservedVertexCount>this._maxVertexCount)throw Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(nh),a[i=this._availableGeometryIds.shift()]=n):(i=this._geometryCount,this._geometryCount++,a.push(n)),this.setGeometryAt(i,e),this._nextIndexStart=n.indexStart+n.reservedIndexCount,this._nextVertexStart=n.vertexStart+n.reservedVertexCount,i}setGeometryAt(e,t){if(e>=this._geometryCount)throw Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);let r=this.geometry,i=null!==r.getIndex(),n=r.getIndex(),a=t.getIndex(),s=this._geometryInfo[e];if(i&&a.count>s.reservedIndexCount||t.attributes.position.count>s.reservedVertexCount)throw Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");let o=s.vertexStart,l=s.reservedVertexCount;for(let e in s.vertexCount=t.getAttribute("position").count,r.attributes){let i=t.getAttribute(e),n=r.getAttribute(e);!function(e,t,r=0){let i=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){let n=e.count;for(let a=0;a<n;a++)for(let n=0;n<i;n++)t.setComponent(a+r,n,e.getComponent(a,n))}else t.array.set(e.array,r*i);t.needsUpdate=!0}(i,n,o);let a=i.itemSize;for(let e=i.count;e<l;e++){let t=o+e;for(let e=0;e<a;e++)n.setComponent(t,e,0)}n.needsUpdate=!0,n.addUpdateRange(o*a,l*a)}if(i){let e=s.indexStart,r=s.reservedIndexCount;s.indexCount=t.getIndex().count;for(let t=0;t<a.count;t++)n.setX(e+t,o+a.getX(t));for(let t=a.count;t<r;t++)n.setX(e+t,o);n.needsUpdate=!0,n.addUpdateRange(e,s.reservedIndexCount)}return s.start=i?s.indexStart:s.vertexStart,s.count=i?s.indexCount:s.vertexCount,s.boundingBox=null,null!==t.boundingBox&&(s.boundingBox=t.boundingBox.clone()),s.boundingSphere=null,null!==t.boundingSphere&&(s.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){let t=this._geometryInfo;if(e>=t.length||!1===t[e].active)return this;let r=this._instanceInfo;for(let t=0,i=r.length;t<i;t++)r[t].active&&r[t].geometryIndex===e&&this.deleteInstance(t);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0,r=this._geometryInfo,i=r.map((e,t)=>t).sort((e,t)=>r[e].vertexStart-r[t].vertexStart),n=this.geometry;for(let a=0,s=r.length;a<s;a++){let s=r[i[a]];if(!1!==s.active){if(null!==n.index){if(s.indexStart!==t){let{indexStart:r,vertexStart:i,reservedIndexCount:a}=s,o=n.index,l=o.array,u=e-i;for(let e=r;e<r+a;e++)l[e]=l[e]+u;o.array.copyWithin(t,r,r+a),o.addUpdateRange(t,a),s.indexStart=t}t+=s.reservedIndexCount}if(s.vertexStart!==e){let{vertexStart:t,reservedVertexCount:r}=s,i=n.attributes;for(let n in i){let a=i[n],{array:s,itemSize:o}=a;s.copyWithin(e*o,t*o,(t+r)*o),a.addUpdateRange(e*o,r*o)}s.vertexStart=e}e+=s.reservedVertexCount,s.start=n.index?s.indexStart:s.vertexStart,this._nextIndexStart=n.index?s.indexStart+s.reservedIndexCount:0,this._nextVertexStart=s.vertexStart+s.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;let r=this.geometry,i=this._geometryInfo[e];if(null===i.boundingBox){let e=new tu,t=r.index,n=r.attributes.position;for(let r=i.start,a=i.start+i.count;r<a;r++){let i=r;t&&(i=t.getX(i)),e.expandByPoint(nx.fromBufferAttribute(n,i))}i.boundingBox=e}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;let r=this.geometry,i=this._geometryInfo[e];if(null===i.boundingSphere){let t=new tE;this.getBoundingBoxAt(e,ny),ny.getCenter(t.center);let n=r.index,a=r.attributes.position,s=0;for(let e=i.start,r=i.start+i.count;e<r;e++){let r=e;n&&(r=n.getX(r)),nx.fromBufferAttribute(a,r),s=Math.max(s,t.center.distanceToSquared(nx))}t.radius=Math.sqrt(s),i.boundingSphere=t}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);let r=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,16*e),r.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,16*e)}setColorAt(e,t){return this.validateInstanceId(e),null===this._colorsTexture&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,4*e),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,4*e)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t||(this._instanceInfo[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);let r=this._geometryInfo[e];return t.vertexStart=r.vertexStart,t.vertexCount=r.vertexCount,t.reservedVertexCount=r.reservedVertexCount,t.indexStart=r.indexStart,t.indexCount=r.indexCount,t.reservedIndexCount=r.reservedIndexCount,t.start=r.start,t.count=r.count,t}setInstanceCount(e){let t=this._availableInstanceIds,r=this._instanceInfo;for(t.sort(nh);t[t.length-1]===r.length-1;)r.pop(),t.pop();if(e<r.length)throw Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);let i=new Int32Array(e),n=new Int32Array(e);nM(this._multiDrawCounts,i),nM(this._multiDrawStarts,n),this._multiDrawCounts=i,this._multiDrawStarts=n,this._maxInstanceCount=e;let a=this._indirectTexture,s=this._matricesTexture,o=this._colorsTexture;a.dispose(),this._initIndirectTexture(),nM(a.image.data,this._indirectTexture.image.data),s.dispose(),this._initMatricesTexture(),nM(s.image.data,this._matricesTexture.image.data),o&&(o.dispose(),this._initColorsTexture(),nM(o.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){let r=[...this._geometryInfo].filter(e=>e.active);if(Math.max(...r.map(e=>e.vertexStart+e.reservedVertexCount))>e)throw Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...r.map(e=>e.indexStart+e.reservedIndexCount))>t)throw Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);let i=this.geometry;i.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new rX,this._initializeGeometry(i));let n=this.geometry;for(let e in i.index&&nM(i.index.array,n.index.array),i.attributes)nM(i.attributes[e].array,n.attributes[e].array)}raycast(e,t){let r=this._instanceInfo,i=this._geometryInfo,n=this.matrixWorld,a=this.geometry;nT.material=this.material,nT.geometry.index=a.index,nT.geometry.attributes=a.attributes,null===nT.geometry.boundingBox&&(nT.geometry.boundingBox=new tu),null===nT.geometry.boundingSphere&&(nT.geometry.boundingSphere=new tE);for(let a=0,s=r.length;a<s;a++){if(!r[a].visible||!r[a].active)continue;let s=r[a].geometryIndex,o=i[s];nT.geometry.setDrawRange(o.start,o.count),this.getMatrixAt(a,nT.matrixWorld).premultiply(n),this.getBoundingBoxAt(s,nT.geometry.boundingBox),this.getBoundingSphereAt(s,nT.geometry.boundingSphere),nT.raycast(e,nw);for(let e=0,r=nw.length;e<r;e++){let r=nw[e];r.object=this,r.batchId=a,t.push(r)}nw.length=0}nT.material=null,nT.geometry.index=null,nT.geometry.attributes={},nT.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(e=>({...e,boundingBox:null!==e.boundingBox?e.boundingBox.clone():null,boundingSphere:null!==e.boundingSphere?e.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(e=>({...e})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,r,i,n){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;let a=i.getIndex(),s=null===a?1:a.array.BYTES_PER_ELEMENT,o=this._instanceInfo,l=this._multiDrawStarts,u=this._multiDrawCounts,c=this._geometryInfo,h=this.perObjectFrustumCulled,d=this._indirectTexture,A=d.image.data,p=r.isArrayCamera?ng:nm;h&&!r.isArrayCamera&&(np.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse).multiply(this.matrixWorld),nm.setFromProjectionMatrix(np,r.coordinateSystem,r.reversedDepth));let f=0;if(this.sortObjects){np.copy(this.matrixWorld).invert(),nx.setFromMatrixPosition(r.matrixWorld).applyMatrix4(np),n_.set(0,0,-1).transformDirection(r.matrixWorld).transformDirection(np);for(let e=0,t=o.length;e<t;e++)if(o[e].visible&&o[e].active){let t=o[e].geometryIndex;this.getMatrixAt(e,np),this.getBoundingSphereAt(t,nv).applyMatrix4(np);let i=!1;if(h&&(i=!p.intersectsSphere(nv,r)),!i){let r=c[t],i=nb.subVectors(nv.center,nx).dot(n_);nS.push(r.start,r.count,i,e)}}let e=nS.list,t=this.customSort;null===t?e.sort(n.transparent?nA:nd):t.call(this,e,r);for(let t=0,r=e.length;t<r;t++){let r=e[t];l[f]=r.start*s,u[f]=r.count,A[f]=r.index,f++}nS.reset()}else for(let e=0,t=o.length;e<t;e++)if(o[e].visible&&o[e].active){let t=o[e].geometryIndex,i=!1;if(h&&(this.getMatrixAt(e,np),this.getBoundingSphereAt(t,nv).applyMatrix4(np),i=!p.intersectsSphere(nv,r)),!i){let r=c[t];l[f]=r.start*s,u[f]=r.count,A[f]=e,f++}}d.needsUpdate=!0,this._multiDrawCount=f,this._visibilityChanged=!1}onBeforeShadow(e,t,r,i,n,a){this.onBeforeRender(e,null,i,n,a)}}class nC extends r_{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ry(0xffffff),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}let nR=new e$,nN=new e$,nP=new tF,nI=new tB,nL=new tE,nD=new e$,nB=new e$;class nF extends t9{constructor(e=new rX,t=new nC){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,r=[0];for(let e=1,i=t.count;e<i;e++)nR.fromBufferAttribute(t,e-1),nN.fromBufferAttribute(t,e),r[e]=r[e-1],r[e]+=nR.distanceTo(nN);e.setAttribute("lineDistance",new rk(r,1))}else eI("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Line.threshold,a=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),nL.copy(r.boundingSphere),nL.applyMatrix4(i),nL.radius+=n,!1===e.ray.intersectsSphere(nL))return;nP.copy(i).invert(),nI.copy(e.ray).applyMatrix4(nP);let s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=this.isLineSegments?2:1,u=r.index,c=r.attributes.position;if(null!==u){let r=Math.max(0,a.start),i=Math.min(u.count,a.start+a.count);for(let n=r,a=i-1;n<a;n+=l){let r=nO(this,e,nI,o,u.getX(n),u.getX(n+1),n);r&&t.push(r)}if(this.isLineLoop){let n=nO(this,e,nI,o,u.getX(i-1),u.getX(r),i-1);n&&t.push(n)}}else{let r=Math.max(0,a.start),i=Math.min(c.count,a.start+a.count);for(let n=r,a=i-1;n<a;n+=l){let r=nO(this,e,nI,o,n,n+1,n);r&&t.push(r)}if(this.isLineLoop){let n=nO(this,e,nI,o,i-1,r,i-1);n&&t.push(n)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=r.length;e<t;e++){let t=r[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function nO(e,t,r,i,n,a,s){let o=e.geometry.attributes.position;if(nR.fromBufferAttribute(o,n),nN.fromBufferAttribute(o,a),r.distanceSqToSegment(nR,nN,nD,nB)>i)return;nD.applyMatrix4(e.matrixWorld);let l=t.ray.origin.distanceTo(nD);if(!(l<t.near)&&!(l>t.far))return{distance:l,point:nB.clone().applyMatrix4(e.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:e}}let nU=new e$,nk=new e$;class nz extends nF{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(null===e.index){let t=e.attributes.position,r=[];for(let e=0,i=t.count;e<i;e+=2)nU.fromBufferAttribute(t,e),nk.fromBufferAttribute(t,e+1),r[e]=0===e?0:r[e-1],r[e+1]=r[e]+nU.distanceTo(nk);e.setAttribute("lineDistance",new rk(r,1))}else eI("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class nV extends nF{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class nq extends r_{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ry(0xffffff),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let nG=new tF,nH=new tB,nj=new tE,nW=new e$;class nX extends t9{constructor(e=new rX,t=new nq){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let r=this.geometry,i=this.matrixWorld,n=e.params.Points.threshold,a=r.drawRange;if(null===r.boundingSphere&&r.computeBoundingSphere(),nj.copy(r.boundingSphere),nj.applyMatrix4(i),nj.radius+=n,!1===e.ray.intersectsSphere(nj))return;nG.copy(i).invert(),nH.copy(e.ray).applyMatrix4(nG);let s=n/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=r.index,u=r.attributes.position;if(null!==l){let r=Math.max(0,a.start),n=Math.min(l.count,a.start+a.count);for(let a=r;a<n;a++){let r=l.getX(a);nW.fromBufferAttribute(u,r),nQ(nW,r,o,i,e,t,this)}}else{let r=Math.max(0,a.start),n=Math.min(u.count,a.start+a.count);for(let a=r;a<n;a++)nW.fromBufferAttribute(u,a),nQ(nW,a,o,i,e,t,this)}}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let r=e[t[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=r.length;e<t;e++){let t=r[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function nQ(e,t,r,i,n,a,s){let o=nH.distanceSqToPoint(e);if(o<r){let r=new e$;nH.closestPointToPoint(e,r),r.applyMatrix4(i);let l=n.ray.origin.distanceTo(r);if(l<n.near||l>n.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:r,index:t,face:null,faceIndex:null,barycoord:null,object:s})}}class n$ extends tt{constructor(e,t,r,i,n=1006,a=1006,s,o,l){super(e,t,r,i,n,a,s,o,l),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const u=this;"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(function t(){u.needsUpdate=!0,u._requestVideoFrameCallbackId=e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){let e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class nY extends n${constructor(e,t,r,i,n,a,s,o){super({},e,t,r,i,n,a,s,o),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class nK extends tt{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=1003,this.minFilter=1003,this.generateMipmaps=!1,this.needsUpdate=!0}}class nZ extends tt{constructor(e,t,r,i,n,a,s,o,l,u,c,h){super(null,a,s,o,l,u,i,n,c,h),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class nJ extends nZ{constructor(e,t,r,i,n,a){super(e,t,r,n,a),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=1001,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class n0 extends nZ{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,301),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class n1 extends tt{constructor(e,t,r,i,n,a,s,o,l){super(e,t,r,i,n,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class n2 extends tt{constructor(e,t,r=1014,i,n,a,s=1003,o=1003,l,u=1026,c=1){if(1026!==u&&1027!==u)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:e,height:t,depth:c},i,n,a,s,o,u,r,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new e6(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class n3 extends tt{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class n4 extends rX{constructor(e=1,t=1,r=4,i=8,n=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:r,radialSegments:i,heightSegments:n},t=Math.max(0,t),r=Math.max(1,Math.floor(r)),i=Math.max(3,Math.floor(i));const a=[],s=[],o=[],l=[],u=t/2,c=Math.PI/2*e,h=t,d=2*c+h,A=2*r+(n=Math.max(1,Math.floor(n))),p=i+1,f=new e$,m=new e$;for(let g=0;g<=A;g++){let y=0,v=0,x=0,_=0;if(g<=r){const t=g/r,i=t*Math.PI/2;v=-u-e*Math.cos(i),x=e*Math.sin(i),_=-e*Math.cos(i),y=t*c}else if(g<=r+n){const i=(g-r)/n;v=-u+i*t,x=e,_=0,y=c+i*h}else{const t=(g-r-n)/r,i=t*Math.PI/2;v=u+e*Math.sin(i),x=e*Math.cos(i),_=e*Math.sin(i),y=c+h+t*c}const b=Math.max(0,Math.min(1,y/d));let S=0;0===g?S=.5/i:g===A&&(S=-.5/i);for(let e=0;e<=i;e++){const t=e/i,r=t*Math.PI*2,n=Math.sin(r),a=Math.cos(r);m.x=-x*a,m.y=v,m.z=x*n,s.push(m.x,m.y,m.z),f.set(-x*a,_,x*n),f.normalize(),o.push(f.x,f.y,f.z),l.push(t+S,b)}if(g>0){const e=(g-1)*p;for(let t=0;t<i;t++){const r=e+t,i=e+t+1,n=g*p+t,s=g*p+t+1;a.push(r,i,n),a.push(i,s,n)}}}this.setIndex(a),this.setAttribute("position",new rk(s,3)),this.setAttribute("normal",new rk(o,3)),this.setAttribute("uv",new rk(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n4(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class n5 extends rX{constructor(e=1,t=32,r=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const n=[],a=[],s=[],o=[],l=new e$,u=new eX;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let n=0,c=3;n<=t;n++,c+=3){const h=r+n/t*i;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),s.push(0,0,1),u.x=(a[c]/e+1)/2,u.y=(a[c+1]/e+1)/2,o.push(u.x,u.y)}for(let e=1;e<=t;e++)n.push(e,e+1,0);this.setIndex(n),this.setAttribute("position",new rk(a,3)),this.setAttribute("normal",new rk(s,3)),this.setAttribute("uv",new rk(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n5(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class n8 extends rX{constructor(e=1,t=1,r=1,i=32,n=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};const l=this;i=Math.floor(i),n=Math.floor(n);const u=[],c=[],h=[],d=[];let A=0;const p=[],f=r/2;let m=0;function g(r){let n=A,a=new eX,p=new e$,g=0,y=!0===r?e:t,v=!0===r?1:-1;for(let e=1;e<=i;e++)c.push(0,f*v,0),h.push(0,v,0),d.push(.5,.5),A++;let x=A;for(let e=0;e<=i;e++){let t=e/i*o+s,r=Math.cos(t),n=Math.sin(t);p.x=y*n,p.y=f*v,p.z=y*r,c.push(p.x,p.y,p.z),h.push(0,v,0),a.x=.5*r+.5,a.y=.5*n*v+.5,d.push(a.x,a.y),A++}for(let e=0;e<i;e++){let t=n+e,i=x+e;!0===r?u.push(i,i+1,t):u.push(i+1,i,t),g+=3}l.addGroup(m,g,!0===r?1:2),m+=g}(function(){let a=new e$,g=new e$,y=0,v=(t-e)/r;for(let l=0;l<=n;l++){let u=[],m=l/n,y=m*(t-e)+e;for(let e=0;e<=i;e++){let t=e/i,n=t*o+s,l=Math.sin(n),p=Math.cos(n);g.x=y*l,g.y=-m*r+f,g.z=y*p,c.push(g.x,g.y,g.z),a.set(l,v,p).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-m),u.push(A++)}p.push(u)}for(let r=0;r<i;r++)for(let i=0;i<n;i++){let a=p[i][r],s=p[i+1][r],o=p[i+1][r+1],l=p[i][r+1];(e>0||0!==i)&&(u.push(a,s,l),y+=3),(t>0||i!==n-1)&&(u.push(s,o,l),y+=3)}l.addGroup(m,y,0),m+=y})(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.setAttribute("position",new rk(c,3)),this.setAttribute("normal",new rk(h,3)),this.setAttribute("uv",new rk(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n8(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class n6 extends n8{constructor(e=1,t=1,r=32,i=1,n=!1,a=0,s=2*Math.PI){super(0,e,t,r,i,n,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:n,thetaStart:a,thetaLength:s}}static fromJSON(e){return new n6(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class n7 extends rX{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const n=[],a=[];function s(e){n.push(e.x,e.y,e.z)}function o(t,r){let i=3*t;r.x=e[i+0],r.y=e[i+1],r.z=e[i+2]}function l(e,t,r,i){i<0&&1===e.x&&(a[t]=e.x-1),0===r.x&&0===r.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}(function(e){let r=new e$,i=new e$,n=new e$;for(let a=0;a<t.length;a+=3)o(t[a+0],r),o(t[a+1],i),o(t[a+2],n),function(e,t,r,i){let n=i+1,a=[];for(let i=0;i<=n;i++){a[i]=[];let s=e.clone().lerp(r,i/n),o=t.clone().lerp(r,i/n),l=n-i;for(let e=0;e<=l;e++)0===e&&i===n?a[i][e]=s:a[i][e]=s.clone().lerp(o,e/l)}for(let e=0;e<n;e++)for(let t=0;t<2*(n-e)-1;t++){let r=Math.floor(t/2);t%2==0?(s(a[e][r+1]),s(a[e+1][r]),s(a[e][r])):(s(a[e][r+1]),s(a[e+1][r+1]),s(a[e+1][r]))}}(r,i,n,e)})(i),function(e){let t=new e$;for(let r=0;r<n.length;r+=3)t.x=n[r+0],t.y=n[r+1],t.z=n[r+2],t.normalize().multiplyScalar(e),n[r+0]=t.x,n[r+1]=t.y,n[r+2]=t.z}(r),function(){let e=new e$;for(let r=0;r<n.length;r+=3){var t;e.x=n[r+0],e.y=n[r+1],e.z=n[r+2];let i=u(e)/2/Math.PI+.5,s=Math.atan2(-(t=e).y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5;a.push(i,1-s)}(function(){let e=new e$,t=new e$,r=new e$,i=new e$,s=new eX,o=new eX,c=new eX;for(let h=0,d=0;h<n.length;h+=9,d+=6){e.set(n[h+0],n[h+1],n[h+2]),t.set(n[h+3],n[h+4],n[h+5]),r.set(n[h+6],n[h+7],n[h+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),c.set(a[d+4],a[d+5]),i.copy(e).add(t).add(r).divideScalar(3);let A=u(i);l(s,d+0,e,A),l(o,d+2,t,A),l(c,d+4,r,A)}})(),function(){for(let e=0;e<a.length;e+=6){let t=a[e+0],r=a[e+2],i=a[e+4],n=Math.max(t,r,i),s=Math.min(t,r,i);n>.9&&s<.1&&(t<.2&&(a[e+0]+=1),r<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new rk(n,3)),this.setAttribute("normal",new rk(n.slice(),3)),this.setAttribute("uv",new rk(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n7(e.vertices,e.indices,e.radius,e.details)}}class n9 extends n7{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new n9(e.radius,e.detail)}}let ae=new e$,at=new e$,ar=new e$,ai=new rA;class an extends rX{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const r=Math.cos(eU*t),i=e.getIndex(),n=e.getAttribute("position"),a=i?i.count:n.count,s=[0,0,0],o=["a","b","c"],l=[,,,],u={},c=[];for(let e=0;e<a;e+=3){i?(s[0]=i.getX(e),s[1]=i.getX(e+1),s[2]=i.getX(e+2)):(s[0]=e,s[1]=e+1,s[2]=e+2);const{a:t,b:a,c:h}=ai;if(t.fromBufferAttribute(n,s[0]),a.fromBufferAttribute(n,s[1]),h.fromBufferAttribute(n,s[2]),ai.getNormal(ar),l[0]=`${Math.round(1e4*t.x)},${Math.round(1e4*t.y)},${Math.round(1e4*t.z)}`,l[1]=`${Math.round(1e4*a.x)},${Math.round(1e4*a.y)},${Math.round(1e4*a.z)}`,l[2]=`${Math.round(1e4*h.x)},${Math.round(1e4*h.y)},${Math.round(1e4*h.z)}`,l[0]!==l[1]&&l[1]!==l[2]&&l[2]!==l[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=l[e],n=l[t],a=ai[o[e]],h=ai[o[t]],d=`${i}_${n}`,A=`${n}_${i}`;A in u&&u[A]?(ar.dot(u[A].normal)<=r&&(c.push(a.x,a.y,a.z),c.push(h.x,h.y,h.z)),u[A]=null):d in u||(u[d]={index0:s[e],index1:s[t],normal:ar.clone()})}}for(const e in u)if(u[e]){const{index0:t,index1:r}=u[e];ae.fromBufferAttribute(n,t),at.fromBufferAttribute(n,r),c.push(ae.x,ae.y,ae.z),c.push(at.x,at.y,at.z)}this.setAttribute("position",new rk(c,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class aa{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){eI("Curve: .getPoint() not implemented.")}getPointAt(e,t){let r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){let t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],r,i=this.getPoint(0),n=0;t.push(0);for(let a=1;a<=e;a++)t.push(n+=(r=this.getPoint(a/e)).distanceTo(i)),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){let r,i=this.getLengths(),n=0,a=i.length;r=t||e*i[a-1];let s=0,o=a-1,l;for(;s<=o;)if((l=i[n=Math.floor(s+(o-s)/2)]-r)<0)s=n+1;else if(l>0)o=n-1;else{o=n;break}if(i[n=o]===r)return n/(a-1);let u=i[n],c=i[n+1];return(n+(r-u)/(c-u))/(a-1)}getTangent(e,t){let r=e-1e-4,i=e+1e-4;r<0&&(r=0),i>1&&(i=1);let n=this.getPoint(r),a=this.getPoint(i),s=t||(n.isVector2?new eX:new e$);return s.copy(a).sub(n).normalize(),s}getTangentAt(e,t){let r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t=!1){let r=new e$,i=[],n=[],a=[],s=new e$,o=new tF;for(let t=0;t<=e;t++){let r=t/e;i[t]=this.getTangentAt(r,new e$)}n[0]=new e$,a[0]=new e$;let l=Number.MAX_VALUE,u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,r.set(1,0,0)),c<=l&&(l=c,r.set(0,1,0)),h<=l&&r.set(0,0,1),s.crossVectors(i[0],r).normalize(),n[0].crossVectors(i[0],s),a[0].crossVectors(i[0],n[0]);for(let t=1;t<=e;t++){if(n[t]=n[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(i[t-1],i[t]),s.length()>Number.EPSILON){s.normalize();let e=Math.acos(eV(i[t-1].dot(i[t]),-1,1));n[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(i[t],n[t])}if(!0===t){let t=Math.acos(eV(n[0].dot(n[e]),-1,1));t/=e,i[0].dot(s.crossVectors(n[0],n[e]))>0&&(t=-t);for(let r=1;r<=e;r++)n[r].applyMatrix4(o.makeRotationAxis(i[r],t*r)),a[r].crossVectors(i[r],n[r])}return{tangents:i,normals:n,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class as extends aa{constructor(e=0,t=0,r=1,i=1,n=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t=new eX){let r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,n=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=n?0:r),!0!==this.aClockwise||n||(i===r?i=-r:i-=r);let a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),o=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),r=s-this.aX,i=o-this.aY;s=r*e-i*t+this.aX,o=r*t+i*e+this.aY}return t.set(s,o)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class ao extends as{constructor(e,t,r,i,n,a){super(e,t,r,r,i,n,a),this.isArcCurve=!0,this.type="ArcCurve"}}function al(){let e=0,t=0,r=0,i=0;function n(n,a,s,o){e=n,t=s,r=-3*n+3*a-2*s-o,i=2*n-2*a+s+o}return{initCatmullRom:function(e,t,r,i,a){n(t,r,a*(r-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,r,i,a,s,o){let l=(t-e)/a-(r-e)/(a+s)+(r-t)/s,u=(r-t)/s-(i-t)/(s+o)+(i-r)/o;n(t,r,l*=s,u*=s)},calc:function(n){let a=n*n;return e+t*n+r*a+a*n*i}}}let au=new e$,ac=new al,ah=new al,ad=new al;class aA extends aa{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new e$){let r,i,n=this.points,a=n.length,s=(a-!this.closed)*e,o=Math.floor(s),l=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/a)+1)*a:0===l&&o===a-1&&(o=a-2,l=1),this.closed||o>0?r=n[(o-1)%a]:(au.subVectors(n[0],n[1]).add(n[0]),r=au);let u=n[o%a],c=n[(o+1)%a];if(this.closed||o+2<a?i=n[(o+2)%a]:(au.subVectors(n[a-1],n[a-2]).add(n[a-1]),i=au),"centripetal"===this.curveType||"chordal"===this.curveType){let e="chordal"===this.curveType?.5:.25,t=Math.pow(r.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(c),e),a=Math.pow(c.distanceToSquared(i),e);n<1e-4&&(n=1),t<1e-4&&(t=n),a<1e-4&&(a=n),ac.initNonuniformCatmullRom(r.x,u.x,c.x,i.x,t,n,a),ah.initNonuniformCatmullRom(r.y,u.y,c.y,i.y,t,n,a),ad.initNonuniformCatmullRom(r.z,u.z,c.z,i.z,t,n,a)}else"catmullrom"===this.curveType&&(ac.initCatmullRom(r.x,u.x,c.x,i.x,this.tension),ah.initCatmullRom(r.y,u.y,c.y,i.y,this.tension),ad.initCatmullRom(r.z,u.z,c.z,i.z,this.tension));return t.set(ac.calc(l),ah.calc(l),ad.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push(new e$().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ap(e,t,r,i,n){let a=(i-t)*.5,s=(n-r)*.5,o=e*e;return e*o*(2*r-2*i+a+s)+(-3*r+3*i-2*a-s)*o+a*e+r}function af(e,t,r,i){let n;return(n=1-e)*n*t+2*(1-e)*e*r+e*e*i}function am(e,t,r,i,n){let a,s;return(a=1-e)*a*a*t+3*(s=1-e)*s*e*r+3*(1-e)*e*e*i+e*e*e*n}class ag extends aa{constructor(e=new eX,t=new eX,r=new eX,i=new eX){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new eX){let r=this.v0,i=this.v1,n=this.v2,a=this.v3;return t.set(am(e,r.x,i.x,n.x,a.x),am(e,r.y,i.y,n.y,a.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ay extends aa{constructor(e=new e$,t=new e$,r=new e$,i=new e$){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new e$){let r=this.v0,i=this.v1,n=this.v2,a=this.v3;return t.set(am(e,r.x,i.x,n.x,a.x),am(e,r.y,i.y,n.y,a.y),am(e,r.z,i.z,n.z,a.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class av extends aa{constructor(e=new eX,t=new eX){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new eX){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new eX){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ax extends aa{constructor(e=new e$,t=new e$){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new e$){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new e$){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class a_ extends aa{constructor(e=new eX,t=new eX,r=new eX){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new eX){let r=this.v0,i=this.v1,n=this.v2;return t.set(af(e,r.x,i.x,n.x),af(e,r.y,i.y,n.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ab extends aa{constructor(e=new e$,t=new e$,r=new e$){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new e$){let r=this.v0,i=this.v1,n=this.v2;return t.set(af(e,r.x,i.x,n.x),af(e,r.y,i.y,n.y),af(e,r.z,i.z,n.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aS extends aa{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new eX){let r=this.points,i=(r.length-1)*e,n=Math.floor(i),a=i-n,s=r[0===n?n:n-1],o=r[n],l=r[n>r.length-2?r.length-1:n+1],u=r[n>r.length-3?r.length-1:n+2];return t.set(ap(a,s.x,o.x,l.x,u.x),ap(a,s.y,o.y,l.y,u.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){let r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){let r=e.points[t];this.points.push(new eX().fromArray(r))}return this}}var aT=Object.freeze({__proto__:null,ArcCurve:ao,CatmullRomCurve3:aA,CubicBezierCurve:ag,CubicBezierCurve3:ay,EllipseCurve:as,LineCurve:av,LineCurve3:ax,QuadraticBezierCurve:a_,QuadraticBezierCurve3:ab,SplineCurve:aS});class aw extends aa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){let e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){let r=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new aT[r](t,e))}return this}getPoint(e,t){let r=e*this.getLength(),i=this.getCurveLengths(),n=0;for(;n<i.length;){if(i[n]>=r){let e=i[n]-r,a=this.curves[n],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}n++}return null}getLength(){let e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let e=[],t=0;for(let r=0,i=this.curves.length;r<i;r++)e.push(t+=this.curves[r].getLength());return this.cacheLengths=e,e}getSpacedPoints(e=40){let t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){let t,r=[];for(let i=0,n=this.curves;i<n.length;i++){let a=n[i],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){let i=o[e];t&&t.equals(i)||(r.push(i),t=i)}}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){let e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){let r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){let r=e.curves[t];this.curves.push(new aT[r.type]().fromJSON(r))}return this}}class aM extends aw{constructor(e){super(),this.type="Path",this.currentPoint=new eX,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){let r=new av(this.currentPoint.clone(),new eX(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){let n=new a_(this.currentPoint.clone(),new eX(e,t),new eX(r,i));return this.curves.push(n),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,n,a){let s=new ag(this.currentPoint.clone(),new eX(e,t),new eX(r,i),new eX(n,a));return this.curves.push(s),this.currentPoint.set(n,a),this}splineThru(e){let t=new aS([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,n,a){let s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,r,i,n,a),this}absarc(e,t,r,i,n,a){return this.absellipse(e,t,r,r,i,n,a),this}ellipse(e,t,r,i,n,a,s,o){let l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,r,i,n,a,s,o),this}absellipse(e,t,r,i,n,a,s,o){let l=new as(e,t,r,i,n,a,s,o);if(this.curves.length>0){let e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);let u=l.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){let e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class aE extends aM{constructor(e){super(e),this.uuid=ez(),this.type="Shape",this.holes=[]}getPointsHoles(e){let t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){let e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){let r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){let r=e.holes[t];this.holes.push(new aM().fromJSON(r))}return this}}function aC(e,t,r,i,n){let a;if(n===function(e,t,r,i){let n=0;for(let a=t,s=r-i;a<r;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}(e,t,r,i)>0)for(let n=t;n<r;n+=i)a=aV(n/i|0,e[n],e[n+1],a);else for(let n=r-i;n>=t;n-=i)a=aV(n/i|0,e[n],e[n+1],a);return a&&aB(a,a.next)&&(aq(a),a=a.next),a}function aR(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(aB(r,r.next)||0===aD(r.prev,r,r.next))){if(aq(r),(r=t=r.prev)===r.next)break;i=!0}else r=r.next;while(i||r!==t)return t}function aN(e,t){let r=e.x-t.x;return 0===r&&0==(r=e.y-t.y)&&(r=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),r}function aP(e,t,r,i,n){return(e=((e=((e=((e=((e=(e-r)*n|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-i)*n|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function aI(e,t,r,i,n,a,s,o){return(n-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(i-o)>=(r-s)*(t-o)&&(r-s)*(a-o)>=(n-s)*(i-o)}function aL(e,t,r,i,n,a,s,o){return(e!==s||t!==o)&&aI(e,t,r,i,n,a,s,o)}function aD(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function aB(e,t){return e.x===t.x&&e.y===t.y}function aF(e,t,r,i){let n=aU(aD(e,t,r)),a=aU(aD(e,t,i)),s=aU(aD(r,i,e)),o=aU(aD(r,i,t));return!!(n!==a&&s!==o||0===n&&aO(e,r,t)||0===a&&aO(e,i,t)||0===s&&aO(r,e,i)||0===o&&aO(r,t,i))}function aO(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function aU(e){return e>0?1:e<0?-1:0}function ak(e,t){return 0>aD(e.prev,e,e.next)?aD(e,t,e.next)>=0&&aD(e,e.prev,t)>=0:0>aD(e,t,e.prev)||0>aD(e,e.next,t)}function az(e,t){let r=aG(e.i,e.x,e.y),i=aG(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function aV(e,t,r,i){let n=aG(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function aq(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function aG(e,t,r){return{i:e,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class aH{static triangulate(e,t,r=2){return function(e,t,r=2){let i,n,a,s=t&&t.length,o=s?t[0]*r:e.length,l=aC(e,0,o,r,!0),u=[];if(!l||l.next===l.prev)return u;if(s&&(l=function(e,t,r,i){let n=[];for(let r=0,a=t.length;r<a;r++){let s=t[r]*i,o=r<a-1?t[r+1]*i:e.length,l=aC(e,s,o,i,!1);l===l.next&&(l.steiner=!0),n.push(function(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e)return r}(l))}n.sort(aN);for(let e=0;e<n.length;e++)r=function(e,t){let r=function(e,t){let r,i=t,n=e.x,a=e.y,s=-1/0;if(aB(e,i))return i;do{if(aB(e,i.next))return i.next;if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){let e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=n&&e>s&&(s=e,r=i.x<i.next.x?i:i.next,e===n))return r}i=i.next}while(i!==t)if(!r)return null;let o=r,l=r.x,u=r.y,c=1/0;i=r;do{if(n>=i.x&&i.x>=l&&n!==i.x&&aI(a<u?n:s,a,l,u,a<u?s:n,a,i.x,i.y)){var h,d;let t=Math.abs(a-i.y)/(n-i.x);ak(i,e)&&(t<c||t===c&&(i.x>r.x||i.x===r.x&&(h=r,d=i,0>aD(h.prev,h,d.prev)&&0>aD(d.next,h,h.next))))&&(r=i,c=t)}i=i.next}while(i!==o)return r}(e,t);if(!r)return t;let i=az(r,e);return aR(i,i.next),aR(r,r.next)}(n[e],r);return r}(e,t,l,r)),e.length>80*r){i=e[0],n=e[1];let t=i,s=n;for(let a=r;a<o;a+=r){let r=e[a],o=e[a+1];r<i&&(i=r),o<n&&(n=o),r>t&&(t=r),o>s&&(s=o)}a=0!==(a=Math.max(t-i,s-n))?32767/a:0}return function e(t,r,i,n,a,s,o){if(!t)return;!o&&s&&function(e,t,r,i){let n=e;do 0===n.z&&(n.z=aP(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e)n.prevZ.nextZ=null,n.prevZ=null,function(e){let t,r=1;do{let i,n=e;e=null;let a=null;for(t=0;n;){t++;let s=n,o=0;for(let e=0;e<r&&(o++,s=s.nextZ);e++);let l=r;for(;o>0||l>0&&s;)0!==o&&(0===l||!s||n.z<=s.z)?(i=n,n=n.nextZ,o--):(i=s,s=s.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=s}a.nextZ=null,r*=2}while(t>1)}(n)}(t,n,a,s);let l=t;for(;t.prev!==t.next;){let u=t.prev,c=t.next;if(s?function(e,t,r,i){let n=e.prev,a=e.next;if(aD(n,e,a)>=0)return!1;let s=n.x,o=e.x,l=a.x,u=n.y,c=e.y,h=a.y,d=Math.min(s,o,l),A=Math.min(u,c,h),p=Math.max(s,o,l),f=Math.max(u,c,h),m=aP(d,A,t,r,i),g=aP(p,f,t,r,i),y=e.prevZ,v=e.nextZ;for(;y&&y.z>=m&&v&&v.z<=g;){if(y.x>=d&&y.x<=p&&y.y>=A&&y.y<=f&&y!==n&&y!==a&&aL(s,u,o,c,l,h,y.x,y.y)&&aD(y.prev,y,y.next)>=0||(y=y.prevZ,v.x>=d&&v.x<=p&&v.y>=A&&v.y<=f&&v!==n&&v!==a&&aL(s,u,o,c,l,h,v.x,v.y)&&aD(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;y&&y.z>=m;){if(y.x>=d&&y.x<=p&&y.y>=A&&y.y<=f&&y!==n&&y!==a&&aL(s,u,o,c,l,h,y.x,y.y)&&aD(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;v&&v.z<=g;){if(v.x>=d&&v.x<=p&&v.y>=A&&v.y<=f&&v!==n&&v!==a&&aL(s,u,o,c,l,h,v.x,v.y)&&aD(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}(t,n,a,s):function(e){let t=e.prev,r=e.next;if(aD(t,e,r)>=0)return!1;let i=t.x,n=e.x,a=r.x,s=t.y,o=e.y,l=r.y,u=Math.min(i,n,a),c=Math.min(s,o,l),h=Math.max(i,n,a),d=Math.max(s,o,l),A=r.next;for(;A!==t;){if(A.x>=u&&A.x<=h&&A.y>=c&&A.y<=d&&aL(i,s,n,o,a,l,A.x,A.y)&&aD(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}(t)){r.push(u.i,t.i,c.i),aq(t),t=c.next,l=c.next;continue}if((t=c)===l){o?1===o?e(t=function(e,t){let r=e;do{let i=r.prev,n=r.next.next;!aB(i,n)&&aF(i,r,r.next,n)&&ak(i,n)&&ak(n,i)&&(t.push(i.i,r.i,n.i),aq(r),aq(r.next),r=e=n),r=r.next}while(r!==e)return aR(r)}(aR(t),r),r,i,n,a,s,2):2===o&&function(t,r,i,n,a,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){var l,u;if(o.i!==t.i&&(l=o,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&aF(r,r.next,e,t))return!0;r=r.next}while(r!==e)return!1}(l,u)&&(ak(l,u)&&ak(u,l)&&function(e,t){let r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e)return i}(l,u)&&(aD(l.prev,l,u.prev)||aD(l,u.prev,u))||aB(l,u)&&aD(l.prev,l,l.next)>0&&aD(u.prev,u,u.next)>0))){let l=az(o,t);o=aR(o,o.next),l=aR(l,l.next),e(o,r,i,n,a,s,0),e(l,r,i,n,a,s,0);return}t=t.next}o=o.next}while(o!==t)}(t,r,i,n,a,s):e(aR(t),r,i,n,a,s,1);break}}}(l,u,r,i,n,a,0),u}(e,t,r)}}class aj{static area(e){let t=e.length,r=0;for(let i=t-1,n=0;n<t;i=n++)r+=e[i].x*e[n].y-e[n].x*e[i].y;return .5*r}static isClockWise(e){return 0>aj.area(e)}static triangulateShape(e,t){let r=[],i=[],n=[];aW(e),aX(r,e);let a=e.length;t.forEach(aW);for(let e=0;e<t.length;e++)i.push(a),a+=t[e].length,aX(r,t[e]);let s=aH.triangulate(r,i);for(let e=0;e<s.length;e+=3)n.push(s.slice(e,e+3));return n}}function aW(e){let t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function aX(e,t){for(let r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}class aQ extends rX{constructor(e=new aE([new eX(.5,.5),new eX(-.5,.5),new eX(-.5,-.5),new eX(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],n=[];for(let a=0,s=e.length;a<s;a++)!function(e){let a,s,o,l,u,c=[],h=void 0!==t.curveSegments?t.curveSegments:12,d=void 0!==t.steps?t.steps:1,A=void 0!==t.depth?t.depth:1,p=void 0===t.bevelEnabled||t.bevelEnabled,f=void 0!==t.bevelThickness?t.bevelThickness:.2,m=void 0!==t.bevelSize?t.bevelSize:f-.1,g=void 0!==t.bevelOffset?t.bevelOffset:0,y=void 0!==t.bevelSegments?t.bevelSegments:3,v=t.extrudePath,x=void 0!==t.UVGenerator?t.UVGenerator:a$,_,b=!1;v&&(_=v.getSpacedPoints(d),b=!0,p=!1,a=v.computeFrenetFrames(d,!1),s=new e$,o=new e$,l=new e$),p||(y=0,f=0,m=0,g=0);let S=e.extractPoints(h),T=S.shape,w=S.holes;if(!aj.isClockWise(T)){T=T.reverse();for(let e=0,t=w.length;e<t;e++){let t=w[e];aj.isClockWise(t)&&(w[e]=t.reverse())}}function M(e){let t=1e-10*1e-10,r=e[0];for(let i=1;i<=e.length;i++){let n=i%e.length,a=e[n],s=a.x-r.x,o=a.y-r.y,l=s*s+o*o,u=Math.max(Math.abs(a.x),Math.abs(a.y),Math.abs(r.x),Math.abs(r.y));if(l<=t*u*u){e.splice(n,1),i--;continue}r=a}}M(T),w.forEach(M);let E=w.length,C=T;for(let e=0;e<E;e++){let t=w[e];T=T.concat(t)}function R(e,t,r){return t||eL("ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,r)}let N=T.length;function P(e,t,r){let i,n,a,s=e.x-t.x,o=e.y-t.y,l=r.x-e.x,u=r.y-e.y,c=s*s+o*o;if(Math.abs(s*u-o*l)>Number.EPSILON){let h=Math.sqrt(c),d=Math.sqrt(l*l+u*u),A=t.x-o/h,p=t.y+s/h,f=((r.x-u/d-A)*u-(r.y+l/d-p)*l)/(s*u-o*l),m=(i=A+s*f-e.x)*i+(n=p+o*f-e.y)*n;if(m<=2)return new eX(i,n);a=Math.sqrt(m/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(u)&&(e=!0),e?(i=-o,n=s,a=Math.sqrt(c)):(i=s,n=o,a=Math.sqrt(c/2))}return new eX(i/a,n/a)}let I=[];for(let e=0,t=C.length,r=t-1,i=e+1;e<t;e++,r++,i++)r===t&&(r=0),i===t&&(i=0),I[e]=P(C[e],C[r],C[i]);let L=[],D,B=I.concat();for(let e=0;e<E;e++){let t=w[e];D=[];for(let e=0,r=t.length,i=r-1,n=e+1;e<r;e++,i++,n++)i===r&&(i=0),n===r&&(n=0),D[e]=P(t[e],t[i],t[n]);L.push(D),B=B.concat(D)}if(0===y)u=aj.triangulateShape(C,w);else{let e=[],t=[];for(let r=0;r<y;r++){let i=r/y,n=f*Math.cos(i*Math.PI/2),a=m*Math.sin(i*Math.PI/2)+g;for(let t=0,r=C.length;t<r;t++){let r=R(C[t],I[t],a);k(r.x,r.y,-n),0===i&&e.push(r)}for(let e=0;e<E;e++){let r=w[e];D=L[e];let s=[];for(let e=0,t=r.length;e<t;e++){let t=R(r[e],D[e],a);k(t.x,t.y,-n),0===i&&s.push(t)}0===i&&t.push(s)}}u=aj.triangulateShape(e,t)}let F=u.length,O=m+g;for(let e=0;e<N;e++){let t=p?R(T[e],B[e],O):T[e];b?(o.copy(a.normals[0]).multiplyScalar(t.x),s.copy(a.binormals[0]).multiplyScalar(t.y),l.copy(_[0]).add(o).add(s),k(l.x,l.y,l.z)):k(t.x,t.y,0)}for(let e=1;e<=d;e++)for(let t=0;t<N;t++){let r=p?R(T[t],B[t],O):T[t];b?(o.copy(a.normals[e]).multiplyScalar(r.x),s.copy(a.binormals[e]).multiplyScalar(r.y),l.copy(_[e]).add(o).add(s),k(l.x,l.y,l.z)):k(r.x,r.y,A/d*e)}for(let e=y-1;e>=0;e--){let t=e/y,r=f*Math.cos(t*Math.PI/2),i=m*Math.sin(t*Math.PI/2)+g;for(let e=0,t=C.length;e<t;e++){let t=R(C[e],I[e],i);k(t.x,t.y,A+r)}for(let e=0,t=w.length;e<t;e++){let t=w[e];D=L[e];for(let e=0,n=t.length;e<n;e++){let n=R(t[e],D[e],i);b?k(n.x,n.y+_[d-1].y,_[d-1].x+r):k(n.x,n.y,A+r)}}}function U(e,t){let n=e.length;for(;--n>=0;){let a=n,s=n-1;s<0&&(s=e.length-1);for(let e=0,n=d+2*y;e<n;e++){let n=N*e,o=N*(e+1);!function(e,t,n,a){V(e),V(t),V(a),V(t),V(n),V(a);let s=i.length/3,o=x.generateSideWallUV(r,i,s-6,s-3,s-2,s-1);q(o[0]),q(o[1]),q(o[3]),q(o[1]),q(o[2]),q(o[3])}(t+a+n,t+s+n,t+s+o,t+a+o)}}}function k(e,t,r){c.push(e),c.push(t),c.push(r)}function z(e,t,n){V(e),V(t),V(n);let a=i.length/3,s=x.generateTopUV(r,i,a-3,a-2,a-1);q(s[0]),q(s[1]),q(s[2])}function V(e){i.push(c[3*e+0]),i.push(c[3*e+1]),i.push(c[3*e+2])}function q(e){n.push(e.x),n.push(e.y)}(function(){let e=i.length/3;if(p){let e=0*N;for(let t=0;t<F;t++){let r=u[t];z(r[2]+e,r[1]+e,r[0]+e)}e=N*(d+2*y);for(let t=0;t<F;t++){let r=u[t];z(r[0]+e,r[1]+e,r[2]+e)}}else{for(let e=0;e<F;e++){let t=u[e];z(t[2],t[1],t[0])}for(let e=0;e<F;e++){let t=u[e];z(t[0]+N*d,t[1]+N*d,t[2]+N*d)}}r.addGroup(e,i.length/3-e,0)})(),function(){let e=i.length/3,t=0;U(C,0),t+=C.length;for(let e=0,r=w.length;e<r;e++){let r=w[e];U(r,t),t+=r.length}r.addGroup(e,i.length/3-e,1)}()}(e[a]);this.setAttribute("position",new rk(i,3)),this.setAttribute("uv",new rk(n,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t,r){if(r.shapes=[],Array.isArray(e))for(let t=0,i=e.length;t<i;t++){let i=e[t];r.shapes.push(i.uuid)}else r.shapes.push(e.uuid);return r.options=Object.assign({},t),void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){let r=[];for(let i=0,n=e.shapes.length;i<n;i++){let n=t[e.shapes[i]];r.push(n)}let i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=new aT[i.type]().fromJSON(i)),new aQ(r,e.options)}}let a$={generateTopUV:function(e,t,r,i,n){let a=t[3*r],s=t[3*r+1],o=t[3*i],l=t[3*i+1],u=t[3*n],c=t[3*n+1];return[new eX(a,s),new eX(o,l),new eX(u,c)]},generateSideWallUV:function(e,t,r,i,n,a){let s=t[3*r],o=t[3*r+1],l=t[3*r+2],u=t[3*i],c=t[3*i+1],h=t[3*i+2],d=t[3*n],A=t[3*n+1],p=t[3*n+2],f=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(o-c)<Math.abs(s-u)?[new eX(s,1-l),new eX(u,1-h),new eX(d,1-p),new eX(f,1-g)]:[new eX(o,1-l),new eX(c,1-h),new eX(A,1-p),new eX(m,1-g)]}};class aY extends n7{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2;super([-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aY(e.radius,e.detail)}}class aK extends rX{constructor(e=[new eX(0,-.5),new eX(.5,0),new eX(0,.5)],t=12,r=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=eV(i,0,2*Math.PI);const n=[],a=[],s=[],o=[],l=[],u=1/t,c=new e$,h=new eX,d=new e$,A=new e$,p=new e$;let f=0,m=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:f=e[t+1].x-e[t].x,d.x=+(m=e[t+1].y-e[t].y),d.y=-f,d.z=0*m,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:f=e[t+1].x-e[t].x,d.x=+(m=e[t+1].y-e[t].y),d.y=-f,d.z=0*m,A.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(A)}for(let n=0;n<=t;n++){const d=r+n*u*i,A=Math.sin(d),p=Math.cos(d);for(let r=0;r<=e.length-1;r++){c.x=e[r].x*A,c.y=e[r].y,c.z=e[r].x*p,a.push(c.x,c.y,c.z),h.x=n/t,h.y=r/(e.length-1),s.push(h.x,h.y);const i=o[3*r+0]*A,u=o[3*r+1],d=o[3*r+0]*p;l.push(i,u,d)}}for(let r=0;r<t;r++)for(let t=0;t<e.length-1;t++){const i=t+r*e.length,a=i+e.length,s=i+e.length+1,o=i+1;n.push(i,a,o),n.push(s,o,a)}this.setIndex(n),this.setAttribute("position",new rk(a,3)),this.setAttribute("uv",new rk(s,2)),this.setAttribute("normal",new rk(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aK(e.points,e.segments,e.phiStart,e.phiLength)}}class aZ extends n7{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new aZ(e.radius,e.detail)}}class aJ extends rX{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const n=e/2,a=t/2,s=Math.floor(r),o=Math.floor(i),l=s+1,u=o+1,c=e/s,h=t/o,d=[],A=[],p=[],f=[];for(let e=0;e<u;e++){const t=e*h-a;for(let r=0;r<l;r++){const i=r*c-n;A.push(i,-t,0),p.push(0,0,1),f.push(r/s),f.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const r=t+l*e,i=t+l*(e+1),n=t+1+l*(e+1),a=t+1+l*e;d.push(r,i,a),d.push(i,n,a)}this.setIndex(d),this.setAttribute("position",new rk(A,3)),this.setAttribute("normal",new rk(p,3)),this.setAttribute("uv",new rk(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aJ(e.width,e.height,e.widthSegments,e.heightSegments)}}class a0 extends rX{constructor(e=.5,t=1,r=32,i=1,n=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:n,thetaLength:a},r=Math.max(3,r);const s=[],o=[],l=[],u=[];let c=e;const h=(t-e)/(i=Math.max(1,i)),d=new e$,A=new eX;for(let e=0;e<=i;e++){for(let e=0;e<=r;e++){const i=n+e/r*a;d.x=c*Math.cos(i),d.y=c*Math.sin(i),o.push(d.x,d.y,d.z),l.push(0,0,1),A.x=(d.x/t+1)/2,A.y=(d.y/t+1)/2,u.push(A.x,A.y)}c+=h}for(let e=0;e<i;e++){const t=e*(r+1);for(let e=0;e<r;e++){const i=e+t,n=i+r+1,a=i+r+2,o=i+1;s.push(i,n,o),s.push(n,a,o)}}this.setIndex(s),this.setAttribute("position",new rk(o,3)),this.setAttribute("normal",new rk(l,3)),this.setAttribute("uv",new rk(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new a0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class a1 extends rX{constructor(e=new aE([new eX(0,.5),new eX(-.5,-.5),new eX(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],n=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){let s=i.length/3,l=e.extractPoints(t),u=l.shape,c=l.holes;!1===aj.isClockWise(u)&&(u=u.reverse());for(let e=0,t=c.length;e<t;e++){let t=c[e];!0===aj.isClockWise(t)&&(c[e]=t.reverse())}let h=aj.triangulateShape(u,c);for(let e=0,t=c.length;e<t;e++){let t=c[e];u=u.concat(t)}for(let e=0,t=u.length;e<t;e++){let t=u[e];i.push(t.x,t.y,0),n.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){let t=h[e],i=t[0]+s,n=t[1]+s,a=t[2]+s;r.push(i,n,a),o+=3}}this.setIndex(r),this.setAttribute("position",new rk(i,3)),this.setAttribute("normal",new rk(n,3)),this.setAttribute("uv",new rk(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){let i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){let r=[];for(let i=0,n=e.shapes.length;i<n;i++){let n=t[e.shapes[i]];r.push(n)}return new a1(r,e.curveSegments)}}class a2 extends rX{constructor(e=1,t=32,r=16,i=0,n=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:n,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const o=Math.min(a+s,Math.PI);let l=0;const u=[],c=new e$,h=new e$,d=[],A=[],p=[],f=[];for(let d=0;d<=r;d++){const m=[],g=d/r;let y=0;0===d&&0===a?y=.5/t:d===r&&o===Math.PI&&(y=-.5/t);for(let r=0;r<=t;r++){const o=r/t;c.x=-e*Math.cos(i+o*n)*Math.sin(a+g*s),c.y=e*Math.cos(a+g*s),c.z=e*Math.sin(i+o*n)*Math.sin(a+g*s),A.push(c.x,c.y,c.z),h.copy(c).normalize(),p.push(h.x,h.y,h.z),f.push(o+y,1-g),m.push(l++)}u.push(m)}for(let e=0;e<r;e++)for(let i=0;i<t;i++){const t=u[e][i+1],n=u[e][i],s=u[e+1][i],l=u[e+1][i+1];(0!==e||a>0)&&d.push(t,n,l),(e!==r-1||o<Math.PI)&&d.push(n,s,l)}this.setIndex(d),this.setAttribute("position",new rk(A,3)),this.setAttribute("normal",new rk(p,3)),this.setAttribute("uv",new rk(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new a2(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class a3 extends n7{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new a3(e.radius,e.detail)}}class a4 extends rX{constructor(e=1,t=.4,r=12,i=48,n=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:n},r=Math.floor(r),i=Math.floor(i);const a=[],s=[],o=[],l=[],u=new e$,c=new e$,h=new e$;for(let a=0;a<=r;a++)for(let d=0;d<=i;d++){const A=d/i*n,p=a/r*Math.PI*2;c.x=(e+t*Math.cos(p))*Math.cos(A),c.y=(e+t*Math.cos(p))*Math.sin(A),c.z=t*Math.sin(p),s.push(c.x,c.y,c.z),u.x=e*Math.cos(A),u.y=e*Math.sin(A),h.subVectors(c,u).normalize(),o.push(h.x,h.y,h.z),l.push(d/i),l.push(a/r)}for(let e=1;e<=r;e++)for(let t=1;t<=i;t++){const r=(i+1)*e+t-1,n=(i+1)*(e-1)+t-1,s=(i+1)*(e-1)+t,o=(i+1)*e+t;a.push(r,n,o),a.push(n,s,o)}this.setIndex(a),this.setAttribute("position",new rk(s,3)),this.setAttribute("normal",new rk(o,3)),this.setAttribute("uv",new rk(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new a4(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class a5 extends rX{constructor(e=1,t=.4,r=64,i=8,n=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:n,q:a},r=Math.floor(r),i=Math.floor(i);const s=[],o=[],l=[],u=[],c=new e$,h=new e$,d=new e$,A=new e$,p=new e$,f=new e$,m=new e$;for(let s=0;s<=r;++s){const y=s/r*n*Math.PI*2;g(y,n,a,e,d),g(y+.01,n,a,e,A),f.subVectors(A,d),m.addVectors(A,d),p.crossVectors(f,m),m.crossVectors(p,f),p.normalize(),m.normalize();for(let e=0;e<=i;++e){const n=e/i*Math.PI*2,a=-t*Math.cos(n),A=t*Math.sin(n);c.x=d.x+(a*m.x+A*p.x),c.y=d.y+(a*m.y+A*p.y),c.z=d.z+(a*m.z+A*p.z),o.push(c.x,c.y,c.z),h.subVectors(c,d).normalize(),l.push(h.x,h.y,h.z),u.push(s/r),u.push(e/i)}}for(let e=1;e<=r;e++)for(let t=1;t<=i;t++){const r=(i+1)*(e-1)+(t-1),n=(i+1)*e+(t-1),a=(i+1)*e+t,o=(i+1)*(e-1)+t;s.push(r,n,o),s.push(n,a,o)}function g(e,t,r,i,n){let a=Math.cos(e),s=Math.sin(e),o=r/t*e,l=Math.cos(o);n.x=i*(2+l)*.5*a,n.y=i*(2+l)*s*.5,n.z=i*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new rk(o,3)),this.setAttribute("normal",new rk(l,3)),this.setAttribute("uv",new rk(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new a5(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class a8 extends rX{constructor(e=new ab(new e$(-1,-1,0),new e$(-1,1,0),new e$(1,1,0)),t=64,r=1,i=8,n=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:n};const a=e.computeFrenetFrames(t,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new e$,o=new e$,l=new eX;let u=new e$;const c=[],h=[],d=[],A=[];function p(n){u=e.getPointAt(n/t,u);let l=a.normals[n],d=a.binormals[n];for(let e=0;e<=i;e++){let t=e/i*Math.PI*2,n=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+n*d.x,o.y=a*l.y+n*d.y,o.z=a*l.z+n*d.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=u.x+r*o.x,s.y=u.y+r*o.y,s.z=u.z+r*o.z,c.push(s.x,s.y,s.z)}}(function(){for(let e=0;e<t;e++)p(e);p(!1===n?t:0),function(){for(let e=0;e<=t;e++)for(let r=0;r<=i;r++)l.x=e/t,l.y=r/i,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){let r=(i+1)*(e-1)+(t-1),n=(i+1)*e+(t-1),a=(i+1)*e+t,s=(i+1)*(e-1)+t;A.push(r,n,s),A.push(n,a,s)}}()})(),this.setIndex(A),this.setAttribute("position",new rk(c,3)),this.setAttribute("normal",new rk(h,3)),this.setAttribute("uv",new rk(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){let e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new a8(new aT[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class a6 extends rX{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],r=new Set,i=new e$,n=new e$;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],u=l.start,c=l.count;for(let e=u,o=u+c;e<o;e+=3)for(let o=0;o<3;o++){const l=s.getX(e+o),u=s.getX(e+(o+1)%3);i.fromBufferAttribute(a,l),n.fromBufferAttribute(a,u),!0===a7(i,n,r)&&(t.push(i.x,i.y,i.z),t.push(n.x,n.y,n.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let s=0;s<3;s++){const o=3*e+s,l=3*e+(s+1)%3;i.fromBufferAttribute(a,o),n.fromBufferAttribute(a,l),!0===a7(i,n,r)&&(t.push(i.x,i.y,i.z),t.push(n.x,n.y,n.z))}}this.setAttribute("position",new rk(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function a7(e,t,r){let i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,n=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==r.has(i)&&!0!==r.has(n)&&(r.add(i),r.add(n),!0)}var a9=Object.freeze({__proto__:null,BoxGeometry:r6,CapsuleGeometry:n4,CircleGeometry:n5,ConeGeometry:n6,CylinderGeometry:n8,DodecahedronGeometry:n9,EdgesGeometry:an,ExtrudeGeometry:aQ,IcosahedronGeometry:aY,LatheGeometry:aK,OctahedronGeometry:aZ,PlaneGeometry:aJ,PolyhedronGeometry:n7,RingGeometry:a0,ShapeGeometry:a1,SphereGeometry:a2,TetrahedronGeometry:a3,TorusGeometry:a4,TorusKnotGeometry:a5,TubeGeometry:a8,WireframeGeometry:a6});class se extends r_{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ry(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class st extends ir{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class sr extends r_{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new ry(0xffffff),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ry(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new eX(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tW,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class si extends sr{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new eX(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return eV(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ry(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ry(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ry(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sn extends r_{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ry(0xffffff),this.specular=new ry(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ry(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new eX(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tW,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sa extends r_{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ry(0xffffff),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ry(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new eX(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ss extends r_{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new eX(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class so extends r_{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ry(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ry(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new eX(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new tW,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sl extends r_{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class su extends r_{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class sc extends r_{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ry(0xffffff),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new eX(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sh extends nC{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function sd(e,t){return e&&e.constructor!==t?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}function sA(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sp(e){let t=e.length,r=Array(t);for(let e=0;e!==t;++e)r[e]=e;return r.sort(function(t,r){return e[t]-e[r]}),r}function sf(e,t,r){let i=e.length,n=new e.constructor(i);for(let a=0,s=0;s!==i;++a){let i=r[a]*t;for(let r=0;r!==t;++r)n[s++]=e[i+r]}return n}function sm(e,t,r,i){let n=1,a=e[0];for(;void 0!==a&&void 0===a[i];)a=e[n++];if(void 0===a)return;let s=a[i];if(void 0!==s)if(Array.isArray(s))do void 0!==(s=a[i])&&(t.push(a.time),r.push(...s)),a=e[n++];while(void 0!==a)else if(void 0!==s.toArray)do void 0!==(s=a[i])&&(t.push(a.time),s.toArray(r,r.length)),a=e[n++];while(void 0!==a)else do void 0!==(s=a[i])&&(t.push(a.time),r.push(s)),a=e[n++];while(void 0!==a)}class sg{static convertArray(e,t){return sd(e,t)}static isTypedArray(e){return sA(e)}static getKeyframeOrder(e){return sp(e)}static sortedArray(e,t,r){return sf(e,t,r)}static flattenJSON(e,t,r,i){sm(e,t,r,i)}static subclip(e,t,r,i,n=30){return function(e,t,r,i,n=30){let a=e.clone();a.name=t;let s=[];for(let e=0;e<a.tracks.length;++e){let t=a.tracks[e],o=t.getValueSize(),l=[],u=[];for(let e=0;e<t.times.length;++e){let a=t.times[e]*n;if(!(a<r)&&!(a>=i)){l.push(t.times[e]);for(let r=0;r<o;++r)u.push(t.values[e*o+r])}}0!==l.length&&(t.times=sd(l,t.times.constructor),t.values=sd(u,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a}(e,t,r,i,n)}static makeClipAdditive(e,t=0,r=e,i=30){return function(e,t=0,r=e,i=30){i<=0&&(i=30);let n=r.tracks.length,a=t/i;for(let t=0;t<n;++t){let i,n=r.tracks[t],s=n.ValueTypeName;if("bool"===s||"string"===s)continue;let o=e.tracks.find(function(e){return e.name===n.name&&e.ValueTypeName===s});if(void 0===o)continue;let l=0,u=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);let c=0,h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=n.times.length-1;if(a<=n.times[0]){let e=l,t=u-l;i=n.values.slice(e,t)}else if(a>=n.times[d]){let e=d*u+l,t=e+u-l;i=n.values.slice(e,t)}else{let e=n.createInterpolant(),t=l,r=u-l;e.evaluate(a),i=e.resultBuffer.slice(t,r)}"quaternion"===s&&new eQ().fromArray(i).normalize().conjugate().toArray(i);let A=o.times.length;for(let e=0;e<A;++e){let t=e*h+c;if("quaternion"===s)eQ.multiplyQuaternionsFlat(o.values,t,i,0,o.values,t);else{let e=h-2*c;for(let r=0;r<e;++r)o.values[t+r]-=i[r]}}}return e.blendMode=2501,e}(e,t,r,i)}}class sy{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,r=this._cachedIndex,i=t[r],n=t[r-1];r:{i:{let a;n:{a:if(!(e<i)){for(let a=r+2;;){if(void 0===i){if(e<n)break a;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(n=i,e<(i=t[++r]))break i}a=t.length;break n}if(!(e>=n)){let s=t[1];e<s&&(r=2,n=s);for(let a=r-2;;){if(void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(r===a)break;if(i=n,e>=(n=t[--r-1]))break i}a=r,r=0;break n}break r}for(;r<a;){let i=r+a>>>1;e<t[i]?a=i:r=i+1}if(i=t[r],void 0===(n=t[r-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,n,i)}return this.interpolate_(r,n,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,n=e*i;for(let e=0;e!==i;++e)t[e]=r[n+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class sv extends sy{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,r){let i=this.parameterPositions,n=e-2,a=e+1,s=i[n],o=i[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:n=e,s=2*t-r;break;case 2402:n=i.length-2,s=t+i[n]-i[n+1];break;default:n=e,s=r}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*r-t;break;case 2402:a=1,o=r+i[1]-i[0];break;default:a=e-1,o=t}let l=(r-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-r),this._offsetPrev=n*u,this._offsetNext=a*u}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,A=(r-t)/(i-t),p=A*A,f=p*A,m=-h*f+2*h*p-h*A,g=(1+h)*f+(-1.5-2*h)*p+(-.5+h)*A+1,y=(-1-d)*f+(1.5+d)*p+.5*A,v=d*f-d*p;for(let e=0;e!==s;++e)n[e]=m*a[u+e]+g*a[l+e]+y*a[o+e]+v*a[c+e];return n}}class sx extends sy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(r-t)/(i-t),c=1-u;for(let e=0;e!==s;++e)n[e]=a[l+e]*c+a[o+e]*u;return n}}class s_ extends sy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class sb{constructor(e,t,r,i){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=sd(t,this.TimeBufferType),this.values=sd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){let t,r=e.constructor;if(r.toJSON!==this.toJSON)t=r.toJSON(e);else{t={name:e.name,times:sd(e.times,Array),values:sd(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new s_(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new sx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new sv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t);return eI("KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){let r=this.times,i=r.length,n=0,a=i-1;for(;n!==i&&r[n]<e;)++n;for(;-1!==a&&r[a]>t;)--a;if(++a,0!==n||a!==i){n>=a&&(n=(a=Math.max(a,1))-1);let e=this.getValueSize();this.times=r.slice(n,a),this.values=this.values.slice(n*e,a*e)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(eL("KeyframeTrack: Invalid value size in track.",this),e=!1);let r=this.times,i=this.values,n=r.length;0===n&&(eL("KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==n;t++){let i=r[t];if("number"==typeof i&&isNaN(i)){eL("KeyframeTrack: Time is not a valid number.",this,t,i),e=!1;break}if(null!==a&&a>i){eL("KeyframeTrack: Out of order keys.",this,t,i,a),e=!1;break}a=i}if(void 0!==i&&sA(i))for(let t=0,r=i.length;t!==r;++t){let r=i[t];if(isNaN(r)){eL("KeyframeTrack: Value is not a valid number.",this,t,r),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),r=this.getValueSize(),i=2302===this.getInterpolation(),n=e.length-1,a=1;for(let s=1;s<n;++s){let n=!1,o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(i)n=!0;else{let e=s*r,i=e-r,a=e+r;for(let s=0;s!==r;++s){let r=t[e+s];if(r!==t[i+s]||r!==t[a+s]){n=!0;break}}}if(n){if(s!==a){e[a]=e[s];let i=s*r,n=a*r;for(let e=0;e!==r;++e)t[n+e]=t[i+e]}++a}}if(n>0){e[a]=e[n];for(let e=n*r,i=a*r,s=0;s!==r;++s)t[i+s]=t[e+s];++a}return a!==e.length?(this.times=e.slice(0,a),this.values=t.slice(0,a*r)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),r=new this.constructor(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}sb.prototype.ValueTypeName="",sb.prototype.TimeBufferType=Float32Array,sb.prototype.ValueBufferType=Float32Array,sb.prototype.DefaultInterpolation=2301;class sS extends sb{constructor(e,t,r){super(e,t,r)}}sS.prototype.ValueTypeName="bool",sS.prototype.ValueBufferType=Array,sS.prototype.DefaultInterpolation=2300,sS.prototype.InterpolantFactoryMethodLinear=void 0,sS.prototype.InterpolantFactoryMethodSmooth=void 0;class sT extends sb{constructor(e,t,r,i){super(e,t,r,i)}}sT.prototype.ValueTypeName="color";class sw extends sb{constructor(e,t,r,i){super(e,t,r,i)}}sw.prototype.ValueTypeName="number";class sM extends sy{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){let n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(r-t)/(i-t),l=e*s;for(let e=l+s;l!==e;l+=4)eQ.slerpFlat(n,0,a,l-s,a,l,o);return n}}class sE extends sb{constructor(e,t,r,i){super(e,t,r,i)}InterpolantFactoryMethodLinear(e){return new sM(this.times,this.values,this.getValueSize(),e)}}sE.prototype.ValueTypeName="quaternion",sE.prototype.InterpolantFactoryMethodSmooth=void 0;class sC extends sb{constructor(e,t,r){super(e,t,r)}}sC.prototype.ValueTypeName="string",sC.prototype.ValueBufferType=Array,sC.prototype.DefaultInterpolation=2300,sC.prototype.InterpolantFactoryMethodLinear=void 0,sC.prototype.InterpolantFactoryMethodSmooth=void 0;class sR extends sb{constructor(e,t,r,i){super(e,t,r,i)}}sR.prototype.ValueTypeName="vector";class sN{constructor(e="",t=-1,r=[],i=2500){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ez(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){let t=[],r=e.tracks,i=1/(e.fps||1);for(let e=0,n=r.length;e!==n;++e)t.push((function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");let t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return sw;case"vector":case"vector2":case"vector3":case"vector4":return sR;case"color":return sT;case"quaternion":return sE;case"bool":case"boolean":return sS;case"string":return sC}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){let t=[],r=[];sm(e.keys,t,r,"value"),e.times=t,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)})(r[e]).scale(i));let n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n.userData=JSON.parse(e.userData||"{}"),n}static toJSON(e){let t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let e=0,i=r.length;e!==i;++e)t.push(sb.toJSON(r[e]));return i}static CreateFromMorphTargetSequence(e,t,r,i){let n=t.length,a=[];for(let e=0;e<n;e++){let s=[],o=[];s.push((e+n-1)%n,e,(e+1)%n),o.push(0,1,0);let l=sp(s);s=sf(s,1,l),o=sf(o,1,l),i||0!==s[0]||(s.push(n),o.push(o[0])),a.push(new sw(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/r))}return new this(e,-1,a)}static findByName(e,t){let r=e;Array.isArray(e)||(r=e.geometry&&e.geometry.animations||e.animations);for(let e=0;e<r.length;e++)if(r[e].name===t)return r[e];return null}static CreateClipsFromMorphTargetSequences(e,t,r){let i={},n=/^([\w-]*?)([\d]+)$/;for(let t=0,r=e.length;t<r;t++){let r=e[t],a=r.name.match(n);if(a&&a.length>1){let e=a[1],t=i[e];t||(i[e]=t=[]),t.push(r)}}let a=[];for(let e in i)a.push(this.CreateFromMorphTargetSequence(e,i[e],t,r));return a}static parseAnimation(e,t){if(eI("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return eL("AnimationClip: No animation in JSONLoader data."),null;let r=function(e,t,r,i,n){if(0!==r.length){let a=[],s=[];sm(r,a,s,i),0!==a.length&&n.push(new e(t,a,s))}},i=[],n=e.name||"default",a=e.fps||30,s=e.blendMode,o=e.length||-1,l=e.hierarchy||[];for(let e=0;e<l.length;e++){let n=l[e].keys;if(n&&0!==n.length)if(n[0].morphTargets){let e,t={};for(e=0;e<n.length;e++)if(n[e].morphTargets)for(let r=0;r<n[e].morphTargets.length;r++)t[n[e].morphTargets[r]]=-1;for(let r in t){let t=[],a=[];for(let i=0;i!==n[e].morphTargets.length;++i){let i=n[e];t.push(i.time),a.push(+(i.morphTarget===r))}i.push(new sw(".morphTargetInfluence["+r+"]",t,a))}o=t.length*a}else{let a=".bones["+t[e].name+"]";r(sR,a+".position",n,"pos",i),r(sE,a+".quaternion",n,"rot",i),r(sR,a+".scale",n,"scl",i)}}return 0===i.length?null:new this(n,o,i,s)}resetDuration(){let e=this.tracks,t=0;for(let r=0,i=e.length;r!==i;++r){let e=this.tracks[r];t=Math.max(t,e.times[e.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){let e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());let t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}let sP={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class sI{constructor(e,t,r){let i;const n=this;let a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this._abortController=null,this.itemStart=function(e){o++,!1===a&&void 0!==n.onStart&&n.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,o),s===o&&(a=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){let t=l.indexOf(e);return -1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,r=l.length;t<r;t+=2){let r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}let sL=new sI;class sD{constructor(e){this.manager=void 0!==e?e:sL,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let r=this;return new Promise(function(i,n){r.load(e,i,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}sD.DEFAULT_MATERIAL_NAME="__DEFAULT";let sB={};class sF extends Error{constructor(e,t){super(e),this.response=t}}class sO extends sD{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let n=sP.get(`file:${e}`);if(void 0!==n)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(void 0!==sB[e])return void sB[e].push({onLoad:t,onProgress:r,onError:i});sB[e]=[],sB[e].push({onLoad:t,onProgress:r,onError:i});let a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),s=this.mimeType,o=this.responseType;fetch(a).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&eI("FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;let r=sB[e],i=t.body.getReader(),n=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),a=n?parseInt(n):0,s=0!==a,o=0;return new Response(new ReadableStream({start(e){!function t(){i.read().then(({done:i,value:n})=>{if(i)e.close();else{let i=new ProgressEvent("progress",{lengthComputable:s,loaded:o+=n.byteLength,total:a});for(let e=0,t=r.length;e<t;e++){let t=r[e];t.onProgress&&t.onProgress(i)}e.enqueue(n),t()}},t=>{e.error(t)})}()}}))}throw new sF(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>new DOMParser().parseFromString(e,s));case"json":return e.json();default:if(""===s)return e.text();{let t=/charset="?([^;"\s]*)"?/i.exec(s),r=new TextDecoder(t&&t[1]?t[1].toLowerCase():void 0);return e.arrayBuffer().then(e=>r.decode(e))}}}).then(t=>{sP.add(`file:${e}`,t);let r=sB[e];delete sB[e];for(let e=0,i=r.length;e<i;e++){let i=r[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{let r=sB[e];if(void 0===r)throw this.manager.itemError(e),t;delete sB[e];for(let e=0,i=r.length;e<i;e++){let i=r[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class sU extends sD{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new sO(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(r){try{t(n.parse(JSON.parse(r)))}catch(t){i?i(t):eL(t),n.manager.itemError(e)}},r,i)}parse(e){let t=[];for(let r=0;r<e.length;r++){let i=sN.parse(e[r]);t.push(i)}return t}}class sk extends sD{constructor(e){super(e)}load(e,t,r,i){let n=this,a=[],s=new nZ,o=new sO(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(n.withCredentials);let l=0;if(Array.isArray(e))for(let u=0,c=e.length;u<c;++u)!function(u){o.load(e[u],function(e){let r=n.parse(e,!0);a[u]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(l+=1)&&(1===r.mipmapCount&&(s.minFilter=1006),s.image=a,s.format=r.format,s.needsUpdate=!0,t&&t(s))},r,i)}(u);else o.load(e,function(e){let r=n.parse(e,!0);if(r.isCubemap){let e=r.mipmaps.length/r.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<r.mipmapCount;e++)a[t].mipmaps.push(r.mipmaps[t*r.mipmapCount+e]),a[t].format=r.format,a[t].width=r.width,a[t].height=r.height}s.image=a}else s.image.width=r.width,s.image.height=r.height,s.mipmaps=r.mipmaps;1===r.mipmapCount&&(s.minFilter=1006),s.format=r.format,s.needsUpdate=!0,t&&t(s)},r,i);return s}}let sz=new WeakMap;class sV extends sD{constructor(e){super(e)}load(e,t,r,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,a=sP.get(`image:${e}`);if(void 0!==a){if(!0===a.complete)n.manager.itemStart(e),setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0);else{let e=sz.get(a);void 0===e&&(e=[],sz.set(a,e)),e.push({onLoad:t,onError:i})}return a}let s=ew("img");function o(){u(),t&&t(this);let r=sz.get(this)||[];for(let e=0;e<r.length;e++){let t=r[e];t.onLoad&&t.onLoad(this)}sz.delete(this),n.manager.itemEnd(e)}function l(t){u(),i&&i(t),sP.remove(`image:${e}`);let r=sz.get(this)||[];for(let e=0;e<r.length;e++){let i=r[e];i.onError&&i.onError(t)}sz.delete(this),n.manager.itemError(e),n.manager.itemEnd(e)}function u(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),sP.add(`image:${e}`,s),n.manager.itemStart(e),s.src=e,s}}class sq extends sD{constructor(e){super(e)}load(e,t,r,i){let n=new ic;n.colorSpace=ep;let a=new sV(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;for(let r=0;r<e.length;++r)!function(r){a.load(e[r],function(e){n.images[r]=e,6==++s&&(n.needsUpdate=!0,t&&t(n))},void 0,i)}(r);return n}}class sG extends sD{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new iK,s=new sO(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(n.withCredentials),s.load(e,function(e){let r;try{r=n.parse(e)}catch(e){if(void 0===i)return void e(e);i(e)}void 0!==r.image?a.image=r.image:void 0!==r.data&&(a.image.width=r.width,a.image.height=r.height,a.image.data=r.data),a.wrapS=void 0!==r.wrapS?r.wrapS:1001,a.wrapT=void 0!==r.wrapT?r.wrapT:1001,a.magFilter=void 0!==r.magFilter?r.magFilter:1006,a.minFilter=void 0!==r.minFilter?r.minFilter:1006,a.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.colorSpace&&(a.colorSpace=r.colorSpace),void 0!==r.flipY&&(a.flipY=r.flipY),void 0!==r.format&&(a.format=r.format),void 0!==r.type&&(a.type=r.type),void 0!==r.mipmaps&&(a.mipmaps=r.mipmaps,a.minFilter=1008),1===r.mipmapCount&&(a.minFilter=1006),void 0!==r.generateMipmaps&&(a.generateMipmaps=r.generateMipmaps),a.needsUpdate=!0,t&&t(a,r)},r,i),a}}class sH extends sD{constructor(e){super(e)}load(e,t,r,i){let n=new tt,a=new sV(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){n.image=e,n.needsUpdate=!0,void 0!==t&&t(n)},r,i),n}}class sj extends t9{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ry(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class sW extends sj{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(t9.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ry(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}let sX=new tF,sQ=new e$,s$=new e$;class sY{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new eX(512,512),this.mapType=1009,this.map=null,this.mapPass=null,this.matrix=new tF,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new no,this._frameExtents=new eX(1,1),this._viewportCount=1,this._viewports=[new tr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,r=this.matrix;sQ.setFromMatrixPosition(e.matrixWorld),t.position.copy(sQ),s$.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(s$),t.updateMatrixWorld(),sX.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sX,t.coordinateSystem,t.reversedDepth),t.reversedDepth?r.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(sX)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class sK extends sY{constructor(){super(new il(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){let t=this.camera,r=2*ek*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,n=e.distance||t.far;(r!==t.fov||i!==t.aspect||n!==t.far)&&(t.fov=r,t.aspect=i,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class sZ extends sj{constructor(e,t,r=0,i=Math.PI/3,n=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(t9.DEFAULT_UP),this.updateMatrix(),this.target=new t9,this.distance=r,this.angle=i,this.penumbra=n,this.decay=a,this.map=null,this.shadow=new sK}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}let sJ=new tF,s0=new e$,s1=new e$;class s2 extends sY{constructor(){super(new il(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new eX(4,2),this._viewportCount=6,this._viewports=[new tr(2,1,1,1),new tr(0,1,1,1),new tr(3,1,1,1),new tr(1,1,1,1),new tr(3,0,1,1),new tr(1,0,1,1)],this._cubeDirections=[new e$(1,0,0),new e$(-1,0,0),new e$(0,0,1),new e$(0,0,-1),new e$(0,1,0),new e$(0,-1,0)],this._cubeUps=[new e$(0,1,0),new e$(0,1,0),new e$(0,1,0),new e$(0,1,0),new e$(0,0,1),new e$(0,0,-1)]}updateMatrices(e,t=0){let r=this.camera,i=this.matrix,n=e.distance||r.far;n!==r.far&&(r.far=n,r.updateProjectionMatrix()),s0.setFromMatrixPosition(e.matrixWorld),r.position.copy(s0),s1.copy(r.position),s1.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(s1),r.updateMatrixWorld(),i.makeTranslation(-s0.x,-s0.y,-s0.z),sJ.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sJ,r.coordinateSystem,r.reversedDepth)}}class s3 extends sj{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new s2}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class s4 extends ii{constructor(e=-1,t=1,r=1,i=-1,n=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=n,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,n,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=r-e,a=r+e,s=i+t,o=i-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=e*this.view.offsetX,a=n+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(n,a,s,o,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}class s5 extends sY{constructor(){super(new s4(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class s8 extends sj{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(t9.DEFAULT_UP),this.updateMatrix(),this.target=new t9,this.shadow=new s5}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class s6 extends sj{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class s7 extends sj{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){let t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class s9{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new e$)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){let r=e.x,i=e.y,n=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*i),t.addScaledVector(a[2],.488603*n),t.addScaledVector(a[3],.488603*r),t.addScaledVector(a[4],r*i*1.092548),t.addScaledVector(a[5],i*n*1.092548),t.addScaledVector(a[6],.315392*(3*n*n-1)),t.addScaledVector(a[7],r*n*1.092548),t.addScaledVector(a[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){let r=e.x,i=e.y,n=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*i),t.addScaledVector(a[2],1.023328*n),t.addScaledVector(a[3],1.023328*r),t.addScaledVector(a[4],.858086*r*i),t.addScaledVector(a[5],.858086*i*n),t.addScaledVector(a[6],.743125*n*n-.247708),t.addScaledVector(a[7],.858086*r*n),t.addScaledVector(a[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){let r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+3*i);return this}toArray(e=[],t=0){let r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){let r=e.x,i=e.y,n=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*n,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*n,t[6]=.315392*(3*n*n-1),t[7]=1.092548*r*n,t[8]=.546274*(r*r-i*i)}}class oe extends sj{constructor(e=new s9,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){let t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class ot extends sD{constructor(e){super(e),this.textures={}}load(e,t,r,i){let n=this,a=new sO(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(r){try{t(n.parse(JSON.parse(r)))}catch(t){i?i(t):eL(t),n.manager.itemError(e)}},r,i)}parse(e){let t=this.textures;function r(e){return void 0===t[e]&&eI("MaterialLoader: Undefined texture",e),t[e]}let i=this.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=new ry().setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(i.dispersion=e.dispersion),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(i.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(i.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(i.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(i.depthFunc=e.depthFunc),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(i.blendSrc=e.blendSrc),void 0!==e.blendDst&&(i.blendDst=e.blendDst),void 0!==e.blendEquation&&(i.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(i.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(i.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(i.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==i.blendColor&&i.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(i.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),void 0!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(let t in e.uniforms){let n=e.uniforms[t];switch(i.uniforms[t]={},n.type){case"t":i.uniforms[t].value=r(n.value);break;case"c":i.uniforms[t].value=new ry().setHex(n.value);break;case"v2":i.uniforms[t].value=new eX().fromArray(n.value);break;case"v3":i.uniforms[t].value=new e$().fromArray(n.value);break;case"v4":i.uniforms[t].value=new tr().fromArray(n.value);break;case"m3":i.uniforms[t].value=new eZ().fromArray(n.value);break;case"m4":i.uniforms[t].value=new tF().fromArray(n.value);break;default:i.uniforms[t].value=n.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(let t in e.extensions)i.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(i.lights=e.lights),void 0!==e.clipping&&(i.clipping=e.clipping),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=r(e.map)),void 0!==e.matcap&&(i.matcap=r(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=r(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=new eX().fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=r(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=r(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=r(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=r(e.envMap)),void 0!==e.envMapRotation&&i.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=r(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=new eX().fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=r(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=r(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=r(e.thicknessMap)),void 0!==e.anisotropyMap&&(i.anisotropyMap=r(e.anisotropyMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=r(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return ot.createMaterialFromType(e)}static createMaterialFromType(e){return new({ShadowMaterial:se,SpriteMaterial:ib,RawShaderMaterial:st,ShaderMaterial:ir,PointsMaterial:nq,MeshPhysicalMaterial:si,MeshStandardMaterial:sr,MeshPhongMaterial:sn,MeshToonMaterial:sa,MeshNormalMaterial:ss,MeshLambertMaterial:so,MeshDepthMaterial:sl,MeshDistanceMaterial:su,MeshBasicMaterial:rb,MeshMatcapMaterial:sc,LineDashedMaterial:sh,LineBasicMaterial:nC,Material:r_})[e]}}class or{static extractUrlBase(e){let t=e.lastIndexOf("/");return -1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e))?e:t+e}}class oi extends rX{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){let e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class on extends sD{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new sO(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials),a.load(e,function(r){try{t(n.parse(JSON.parse(r)))}catch(t){i?i(t):eL(t),n.manager.itemError(e)}},r,i)}parse(e){let t={},r={};function i(e,i){if(void 0!==t[i])return t[i];let n=e.interleavedBuffers[i],a=function(e,t){if(void 0!==r[t])return r[t];let i=new Uint32Array(e.arrayBuffers[t]).buffer;return r[t]=i,i}(e,n.buffer),s=new iv(eT(n.type,a),n.stride);return s.uuid=n.uuid,t[i]=s,s}let n=e.isInstancedBufferGeometry?new oi:new rX,a=e.data.index;if(void 0!==a){let e=eT(a.type,a.array);n.setIndex(new rN(e,1))}let s=e.data.attributes;for(let t in s){let r,a=s[t];if(a.isInterleavedBufferAttribute)r=new i_(i(e.data,a.data),a.itemSize,a.offset,a.normalized);else{let e=eT(a.type,a.array);r=new(a.isInstancedBufferAttribute?i1:rN)(e,a.itemSize,a.normalized)}void 0!==a.name&&(r.name=a.name),void 0!==a.usage&&r.setUsage(a.usage),n.setAttribute(t,r)}let o=e.data.morphAttributes;if(o)for(let t in o){let r=o[t],a=[];for(let t=0,n=r.length;t<n;t++){let n,s=r[t];n=s.isInterleavedBufferAttribute?new i_(i(e.data,s.data),s.itemSize,s.offset,s.normalized):new rN(eT(s.type,s.array),s.itemSize,s.normalized),void 0!==s.name&&(n.name=s.name),a.push(n)}n.morphAttributes[t]=a}e.data.morphTargetsRelative&&(n.morphTargetsRelative=!0);let l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){let t=l[e];n.addGroup(t.start,t.count,t.materialIndex)}let u=e.data.boundingSphere;return void 0!==u&&(n.boundingSphere=new tE().fromJSON(u)),e.name&&(n.name=e.name),e.userData&&(n.userData=e.userData),n}}class oa extends sD{constructor(e){super(e)}load(e,t,r,i){let n=this,a=""===this.path?or.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;let s=new sO(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(r){let a=null;try{a=JSON.parse(r)}catch(t){void 0!==i&&i(t),t("ObjectLoader: Can't parse "+e+".",t.message);return}let s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase()){void 0!==i&&i(Error("THREE.ObjectLoader: Can't load "+e)),eL("ObjectLoader: Can't load "+e);return}n.parse(a,t)},r,i)}async loadAsync(e,t){let r=""===this.path?or.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;let i=new sO(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);let n=JSON.parse(await i.loadAsync(e,t)),a=n.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(n)}parse(e,t){let r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,i),a=this.parseImages(e.images,function(){void 0!==t&&t(l)}),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,n,o,s,r),u=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,u),this.bindLightTargets(l),void 0!==t){let e=!1;for(let t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){let t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),n=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,n),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,i,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),this.bindLightTargets(o),o}parseShapes(e){let t={};if(void 0!==e)for(let r=0,i=e.length;r<i;r++){let i=new aE().fromJSON(e[r]);t[i.uuid]=i}return t}parseSkeletons(e,t){let r={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let t=0,n=e.length;t<n;t++){let n=new i0().fromJSON(e[t],i);r[n.uuid]=n}return r}parseGeometries(e,t){let r={};if(void 0!==e){let i=new on;for(let n=0,a=e.length;n<a;n++){let a,s=e[n];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;default:s.type in a9?a=a9[s.type].fromJSON(s,t):eI(`ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),r[s.uuid]=a}}return r}parseMaterials(e,t){let r={},i={};if(void 0!==e){let n=new ot;n.setTextures(t);for(let t=0,a=e.length;t<a;t++){let a=e[t];void 0===r[a.uuid]&&(r[a.uuid]=n.parse(a)),i[a.uuid]=r[a.uuid]}}return i}parseAnimations(e){let t={};if(void 0!==e)for(let r=0;r<e.length;r++){let i=e[r],n=sN.parse(i);t[n.uuid]=n}return t}parseImages(e,t){let r,i=this,n={};function a(e){if("string"==typeof e){var t;return t=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e,i.manager.itemStart(t),r.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t),i.manager.itemEnd(t)})}return e.data?{data:eT(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(r=new sV(new sI(t))).setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){let r=e[t],i=r.url;if(Array.isArray(i)){let e=[];for(let t=0,r=i.length;t<r;t++){let r=a(i[t]);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new iK(r.data,r.width,r.height)))}n[r.uuid]=new e6(e)}else{let e=a(r.url);n[r.uuid]=new e6(e)}}}return n}async parseImagesAsync(e){let t,r=this,i={};async function n(e){if("string"==typeof e){let i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:r.resourcePath+e;return await t.loadAsync(i)}return e.data?{data:eT(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){(t=new sV(this.manager)).setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){let r=e[t],a=r.url;if(Array.isArray(a)){let e=[];for(let t=0,r=a.length;t<r;t++){let r=a[t],i=await n(r);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new iK(i.data,i.width,i.height)))}i[r.uuid]=new e6(e)}else{let e=await n(r.url);i[r.uuid]=new e6(e)}}}return i}parseTextures(e,t){function r(e,t){return"number"==typeof e?e:(eI("ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}let i={};if(void 0!==e)for(let n=0,a=e.length;n<a;n++){let a,s=e[n];void 0===s.image&&eI('ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&eI("ObjectLoader: Undefined image",s.image);let o=t[s.image],l=o.data;Array.isArray(l)?(a=new ic,6===l.length&&(a.needsUpdate=!0)):(a=l&&l.data?new iK:new tt,l&&(a.needsUpdate=!0)),a.source=o,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=r(s.mapping,os)),void 0!==s.channel&&(a.channel=s.channel),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=r(s.wrap[0],oo),a.wrapT=r(s.wrap[1],oo)),void 0!==s.format&&(a.format=s.format),void 0!==s.internalFormat&&(a.internalFormat=s.internalFormat),void 0!==s.type&&(a.type=s.type),void 0!==s.colorSpace&&(a.colorSpace=s.colorSpace),void 0!==s.minFilter&&(a.minFilter=r(s.minFilter,ol)),void 0!==s.magFilter&&(a.magFilter=r(s.magFilter,ol)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.generateMipmaps&&(a.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(a.compareFunction=s.compareFunction),void 0!==s.userData&&(a.userData=s.userData),i[s.uuid]=a}return i}parseObject(e,t,r,i,n){let a,s,o;function l(e){return void 0===t[e]&&eI("ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];void 0===r[n]&&eI("ObjectLoader: Undefined material",n),t.push(r[n])}return t}return void 0===r[e]&&eI("ObjectLoader: Undefined material",e),r[e]}}function c(e){return void 0===i[e]&&eI("ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":a=new iy,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new ry(e.background):a.background=c(e.background)),void 0!==e.environment&&(a.environment=c(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new ig(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new im(e.fog.color,e.fog.density)),""!==e.fog.name&&(a.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&a.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(a.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&a.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":a=new il(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new s4(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new s6(e.color,e.intensity);break;case"DirectionalLight":(a=new s8(e.color,e.intensity)).target=e.target||"";break;case"PointLight":a=new s3(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new s7(e.color,e.intensity,e.width,e.height);break;case"SpotLight":(a=new sZ(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay)).target=e.target||"";break;case"HemisphereLight":a=new sW(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new oe().fromJSON(e);break;case"SkinnedMesh":a=new i$(s=l(e.geometry),o=u(e.material)),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":a=new r5(s=l(e.geometry),o=u(e.material));break;case"InstancedMesh":s=l(e.geometry),o=u(e.material);let h=e.count,d=e.instanceMatrix,A=e.instanceColor;(a=new i9(s,o,h)).instanceMatrix=new i1(new Float32Array(d.array),16),void 0!==A&&(a.instanceColor=new i1(new Float32Array(A.array),A.itemSize));break;case"BatchedMesh":s=l(e.geometry),o=u(e.material),(a=new nE(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,o)).geometry=s,a.perObjectFrustumCulled=e.perObjectFrustumCulled,a.sortObjects=e.sortObjects,a._drawRanges=e.drawRanges,a._reservedRanges=e.reservedRanges,a._geometryInfo=e.geometryInfo.map(e=>{let t=null,r=null;return void 0!==e.boundingBox&&(t=new tu().fromJSON(e.boundingBox)),void 0!==e.boundingSphere&&(r=new tE().fromJSON(e.boundingSphere)),{...e,boundingBox:t,boundingSphere:r}}),a._instanceInfo=e.instanceInfo,a._availableInstanceIds=e._availableInstanceIds,a._availableGeometryIds=e._availableGeometryIds,a._nextIndexStart=e.nextIndexStart,a._nextVertexStart=e.nextVertexStart,a._geometryCount=e.geometryCount,a._maxInstanceCount=e.maxInstanceCount,a._maxVertexCount=e.maxVertexCount,a._maxIndexCount=e.maxIndexCount,a._geometryInitialized=e.geometryInitialized,a._matricesTexture=c(e.matricesTexture.uuid),a._indirectTexture=c(e.indirectTexture.uuid),void 0!==e.colorsTexture&&(a._colorsTexture=c(e.colorsTexture.uuid)),void 0!==e.boundingSphere&&(a.boundingSphere=new tE().fromJSON(e.boundingSphere)),void 0!==e.boundingBox&&(a.boundingBox=new tu().fromJSON(e.boundingBox));break;case"LOD":a=new ik;break;case"Line":a=new nF(l(e.geometry),u(e.material));break;case"LineLoop":a=new nV(l(e.geometry),u(e.material));break;case"LineSegments":a=new nz(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new nX(l(e.geometry),u(e.material));break;case"Sprite":a=new iB(u(e.material));break;case"Group":a=new id;break;case"Bone":a=new iY;break;default:a=new t9}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(a.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){let s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,r,i,n))}if(void 0!==e.animations){let t=e.animations;for(let e=0;e<t.length;e++){let r=t[e];a.animations.push(n[r])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);let t=e.levels;for(let e=0;e<t.length;e++){let r=t[e],i=a.getObjectByProperty("uuid",r.object);void 0!==i&&a.addLevel(i,r.distance,r.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){let r=t[e.skeleton];void 0===r?eI("ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(r,e.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){let r=t.target,i=e.getObjectByProperty("uuid",r);void 0!==i?t.target=i:t.target=new t9}})}}let os={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306},oo={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},ol={NearestFilter:1003,NearestMipmapNearestFilter:1004,NearestMipmapLinearFilter:1005,LinearFilter:1006,LinearMipmapNearestFilter:1007,LinearMipmapLinearFilter:1008},ou=new WeakMap;class oc extends sD{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&eI("ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&eI("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,r,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);let n=this,a=sP.get(`image-bitmap:${e}`);if(void 0!==a)return(n.manager.itemStart(e),a.then)?void a.then(r=>{if(!0!==ou.has(a))return t&&t(r),n.manager.itemEnd(e),r;i&&i(ou.get(a)),n.manager.itemError(e),n.manager.itemEnd(e)}):(setTimeout(function(){t&&t(a),n.manager.itemEnd(e)},0),a);let s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,s.signal="function"==typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;let o=fetch(e,s).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(n.options,{colorSpaceConversion:"none"}))}).then(function(r){return sP.add(`image-bitmap:${e}`,r),t&&t(r),n.manager.itemEnd(e),r}).catch(function(t){i&&i(t),ou.set(o,t),sP.remove(`image-bitmap:${e}`),n.manager.itemError(e),n.manager.itemEnd(e)});sP.add(`image-bitmap:${e}`,o),n.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class oh{static getContext(){return void 0===i&&(i=new(window.AudioContext||window.webkitAudioContext)),i}static setContext(e){i=e}}class od extends sD{constructor(e){super(e)}load(e,t,r,i){let n=this,a=new sO(this.manager);function s(t){i?i(t):eL(t),n.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){try{let r=e.slice(0);oh.getContext().decodeAudioData(r,function(e){t(e)}).catch(s)}catch(e){s(e)}},r,i)}}let oA=new tF,op=new tF,of=new tF;class om{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new il,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new il,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){let t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){let r,i;t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,of.copy(e.projectionMatrix);let n=t.eyeSep/2,a=n*t.near/t.focus,s=t.near*Math.tan(eU*t.fov*.5)/t.zoom;op.elements[12]=-n,oA.elements[12]=n,r=-s*t.aspect+a,i=s*t.aspect+a,of.elements[0]=2*t.near/(i-r),of.elements[8]=(i+r)/(i-r),this.cameraL.projectionMatrix.copy(of),r=-s*t.aspect-a,i=s*t.aspect-a,of.elements[0]=2*t.near/(i-r),of.elements[8]=(i+r)/(i-r),this.cameraR.projectionMatrix.copy(of)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(op),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(oA)}}class og extends il{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class oy{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}let ov=new e$,ox=new eQ,o_=new e$,ob=new e$,oS=new e$;class oT extends t9{constructor(){super(),this.type="AudioListener",this.context=oh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new oy}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);let t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ov,ox,o_),ob.set(0,0,-1).applyQuaternion(ox),oS.set(0,1,0).applyQuaternion(ox),t.positionX){let e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ov.x,e),t.positionY.linearRampToValueAtTime(ov.y,e),t.positionZ.linearRampToValueAtTime(ov.z,e),t.forwardX.linearRampToValueAtTime(ob.x,e),t.forwardY.linearRampToValueAtTime(ob.y,e),t.forwardZ.linearRampToValueAtTime(ob.z,e),t.upX.linearRampToValueAtTime(oS.x,e),t.upY.linearRampToValueAtTime(oS.y,e),t.upZ.linearRampToValueAtTime(oS.z,e)}else t.setPosition(ov.x,ov.y,ov.z),t.setOrientation(ob.x,ob.y,ob.z,oS.x,oS.y,oS.z)}}class ow extends t9{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void eI("Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void eI("Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;let t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){return!1===this.hasPlaybackControl?void eI("Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this)}stop(e=0){return!1===this.hasPlaybackControl?void eI("Audio: this Audio has no playback control."):(this._progress=0,null!==this.source&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this)}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){return!1===this.hasPlaybackControl?void eI("Audio: this Audio has no playback control."):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this)}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return!1===this.hasPlaybackControl?(eI("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){return!1===this.hasPlaybackControl?void eI("Audio: this Audio has no playback control."):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return(super.copy(e,t),"buffer"!==e.sourceType)?eI("Audio: Audio source type cannot be copied."):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice()),this}clone(e){return new this.constructor(this.listener).copy(this,e)}}let oM=new e$,oE=new eQ,oC=new e$,oR=new e$;class oN extends ow{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(oM,oE,oC),oR.set(0,0,1).applyQuaternion(oE);let t=this.panner;if(t.positionX){let e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(oM.x,e),t.positionY.linearRampToValueAtTime(oM.y,e),t.positionZ.linearRampToValueAtTime(oM.z,e),t.orientationX.linearRampToValueAtTime(oR.x,e),t.orientationY.linearRampToValueAtTime(oR.y,e),t.orientationZ.linearRampToValueAtTime(oR.z,e)}else t.setPosition(oM.x,oM.y,oM.z),t.setOrientation(oR.x,oR.y,oR.z)}}class oP{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0,t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class oI{constructor(e,t,r){let i,n,a;switch(this.binding=e,this.valueSize=r,t){case"quaternion":i=this._slerp,n=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,n=this._select,a=this._setAdditiveIdentityOther,this.buffer=Array(5*r);break;default:i=this._lerp,n=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=n,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){let r=this.buffer,i=this.valueSize,n=e*i+i,a=this.cumulativeWeight;if(0===a){for(let e=0;e!==i;++e)r[n+e]=r[e];a=t}else{a+=t;let e=t/a;this._mixBufferRegion(r,n,0,e,i)}this.cumulativeWeight=a}accumulateAdditive(e){let t=this.buffer,r=this.valueSize,i=r*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){let t=this.valueSize,r=this.buffer,i=e*t+t,n=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){let e=t*this._origIndex;this._mixBufferRegion(r,i,e,1-n,t)}a>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let e=t,n=t+t;e!==n;++e)if(r[e]!==r[e+t]){s.setValue(r,i);break}}saveOriginalState(){let e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let e=r;e!==i;++e)t[e]=t[i+e%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){let e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,n){if(i>=.5)for(let i=0;i!==n;++i)e[t+i]=e[r+i]}_slerp(e,t,r,i){eQ.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,n){let a=this._workIndex*n;eQ.multiplyQuaternionsFlat(e,a,e,t,e,r),eQ.slerpFlat(e,t,e,t,e,a,i)}_lerp(e,t,r,i,n){let a=1-i;for(let s=0;s!==n;++s){let n=t+s;e[n]=e[n]*a+e[r+s]*i}}_lerpAdditive(e,t,r,i,n){for(let a=0;a!==n;++a){let n=t+a;e[n]=e[n]+e[r+a]*i}}}let oL="\\[\\]\\.:\\/",oD=RegExp("["+oL+"]","g"),oB="[^"+oL+"]",oF="[^"+oL.replace("\\.","")+"]",oO=RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",oB)+/(WCOD+)?/.source.replace("WCOD",oF)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oB)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oB)+"$"),oU=["material","materials","bones","map"];class ok{constructor(e,t,r){this.path=t,this.parsedPath=r||ok.parseTrackName(t),this.node=ok.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new ok.Composite(e,t,r):new ok(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(oD,"")}static parseTrackName(e){let t=oO.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){let e=r.nodeName.substring(i+1);-1!==oU.indexOf(e)&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=e)}if(null===r.propertyName||0===r.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){let r=function(e){for(let i=0;i<e.length;i++){let n=e[i];if(n.name===t||n.uuid===t)return n;let a=r(n.children);if(a)return a}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let r=this.resolvedProperty;for(let i=0,n=r.length;i!==n;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,r=t.objectName,i=t.propertyName,n=t.propertyIndex;if(e||(e=ok.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void eI("PropertyBinding: No target node found for track: "+this.path+".");if(r){let i=t.objectIndex;switch(r){case"materials":if(!e.material)return void eL("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void eL("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void eL("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void eL("PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void eL("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void eL("PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==i){if(void 0===e[i])return void eL("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}let a=e[i];if(void 0===a)return void eL("PropertyBinding: Trying to update property for track: "+t.nodeName+"."+i+" but it wasn't found.",e);let s=this.Versioning.None;this.targetObject=e,!0===e.isMaterial?s=this.Versioning.NeedsUpdate:!0===e.isObject3D&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!e.geometry)return void eL("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void eL("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[n]&&(n=e.morphTargetDictionary[n])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=n}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ok.Composite=class{constructor(e,t,r){const i=r||ok.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();let r=this._targetGroup.nCachedObjects_,i=this._bindings[r];void 0!==i&&i.getValue(e,t)}setValue(e,t){let r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,n=r.length;i!==n;++i)r[i].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}},ok.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ok.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ok.prototype.GetterByBindingType=[ok.prototype._getValue_direct,ok.prototype._getValue_array,ok.prototype._getValue_arrayElement,ok.prototype._getValue_toArray],ok.prototype.SetterByBindingTypeAndVersioning=[[ok.prototype._setValue_direct,ok.prototype._setValue_direct_setNeedsUpdate,ok.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ok.prototype._setValue_array,ok.prototype._setValue_array_setNeedsUpdate,ok.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ok.prototype._setValue_arrayElement,ok.prototype._setValue_arrayElement_setNeedsUpdate,ok.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ok.prototype._setValue_fromArray,ok.prototype._setValue_fromArray_setNeedsUpdate,ok.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class oz{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ez(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){let e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,n=this._bindings,a=n.length,s,o=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){let c=arguments[u],h=c.uuid,d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(c);for(let e=0;e!==a;++e)n[e].push(new ok(c,r[e],i[e]))}else if(d<l){s=e[d];let o=--l,u=e[o];t[u.uuid]=d,e[d]=u,t[h]=o,e[o]=c;for(let e=0;e!==a;++e){let t=n[e],a=t[o],s=t[d];t[d]=a,void 0===s&&(s=new ok(c,r[e],i[e])),t[o]=s}}else e[d]!==s&&eL("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){let e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length,n=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){let s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=n){let a=n++,u=e[a];t[u.uuid]=l,e[l]=u,t[o]=a,e[a]=s;for(let e=0;e!==i;++e){let t=r[e],i=t[a],n=t[l];t[l]=i,t[a]=n}}}this.nCachedObjects_=n}uncache(){let e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length,n=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){let o=arguments[s],l=o.uuid,u=t[l];if(void 0!==u)if(delete t[l],u<n){let s=--n,o=e[s],l=--a,c=e[l];t[o.uuid]=u,e[u]=o,t[c.uuid]=s,e[s]=c,e.pop();for(let e=0;e!==i;++e){let t=r[e],i=t[s],n=t[l];t[u]=i,t[s]=n,t.pop()}}else{let n=--a,s=e[n];n>0&&(t[s.uuid]=u),e[u]=s,e.pop();for(let e=0;e!==i;++e){let t=r[e];t[u]=t[n],t.pop()}}}this.nCachedObjects_=n}subscribe_(e,t){let r=this._bindingsIndicesByPath,i=r[e],n=this._bindings;if(void 0!==i)return n[i];let a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=Array(l);i=n.length,r[e]=i,a.push(e),s.push(t),n.push(c);for(let r=u,i=o.length;r!==i;++r){let i=o[r];c[r]=new ok(i,e,t)}return c}unsubscribe_(e){let t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){let i=this._paths,n=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=r,a[r]=o,a.pop(),n[r]=n[s],n.pop(),i[r]=i[s],i.pop()}}}class oV{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const n=t.tracks,a=n.length,s=Array(a),o={endingStart:2400,endingEnd:2400};for(let e=0;e!==a;++e){const t=n[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r=!1){if(e.fadeOut(t),this.fadeIn(t),!0===r){let r=this._clip.duration,i=e._clip.duration;e.warp(1,i/r,t),this.warp(r/i,1,t)}return this}crossFadeTo(e,t,r=!1){return e.crossFadeFrom(this,t,r)}stopFading(){let e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){let i=this._mixer,n=i.time,a=this.timeScale,s=this._timeScaleInterpolant;null===s&&(s=i._lendControlInterpolant(),this._timeScaleInterpolant=s);let o=s.parameterPositions,l=s.sampleValues;return o[0]=n,o[1]=n+r,l[0]=e/a,l[1]=t/a,this}stopWarping(){let e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled)return void this._updateWeight(e);let n=this._startTime;if(null!==n){let i=(e-n)*r;i<0||0===r?t=0:(this._startTime=null,t=r*i)}t*=this._updateTimeScale(e);let a=this._updateTime(t),s=this._updateWeight(e);if(s>0){let e=this._interpolants,t=this._propertyBindings;if(2501===this.blendMode)for(let r=0,i=e.length;r!==i;++r)e[r].evaluate(a),t[r].accumulateAdditive(s);else for(let r=0,n=e.length;r!==n;++r)e[r].evaluate(a),t[r].accumulate(i,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;let r=this._weightInterpolant;if(null!==r){let i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;let r=this._timeScaleInterpolant;null!==r&&(t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){let t=this._clip.duration,r=this.loop,i=this.time+e,n=this._loopCount,a=2202===r;if(0===e)return -1===n?i:a&&(1&n)==1?t-i:i;if(2200===r){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));s:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break s}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=t||i<0){let r=Math.floor(i/t);i-=t*r,n+=Math.abs(r);let s=this.repetitions-n;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){let t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:r})}}else this.time=i;if(a&&(1&n)==1)return t-i}return i}_setEndings(e,t,r){let i=this._interpolantSettings;r?(i.endingStart=2401,i.endingEnd=2401):(e?i.endingStart=this.zeroSlopeAtStart?2401:2400:i.endingStart=2402,t?i.endingEnd=this.zeroSlopeAtEnd?2401:2400:i.endingEnd=2402)}_scheduleFading(e,t,r){let i=this._mixer,n=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);let s=a.parameterPositions,o=a.sampleValues;return s[0]=n,o[0]=t,s[1]=n+e,o[1]=r,this}}let oq=new Float32Array(1);class oG extends eB{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){let r=e._localRoot||this._root,i=e._clip.tracks,n=i.length,a=e._propertyBindings,s=e._interpolants,o=r.uuid,l=this._bindingsByRootAndName,u=l[o];void 0===u&&(u={},l[o]=u);for(let e=0;e!==n;++e){let n=i[e],l=n.name,c=u[l];if(void 0!==c)++c.referenceCount,a[e]=c;else{if(void 0!==(c=a[e])){null===c._cacheIndex&&(++c.referenceCount,this._addInactiveBinding(c,o,l));continue}let i=t&&t._propertyBindings[e].binding.parsedPath;c=new oI(ok.create(r,l,i),n.ValueTypeName,n.getValueSize()),++c.referenceCount,this._addInactiveBinding(c,o,l),a[e]=c}s[e].resultBuffer=c.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){let t=(e._localRoot||this._root).uuid,r=e._clip.uuid,i=this._actionsByClip[r];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,r,t)}let t=e._propertyBindings;for(let e=0,r=t.length;e!==r;++e){let r=t[e];0==r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){let t=e._propertyBindings;for(let e=0,r=t.length;e!==r;++e){let r=t[e];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){let t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,r){let i=this._actions,n=this._actionsByClip,a=n[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{let t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[r]=e}_removeInactiveAction(e){let t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;let n=e._clip.uuid,a=this._actionsByClip,s=a[n],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null;let c=s.actionByRoot,h=(e._localRoot||this._root).uuid;delete c[h],0===o.length&&delete a[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){let t=e._propertyBindings;for(let e=0,r=t.length;e!==r;++e){let r=t[e];0==--r.referenceCount&&this._removeInactiveBinding(r)}}_lendAction(e){let t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackAction(e){let t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_addInactiveBinding(e,t,r){let i=this._bindingsByRootAndName,n=this._bindings,a=i[t];void 0===a&&(a={},i[t]=a),a[r]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){let t=this._bindings,r=e.binding,i=r.rootNode.uuid,n=r.path,a=this._bindingsByRootAndName,s=a[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[n],0===Object.keys(s).length&&delete a[i]}_lendBinding(e){let t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_takeBackBinding(e){let t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,n=t[i];e._cacheIndex=i,t[i]=e,n._cacheIndex=r,t[r]=n}_lendControlInterpolant(){let e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new sx(new Float32Array(2),new Float32Array(2),1,oq)).__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){let t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];e.__cacheIndex=i,t[i]=e,n.__cacheIndex=r,t[r]=n}clipAction(e,t,r){let i=t||this._root,n=i.uuid,a="string"==typeof e?sN.findByName(i,e):e,s=null!==a?a.uuid:e,o=this._actionsByClip[s],l=null;if(void 0===r&&(r=null!==a?a.blendMode:2500),void 0!==o){let e=o.actionByRoot[n];if(void 0!==e&&e.blendMode===r)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;let u=new oV(this,a,t,r);return this._bindAction(u,l),this._addInactiveAction(u,s,n),u}existingAction(e,t){let r=t||this._root,i=r.uuid,n="string"==typeof e?sN.findByName(r,e):e,a=n?n.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[i]||null}stopAllAction(){let e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;let t=this._actions,r=this._nActiveActions,i=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==r;++s)t[s]._update(i,e,n,a);let s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){let t=this._actions,r=e.uuid,i=this._actionsByClip,n=i[r];if(void 0!==n){let e=n.knownActions;for(let r=0,i=e.length;r!==i;++r){let i=e[r];this._deactivateAction(i);let n=i._cacheIndex,a=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,a._cacheIndex=n,t[n]=a,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[r]}}uncacheRoot(e){let t=e.uuid,r=this._actionsByClip;for(let e in r){let i=r[e].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}let i=this._bindingsByRootAndName[t];if(void 0!==i)for(let e in i){let t=i[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){let r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class oH extends ti{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=r,this.texture=new to(null,e,t,r),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class oj{constructor(e){this.value=e}clone(){return new oj(void 0===this.value.clone?this.value:this.value.clone())}}let oW=0;class oX extends eB{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:oW++}),this.name="",this.usage=35044,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){let t=this.uniforms.indexOf(e);return -1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;let t=e.uniforms;this.uniforms.length=0;for(let e=0,r=t.length;e<r;e++){let r=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0;e<r.length;e++)this.uniforms.push(r[e].clone())}return this}clone(){return new this.constructor().copy(this)}}class oQ extends iv{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){let t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){let t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class o${constructor(e,t,r,i,n,a=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=n,this.normalized=a,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}let oY=new tF;class oK{constructor(e,t,r=0,i=1/0){this.ray=new tB(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new tX,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):eL("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return oY.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(oY),this}intersectObject(e,t=!0,r=[]){return oJ(e,this,r,t),r.sort(oZ),r}intersectObjects(e,t=!0,r=[]){for(let i=0,n=e.length;i<n;i++)oJ(e[i],this,r,t);return r.sort(oZ),r}}function oZ(e,t){return e.distance-t.distance}function oJ(e,t,r,i){let n=!0;if(e.layers.test(t.layers)&&!1===e.raycast(t,r)&&(n=!1),!0===n&&!0===i){let i=e.children;for(let e=0,n=i.length;e<n;e++)oJ(i[e],t,r,!0)}}class o0{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,void 0!==e.hidden&&(this._pageVisibilityHandler=o1.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){null!==this._pageVisibilityHandler&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return null!==this._pageVisibilityHandler&&!0===this._document.hidden?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(void 0!==e?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function o1(){!1===this._document.hidden&&this.reset()}class o2{constructor(e=1,t=0,r=0){this.radius=e,this.phi=t,this.theta=r}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=eV(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(eV(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class o3{constructor(e=1,t=0,r=0){this.radius=e,this.theta=t,this.y=r}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}class o4{constructor(e,t,r,i){o4.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,r,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let r=0;r<4;r++)this.elements[r]=e[r+t];return this}set(e,t,r,i){let n=this.elements;return n[0]=e,n[2]=t,n[1]=r,n[3]=i,this}}let o5=new eX;class o8{constructor(e=new eX(Infinity,Infinity),t=new eX(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let r=o5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=Infinity,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,o5).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let o6=new e$,o7=new e$,o9=new e$,le=new e$,lt=new e$,lr=new e$,li=new e$;class ln{constructor(e=new e$,t=new e$){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){o6.subVectors(e,this.start),o7.subVectors(this.end,this.start);let r=o7.dot(o7),i=o7.dot(o6)/r;return t&&(i=eV(i,0,1)),i}closestPointToPoint(e,t,r){let i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=lr,r=li){let i,n,a=1e-8*1e-8,s=this.start,o=e.start,l=this.end,u=e.end;o9.subVectors(l,s),le.subVectors(u,o),lt.subVectors(s,o);let c=o9.dot(o9),h=le.dot(le),d=le.dot(lt);if(c<=a&&h<=a)return t.copy(s),r.copy(o),t.sub(r),t.dot(t);if(c<=a)i=0,n=eV(n=d/h,0,1);else{let e=o9.dot(lt);if(h<=a)n=0,i=eV(-e/c,0,1);else{let t=o9.dot(le),r=c*h-t*t;i=0!==r?eV((t*d-e*h)/r,0,1):0,(n=(t*i+d)/h)<0?(n=0,i=eV(-e/c,0,1)):n>1&&(n=1,i=eV((t-e)/c,0,1))}}return t.copy(s).add(o9.multiplyScalar(i)),r.copy(o).add(le.multiplyScalar(n)),t.sub(r),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}let la=new e$;class ls extends t9{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new rX,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1;e<32;e++,t++){const r=e/32*Math.PI*2,n=t/32*Math.PI*2;i.push(Math.cos(r),Math.sin(r),1,Math.cos(n),Math.sin(n),1)}r.setAttribute("position",new rk(i,3));const n=new nC({fog:!1,toneMapped:!1});this.cone=new nz(r,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);let e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),la.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(la),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}let lo=new e$,ll=new tF,lu=new tF;class lc extends nz{constructor(e){const t=function e(t){let r=[];!0===t.isBone&&r.push(t);for(let i=0;i<t.children.length;i++)r.push(...e(t.children[i]));return r}(e),r=new rX,i=[],n=[];for(let e=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(0,0,0),n.push(0,0,0))}r.setAttribute("position",new rk(i,3)),r.setAttribute("color",new rk(n,3)),super(r,new nC({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new ry(255),s=new ry(65280);this.setColors(a,s)}updateMatrixWorld(e){let t=this.bones,r=this.geometry,i=r.getAttribute("position");lu.copy(this.root.matrixWorld).invert();for(let e=0,r=0;e<t.length;e++){let n=t[e];n.parent&&n.parent.isBone&&(ll.multiplyMatrices(lu,n.matrixWorld),lo.setFromMatrixPosition(ll),i.setXYZ(r,lo.x,lo.y,lo.z),ll.multiplyMatrices(lu,n.parent.matrixWorld),lo.setFromMatrixPosition(ll),i.setXYZ(r+1,lo.x,lo.y,lo.z),r+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){let r=this.geometry.getAttribute("color");for(let i=0;i<r.count;i+=2)r.setXYZ(i,e.r,e.g,e.b),r.setXYZ(i+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lh extends r5{constructor(e,t,r){super(new a2(t,4,2),new rb({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}let ld=new e$,lA=new ry,lp=new ry;class lf extends t9{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new aZ(t);i.rotateY(.5*Math.PI),this.material=new rb({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const n=new Float32Array(3*i.getAttribute("position").count);i.setAttribute("color",new rN(n,3)),this.add(new r5(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){let e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{let t=e.geometry.getAttribute("color");lA.copy(this.light.color),lp.copy(this.light.groundColor);for(let e=0,r=t.count;e<r;e++){let i=e<r/2?lA:lp;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(ld.setFromMatrixPosition(this.light.matrixWorld).negate())}}class lm extends nz{constructor(e=10,t=10,r=4473924,i=8947848){r=new ry(r),i=new ry(i);const n=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,u=0,c=-s;e<=t;e++,c+=a){o.push(-s,0,c,s,0,c),o.push(c,0,-s,c,0,s);const t=e===n?r:i;t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3,t.toArray(l,u),u+=3}const u=new rX;u.setAttribute("position",new rk(o,3)),u.setAttribute("color",new rk(l,3)),super(u,new nC({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class lg extends nz{constructor(e=10,t=16,r=8,i=64,n=4473924,a=8947848){n=new ry(n),a=new ry(a);const s=[],o=[];if(t>1)for(let r=0;r<t;r++){const i=r/t*(2*Math.PI),l=Math.sin(i)*e,u=Math.cos(i)*e;s.push(0,0,0),s.push(l,0,u);const c=1&r?n:a;o.push(c.r,c.g,c.b),o.push(c.r,c.g,c.b)}for(let t=0;t<r;t++){const l=1&t?n:a,u=e-e/r*t;for(let e=0;e<i;e++){let t=e/i*(2*Math.PI),r=Math.sin(t)*u,n=Math.cos(t)*u;s.push(r,0,n),o.push(l.r,l.g,l.b),r=Math.sin(t=(e+1)/i*(2*Math.PI))*u,n=Math.cos(t)*u,s.push(r,0,n),o.push(l.r,l.g,l.b)}}const l=new rX;l.setAttribute("position",new rk(s,3)),l.setAttribute("color",new rk(o,3)),super(l,new nC({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}let ly=new e$,lv=new e$,lx=new e$;class l_ extends t9{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new rX;i.setAttribute("position",new rk([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const n=new nC({fog:!1,toneMapped:!1});this.lightPlane=new nF(i,n),this.add(this.lightPlane),(i=new rX).setAttribute("position",new rk([0,0,0,0,0,1],3)),this.targetLine=new nF(i,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),ly.setFromMatrixPosition(this.light.matrixWorld),lv.setFromMatrixPosition(this.light.target.matrixWorld),lx.subVectors(lv,ly),this.lightPlane.lookAt(lv),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(lv),this.targetLine.scale.z=lx.length()}}let lb=new e$,lS=new ii;class lT extends nz{constructor(e){const t=new rX,r=new nC({color:0xffffff,vertexColors:!0,toneMapped:!1}),i=[],n=[],a={};function s(e,t){o(e),o(t)}function o(e){i.push(0,0,0),n.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new rk(i,3)),t.setAttribute("color",new rk(n,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new ry(0xffaa00),u=new ry(0xff0000),c=new ry(43775),h=new ry(0xffffff),d=new ry(3355443);this.setColors(l,u,c,h,d)}setColors(e,t,r,i,n){let a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,n.r,n.g,n.b),a.setXYZ(41,n.r,n.g,n.b),a.setXYZ(42,n.r,n.g,n.b),a.setXYZ(43,n.r,n.g,n.b),a.setXYZ(44,n.r,n.g,n.b),a.setXYZ(45,n.r,n.g,n.b),a.setXYZ(46,n.r,n.g,n.b),a.setXYZ(47,n.r,n.g,n.b),a.setXYZ(48,n.r,n.g,n.b),a.setXYZ(49,n.r,n.g,n.b),a.needsUpdate=!0,this}update(){let e,t,r=this.geometry,i=this.pointMap;if(lS.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),!0===this.camera.reversedDepth)e=1,t=0;else if(2e3===this.camera.coordinateSystem)e=-1,t=1;else if(2001===this.camera.coordinateSystem)e=0,t=1;else throw Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);lw("c",i,r,lS,0,0,e),lw("t",i,r,lS,0,0,t),lw("n1",i,r,lS,-1,-1,e),lw("n2",i,r,lS,1,-1,e),lw("n3",i,r,lS,-1,1,e),lw("n4",i,r,lS,1,1,e),lw("f1",i,r,lS,-1,-1,t),lw("f2",i,r,lS,1,-1,t),lw("f3",i,r,lS,-1,1,t),lw("f4",i,r,lS,1,1,t),lw("u1",i,r,lS,.7,1.1,e),lw("u2",i,r,lS,-.7,1.1,e),lw("u3",i,r,lS,0,2,e),lw("cf1",i,r,lS,-1,0,t),lw("cf2",i,r,lS,1,0,t),lw("cf3",i,r,lS,0,-1,t),lw("cf4",i,r,lS,0,1,t),lw("cn1",i,r,lS,-1,0,e),lw("cn2",i,r,lS,1,0,e),lw("cn3",i,r,lS,0,-1,e),lw("cn4",i,r,lS,0,1,e),r.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function lw(e,t,r,i,n,a,s){lb.set(n,a,s).unproject(i);let o=t[e];if(void 0!==o){let e=r.getAttribute("position");for(let t=0,r=o.length;t<r;t++)e.setXYZ(o[t],lb.x,lb.y,lb.z)}}let lM=new tu;class lE extends nz{constructor(e,t=0xffff00){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new rX;n.setIndex(new rN(r,1)),n.setAttribute("position",new rN(i,3)),super(n,new nC({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(void 0!==this.object&&lM.setFromObject(this.object),lM.isEmpty())return;let e=lM.min,t=lM.max,r=this.geometry.attributes.position,i=r.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lC extends nz{constructor(e,t=0xffff00){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new rX;i.setIndex(new rN(r,1)),i.setAttribute("position",new rk([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new nC({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){let t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lR extends nF{constructor(e,t=1,r=0xffff00){const i=new rX;i.setAttribute("position",new rk([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new nC({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const n=new rX;n.setAttribute("position",new rk([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),n.computeBoundingSphere(),this.add(new r5(n,new rb({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}let lN=new e$;class lP extends t9{constructor(e=new e$(0,0,1),t=new e$(0,0,0),r=1,i=0xffff00,s=.2*r,o=.2*s){super(),this.type="ArrowHelper",void 0===n&&((n=new rX).setAttribute("position",new rk([0,0,0,0,1,0],3)),(a=new n6(.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new nF(n,new nC({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new r5(a,new rb({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{lN.set(e.z,0,-e.x).normalize();let t=Math.acos(e.y);this.quaternion.setFromAxisAngle(lN,t)}}setLength(e,t=.2*e,r=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class lI extends nz{constructor(e=1){const t=new rX;t.setAttribute("position",new rk([0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],3)),t.setAttribute("color",new rk([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(t,new nC({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,r){let i=new ry,n=this.geometry.attributes.color.array;return i.set(e),i.toArray(n,0),i.toArray(n,3),i.set(t),i.toArray(n,6),i.toArray(n,9),i.set(r),i.toArray(n,12),i.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lL{constructor(){this.type="ShapePath",this.color=new ry,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new aM,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,n,a){return this.currentPath.bezierCurveTo(e,t,r,i,n,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){let t,r,i,n,a,s=aj.isClockWise,o=this.subPaths;if(0===o.length)return[];let l=[];if(1===o.length)return r=o[0],(i=new aE).curves=r.curves,l.push(i),l;let u=!s(o[0].getPoints());u=e?!u:u;let c=[],h=[],d=[],A=0;h[0]=void 0,d[A]=[];for(let i=0,a=o.length;i<a;i++)t=s(n=(r=o[i]).getPoints()),(t=e?!t:t)?(!u&&h[A]&&A++,h[A]={s:new aE,p:n},h[A].s.curves=r.curves,u&&A++,d[A]=[]):d[A].push({h:r,p:n[0]});if(!h[0])return function(e){let t=[];for(let r=0,i=e.length;r<i;r++){let i=e[r],n=new aE;n.curves=i.curves,t.push(n)}return t}(o);if(h.length>1){let e=!1,t=0;for(let e=0,t=h.length;e<t;e++)c[e]=[];for(let r=0,i=h.length;r<i;r++){let i=d[r];for(let n=0;n<i.length;n++){let a=i[n],s=!0;for(let i=0;i<h.length;i++)(function(e,t){let r=t.length,i=!1;for(let n=r-1,a=0;a<r;n=a++){let r=t[n],s=t[a],o=s.x-r.x,l=s.y-r.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(r=t[a],o=-o,s=t[n],l=-l),e.y<r.y||e.y>s.y)continue;if(e.y===r.y){if(e.x===r.x)return!0}else{let t=l*(e.x-r.x)-o*(e.y-r.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==r.y)continue;if(s.x<=e.x&&e.x<=r.x||r.x<=e.x&&e.x<=s.x)return!0}}return i})(a.p,h[i].p)&&(r!==i&&t++,s?(s=!1,c[i].push(a)):e=!0);s&&c[r].push(a)}}t>0&&!1===e&&(d=c)}for(let e=0,t=h.length;e<t;e++){i=h[e].s,l.push(i),a=d[e];for(let e=0,t=a.length;e<t;e++)i.holes.push(a[e].h)}return l}}class lD extends eB{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){void 0===e?eI("Controls: connect() now requires an element."):(null!==this.domElement&&this.disconnect(),this.domElement=e)}disconnect(){}dispose(){}update(){}}function lB(e,t,r,i){let n=function(e){switch(e){case 1009:case 1010:return{byteLength:1,components:1};case 1012:case 1011:case 1016:return{byteLength:2,components:1};case 1017:case 1018:return{byteLength:2,components:4};case 1014:case 1013:case 1015:return{byteLength:4,components:1};case 35902:case 35899:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${e}.`)}(i);switch(r){case 1021:return e*t;case 1028:case 1029:return e*t/n.components*n.byteLength;case 1030:case 1031:return e*t*2/n.components*n.byteLength;case 1022:return e*t*3/n.components*n.byteLength;case 1023:case 1033:return e*t*4/n.components*n.byteLength;case 33776:case 33777:case 36196:case 37492:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case 33778:case 33779:case 37496:case 37808:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case 35841:case 35843:return Math.max(e,16)*Math.max(t,8)/4;case 35840:case 35842:return Math.max(e,8)*Math.max(t,8)/2;case 37809:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case 37810:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case 37811:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case 37812:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case 37813:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case 37814:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case 37815:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case 37816:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case 37817:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case 37818:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case 37819:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case 37820:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case 37821:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case 36492:case 36494:case 36495:case 36285:case 36286:return Math.ceil(e/4)*Math.ceil(t/4)*16;case 36283:case 36284:return Math.ceil(e/4)*Math.ceil(t/4)*8}throw Error(`Unable to determine texture byte length for ${r} format.`)}class lF{static contain(e,t){let r;return(r=e.image&&e.image.width?e.image.width/e.image.height:1)>t?(e.repeat.x=1,e.repeat.y=r/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/r,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e}static cover(e,t){let r;return(r=e.image&&e.image.width?e.image.width/e.image.height:1)>t?(e.repeat.x=t/r,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=r/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e}static fill(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e}static getByteLength(e,t,r,i){return lB(e,t,r,i)}}function lO(){let e=null,t=!1,r=null,i=null;function n(t,a){r(t,a),i=e.requestAnimationFrame(n)}return{start:function(){!0===t||null!==r&&(i=e.requestAnimationFrame(n),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function lU(e){let t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(r){r.isInterleavedBufferAttribute&&(r=r.data);let i=t.get(r);i&&(e.deleteBuffer(i.buffer),t.delete(r))},update:function(r,i){if(r.isInterleavedBufferAttribute&&(r=r.data),r.isGLBufferAttribute){let e=t.get(r);(!e||e.version<r.version)&&t.set(r,{buffer:r.buffer,type:r.type,bytesPerElement:r.elementSize,version:r.version});return}let n=t.get(r);if(void 0===n)t.set(r,function(t,r){let i,n=t.array,a=t.usage,s=n.byteLength,o=e.createBuffer();if(e.bindBuffer(r,o),e.bufferData(r,n,a),t.onUploadCallback(),n instanceof Float32Array)i=e.FLOAT;else if("undefined"!=typeof Float16Array&&n instanceof Float16Array)i=e.HALF_FLOAT;else if(n instanceof Uint16Array)i=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(n instanceof Int16Array)i=e.SHORT;else if(n instanceof Uint32Array)i=e.UNSIGNED_INT;else if(n instanceof Int32Array)i=e.INT;else if(n instanceof Int8Array)i=e.BYTE;else if(n instanceof Uint8Array)i=e.UNSIGNED_BYTE;else if(n instanceof Uint8ClampedArray)i=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+n);return{buffer:o,type:i,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version,size:s}}(r,i));else if(n.version<r.version){if(n.size!==r.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){let n=r.array,a=r.updateRanges;if(e.bindBuffer(i,t),0===a.length)e.bufferSubData(i,0,n);else{a.sort((e,t)=>e.start-t.start);let t=0;for(let e=1;e<a.length;e++){let r=a[t],i=a[e];i.start<=r.start+r.count+1?r.count=Math.max(r.count,i.start+i.count-r.start):a[++t]=i}a.length=t+1;for(let t=0,r=a.length;t<r;t++){let r=a[t];e.bufferSubData(i,r.start*n.BYTES_PER_ELEMENT,n,r.start,r.count)}r.clearUpdateRanges()}r.onUploadCallback()}(n.buffer,r,i),n.version=r.version}}}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"181"}})),"undefined"!=typeof window&&(window.__THREE__?eI("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="181");let lk={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n		emissiveColor = sRGBTransferEOTF( emissiveColor );\n	#endif\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"uniform sampler2D dfgLUT;\nstruct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	vec2 uv = vec2( roughness, dotNV );\n	return texture2D( dfgLUT, uv ).rg;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\nvec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );\n	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );\n	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;\n	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;\n	float Ess_V = dfgV.x + dfgV.y;\n	float Ess_L = dfgL.x + dfgL.y;\n	float Ems_V = 1.0 - Ess_V;\n	float Ems_L = 1.0 - Ess_L;\n	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;\n	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );\n	float compensationFactor = Ems_V * Ems_L;\n	vec3 multiScatter = Fms * compensationFactor;\n	return singleScatter + multiScatter;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGARITHMIC_DEPTH_BUFFER\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n		#ifdef USE_REVERSED_DEPTH_BUFFER\n			return step( depth, compare );\n		#else\n			return step( compare, depth );\n		#endif\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		#ifdef USE_REVERSED_DEPTH_BUFFER\n			float hard_shadow = step( distribution.x, compare );\n		#else\n			float hard_shadow = step( compare, distribution.x );\n		#endif\n		if ( hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		#else\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	#ifdef USE_REVERSED_DEPTH_BUFFER\n		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n	#else\n		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n	#endif\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix[ 3 ];\n	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},lz={common:{diffuse:{value:new ry(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new eZ},alphaMap:{value:null},alphaMapTransform:{value:new eZ},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new eZ}},envmap:{envMap:{value:null},envMapRotation:{value:new eZ},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new eZ}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new eZ}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new eZ},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new eZ},normalScale:{value:new eX(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new eZ},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new eZ}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new eZ}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new eZ}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ry(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ry(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new eZ},alphaTest:{value:0},uvTransform:{value:new eZ}},sprite:{diffuse:{value:new ry(0xffffff)},opacity:{value:1},center:{value:new eX(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new eZ},alphaMap:{value:null},alphaMapTransform:{value:new eZ},alphaTest:{value:0}}},lV={basic:{uniforms:r9([lz.common,lz.specularmap,lz.envmap,lz.aomap,lz.lightmap,lz.fog]),vertexShader:lk.meshbasic_vert,fragmentShader:lk.meshbasic_frag},lambert:{uniforms:r9([lz.common,lz.specularmap,lz.envmap,lz.aomap,lz.lightmap,lz.emissivemap,lz.bumpmap,lz.normalmap,lz.displacementmap,lz.fog,lz.lights,{emissive:{value:new ry(0)}}]),vertexShader:lk.meshlambert_vert,fragmentShader:lk.meshlambert_frag},phong:{uniforms:r9([lz.common,lz.specularmap,lz.envmap,lz.aomap,lz.lightmap,lz.emissivemap,lz.bumpmap,lz.normalmap,lz.displacementmap,lz.fog,lz.lights,{emissive:{value:new ry(0)},specular:{value:new ry(1118481)},shininess:{value:30}}]),vertexShader:lk.meshphong_vert,fragmentShader:lk.meshphong_frag},standard:{uniforms:r9([lz.common,lz.envmap,lz.aomap,lz.lightmap,lz.emissivemap,lz.bumpmap,lz.normalmap,lz.displacementmap,lz.roughnessmap,lz.metalnessmap,lz.fog,lz.lights,{emissive:{value:new ry(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lk.meshphysical_vert,fragmentShader:lk.meshphysical_frag},toon:{uniforms:r9([lz.common,lz.aomap,lz.lightmap,lz.emissivemap,lz.bumpmap,lz.normalmap,lz.displacementmap,lz.gradientmap,lz.fog,lz.lights,{emissive:{value:new ry(0)}}]),vertexShader:lk.meshtoon_vert,fragmentShader:lk.meshtoon_frag},matcap:{uniforms:r9([lz.common,lz.bumpmap,lz.normalmap,lz.displacementmap,lz.fog,{matcap:{value:null}}]),vertexShader:lk.meshmatcap_vert,fragmentShader:lk.meshmatcap_frag},points:{uniforms:r9([lz.points,lz.fog]),vertexShader:lk.points_vert,fragmentShader:lk.points_frag},dashed:{uniforms:r9([lz.common,lz.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lk.linedashed_vert,fragmentShader:lk.linedashed_frag},depth:{uniforms:r9([lz.common,lz.displacementmap]),vertexShader:lk.depth_vert,fragmentShader:lk.depth_frag},normal:{uniforms:r9([lz.common,lz.bumpmap,lz.normalmap,lz.displacementmap,{opacity:{value:1}}]),vertexShader:lk.meshnormal_vert,fragmentShader:lk.meshnormal_frag},sprite:{uniforms:r9([lz.sprite,lz.fog]),vertexShader:lk.sprite_vert,fragmentShader:lk.sprite_frag},background:{uniforms:{uvTransform:{value:new eZ},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:lk.background_vert,fragmentShader:lk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new eZ}},vertexShader:lk.backgroundCube_vert,fragmentShader:lk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:lk.cube_vert,fragmentShader:lk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lk.equirect_vert,fragmentShader:lk.equirect_frag},distanceRGBA:{uniforms:r9([lz.common,lz.displacementmap,{referencePosition:{value:new e$},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lk.distanceRGBA_vert,fragmentShader:lk.distanceRGBA_frag},shadow:{uniforms:r9([lz.lights,lz.fog,{color:{value:new ry(0)},opacity:{value:1}}]),vertexShader:lk.shadow_vert,fragmentShader:lk.shadow_frag}};lV.physical={uniforms:r9([lV.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new eZ},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new eZ},clearcoatNormalScale:{value:new eX(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new eZ},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new eZ},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new eZ},sheen:{value:0},sheenColor:{value:new ry(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new eZ},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new eZ},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new eZ},transmissionSamplerSize:{value:new eX},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new eZ},attenuationDistance:{value:0},attenuationColor:{value:new ry(0)},specularColor:{value:new ry(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new eZ},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new eZ},anisotropyVector:{value:new eX},anisotropyMap:{value:null},anisotropyMapTransform:{value:new eZ}}]),vertexShader:lk.meshphysical_vert,fragmentShader:lk.meshphysical_frag};let lq={r:0,b:0,g:0},lG=new tW,lH=new tF;function lj(e,t,r,i,n,a,s){let o,l,u=new ry(0),c=+(!0!==a),h=null,d=0,A=null;function p(e){let i=!0===e.isScene?e.background:null;return i&&i.isTexture&&(i=(e.backgroundBlurriness>0?r:t).get(i)),i}function f(t,r){t.getRGB(lq,ie(e)),i.buffers.color.setClear(lq.r,lq.g,lq.b,r,s)}return{getClearColor:function(){return u},setClearColor:function(e,t=1){u.set(e),f(u,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){f(u,c=e)},render:function(t){let r=!1,n=p(t);null===n?f(u,c):n&&n.isColor&&(f(n,1),r=!0);let a=e.xr.getEnvironmentBlendMode();"additive"===a?i.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===a&&i.buffers.color.setClear(0,0,0,0,s),(e.autoClear||r)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,r){let i=p(r);i&&(i.isCubeTexture||306===i.mapping)?(void 0===l&&((l=new r5(new r6(1,1,1),new ir({name:"BackgroundCubeMaterial",uniforms:r7(lV.backgroundCube.uniforms),vertexShader:lV.backgroundCube.vertexShader,fragmentShader:lV.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(l)),lG.copy(r.backgroundRotation),lG.x*=-1,lG.y*=-1,lG.z*=-1,i.isCubeTexture&&!1===i.isRenderTargetTexture&&(lG.y*=-1,lG.z*=-1),l.material.uniforms.envMap.value=i,l.material.uniforms.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=r.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4(lH.makeRotationFromEuler(lG)),l.material.toneMapped=e2.getTransfer(i.colorSpace)!==eg,(h!==i||d!==i.version||A!==e.toneMapping)&&(l.material.needsUpdate=!0,h=i,d=i.version,A=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null)):i&&i.isTexture&&(void 0===o&&((o=new r5(new aJ(2,2),new ir({name:"BackgroundMaterial",uniforms:r7(lV.background.uniforms),vertexShader:lV.background.vertexShader,fragmentShader:lV.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(o)),o.material.uniforms.t2D.value=i,o.material.uniforms.backgroundIntensity.value=r.backgroundIntensity,o.material.toneMapped=e2.getTransfer(i.colorSpace)!==eg,!0===i.matrixAutoUpdate&&i.updateMatrix(),o.material.uniforms.uvTransform.value.copy(i.matrix),(h!==i||d!==i.version||A!==e.toneMapping)&&(o.material.needsUpdate=!0,h=i,d=i.version,A=e.toneMapping),o.layers.enableAll(),t.unshift(o,o.geometry,o.material,0,0,null))},dispose:function(){void 0!==l&&(l.geometry.dispose(),l.material.dispose(),l=void 0),void 0!==o&&(o.geometry.dispose(),o.material.dispose(),o=void 0)}}}function lW(e,t){let r=e.getParameter(e.MAX_VERTEX_ATTRIBS),i={},n=u(null),a=n,s=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function u(e){let t=[],i=[],n=[];for(let e=0;e<r;e++)t[e]=0,i[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function c(){let e=a.newAttributes;for(let t=0,r=e.length;t<r;t++)e[t]=0}function h(e){d(e,0)}function d(t,r){let i=a.newAttributes,n=a.enabledAttributes,s=a.attributeDivisors;i[t]=1,0===n[t]&&(e.enableVertexAttribArray(t),n[t]=1),s[t]!==r&&(e.vertexAttribDivisor(t,r),s[t]=r)}function A(){let t=a.newAttributes,r=a.enabledAttributes;for(let i=0,n=r.length;i<n;i++)r[i]!==t[i]&&(e.disableVertexAttribArray(i),r[i]=0)}function p(t,r,i,n,a,s,o){!0===o?e.vertexAttribIPointer(t,r,i,a,s):e.vertexAttribPointer(t,r,i,n,a,s)}function f(){m(),s=!0,a!==n&&o((a=n).object)}function m(){n.geometry=null,n.program=null,n.wireframe=!1}return{setup:function(r,n,l,f,m){var g,y;let v,x,_,b,S=!1,T=(g=f,y=l,v=!0===n.wireframe,void 0===(x=i[g.id])&&(x={},i[g.id]=x),void 0===(_=x[y.id])&&(_={},x[y.id]=_),void 0===(b=_[v])&&(b=u(e.createVertexArray()),_[v]=b),b);a!==T&&o((a=T).object),(S=function(e,t,r,i){let n=a.attributes,s=t.attributes,o=0,l=r.getAttributes();for(let t in l)if(l[t].location>=0){let r=n[t],i=s[t];if(void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor)),void 0===r||r.attribute!==i||i&&r.data!==i.data)return!0;o++}return a.attributesNum!==o||a.index!==i}(r,f,l,m))&&function(e,t,r,i){let n={},s=t.attributes,o=0,l=r.getAttributes();for(let t in l)if(l[t].location>=0){let r=s[t];void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor));let i={};i.attribute=r,r&&r.data&&(i.data=r.data),n[t]=i,o++}a.attributes=n,a.attributesNum=o,a.index=i}(r,f,l,m),null!==m&&t.update(m,e.ELEMENT_ARRAY_BUFFER),(S||s)&&(s=!1,function(r,i,n,a){c();let s=a.attributes,o=n.getAttributes(),l=i.defaultAttributeValues;for(let i in o){let n=o[i];if(n.location>=0){let o=s[i];if(void 0===o&&("instanceMatrix"===i&&r.instanceMatrix&&(o=r.instanceMatrix),"instanceColor"===i&&r.instanceColor&&(o=r.instanceColor)),void 0!==o){let i=o.normalized,s=o.itemSize,l=t.get(o);if(void 0===l)continue;let u=l.buffer,c=l.type,A=l.bytesPerElement,f=c===e.INT||c===e.UNSIGNED_INT||1013===o.gpuType;if(o.isInterleavedBufferAttribute){let t=o.data,l=t.stride,m=o.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)d(n.location+e,t.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<n.locationSize;e++)h(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<n.locationSize;e++)p(n.location+e,s/n.locationSize,c,i,l*A,(m+s/n.locationSize*e)*A,f)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)d(n.location+e,o.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<n.locationSize;e++)h(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<n.locationSize;e++)p(n.location+e,s/n.locationSize,c,i,s*A,s/n.locationSize*e*A,f)}}else if(void 0!==l){let t=l[i];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(n.location,t);break;case 3:e.vertexAttrib3fv(n.location,t);break;case 4:e.vertexAttrib4fv(n.location,t);break;default:e.vertexAttrib1fv(n.location,t)}}}}A()}(r,n,l,f),null!==m&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(m).buffer))},reset:f,resetDefaultState:m,dispose:function(){for(let e in f(),i){let t=i[e];for(let e in t){let r=t[e];for(let e in r)l(r[e].object),delete r[e];delete t[e]}delete i[e]}},releaseStatesOfGeometry:function(e){if(void 0===i[e.id])return;let t=i[e.id];for(let e in t){let r=t[e];for(let e in r)l(r[e].object),delete r[e];delete t[e]}delete i[e.id]},releaseStatesOfProgram:function(e){for(let t in i){let r=i[t];if(void 0===r[e.id])continue;let n=r[e.id];for(let e in n)l(n[e].object),delete n[e];delete r[e.id]}},initAttributes:c,enableAttribute:h,disableUnusedAttributes:A}}function lX(e,t,r){let i;function n(t,n,a){0!==a&&(e.drawArraysInstanced(i,t,n,a),r.update(n,i,a))}this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i,1)},this.renderInstances=n,this.renderMultiDraw=function(e,n,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,e,0,n,0,a);let s=0;for(let e=0;e<a;e++)s+=n[e];r.update(s,i,1)},this.renderMultiDrawInstances=function(e,a,s,o){if(0===s)return;let l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)n(e[t],a[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(i,e,0,a,0,o,0,s);let t=0;for(let e=0;e<s;e++)t+=a[e]*o[e];r.update(t,i,1)}}}function lQ(e,t,r,i){let n;function a(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let s=void 0!==r.precision?r.precision:"highp",o=a(s);o!==s&&(eI("WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);let l=!0===r.logarithmicDepthBuffer,u=!0===r.reversedDepthBuffer&&t.has("EXT_clip_control"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){let r=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:a,textureFormatReadable:function(t){return 1023===t||i.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(r){let n=1016===r&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return 1009===r||i.convert(r)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)||1015===r||!!n},precision:s,logarithmicDepthBuffer:l,reversedDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:h>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function l$(e){let t=this,r=null,i=0,n=!1,a=!1,s=new ni,o=new eZ,l={value:null,needsUpdate:!1};function u(e,r,i,n){let a=null!==e?e.length:0,u=null;if(0!==a){if(u=l.value,!0!==n||null===u){let t=i+4*a,n=r.matrixWorldInverse;o.getNormalMatrix(n),(null===u||u.length<t)&&(u=new Float32Array(t));for(let t=0,r=i;t!==a;++t,r+=4)s.copy(e[t]).applyMatrix4(n,o),s.normal.toArray(u,r),u[r+3]=s.constant}l.value=u,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,u}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let r=0!==e.length||t||0!==i||n;return n=t,i=e.length,r},this.beginShadows=function(){a=!0,u(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){r=u(e,t,0)},this.setState=function(s,o,c){let h=s.clippingPlanes,d=s.clipIntersection,A=s.clipShadows,p=e.get(s);if(n&&null!==h&&0!==h.length&&(!a||A)){let e=a?0:i,t=4*e,n=p.clippingState||null;l.value=n,n=u(h,o,t,c);for(let e=0;e!==t;++e)n[e]=r[e];p.clippingState=n,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}else a?u(null):(l.value!==r&&(l.value=r,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0)}}function lY(e){let t=new WeakMap;function r(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function i(e){let r=e.target;r.removeEventListener("dispose",i);let n=t.get(r);void 0!==n&&(t.delete(r),n.dispose())}return{get:function(n){if(n&&n.isTexture){let a=n.mapping;if(303===a||304===a)if(t.has(n))return r(t.get(n).texture,n.mapping);else{let a=n.image;if(!a||!(a.height>0))return null;{let s=new ih(a.height);return s.fromEquirectangularTexture(e,n),t.set(n,s),n.addEventListener("dispose",i),r(s.texture,n.mapping)}}}return n},dispose:function(){t=new WeakMap}}}let lK=[.125,.215,.35,.446,.526,.582],lZ=new s4,lJ=new ry,l0=null,l1=0,l2=0,l3=!1,l4=new e$;class l5{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,r=.1,i=100,n={}){let{size:a=256,position:s=l4}=n;l0=this._renderer.getRenderTarget(),l1=this._renderer.getActiveCubeFace(),l2=this._renderer.getActiveMipmapLevel(),l3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(a);let o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o,s),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=l9(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=l7(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose(),null!==this._backgroundBox&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._ggxMaterial&&this._ggxMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(l0,l1,l2),this._renderer.xr.enabled=l3,e.scissorTest=!1,l6(e,0,0,e.width,e.height)}_fromTexture(e,t){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),l0=this._renderer.getRenderTarget(),l1=this._renderer.getActiveCubeFace(),l2=this._renderer.getActiveMipmapLevel(),l3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:ef,depthBuffer:!1},i=l8(e,t,r);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){var n,a;null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=l8(e,t,r);let{_lodMax:i}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=function(e){let t=[],r=[],i=[],n=e,a=e-4+1+lK.length;for(let s=0;s<a;s++){let a=Math.pow(2,n);t.push(a);let o=1/a;s>e-4?o=lK[s-e+4-1]:0===s&&(o=0),r.push(o);let l=1/(a-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=new Float32Array(108),A=new Float32Array(72),p=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,r=e>2?0:-1,i=[t,r,0,t+2/3,r,0,t+2/3,r+1,0,t,r,0,t+2/3,r+1,0,t,r+1,0];d.set(i,18*e),A.set(h,12*e);let n=[e,e,e,e,e,e];p.set(n,6*e)}let f=new rX;f.setAttribute("position",new rN(d,3)),f.setAttribute("uv",new rN(A,2)),f.setAttribute("faceIndex",new rN(p,1)),i.push(new r5(f,null)),n>4&&n--}return{lodMeshes:i,sizeLods:t,sigmas:r}}(i)),this._blurMaterial=(n=i,new ir({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new e$(0,1,0)}},vertexShader:ue(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1})),this._ggxMaterial=(a=i,new ir({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:256,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:ue(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:0,depthTest:!1,depthWrite:!1}))}return i}_compileMaterial(e){let t=new r5(new rX,e);this._renderer.compile(t,lZ)}_sceneToCubeUV(e,t,r,i,n){let a=new il(90,1,t,r),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],l=this._renderer,u=l.autoClear,c=l.toneMapping;l.getClearColor(lJ),l.toneMapping=0,l.autoClear=!1,l.state.buffers.depth.getReversed()&&(l.setRenderTarget(i),l.clearDepth(),l.setRenderTarget(null)),null===this._backgroundBox&&(this._backgroundBox=new r5(new r6,new rb({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1})));let h=this._backgroundBox,d=h.material,A=!1,p=e.background;p?p.isColor&&(d.color.copy(p),e.background=null,A=!0):(d.color.copy(lJ),A=!0);for(let t=0;t<6;t++){let r=t%3;0===r?(a.up.set(0,s[t],0),a.position.set(n.x,n.y,n.z),a.lookAt(n.x+o[t],n.y,n.z)):1===r?(a.up.set(0,0,s[t]),a.position.set(n.x,n.y,n.z),a.lookAt(n.x,n.y+o[t],n.z)):(a.up.set(0,s[t],0),a.position.set(n.x,n.y,n.z),a.lookAt(n.x,n.y,n.z+o[t]));let u=this._cubeSize;l6(i,r*u,t>2?u:0,u,u),l.setRenderTarget(i),A&&l.render(h,a),l.render(e,a)}l.toneMapping=c,l.autoClear=u,e.background=p}_textureToCubeUV(e,t){let r=this._renderer,i=301===e.mapping||302===e.mapping;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=l9()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=l7());let n=i?this._cubemapMaterial:this._equirectMaterial,a=this._lodMeshes[0];a.material=n,n.uniforms.envMap.value=e;let s=this._cubeSize;l6(t,0,0,3*s,2*s),r.setRenderTarget(t),r.render(a,lZ)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;let i=this._lodMeshes.length;for(let t=1;t<i;t++)this._applyGGXFilter(e,t-1,t);t.autoClear=r}_applyGGXFilter(e,t,r){let i=this._renderer,n=this._pingPongRenderTarget,a=this._ggxMaterial,s=this._lodMeshes[r];s.material=a;let o=a.uniforms,l=r/(this._lodMeshes.length-1),u=t/(this._lodMeshes.length-1),c=Math.sqrt(l*l-u*u),{_lodMax:h}=this,d=this._sizeLods[r],A=3*d*(r>h-4?r-h+4:0),p=4*(this._cubeSize-d);o.envMap.value=e.texture,o.roughness.value=c*(.05+.95*l),o.mipInt.value=h-t,l6(n,A,p,3*d,2*d),i.setRenderTarget(n),i.render(s,lZ),o.envMap.value=n.texture,o.roughness.value=0,o.mipInt.value=h-r,l6(e,A,p,3*d,2*d),i.setRenderTarget(e),i.render(s,lZ)}_blur(e,t,r,i,n){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",n),this._halfBlur(a,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,a,s){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&eL("blur direction must be either latitudinal or longitudinal!");let u=this._lodMeshes[i];u.material=l;let c=l.uniforms,h=this._sizeLods[r]-1,d=isFinite(n)?Math.PI/(2*h):2*Math.PI/39,A=n/d,p=isFinite(n)?1+Math.floor(3*A):20;p>20&&eI(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);let f=[],m=0;for(let e=0;e<20;++e){let t=e/A,r=Math.exp(-t*t/2);f.push(r),0===e?m+=r:e<p&&(m+=2*r)}for(let e=0;e<f.length;e++)f[e]=f[e]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=f,c.latitudinal.value="latitudinal"===a,s&&(c.poleAxis.value=s);let{_lodMax:g}=this;c.dTheta.value=d,c.mipInt.value=g-r;let y=this._sizeLods[i],v=4*(this._cubeSize-y);l6(t,3*y*(i>g-4?i-g+4:0),v,3*y,2*y),o.setRenderTarget(t),o.render(u,lZ)}}function l8(e,t,r){let i=new tn(e,t,r);return i.texture.mapping=306,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function l6(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function l7(){return new ir({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ue(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function l9(){return new ir({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ue(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function ue(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ut(e){let t=new WeakMap,r=null;function i(e){let r=e.target;r.removeEventListener("dispose",i);let n=t.get(r);void 0!==n&&(t.delete(r),n.dispose())}return{get:function(n){if(n&&n.isTexture){let a=n.mapping,s=303===a||304===a,o=301===a||302===a;if(s||o){let a=t.get(n),l=void 0!==a?a.texture.pmremVersion:0;if(n.isRenderTargetTexture&&n.pmremVersion!==l)return null===r&&(r=new l5(e)),(a=s?r.fromEquirectangular(n,a):r.fromCubemap(n,a)).texture.pmremVersion=n.pmremVersion,t.set(n,a),a.texture;{if(void 0!==a)return a.texture;let l=n.image;return s&&l&&l.height>0||o&&l&&function(e){let t=0;for(let r=0;r<6;r++)void 0!==e[r]&&t++;return 6===t}(l)?(null===r&&(r=new l5(e)),(a=s?r.fromEquirectangular(n):r.fromCubemap(n)).texture.pmremVersion=n.pmremVersion,t.set(n,a),n.addEventListener("dispose",i),a.texture):null}}}return n},dispose:function(){t=new WeakMap,null!==r&&(r.dispose(),r=null)}}}function ur(e){let t={};function r(r){if(void 0!==t[r])return t[r];let i=e.getExtension(r);return t[r]=i,i}return{has:function(e){return null!==r(e)},init:function(){r("EXT_color_buffer_float"),r("WEBGL_clip_cull_distance"),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture"),r("WEBGL_render_shared_exponent")},get:function(e){let t=r(e);return null===t&&eD("WebGLRenderer: "+e+" extension not supported."),t}}}function ui(e,t,r,i){let n={},a=new WeakMap;function s(e){let o=e.target;for(let e in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete n[o.id];let l=a.get(o);l&&(t.remove(l),a.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,r.memory.geometries--}function o(e){let r=[],i=e.index,n=e.attributes.position,s=0;if(null!==i){let e=i.array;s=i.version;for(let t=0,i=e.length;t<i;t+=3){let i=e[t+0],n=e[t+1],a=e[t+2];r.push(i,n,n,a,a,i)}}else{if(void 0===n)return;let e=n.array;s=n.version;for(let t=0,i=e.length/3-1;t<i;t+=3){let e=t+0,i=t+1,n=t+2;r.push(e,i,i,n,n,e)}}let o=new(eb(r)?rO:rB)(r,1);o.version=s;let l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===n[t.id]||(t.addEventListener("dispose",s),n[t.id]=!0,r.memory.geometries++),t},update:function(r){let i=r.attributes;for(let r in i)t.update(i[r],e.ARRAY_BUFFER)},getWireframeAttribute:function(e){let t=a.get(e);if(t){let r=e.index;null!==r&&t.version<r.version&&o(e)}else o(e);return a.get(e)}}}function un(e,t,r){let i,n,a;function s(t,s,o){0!==o&&(e.drawElementsInstanced(i,s,n,t*a,o),r.update(s,i,o))}this.setMode=function(e){i=e},this.setIndex=function(e){n=e.type,a=e.bytesPerElement},this.render=function(t,s){e.drawElements(i,s,n,t*a),r.update(s,i,1)},this.renderInstances=s,this.renderMultiDraw=function(e,a,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,a,0,n,e,0,s);let o=0;for(let e=0;e<s;e++)o+=a[e];r.update(o,i,1)},this.renderMultiDrawInstances=function(e,o,l,u){if(0===l)return;let c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)s(e[t]/a,o[t],u[t]);else{c.multiDrawElementsInstancedWEBGL(i,o,0,n,e,0,u,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e]*u[e];r.update(t,i,1)}}}function ua(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(r,i,n){switch(t.calls++,i){case e.TRIANGLES:t.triangles+=r/3*n;break;case e.LINES:t.lines+=r/2*n;break;case e.LINE_STRIP:t.lines+=n*(r-1);break;case e.LINE_LOOP:t.lines+=n*r;break;case e.POINTS:t.points+=n*r;break;default:eL("WebGLInfo: Unknown draw mode:",i)}}}}function us(e,t,r){let i=new WeakMap,n=new tr;return{update:function(a,s,o){let l=a.morphTargetInfluences,u=s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color,c=void 0!==u?u.length:0,h=i.get(s);if(void 0===h||h.count!==c){void 0!==h&&h.texture.dispose();let e=void 0!==s.morphAttributes.position,r=void 0!==s.morphAttributes.normal,a=void 0!==s.morphAttributes.color,o=s.morphAttributes.position||[],l=s.morphAttributes.normal||[],u=s.morphAttributes.color||[],d=0;!0===e&&(d=1),!0===r&&(d=2),!0===a&&(d=3);let A=s.attributes.position.count*d,p=1;A>t.maxTextureSize&&(p=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);let f=new Float32Array(A*p*4*c),m=new ta(f,A,p,c);m.type=1015,m.needsUpdate=!0;let g=4*d;for(let t=0;t<c;t++){let i=o[t],s=l[t],c=u[t],h=A*p*4*t;for(let t=0;t<i.count;t++){let o=t*g;!0===e&&(n.fromBufferAttribute(i,t),f[h+o+0]=n.x,f[h+o+1]=n.y,f[h+o+2]=n.z,f[h+o+3]=0),!0===r&&(n.fromBufferAttribute(s,t),f[h+o+4]=n.x,f[h+o+5]=n.y,f[h+o+6]=n.z,f[h+o+7]=0),!0===a&&(n.fromBufferAttribute(c,t),f[h+o+8]=n.x,f[h+o+9]=n.y,f[h+o+10]=n.z,f[h+o+11]=4===c.itemSize?n.w:1)}}h={count:c,texture:m,size:new eX(A,p)},i.set(s,h),s.addEventListener("dispose",function e(){m.dispose(),i.delete(s),s.removeEventListener("dispose",e)})}if(!0===a.isInstancedMesh&&null!==a.morphTexture)o.getUniforms().setValue(e,"morphTexture",a.morphTexture,r);else{let t=0;for(let e=0;e<l.length;e++)t+=l[e];let r=s.morphTargetsRelative?1:1-t;o.getUniforms().setValue(e,"morphTargetBaseInfluence",r),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",h.texture,r),o.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function uo(e,t,r,i){let n=new WeakMap;function a(e){let t=e.target;t.removeEventListener("dispose",a),r.remove(t.instanceMatrix),null!==t.instanceColor&&r.remove(t.instanceColor)}return{update:function(s){let o=i.render.frame,l=s.geometry,u=t.get(s,l);if(n.get(u)!==o&&(t.update(u),n.set(u,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),n.get(s)!==o&&(r.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&r.update(s.instanceColor,e.ARRAY_BUFFER),n.set(s,o))),s.isSkinnedMesh){let e=s.skeleton;n.get(e)!==o&&(e.update(),n.set(e,o))}return u},dispose:function(){n=new WeakMap}}}let ul=new tt,uu=new n2(1,1),uc=new ta,uh=new to,ud=new ic,uA=[],up=[],uf=new Float32Array(16),um=new Float32Array(9),ug=new Float32Array(4);function uy(e,t,r){let i=e[0];if(i<=0||i>0)return e;let n=t*r,a=uA[n];if(void 0===a&&(a=new Float32Array(n),uA[n]=a),0!==t){i.toArray(a,0);for(let i=1,n=0;i!==t;++i)n+=r,e[i].toArray(a,n)}return a}function uv(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0}function ux(e,t){for(let r=0,i=t.length;r<i;r++)e[r]=t[r]}function u_(e,t){let r=up[t];void 0===r&&(r=new Int32Array(t),up[t]=r);for(let i=0;i!==t;++i)r[i]=e.allocateTextureUnit();return r}function ub(e,t){let r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function uS(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(uv(r,t))return;e.uniform2fv(this.addr,t),ux(r,t)}}function uT(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)(r[0]!==t.r||r[1]!==t.g||r[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(uv(r,t))return;e.uniform3fv(this.addr,t),ux(r,t)}}function uw(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(uv(r,t))return;e.uniform4fv(this.addr,t),ux(r,t)}}function uM(e,t){let r=this.cache,i=t.elements;if(void 0===i){if(uv(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),ux(r,t)}else{if(uv(r,i))return;ug.set(i),e.uniformMatrix2fv(this.addr,!1,ug),ux(r,i)}}function uE(e,t){let r=this.cache,i=t.elements;if(void 0===i){if(uv(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),ux(r,t)}else{if(uv(r,i))return;um.set(i),e.uniformMatrix3fv(this.addr,!1,um),ux(r,i)}}function uC(e,t){let r=this.cache,i=t.elements;if(void 0===i){if(uv(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),ux(r,t)}else{if(uv(r,i))return;uf.set(i),e.uniformMatrix4fv(this.addr,!1,uf),ux(r,i)}}function uR(e,t){let r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function uN(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(uv(r,t))return;e.uniform2iv(this.addr,t),ux(r,t)}}function uP(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(uv(r,t))return;e.uniform3iv(this.addr,t),ux(r,t)}}function uI(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(uv(r,t))return;e.uniform4iv(this.addr,t),ux(r,t)}}function uL(e,t){let r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function uD(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(uv(r,t))return;e.uniform2uiv(this.addr,t),ux(r,t)}}function uB(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else{if(uv(r,t))return;e.uniform3uiv(this.addr,t),ux(r,t)}}function uF(e,t){let r=this.cache;if(void 0!==t.x)(r[0]!==t.x||r[1]!==t.y||r[2]!==t.z||r[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(uv(r,t))return;e.uniform4uiv(this.addr,t),ux(r,t)}}function uO(e,t,r){let i,n=this.cache,a=r.allocateTextureUnit();n[0]!==a&&(e.uniform1i(this.addr,a),n[0]=a),this.type===e.SAMPLER_2D_SHADOW?(uu.compareFunction=515,i=uu):i=ul,r.setTexture2D(t||i,a)}function uU(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture3D(t||uh,n)}function uk(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTextureCube(t||ud,n)}function uz(e,t,r){let i=this.cache,n=r.allocateTextureUnit();i[0]!==n&&(e.uniform1i(this.addr,n),i[0]=n),r.setTexture2DArray(t||uc,n)}function uV(e,t){e.uniform1fv(this.addr,t)}function uq(e,t){let r=uy(t,this.size,2);e.uniform2fv(this.addr,r)}function uG(e,t){let r=uy(t,this.size,3);e.uniform3fv(this.addr,r)}function uH(e,t){let r=uy(t,this.size,4);e.uniform4fv(this.addr,r)}function uj(e,t){let r=uy(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function uW(e,t){let r=uy(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function uX(e,t){let r=uy(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function uQ(e,t){e.uniform1iv(this.addr,t)}function u$(e,t){e.uniform2iv(this.addr,t)}function uY(e,t){e.uniform3iv(this.addr,t)}function uK(e,t){e.uniform4iv(this.addr,t)}function uZ(e,t){e.uniform1uiv(this.addr,t)}function uJ(e,t){e.uniform2uiv(this.addr,t)}function u0(e,t){e.uniform3uiv(this.addr,t)}function u1(e,t){e.uniform4uiv(this.addr,t)}function u2(e,t,r){let i=this.cache,n=t.length,a=u_(r,n);uv(i,a)||(e.uniform1iv(this.addr,a),ux(i,a));for(let e=0;e!==n;++e)r.setTexture2D(t[e]||ul,a[e])}function u3(e,t,r){let i=this.cache,n=t.length,a=u_(r,n);uv(i,a)||(e.uniform1iv(this.addr,a),ux(i,a));for(let e=0;e!==n;++e)r.setTexture3D(t[e]||uh,a[e])}function u4(e,t,r){let i=this.cache,n=t.length,a=u_(r,n);uv(i,a)||(e.uniform1iv(this.addr,a),ux(i,a));for(let e=0;e!==n;++e)r.setTextureCube(t[e]||ud,a[e])}function u5(e,t,r){let i=this.cache,n=t.length,a=u_(r,n);uv(i,a)||(e.uniform1iv(this.addr,a),ux(i,a));for(let e=0;e!==n;++e)r.setTexture2DArray(t[e]||uc,a[e])}class u8{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ub;case 35664:return uS;case 35665:return uT;case 35666:return uw;case 35674:return uM;case 35675:return uE;case 35676:return uC;case 5124:case 35670:return uR;case 35667:case 35671:return uN;case 35668:case 35672:return uP;case 35669:case 35673:return uI;case 5125:return uL;case 36294:return uD;case 36295:return uB;case 36296:return uF;case 35678:case 36198:case 36298:case 36306:case 35682:return uO;case 35679:case 36299:case 36307:return uU;case 35680:case 36300:case 36308:case 36293:return uk;case 36289:case 36303:case 36311:case 36292:return uz}}(t.type)}}class u6{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return uV;case 35664:return uq;case 35665:return uG;case 35666:return uH;case 35674:return uj;case 35675:return uW;case 35676:return uX;case 5124:case 35670:return uQ;case 35667:case 35671:return u$;case 35668:case 35672:return uY;case 35669:case 35673:return uK;case 5125:return uZ;case 36294:return uJ;case 36295:return u0;case 36296:return u1;case 35678:case 36198:case 36298:case 36306:case 35682:return u2;case 35679:case 36299:case 36307:return u3;case 35680:case 36300:case 36308:case 36293:return u4;case 36289:case 36303:case 36311:case 36292:return u5}}(t.type)}}class u7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){let i=this.seq;for(let n=0,a=i.length;n!==a;++n){let a=i[n];a.setValue(e,t[a.id],r)}}}let u9=/(\w+)(\])?(\[|\.)?/g;function ce(e,t){e.seq.push(t),e.map[t.id]=t}class ct{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const r=e.getActiveUniform(t,i),n=e.getUniformLocation(t,r.name);!function(e,t,r){let i=e.name,n=i.length;for(u9.lastIndex=0;;){let a=u9.exec(i),s=u9.lastIndex,o=a[1],l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===n){ce(r,void 0===u?new u8(o,e,t):new u6(o,e,t));break}{let e=r.map[o];void 0===e&&ce(r,e=new u7(o)),r=e}}}(r,n,this)}}setValue(e,t,r,i){let n=this.map[t];void 0!==n&&n.setValue(e,r,i)}setOptional(e,t,r){let i=t[r];void 0!==i&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let n=0,a=t.length;n!==a;++n){let a=t[n],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,i)}}static seqWithValue(e,t){let r=[];for(let i=0,n=e.length;i!==n;++i){let n=e[i];n.id in t&&r.push(n)}return r}}function cr(e,t,r){let i=e.createShader(t);return e.shaderSource(i,r),e.compileShader(i),i}let ci=0,cn=new eZ;function ca(e,t,r){let i=e.getShaderParameter(t,e.COMPILE_STATUS),n=(e.getShaderInfoLog(t)||"").trim();if(i&&""===n)return"";let a=/ERROR: 0:(\d+)/.exec(n);if(!a)return n;{let i=parseInt(a[1]);return r.toUpperCase()+"\n\n"+n+"\n\n"+function(e,t){let r=e.split("\n"),i=[],n=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let e=n;e<a;e++){let n=e+1;i.push(`${n===t?">":" "} ${n}: ${r[e]}`)}return i.join("\n")}(e.getShaderSource(t),i)}}let cs=new e$;function co(e){return""!==e}function cl(e,t){let r=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function cu(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let cc=/^[ \t]*#include +<([\w\d./]+)>/gm;function ch(e){return e.replace(cc,cA)}let cd=new Map;function cA(e,t){let r=lk[t];if(void 0===r){let e=cd.get(t);if(void 0!==e)r=lk[e],eI('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return ch(r)}let cp=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cf(e){return e.replace(cp,cm)}function cm(e,t,r,i){let n="";for(let e=parseInt(t);e<parseInt(r);e++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return n}function cg(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function cy(e,t,r,i){let n,a,s,o,l,u,c=e.getContext(),h=r.defines,d=r.vertexShader,A=r.fragmentShader,p=(l="SHADOWMAP_TYPE_BASIC",1===r.shadowMapType?l="SHADOWMAP_TYPE_PCF":2===r.shadowMapType?l="SHADOWMAP_TYPE_PCF_SOFT":3===r.shadowMapType&&(l="SHADOWMAP_TYPE_VSM"),l),f=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(r),m=(u="ENVMAP_MODE_REFLECTION",r.envMap&&302===r.envMapMode&&(u="ENVMAP_MODE_REFRACTION"),u),g=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(r),y=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let r=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,r),112)),texelHeight:1/t,maxMip:r}}(r),v=[r.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",r.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(co).join("\n"),x=function(e){let t=[];for(let r in e){let i=e[r];!1!==i&&t.push("#define "+r+" "+i)}return t.join("\n")}(h),_=c.createProgram(),b=r.glslVersion?"#version "+r.glslVersion+"\n":"";if(r.isRawShaderMaterial)(n=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,x].filter(co).join("\n")).length>0&&(n+="\n"),(a=["#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,x].filter(co).join("\n")).length>0&&(a+="\n");else{let e,t,i,s;n=[cg(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,x,r.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",r.batching?"#define USE_BATCHING":"",r.batchingColor?"#define USE_BATCHING_COLOR":"",r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.instancingMorph?"#define USE_INSTANCING_MORPH":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+m:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.displacementMap?"#define USE_DISPLACEMENTMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.mapUv?"#define MAP_UV "+r.mapUv:"",r.alphaMapUv?"#define ALPHAMAP_UV "+r.alphaMapUv:"",r.lightMapUv?"#define LIGHTMAP_UV "+r.lightMapUv:"",r.aoMapUv?"#define AOMAP_UV "+r.aoMapUv:"",r.emissiveMapUv?"#define EMISSIVEMAP_UV "+r.emissiveMapUv:"",r.bumpMapUv?"#define BUMPMAP_UV "+r.bumpMapUv:"",r.normalMapUv?"#define NORMALMAP_UV "+r.normalMapUv:"",r.displacementMapUv?"#define DISPLACEMENTMAP_UV "+r.displacementMapUv:"",r.metalnessMapUv?"#define METALNESSMAP_UV "+r.metalnessMapUv:"",r.roughnessMapUv?"#define ROUGHNESSMAP_UV "+r.roughnessMapUv:"",r.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+r.anisotropyMapUv:"",r.clearcoatMapUv?"#define CLEARCOATMAP_UV "+r.clearcoatMapUv:"",r.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+r.clearcoatNormalMapUv:"",r.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+r.clearcoatRoughnessMapUv:"",r.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+r.iridescenceMapUv:"",r.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+r.iridescenceThicknessMapUv:"",r.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+r.sheenColorMapUv:"",r.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+r.sheenRoughnessMapUv:"",r.specularMapUv?"#define SPECULARMAP_UV "+r.specularMapUv:"",r.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+r.specularColorMapUv:"",r.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+r.specularIntensityMapUv:"",r.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+r.transmissionMapUv:"",r.thicknessMapUv?"#define THICKNESSMAP_UV "+r.thicknessMapUv:"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.morphColors?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+p:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",r.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(co).join("\n"),a=[cg(r),"#define SHADER_TYPE "+r.shaderType,"#define SHADER_NAME "+r.shaderName,x,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.envMap?"#define "+m:"",r.envMap?"#define "+g:"",y?"#define CUBEUV_TEXEL_WIDTH "+y.texelWidth:"",y?"#define CUBEUV_TEXEL_HEIGHT "+y.texelHeight:"",y?"#define CUBEUV_MAX_MIP "+y.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",r.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.anisotropy?"#define USE_ANISOTROPY":"",r.anisotropyMap?"#define USE_ANISOTROPYMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.dispersion?"#define USE_DISPERSION":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",r.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.alphaHash?"#define USE_ALPHAHASH":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.vertexTangents&&!1===r.flatShading?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor||r.batchingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUv1s?"#define USE_UV1":"",r.vertexUv2s?"#define USE_UV2":"",r.vertexUv3s?"#define USE_UV3":"",r.pointsUvs?"#define USE_POINTS_UV":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+p:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.numLightProbes>0?"#define USE_LIGHT_PROBES":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",r.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",r.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==r.toneMapping?"#define TONE_MAPPING":"",0!==r.toneMapping?lk.tonemapping_pars_fragment:"",0!==r.toneMapping?function(e,t){let r;switch(t){case 1:r="Linear";break;case 2:r="Reinhard";break;case 3:r="Cineon";break;case 4:r="ACESFilmic";break;case 6:r="AgX";break;case 7:r="Neutral";break;case 5:r="Custom";break;default:eI("WebGLProgram: Unsupported toneMapping:",t),r="Linear"}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",lk.colorspace_pars_fragment,(e=function(e){e2._getMatrix(cn,e2.workingColorSpace,e);let t=`mat3( ${cn.elements.map(e=>e.toFixed(4))} )`;switch(e2.getTransfer(e)){case em:return[t,"LinearTransferOETF"];case eg:return[t,"sRGBTransferOETF"];default:return eI("WebGLProgram: Unsupported color space: ",e),[t,"LinearTransferOETF"]}}(r.outputColorSpace),`vec4 linearToOutputTexel( vec4 value ) {
	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );
}`),(e2.getLuminanceCoefficients(cs),t=cs.x.toFixed(4),i=cs.y.toFixed(4),s=cs.z.toFixed(4),`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${t}, ${i}, ${s} );
	return dot( weights, rgb );
}`),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(co).join("\n")}d=cu(d=cl(d=ch(d),r),r),A=cu(A=cl(A=ch(A),r),r),d=cf(d),A=cf(A),!0!==r.isRawShaderMaterial&&(b="#version 300 es\n",n=[v,"#define attribute in\n#define varying out\n#define texture2D texture"].join("\n")+"\n"+n,a=["#define varying in",r.glslVersion===ey?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===ey?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);let S=b+n+d,T=b+a+A,w=cr(c,c.VERTEX_SHADER,S),M=cr(c,c.FRAGMENT_SHADER,T);function E(t){if(e.debug.checkShaderErrors){let r=c.getProgramInfoLog(_)||"",i=c.getShaderInfoLog(w)||"",s=c.getShaderInfoLog(M)||"",o=r.trim(),l=i.trim(),u=s.trim(),h=!0,d=!0;if(!1===c.getProgramParameter(_,c.LINK_STATUS))if(h=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(c,_,w,M);else{let e=ca(c,w,"vertex"),r=ca(c,M,"fragment");eL("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(_,c.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+o+"\n"+e+"\n"+r)}else""!==o?eI("WebGLProgram: Program Info Log:",o):(""===l||""===u)&&(d=!1);d&&(t.diagnostics={runnable:h,programLog:o,vertexShader:{log:l,prefix:n},fragmentShader:{log:u,prefix:a}})}c.deleteShader(w),c.deleteShader(M),s=new ct(c,_),o=function(e,t){let r={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){let i=e.getActiveAttrib(t,n),a=i.name,s=1;i.type===e.FLOAT_MAT2&&(s=2),i.type===e.FLOAT_MAT3&&(s=3),i.type===e.FLOAT_MAT4&&(s=4),r[a]={type:i.type,location:e.getAttribLocation(t,a),locationSize:s}}return r}(c,_)}c.attachShader(_,w),c.attachShader(_,M),void 0!==r.index0AttributeName?c.bindAttribLocation(_,0,r.index0AttributeName):!0===r.morphTargets&&c.bindAttribLocation(_,0,"position"),c.linkProgram(_),this.getUniforms=function(){return void 0===s&&E(this),s},this.getAttributes=function(){return void 0===o&&E(this),o};let C=!1===r.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=c.getProgramParameter(_,37297)),C},this.destroy=function(){i.releaseStatesOfProgram(this),c.deleteProgram(_),this.program=void 0},this.type=r.shaderType,this.name=r.shaderName,this.id=ci++,this.cacheKey=t,this.usedTimes=1,this.program=_,this.vertexShader=w,this.fragmentShader=M,this}let cv=0;class cx{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),n=this._getShaderStage(r),a=this._getShaderCacheForMaterial(e);return!1===a.has(i)&&(a.add(i),i.usedTimes++),!1===a.has(n)&&(a.add(n),n.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,r=t.get(e);return void 0===r&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){let t=this.shaderCache,r=t.get(e);return void 0===r&&(r=new c_(e),t.set(e,r)),r}}class c_{constructor(e){this.id=cv++,this.code=e,this.usedTimes=0}}function cb(e,t,r,i,n,a,s){let o=new tX,l=new cx,u=new Set,c=[],h=n.logarithmicDepthBuffer,d=n.vertexTextures,A=n.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function f(e){return(u.add(e),0===e)?"uv":`uv${e}`}return{getParameters:function(a,o,c,m,g){let y,v,x,_,b=m.fog,S=g.geometry,T=a.isMeshStandardMaterial?m.environment:null,w=(a.isMeshStandardMaterial?r:t).get(a.envMap||T),M=w&&306===w.mapping?w.image.height:null,E=p[a.type];null!==a.precision&&(A=n.getMaxPrecision(a.precision))!==a.precision&&eI("WebGLProgram.getParameters:",a.precision,"not supported, using",A,"instead.");let C=S.morphAttributes.position||S.morphAttributes.normal||S.morphAttributes.color,R=void 0!==C?C.length:0,N=0;if(void 0!==S.morphAttributes.position&&(N=1),void 0!==S.morphAttributes.normal&&(N=2),void 0!==S.morphAttributes.color&&(N=3),E){let e=lV[E];y=e.vertexShader,v=e.fragmentShader}else y=a.vertexShader,v=a.fragmentShader,l.update(a),x=l.getVertexShaderID(a),_=l.getFragmentShaderID(a);let P=e.getRenderTarget(),I=e.state.buffers.depth.getReversed(),L=!0===g.isInstancedMesh,D=!0===g.isBatchedMesh,B=!!a.map,F=!!a.matcap,O=!!w,U=!!a.aoMap,k=!!a.lightMap,z=!!a.bumpMap,V=!!a.normalMap,q=!!a.displacementMap,G=!!a.emissiveMap,H=!!a.metalnessMap,j=!!a.roughnessMap,W=a.anisotropy>0,X=a.clearcoat>0,Q=a.dispersion>0,$=a.iridescence>0,Y=a.sheen>0,K=a.transmission>0,Z=W&&!!a.anisotropyMap,J=X&&!!a.clearcoatMap,ee=X&&!!a.clearcoatNormalMap,et=X&&!!a.clearcoatRoughnessMap,er=$&&!!a.iridescenceMap,ei=$&&!!a.iridescenceThicknessMap,en=Y&&!!a.sheenColorMap,ea=Y&&!!a.sheenRoughnessMap,es=!!a.specularMap,eo=!!a.specularColorMap,el=!!a.specularIntensityMap,eu=K&&!!a.transmissionMap,ec=K&&!!a.thicknessMap,eh=!!a.gradientMap,ed=!!a.alphaMap,eA=a.alphaTest>0,ep=!!a.alphaHash,em=!!a.extensions,ey=0;a.toneMapped&&(null===P||!0===P.isXRRenderTarget)&&(ey=e.toneMapping);let ev={shaderID:E,shaderType:a.type,shaderName:a.name,vertexShader:y,fragmentShader:v,defines:a.defines,customVertexShaderID:x,customFragmentShaderID:_,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:A,batching:D,batchingColor:D&&null!==g._colorsTexture,instancing:L,instancingColor:L&&null!==g.instanceColor,instancingMorph:L&&null!==g.morphTexture,supportsVertexTextures:d,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:ef,alphaToCoverage:!!a.alphaToCoverage,map:B,matcap:F,envMap:O,envMapMode:O&&w.mapping,envMapCubeUVHeight:M,aoMap:U,lightMap:k,bumpMap:z,normalMap:V,displacementMap:d&&q,emissiveMap:G,normalMapObjectSpace:V&&1===a.normalMapType,normalMapTangentSpace:V&&0===a.normalMapType,metalnessMap:H,roughnessMap:j,anisotropy:W,anisotropyMap:Z,clearcoat:X,clearcoatMap:J,clearcoatNormalMap:ee,clearcoatRoughnessMap:et,dispersion:Q,iridescence:$,iridescenceMap:er,iridescenceThicknessMap:ei,sheen:Y,sheenColorMap:en,sheenRoughnessMap:ea,specularMap:es,specularColorMap:eo,specularIntensityMap:el,transmission:K,transmissionMap:eu,thicknessMap:ec,gradientMap:eh,opaque:!1===a.transparent&&1===a.blending&&!1===a.alphaToCoverage,alphaMap:ed,alphaTest:eA,alphaHash:ep,combine:a.combine,mapUv:B&&f(a.map.channel),aoMapUv:U&&f(a.aoMap.channel),lightMapUv:k&&f(a.lightMap.channel),bumpMapUv:z&&f(a.bumpMap.channel),normalMapUv:V&&f(a.normalMap.channel),displacementMapUv:q&&f(a.displacementMap.channel),emissiveMapUv:G&&f(a.emissiveMap.channel),metalnessMapUv:H&&f(a.metalnessMap.channel),roughnessMapUv:j&&f(a.roughnessMap.channel),anisotropyMapUv:Z&&f(a.anisotropyMap.channel),clearcoatMapUv:J&&f(a.clearcoatMap.channel),clearcoatNormalMapUv:ee&&f(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:et&&f(a.clearcoatRoughnessMap.channel),iridescenceMapUv:er&&f(a.iridescenceMap.channel),iridescenceThicknessMapUv:ei&&f(a.iridescenceThicknessMap.channel),sheenColorMapUv:en&&f(a.sheenColorMap.channel),sheenRoughnessMapUv:ea&&f(a.sheenRoughnessMap.channel),specularMapUv:es&&f(a.specularMap.channel),specularColorMapUv:eo&&f(a.specularColorMap.channel),specularIntensityMapUv:el&&f(a.specularIntensityMap.channel),transmissionMapUv:eu&&f(a.transmissionMap.channel),thicknessMapUv:ec&&f(a.thicknessMap.channel),alphaMapUv:ed&&f(a.alphaMap.channel),vertexTangents:!!S.attributes.tangent&&(V||W),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!S.attributes.color&&4===S.attributes.color.itemSize,pointsUvs:!0===g.isPoints&&!!S.attributes.uv&&(B||ed),fog:!!b,useFog:!0===a.fog,fogExp2:!!b&&b.isFogExp2,flatShading:!0===a.flatShading&&!1===a.wireframe,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:h,reversedDepthBuffer:I,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==S.morphAttributes.position,morphNormals:void 0!==S.morphAttributes.normal,morphColors:void 0!==S.morphAttributes.color,morphTargetsCount:R,morphTextureStride:N,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numLightProbes:o.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:ey,decodeVideoTexture:B&&!0===a.map.isVideoTexture&&e2.getTransfer(a.map.colorSpace)===eg,decodeVideoTextureEmissive:G&&!0===a.emissiveMap.isVideoTexture&&e2.getTransfer(a.emissiveMap.colorSpace)===eg,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:em&&!0===a.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(em&&!0===a.extensions.multiDraw||D)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return ev.vertexUv1s=u.has(1),ev.vertexUv2s=u.has(2),ev.vertexUv3s=u.has(3),u.clear(),ev},getProgramCacheKey:function(t){var r,i,n,a;let s=[];if(t.shaderID?s.push(t.shaderID):(s.push(t.customVertexShaderID),s.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)s.push(e),s.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(r=s,i=t,r.push(i.precision),r.push(i.outputColorSpace),r.push(i.envMapMode),r.push(i.envMapCubeUVHeight),r.push(i.mapUv),r.push(i.alphaMapUv),r.push(i.lightMapUv),r.push(i.aoMapUv),r.push(i.bumpMapUv),r.push(i.normalMapUv),r.push(i.displacementMapUv),r.push(i.emissiveMapUv),r.push(i.metalnessMapUv),r.push(i.roughnessMapUv),r.push(i.anisotropyMapUv),r.push(i.clearcoatMapUv),r.push(i.clearcoatNormalMapUv),r.push(i.clearcoatRoughnessMapUv),r.push(i.iridescenceMapUv),r.push(i.iridescenceThicknessMapUv),r.push(i.sheenColorMapUv),r.push(i.sheenRoughnessMapUv),r.push(i.specularMapUv),r.push(i.specularColorMapUv),r.push(i.specularIntensityMapUv),r.push(i.transmissionMapUv),r.push(i.thicknessMapUv),r.push(i.combine),r.push(i.fogExp2),r.push(i.sizeAttenuation),r.push(i.morphTargetsCount),r.push(i.morphAttributeCount),r.push(i.numDirLights),r.push(i.numPointLights),r.push(i.numSpotLights),r.push(i.numSpotLightMaps),r.push(i.numHemiLights),r.push(i.numRectAreaLights),r.push(i.numDirLightShadows),r.push(i.numPointLightShadows),r.push(i.numSpotLightShadows),r.push(i.numSpotLightShadowsWithMaps),r.push(i.numLightProbes),r.push(i.shadowMapType),r.push(i.toneMapping),r.push(i.numClippingPlanes),r.push(i.numClipIntersection),r.push(i.depthPacking),n=s,a=t,o.disableAll(),a.supportsVertexTextures&&o.enable(0),a.instancing&&o.enable(1),a.instancingColor&&o.enable(2),a.instancingMorph&&o.enable(3),a.matcap&&o.enable(4),a.envMap&&o.enable(5),a.normalMapObjectSpace&&o.enable(6),a.normalMapTangentSpace&&o.enable(7),a.clearcoat&&o.enable(8),a.iridescence&&o.enable(9),a.alphaTest&&o.enable(10),a.vertexColors&&o.enable(11),a.vertexAlphas&&o.enable(12),a.vertexUv1s&&o.enable(13),a.vertexUv2s&&o.enable(14),a.vertexUv3s&&o.enable(15),a.vertexTangents&&o.enable(16),a.anisotropy&&o.enable(17),a.alphaHash&&o.enable(18),a.batching&&o.enable(19),a.dispersion&&o.enable(20),a.batchingColor&&o.enable(21),a.gradientMap&&o.enable(22),n.push(o.mask),o.disableAll(),a.fog&&o.enable(0),a.useFog&&o.enable(1),a.flatShading&&o.enable(2),a.logarithmicDepthBuffer&&o.enable(3),a.reversedDepthBuffer&&o.enable(4),a.skinning&&o.enable(5),a.morphTargets&&o.enable(6),a.morphNormals&&o.enable(7),a.morphColors&&o.enable(8),a.premultipliedAlpha&&o.enable(9),a.shadowMapEnabled&&o.enable(10),a.doubleSided&&o.enable(11),a.flipSided&&o.enable(12),a.useDepthPacking&&o.enable(13),a.dithering&&o.enable(14),a.transmission&&o.enable(15),a.sheen&&o.enable(16),a.opaque&&o.enable(17),a.pointsUvs&&o.enable(18),a.decodeVideoTexture&&o.enable(19),a.decodeVideoTextureEmissive&&o.enable(20),a.alphaToCoverage&&o.enable(21),n.push(o.mask),s.push(e.outputColorSpace)),s.push(t.customProgramCacheKey),s.join()},getUniforms:function(e){let t,r=p[e.type];if(r){let e=lV[r];t=it.clone(e.uniforms)}else t=e.uniforms;return t},acquireProgram:function(t,r){let i;for(let e=0,t=c.length;e<t;e++){let t=c[e];if(t.cacheKey===r){i=t,++i.usedTimes;break}}return void 0===i&&(i=new cy(e,r,t,a),c.push(i)),i},releaseProgram:function(e){if(0==--e.usedTimes){let t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function cS(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,i){e.get(t)[r]=i},dispose:function(){e=new WeakMap}}}function cT(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function cw(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function cM(){let e=[],t=0,r=[],i=[],n=[];function a(r,i,n,a,s,o){let l=e[t];return void 0===l?(l={id:r.id,object:r,geometry:i,material:n,groupOrder:a,renderOrder:r.renderOrder,z:s,group:o},e[t]=l):(l.id=r.id,l.object=r,l.geometry=i,l.material=n,l.groupOrder=a,l.renderOrder=r.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:r,transmissive:i,transparent:n,init:function(){t=0,r.length=0,i.length=0,n.length=0},push:function(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?i.push(c):!0===s.transparent?n.push(c):r.push(c)},unshift:function(e,t,s,o,l,u){let c=a(e,t,s,o,l,u);s.transmission>0?i.unshift(c):!0===s.transparent?n.unshift(c):r.unshift(c)},finish:function(){for(let r=t,i=e.length;r<i;r++){let t=e[r];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){r.length>1&&r.sort(e||cT),i.length>1&&i.sort(t||cw),n.length>1&&n.sort(t||cw)}}}function cE(){let e=new WeakMap;return{get:function(t,r){let i,n=e.get(t);return void 0===n?(i=new cM,e.set(t,[i])):r>=n.length?(i=new cM,n.push(i)):i=n[r],i},dispose:function(){e=new WeakMap}}}function cC(){let e={};return{get:function(t){let r;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":r={direction:new e$,color:new ry};break;case"SpotLight":r={position:new e$,direction:new e$,color:new ry,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new e$,color:new ry,distance:0,decay:0};break;case"HemisphereLight":r={direction:new e$,skyColor:new ry,groundColor:new ry};break;case"RectAreaLight":r={color:new ry,position:new e$,halfWidth:new e$,halfHeight:new e$}}return e[t.id]=r,r}}}let cR=0;function cN(e,t){return 2*!!t.castShadow-2*!!e.castShadow+ +!!t.map-!!e.map}function cP(e){let t,r=new cC,i=(t={},{get:function(e){let r;if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":case"SpotLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new eX};break;case"PointLight":r={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new eX,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=r,r}}),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)n.probe.push(new e$);let a=new e$,s=new tF,o=new tF;return{setup:function(t){let a=0,s=0,o=0;for(let e=0;e<9;e++)n.probe[e].set(0,0,0);let l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0;t.sort(cN);for(let e=0,v=t.length;e<v;e++){let v=t[e],x=v.color,_=v.intensity,b=v.distance,S=v.shadow&&v.shadow.map?v.shadow.map.texture:null;if(v.isAmbientLight)a+=x.r*_,s+=x.g*_,o+=x.b*_;else if(v.isLightProbe){for(let e=0;e<9;e++)n.probe[e].addScaledVector(v.sh.coefficients[e],_);y++}else if(v.isDirectionalLight){let e=r.get(v);if(e.color.copy(v.color).multiplyScalar(v.intensity),v.castShadow){let e=v.shadow,t=i.get(v);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,n.directionalShadow[l]=t,n.directionalShadowMap[l]=S,n.directionalShadowMatrix[l]=v.shadow.matrix,A++}n.directional[l]=e,l++}else if(v.isSpotLight){let e=r.get(v);e.position.setFromMatrixPosition(v.matrixWorld),e.color.copy(x).multiplyScalar(_),e.distance=b,e.coneCos=Math.cos(v.angle),e.penumbraCos=Math.cos(v.angle*(1-v.penumbra)),e.decay=v.decay,n.spot[c]=e;let t=v.shadow;if(v.map&&(n.spotLightMap[m]=v.map,m++,t.updateMatrices(v),v.castShadow&&g++),n.spotLightMatrix[c]=t.matrix,v.castShadow){let e=i.get(v);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,n.spotShadow[c]=e,n.spotShadowMap[c]=S,f++}c++}else if(v.isRectAreaLight){let e=r.get(v);e.color.copy(x).multiplyScalar(_),e.halfWidth.set(.5*v.width,0,0),e.halfHeight.set(0,.5*v.height,0),n.rectArea[h]=e,h++}else if(v.isPointLight){let e=r.get(v);if(e.color.copy(v.color).multiplyScalar(v.intensity),e.distance=v.distance,e.decay=v.decay,v.castShadow){let e=v.shadow,t=i.get(v);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,n.pointShadow[u]=t,n.pointShadowMap[u]=S,n.pointShadowMatrix[u]=v.shadow.matrix,p++}n.point[u]=e,u++}else if(v.isHemisphereLight){let e=r.get(v);e.skyColor.copy(v.color).multiplyScalar(_),e.groundColor.copy(v.groundColor).multiplyScalar(_),n.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(n.rectAreaLTC1=lz.LTC_FLOAT_1,n.rectAreaLTC2=lz.LTC_FLOAT_2):(n.rectAreaLTC1=lz.LTC_HALF_1,n.rectAreaLTC2=lz.LTC_HALF_2)),n.ambient[0]=a,n.ambient[1]=s,n.ambient[2]=o;let v=n.hash;(v.directionalLength!==l||v.pointLength!==u||v.spotLength!==c||v.rectAreaLength!==h||v.hemiLength!==d||v.numDirectionalShadows!==A||v.numPointShadows!==p||v.numSpotShadows!==f||v.numSpotMaps!==m||v.numLightProbes!==y)&&(n.directional.length=l,n.spot.length=c,n.rectArea.length=h,n.point.length=u,n.hemi.length=d,n.directionalShadow.length=A,n.directionalShadowMap.length=A,n.pointShadow.length=p,n.pointShadowMap.length=p,n.spotShadow.length=f,n.spotShadowMap.length=f,n.directionalShadowMatrix.length=A,n.pointShadowMatrix.length=p,n.spotLightMatrix.length=f+m-g,n.spotLightMap.length=m,n.numSpotLightShadowsWithMaps=g,n.numLightProbes=y,v.directionalLength=l,v.pointLength=u,v.spotLength=c,v.rectAreaLength=h,v.hemiLength=d,v.numDirectionalShadows=A,v.numPointShadows=p,v.numSpotShadows=f,v.numSpotMaps=m,v.numLightProbes=y,n.version=cR++)},setupView:function(e,t){let r=0,i=0,l=0,u=0,c=0,h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){let d=e[t];if(d.isDirectionalLight){let e=n.directional[r];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),r++}else if(d.isSpotLight){let e=n.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){let e=n.rectArea[u];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(d.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),u++}else if(d.isPointLight){let e=n.point[i];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),i++}else if(d.isHemisphereLight){let e=n.hemi[c];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),c++}}},state:n}}function cI(e){let t=new cP(e),r=[],i=[],n={lightsArray:r,shadowsArray:i,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){n.camera=e,r.length=0,i.length=0},state:n,setupLights:function(){t.setup(r)},setupLightsView:function(e){t.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function cL(e){let t=new WeakMap;return{get:function(r,i=0){let n,a=t.get(r);return void 0===a?(n=new cI(e),t.set(r,[n])):i>=a.length?(n=new cI(e),a.push(n)):n=a[i],n},dispose:function(){t=new WeakMap}}}function cD(e,t,r){let i=new no,n=new eX,a=new eX,s=new tr,o=new sl({depthPacking:3201}),l=new su,u={},c=r.maxTextureSize,h={0:1,1:0,2:2},d=new ir({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new eX},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),A=d.clone();A.defines.HORIZONTAL_PASS=1;let p=new rX;p.setAttribute("position",new rN(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let f=new r5(p,d),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let g=this.type;function y(t,r,i,n){let a=null,s=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)a=s;else if(a=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===r.clipShadows&&Array.isArray(r.clippingPlanes)&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0||r.map&&r.alphaTest>0||!0===r.alphaToCoverage){let e=a.uuid,t=r.uuid,i=u[e];void 0===i&&(i={},u[e]=i);let n=i[t];void 0===n&&(n=a.clone(),i[t]=n,r.addEventListener("dispose",v)),a=n}return a.visible=r.visible,a.wireframe=r.wireframe,3===n?a.side=null!==r.shadowSide?r.shadowSide:r.side:a.side=null!==r.shadowSide?r.shadowSide:h[r.side],a.alphaMap=r.alphaMap,a.alphaTest=!0===r.alphaToCoverage?.5:r.alphaTest,a.map=r.map,a.clipShadows=r.clipShadows,a.clippingPlanes=r.clippingPlanes,a.clipIntersection=r.clipIntersection,a.displacementMap=r.displacementMap,a.displacementScale=r.displacementScale,a.displacementBias=r.displacementBias,a.wireframeLinewidth=r.wireframeLinewidth,a.linewidth=r.linewidth,!0===i.isPointLight&&!0===a.isMeshDistanceMaterial&&(e.properties.get(a).light=i),a}function v(e){for(let t in e.target.removeEventListener("dispose",v),u){let r=u[t],i=e.target.uuid;i in r&&(r[i].dispose(),delete r[i])}}this.render=function(r,o,l){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===r.length)return;let u=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),v=e.state;v.setBlending(0),!0===v.buffers.depth.getReversed()?v.buffers.color.setClear(0,0,0,0):v.buffers.color.setClear(1,1,1,1),v.buffers.depth.setTest(!0),v.setScissorTest(!1);let x=3!==g&&3===this.type,_=3===g&&3!==this.type;for(let u=0,h=r.length;u<h;u++){let h=r[u],p=h.shadow;if(void 0===p){eI("WebGLShadowMap:",h,"has no shadow.");continue}if(!1===p.autoUpdate&&!1===p.needsUpdate)continue;n.copy(p.mapSize);let m=p.getFrameExtents();if(n.multiply(m),a.copy(p.mapSize),(n.x>c||n.y>c)&&(n.x>c&&(a.x=Math.floor(c/m.x),n.x=a.x*m.x,p.mapSize.x=a.x),n.y>c&&(a.y=Math.floor(c/m.y),n.y=a.y*m.y,p.mapSize.y=a.y)),null===p.map||!0===x||!0===_){let e=3!==this.type?{minFilter:1003,magFilter:1003}:{};null!==p.map&&p.map.dispose(),p.map=new tn(n.x,n.y,e),p.map.texture.name=h.name+".shadowMap",p.camera.updateProjectionMatrix()}e.setRenderTarget(p.map),e.clear();let g=p.getViewportCount();for(let r=0;r<g;r++){let n=p.getViewport(r);s.set(a.x*n.x,a.y*n.y,a.x*n.z,a.y*n.w),v.viewport(s),p.updateMatrices(h,r),i=p.getFrustum(),function r(n,a,s,o,l){if(!1===n.visible)return;if(n.layers.test(a.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===l)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);let r=t.update(n),i=n.material;if(Array.isArray(i)){let t=r.groups;for(let u=0,c=t.length;u<c;u++){let c=t[u],h=i[c.materialIndex];if(h&&h.visible){let t=y(n,h,o,l);n.onBeforeShadow(e,n,a,s,r,t,c),e.renderBufferDirect(s,null,r,t,n,c),n.onAfterShadow(e,n,a,s,r,t,c)}}}else if(i.visible){let t=y(n,i,o,l);n.onBeforeShadow(e,n,a,s,r,t,null),e.renderBufferDirect(s,null,r,t,n,null),n.onAfterShadow(e,n,a,s,r,t,null)}}let u=n.children;for(let e=0,t=u.length;e<t;e++)r(u[e],a,s,o,l)}(o,l,p.camera,h,this.type)}!0!==p.isPointLightShadow&&3===this.type&&function(r,i){let a=t.update(f);d.defines.VSM_SAMPLES!==r.blurSamples&&(d.defines.VSM_SAMPLES=r.blurSamples,A.defines.VSM_SAMPLES=r.blurSamples,d.needsUpdate=!0,A.needsUpdate=!0),null===r.mapPass&&(r.mapPass=new tn(n.x,n.y)),d.uniforms.shadow_pass.value=r.map.texture,d.uniforms.resolution.value=r.mapSize,d.uniforms.radius.value=r.radius,e.setRenderTarget(r.mapPass),e.clear(),e.renderBufferDirect(i,null,a,d,f,null),A.uniforms.shadow_pass.value=r.mapPass.texture,A.uniforms.resolution.value=r.mapSize,A.uniforms.radius.value=r.radius,e.setRenderTarget(r.map),e.clear(),e.renderBufferDirect(i,null,a,A,f,null)}(p,l),p.needsUpdate=!1}g=this.type,m.needsUpdate=!1,e.setRenderTarget(u,h,p)}}let cB={0:1,2:6,4:7,3:5,1:0,6:2,7:4,5:3};function cF(e,t){let r=new function(){let t=!1,r=new tr,i=null,n=new tr(0,0,0,0);return{setMask:function(r){i===r||t||(e.colorMask(r,r,r,r),i=r)},setLocked:function(e){t=e},setClear:function(t,i,a,s,o){!0===o&&(t*=s,i*=s,a*=s),r.set(t,i,a,s),!1===n.equals(r)&&(e.clearColor(t,i,a,s),n.copy(r))},reset:function(){t=!1,i=null,n.set(-1,0,0,0)}}},i=new function(){let r=!1,i=!1,n=null,a=null,s=null;return{setReversed:function(e){if(i!==e){let r=t.get("EXT_clip_control");e?r.clipControlEXT(r.LOWER_LEFT_EXT,r.ZERO_TO_ONE_EXT):r.clipControlEXT(r.LOWER_LEFT_EXT,r.NEGATIVE_ONE_TO_ONE_EXT),i=e;let n=s;s=null,this.setClear(n)}},getReversed:function(){return i},setTest:function(t){t?k(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(t){n===t||r||(e.depthMask(t),n=t)},setFunc:function(t){if(i&&(t=cB[t]),a!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}a=t}},setLocked:function(e){r=e},setClear:function(t){s!==t&&(i&&(t=1-t),e.clearDepth(t),s=t)},reset:function(){r=!1,n=null,a=null,s=null,i=!1}}},n=new function(){let t=!1,r=null,i=null,n=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(r){t||(r?k(e.STENCIL_TEST):z(e.STENCIL_TEST))},setMask:function(i){r===i||t||(e.stencilMask(i),r=i)},setFunc:function(t,r,s){(i!==t||n!==r||a!==s)&&(e.stencilFunc(t,r,s),i=t,n=r,a=s)},setOp:function(t,r,i){(s!==t||o!==r||l!==i)&&(e.stencilOp(t,r,i),s=t,o=r,l=i)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,r=null,i=null,n=null,a=null,s=null,o=null,l=null,u=null}}},a=new WeakMap,s=new WeakMap,o={},l={},u=new WeakMap,c=[],h=null,d=!1,A=null,p=null,f=null,m=null,g=null,y=null,v=null,x=new ry(0,0,0),_=0,b=!1,S=null,T=null,w=null,M=null,E=null,C=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),R=!1,N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?R=parseFloat(/^WebGL (\d)/.exec(N)[1])>=1:-1!==N.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(N)[1])>=2);let P=null,I={},L=e.getParameter(e.SCISSOR_BOX),D=e.getParameter(e.VIEWPORT),B=new tr().fromArray(L),F=new tr().fromArray(D);function O(t,r,i,n){let a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(r,0,e.RGBA,1,1,n,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage2D(r+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}let U={};function k(t){!0!==o[t]&&(e.enable(t),o[t]=!0)}function z(t){!1!==o[t]&&(e.disable(t),o[t]=!1)}U[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),U[e.TEXTURE_2D_ARRAY]=O(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),U[e.TEXTURE_3D]=O(e.TEXTURE_3D,e.TEXTURE_3D,1,1),r.setClear(0,0,0,1),i.setClear(1),n.setClear(0),k(e.DEPTH_TEST),i.setFunc(3),H(!1),j(1),k(e.CULL_FACE),G(0);let V={100:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};V[103]=e.MIN,V[104]=e.MAX;let q={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function G(t,r,i,n,a,s,o,l,u,c){if(0===t){!0===d&&(z(e.BLEND),d=!1);return}if(!1===d&&(k(e.BLEND),d=!0),5!==t){if(t!==A||c!==b){if((100!==p||100!==g)&&(e.blendEquation(e.FUNC_ADD),p=100,g=100),c)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ZERO,e.ONE);break;default:eL("WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE,e.ONE,e.ONE);break;case 3:eL("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case 4:eL("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:eL("WebGLState: Invalid blending: ",t)}f=null,m=null,y=null,v=null,x.set(0,0,0),_=0,A=t,b=c}return}a=a||r,s=s||i,o=o||n,(r!==p||a!==g)&&(e.blendEquationSeparate(V[r],V[a]),p=r,g=a),(i!==f||n!==m||s!==y||o!==v)&&(e.blendFuncSeparate(q[i],q[n],q[s],q[o]),f=i,m=n,y=s,v=o),(!1===l.equals(x)||u!==_)&&(e.blendColor(l.r,l.g,l.b,u),x.copy(l),_=u),A=t,b=!1}function H(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function j(t){0!==t?(k(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),T=t}function W(t,r,i){t?(k(e.POLYGON_OFFSET_FILL),(M!==r||E!==i)&&(e.polygonOffset(r,i),M=r,E=i)):z(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:i,stencil:n},enable:k,disable:z,bindFramebuffer:function(t,r){return l[t]!==r&&(e.bindFramebuffer(t,r),l[t]=r,t===e.DRAW_FRAMEBUFFER&&(l[e.FRAMEBUFFER]=r),t===e.FRAMEBUFFER&&(l[e.DRAW_FRAMEBUFFER]=r),!0)},drawBuffers:function(t,r){let i=c,n=!1;if(t){void 0===(i=u.get(r))&&(i=[],u.set(r,i));let a=t.textures;if(i.length!==a.length||i[0]!==e.COLOR_ATTACHMENT0){for(let t=0,r=a.length;t<r;t++)i[t]=e.COLOR_ATTACHMENT0+t;i.length=a.length,n=!0}}else i[0]!==e.BACK&&(i[0]=e.BACK,n=!0);n&&e.drawBuffers(i)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:G,setMaterial:function(t,a){2===t.side?z(e.CULL_FACE):k(e.CULL_FACE);let s=1===t.side;a&&(s=!s),H(s),1===t.blending&&!1===t.transparent?G(0):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),r.setMask(t.colorWrite);let o=t.stencilWrite;n.setTest(o),o&&(n.setMask(t.stencilWriteMask),n.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),n.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),W(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?k(e.SAMPLE_ALPHA_TO_COVERAGE):z(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:H,setCullFace:j,setLineWidth:function(t){t!==w&&(R&&e.lineWidth(t),w=t)},setPolygonOffset:W,setScissorTest:function(t){t?k(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+C-1),P!==t&&(e.activeTexture(t),P=t)},bindTexture:function(t,r,i){void 0===i&&(i=null===P?e.TEXTURE0+C-1:P);let n=I[i];void 0===n&&(n={type:void 0,texture:void 0},I[i]=n),(n.type!==t||n.texture!==r)&&(P!==i&&(e.activeTexture(i),P=i),e.bindTexture(t,r||U[t]),n.type=t,n.texture=r)},unbindTexture:function(){let t=I[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D(...arguments)}catch(e){e("WebGLState:",e)}},texImage2D:function(){try{e.texImage2D(...arguments)}catch(e){e("WebGLState:",e)}},texImage3D:function(){try{e.texImage3D(...arguments)}catch(e){e("WebGLState:",e)}},updateUBOMapping:function(t,r){let i=s.get(r);void 0===i&&(i=new WeakMap,s.set(r,i));let n=i.get(t);void 0===n&&(n=e.getUniformBlockIndex(r,t.name),i.set(t,n))},uniformBlockBinding:function(t,r){let i=s.get(r).get(t);a.get(r)!==i&&(e.uniformBlockBinding(r,i,t.__bindingPointIndex),a.set(r,i))},texStorage2D:function(){try{e.texStorage2D(...arguments)}catch(e){e("WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D(...arguments)}catch(e){e("WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D(...arguments)}catch(e){e("WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D(...arguments)}catch(e){e("WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D(...arguments)}catch(e){e("WebGLState:",e)}},scissor:function(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),i.setReversed(!1),e.clearDepth(1),e.stencilMask(0xffffffff),e.stencilFunc(e.ALWAYS,0,0xffffffff),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),o={},P=null,I={},l={},u=new WeakMap,c=[],h=null,d=!1,A=null,p=null,f=null,m=null,g=null,y=null,v=null,x=new ry(0,0,0),_=0,b=!1,S=null,T=null,w=null,M=null,E=null,B.set(0,0,e.canvas.width,e.canvas.height),F.set(0,0,e.canvas.width,e.canvas.height),r.reset(),i.reset(),n.reset()}}}function cO(e,t,r,i,n,a,s){let o,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,u="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new eX,h=new WeakMap,d=new WeakMap,A=!1;try{A="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function p(e,t){return A?new OffscreenCanvas(e,t):ew("canvas")}function f(e,t,r){let i=1,n=q(e);if((n.width>r||n.height>r)&&(i=r/Math.max(n.width,n.height)),i<1)if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){let r=Math.floor(i*n.width),a=Math.floor(i*n.height);void 0===o&&(o=p(r,a));let s=t?p(r,a):o;return s.width=r,s.height=a,s.getContext("2d").drawImage(e,0,0,r,a),eI("WebGLRenderer: Texture has been resized from ("+n.width+"x"+n.height+") to ("+r+"x"+a+")."),s}else"data"in e&&eI("WebGLRenderer: Image in DataTexture is too big ("+n.width+"x"+n.height+").");return e}function m(e){return e.generateMipmaps}function g(t){e.generateMipmap(t)}function y(r,i,n,a,s=!1){if(null!==r){if(void 0!==e[r])return e[r];eI("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+r+"'")}let o=i;if(i===e.RED&&(n===e.FLOAT&&(o=e.R32F),n===e.HALF_FLOAT&&(o=e.R16F),n===e.UNSIGNED_BYTE&&(o=e.R8)),i===e.RED_INTEGER&&(n===e.UNSIGNED_BYTE&&(o=e.R8UI),n===e.UNSIGNED_SHORT&&(o=e.R16UI),n===e.UNSIGNED_INT&&(o=e.R32UI),n===e.BYTE&&(o=e.R8I),n===e.SHORT&&(o=e.R16I),n===e.INT&&(o=e.R32I)),i===e.RG&&(n===e.FLOAT&&(o=e.RG32F),n===e.HALF_FLOAT&&(o=e.RG16F),n===e.UNSIGNED_BYTE&&(o=e.RG8)),i===e.RG_INTEGER&&(n===e.UNSIGNED_BYTE&&(o=e.RG8UI),n===e.UNSIGNED_SHORT&&(o=e.RG16UI),n===e.UNSIGNED_INT&&(o=e.RG32UI),n===e.BYTE&&(o=e.RG8I),n===e.SHORT&&(o=e.RG16I),n===e.INT&&(o=e.RG32I)),i===e.RGB_INTEGER&&(n===e.UNSIGNED_BYTE&&(o=e.RGB8UI),n===e.UNSIGNED_SHORT&&(o=e.RGB16UI),n===e.UNSIGNED_INT&&(o=e.RGB32UI),n===e.BYTE&&(o=e.RGB8I),n===e.SHORT&&(o=e.RGB16I),n===e.INT&&(o=e.RGB32I)),i===e.RGBA_INTEGER&&(n===e.UNSIGNED_BYTE&&(o=e.RGBA8UI),n===e.UNSIGNED_SHORT&&(o=e.RGBA16UI),n===e.UNSIGNED_INT&&(o=e.RGBA32UI),n===e.BYTE&&(o=e.RGBA8I),n===e.SHORT&&(o=e.RGBA16I),n===e.INT&&(o=e.RGBA32I)),i===e.RGB&&(n===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),n===e.UNSIGNED_INT_10F_11F_11F_REV&&(o=e.R11F_G11F_B10F)),i===e.RGBA){let t=s?em:e2.getTransfer(a);n===e.FLOAT&&(o=e.RGBA32F),n===e.HALF_FLOAT&&(o=e.RGBA16F),n===e.UNSIGNED_BYTE&&(o=t===eg?e.SRGB8_ALPHA8:e.RGBA8),n===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),n===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return(o===e.R16F||o===e.R32F||o===e.RG16F||o===e.RG32F||o===e.RGBA16F||o===e.RGBA32F)&&t.get("EXT_color_buffer_float"),o}function v(t,r){let i;return t?null===r||1014===r||1020===r?i=e.DEPTH24_STENCIL8:1015===r?i=e.DEPTH32F_STENCIL8:1012===r&&(i=e.DEPTH24_STENCIL8,eI("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===r||1014===r||1020===r?i=e.DEPTH_COMPONENT24:1015===r?i=e.DEPTH_COMPONENT32F:1012===r&&(i=e.DEPTH_COMPONENT16),i}function x(e,t){return!0===m(e)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function _(e){let t=e.target;t.removeEventListener("dispose",_),function(e){let t=i.get(e);if(void 0===t.__webglInit)return;let r=e.source,n=d.get(r);if(n){let i=n[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&S(e),0===Object.keys(n).length&&d.delete(r)}i.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function b(t){let r=t.target;r.removeEventListener("dispose",b),function(t){let r=i.get(t);if(t.depthTexture&&(t.depthTexture.dispose(),i.remove(t.depthTexture)),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(r.__webglFramebuffer[t]))for(let i=0;i<r.__webglFramebuffer[t].length;i++)e.deleteFramebuffer(r.__webglFramebuffer[t][i]);else e.deleteFramebuffer(r.__webglFramebuffer[t]);r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t])}else{if(Array.isArray(r.__webglFramebuffer))for(let t=0;t<r.__webglFramebuffer.length;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]);else e.deleteFramebuffer(r.__webglFramebuffer);if(r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}let n=t.textures;for(let t=0,r=n.length;t<r;t++){let r=i.get(n[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),s.memory.textures--),i.remove(n[t])}i.remove(t)}(r)}function S(t){let r=i.get(t);e.deleteTexture(r.__webglTexture);let n=t.source,a=d.get(n);delete a[r.__cacheKey],s.memory.textures--}let T=0;function w(t,n){var a;let o,l=i.get(t);if(t.isVideoTexture&&(a=t,o=s.render.frame,h.get(a)!==o&&(h.set(a,o),a.update())),!1===t.isRenderTargetTexture&&!0!==t.isExternalTexture&&t.version>0&&l.__version!==t.version){let e=t.image;if(null===e)eI("WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void I(l,t,n);eI("WebGLRenderer: Texture marked for update but image is incomplete")}}else t.isExternalTexture&&(l.__webglTexture=t.sourceTexture?t.sourceTexture:null);r.bindTexture(e.TEXTURE_2D,l.__webglTexture,e.TEXTURE0+n)}let M={1e3:e.REPEAT,1001:e.CLAMP_TO_EDGE,1002:e.MIRRORED_REPEAT},E={1003:e.NEAREST,1004:e.NEAREST_MIPMAP_NEAREST,1005:e.NEAREST_MIPMAP_LINEAR,1006:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,1008:e.LINEAR_MIPMAP_LINEAR},C={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function R(r,a){if((1015===a.type&&!1===t.has("OES_texture_float_linear")&&(1006===a.magFilter||1007===a.magFilter||1005===a.magFilter||1008===a.magFilter||1006===a.minFilter||1007===a.minFilter||1005===a.minFilter||1008===a.minFilter)&&eI("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(r,e.TEXTURE_WRAP_S,M[a.wrapS]),e.texParameteri(r,e.TEXTURE_WRAP_T,M[a.wrapT]),(r===e.TEXTURE_3D||r===e.TEXTURE_2D_ARRAY)&&e.texParameteri(r,e.TEXTURE_WRAP_R,M[a.wrapR]),e.texParameteri(r,e.TEXTURE_MAG_FILTER,E[a.magFilter]),e.texParameteri(r,e.TEXTURE_MIN_FILTER,E[a.minFilter]),a.compareFunction&&(e.texParameteri(r,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(r,e.TEXTURE_COMPARE_FUNC,C[a.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic"))&&1003!==a.magFilter&&(1005===a.minFilter||1008===a.minFilter)&&(1015!==a.type||!1!==t.has("OES_texture_float_linear"))&&(a.anisotropy>1||i.get(a).__currentAnisotropy)){let s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(r,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,n.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy}}function N(t,r){let i,n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",_));let a=r.source,o=d.get(a);void 0===o&&(o={},d.set(a,o));let l=((i=[]).push(r.wrapS),i.push(r.wrapT),i.push(r.wrapR||0),i.push(r.magFilter),i.push(r.minFilter),i.push(r.anisotropy),i.push(r.internalFormat),i.push(r.format),i.push(r.type),i.push(r.generateMipmaps),i.push(r.premultiplyAlpha),i.push(r.flipY),i.push(r.unpackAlignment),i.push(r.colorSpace),i.join());if(l!==t.__cacheKey){void 0===o[l]&&(o[l]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,n=!0),o[l].usedTimes++;let i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&S(r)),t.__cacheKey=l,t.__webglTexture=o[l].texture}return n}function P(e,t,r){return Math.floor(Math.floor(e/r)/t)}function I(t,s,o){let l=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(l=e.TEXTURE_3D);let u=N(t,s),c=s.source;r.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);let h=i.get(c);if(c.version!==h.__version||!0===u){let t;r.activeTexture(e.TEXTURE0+o);let i=e2.getPrimaries(e2.workingColorSpace),d=""===s.colorSpace?null:e2.getPrimaries(s.colorSpace),A=""===s.colorSpace||i===d?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,A);let p=f(s.image,!1,n.maxTextureSize);p=V(s,p);let _=a.convert(s.format,s.colorSpace),b=a.convert(s.type),S=y(s.internalFormat,_,b,s.colorSpace,s.isVideoTexture);R(l,s);let T=s.mipmaps,w=!0!==s.isVideoTexture,M=void 0===h.__version||!0===u,E=c.dataReady,C=x(s,p);if(s.isDepthTexture)S=v(1027===s.format,s.type),M&&(w?r.texStorage2D(e.TEXTURE_2D,1,S,p.width,p.height):r.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,_,b,null));else if(s.isDataTexture)if(T.length>0){w&&M&&r.texStorage2D(e.TEXTURE_2D,C,S,T[0].width,T[0].height);for(let i=0,n=T.length;i<n;i++)t=T[i],w?E&&r.texSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,_,b,t.data):r.texImage2D(e.TEXTURE_2D,i,S,t.width,t.height,0,_,b,t.data);s.generateMipmaps=!1}else w?(M&&r.texStorage2D(e.TEXTURE_2D,C,S,p.width,p.height),E&&function(t,i,n,a){let s=t.updateRanges;if(0===s.length)r.texSubImage2D(e.TEXTURE_2D,0,0,0,i.width,i.height,n,a,i.data);else{s.sort((e,t)=>e.start-t.start);let o=0;for(let e=1;e<s.length;e++){let t=s[o],r=s[e],n=t.start+t.count,a=P(r.start,i.width,4),l=P(t.start,i.width,4);r.start<=n+1&&a===l&&P(r.start+r.count-1,i.width,4)===a?t.count=Math.max(t.count,r.start+r.count-t.start):s[++o]=r}s.length=o+1;let l=e.getParameter(e.UNPACK_ROW_LENGTH),u=e.getParameter(e.UNPACK_SKIP_PIXELS),c=e.getParameter(e.UNPACK_SKIP_ROWS);e.pixelStorei(e.UNPACK_ROW_LENGTH,i.width);for(let t=0,o=s.length;t<o;t++){let o=s[t],l=Math.floor(o.start/4),u=Math.ceil(o.count/4),c=l%i.width,h=Math.floor(l/i.width);e.pixelStorei(e.UNPACK_SKIP_PIXELS,c),e.pixelStorei(e.UNPACK_SKIP_ROWS,h),r.texSubImage2D(e.TEXTURE_2D,0,c,h,u,1,n,a,i.data)}t.clearUpdateRanges(),e.pixelStorei(e.UNPACK_ROW_LENGTH,l),e.pixelStorei(e.UNPACK_SKIP_PIXELS,u),e.pixelStorei(e.UNPACK_SKIP_ROWS,c)}}(s,p,_,b)):r.texImage2D(e.TEXTURE_2D,0,S,p.width,p.height,0,_,b,p.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){w&&M&&r.texStorage3D(e.TEXTURE_2D_ARRAY,C,S,T[0].width,T[0].height,p.depth);for(let i=0,n=T.length;i<n;i++)if(t=T[i],1023!==s.format)if(null!==_)if(w){if(E)if(s.layerUpdates.size>0){let n=lB(t.width,t.height,s.format,s.type);for(let a of s.layerUpdates){let s=t.data.subarray(a*n/t.data.BYTES_PER_ELEMENT,(a+1)*n/t.data.BYTES_PER_ELEMENT);r.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,a,t.width,t.height,1,_,s)}s.clearLayerUpdates()}else r.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,0,t.width,t.height,p.depth,_,t.data)}else r.compressedTexImage3D(e.TEXTURE_2D_ARRAY,i,S,t.width,t.height,p.depth,0,t.data,0,0);else eI("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else w?E&&r.texSubImage3D(e.TEXTURE_2D_ARRAY,i,0,0,0,t.width,t.height,p.depth,_,b,t.data):r.texImage3D(e.TEXTURE_2D_ARRAY,i,S,t.width,t.height,p.depth,0,_,b,t.data)}else{w&&M&&r.texStorage2D(e.TEXTURE_2D,C,S,T[0].width,T[0].height);for(let i=0,n=T.length;i<n;i++)t=T[i],1023!==s.format?null!==_?w?E&&r.compressedTexSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,_,t.data):r.compressedTexImage2D(e.TEXTURE_2D,i,S,t.width,t.height,0,t.data):eI("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):w?E&&r.texSubImage2D(e.TEXTURE_2D,i,0,0,t.width,t.height,_,b,t.data):r.texImage2D(e.TEXTURE_2D,i,S,t.width,t.height,0,_,b,t.data)}else if(s.isDataArrayTexture)if(w){if(M&&r.texStorage3D(e.TEXTURE_2D_ARRAY,C,S,p.width,p.height,p.depth),E)if(s.layerUpdates.size>0){let t=lB(p.width,p.height,s.format,s.type);for(let i of s.layerUpdates){let n=p.data.subarray(i*t/p.data.BYTES_PER_ELEMENT,(i+1)*t/p.data.BYTES_PER_ELEMENT);r.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,i,p.width,p.height,1,_,b,n)}s.clearLayerUpdates()}else r.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,_,b,p.data)}else r.texImage3D(e.TEXTURE_2D_ARRAY,0,S,p.width,p.height,p.depth,0,_,b,p.data);else if(s.isData3DTexture)w?(M&&r.texStorage3D(e.TEXTURE_3D,C,S,p.width,p.height,p.depth),E&&r.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,_,b,p.data)):r.texImage3D(e.TEXTURE_3D,0,S,p.width,p.height,p.depth,0,_,b,p.data);else if(s.isFramebufferTexture){if(M)if(w)r.texStorage2D(e.TEXTURE_2D,C,S,p.width,p.height);else{let t=p.width,i=p.height;for(let n=0;n<C;n++)r.texImage2D(e.TEXTURE_2D,n,S,t,i,0,_,b,null),t>>=1,i>>=1}}else if(T.length>0){if(w&&M){let t=q(T[0]);r.texStorage2D(e.TEXTURE_2D,C,S,t.width,t.height)}for(let i=0,n=T.length;i<n;i++)t=T[i],w?E&&r.texSubImage2D(e.TEXTURE_2D,i,0,0,_,b,t):r.texImage2D(e.TEXTURE_2D,i,S,_,b,t);s.generateMipmaps=!1}else if(w){if(M){let t=q(p);r.texStorage2D(e.TEXTURE_2D,C,S,t.width,t.height)}E&&r.texSubImage2D(e.TEXTURE_2D,0,0,0,_,b,p)}else r.texImage2D(e.TEXTURE_2D,0,S,_,b,p);m(s)&&g(l),h.__version=c.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function L(t,n,s,o,u,c){let h=a.convert(s.format,s.colorSpace),d=a.convert(s.type),A=y(s.internalFormat,h,d,s.colorSpace),p=i.get(n),f=i.get(s);if(f.__renderTarget=n,!p.__hasExternalTextures){let t=Math.max(1,n.width>>c),i=Math.max(1,n.height>>c);u===e.TEXTURE_3D||u===e.TEXTURE_2D_ARRAY?r.texImage3D(u,c,A,t,i,n.depth,0,h,d,null):r.texImage2D(u,c,A,t,i,0,h,d,null)}r.bindFramebuffer(e.FRAMEBUFFER,t),z(n)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,u,f.__webglTexture,0,k(n)):(u===e.TEXTURE_2D||u>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&u<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,u,f.__webglTexture,c),r.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,r,i){if(e.bindRenderbuffer(e.RENDERBUFFER,t),r.depthBuffer){let n=r.depthTexture,a=n&&n.isDepthTexture?n.type:null,s=v(r.stencilBuffer,a),o=r.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=k(r);z(r)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,s,r.width,r.height):i?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,s,r.width,r.height):e.renderbufferStorage(e.RENDERBUFFER,s,r.width,r.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,o,e.RENDERBUFFER,t)}else{let t=r.textures;for(let n=0;n<t.length;n++){let s=t[n],o=a.convert(s.format,s.colorSpace),u=a.convert(s.type),c=y(s.internalFormat,o,u,s.colorSpace),h=k(r);i&&!1===z(r)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,c,r.width,r.height):z(r)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,c,r.width,r.height):e.renderbufferStorage(e.RENDERBUFFER,c,r.width,r.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function B(t,n){if(n&&n.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(e.FRAMEBUFFER,t),!(n.depthTexture&&n.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let a=i.get(n.depthTexture);a.__renderTarget=n,a.__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),w(n.depthTexture,0);let s=a.__webglTexture,o=k(n);if(1026===n.depthTexture.format)z(n)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else if(1027===n.depthTexture.format)z(n)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0);else throw Error("Unknown depthTexture format")}function F(t){let n=i.get(t),a=!0===t.isWebGLCubeRenderTarget;if(n.__boundDepthTexture!==t.depthTexture){let e=t.depthTexture;if(n.__depthDisposeCallback&&n.__depthDisposeCallback(),e){let t=()=>{delete n.__boundDepthTexture,delete n.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),n.__depthDisposeCallback=t}n.__boundDepthTexture=e}if(t.depthTexture&&!n.__autoAllocateDepthBuffer){if(a)throw Error("target.depthTexture not supported in Cube render targets");let e=t.texture.mipmaps;e&&e.length>0?B(n.__webglFramebuffer[0],t):B(n.__webglFramebuffer,t)}else if(a){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)if(r.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[i]),void 0===n.__webglDepthbuffer[i])n.__webglDepthbuffer[i]=e.createRenderbuffer(),D(n.__webglDepthbuffer[i],t,!1);else{let r=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,a=n.__webglDepthbuffer[i];e.bindRenderbuffer(e.RENDERBUFFER,a),e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,a)}}else{let i=t.texture.mipmaps;if(i&&i.length>0?r.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[0]):r.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),void 0===n.__webglDepthbuffer)n.__webglDepthbuffer=e.createRenderbuffer(),D(n.__webglDepthbuffer,t,!1);else{let r=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,i=n.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,r,e.RENDERBUFFER,i)}}r.bindFramebuffer(e.FRAMEBUFFER,null)}let O=[],U=[];function k(e){return Math.min(n.maxSamples,e.samples)}function z(e){let r=i.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==r.__useRenderToTexture}function V(e,t){let r=e.colorSpace,i=e.format,n=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||r!==ef&&""!==r&&(e2.getTransfer(r)===eg?(1023!==i||1009!==n)&&eI("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):eL("WebGLTextures: Unsupported texture color space:",r)),t}function q(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){let e=T;return e>=n.maxTextures&&eI("WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+n.maxTextures),T+=1,e},this.resetTextureUnits=function(){T=0},this.setTexture2D=w,this.setTexture2DArray=function(t,n){let a=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?I(a,t,n):(t.isExternalTexture&&(a.__webglTexture=t.sourceTexture?t.sourceTexture:null),r.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+n))},this.setTexture3D=function(t,n){let a=i.get(t);!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version?I(a,t,n):r.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+n)},this.setTextureCube=function(t,s){let o=i.get(t);t.version>0&&o.__version!==t.version?function(t,s,o){if(6!==s.image.length)return;let l=N(t,s),u=s.source;r.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);let c=i.get(u);if(u.version!==c.__version||!0===l){let t;r.activeTexture(e.TEXTURE0+o);let i=e2.getPrimaries(e2.workingColorSpace),h=""===s.colorSpace?null:e2.getPrimaries(s.colorSpace),d=""===s.colorSpace||i===h?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let A=s.isCompressedTexture||s.image[0].isCompressedTexture,p=s.image[0]&&s.image[0].isDataTexture,v=[];for(let e=0;e<6;e++)A||p?v[e]=p?s.image[e].image:s.image[e]:v[e]=f(s.image[e],!0,n.maxCubemapSize),v[e]=V(s,v[e]);let _=v[0],b=a.convert(s.format,s.colorSpace),S=a.convert(s.type),T=y(s.internalFormat,b,S,s.colorSpace),w=!0!==s.isVideoTexture,M=void 0===c.__version||!0===l,E=u.dataReady,C=x(s,_);if(R(e.TEXTURE_CUBE_MAP,s),A){w&&M&&r.texStorage2D(e.TEXTURE_CUBE_MAP,C,T,_.width,_.height);for(let i=0;i<6;i++){t=v[i].mipmaps;for(let n=0;n<t.length;n++){let a=t[n];1023!==s.format?null!==b?w?E&&r.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n,0,0,a.width,a.height,b,a.data):r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n,T,a.width,a.height,0,a.data):eI("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):w?E&&r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n,0,0,a.width,a.height,b,S,a.data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n,T,a.width,a.height,0,b,S,a.data)}}}else{if(t=s.mipmaps,w&&M){t.length>0&&C++;let i=q(v[0]);r.texStorage2D(e.TEXTURE_CUBE_MAP,C,T,i.width,i.height)}for(let i=0;i<6;i++)if(p){w?E&&r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,v[i].width,v[i].height,b,S,v[i].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,T,v[i].width,v[i].height,0,b,S,v[i].data);for(let n=0;n<t.length;n++){let a=t[n].image[i].image;w?E&&r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n+1,0,0,a.width,a.height,b,S,a.data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n+1,T,a.width,a.height,0,b,S,a.data)}}else{w?E&&r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,0,0,b,S,v[i]):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,T,b,S,v[i]);for(let n=0;n<t.length;n++){let a=t[n];w?E&&r.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n+1,0,0,b,S,a.image[i]):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n+1,T,b,S,a.image[i])}}}m(s)&&g(e.TEXTURE_CUBE_MAP),c.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(o,t,s):r.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,r,n){let a=i.get(t);void 0!==r&&L(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==n&&F(t)},this.setupRenderTarget=function(t){let n=t.texture,o=i.get(t),l=i.get(n);t.addEventListener("dispose",b);let u=t.textures,c=!0===t.isWebGLCubeRenderTarget,h=u.length>1;if(!h&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=n.version,s.memory.textures++),c){o.__webglFramebuffer=[];for(let t=0;t<6;t++)if(n.mipmaps&&n.mipmaps.length>0){o.__webglFramebuffer[t]=[];for(let r=0;r<n.mipmaps.length;r++)o.__webglFramebuffer[t][r]=e.createFramebuffer()}else o.__webglFramebuffer[t]=e.createFramebuffer()}else{if(n.mipmaps&&n.mipmaps.length>0){o.__webglFramebuffer=[];for(let t=0;t<n.mipmaps.length;t++)o.__webglFramebuffer[t]=e.createFramebuffer()}else o.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,r=u.length;t<r;t++){let r=i.get(u[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}if(t.samples>0&&!1===z(t)){o.__webglMultisampledFramebuffer=e.createFramebuffer(),o.__webglColorRenderbuffer=[],r.bindFramebuffer(e.FRAMEBUFFER,o.__webglMultisampledFramebuffer);for(let r=0;r<u.length;r++){let i=u[r];o.__webglColorRenderbuffer[r]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,o.__webglColorRenderbuffer[r]);let n=a.convert(i.format,i.colorSpace),s=a.convert(i.type),l=y(i.internalFormat,n,s,i.colorSpace,!0===t.isXRRenderTarget),c=k(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,c,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+r,e.RENDERBUFFER,o.__webglColorRenderbuffer[r])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(o.__webglDepthRenderbuffer=e.createRenderbuffer(),D(o.__webglDepthRenderbuffer,t,!0)),r.bindFramebuffer(e.FRAMEBUFFER,null)}}if(c){r.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),R(e.TEXTURE_CUBE_MAP,n);for(let r=0;r<6;r++)if(n.mipmaps&&n.mipmaps.length>0)for(let i=0;i<n.mipmaps.length;i++)L(o.__webglFramebuffer[r][i],t,n,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+r,i);else L(o.__webglFramebuffer[r],t,n,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0);m(n)&&g(e.TEXTURE_CUBE_MAP),r.unbindTexture()}else if(h){for(let n=0,a=u.length;n<a;n++){let a=u[n],s=i.get(a),l=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(l=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),r.bindTexture(l,s.__webglTexture),R(l,a),L(o.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+n,l,0),m(a)&&g(l)}r.unbindTexture()}else{let i=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(i=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),r.bindTexture(i,l.__webglTexture),R(i,n),n.mipmaps&&n.mipmaps.length>0)for(let r=0;r<n.mipmaps.length;r++)L(o.__webglFramebuffer[r],t,n,e.COLOR_ATTACHMENT0,i,r);else L(o.__webglFramebuffer,t,n,e.COLOR_ATTACHMENT0,i,0);m(n)&&g(i),r.unbindTexture()}t.depthBuffer&&F(t)},this.updateRenderTargetMipmap=function(t){let n=t.textures;for(let a=0,s=n.length;a<s;a++){let s=n[a];if(m(s)){let n=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:t.isWebGL3DRenderTarget?e.TEXTURE_3D:t.isWebGLArrayRenderTarget||t.isCompressedArrayTexture?e.TEXTURE_2D_ARRAY:e.TEXTURE_2D,a=i.get(s).__webglTexture;r.bindTexture(n,a),g(n),r.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0){if(!1===z(t)){let n=t.textures,a=t.width,s=t.height,o=e.COLOR_BUFFER_BIT,l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=i.get(t),h=n.length>1;if(h)for(let t=0;t<n.length;t++)r.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),r.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);r.bindFramebuffer(e.READ_FRAMEBUFFER,c.__webglMultisampledFramebuffer);let d=t.texture.mipmaps;d&&d.length>0?r.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer[0]):r.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglFramebuffer);for(let r=0;r<n.length;r++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,c.__webglColorRenderbuffer[r]);let t=i.get(n[r]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),!0===u&&(O.length=0,U.length=0,O.push(e.COLOR_ATTACHMENT0+r),t.depthBuffer&&!1===t.resolveDepthBuffer&&(O.push(l),U.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,U)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,O))}if(r.bindFramebuffer(e.READ_FRAMEBUFFER,null),r.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<n.length;t++){r.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,c.__webglColorRenderbuffer[t]);let a=i.get(n[t]).__webglTexture;r.bindFramebuffer(e.FRAMEBUFFER,c.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}r.bindFramebuffer(e.DRAW_FRAMEBUFFER,c.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&u){let r=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[r])}}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=L,this.useMultisampledRTT=z}function cU(e,t){return{convert:function(r,i=""){let n,a=e2.getTransfer(i);if(1009===r)return e.UNSIGNED_BYTE;if(1017===r)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===r)return e.UNSIGNED_INT_5_9_9_9_REV;if(35899===r)return e.UNSIGNED_INT_10F_11F_11F_REV;if(1010===r)return e.BYTE;if(1011===r)return e.SHORT;if(1012===r)return e.UNSIGNED_SHORT;if(1013===r)return e.INT;if(1014===r)return e.UNSIGNED_INT;if(1015===r)return e.FLOAT;if(1016===r)return e.HALF_FLOAT;if(1021===r)return e.ALPHA;if(1022===r)return e.RGB;if(1023===r)return e.RGBA;if(1026===r)return e.DEPTH_COMPONENT;if(1027===r)return e.DEPTH_STENCIL;if(1028===r)return e.RED;if(1029===r)return e.RED_INTEGER;if(1030===r)return e.RG;if(1031===r)return e.RG_INTEGER;if(1033===r)return e.RGBA_INTEGER;if(33776===r||33777===r||33778===r||33779===r)if(a===eg){if(null===(n=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===r)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===r)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===r)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===r)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===r)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===r)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===r)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===r)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===r||35841===r||35842===r||35843===r){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===r)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===r)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r||37492===r||37496===r){if(null===(n=t.get("WEBGL_compressed_texture_etc")))return null;if(36196===r||37492===r)return a===eg?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(37496===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}if(37808===r||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r){if(null===(n=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===r)return a===eg?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===r||36494===r||36495===r){if(null===(n=t.get("EXT_texture_compression_bptc")))return null;if(36492===r)return a===eg?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===r)return n.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===r)return n.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===r||36284===r||36285===r||36286===r){if(null===(n=t.get("EXT_texture_compression_rgtc")))return null;if(36283===r)return n.COMPRESSED_RED_RGTC1_EXT;if(36284===r)return n.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===r)return n.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===r)return n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===r?e.UNSIGNED_INT_24_8:void 0!==e[r]?e[r]:null}}}let ck=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,cz=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class cV{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(null===this.texture){let r=new n3(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){let t=e.cameras[0].viewport,r=new ir({vertexShader:ck,fragmentShader:cz,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new r5(new aJ(20,20),r)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class cq extends eB{constructor(e,t){super();const r=this;let i=null,n=1,a=null,s="local-floor",o=1,l=null,u=null,c=null,h=null,d=null,A=null;const p="undefined"!=typeof XRWebGLBinding,f=new cV,m={},g=t.getContextAttributes();let y=null,v=null;const x=[],_=[],b=new eX;let S=null;const T=new il;T.viewport=new tr;const w=new il;w.viewport=new tr;const M=[T,w],E=new og;let C=null,R=null;function N(e){let t=_.indexOf(e.inputSource);if(-1===t)return;let r=x[t];void 0!==r&&(r.update(e.inputSource,e.frame,l||a),r.dispatchEvent({type:e.type,data:e.inputSource}))}function P(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",P),i.removeEventListener("inputsourceschange",I);for(let e=0;e<x.length;e++){let t=_[e];null!==t&&(_[e]=null,x[e].disconnect(t))}for(let e in C=null,R=null,f.reset(),m)delete m[e];e.setRenderTarget(y),d=null,h=null,c=null,i=null,v=null,O.stop(),r.isPresenting=!1,e.setPixelRatio(S),e.setSize(b.width,b.height,!1),r.dispatchEvent({type:"sessionend"})}function I(e){for(let t=0;t<e.removed.length;t++){let r=e.removed[t],i=_.indexOf(r);i>=0&&(_[i]=null,x[i].disconnect(r))}for(let t=0;t<e.added.length;t++){let r=e.added[t],i=_.indexOf(r);if(-1===i){for(let e=0;e<x.length;e++)if(e>=_.length){_.push(r),i=e;break}else if(null===_[e]){_[e]=r,i=e;break}if(-1===i)break}let n=x[i];n&&n.connect(r)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new ip,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new ip,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new ip,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){n=e,!0===r.isPresenting&&eI("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===r.isPresenting&&eI("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return null===c&&p&&(c=new XRWebGLBinding(i,t)),c},this.getFrame=function(){return A},this.getSession=function(){return i},this.setSession=async function(u){if(null!==(i=u)){if(y=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",P),i.addEventListener("inputsourceschange",I),!0!==g.xrCompatible&&await t.makeXRCompatible(),S=e.getPixelRatio(),e.getSize(b),p&&"createProjectionLayer"in XRWebGLBinding.prototype){let r=null,a=null,s=null;g.depth&&(s=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,r=g.stencil?1027:1026,a=g.stencil?1020:1014);let o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:n};h=(c=this.getBinding()).createProjectionLayer(o),i.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new tn(h.textureWidth,h.textureHeight,{format:1023,type:1009,depthTexture:new n2(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,r),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:4*!!g.antialias,resolveDepthBuffer:!1===h.ignoreDepthValues,resolveStencilBuffer:!1===h.ignoreDepthValues})}else{let r={antialias:g.antialias,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:n};d=new XRWebGLLayer(i,t,r),i.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new tn(d.framebufferWidth,d.framebufferHeight,{format:1023,type:1009,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil,resolveDepthBuffer:!1===d.ignoreDepthValues,resolveStencilBuffer:!1===d.ignoreDepthValues})}v.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await i.requestReferenceSpace(s),O.setContext(i),O.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==i)return i.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const L=new e$,D=new e$;function B(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){var t,r,n;if(null===i)return;let a=e.near,s=e.far;null!==f.texture&&(f.depthNear>0&&(a=f.depthNear),f.depthFar>0&&(s=f.depthFar)),E.near=w.near=T.near=a,E.far=w.far=T.far=s,(C!==E.near||R!==E.far)&&(i.updateRenderState({depthNear:E.near,depthFar:E.far}),C=E.near,R=E.far),E.layers.mask=6|e.layers.mask,T.layers.mask=3&E.layers.mask,w.layers.mask=5&E.layers.mask;let o=e.parent,l=E.cameras;B(E,o);for(let e=0;e<l.length;e++)B(l[e],o);2===l.length?function(e,t,r){L.setFromMatrixPosition(t.matrixWorld),D.setFromMatrixPosition(r.matrixWorld);let i=L.distanceTo(D),n=t.projectionMatrix.elements,a=r.projectionMatrix.elements,s=n[14]/(n[10]-1),o=n[14]/(n[10]+1),l=(n[9]+1)/n[5],u=(n[9]-1)/n[5],c=(n[8]-1)/n[0],h=(a[8]+1)/a[0],d=i/(-c+h),A=-(d*c);if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(A),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===n[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{let t=s+d,r=o+d;e.projectionMatrix.makePerspective(s*c-A,s*h+(i-A),l*o/r*t,u*o/r*t,t,r),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(E,T,w):E.projectionMatrix.copy(T.projectionMatrix),t=e,r=E,null===(n=o)?t.matrix.copy(r.matrixWorld):(t.matrix.copy(n.matrixWorld),t.matrix.invert(),t.matrix.multiply(r.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(r.projectionMatrix),t.projectionMatrixInverse.copy(r.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*ek*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(E)},this.getCameraTexture=function(e){return m[e]};let F=null;const O=new lO;O.setAnimationLoop(function(t,n){if(u=n.getViewerPose(l||a),A=n,null!==u){let t=u.views;null!==d&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){let i=t[r],a=null;if(null!==d)a=d.getViewport(i);else{let t=c.getViewSubImage(h,i);a=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,t.depthStencilTexture),e.setRenderTarget(v))}let s=M[r];void 0===s&&((s=new il).layers.enable(r),s.viewport=new tr,M[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===r&&(E.matrix.copy(s.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(s)}let a=i.enabledFeatures;if(a&&a.includes("depth-sensing")&&"gpu-optimized"==i.depthUsage&&p){let e=(c=r.getBinding()).getDepthInformation(t[0]);e&&e.isValid&&e.texture&&f.init(e,i.renderState)}if(a&&a.includes("camera-access")&&p){e.state.unbindTexture(),c=r.getBinding();for(let e=0;e<t.length;e++){let r=t[e].camera;if(r){let e=m[r];e||(e=new n3,m[r]=e);let t=c.getCameraImage(r);e.sourceTexture=t}}}}for(let e=0;e<x.length;e++){let t=_[e],r=x[e];null!==t&&void 0!==r&&r.update(t,n,l||a)}F&&F(t,n),n.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:n}),A=null}),this.setAnimationLoop=function(e){F=e},this.dispose=function(){}}}let cG=new tW,cH=new tF;function cj(e,t){function r(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function i(e,i){e.opacity.value=i.opacity,i.color&&e.diffuse.value.copy(i.color),i.emissive&&e.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(e.map.value=i.map,r(i.map,e.mapTransform)),i.alphaMap&&(e.alphaMap.value=i.alphaMap,r(i.alphaMap,e.alphaMapTransform)),i.bumpMap&&(e.bumpMap.value=i.bumpMap,r(i.bumpMap,e.bumpMapTransform),e.bumpScale.value=i.bumpScale,1===i.side&&(e.bumpScale.value*=-1)),i.normalMap&&(e.normalMap.value=i.normalMap,r(i.normalMap,e.normalMapTransform),e.normalScale.value.copy(i.normalScale),1===i.side&&e.normalScale.value.negate()),i.displacementMap&&(e.displacementMap.value=i.displacementMap,r(i.displacementMap,e.displacementMapTransform),e.displacementScale.value=i.displacementScale,e.displacementBias.value=i.displacementBias),i.emissiveMap&&(e.emissiveMap.value=i.emissiveMap,r(i.emissiveMap,e.emissiveMapTransform)),i.specularMap&&(e.specularMap.value=i.specularMap,r(i.specularMap,e.specularMapTransform)),i.alphaTest>0&&(e.alphaTest.value=i.alphaTest);let n=t.get(i),a=n.envMap,s=n.envMapRotation;a&&(e.envMap.value=a,cG.copy(s),cG.x*=-1,cG.y*=-1,cG.z*=-1,a.isCubeTexture&&!1===a.isRenderTargetTexture&&(cG.y*=-1,cG.z*=-1),e.envMapRotation.value.setFromMatrix4(cH.makeRotationFromEuler(cG)),e.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,e.reflectivity.value=i.reflectivity,e.ior.value=i.ior,e.refractionRatio.value=i.refractionRatio),i.lightMap&&(e.lightMap.value=i.lightMap,e.lightMapIntensity.value=i.lightMapIntensity,r(i.lightMap,e.lightMapTransform)),i.aoMap&&(e.aoMap.value=i.aoMap,e.aoMapIntensity.value=i.aoMapIntensity,r(i.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,r){r.color.getRGB(t.fogColor.value,ie(e)),r.isFog?(t.fogNear.value=r.near,t.fogFar.value=r.far):r.isFogExp2&&(t.fogDensity.value=r.density)},refreshMaterialUniforms:function(e,n,a,s,o){var l,u,c,h,d,A,p,f,m,g,y,v,x,_,b,S,T,w,M,E,C,R,N;let P;n.isMeshBasicMaterial||n.isMeshLambertMaterial?i(e,n):n.isMeshToonMaterial?(i(e,n),l=e,(u=n).gradientMap&&(l.gradientMap.value=u.gradientMap)):n.isMeshPhongMaterial?(i(e,n),c=e,h=n,c.specular.value.copy(h.specular),c.shininess.value=Math.max(h.shininess,1e-4)):n.isMeshStandardMaterial?(i(e,n),d=e,A=n,d.metalness.value=A.metalness,A.metalnessMap&&(d.metalnessMap.value=A.metalnessMap,r(A.metalnessMap,d.metalnessMapTransform)),d.roughness.value=A.roughness,A.roughnessMap&&(d.roughnessMap.value=A.roughnessMap,r(A.roughnessMap,d.roughnessMapTransform)),A.envMap&&(d.envMapIntensity.value=A.envMapIntensity),n.isMeshPhysicalMaterial&&(p=e,f=n,m=o,p.ior.value=f.ior,f.sheen>0&&(p.sheenColor.value.copy(f.sheenColor).multiplyScalar(f.sheen),p.sheenRoughness.value=f.sheenRoughness,f.sheenColorMap&&(p.sheenColorMap.value=f.sheenColorMap,r(f.sheenColorMap,p.sheenColorMapTransform)),f.sheenRoughnessMap&&(p.sheenRoughnessMap.value=f.sheenRoughnessMap,r(f.sheenRoughnessMap,p.sheenRoughnessMapTransform))),f.clearcoat>0&&(p.clearcoat.value=f.clearcoat,p.clearcoatRoughness.value=f.clearcoatRoughness,f.clearcoatMap&&(p.clearcoatMap.value=f.clearcoatMap,r(f.clearcoatMap,p.clearcoatMapTransform)),f.clearcoatRoughnessMap&&(p.clearcoatRoughnessMap.value=f.clearcoatRoughnessMap,r(f.clearcoatRoughnessMap,p.clearcoatRoughnessMapTransform)),f.clearcoatNormalMap&&(p.clearcoatNormalMap.value=f.clearcoatNormalMap,r(f.clearcoatNormalMap,p.clearcoatNormalMapTransform),p.clearcoatNormalScale.value.copy(f.clearcoatNormalScale),1===f.side&&p.clearcoatNormalScale.value.negate())),f.dispersion>0&&(p.dispersion.value=f.dispersion),f.iridescence>0&&(p.iridescence.value=f.iridescence,p.iridescenceIOR.value=f.iridescenceIOR,p.iridescenceThicknessMinimum.value=f.iridescenceThicknessRange[0],p.iridescenceThicknessMaximum.value=f.iridescenceThicknessRange[1],f.iridescenceMap&&(p.iridescenceMap.value=f.iridescenceMap,r(f.iridescenceMap,p.iridescenceMapTransform)),f.iridescenceThicknessMap&&(p.iridescenceThicknessMap.value=f.iridescenceThicknessMap,r(f.iridescenceThicknessMap,p.iridescenceThicknessMapTransform))),f.transmission>0&&(p.transmission.value=f.transmission,p.transmissionSamplerMap.value=m.texture,p.transmissionSamplerSize.value.set(m.width,m.height),f.transmissionMap&&(p.transmissionMap.value=f.transmissionMap,r(f.transmissionMap,p.transmissionMapTransform)),p.thickness.value=f.thickness,f.thicknessMap&&(p.thicknessMap.value=f.thicknessMap,r(f.thicknessMap,p.thicknessMapTransform)),p.attenuationDistance.value=f.attenuationDistance,p.attenuationColor.value.copy(f.attenuationColor)),f.anisotropy>0&&(p.anisotropyVector.value.set(f.anisotropy*Math.cos(f.anisotropyRotation),f.anisotropy*Math.sin(f.anisotropyRotation)),f.anisotropyMap&&(p.anisotropyMap.value=f.anisotropyMap,r(f.anisotropyMap,p.anisotropyMapTransform))),p.specularIntensity.value=f.specularIntensity,p.specularColor.value.copy(f.specularColor),f.specularColorMap&&(p.specularColorMap.value=f.specularColorMap,r(f.specularColorMap,p.specularColorMapTransform)),f.specularIntensityMap&&(p.specularIntensityMap.value=f.specularIntensityMap,r(f.specularIntensityMap,p.specularIntensityMapTransform)))):n.isMeshMatcapMaterial?(i(e,n),g=e,(y=n).matcap&&(g.matcap.value=y.matcap)):n.isMeshDepthMaterial?i(e,n):n.isMeshDistanceMaterial?(i(e,n),v=e,x=n,P=t.get(x).light,v.referencePosition.value.setFromMatrixPosition(P.matrixWorld),v.nearDistance.value=P.shadow.camera.near,v.farDistance.value=P.shadow.camera.far):n.isMeshNormalMaterial?i(e,n):n.isLineBasicMaterial?(_=e,b=n,_.diffuse.value.copy(b.color),_.opacity.value=b.opacity,b.map&&(_.map.value=b.map,r(b.map,_.mapTransform)),n.isLineDashedMaterial&&(S=e,T=n,S.dashSize.value=T.dashSize,S.totalSize.value=T.dashSize+T.gapSize,S.scale.value=T.scale)):n.isPointsMaterial?(w=e,M=n,E=a,C=s,w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.size.value=M.size*E,w.scale.value=.5*C,M.map&&(w.map.value=M.map,r(M.map,w.uvTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,r(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)):n.isSpriteMaterial?(R=e,N=n,R.diffuse.value.copy(N.color),R.opacity.value=N.opacity,R.rotation.value=N.rotation,N.map&&(R.map.value=N.map,r(N.map,R.mapTransform)),N.alphaMap&&(R.alphaMap.value=N.alphaMap,r(N.alphaMap,R.alphaMapTransform)),N.alphaTest>0&&(R.alphaTest.value=N.alphaTest)):n.isShadowMaterial?(e.color.value.copy(n.color),e.opacity.value=n.opacity):n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)}}}function cW(e,t,r,i){let n={},a={},s=[],o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e){let t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?eI("WebGLRenderer: Texture samplers can not be part of an uniforms group."):eI("WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){let r=t.target;r.removeEventListener("dispose",u);let i=s.indexOf(r.__bindingPointIndex);s.splice(i,1),e.deleteBuffer(n[r.id]),delete n[r.id],delete a[r.id]}return{bind:function(e,t){let r=t.program;i.uniformBlockBinding(e,r)},update:function(r,c){var h;let d,A,p,f,m=n[r.id];void 0===m&&(function(e){let t=e.uniforms,r=0;for(let e=0,i=t.length;e<i;e++){let i=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=i.length;e<t;e++){let t=i[e],n=Array.isArray(t.value)?t.value:[t.value];for(let e=0,i=n.length;e<i;e++){let i=l(n[e]),a=r%16,s=a%i.boundary,o=a+s;r+=s,0!==o&&16-o<i.storage&&(r+=16-o),t.__data=new Float32Array(i.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=r,r+=i.storage}}}let i=r%16;i>0&&(r+=16-i),e.__size=r,e.__cache={}}(r),(h=r).__bindingPointIndex=d=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return eL("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}(),A=e.createBuffer(),p=h.__size,f=h.usage,e.bindBuffer(e.UNIFORM_BUFFER,A),e.bufferData(e.UNIFORM_BUFFER,p,f),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,d,A),m=A,n[r.id]=m,r.addEventListener("dispose",u));let g=c.program;i.updateUBOMapping(r,g);let y=t.render.frame;a[r.id]!==y&&(function(t){let r=n[t.id],i=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,r);for(let t=0,r=i.length;t<r;t++){let r=Array.isArray(i[t])?i[t]:[i[t]];for(let i=0,n=r.length;i<n;i++){let n=r[i];if(!0===function(e,t,r,i){let n=e.value,a=t+"_"+r;if(void 0===i[a])return"number"==typeof n||"boolean"==typeof n?i[a]=n:i[a]=n.clone(),!0;{let e=i[a];if("number"==typeof n||"boolean"==typeof n){if(e!==n)return i[a]=n,!0}else if(!1===e.equals(n))return e.copy(n),!0}return!1}(n,t,i,a)){let t=n.__offset,r=Array.isArray(n.value)?n.value:[n.value],i=0;for(let a=0;a<r.length;a++){let s=r[a],o=l(s);"number"==typeof s||"boolean"==typeof s?(n.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,n.__data)):s.isMatrix3?(n.__data[0]=s.elements[0],n.__data[1]=s.elements[1],n.__data[2]=s.elements[2],n.__data[3]=0,n.__data[4]=s.elements[3],n.__data[5]=s.elements[4],n.__data[6]=s.elements[5],n.__data[7]=0,n.__data[8]=s.elements[6],n.__data[9]=s.elements[7],n.__data[10]=s.elements[8],n.__data[11]=0):(s.toArray(n.__data,i),i+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(r),a[r.id]=y)},dispose:function(){for(let t in n)e.deleteBuffer(n[t]);s=[],n={},a={}}}}let cX=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]),cQ=null;class c${constructor(e={}){let t,r,i,n,a,s,o,l,u,c,h,d,A,p,f,m,g,y,v,x,_,b,S,T,w;const{canvas:M=eM(),context:E=null,depth:C=!0,stencil:R=!1,alpha:N=!1,antialias:P=!1,premultipliedAlpha:I=!0,preserveDrawingBuffer:L=!1,powerPreference:D="default",failIfMajorPerformanceCaveat:B=!1,reversedDepthBuffer:F=!1}=e;if(this.isWebGLRenderer=!0,null!==E){if("undefined"!=typeof WebGLRenderingContext&&E instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=E.getContextAttributes().alpha}else t=N;const O=new Set([1033,1031,1029]),U=new Set([1009,1014,1012,1020,1017,1018]),k=new Uint32Array(4),z=new Int32Array(4);let V=null,q=null;const G=[],H=[];this.domElement=M,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=0,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const j=this;let W=!1;this._outputColorSpace=ep;let X=0,Q=0,$=null,Y=-1,K=null;const Z=new tr,J=new tr;let ee=null;const et=new ry(0);let er=0,ei=M.width,en=M.height,ea=1,es=null,eo=null;const el=new tr(0,0,ei,en),eu=new tr(0,0,ei,en);let ec=!1;const eh=new no;let ed=!1,eA=!1;const em=new tF,eg=new e$,ey=new tr,ev={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ex=!1;function e_(){return null===$?ea:1}let eb=E;function eS(e,t){return M.getContext(e,t)}try{if("setAttribute"in M&&M.setAttribute("data-engine","three.js r181"),M.addEventListener("webglcontextlost",eE,!1),M.addEventListener("webglcontextrestored",eC,!1),M.addEventListener("webglcontextcreationerror",eR,!1),null===eb){const e="webgl2";if(eb=eS(e,{alpha:!0,depth:C,stencil:R,antialias:P,premultipliedAlpha:I,preserveDrawingBuffer:L,powerPreference:D,failIfMajorPerformanceCaveat:B}),null===eb)if(eS(e))throw Error("Error creating WebGL context with your selected attributes.");else throw Error("Error creating WebGL context.")}}catch(e){throw e("WebGLRenderer: "+e.message),e}function eT(){(r=new ur(eb)).init(),S=new cU(eb,r),i=new lQ(eb,r,e,S),n=new cF(eb,r),i.reversedDepthBuffer&&F&&n.buffers.depth.setReversed(!0),a=new ua(eb),s=new cS,o=new cO(eb,r,n,s,i,S,a),l=new lY(j),u=new ut(j),c=new lU(eb),T=new lW(eb,c),h=new ui(eb,c,a,T),d=new uo(eb,h,c,a),x=new us(eb,i,o),g=new l$(s),A=new cb(j,l,u,r,i,T,g),p=new cj(j,s),f=new cE,m=new cL(r),v=new lj(j,l,u,n,d,t,I),y=new cD(j,d,i),w=new cW(eb,a,i,n),_=new lX(eb,r,a),b=new un(eb,r,a),a.programs=A.programs,j.capabilities=i,j.extensions=r,j.properties=s,j.renderLists=f,j.shadowMap=y,j.state=n,j.info=a}eT();const ew=new cq(j,eb);function eE(e){e.preventDefault(),eP("WebGLRenderer: Context Lost."),W=!0}function eC(){eP("WebGLRenderer: Context Restored."),W=!1;let e=a.autoReset,t=y.enabled,r=y.autoUpdate,i=y.needsUpdate,n=y.type;eT(),a.autoReset=e,y.enabled=t,y.autoUpdate=r,y.needsUpdate=i,y.type=n}function eR(e){eL("WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eN(e){var t,r;let i,n=e.target;n.removeEventListener("dispose",eN),r=t=n,void 0!==(i=s.get(r).programs)&&(i.forEach(function(e){A.releaseProgram(e)}),r.isShaderMaterial&&A.releaseShaderCache(r)),s.remove(t)}function eB(e,t,r){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,ej(e,t,r),e.side=0,e.needsUpdate=!0,ej(e,t,r),e.side=2):ej(e,t,r)}this.xr=ew,this.getContext=function(){return eb},this.getContextAttributes=function(){return eb.getContextAttributes()},this.forceContextLoss=function(){let e=r.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=r.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ea},this.setPixelRatio=function(e){void 0!==e&&(ea=e,this.setSize(ei,en,!1))},this.getSize=function(e){return e.set(ei,en)},this.setSize=function(e,t,r=!0){ew.isPresenting?eI("WebGLRenderer: Can't change size while VR device is presenting."):(ei=e,en=t,M.width=Math.floor(e*ea),M.height=Math.floor(t*ea),!0===r&&(M.style.width=e+"px",M.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(ei*ea,en*ea).floor()},this.setDrawingBufferSize=function(e,t,r){ei=e,en=t,ea=r,M.width=Math.floor(e*r),M.height=Math.floor(t*r),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(Z)},this.getViewport=function(e){return e.copy(el)},this.setViewport=function(e,t,r,i){e.isVector4?el.set(e.x,e.y,e.z,e.w):el.set(e,t,r,i),n.viewport(Z.copy(el).multiplyScalar(ea).round())},this.getScissor=function(e){return e.copy(eu)},this.setScissor=function(e,t,r,i){e.isVector4?eu.set(e.x,e.y,e.z,e.w):eu.set(e,t,r,i),n.scissor(J.copy(eu).multiplyScalar(ea).round())},this.getScissorTest=function(){return ec},this.setScissorTest=function(e){n.setScissorTest(ec=e)},this.setOpaqueSort=function(e){es=e},this.setTransparentSort=function(e){eo=e},this.getClearColor=function(e){return e.copy(v.getClearColor())},this.setClearColor=function(){v.setClearColor(...arguments)},this.getClearAlpha=function(){return v.getClearAlpha()},this.setClearAlpha=function(){v.setClearAlpha(...arguments)},this.clear=function(e=!0,t=!0,r=!0){let i=0;if(e){let e=!1;if(null!==$){let t=$.texture.format;e=O.has(t)}if(e){let e=$.texture.type,t=U.has(e),r=v.getClearColor(),i=v.getClearAlpha(),n=r.r,a=r.g,s=r.b;t?(k[0]=n,k[1]=a,k[2]=s,k[3]=i,eb.clearBufferuiv(eb.COLOR,0,k)):(z[0]=n,z[1]=a,z[2]=s,z[3]=i,eb.clearBufferiv(eb.COLOR,0,z))}else i|=eb.COLOR_BUFFER_BIT}t&&(i|=eb.DEPTH_BUFFER_BIT),r&&(i|=eb.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),eb.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){M.removeEventListener("webglcontextlost",eE,!1),M.removeEventListener("webglcontextrestored",eC,!1),M.removeEventListener("webglcontextcreationerror",eR,!1),v.dispose(),f.dispose(),m.dispose(),s.dispose(),l.dispose(),u.dispose(),d.dispose(),T.dispose(),w.dispose(),A.dispose(),ew.dispose(),ew.removeEventListener("sessionstart",eO),ew.removeEventListener("sessionend",eU),ek.stop()},this.renderBufferDirect=function(e,t,a,d,A,f){let m;null===t&&(t=ev);let y=A.isMesh&&0>A.matrixWorld.determinant(),v=function(e,t,r,a,c){var h,d;!0!==t.isScene&&(t=ev),o.resetTextureUnits();let A=t.fog,f=a.isMeshStandardMaterial?t.environment:null,m=null===$?j.outputColorSpace:!0===$.isXRRenderTarget?$.texture.colorSpace:ef,y=(a.isMeshStandardMaterial?u:l).get(a.envMap||f),v=!0===a.vertexColors&&!!r.attributes.color&&4===r.attributes.color.itemSize,_=!!r.attributes.tangent&&(!!a.normalMap||a.anisotropy>0),b=!!r.morphAttributes.position,S=!!r.morphAttributes.normal,T=!!r.morphAttributes.color,M=0;a.toneMapped&&(null===$||!0===$.isXRRenderTarget)&&(M=j.toneMapping);let E=r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color,C=void 0!==E?E.length:0,R=s.get(a),N=q.state.lights;if(!0===ed&&(!0===eA||e!==K)){let t=e===K&&a.id===Y;g.setState(a,e,t)}let P=!1;a.version===R.__version?R.needsLights&&R.lightsStateVersion!==N.state.version||R.outputColorSpace!==m||c.isBatchedMesh&&!1===R.batching?P=!0:c.isBatchedMesh||!0!==R.batching?c.isBatchedMesh&&!0===R.batchingColor&&null===c.colorTexture||c.isBatchedMesh&&!1===R.batchingColor&&null!==c.colorTexture||c.isInstancedMesh&&!1===R.instancing?P=!0:c.isInstancedMesh||!0!==R.instancing?c.isSkinnedMesh&&!1===R.skinning?P=!0:c.isSkinnedMesh||!0!==R.skinning?c.isInstancedMesh&&!0===R.instancingColor&&null===c.instanceColor||c.isInstancedMesh&&!1===R.instancingColor&&null!==c.instanceColor||c.isInstancedMesh&&!0===R.instancingMorph&&null===c.morphTexture||c.isInstancedMesh&&!1===R.instancingMorph&&null!==c.morphTexture||R.envMap!==y||!0===a.fog&&R.fog!==A||void 0!==R.numClippingPlanes&&(R.numClippingPlanes!==g.numPlanes||R.numIntersection!==g.numIntersection)||R.vertexAlphas!==v||R.vertexTangents!==_||R.morphTargets!==b||R.morphNormals!==S||R.morphColors!==T||R.toneMapping!==M?P=!0:R.morphTargetsCount!==C&&(P=!0):P=!0:P=!0:P=!0:(P=!0,R.__version=a.version);let I=R.currentProgram;!0===P&&(I=ej(a,t,c));let L=!1,D=!1,B=!1,F=I.getUniforms(),O=R.uniforms;if(n.useProgram(I.program)&&(L=!0,D=!0,B=!0),a.id!==Y&&(Y=a.id,D=!0),L||K!==e){n.buffers.depth.getReversed()&&!0!==e.reversedDepth&&(e._reversedDepth=!0,e.updateProjectionMatrix()),F.setValue(eb,"projectionMatrix",e.projectionMatrix),F.setValue(eb,"viewMatrix",e.matrixWorldInverse);let t=F.map.cameraPosition;void 0!==t&&t.setValue(eb,eg.setFromMatrixPosition(e.matrixWorld)),i.logarithmicDepthBuffer&&F.setValue(eb,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(a.isMeshPhongMaterial||a.isMeshToonMaterial||a.isMeshLambertMaterial||a.isMeshBasicMaterial||a.isMeshStandardMaterial||a.isShaderMaterial)&&F.setValue(eb,"isOrthographic",!0===e.isOrthographicCamera),K!==e&&(K=e,D=!0,B=!0)}if(c.isSkinnedMesh){F.setOptional(eb,c,"bindMatrix"),F.setOptional(eb,c,"bindMatrixInverse");let e=c.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),F.setValue(eb,"boneTexture",e.boneTexture,o))}c.isBatchedMesh&&(F.setOptional(eb,c,"batchingTexture"),F.setValue(eb,"batchingTexture",c._matricesTexture,o),F.setOptional(eb,c,"batchingIdTexture"),F.setValue(eb,"batchingIdTexture",c._indirectTexture,o),F.setOptional(eb,c,"batchingColorTexture"),null!==c._colorsTexture&&F.setValue(eb,"batchingColorTexture",c._colorsTexture,o));let U=r.morphAttributes;if((void 0!==U.position||void 0!==U.normal||void 0!==U.color)&&x.update(c,r,I),(D||R.receiveShadow!==c.receiveShadow)&&(R.receiveShadow=c.receiveShadow,F.setValue(eb,"receiveShadow",c.receiveShadow)),a.isMeshGouraudMaterial&&null!==a.envMap&&(O.envMap.value=y,O.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1),a.isMeshStandardMaterial&&null===a.envMap&&null!==t.environment&&(O.envMapIntensity.value=t.environmentIntensity),void 0!==O.dfgLUT&&(O.dfgLUT.value=(null===cQ&&((cQ=new iK(cX,32,32,1030,1016)).minFilter=1006,cQ.magFilter=1006,cQ.wrapS=1001,cQ.wrapT=1001,cQ.generateMipmaps=!1,cQ.needsUpdate=!0),cQ)),D&&(F.setValue(eb,"toneMappingExposure",j.toneMappingExposure),R.needsLights&&(h=O,d=B,h.ambientLightColor.needsUpdate=d,h.lightProbe.needsUpdate=d,h.directionalLights.needsUpdate=d,h.directionalLightShadows.needsUpdate=d,h.pointLights.needsUpdate=d,h.pointLightShadows.needsUpdate=d,h.spotLights.needsUpdate=d,h.spotLightShadows.needsUpdate=d,h.rectAreaLights.needsUpdate=d,h.hemisphereLights.needsUpdate=d),A&&!0===a.fog&&p.refreshFogUniforms(O,A),p.refreshMaterialUniforms(O,a,ea,en,q.state.transmissionRenderTarget[e.id]),ct.upload(eb,eW(R),O,o)),a.isShaderMaterial&&!0===a.uniformsNeedUpdate&&(ct.upload(eb,eW(R),O,o),a.uniformsNeedUpdate=!1),a.isSpriteMaterial&&F.setValue(eb,"center",c.center),F.setValue(eb,"modelViewMatrix",c.modelViewMatrix),F.setValue(eb,"normalMatrix",c.normalMatrix),F.setValue(eb,"modelMatrix",c.matrixWorld),a.isShaderMaterial||a.isRawShaderMaterial){let e=a.uniformsGroups;for(let t=0,r=e.length;t<r;t++){let r=e[t];w.update(r,I),w.bind(r,I)}}return I}(e,t,a,d,A);n.setMaterial(d,y);let S=a.index,M=1;if(!0===d.wireframe){if(void 0===(S=h.getWireframeAttribute(a)))return;M=2}let E=a.drawRange,C=a.attributes.position,R=E.start*M,N=(E.start+E.count)*M;null!==f&&(R=Math.max(R,f.start*M),N=Math.min(N,(f.start+f.count)*M)),null!==S?(R=Math.max(R,0),N=Math.min(N,S.count)):null!=C&&(R=Math.max(R,0),N=Math.min(N,C.count));let P=N-R;if(P<0||P===1/0)return;T.setup(A,d,v,a,S);let I=_;if(null!==S&&(m=c.get(S),(I=b).setIndex(m)),A.isMesh)!0===d.wireframe?(n.setLineWidth(d.wireframeLinewidth*e_()),I.setMode(eb.LINES)):I.setMode(eb.TRIANGLES);else if(A.isLine){let e=d.linewidth;void 0===e&&(e=1),n.setLineWidth(e*e_()),A.isLineSegments?I.setMode(eb.LINES):A.isLineLoop?I.setMode(eb.LINE_LOOP):I.setMode(eb.LINE_STRIP)}else A.isPoints?I.setMode(eb.POINTS):A.isSprite&&I.setMode(eb.TRIANGLES);if(A.isBatchedMesh)if(null!==A._multiDrawInstances)eD("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),I.renderMultiDrawInstances(A._multiDrawStarts,A._multiDrawCounts,A._multiDrawCount,A._multiDrawInstances);else if(r.get("WEBGL_multi_draw"))I.renderMultiDraw(A._multiDrawStarts,A._multiDrawCounts,A._multiDrawCount);else{let e=A._multiDrawStarts,t=A._multiDrawCounts,r=A._multiDrawCount,i=S?c.get(S).bytesPerElement:1,n=s.get(d).currentProgram.getUniforms();for(let a=0;a<r;a++)n.setValue(eb,"_gl_DrawID",a),I.render(e[a]/i,t[a])}else if(A.isInstancedMesh)I.renderInstances(R,P,A.count);else if(a.isInstancedBufferGeometry){let e=void 0!==a._maxInstanceCount?a._maxInstanceCount:1/0,t=Math.min(a.instanceCount,e);I.renderInstances(R,P,t)}else I.render(R,P)},this.compile=function(e,t,r=null){null===r&&(r=e),(q=m.get(r)).init(t),H.push(q),r.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(q.pushLight(e),e.castShadow&&q.pushShadow(e))}),e!==r&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(q.pushLight(e),e.castShadow&&q.pushShadow(e))}),q.setupLights();let i=new Set;return e.traverse(function(e){if(!(e.isMesh||e.isPoints||e.isLine||e.isSprite))return;let t=e.material;if(t)if(Array.isArray(t))for(let n=0;n<t.length;n++){let a=t[n];eB(a,r,e),i.add(a)}else eB(t,r,e),i.add(t)}),q=H.pop(),i},this.compileAsync=function(e,t,i=null){let n=this.compile(e,t,i);return new Promise(t=>{function i(){(n.forEach(function(e){s.get(e).currentProgram.isReady()&&n.delete(e)}),0===n.size)?t(e):setTimeout(i,10)}null!==r.get("KHR_parallel_shader_compile")?i():setTimeout(i,10)})};let eF=null;function eO(){ek.stop()}function eU(){ek.start()}const ek=new lO;function ez(e,t,r,i){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)q.pushLight(e),e.castShadow&&q.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||eh.intersectsSprite(e)){i&&ey.setFromMatrixPosition(e.matrixWorld).applyMatrix4(em);let t=d.update(e),n=e.material;n.visible&&V.push(e,t,n,r,ey.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||eh.intersectsObject(e))){let t=d.update(e),n=e.material;if(i&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),ey.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),ey.copy(t.boundingSphere.center)),ey.applyMatrix4(e.matrixWorld).applyMatrix4(em)),Array.isArray(n)){let i=t.groups;for(let a=0,s=i.length;a<s;a++){let s=i[a],o=n[s.materialIndex];o&&o.visible&&V.push(e,t,o,r,ey.z,s)}}else n.visible&&V.push(e,t,n,r,ey.z,null)}}let n=e.children;for(let e=0,a=n.length;e<a;e++)ez(n[e],t,r,i)}function eV(e,t,r,i){let{opaque:a,transmissive:s,transparent:o}=e;q.setupLightsView(r),!0===ed&&g.setGlobalState(j.clippingPlanes,r),i&&n.viewport(Z.copy(i)),a.length>0&&eG(a,t,r),s.length>0&&eG(s,t,r),o.length>0&&eG(o,t,r),n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),n.setPolygonOffset(!1)}function eq(e,t,i,n){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===q.state.transmissionRenderTarget[n.id]&&(q.state.transmissionRenderTarget[n.id]=new tn(1,1,{generateMipmaps:!0,type:r.has("EXT_color_buffer_half_float")||r.has("EXT_color_buffer_float")?1016:1009,minFilter:1008,samples:4,stencilBuffer:R,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:e2.workingColorSpace}));let a=q.state.transmissionRenderTarget[n.id],s=n.viewport||Z;a.setSize(s.z*j.transmissionResolutionScale,s.w*j.transmissionResolutionScale);let l=j.getRenderTarget(),u=j.getActiveCubeFace(),c=j.getActiveMipmapLevel();j.setRenderTarget(a),j.getClearColor(et),(er=j.getClearAlpha())<1&&j.setClearColor(0xffffff,.5),j.clear(),ex&&v.render(i);let h=j.toneMapping;j.toneMapping=0;let d=n.viewport;if(void 0!==n.viewport&&(n.viewport=void 0),q.setupLightsView(n),!0===ed&&g.setGlobalState(j.clippingPlanes,n),eG(e,i,n),o.updateMultisampleRenderTarget(a),o.updateRenderTargetMipmap(a),!1===r.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let r=0,a=t.length;r<a;r++){let{object:a,geometry:s,material:o,group:l}=t[r];if(2===o.side&&a.layers.test(n.layers)){let t=o.side;o.side=1,o.needsUpdate=!0,eH(a,i,n,s,o,l),o.side=t,o.needsUpdate=!0,e=!0}}!0===e&&(o.updateMultisampleRenderTarget(a),o.updateRenderTargetMipmap(a))}j.setRenderTarget(l,u,c),j.setClearColor(et,er),void 0!==d&&(n.viewport=d),j.toneMapping=h}function eG(e,t,r){let i=!0===t.isScene?t.overrideMaterial:null;for(let n=0,a=e.length;n<a;n++){let a=e[n],{object:s,geometry:o,group:l}=a,u=a.material;!0===u.allowOverride&&null!==i&&(u=i),s.layers.test(r.layers)&&eH(s,t,r,o,u,l)}}function eH(e,t,r,i,n,a){e.onBeforeRender(j,t,r,i,n,a),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),n.onBeforeRender(j,t,r,i,e,a),!0===n.transparent&&2===n.side&&!1===n.forceSinglePass?(n.side=1,n.needsUpdate=!0,j.renderBufferDirect(r,t,i,n,e,a),n.side=0,n.needsUpdate=!0,j.renderBufferDirect(r,t,i,n,e,a),n.side=2):j.renderBufferDirect(r,t,i,n,e,a),e.onAfterRender(j,t,r,i,n,a)}function ej(e,t,r){var i;!0!==t.isScene&&(t=ev);let n=s.get(e),a=q.state.lights,o=q.state.shadowsArray,c=a.state.version,h=A.getParameters(e,a.state,o,t,r),d=A.getProgramCacheKey(h),p=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?u:l).get(e.envMap||n.environment),n.envMapRotation=null!==n.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===p&&(e.addEventListener("dispose",eN),n.programs=p=new Map);let f=p.get(d);if(void 0!==f){if(n.currentProgram===f&&n.lightsStateVersion===c)return eX(e,h),f}else h.uniforms=A.getUniforms(e),e.onBeforeCompile(h,j),f=A.acquireProgram(h,d),p.set(d,f),n.uniforms=h.uniforms;let m=n.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(m.clippingPlanes=g.uniform),eX(e,h),n.needsLights=(i=e).isMeshLambertMaterial||i.isMeshToonMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isShadowMaterial||i.isShaderMaterial&&!0===i.lights,n.lightsStateVersion=c,n.needsLights&&(m.ambientLightColor.value=a.state.ambient,m.lightProbe.value=a.state.probe,m.directionalLights.value=a.state.directional,m.directionalLightShadows.value=a.state.directionalShadow,m.spotLights.value=a.state.spot,m.spotLightShadows.value=a.state.spotShadow,m.rectAreaLights.value=a.state.rectArea,m.ltc_1.value=a.state.rectAreaLTC1,m.ltc_2.value=a.state.rectAreaLTC2,m.pointLights.value=a.state.point,m.pointLightShadows.value=a.state.pointShadow,m.hemisphereLights.value=a.state.hemi,m.directionalShadowMap.value=a.state.directionalShadowMap,m.directionalShadowMatrix.value=a.state.directionalShadowMatrix,m.spotShadowMap.value=a.state.spotShadowMap,m.spotLightMatrix.value=a.state.spotLightMatrix,m.spotLightMap.value=a.state.spotLightMap,m.pointShadowMap.value=a.state.pointShadowMap,m.pointShadowMatrix.value=a.state.pointShadowMatrix),n.currentProgram=f,n.uniformsList=null,f}function eW(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=ct.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function eX(e,t){let r=s.get(e);r.outputColorSpace=t.outputColorSpace,r.batching=t.batching,r.batchingColor=t.batchingColor,r.instancing=t.instancing,r.instancingColor=t.instancingColor,r.instancingMorph=t.instancingMorph,r.skinning=t.skinning,r.morphTargets=t.morphTargets,r.morphNormals=t.morphNormals,r.morphColors=t.morphColors,r.morphTargetsCount=t.morphTargetsCount,r.numClippingPlanes=t.numClippingPlanes,r.numIntersection=t.numClipIntersection,r.vertexAlphas=t.vertexAlphas,r.vertexTangents=t.vertexTangents,r.toneMapping=t.toneMapping}ek.setAnimationLoop(function(e){eF&&eF(e)}),"undefined"!=typeof self&&ek.setContext(self),this.setAnimationLoop=function(e){eF=e,ew.setAnimationLoop(e),null===e?ek.stop():ek.start()},ew.addEventListener("sessionstart",eO),ew.addEventListener("sessionend",eU),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void eL("WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===W)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ew.enabled&&!0===ew.isPresenting&&(!0===ew.cameraAutoUpdate&&ew.updateCamera(t),t=ew.getCamera()),!0===e.isScene&&e.onBeforeRender(j,e,t,$),(q=m.get(e,H.length)).init(t),H.push(q),em.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eh.setFromProjectionMatrix(em,2e3,t.reversedDepth),eA=this.localClippingEnabled,ed=g.init(this.clippingPlanes,eA),(V=f.get(e,G.length)).init(),G.push(V),!0===ew.enabled&&!0===ew.isPresenting){let e=j.xr.getDepthSensingMesh();null!==e&&ez(e,t,-1/0,j.sortObjects)}ez(e,t,0,j.sortObjects),V.finish(),!0===j.sortObjects&&V.sort(es,eo),(ex=!1===ew.enabled||!1===ew.isPresenting||!1===ew.hasDepthSensing())&&v.addToRenderList(V,e),this.info.render.frame++,!0===ed&&g.beginShadows();let r=q.state.shadowsArray;y.render(r,e,t),!0===ed&&g.endShadows(),!0===this.info.autoReset&&this.info.reset();let i=V.opaque,n=V.transmissive;if(q.setupLights(),t.isArrayCamera){let r=t.cameras;if(n.length>0)for(let t=0,a=r.length;t<a;t++)eq(i,n,e,r[t]);ex&&v.render(e);for(let t=0,i=r.length;t<i;t++){let i=r[t];eV(V,e,i,i.viewport)}}else n.length>0&&eq(i,n,e,t),ex&&v.render(e),eV(V,e,t);null!==$&&0===Q&&(o.updateMultisampleRenderTarget($),o.updateRenderTargetMipmap($)),!0===e.isScene&&e.onAfterRender(j,e,t),T.resetDefaultState(),Y=-1,K=null,H.pop(),H.length>0?(q=H[H.length-1],!0===ed&&g.setGlobalState(j.clippingPlanes,q.state.camera)):q=null,G.pop(),V=G.length>0?G[G.length-1]:null},this.getActiveCubeFace=function(){return X},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return $},this.setRenderTargetTextures=function(e,t,r){let i=s.get(e);i.__autoAllocateDepthBuffer=!1===e.resolveDepthBuffer,!1===i.__autoAllocateDepthBuffer&&(i.__useRenderToTexture=!1),s.get(e.texture).__webglTexture=t,s.get(e.depthTexture).__webglTexture=i.__autoAllocateDepthBuffer?void 0:r,i.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(e,t){let r=s.get(e);r.__webglFramebuffer=t,r.__useDefaultFramebuffer=void 0===t};const eQ=eb.createFramebuffer();this.setRenderTarget=function(e,t=0,r=0){$=e,X=t,Q=r;let i=!0,a=null,l=!1,u=!1;if(e){let c=s.get(e);if(void 0!==c.__useDefaultFramebuffer)n.bindFramebuffer(eb.FRAMEBUFFER,null),i=!1;else if(void 0===c.__webglFramebuffer)o.setupRenderTarget(e);else if(c.__hasExternalTextures)o.rebindTextures(e,s.get(e.texture).__webglTexture,s.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){let t=e.depthTexture;if(c.__boundDepthTexture!==t){if(null!==t&&s.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");o.setupDepthRenderbuffer(e)}}let h=e.texture;(h.isData3DTexture||h.isDataArrayTexture||h.isCompressedArrayTexture)&&(u=!0);let d=s.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(a=Array.isArray(d[t])?d[t][r]:d[t],l=!0):a=e.samples>0&&!1===o.useMultisampledRTT(e)?s.get(e).__webglMultisampledFramebuffer:Array.isArray(d)?d[r]:d,Z.copy(e.viewport),J.copy(e.scissor),ee=e.scissorTest}else Z.copy(el).multiplyScalar(ea).floor(),J.copy(eu).multiplyScalar(ea).floor(),ee=ec;if(0!==r&&(a=eQ),n.bindFramebuffer(eb.FRAMEBUFFER,a)&&i&&n.drawBuffers(e,a),n.viewport(Z),n.scissor(J),n.setScissorTest(ee),l){let i=s.get(e.texture);eb.framebufferTexture2D(eb.FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_CUBE_MAP_POSITIVE_X+t,i.__webglTexture,r)}else if(u)for(let i=0;i<e.textures.length;i++){let n=s.get(e.textures[i]);eb.framebufferTextureLayer(eb.FRAMEBUFFER,eb.COLOR_ATTACHMENT0+i,n.__webglTexture,r,t)}else if(null!==e&&0!==r){let t=s.get(e.texture);eb.framebufferTexture2D(eb.FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_2D,t.__webglTexture,r)}Y=-1},this.readRenderTargetPixels=function(e,t,r,a,o,l,u,c=0){if(!(e&&e.isWebGLRenderTarget))return void eL("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==u&&(h=h[u]),h){n.bindFramebuffer(eb.FRAMEBUFFER,h);try{let n=e.textures[c],s=n.format,u=n.type;if(!i.textureFormatReadable(s))return void eL("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!i.textureTypeReadable(u))return void eL("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-a&&r>=0&&r<=e.height-o&&(e.textures.length>1&&eb.readBuffer(eb.COLOR_ATTACHMENT0+c),eb.readPixels(t,r,a,o,S.convert(s),S.convert(u),l))}finally{let e=null!==$?s.get($).__webglFramebuffer:null;n.bindFramebuffer(eb.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,r,a,o,l,u,c=0){if(!(e&&e.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=s.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==u&&(h=h[u]),h)if(t>=0&&t<=e.width-a&&r>=0&&r<=e.height-o){var d;n.bindFramebuffer(eb.FRAMEBUFFER,h);let u=e.textures[c],A=u.format,p=u.type;if(!i.textureFormatReadable(A))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!i.textureTypeReadable(p))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let f=eb.createBuffer();eb.bindBuffer(eb.PIXEL_PACK_BUFFER,f),eb.bufferData(eb.PIXEL_PACK_BUFFER,l.byteLength,eb.STREAM_READ),e.textures.length>1&&eb.readBuffer(eb.COLOR_ATTACHMENT0+c),eb.readPixels(t,r,a,o,S.convert(A),S.convert(p),0);let m=null!==$?s.get($).__webglFramebuffer:null;n.bindFramebuffer(eb.FRAMEBUFFER,m);let g=eb.fenceSync(eb.SYNC_GPU_COMMANDS_COMPLETE,0);return eb.flush(),await (d=eb,new Promise(function(e,t){setTimeout(function r(){switch(d.clientWaitSync(g,d.SYNC_FLUSH_COMMANDS_BIT,0)){case d.WAIT_FAILED:t();break;case d.TIMEOUT_EXPIRED:setTimeout(r,4);break;default:e()}},4)})),eb.bindBuffer(eb.PIXEL_PACK_BUFFER,f),eb.getBufferSubData(eb.PIXEL_PACK_BUFFER,0,l),eb.deleteBuffer(f),eb.deleteSync(g),l}else throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(e,t=null,r=0){let i=Math.pow(2,-r),a=Math.floor(e.image.width*i),s=Math.floor(e.image.height*i),l=null!==t?t.x:0,u=null!==t?t.y:0;o.setTexture2D(e,0),eb.copyTexSubImage2D(eb.TEXTURE_2D,r,0,0,l,u,a,s),n.unbindTexture()};const eY=eb.createFramebuffer(),eK=eb.createFramebuffer();this.copyTextureToTexture=function(e,t,r=null,i=null,a=0,l=null){let u,c,h,d,A,p,f,m,g,y;null===l&&(0!==a?(eD("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),l=a,a=0):l=0);let v=e.isCompressedTexture?e.mipmaps[l]:e.image;if(null!==r)u=r.max.x-r.min.x,c=r.max.y-r.min.y,h=r.isBox3?r.max.z-r.min.z:1,d=r.min.x,A=r.min.y,p=r.isBox3?r.min.z:0;else{let t=Math.pow(2,-a);u=Math.floor(v.width*t),c=Math.floor(v.height*t),h=e.isDataArrayTexture?v.depth:e.isData3DTexture?Math.floor(v.depth*t):1,d=0,A=0,p=0}null!==i?(f=i.x,m=i.y,g=i.z):(f=0,m=0,g=0);let x=S.convert(t.format),_=S.convert(t.type);t.isData3DTexture?(o.setTexture3D(t,0),y=eb.TEXTURE_3D):t.isDataArrayTexture||t.isCompressedArrayTexture?(o.setTexture2DArray(t,0),y=eb.TEXTURE_2D_ARRAY):(o.setTexture2D(t,0),y=eb.TEXTURE_2D),eb.pixelStorei(eb.UNPACK_FLIP_Y_WEBGL,t.flipY),eb.pixelStorei(eb.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),eb.pixelStorei(eb.UNPACK_ALIGNMENT,t.unpackAlignment);let b=eb.getParameter(eb.UNPACK_ROW_LENGTH),T=eb.getParameter(eb.UNPACK_IMAGE_HEIGHT),w=eb.getParameter(eb.UNPACK_SKIP_PIXELS),M=eb.getParameter(eb.UNPACK_SKIP_ROWS),E=eb.getParameter(eb.UNPACK_SKIP_IMAGES);eb.pixelStorei(eb.UNPACK_ROW_LENGTH,v.width),eb.pixelStorei(eb.UNPACK_IMAGE_HEIGHT,v.height),eb.pixelStorei(eb.UNPACK_SKIP_PIXELS,d),eb.pixelStorei(eb.UNPACK_SKIP_ROWS,A),eb.pixelStorei(eb.UNPACK_SKIP_IMAGES,p);let C=e.isDataArrayTexture||e.isData3DTexture,R=t.isDataArrayTexture||t.isData3DTexture;if(e.isDepthTexture){let r=s.get(e),i=s.get(t),o=s.get(r.__renderTarget),y=s.get(i.__renderTarget);n.bindFramebuffer(eb.READ_FRAMEBUFFER,o.__webglFramebuffer),n.bindFramebuffer(eb.DRAW_FRAMEBUFFER,y.__webglFramebuffer);for(let r=0;r<h;r++)C&&(eb.framebufferTextureLayer(eb.READ_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,s.get(e).__webglTexture,a,p+r),eb.framebufferTextureLayer(eb.DRAW_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,s.get(t).__webglTexture,l,g+r)),eb.blitFramebuffer(d,A,u,c,f,m,u,c,eb.DEPTH_BUFFER_BIT,eb.NEAREST);n.bindFramebuffer(eb.READ_FRAMEBUFFER,null),n.bindFramebuffer(eb.DRAW_FRAMEBUFFER,null)}else if(0!==a||e.isRenderTargetTexture||s.has(e)){let r=s.get(e),i=s.get(t);n.bindFramebuffer(eb.READ_FRAMEBUFFER,eY),n.bindFramebuffer(eb.DRAW_FRAMEBUFFER,eK);for(let e=0;e<h;e++)C?eb.framebufferTextureLayer(eb.READ_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,r.__webglTexture,a,p+e):eb.framebufferTexture2D(eb.READ_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_2D,r.__webglTexture,a),R?eb.framebufferTextureLayer(eb.DRAW_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,i.__webglTexture,l,g+e):eb.framebufferTexture2D(eb.DRAW_FRAMEBUFFER,eb.COLOR_ATTACHMENT0,eb.TEXTURE_2D,i.__webglTexture,l),0!==a?eb.blitFramebuffer(d,A,u,c,f,m,u,c,eb.COLOR_BUFFER_BIT,eb.NEAREST):R?eb.copyTexSubImage3D(y,l,f,m,g+e,d,A,u,c):eb.copyTexSubImage2D(y,l,f,m,d,A,u,c);n.bindFramebuffer(eb.READ_FRAMEBUFFER,null),n.bindFramebuffer(eb.DRAW_FRAMEBUFFER,null)}else R?e.isDataTexture||e.isData3DTexture?eb.texSubImage3D(y,l,f,m,g,u,c,h,x,_,v.data):t.isCompressedArrayTexture?eb.compressedTexSubImage3D(y,l,f,m,g,u,c,h,x,v.data):eb.texSubImage3D(y,l,f,m,g,u,c,h,x,_,v):e.isDataTexture?eb.texSubImage2D(eb.TEXTURE_2D,l,f,m,u,c,x,_,v.data):e.isCompressedTexture?eb.compressedTexSubImage2D(eb.TEXTURE_2D,l,f,m,v.width,v.height,x,v.data):eb.texSubImage2D(eb.TEXTURE_2D,l,f,m,u,c,x,_,v);eb.pixelStorei(eb.UNPACK_ROW_LENGTH,b),eb.pixelStorei(eb.UNPACK_IMAGE_HEIGHT,T),eb.pixelStorei(eb.UNPACK_SKIP_PIXELS,w),eb.pixelStorei(eb.UNPACK_SKIP_ROWS,M),eb.pixelStorei(eb.UNPACK_SKIP_IMAGES,E),0===l&&t.generateMipmaps&&eb.generateMipmap(y),n.unbindTexture()},this.initRenderTarget=function(e){void 0===s.get(e).__webglFramebuffer&&o.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?o.setTextureCube(e,0):e.isData3DTexture?o.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?o.setTexture2DArray(e,0):o.setTexture2D(e,0),n.unbindTexture()},this.resetState=function(){X=0,Q=0,$=null,n.reset(),T.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e2._getDrawingBufferColorSpace(e),t.unpackColorSpace=e2._getUnpackColorSpace()}}e.s(["PMREMGenerator",()=>l5,"ShaderChunk",()=>lk,"ShaderLib",()=>lV,"UniformsLib",()=>lz,"WebGLRenderer",()=>c$,"WebGLUtils",()=>cU],8560);let cY=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var cK=e.g&&e.g.Object===Object&&e.g,cZ="object"==typeof self&&self&&self.Object===Object&&self,cJ=cK||cZ||Function("return this")();let c0=function(){return cJ.Date.now()};var c1=/\s/;let c2=function(e){for(var t=e.length;t--&&c1.test(e.charAt(t)););return t};var c3=/^\s+/,c4=cJ.Symbol,c5=Object.prototype,c8=c5.hasOwnProperty,c6=c5.toString,c7=c4?c4.toStringTag:void 0;let c9=function(e){var t=c8.call(e,c7),r=e[c7];try{e[c7]=void 0;var i=!0}catch(e){}var n=c6.call(e);return i&&(t?e[c7]=r:delete e[c7]),n};var he=Object.prototype.toString,ht=c4?c4.toStringTag:void 0;let hr=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ht&&ht in Object(e)?c9(e):he.call(e)},hi=function(e){return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==hr(e)};var hn=0/0,ha=/^[-+]0x[0-9a-f]+$/i,hs=/^0b[01]+$/i,ho=/^0o[0-7]+$/i,hl=parseInt;let hu=function(e){if("number"==typeof e)return e;if(hi(e))return hn;if(cY(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=cY(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(t=e)?t.slice(0,c2(t)+1).replace(c3,""):t;var i=hs.test(e);return i||ho.test(e)?hl(e.slice(2),i?2:8):ha.test(e)?hn:+e};var hc=Math.max,hh=Math.min;let hd=function(e,t,r){var i,n,a,s,o,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw TypeError("Expected a function");function A(t){var r=i,a=n;return i=n=void 0,u=t,s=e.apply(a,r)}function p(e){var r=e-l,i=e-u;return void 0===l||r>=t||r<0||h&&i>=a}function f(){var e,r,i,n=c0();if(p(n))return m(n);o=setTimeout(f,(e=n-l,r=n-u,i=t-e,h?hh(i,a-r):i))}function m(e){return(o=void 0,d&&i)?A(e):(i=n=void 0,s)}function g(){var e,r=c0(),a=p(r);if(i=arguments,n=this,l=r,a){if(void 0===o)return u=e=l,o=setTimeout(f,t),c?A(e):s;if(h)return clearTimeout(o),o=setTimeout(f,t),A(l)}return void 0===o&&(o=setTimeout(f,t)),s}return t=hu(t)||0,cY(r)&&(c=!!r.leading,a=(h="maxWait"in r)?hc(hu(r.maxWait)||0,t):a,d="trailing"in r?!!r.trailing:d),g.cancel=function(){void 0!==o&&clearTimeout(o),u=0,i=l=n=o=void 0},g.flush=function(){return void 0===o?s:m(c0())},g};function hA(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var hp=(Object.defineProperty(mm=function e(t,r){var i=r.default,n=r.triggerUpdate,a=r.onChange;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.name=t,this.defaultVal=void 0===i?null:i,this.triggerUpdate=void 0===n||n,this.onChange=void 0===a?function(e,t){}:a},"prototype",{writable:!1}),mm);function hf(e){var t=e.stateInit,r=void 0===t?function(){return{}}:t,i=e.props,n=void 0===i?{}:i,a=e.methods,s=void 0===a?{}:a,o=e.aliases,l=void 0===o?{}:o,u=e.init,c=void 0===u?function(){}:u,h=e.update,d=void 0===h?function(){}:h,A=Object.keys(n).map(function(e){return new hp(e,n[e])});return function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];var a=!!(this instanceof e?this.constructor:void 0),o=a?i.shift():void 0,u=i[0],h=void 0===u?{}:u,p=Object.assign({},r instanceof Function?r(h):r,{initialised:!1}),f={};function m(e){return g(e,h),y(),m}var g=function(e,t){c.call(m,e,p,t),p.initialised=!0},y=hd(function(){p.initialised&&(d.call(m,p,f),f={})},1);return A.forEach(function(e){var t,r,i,n,a,s,o,l;m[e.name]=(r=(t=e).name,n=void 0!==(i=t.triggerUpdate)&&i,s=void 0===(a=t.onChange)?function(e,t){}:a,l=void 0===(o=t.defaultVal)?null:o,function(e){var t=p[r];if(!arguments.length)return t;var i=void 0===e?l:e;return p[r]=i,s.call(m,i,p,t),f.hasOwnProperty(r)||(f[r]=t),n&&y(),m})}),Object.keys(s).forEach(function(e){m[e]=function(){for(var t,r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];return(t=s[e]).call.apply(t,[m,p].concat(i))}}),Object.entries(l).forEach(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),2!==o.length);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(e,2)||function(e,t){if(e){if("string"==typeof e)return hA(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hA(e,2):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0],i=t[1];return m[r]=m[i]}),m.resetProps=function(){return A.forEach(function(e){m[e.name](e.defaultVal)}),m},m.resetProps(),p._rerender=y,a&&o&&m(o),m}}var hm=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1}}),Back:Object.freeze({In:function(e){return 1===e?1:e*e*(2.70158*e-1.70158)},Out:function(e){return 0===e?0:--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}}),Bounce:Object.freeze({In:function(e){return 1-hm.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*hm.Bounce.In(2*e):.5*hm.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),hg=function(){return performance.now()},hy=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=hg()),void 0===t&&(t=!1);var r=Object.keys(this._tweens);if(0===r.length)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var n=this._tweens[r[i]],a=!t;n&&!1===n.update(e,a)&&!t&&delete this._tweens[r[i]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),hv={Linear:function(e,t){var r=e.length-1,i=r*t,n=Math.floor(i),a=hv.Utils.Linear;return t<0?a(e[0],e[1],i):t>1?a(e[r],e[r-1],r-i):a(e[n],e[n+1>r?r:n+1],i-n)},Bezier:function(e,t){for(var r=0,i=e.length-1,n=Math.pow,a=hv.Utils.Bernstein,s=0;s<=i;s++)r+=n(1-t,i-s)*n(t,s)*e[s]*a(i,s);return r},CatmullRom:function(e,t){var r=e.length-1,i=r*t,n=Math.floor(i),a=hv.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(n=Math.floor(i=r*(1+t))),a(e[(n-1+r)%r],e[n],e[(n+1)%r],e[(n+2)%r],i-n)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):t>1?e[r]-(a(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):a(e[n?n-1:0],e[n],e[r<n+1?r:n+1],e[r<n+2?r:n+2],i-n)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=hv.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:(mg=[1],function(e){var t=1;if(mg[e])return mg[e];for(var r=e;r>1;r--)t*=r;return mg[e]=t,t}),CatmullRom:function(e,t,r,i,n){var a=(r-e)*.5,s=(i-t)*.5,o=n*n;return n*o*(2*t-2*r+a+s)+(-3*t+3*r-2*a-s)*o+a*n+t}}},hx=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),h_=new hy,hb=function(){function e(e,t){void 0===t&&(t=h_),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=hm.Linear.None,this._interpolationFunction=hv.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=hx.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=hg()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var r in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var n in this._valuesEnd)i[n]=this._valuesEnd[n];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,r,i,n){for(var a in r){var s=e[a],o=Array.isArray(s),l=o?"array":typeof s,u=!o&&Array.isArray(r[a]);if("undefined"!==l&&"function"!==l){if(u){var c=r[a];if(0===c.length)continue;for(var h=[s],d=0,A=c.length;d<A;d+=1){var p=this._handleRelativeValue(s,c[d]);if(isNaN(p)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(p)}u&&(r[a]=h)}if(("object"===l||o)&&s&&!u){for(var f in t[a]=o?[]:{},s)t[a][f]=s[f];i[a]=o?[]:{};var c=r[a];if(!this._isDynamic){var m={};for(var f in c)m[f]=c[f];r[a]=c=m}this._setupProperties(s,t[a],c,i[a],n)}else(void 0===t[a]||n)&&(t[a]=s),o||(t[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=t[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object)),this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=hg()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=hg()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this)),this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=h_),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=hm.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=hv.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){var r,i,n=this;if(void 0===e&&(e=hg()),void 0===t&&(t=!0),this._isPaused)return!0;var a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>a)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=e-this._startTime,o=this._duration+(null!=(r=this._repeatDelayTime)?r:this._delayTime),l=this._duration+this._repeat*o,u=function(){if(0===n._duration||s>l)return 1;var e=Math.trunc(s/o),t=Math.min((s-e*o)/n._duration,1);return 0===t&&s===n._duration?1:t}(),c=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,c),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),0===this._duration||s>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((s-this._duration)/o)+1,this._repeat);for(i in isFinite(this._repeat)&&(this._repeat-=h),this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];this._yoyo&&(this._reversed=!this._reversed),this._startTime+=o*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var d=0,A=this._chainedTweens.length;d<A;d++)this._chainedTweens[d].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,r,i){for(var n in r)if(void 0!==t[n]){var a=t[n]||0,s=r[n],o=Array.isArray(e[n]),l=Array.isArray(s);!o&&l?e[n]=this._interpolationFunction(s,i):"object"==typeof s&&s?this._updateProperties(e[n],a,s,i):"number"==typeof(s=this._handleRelativeValue(a,s))&&(e[n]=a+(s-a)*i)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],r=this._valuesEnd[e];"string"==typeof r?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},e}();function hS(e,t,r,i,n){if(isNaN(t)||isNaN(r)||isNaN(i))return e;var a,s,o,l,u,c,h,d,A,p,f,m,g=e._root,y={data:n},v=e._x0,x=e._y0,_=e._z0,b=e._x1,S=e._y1,T=e._z1;if(!g)return e._root=y,e;for(;g.length;)if((d=t>=(s=(v+b)/2))?v=s:b=s,(A=r>=(o=(x+S)/2))?x=o:S=o,(p=i>=(l=(_+T)/2))?_=l:T=l,a=g,!(g=g[f=p<<2|A<<1|d]))return a[f]=y,e;if(u=+e._x.call(null,g.data),c=+e._y.call(null,g.data),h=+e._z.call(null,g.data),t===u&&r===c&&i===h)return y.next=g,a?a[f]=y:e._root=y,e;do a=a?a[f]=Array(8):e._root=Array(8),(d=t>=(s=(v+b)/2))?v=s:b=s,(A=r>=(o=(x+S)/2))?x=o:S=o,(p=i>=(l=(_+T)/2))?_=l:T=l;while((f=p<<2|A<<1|d)==(m=(h>=l)<<2|(c>=o)<<1|u>=s))return a[m]=g,a[f]=y,e}function hT(e,t,r,i,n,a,s){this.node=e,this.x0=t,this.y0=r,this.z0=i,this.x1=n,this.y1=a,this.z1=s}hx.nextId,h_.getAll.bind(h_),h_.removeAll.bind(h_),h_.add.bind(h_),h_.remove.bind(h_),h_.update.bind(h_);let hw=(e,t,r,i,n,a)=>Math.sqrt((e-i)**2+(t-n)**2+(r-a)**2);function hM(e){return e[0]}function hE(e){return e[1]}function hC(e){return e[2]}function hR(e,t,r,i){var n=new hN(null==t?hM:t,null==r?hE:r,null==i?hC:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?n:n.addAll(e)}function hN(e,t,r,i,n,a,s,o,l){this._x=e,this._y=t,this._z=r,this._x0=i,this._y0=n,this._z0=a,this._x1=s,this._y1=o,this._z1=l,this._root=void 0}function hP(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var hI=hR.prototype=hN.prototype;hI.copy=function(){var e,t,r=new hN(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return r;if(!i.length)return r._root=hP(i),r;for(e=[{source:i,target:r._root=Array(8)}];i=e.pop();)for(var n=0;n<8;++n)(t=i.source[n])&&(t.length?e.push({source:t,target:i.target[n]=Array(8)}):i.target[n]=hP(t));return r},hI.add=function(e){let t=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return hS(this.cover(t,r,i),t,r,i,e)},hI.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let t=e.length,r=new Float64Array(t),i=new Float64Array(t),n=new Float64Array(t),a=1/0,s=1/0,o=1/0,l=-1/0,u=-1/0,c=-1/0;for(let h=0,d,A,p,f;h<t;++h)!(isNaN(A=+this._x.call(null,d=e[h]))||isNaN(p=+this._y.call(null,d))||isNaN(f=+this._z.call(null,d)))&&(r[h]=A,i[h]=p,n[h]=f,A<a&&(a=A),A>l&&(l=A),p<s&&(s=p),p>u&&(u=p),f<o&&(o=f),f>c&&(c=f));if(a>l||s>u||o>c)return this;this.cover(a,s,o).cover(l,u,c);for(let a=0;a<t;++a)hS(this,r[a],i[a],n[a],e[a]);return this},hI.cover=function(e,t,r){if(isNaN(e*=1)||isNaN(t*=1)||isNaN(r*=1))return this;var i=this._x0,n=this._y0,a=this._z0,s=this._x1,o=this._y1,l=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,o=(n=Math.floor(t))+1,l=(a=Math.floor(r))+1;else{for(var u,c,h=s-i||1,d=this._root;i>e||e>=s||n>t||t>=o||a>r||r>=l;)switch(c=(r<a)<<2|(t<n)<<1|e<i,(u=Array(8))[c]=d,d=u,h*=2,c){case 0:s=i+h,o=n+h,l=a+h;break;case 1:i=s-h,o=n+h,l=a+h;break;case 2:s=i+h,n=o-h,l=a+h;break;case 3:i=s-h,n=o-h,l=a+h;break;case 4:s=i+h,o=n+h,a=l-h;break;case 5:i=s-h,o=n+h,a=l-h;break;case 6:s=i+h,n=o-h,a=l-h;break;case 7:i=s-h,n=o-h,a=l-h}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=n,this._z0=a,this._x1=s,this._y1=o,this._z1=l,this},hI.data=function(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e},hI.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},hI.find=function(e,t,r,i){var n,a,s,o,l,u,c,h,d,A=this._x0,p=this._y0,f=this._z0,m=this._x1,g=this._y1,y=this._z1,v=[],x=this._root;for(x&&v.push(new hT(x,A,p,f,m,g,y)),null==i?i=1/0:(A=e-i,p=t-i,f=r-i,m=e+i,g=t+i,y=r+i,i*=i);h=v.pop();)if((x=h.node)&&!((a=h.x0)>m)&&!((s=h.y0)>g)&&!((o=h.z0)>y)&&!((l=h.x1)<A)&&!((u=h.y1)<p)&&!((c=h.z1)<f))if(x.length){var _=(a+l)/2,b=(s+u)/2,S=(o+c)/2;v.push(new hT(x[7],_,b,S,l,u,c),new hT(x[6],a,b,S,_,u,c),new hT(x[5],_,s,S,l,b,c),new hT(x[4],a,s,S,_,b,c),new hT(x[3],_,b,o,l,u,S),new hT(x[2],a,b,o,_,u,S),new hT(x[1],_,s,o,l,b,S),new hT(x[0],a,s,o,_,b,S)),(d=(r>=S)<<2|(t>=b)<<1|e>=_)&&(h=v[v.length-1],v[v.length-1]=v[v.length-1-d],v[v.length-1-d]=h)}else{var T=e-this._x.call(null,x.data),w=t-this._y.call(null,x.data),M=r-this._z.call(null,x.data),E=T*T+w*w+M*M;if(E<i){var C=Math.sqrt(i=E);A=e-C,p=t-C,f=r-C,m=e+C,g=t+C,y=r+C,n=x.data}}return n},hI.findAllWithinRadius=function(e,t,r,i){let n=[],a=e-i,s=t-i,o=r-i,l=e+i,u=t+i,c=r+i;return this.visit((h,d,A,p,f,m,g)=>{if(!h.length)do{let a=h.data;hw(e,t,r,this._x(a),this._y(a),this._z(a))<=i&&n.push(a)}while(h=h.next)return d>l||A>u||p>c||f<a||m<s||g<o}),n},hI.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e))||isNaN(o=+this._z.call(null,e)))return this;var t,r,i,n,a,s,o,l,u,c,h,d,A,p,f,m=this._root,g=this._x0,y=this._y0,v=this._z0,x=this._x1,_=this._y1,b=this._z1;if(!m)return this;if(m.length)for(;;){if((h=a>=(l=(g+x)/2))?g=l:x=l,(d=s>=(u=(y+_)/2))?y=u:_=u,(A=o>=(c=(v+b)/2))?v=c:b=c,t=m,!(m=m[p=A<<2|d<<1|h]))return this;if(!m.length)break;(t[p+1&7]||t[p+2&7]||t[p+3&7]||t[p+4&7]||t[p+5&7]||t[p+6&7]||t[p+7&7])&&(r=t,f=p)}for(;m.data!==e;)if(i=m,!(m=m.next))return this;return((n=m.next)&&delete m.next,i)?n?i.next=n:delete i.next:t?(n?t[p]=n:delete t[p],(m=t[0]||t[1]||t[2]||t[3]||t[4]||t[5]||t[6]||t[7])&&m===(t[7]||t[6]||t[5]||t[4]||t[3]||t[2]||t[1]||t[0])&&!m.length&&(r?r[f]=m:this._root=m)):this._root=n,this},hI.removeAll=function(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this},hI.root=function(){return this._root},hI.size=function(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e},hI.visit=function(e){var t,r,i,n,a,s,o,l,u=[],c=this._root;for(c&&u.push(new hT(c,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=u.pop();)if(!e(c=t.node,i=t.x0,n=t.y0,a=t.z0,s=t.x1,o=t.y1,l=t.z1)&&c.length){var h=(i+s)/2,d=(n+o)/2,A=(a+l)/2;(r=c[7])&&u.push(new hT(r,h,d,A,s,o,l)),(r=c[6])&&u.push(new hT(r,i,d,A,h,o,l)),(r=c[5])&&u.push(new hT(r,h,n,A,s,d,l)),(r=c[4])&&u.push(new hT(r,i,n,A,h,d,l)),(r=c[3])&&u.push(new hT(r,h,d,a,s,o,A)),(r=c[2])&&u.push(new hT(r,i,d,a,h,o,A)),(r=c[1])&&u.push(new hT(r,h,n,a,s,d,A)),(r=c[0])&&u.push(new hT(r,i,n,a,h,d,A))}return this},hI.visitAfter=function(e){var t,r=[],i=[];for(this._root&&r.push(new hT(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=r.pop();){var n=t.node;if(n.length){var a,s=t.x0,o=t.y0,l=t.z0,u=t.x1,c=t.y1,h=t.z1,d=(s+u)/2,A=(o+c)/2,p=(l+h)/2;(a=n[0])&&r.push(new hT(a,s,o,l,d,A,p)),(a=n[1])&&r.push(new hT(a,d,o,l,u,A,p)),(a=n[2])&&r.push(new hT(a,s,A,l,d,c,p)),(a=n[3])&&r.push(new hT(a,d,A,l,u,c,p)),(a=n[4])&&r.push(new hT(a,s,o,p,d,A,h)),(a=n[5])&&r.push(new hT(a,d,o,p,u,A,h)),(a=n[6])&&r.push(new hT(a,s,A,p,d,c,h)),(a=n[7])&&r.push(new hT(a,d,A,p,u,c,h))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.z0,t.x1,t.y1,t.z1);return this},hI.x=function(e){return arguments.length?(this._x=e,this):this._x},hI.y=function(e){return arguments.length?(this._y=e,this):this._y},hI.z=function(e){return arguments.length?(this._z=e,this):this._z};let hL=Math.sqrt(50),hD=Math.sqrt(10),hB=Math.sqrt(2);function hF(e,t,r){let i,n,a,s=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(s)),l=s/Math.pow(10,o),u=l>=hL?10:l>=hD?5:l>=hB?2:1;return(o<0?(i=Math.round(e*(a=Math.pow(10,-o)/u)),n=Math.round(t*a),i/a<e&&++i,n/a>t&&--n,a=-a):(i=Math.round(e/(a=Math.pow(10,o)*u)),n=Math.round(t/a),i*a<e&&++i,n*a>t&&--n),n<i&&.5<=r&&r<2)?hF(e,t,2*r):[i,n,a]}function hO(e,t,r){return hF(e*=1,t*=1,r*=1)[2]}function hU(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function hk(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hz(e){let t,r,i;function n(e,i,a=0,s=e.length){if(a<s){if(0!==t(i,i))return s;do{let t=a+s>>>1;0>r(e[t],i)?a=t+1:s=t}while(a<s)}return a}return 2!==e.length?(t=hU,r=(t,r)=>hU(e(t),r),i=(t,r)=>e(t)-r):(t=e===hU||e===hk?e:hV,r=e,i=e),{left:n,center:function(e,t,r=0,a=e.length){let s=n(e,t,r,a-1);return s>r&&i(e[s-1],t)>-i(e[s],t)?s-1:s},right:function(e,i,n=0,a=e.length){if(n<a){if(0!==t(i,i))return a;do{let t=n+a>>>1;0>=r(e[t],i)?n=t+1:a=t}while(n<a)}return n}}}function hV(){return 0}let hq=hz(hU),hG=hq.right;function hH(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function hj(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function hW(){}hq.left,hz(function(e){return null===e?NaN:+e}).center;var hX="\\s*([+-]?\\d+)\\s*",hQ="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",h$="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hY=/^#([0-9a-f]{3,8})$/,hK=RegExp(`^rgb\\(${hX},${hX},${hX}\\)$`),hZ=RegExp(`^rgb\\(${h$},${h$},${h$}\\)$`),hJ=RegExp(`^rgba\\(${hX},${hX},${hX},${hQ}\\)$`),h0=RegExp(`^rgba\\(${h$},${h$},${h$},${hQ}\\)$`),h1=RegExp(`^hsl\\(${hQ},${h$},${h$}\\)$`),h2=RegExp(`^hsla\\(${hQ},${h$},${h$},${hQ}\\)$`),h3={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function h4(){return this.rgb().formatHex()}function h5(){return this.rgb().formatRgb()}function h8(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=hY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?h6(t):3===r?new de(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?h7(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?h7(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=hK.exec(e))?new de(t[1],t[2],t[3],1):(t=hZ.exec(e))?new de(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=hJ.exec(e))?h7(t[1],t[2],t[3],t[4]):(t=h0.exec(e))?h7(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=h1.exec(e))?ds(t[1],t[2]/100,t[3]/100,1):(t=h2.exec(e))?ds(t[1],t[2]/100,t[3]/100,t[4]):h3.hasOwnProperty(e)?h6(h3[e]):"transparent"===e?new de(NaN,NaN,NaN,0):null}function h6(e){return new de(e>>16&255,e>>8&255,255&e,1)}function h7(e,t,r,i){return i<=0&&(e=t=r=NaN),new de(e,t,r,i)}function h9(e,t,r,i){var n;return 1==arguments.length?((n=e)instanceof hW||(n=h8(n)),n)?new de((n=n.rgb()).r,n.g,n.b,n.opacity):new de:new de(e,t,r,null==i?1:i)}function de(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function dt(){return`#${da(this.r)}${da(this.g)}${da(this.b)}`}function dr(){let e=di(this.opacity);return`${1===e?"rgb(":"rgba("}${dn(this.r)}, ${dn(this.g)}, ${dn(this.b)}${1===e?")":`, ${e})`}`}function di(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function dn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function da(e){return((e=dn(e))<16?"0":"")+e.toString(16)}function ds(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new du(e,t,r,i)}function dl(e){if(e instanceof du)return new du(e.h,e.s,e.l,e.opacity);if(e instanceof hW||(e=h8(e)),!e)return new du;if(e instanceof du)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),a=Math.max(t,r,i),s=NaN,o=a-n,l=(a+n)/2;return o?(s=t===a?(r-i)/o+(r<i)*6:r===a?(i-t)/o+2:(t-r)/o+4,o/=l<.5?a+n:2-a-n,s*=60):o=l>0&&l<1?0:s,new du(s,o,l,e.opacity)}function du(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function dc(e){return(e=(e||0)%360)<0?e+360:e}function dh(e){return Math.max(0,Math.min(1,e||0))}function dd(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function dA(e,t,r,i,n){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*i+s*n)/6}hH(hW,h8,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:h4,formatHex:h4,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return dl(this).formatHsl()},formatRgb:h5,toString:h5}),hH(de,h9,hj(hW,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new de(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new de(dn(this.r),dn(this.g),dn(this.b),di(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:dt,formatHex:dt,formatHex8:function(){return`#${da(this.r)}${da(this.g)}${da(this.b)}${da((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:dr,toString:dr})),hH(du,function(e,t,r,i){return 1==arguments.length?dl(e):new du(e,t,r,null==i?1:i)},hj(hW,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new du(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new du(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new de(dd(e>=240?e-240:e+120,n,i),dd(e,n,i),dd(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new du(dc(this.h),dh(this.s),dh(this.l),di(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=di(this.opacity);return`${1===e?"hsl(":"hsla("}${dc(this.h)}, ${100*dh(this.s)}%, ${100*dh(this.l)}%${1===e?")":`, ${e})`}`}}));let dp=e=>()=>e;function df(e,t){var r=t-e;return r?function(t){return e+t*r}:dp(isNaN(e)?t:e)}let dm=function e(t){var r,i=1==(r=+t)?df:function(e,t){var i,n,a;return t-e?(i=e,n=t,i=Math.pow(i,a=r),n=Math.pow(n,a)-i,a=1/a,function(e){return Math.pow(i+e*n,a)}):dp(isNaN(e)?t:e)};function n(e,t){var r=i((e=h9(e)).r,(t=h9(t)).r),n=i(e.g,t.g),a=i(e.b,t.b),s=df(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=n(t),e.b=a(t),e.opacity=s(t),e+""}}return n.gamma=e,n}(1);function dg(e){return function(t){var r,i,n=t.length,a=Array(n),s=Array(n),o=Array(n);for(r=0;r<n;++r)i=h9(t[r]),a[r]=i.r||0,s[r]=i.g||0,o[r]=i.b||0;return a=e(a),s=e(s),o=e(o),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=o(e),i+""}}}function dy(e,t){t||(t=[]);var r,i=e?Math.min(t.length,e.length):0,n=t.slice();return function(a){for(r=0;r<i;++r)n[r]=e[r]*(1-a)+t[r]*a;return n}}function dv(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function dx(e,t){return(dv(t)?dy:d_)(e,t)}function d_(e,t){var r,i=t?t.length:0,n=e?Math.min(i,e.length):0,a=Array(n),s=Array(i);for(r=0;r<n;++r)a[r]=dw(e[r],t[r]);for(;r<i;++r)s[r]=t[r];return function(e){for(r=0;r<n;++r)s[r]=a[r](e);return s}}function db(e,t){return e*=1,t*=1,function(r){return e*(1-r)+t*r}}dg(function(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],a=e[i+1],s=i>0?e[i-1]:2*n-a,o=i<t-1?e[i+2]:2*a-n;return dA((r-i/t)*t,s,n,a,o)}}),dg(function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return dA((r-i/t)*t,n,a,s,o)}});var dS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dT=RegExp(dS.source,"g");function dw(e,t){var r,i=typeof t;return null==t||"boolean"===i?dp(t):("number"===i?db:"string"===i?(r=h8(t))?(t=r,dm):function(e,t){var r,i,n,a,s,o=dS.lastIndex=dT.lastIndex=0,l=-1,u=[],c=[];for(e+="",t+="";(n=dS.exec(e))&&(a=dT.exec(t));)(s=a.index)>o&&(s=t.slice(o,s),u[l]?u[l]+=s:u[++l]=s),(n=n[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,c.push({i:l,x:db(n,a)})),o=dT.lastIndex;return o<t.length&&(s=t.slice(o),u[l]?u[l]+=s:u[++l]=s),u.length<2?c[0]?(r=c[0].x,function(e){return r(e)+""}):(i=t,function(){return i}):(t=c.length,function(e){for(var r,i=0;i<t;++i)u[(r=c[i]).i]=r.x(e);return u.join("")})}:t instanceof h8?dm:t instanceof Date?function(e,t){var r=new Date;return e*=1,t*=1,function(i){return r.setTime(e*(1-i)+t*i),r}}:dv(t)?dy:Array.isArray(t)?d_:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var r,i={},n={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?i[r]=dw(e[r],t[r]):n[r]=t[r];return function(e){for(r in i)n[r]=i[r](e);return n}}:db)(e,t)}function dM(e,t){return e*=1,t*=1,function(r){return Math.round(e*(1-r)+t*r)}}function dE(e){return+e}var dC=[0,1];function dR(e){return e}function dN(e,t){var r;return(t-=e*=1)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r})}function dP(e,t,r){var i=e[0],n=e[1],a=t[0],s=t[1];return n<i?(i=dN(n,i),a=r(s,a)):(i=dN(i,n),a=r(a,s)),function(e){return a(i(e))}}function dI(e,t,r){var i=Math.min(e.length,t.length)-1,n=Array(i),a=Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)n[s]=dN(e[s],e[s+1]),a[s]=r(t[s],t[s+1]);return function(t){var r=hG(e,t,1,i)-1;return a[r](n[r](t))}}function dL(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function dD(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function dB(e){return(e=dD(Math.abs(e)))?e[1]:NaN}var dF=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dO(e){var t;if(!(t=dF.exec(e)))throw Error("invalid format: "+e);return new dU({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function dU(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function dk(e,t){var r=dD(e,t);if(!r)return e+"";var i=r[0],n=r[1];return n<0?"0."+Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+Array(n-i.length+2).join("0")}dO.prototype=dU.prototype,dU.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let dz={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dk(100*e,t),r:dk,s:function(e,t){var r=dD(e,t);if(!r)return e+"";var i=r[0],n=r[1],a=n-(mS=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,s=i.length;return a===s?i:a>s?i+Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+Array(1-a).join("0")+dD(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dV(e){return e}var dq=Array.prototype.map,dG=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function dH(e){var t=e.domain;return e.ticks=function(e){var r=t();return function(e,t,r){if(t*=1,e*=1,!((r*=1)>0))return[];if(e===t)return[e];let i=t<e,[n,a,s]=i?hF(t,e,r):hF(e,t,r);if(!(a>=n))return[];let o=a-n+1,l=Array(o);if(i)if(s<0)for(let e=0;e<o;++e)l[e]=-((a-e)/s);else for(let e=0;e<o;++e)l[e]=(a-e)*s;else if(s<0)for(let e=0;e<o;++e)l[e]=-((n+e)/s);else for(let e=0;e<o;++e)l[e]=(n+e)*s;return l}(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var i=t();return function(e,t,r,i){let n,a;var s,o,l,u,c,h=(o=e,l=+t,o*=1,u=+r,a=(n=l<o)?hO(l,o,u):hO(o,l,u),(n?-1:1)*(a<0?-(1/a):a));switch((i=dO(null==i?",f":i)).type){case"s":var d=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(c=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dB(d)/3)))-dB(Math.abs(h))))||(i.precision=c),mM(i,d);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(c=Math.max(0,dB(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(s=Math.abs(s=h)))-dB(s))+1)||(i.precision=c-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(c=Math.max(0,-dB(Math.abs(h))))||(i.precision=c-("%"===i.type)*2)}return mw(i)}(i[0],i[i.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var i,n,a=t(),s=0,o=a.length-1,l=a[s],u=a[o],c=10;for(u<l&&(n=l,l=u,u=n,n=s,s=o,o=n);c-- >0;){if((n=hO(l,u,r))===i)return a[s]=l,a[o]=u,t(a);if(n>0)l=Math.floor(l/n)*n,u=Math.ceil(u/n)*n;else if(n<0)l=Math.ceil(l*n)/n,u=Math.floor(u*n)/n;else break;i=n}return e},e}function dj(){var e=(function(){var e,t,r,i,n,a,s=dC,o=dC,l=dw,u=dR;function c(){var e,t,r,l=Math.min(s.length,o.length);return u!==dR&&(e=s[0],t=s[l-1],e>t&&(r=e,e=t,t=r),u=function(r){return Math.max(e,Math.min(t,r))}),i=l>2?dI:dP,n=a=null,h}function h(t){return null==t||isNaN(t*=1)?r:(n||(n=i(s.map(e),o,l)))(e(u(t)))}return h.invert=function(r){return u(t((a||(a=i(o,s.map(e),db)))(r)))},h.domain=function(e){return arguments.length?(s=Array.from(e,dE),c()):s.slice()},h.range=function(e){return arguments.length?(o=Array.from(e),c()):o.slice()},h.rangeRound=function(e){return o=Array.from(e),l=dM,c()},h.clamp=function(e){return arguments.length?(u=!!e||dR,c()):u!==dR},h.interpolate=function(e){return arguments.length?(l=e,c()):l},h.unknown=function(e){return arguments.length?(r=e,h):r},function(r,i){return e=r,t=i,c()}})()(dR,dR);return e.copy=function(){return dj().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())},dL.apply(e,arguments),dH(e)}mw=(mT=function(e){var t,r,i,n=void 0===e.grouping||void 0===e.thousands?dV:(t=dq.call(e.grouping,Number),r=e.thousands+"",function(e,i){for(var n=e.length,a=[],s=0,o=t[0],l=0;n>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(e.substring(n-=o,n+o)),!((l+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?dV:(i=dq.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return i[+e]})}),u=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",h=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=dO(e)).fill,r=e.align,i=e.sign,d=e.symbol,A=e.zero,p=e.width,f=e.comma,m=e.precision,g=e.trim,y=e.type;"n"===y?(f=!0,y="g"):dz[y]||(void 0===m&&(m=12),g=!0,y="g"),(A||"0"===t&&"="===r)&&(A=!0,t="0",r="=");var v="$"===d?a:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?s:/[%p]/.test(y)?u:"",_=dz[y],b=/[defgprs%]/.test(y);function S(e){var a,s,u,d=v,S=x;if("c"===y)S=_(e)+S,e="";else{var T=(e*=1)<0||1/e<0;if(e=isNaN(e)?h:_(Math.abs(e),m),g&&(e=function(e){o:for(var t,r=e.length,i=1,n=-1;i<r;++i)switch(e[i]){case".":n=t=i;break;case"0":0===n&&(n=i),t=i;break;default:if(!+e[i])break o;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),T&&0==+e&&"+"!==i&&(T=!1),d=(T?"("===i?i:c:"-"===i||"("===i?"":i)+d,S=("s"===y?dG[8+mS/3]:"")+S+(T&&"("===i?")":""),b){for(a=-1,s=e.length;++a<s;)if(48>(u=e.charCodeAt(a))||u>57){S=(46===u?o+e.slice(a+1):e.slice(a))+S,e=e.slice(0,a);break}}}f&&!A&&(e=n(e,1/0));var w=d.length+e.length+S.length,M=w<p?Array(p-w+1).join(t):"";switch(f&&A&&(e=n(M+e,M.length?p-S.length:1/0),M=""),r){case"<":e=d+e+S+M;break;case"=":e=d+M+e+S;break;case"^":e=M.slice(0,w=M.length>>1)+d+e+S+M.slice(w);break;default:e=M+d+e+S}return l(e)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var r=d(((e=dO(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(dB(t)/3))),n=Math.pow(10,-i),a=dG[8+i/3];return function(e){return r(n*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,mM=mT.formatPrefix;var dW=Math.PI,dX=dW/2,dQ=dW/4,d$=2*dW,dY=180/dW,dK=dW/180,dZ=Math.abs,dJ=Math.atan,d0=Math.atan2,d1=Math.cos,d2=Math.ceil,d3=Math.exp,d4=Math.hypot,d5=Math.log,d8=Math.sin,d6=Math.sign||function(e){return e>0?1:e<0?-1:0},d7=Math.sqrt,d9=Math.tan;function Ae(e){return e>1?dX:e<-1?-dX:Math.asin(e)}function At(e,t){function r(r,i){return t((r=e(r,i))[0],r[1])}return e.invert&&t.invert&&(r.invert=function(r,i){return(r=t.invert(r,i))&&e.invert(r[0],r[1])}),r}function Ar(e,t){return dZ(e)>dW&&(e-=Math.round(e/d$)*d$),[e,t]}function Ai(e,t,r){return(e%=d$)?t||r?At(Aa(e),As(t,r)):Aa(e):t||r?As(t,r):Ar}function An(e){return function(t,r){return dZ(t+=e)>dW&&(t-=Math.round(t/d$)*d$),[t,r]}}function Aa(e){var t=An(e);return t.invert=An(-e),t}function As(e,t){var r=d1(e),i=d8(e),n=d1(t),a=d8(t);function s(e,t){var s=d1(t),o=d1(e)*s,l=d8(e)*s,u=d8(t),c=u*r+o*i;return[d0(l*n-c*a,o*r-u*i),Ae(c*n+l*a)]}return s.invert=function(e,t){var s=d1(t),o=d1(e)*s,l=d8(e)*s,u=d8(t),c=u*n-l*a;return[d0(l*n+u*a,o*r+c*i),Ae(c*r-o*i)]},s}function Ao(){}function Al(){var e,t=[];return{point:function(t,r,i){e.push([t,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Ao,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var r=t;return t=[],e=null,r}}}function Au(e,t){return 1e-6>dZ(e[0]-t[0])&&1e-6>dZ(e[1]-t[1])}function Ac(e,t,r,i){this.x=e,this.z=t,this.o=r,this.e=i,this.v=!1,this.n=this.p=null}function Ah(e,t,r,i,n){var a,s,o=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,r,i=e[0],s=e[t];if(Au(i,s)){if(!i[2]&&!s[2]){for(n.lineStart(),a=0;a<t;++a)n.point((i=e[a])[0],i[1]);n.lineEnd();return}s[0]+=2e-6}o.push(r=new Ac(i,e,null,!0)),l.push(r.o=new Ac(i,null,r,!1)),o.push(r=new Ac(s,e,null,!1)),l.push(r.o=new Ac(s,null,r,!0))}}),o.length){for(l.sort(t),Ad(o),Ad(l),a=0,s=l.length;a<s;++a)l[a].e=r=!r;for(var u,c,h=o[0];;){for(var d=h,A=!0;d.v;)if((d=d.n)===h)return;u=d.z,n.lineStart();do{if(d.v=d.o.v=!0,d.e){if(A)for(a=0,s=u.length;a<s;++a)n.point((c=u[a])[0],c[1]);else i(d.x,d.n.x,1,n);d=d.n}else{if(A)for(a=(u=d.p.z).length-1;a>=0;--a)n.point((c=u[a])[0],c[1]);else i(d.x,d.p.x,-1,n);d=d.p}u=(d=d.o).z,A=!A}while(!d.v)n.lineEnd()}}}function Ad(e){if(t=e.length){for(var t,r,i=0,n=e[0];++i<t;)n.n=r=e[i],r.p=n,n=r;n.n=r=e[0],r.p=n}}Ar.invert=Ar;class AA{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,r=0;for(let i=0;i<this._n&&i<32;i++){let n=t[i],a=e+n,s=Math.abs(e)<Math.abs(n)?e-(a-n):n-(a-e);s&&(t[r++]=s),e=a}return t[r]=e,this._n=r+1,this}valueOf(){let e=this._partials,t=this._n,r,i,n,a=0;if(t>0){for(a=e[--t];t>0&&(a=(r=a)+(i=e[--t]),!(n=i-(a-r))););t>0&&(n<0&&e[t-1]<0||n>0&&e[t-1]>0)&&(r=a+(i=2*n),i==r-a&&(a=r))}return a}}function Ap(e){return[d0(e[1],e[0]),Ae(e[2])]}function Af(e){var t=e[0],r=e[1],i=d1(r);return[i*d1(t),i*d8(t),d8(r)]}function Am(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ag(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ay(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Av(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Ax(e){var t=d7(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function A_(e){return dZ(e[0])<=dW?e[0]:d6(e[0])*((dZ(e[0])+dW)%d$-dW)}function Ab(e,t){var r=A_(t),i=t[1],n=d8(i),a=[d8(r),-d1(r),0],s=0,o=0,l=new AA;1===n?i=dX+1e-6:-1===n&&(i=-dX-1e-6);for(var u=0,c=e.length;u<c;++u)if(d=(h=e[u]).length)for(var h,d,A=h[d-1],p=A_(A),f=A[1]/2+dQ,m=d8(f),g=d1(f),y=0;y<d;++y,p=x,m=b,g=S,A=v){var v=h[y],x=A_(v),_=v[1]/2+dQ,b=d8(_),S=d1(_),T=x-p,w=T>=0?1:-1,M=w*T,E=M>dW,C=m*b;if(l.add(d0(C*w*d8(M),g*S+C*d1(M))),s+=E?T+w*d$:T,E^p>=r^x>=r){var R=Ag(Af(A),Af(v));Ax(R);var N=Ag(a,R);Ax(N);var P=(E^T>=0?-1:1)*Ae(N[2]);(i>P||i===P&&(R[0]||R[1]))&&(o+=E^T>=0?1:-1)}}return(s<-1e-6||s<1e-6&&l<-1e-12)^1&o}function AS(e){return Array.from(function*(e){for(let t of e)yield*t}(e))}function AT(e,t,r,i){return function(n){var a,s,o,l=t(n),u=Al(),c=t(u),h=!1,d={point:A,lineStart:f,lineEnd:m,polygonStart:function(){d.point=g,d.lineStart=y,d.lineEnd=v,s=[],a=[]},polygonEnd:function(){d.point=A,d.lineStart=f,d.lineEnd=m,s=AS(s);var e=Ab(a,i);s.length?(h||(n.polygonStart(),h=!0),Ah(s,AM,e,r,n)):e&&(h||(n.polygonStart(),h=!0),n.lineStart(),r(null,null,1,n),n.lineEnd()),h&&(n.polygonEnd(),h=!1),s=a=null},sphere:function(){n.polygonStart(),n.lineStart(),r(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function A(t,r){e(t,r)&&n.point(t,r)}function p(e,t){l.point(e,t)}function f(){d.point=p,l.lineStart()}function m(){d.point=A,l.lineEnd()}function g(e,t){o.push([e,t]),c.point(e,t)}function y(){c.lineStart(),o=[]}function v(){g(o[0][0],o[0][1]),c.lineEnd();var e,t,r,i,l=c.clean(),d=u.result(),A=d.length;if(o.pop(),a.push(o),o=null,A){if(1&l){if((t=(r=d[0]).length-1)>0){for(h||(n.polygonStart(),h=!0),n.lineStart(),e=0;e<t;++e)n.point((i=r[e])[0],i[1]);n.lineEnd()}return}A>1&&2&l&&d.push(d.pop().concat(d.shift())),s.push(d.filter(Aw))}}return d}}function Aw(e){return e.length>1}function AM(e,t){return((e=e.x)[0]<0?e[1]-dX-1e-6:dX-e[1])-((t=t.x)[0]<0?t[1]-dX-1e-6:dX-t[1])}let AE=AT(function(){return!0},function(e){var t,r=NaN,i=NaN,n=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,s){var o,l,u,c,h,d,A,p=a>0?dW:-dW,f=dZ(a-r);1e-6>dZ(f-dW)?(e.point(r,i=(i+s)/2>0?dX:-dX),e.point(n,i),e.lineEnd(),e.lineStart(),e.point(p,i),e.point(a,i),t=0):n!==p&&f>=dW&&(1e-6>dZ(r-n)&&(r-=1e-6*n),1e-6>dZ(a-p)&&(a-=1e-6*p),o=r,l=i,u=a,c=s,i=dZ(A=d8(o-u))>1e-6?dJ((d8(l)*(d=d1(c))*d8(u)-d8(c)*(h=d1(l))*d8(o))/(h*d*A)):(l+c)/2,e.point(n,i),e.lineEnd(),e.lineStart(),e.point(p,i),t=0),e.point(r=a,i=s),n=p},lineEnd:function(){e.lineEnd(),r=i=NaN},clean:function(){return 2-t}}},function(e,t,r,i){var n;if(null==e)n=r*dX,i.point(-dW,n),i.point(0,n),i.point(dW,n),i.point(dW,0),i.point(dW,-n),i.point(0,-n),i.point(-dW,-n),i.point(-dW,0),i.point(-dW,n);else if(dZ(e[0]-t[0])>1e-6){var a=e[0]<t[0]?dW:-dW;n=r*a/2,i.point(-a,n),i.point(0,n),i.point(a,n)}else i.point(t[0],t[1])},[-dW,-dX]);function AC(e,t){t=Af(t),t[0]-=e,Ax(t);var r,i=(r=-t[1])>1?0:r<-1?dW:Math.acos(r);return((0>-t[2]?-i:i)+d$-1e-6)%d$}let AR=e=>e;function AN(e){return function(t){var r=new AP;for(var i in e)r[i]=e[i];return r.stream=t,r}}function AP(){}function AI(e,t){e&&AD.hasOwnProperty(e.type)&&AD[e.type](e,t)}AP.prototype={constructor:AP,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var AL={Feature:function(e,t){AI(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,i=-1,n=r.length;++i<n;)AI(r[i].geometry,t)}},AD={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)e=r[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){AB(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)AB(r[i],t,0)},Polygon:function(e,t){AF(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)AF(r[i],t)},GeometryCollection:function(e,t){for(var r=e.geometries,i=-1,n=r.length;++i<n;)AI(r[i],t)}};function AB(e,t,r){var i,n=-1,a=e.length-r;for(t.lineStart();++n<a;)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function AF(e,t){var r=-1,i=e.length;for(t.polygonStart();++r<i;)AB(e[r],t,1);t.polygonEnd()}function AO(e,t){e&&AL.hasOwnProperty(e.type)?AL[e.type](e,t):AI(e,t)}var AU=1/0,Ak=1/0,Az=-1/0,AV=Az;let Aq={point:function(e,t){e<AU&&(AU=e),e>Az&&(Az=e),t<Ak&&(Ak=t),t>AV&&(AV=t)},lineStart:Ao,lineEnd:Ao,polygonStart:Ao,polygonEnd:Ao,result:function(){var e=[[AU,Ak],[Az,AV]];return Az=AV=-(Ak=AU=1/0),e}};function AG(e,t,r){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),AO(r,e.stream(Aq)),t(Aq.result()),null!=i&&e.clipExtent(i),e}function AH(e,t,r){return AG(e,function(r){var i=t[1][0]-t[0][0],n=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),n/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,o=+t[0][1]+(n-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,o])},r)}var Aj=d1(30*dK);function AW(e,t){var r;return+t?function(e,t){function r(i,n,a,s,o,l,u,c,h,d,A,p,f,m){var g=u-i,y=c-n,v=g*g+y*y;if(v>4*t&&f--){var x=s+d,_=o+A,b=l+p,S=d7(x*x+_*_+b*b),T=Ae(b/=S),w=1e-6>dZ(dZ(b)-1)||1e-6>dZ(a-h)?(a+h)/2:d0(_,x),M=e(w,T),E=M[0],C=M[1],R=E-i,N=C-n,P=y*R-g*N;(P*P/v>t||dZ((g*R+y*N)/v-.5)>.3||s*d+o*A+l*p<Aj)&&(r(i,n,a,s,o,l,E,C,w,x/=S,_/=S,b,f,m),m.point(E,C),r(E,C,w,x,_,b,u,c,h,d,A,p,f,m))}}return function(t){var i,n,a,s,o,l,u,c,h,d,A,p,f={point:m,lineStart:g,lineEnd:v,polygonStart:function(){t.polygonStart(),f.lineStart=x},polygonEnd:function(){t.polygonEnd(),f.lineStart=g}};function m(r,i){r=e(r,i),t.point(r[0],r[1])}function g(){c=NaN,f.point=y,t.lineStart()}function y(i,n){var a=Af([i,n]),s=e(i,n);r(c,h,u,d,A,p,c=s[0],h=s[1],u=i,d=a[0],A=a[1],p=a[2],16,t),t.point(c,h)}function v(){f.point=m,t.lineEnd()}function x(){g(),f.point=_,f.lineEnd=b}function _(e,t){y(i=e,t),n=c,a=h,s=d,o=A,l=p,f.point=y}function b(){r(c,h,u,d,A,p,n,a,i,s,o,l,16,t),f.lineEnd=v,v()}return f}}(e,t):(r=e,AN({point:function(e,t){e=r(e,t),this.stream.point(e[0],e[1])}}))}var AX=AN({point:function(e,t){this.stream.point(e*dK,t*dK)}});function AQ(e,t,r,i,n,a){if(!a){function s(a,s){return[t+e*(a*=i),r-e*(s*=n)]}return s.invert=function(a,s){return[(a-t)/e*i,(r-s)/e*n]},s}var o=d1(a),l=d8(a),u=o*e,c=l*e,h=o/e,d=l/e,A=(l*r-o*t)/e,p=(l*t+o*r)/e;function f(e,a){return[u*(e*=i)-c*(a*=n)+t,r-c*e-u*a]}return f.invert=function(e,t){return[i*(h*e-d*t+A),n*(p-d*e-h*t)]},f}function A$(e,t){return[e,d5(d9((dX+t)/2))]}function AY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function AK(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}function AZ(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function AJ(e,t){return e.get(AK(e,t))}function A0(e,t,r){AZ(e,t),t.set(e,r)}function A1(e,t,r){return e.set(AK(e,t),r),r}function A2(e,t,r){return(t=A7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A3(e){return(A3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(A4=function(){return!!e})()}function A5(e,t){return(A5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function A8(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(e,t)||A9(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A6(e){return function(e){if(Array.isArray(e))return AY(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A9(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A7(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function A9(e,t){if(e){if("string"==typeof e)return AY(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AY(e,t):void 0}}A$.invert=function(e,t){return[e,2*dJ(d3(t))-dX]};var pe=function(e){e instanceof Array?e.forEach(pe):(e.map&&e.map.dispose(),e.dispose())},pt=function(e){e.geometry&&e.geometry.dispose(),e.material&&pe(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(pt)},pr=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),pt(t)}};function pi(e,t,r){var i=(90-e)*Math.PI/180,n=(90-t)*Math.PI/180;return{x:r*Math.sin(i)*Math.cos(n),y:r*Math.cos(i),z:r*Math.sin(i)*Math.sin(n)}}function pn(e){return e*Math.PI/180}var pa=function(e){return 1-(A$(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},ps=function(e){return Math.max(0,Math.min(1,pa(e)))},po=function(e){return .5-A$.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},pl=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=dj().domain([1,0]).range([t,r]).clamp(!0),n=dj().domain([ps(t),ps(r)]).range([1,0]).clamp(!0),a=e.array,s=0,o=a.length;s<o;s+=2)a[s+1]=n(ps(i(a[s+1])));e.needsUpdate=!0},pu=function(e,t,r,i){var n=Math.pow(2,e),a=Math.max(0,Math.min(n-1,Math.floor((r+180)*n/360))),s=(90-i)/180;return t&&(s=Math.max(0,Math.min(1,pa(s)))),[a,Math.floor(s*n)]},pc=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=[],o=Math.pow(2,e),l=360/o,u=180/o,c=void 0===a?o-1:a,h=r,d=Math.min(o-1,void 0===n?o-1:n);h<=d;h++)for(var A=i,p=Math.min(o-1,c);A<=p;A++){var f=A,m=u;t&&(f=0===A?A:po(A/o)*o,m=((A+1===o?A+1:po((A+1)/o)*o)-f)*180/o);var g=-180+(h+.5)*l,y=90-(180*f/o+m/2),v=m;s.push({x:h,y:A,lng:g,lat:y,latLen:v})}return s},ph=new WeakMap,pd=new WeakMap,pA=new WeakMap,pp=new WeakMap,pf=new WeakMap,pm=new WeakMap,pg=new WeakMap,py=new WeakMap,pv=new WeakSet,px=function(e){var t;function r(e){var t,i,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.tileUrl,o=a.minLevel,l=a.maxLevel,u=a.mercatorProjection;if(!(this instanceof r))throw TypeError("Cannot call a class as a function");return t=A3(t=r),AZ(i=n=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,A4()?Reflect.construct(t,[],A3(this).constructor):t.apply(this,void 0)),pv),pv.add(i),A0(n,ph,void 0),A0(n,pd,void 0),A0(n,pA,void 0),A0(n,pp,void 0),A0(n,pf,{}),A0(n,pm,void 0),A0(n,pg,void 0),A0(n,py,void 0),A2(n,"minLevel",void 0),A2(n,"maxLevel",void 0),A2(n,"thresholds",A6(Array(30)).map(function(e,t){return 8/Math.pow(2,t)})),A2(n,"curvatureResolution",5),A2(n,"tileMargin",0),A2(n,"clearTiles",function(){Object.values(AJ(pf,n)).forEach(function(e){e.forEach(function(e){e.obj&&(n.remove(e.obj),pr(e.obj),delete e.obj)})}),A1(pf,n,{})}),A1(ph,n,e),n.tileUrl=s,A1(pd,n,void 0===u||u),n.minLevel=void 0===o?0:o,n.maxLevel=void 0===l?17:l,n.level=0,n.add(A1(py,n,new r5(new a2(.99*AJ(ph,n),180,90),new rb({color:0})))),AJ(py,n).visible=!1,AJ(py,n).material.polygonOffset=!0,AJ(py,n).material.polygonOffsetUnits=3,AJ(py,n).material.polygonOffsetFactor=1,n}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&A5(r,e),t=[{key:"tileUrl",get:function(){return AJ(pA,this)},set:function(e){A1(pA,this,e),this.updatePov(AJ(pg,this))}},{key:"level",get:function(){return AJ(pp,this)},set:function(e){var t,r=this;AJ(pf,this)[e]||AK(pv,this,p_).call(this,e);var i=AJ(pp,this);if(A1(pp,this,e),e!==i&&void 0!==i){if(AJ(py,this).visible=e>0,AJ(pf,this)[e].forEach(function(e){return e.obj&&(e.obj.material.depthWrite=!0)}),i<e&&(null==(t=AJ(pf,this)[i])||t.forEach(function(e){return e.obj&&(e.obj.material.depthWrite=!1)})),i>e)for(var n=e+1;n<=i;n++)AJ(pf,this)[n]&&AJ(pf,this)[n].forEach(function(e){e.obj&&(r.remove(e.obj),pr(e.obj),delete e.obj)});AK(pv,this,pb).call(this)}}},{key:"updatePov",value:function(e){var t,r=this;if(e&&e instanceof ii&&(A1(pg,this,e),A1(pm,this,function(i){if(!i.hullPnts){var n=360/Math.pow(2,r.level),a=i.lng,s=i.lat,o=i.latLen,l=a-n/2,u=a+n/2,c=s-o/2,h=s+o/2;i.hullPnts=[[s,a],[c,l],[h,l],[c,u],[h,u]].map(function(e){var t=A8(e,2);return pi(t[0],t[1],AJ(ph,r))}).map(function(e){return new e$(e.x,e.y,e.z)})}return t||(t=new no,e.updateMatrix(),e.updateMatrixWorld(),t.setFromProjectionMatrix(new tF().multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse))),i.hullPnts.some(function(e){return t.containsPoint(e.clone().applyMatrix4(r.matrixWorld))})}),this.tileUrl)){var i=(e.position.clone().distanceTo(this.getWorldPosition(new e$))-AJ(ph,this))/AJ(ph,this),n=this.thresholds.findIndex(function(e){return e&&e<=i});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,n<0?this.thresholds.length:n)),AK(pv,this,pb).call(this)}}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,A7(i.key),i)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(id);function p_(e){var t=this;if(e>7){AJ(pf,this)[e]=[];return}var r=AJ(pf,this)[e]=pc(e,AJ(pd,this));r.forEach(function(e){return e.centroid=pi(e.lat,e.lng,AJ(ph,t))}),r.octree=hR().x(function(e){return e.centroid.x}).y(function(e){return e.centroid.y}).z(function(e){return e.centroid.z}).addAll(r)}function pb(){var e=this;if(this.tileUrl&&void 0!==this.level&&AJ(pf,this).hasOwnProperty(this.level)&&(AJ(pm,this)||!(this.level>6))){var t=AJ(pf,this)[this.level];if(AJ(pg,this)){var r=this.worldToLocal(AJ(pg,this).position.clone());if(t.octree){var i,n=this.worldToLocal(AJ(pg,this).position.clone()),a=(n.length()-AJ(ph,this))*3;t=(i=t.octree).findAllWithinRadius.apply(i,A6(n).concat([a]))}else{var s,o,l,u,c,h=(s=r.x,u=Math.sqrt(s*s+(o=r.y)*o+(l=r.z)*l),{lat:90-180*Math.acos(o/u)/Math.PI,lng:90-180*(c=Math.atan2(l,s))/Math.PI-360*(c<-Math.PI/2),r:u}),d=(h.r/AJ(ph,this)-1)*90,A=d/Math.cos(pn(h.lat)),p=[h.lng-A,h.lng+A],f=[h.lat+d,h.lat-d],m=A8(pu(this.level,AJ(pd,this),p[0],f[0]),2),g=m[0],y=m[1],v=A8(pu(this.level,AJ(pd,this),p[1],f[1]),2),x=v[0],_=v[1];t.record||(t.record={});var b=t.record;if(b.hasOwnProperty("".concat(Math.round((g+x)/2),"_").concat(Math.round((y+_)/2)))){for(var S=[],T=g;T<=x;T++)for(var w=y;w<=_;w++){var M="".concat(T,"_").concat(w);b.hasOwnProperty(M)||(b[M]=pc(this.level,AJ(pd,this),T,w,T,w)[0],t.push(b[M])),S.push(b[M])}t=S}else t=pc(this.level,AJ(pd,this),g,y,x,_).map(function(e){var r="".concat(e.x,"_").concat(e.y);return b.hasOwnProperty(r)?b[r]:(b[r]=e,t.push(e),e)})}}t.filter(function(e){return!e.obj}).filter(AJ(pm,this)||function(){return!0}).forEach(function(t){var r=t.x,i=t.y,n=t.lng,a=t.lat,s=t.latLen,o=360/Math.pow(2,e.level);if(!t.obj){var l=o*(1-e.tileMargin),u=s*(1-e.tileMargin),c=pn(n),h=pn(-a),d=new r5(new a2(AJ(ph,e),Math.ceil(l/e.curvatureResolution),Math.ceil(u/e.curvatureResolution),pn(90-l/2)+c,pn(l),pn(90-u/2)+h,pn(u)),new so);if(AJ(pd,e)){var A=A8([a+s/2,a-s/2].map(function(e){return .5-e/180}),2),p=A[0],f=A[1];pl(d.geometry.attributes.uv,p,f)}t.obj=d}t.loading||(t.loading=!0,new sH().load(e.tileUrl(r,i,e.level),function(r){var i=t.obj;i&&(r.colorSpace=ep,i.material.map=r,i.material.color=null,i.material.needsUpdate=!0,e.add(i)),t.loading=!1}))})}}function pS(e,t,r,i,n){let a;if(n===function(e,t,r,i){let n=0;for(let a=t,s=r-i;a<r;a+=i)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}(e,t,r,i)>0)for(let n=t;n<r;n+=i)a=pF(n/i|0,e[n],e[n+1],a);else for(let n=r-i;n>=t;n-=i)a=pF(n/i|0,e[n],e[n+1],a);return a&&pN(a,a.next)&&(pO(a),a=a.next),a}function pT(e,t){if(!e)return e;t||(t=e);let r=e,i;do if(i=!1,!r.steiner&&(pN(r,r.next)||0===pR(r.prev,r,r.next))){if(pO(r),(r=t=r.prev)===r.next)break;i=!0}else r=r.next;while(i||r!==t)return t}function pw(e,t){let r=e.x-t.x;return 0===r&&0==(r=e.y-t.y)&&(r=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),r}function pM(e,t,r,i,n){return(e=((e=((e=((e=((e=(e-r)*n|0)|e<<8)&0xff00ff)|e<<4)&0xf0f0f0f)|e<<2)&0x33333333)|e<<1)&0x55555555)|(t=((t=((t=((t=((t=(t-i)*n|0)|t<<8)&0xff00ff)|t<<4)&0xf0f0f0f)|t<<2)&0x33333333)|t<<1)&0x55555555)<<1}function pE(e,t,r,i,n,a,s,o){return(n-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(i-o)>=(r-s)*(t-o)&&(r-s)*(a-o)>=(n-s)*(i-o)}function pC(e,t,r,i,n,a,s,o){return(e!==s||t!==o)&&pE(e,t,r,i,n,a,s,o)}function pR(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function pN(e,t){return e.x===t.x&&e.y===t.y}function pP(e,t,r,i){let n=pL(pR(e,t,r)),a=pL(pR(e,t,i)),s=pL(pR(r,i,e)),o=pL(pR(r,i,t));return!!(n!==a&&s!==o||0===n&&pI(e,r,t)||0===a&&pI(e,i,t)||0===s&&pI(r,e,i)||0===o&&pI(r,t,i))}function pI(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function pL(e){return e>0?1:e<0?-1:0}function pD(e,t){return 0>pR(e.prev,e,e.next)?pR(e,t,e.next)>=0&&pR(e,e.prev,t)>=0:0>pR(e,t,e.prev)||0>pR(e,e.next,t)}function pB(e,t){let r=pU(e.i,e.x,e.y),i=pU(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function pF(e,t,r,i){let n=pU(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function pO(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function pU(e,t,r){return{i:e,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function pk(e){let t=[],r=[],i=e[0][0].length,n=0,a=0;for(let s of e){for(let e of s)for(let r=0;r<i;r++)t.push(e[r]);a&&(n+=a,r.push(n)),a=s.length}return{vertices:t,holes:r,dimensions:i}}var pz={sphere:Ao,point:Ao,lineStart:function(){pz.point=pq,pz.lineEnd=pV},lineEnd:Ao,polygonStart:Ao,polygonEnd:Ao};function pV(){pz.point=pz.lineEnd=Ao}function pq(e,t){e*=dK,t*=dK,mC=e,mR=d8(t),mN=d1(t),pz.point=pG}function pG(e,t){e*=dK;var r=d8(t*=dK),i=d1(t),n=dZ(e-mC),a=d1(n),s=i*d8(n),o=mN*r-mR*i*a,l=mR*r+mN*i*a;mE.add(d0(d7(s*s+o*o),l)),mC=e,mR=r,mN=i}var pH=[null,null],pj={type:"LineString",coordinates:pH};function pW(e,t){return pH[0]=e,pH[1]=t,mE=new AA,AO(pj,pz),+mE}function pX(e,t){var r,i,n=e[0]*dK,a=e[1]*dK,s=t[0]*dK,o=t[1]*dK,l=d1(a),u=d8(a),c=d1(o),h=d8(o),d=l*d1(n),A=l*d8(n),p=c*d1(s),f=c*d8(s),m=2*Ae(d7((r=d8((r=o-a)/2))*r+l*c*((i=d8((i=s-n)/2))*i))),g=d8(m),y=m?function(e){var t=d8(e*=m)/g,r=d8(m-e)/g,i=r*d+t*p,n=r*A+t*f;return[d0(n,i)*dY,d0(r*u+t*h,d7(i*i+n*n))*dY]}:function(){return[n*dY,a*dY]};return y.distance=m,y}function pQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function p$(e){return(p$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pY(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pY=function(){return!!e})()}function pK(e,t){return(pK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pZ(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(e,t)||pJ(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pJ(e,t){if(e){if("string"==typeof e)return pQ(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pQ(e,t):void 0}}var p0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],i=null;return e.forEach(function(e){if(i){var n=180*pW(e,i)/Math.PI;if(n>t)for(var a=pX(i,e),s=i.length>2||e.length>2?db(i[2]||0,e[2]||0):null,o=s?function(e){var t;return[].concat(function(e){if(Array.isArray(e))return pQ(e)}(t=a(e))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||pJ(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[s(e)])}:a,l=1/Math.ceil(n/t),u=l;u<1;)r.push(o(u)),u+=l}r.push(i=e)}),r},p1="undefined"!=typeof window&&window.THREE?window.THREE:{BufferGeometry:rX,Float32BufferAttribute:rk},p2=new p1.BufferGeometry().setAttribute?"setAttribute":"addAttribute",p3=function(e){function t(e){var r,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");r=p$(r=t),(i=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,pY()?Reflect.construct(r,[],p$(this).constructor):r.apply(this,void 0))).type="GeoJsonGeometry",i.parameters={geoJson:e,radius:n,resolution:a};var s=(({Point:c,MultiPoint:function(e,t){var r={vertices:[],indices:[]};return e.map(function(e){return c(e,t)}).forEach(function(e){p4(r,pZ(e,1)[0])}),[r]},LineString:h,MultiLineString:function(e,t){var r={vertices:[],indices:[]};return e.map(function(e){return h(e,t)}).forEach(function(e){p4(r,pZ(e,1)[0])}),[r]},Polygon:d,MultiPolygon:function(e,t){var r={vertices:[],indices:[]},i={vertices:[],indices:[]};e.map(function(e){return d(e,t)}).forEach(function(e){var t=pZ(e,2),n=t[0],a=t[1];p4(r,n),a&&p4(i,a)});var n=[r];return i.vertices.length&&n.push(i),n}})[e.type]||function(){return[]})(e.coordinates,n),o=[],l=[],u=0;function c(e,t){return[{vertices:p8(e[1],e[0],t+(e[2]||0)),indices:[]}]}function h(e,t){for(var r=pk([p0(e,a).map(function(e){var r=pZ(e,3),i=r[0],n=r[1],a=r[2];return p8(n,i,t+(void 0===a?0:a))})]).vertices,i=Math.round(r.length/3),n=[],s=1;s<i;s++)n.push(s-1,s);return[{vertices:r,indices:n}]}function d(e,t){for(var r=pk(e.map(function(e){return p0(e,a).map(function(e){var r=pZ(e,3),i=r[0],n=r[1],a=r[2];return p8(n,i,t+(void 0===a?0:a))})})),i=r.vertices,n=r.holes,s=n[0]||1/0,o=i.slice(0,3*s),l=i.slice(3*s),u=new Set(n),c=Math.round(i.length/3),h=[],d=[],A=1;A<c;A++)u.has(A)||(A<s?h.push(A-1,A):d.push(A-1-s,A-s));var p=[{indices:h,vertices:o}];return n.length&&p.push({indices:d,vertices:l}),p}return s.forEach(function(e){var t=o.length;p4({indices:o,vertices:l},e),i.addGroup(t,o.length-t,u++)}),o.length&&i.setIndex(o),l.length&&i[p2]("position",new p1.Float32BufferAttribute(l,3)),i}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pK(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(p1.BufferGeometry);function p4(e,t){var r=Math.round(e.vertices.length/3);p5(e.vertices,t.vertices),p5(e.indices,t.indices.map(function(e){return e+r}))}function p5(e,t){var r,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=pJ(e))){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw a}}}}(t);try{for(i.s();!(r=i.n()).done;){var n=r.value;e.push(n)}}catch(e){i.e(e)}finally{i.f()}}function p8(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(90-e)*Math.PI/180,n=(90-t)*Math.PI/180;return[r*Math.sin(i)*Math.cos(n),r*Math.cos(i),r*Math.sin(i)*Math.sin(n)]}function p6(e,t,r){e*=1,t*=1,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var i=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),a=Array(n);++i<n;)a[i]=e+i*r;return a}function p7(e,t,r){var i=p6(e,t-1e-6,r).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function p9(e,t,r){var i=p6(e,t-1e-6,r).concat(t);return function(e){return i.map(function(t){return[t,e]})}}function fe(e,t,r=!0){if(!t||!t.isReady)throw Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!e.hasAttribute("position")||!e.hasAttribute("normal")||!e.hasAttribute("uv"))throw Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function i(e){if(e.normalized||e.isInterleavedBufferAttribute){let t=new Float32Array(e.count*e.itemSize);for(let r=0,i=0;r<e.count;r++)t[i++]=e.getX(r),t[i++]=e.getY(r),e.itemSize>2&&(t[i++]=e.getZ(r));return t}return e.array instanceof Float32Array?e.array:new Float32Array(e.array)}let n=e.index?e.toNonIndexed():e,a=t.generateTangents(i(n.attributes.position),i(n.attributes.normal),i(n.attributes.uv));if(r)for(let e=3;e<a.length;e+=4)a[e]*=-1;return n.setAttribute("tangent",new rN(a,4)),e!==n&&e.copy(n),e}function ft(e,t=!1){let r=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),n=new Set(Object.keys(e[0].morphAttributes)),a={},s={},o=e[0].morphTargetsRelative,l=new rX,u=0;for(let c=0;c<e.length;++c){let h=e[c],d=0;if(r!==(null!==h.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let e in h.attributes){if(!i.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[e]&&(a[e]=[]),a[e].push(h.attributes[e]),d++}if(d!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(o!==h.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let e in h.morphAttributes){if(!n.has(e))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[e]&&(s[e]=[]),s[e].push(h.morphAttributes[e])}if(t){let e;if(r)e=h.index.count;else{if(void 0===h.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;e=h.attributes.position.count}l.addGroup(u,e,c),u+=e}}if(r){let t=0,r=[];for(let i=0;i<e.length;++i){let n=e[i].index;for(let e=0;e<n.count;++e)r.push(n.getX(e)+t);t+=e[i].attributes.position.count}l.setIndex(r)}for(let e in a){let t=fr(a[e]);if(!t)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" attribute."),null;l.setAttribute(e,t)}for(let e in s){let t=s[e][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[e]=[];for(let r=0;r<t;++r){let t=[];for(let i=0;i<s[e].length;++i)t.push(s[e][i][r]);let i=fr(t);if(!i)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+e+" morphAttribute."),null;l.morphAttributes[e].push(i)}}return l}function fr(e){let t,r,i,n=-1,a=0;for(let s=0;s<e.length;++s){let o=e[s];if(void 0===t&&(t=o.array.constructor),t!==o.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===r&&(r=o.itemSize),r!==o.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=o.normalized),i!==o.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(-1===n&&(n=o.gpuType),n!==o.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;a+=o.count*r}let s=new t(a),o=new rN(s,r,i),l=0;for(let t=0;t<e.length;++t){let i=e[t];if(i.isInterleavedBufferAttribute){let e=l/r;for(let t=0,n=i.count;t<n;t++)for(let n=0;n<r;n++){let r=i.getComponent(t,n);o.setComponent(t+e,n,r)}}else s.set(i.array,l);l+=i.count*r}return void 0!==n&&(o.gpuType=n),o}function fi(e){return e.isInstancedInterleavedBufferAttribute||e.isInterleavedBufferAttribute?fa(e):e.isInstancedBufferAttribute?new i1().copy(e):new rN().copy(e)}function fn(e){let t,r=0,i=0;for(let n=0,a=e.length;n<a;++n){let a=e[n];if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;r+=a.array.length,i+=a.itemSize}let n=new iv(new t(r),i),a=0,s=[],o=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let t=0,r=e.length;t<r;t++){let r=e[t],i=r.itemSize,u=r.count,c=new i_(n,i,a,r.normalized);s.push(c),a+=i;for(let e=0;e<u;e++)for(let t=0;t<i;t++)c[l[t]](e,r[o[t]](e))}return s}function fa(e){let t,r=e.data.array.constructor,i=e.count,n=e.itemSize,a=e.normalized,s=new r(i*n);t=e.isInstancedInterleavedBufferAttribute?new i1(s,n,a,e.meshPerAttribute):new rN(s,n,a);for(let r=0;r<i;r++)t.setX(r,e.getX(r)),n>=2&&t.setY(r,e.getY(r)),n>=3&&t.setZ(r,e.getZ(r)),n>=4&&t.setW(r,e.getW(r));return t}function fs(e){let t=e.attributes,r=e.morphTargets,i=new Map;for(let e in t){let r=t[e];r.isInterleavedBufferAttribute&&(i.has(r)||i.set(r,fa(r)),t[e]=i.get(r))}for(let e in r){let t=r[e];t.isInterleavedBufferAttribute&&(i.has(t)||i.set(t,fa(t)),r[e]=i.get(t))}}function fo(e){let t=0;for(let r in e.attributes){let i=e.getAttribute(r);t+=i.count*i.itemSize*i.array.BYTES_PER_ELEMENT}let r=e.getIndex();return t+(r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0)}function fl(e,t=1e-4){t=Math.max(t,Number.EPSILON);let r={},i=e.getIndex(),n=e.getAttribute("position"),a=i?i.count:n.count,s=0,o=Object.keys(e.attributes),l={},u={},c=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"];for(let t=0,r=o.length;t<r;t++){let r=o[t],i=e.attributes[r];l[r]=new i.constructor(new i.array.constructor(i.count*i.itemSize),i.itemSize,i.normalized);let n=e.morphAttributes[r];n&&(u[r]||(u[r]=[]),n.forEach((e,t)=>{let i=new e.array.constructor(e.count*e.itemSize);u[r][t]=new e.constructor(i,e.itemSize,e.normalized)}))}let A=.5*t,p=Math.pow(10,Math.log10(1/t)),f=A*p;for(let t=0;t<a;t++){let n=i?i.getX(t):t,a="";for(let t=0,r=o.length;t<r;t++){let r=o[t],i=e.getAttribute(r),s=i.itemSize;for(let e=0;e<s;e++)a+=`${~~(i[h[e]](n)*p+f)},`}if(a in r)c.push(r[a]);else{for(let t=0,r=o.length;t<r;t++){let r=o[t],i=e.getAttribute(r),a=e.morphAttributes[r],c=i.itemSize,A=l[r],p=u[r];for(let e=0;e<c;e++){let t=h[e],r=d[e];if(A[r](s,i[t](n)),a)for(let e=0,i=a.length;e<i;e++)p[e][r](s,a[e][t](n))}}r[a]=s,c.push(s),s++}}let m=e.clone();for(let t in e.attributes){let e=l[t];if(m.setAttribute(t,new e.constructor(e.array.slice(0,s*e.itemSize),e.itemSize,e.normalized)),t in u)for(let e=0;e<u[t].length;e++){let r=u[t][e];m.morphAttributes[t][e]=new r.constructor(r.array.slice(0,s*r.itemSize),r.itemSize,r.normalized)}}return m.setIndex(c),m}function fu(e,t){if(0===t)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(2!==t&&1!==t)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e;{let r=e.getIndex();if(null===r){let t=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<i.count;e++)t.push(e);e.setIndex(t),r=e.getIndex()}let i=r.count-2,n=[];if(2===t)for(let e=1;e<=i;e++)n.push(r.getX(0)),n.push(r.getX(e)),n.push(r.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(n.push(r.getX(e)),n.push(r.getX(e+1)),n.push(r.getX(e+2))):(n.push(r.getX(e+2)),n.push(r.getX(e+1)),n.push(r.getX(e)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");let a=e.clone();return a.setIndex(n),a.clearGroups(),a}}function fc(e){let t,r,i,n,a,s,o,l,u,c,h=new e$,d=new e$,A=new e$,p=new e$,f=new e$,m=new e$,g=new e$,y=new e$,v=new e$;function x(e,t,r,i,n,a,s,o){h.fromBufferAttribute(t,n),d.fromBufferAttribute(t,a),A.fromBufferAttribute(t,s);let l=e.morphTargetInfluences;if(r&&l){g.set(0,0,0),y.set(0,0,0),v.set(0,0,0);for(let e=0,t=r.length;e<t;e++){let t=l[e],o=r[e];0!==t&&(p.fromBufferAttribute(o,n),f.fromBufferAttribute(o,a),m.fromBufferAttribute(o,s),i?(g.addScaledVector(p,t),y.addScaledVector(f,t),v.addScaledVector(m,t)):(g.addScaledVector(p.sub(h),t),y.addScaledVector(f.sub(d),t),v.addScaledVector(m.sub(A),t)))}h.add(g),d.add(y),A.add(v)}e.isSkinnedMesh&&(e.applyBoneTransform(n,h),e.applyBoneTransform(a,d),e.applyBoneTransform(s,A)),o[3*n+0]=h.x,o[3*n+1]=h.y,o[3*n+2]=h.z,o[3*a+0]=d.x,o[3*a+1]=d.y,o[3*a+2]=d.z,o[3*s+0]=A.x,o[3*s+1]=A.y,o[3*s+2]=A.z}let _=e.geometry,b=e.material,S=_.index,T=_.attributes.position,w=_.morphAttributes.position,M=_.morphTargetsRelative,E=_.attributes.normal,C=_.morphAttributes.position,R=_.groups,N=_.drawRange,P=new Float32Array(T.count*T.itemSize),I=new Float32Array(E.count*E.itemSize);if(null!==S)if(Array.isArray(b))for(n=0,s=R.length;n<s;n++)for(u=Math.max((l=R[n]).start,N.start),c=Math.min(l.start+l.count,N.start+N.count),a=u,o=c;a<o;a+=3)t=S.getX(a),x(e,T,w,M,t,r=S.getX(a+1),i=S.getX(a+2),P),x(e,E,C,M,t,r,i,I);else for(u=Math.max(0,N.start),c=Math.min(S.count,N.start+N.count),n=u,s=c;n<s;n+=3)t=S.getX(n),x(e,T,w,M,t,r=S.getX(n+1),i=S.getX(n+2),P),x(e,E,C,M,t,r,i,I);else if(Array.isArray(b))for(n=0,s=R.length;n<s;n++)for(u=Math.max((l=R[n]).start,N.start),c=Math.min(l.start+l.count,N.start+N.count),a=u,o=c;a<o;a+=3)x(e,T,w,M,t=a,r=a+1,i=a+2,P),x(e,E,C,M,t,r,i,I);else for(u=Math.max(0,N.start),c=Math.min(T.count,N.start+N.count),n=u,s=c;n<s;n+=3)x(e,T,w,M,t=n,r=n+1,i=n+2,P),x(e,E,C,M,t,r,i,I);return{positionAttribute:T,normalAttribute:E,morphedPositionAttribute:new rk(P,3),morphedNormalAttribute:new rk(I,3)}}function fh(e){if(0===e.groups.length)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),e;let t=e.groups;if(t=t.sort((e,t)=>e.materialIndex!==t.materialIndex?e.materialIndex-t.materialIndex:e.start-t.start),null===e.getIndex()){let t=e.getAttribute("position"),r=[];for(let e=0;e<t.count;e+=3)r.push(e,e+1,e+2);e.setIndex(r)}let r=e.getIndex(),i=[];for(let e=0;e<t.length;e++){let n=t[e],a=n.start,s=a+n.count;for(let e=a;e<s;e++)i.push(r.getX(e))}e.dispose(),e.setIndex(i);let n=0;for(let e=0;e<t.length;e++){let r=t[e];r.start=n,n+=r.count}let a=t[0];e.groups=[a];for(let r=1;r<t.length;r++){let i=t[r];a.materialIndex===i.materialIndex?a.count+=i.count:(a=i,e.groups.push(a))}return e}function fd(e,t=Math.PI/3){let r=Math.cos(t),i=(1+1e-10)*100,n=[new e$,new e$,new e$],a=new e$,s=new e$,o=new e$,l=new e$;function u(e){let t=~~(e.x*i),r=~~(e.y*i),n=~~(e.z*i);return`${t},${r},${n}`}let c=e.index?e.toNonIndexed():e,h=c.attributes.position,d={};for(let e=0,t=h.count/3;e<t;e++){let t=3*e,r=n[0].fromBufferAttribute(h,t+0),i=n[1].fromBufferAttribute(h,t+1),o=n[2].fromBufferAttribute(h,t+2);a.subVectors(o,i),s.subVectors(r,i);let l=new e$().crossVectors(a,s).normalize();for(let e=0;e<3;e++){let t=u(n[e]);t in d||(d[t]=[]),d[t].push(l)}}let A=new rN(new Float32Array(3*h.count),3,!1);for(let e=0,t=h.count/3;e<t;e++){let t=3*e,i=n[0].fromBufferAttribute(h,t+0),c=n[1].fromBufferAttribute(h,t+1),p=n[2].fromBufferAttribute(h,t+2);a.subVectors(p,c),s.subVectors(i,c),o.crossVectors(a,s).normalize();for(let e=0;e<3;e++){let i=d[u(n[e])];l.set(0,0,0);for(let e=0,t=i.length;e<t;e++){let t=i[e];o.dot(t)>r&&l.add(t)}l.normalize(),A.setXYZ(t+e,l.x,l.y,l.z)}}return c.setAttribute("normal",A),c}e.s(["computeMikkTSpaceTangents",()=>fe,"computeMorphedAttributes",()=>fc,"deepCloneAttribute",()=>fi,"deinterleaveAttribute",()=>fa,"deinterleaveGeometry",()=>fs,"estimateBytesUsed",()=>fo,"interleaveAttributes",()=>fn,"mergeAttributes",()=>fr,"mergeGeometries",()=>ft,"mergeGroups",()=>fh,"mergeVertices",()=>fl,"toCreasedNormals",()=>fd,"toTrianglesDrawMode",()=>fu],52260);var fA=e.i(52260),fp=function(e){return"function"==typeof e?e:"string"==typeof e?function(t){return t[e]}:function(t){return e}};function ff(e){return(ff="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fm=/^\s+/,fg=/\s+$/;function fy(e,t){if(t=t||{},(e=e||"")instanceof fy)return e;if(!(this instanceof fy))return new fy(e,t);var r,i,n,a,s,o,l,u,c,h,d,A,p,f,m,g,y,v,x,_,b=(i={r:0,g:0,b:0},n=1,a=null,s=null,o=null,l=!1,u=!1,"string"==typeof(r=e)&&(r=function(e){e=e.replace(fm,"").replace(fg,"").toLowerCase();var t,r=!1;if(fB[e])e=fB[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=fH.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=fH.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=fH.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=fH.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=fH.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=fH.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=fH.hex8.exec(e))?{r:fz(t[1]),g:fz(t[2]),b:fz(t[3]),a:fz(t[4])/255,format:r?"name":"hex8"}:(t=fH.hex6.exec(e))?{r:fz(t[1]),g:fz(t[2]),b:fz(t[3]),format:r?"name":"hex"}:(t=fH.hex4.exec(e))?{r:fz(t[1]+""+t[1]),g:fz(t[2]+""+t[2]),b:fz(t[3]+""+t[3]),a:fz(t[4]+""+t[4])/255,format:r?"name":"hex8"}:!!(t=fH.hex3.exec(e))&&{r:fz(t[1]+""+t[1]),g:fz(t[2]+""+t[2]),b:fz(t[3]+""+t[3]),format:r?"name":"hex"}}(r)),"object"==ff(r)&&(fj(r.r)&&fj(r.g)&&fj(r.b)?(c=r.r,h=r.g,d=r.b,i={r:255*fU(c,255),g:255*fU(h,255),b:255*fU(d,255)},l=!0,u="%"===String(r.r).substr(-1)?"prgb":"rgb"):fj(r.h)&&fj(r.s)&&fj(r.v)?(a=fq(r.s),s=fq(r.v),A=r.h,p=a,f=s,A=6*fU(A,360),p=fU(p,100),f=fU(f,100),m=Math.floor(A),g=A-m,y=f*(1-p),v=f*(1-g*p),x=f*(1-(1-g)*p),i={r:255*[f,v,y,y,x,f][_=m%6],g:255*[x,f,f,v,y,y][_],b:255*[y,y,x,f,f,v][_]},l=!0,u="hsv"):fj(r.h)&&fj(r.s)&&fj(r.l)&&(a=fq(r.s),o=fq(r.l),i=function(e,t,r){var i,n,a;function s(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}if(e=fU(e,360),t=fU(t,100),r=fU(r,100),0===t)i=n=a=r;else{var o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;i=s(l,o,e+1/3),n=s(l,o,e),a=s(l,o,e-1/3)}return{r:255*i,g:255*n,b:255*a}}(r.h,a,o),l=!0,u="hsl"),r.hasOwnProperty("a")&&(n=r.a)),n=fO(n),{ok:l,format:r.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:n});this._originalInput=e,this._r=b.r,this._g=b.g,this._b=b.b,this._a=b.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||b.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=b.ok}function fv(e,t,r){e=fU(e,255);var i,n,a=Math.max(e,t=fU(t,255),r=fU(r,255)),s=Math.min(e,t,r),o=(a+s)/2;if(a==s)i=n=0;else{var l=a-s;switch(n=o>.5?l/(2-a-s):l/(a+s),a){case e:i=(t-r)/l+6*(t<r);break;case t:i=(r-e)/l+2;break;case r:i=(e-t)/l+4}i/=6}return{h:i,s:n,l:o}}function fx(e,t,r){e=fU(e,255);var i,n=Math.max(e,t=fU(t,255),r=fU(r,255)),a=Math.min(e,t,r),s=n-a;if(n==a)i=0;else{switch(n){case e:i=(t-r)/s+6*(t<r);break;case t:i=(r-e)/s+2;break;case r:i=(e-t)/s+4}i/=6}return{h:i,s:0===n?0:s/n,v:n}}function f_(e,t,r,i){var n=[fV(Math.round(e).toString(16)),fV(Math.round(t).toString(16)),fV(Math.round(r).toString(16))];return i&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function fb(e,t,r,i){return[fV(fG(i)),fV(Math.round(e).toString(16)),fV(Math.round(t).toString(16)),fV(Math.round(r).toString(16))].join("")}function fS(e,t){t=0===t?0:t||10;var r=fy(e).toHsl();return r.s-=t/100,r.s=fk(r.s),fy(r)}function fT(e,t){t=0===t?0:t||10;var r=fy(e).toHsl();return r.s+=t/100,r.s=fk(r.s),fy(r)}function fw(e){return fy(e).desaturate(100)}function fM(e,t){t=0===t?0:t||10;var r=fy(e).toHsl();return r.l+=t/100,r.l=fk(r.l),fy(r)}function fE(e,t){t=0===t?0:t||10;var r=fy(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-(t/100*255)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-(t/100*255)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-(t/100*255)))),fy(r)}function fC(e,t){t=0===t?0:t||10;var r=fy(e).toHsl();return r.l-=t/100,r.l=fk(r.l),fy(r)}function fR(e,t){var r=fy(e).toHsl(),i=(r.h+t)%360;return r.h=i<0?360+i:i,fy(r)}function fN(e){var t=fy(e).toHsl();return t.h=(t.h+180)%360,fy(t)}function fP(e,t){if(isNaN(t)||t<=0)throw Error("Argument to polyad must be a positive number");for(var r=fy(e).toHsl(),i=[fy(e)],n=360/t,a=1;a<t;a++)i.push(fy({h:(r.h+a*n)%360,s:r.s,l:r.l}));return i}function fI(e){var t=fy(e).toHsl(),r=t.h;return[fy(e),fy({h:(r+72)%360,s:t.s,l:t.l}),fy({h:(r+216)%360,s:t.s,l:t.l})]}function fL(e,t,r){t=t||6,r=r||30;var i=fy(e).toHsl(),n=360/r,a=[fy(e)];for(i.h=(i.h-(n*t>>1)+720)%360;--t;)i.h=(i.h+n)%360,a.push(fy(i));return a}function fD(e,t){t=t||6;for(var r=fy(e).toHsv(),i=r.h,n=r.s,a=r.v,s=[],o=1/t;t--;)s.push(fy({h:i,s:n,v:a})),a=(a+o)%1;return s}fy.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,r,i=this.toRgb();return e=i.r/255,t=i.g/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*((r=i.b/255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=fO(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=fx(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=fx(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+r+"%, "+i+"%)":"hsva("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=fv(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=fv(this._r,this._g,this._b),t=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+r+"%, "+i+"%)":"hsla("+t+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return f_(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t,r,i,n,a,s;return t=this._r,r=this._g,i=this._b,n=this._a,a=e,s=[fV(Math.round(t).toString(16)),fV(Math.round(r).toString(16)),fV(Math.round(i).toString(16)),fV(fG(n))],a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*fU(this._r,255))+"%",g:Math.round(100*fU(this._g,255))+"%",b:Math.round(100*fU(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*fU(this._r,255))+"%, "+Math.round(100*fU(this._g,255))+"%, "+Math.round(100*fU(this._b,255))+"%)":"rgba("+Math.round(100*fU(this._r,255))+"%, "+Math.round(100*fU(this._g,255))+"%, "+Math.round(100*fU(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(fF[f_(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+fb(this._r,this._g,this._b,this._a),r=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var n=fy(e);r="#"+fb(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0;return!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return fy(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(fM,arguments)},brighten:function(){return this._applyModification(fE,arguments)},darken:function(){return this._applyModification(fC,arguments)},desaturate:function(){return this._applyModification(fS,arguments)},saturate:function(){return this._applyModification(fT,arguments)},greyscale:function(){return this._applyModification(fw,arguments)},spin:function(){return this._applyModification(fR,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(fL,arguments)},complement:function(){return this._applyCombination(fN,arguments)},monochromatic:function(){return this._applyCombination(fD,arguments)},splitcomplement:function(){return this._applyCombination(fI,arguments)},triad:function(){return this._applyCombination(fP,[3])},tetrad:function(){return this._applyCombination(fP,[4])}},fy.fromRatio=function(e,t){if("object"==ff(e)){var r={};for(var i in e)e.hasOwnProperty(i)&&("a"===i?r[i]=e[i]:r[i]=fq(e[i]));e=r}return fy(e,t)},fy.equals=function(e,t){return!!e&&!!t&&fy(e).toRgbString()==fy(t).toRgbString()},fy.random=function(){return fy.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},fy.mix=function(e,t,r){r=0===r?0:r||50;var i=fy(e).toRgb(),n=fy(t).toRgb(),a=r/100;return fy({r:(n.r-i.r)*a+i.r,g:(n.g-i.g)*a+i.g,b:(n.b-i.b)*a+i.b,a:(n.a-i.a)*a+i.a})},fy.readability=function(e,t){var r=fy(e),i=fy(t);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},fy.isReadable=function(e,t,r){var i,n,a,s,o,l=fy.readability(e,t);switch(o=!1,(n=((i=(i=r)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),a=(i.size||"small").toLowerCase(),"AA"!==n&&"AAA"!==n&&(n="AA"),"small"!==a&&"large"!==a&&(a="small"),s={level:n,size:a}).level+s.size){case"AAsmall":case"AAAlarge":o=l>=4.5;break;case"AAlarge":o=l>=3;break;case"AAAsmall":o=l>=7}return o},fy.mostReadable=function(e,t,r){var i,n,a,s,o=null,l=0;n=(r=r||{}).includeFallbackColors,a=r.level,s=r.size;for(var u=0;u<t.length;u++)(i=fy.readability(e,t[u]))>l&&(l=i,o=fy(t[u]));return fy.isReadable(e,o,{level:a,size:s})||!n?o:(r.includeFallbackColors=!1,fy.mostReadable(e,["#fff","#000"],r))};var fB=fy.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},fF=fy.hexNames=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}(fB);function fO(e){return(isNaN(e=parseFloat(e))||e<0||e>1)&&(e=1),e}function fU(e,t){"string"==typeof(r=e)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(e="100%");var r,i,n="string"==typeof(i=e)&&-1!=i.indexOf("%");return(e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),1e-6>Math.abs(e-t))?1:e%t/parseFloat(t)}function fk(e){return Math.min(1,Math.max(0,e))}function fz(e){return parseInt(e,16)}function fV(e){return 1==e.length?"0"+e:""+e}function fq(e){return e<=1&&(e=100*e+"%"),e}function fG(e){return Math.round(255*parseFloat(e)).toString(16)}var fH=(mv="[\\s|\\(]+("+(my="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+my+")[,|\\s]+("+my+")\\s*\\)?",mx="[\\s|\\(]+("+my+")[,|\\s]+("+my+")[,|\\s]+("+my+")[,|\\s]+("+my+")\\s*\\)?",{CSS_UNIT:new RegExp(my),rgb:RegExp("rgb"+mv),rgba:RegExp("rgba"+mx),hsl:RegExp("hsl"+mv),hsla:RegExp("hsla"+mx),hsv:RegExp("hsv"+mv),hsva:RegExp("hsva"+mx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function fj(e){return!!fH.CSS_UNIT.exec(e)}function fW(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function fX(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}function fQ(e,t){return e.get(fX(e,t))}function f$(e,t,r){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function fY(e,t,r){return e.set(fX(e,t),r),r}function fK(e,t){if(e){if("string"==typeof e)return fW(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fW(e,t):void 0}}var fZ=new WeakMap,fJ=new WeakMap,f0=new WeakMap,f1=new WeakMap,f2=new WeakMap,f3=new WeakMap,f4=(m_=function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");f$(this,fZ,new Map),f$(this,fJ,new Map),f$(this,f0,function(e){return e}),f$(this,f1,function(){return{}}),f$(this,f2,function(){}),f$(this,f3,function(){})},mb=[{key:"getObj",value:function(e){return fQ(fZ,this).get(fQ(f0,this).call(this,e))}},{key:"getData",value:function(e){return fQ(fJ,this).get(e)}},{key:"entries",value:function(){var e;return((function(e){if(Array.isArray(e))return fW(e)})(e=fQ(fJ,this).entries())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fK(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){var t=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),2!==o.length);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(e,2)||fK(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=t[0];return[t[1],r]})}},{key:"id",value:function(e){return fY(f0,this,fp(e)),this}},{key:"onCreateObj",value:function(e){return fY(f1,this,e),this}},{key:"onUpdateObj",value:function(e){return fY(f2,this,e),this}},{key:"onRemoveObj",value:function(e){return fY(f3,this,e),this}},{key:"digest",value:function(e){var t=this;e.filter(function(e){return!fQ(fZ,t).has(fQ(f0,t).call(t,e))}).forEach(function(e){var r=fQ(f1,t).call(t,e);fQ(fZ,t).set(fQ(f0,t).call(t,e),r),fQ(fJ,t).set(r,e)});var r=new Map(e.map(function(e){return[fQ(f0,t).call(t,e),e]}));return fQ(fZ,this).forEach(function(e,i){r.has(i)?fQ(f2,t).call(t,e,r.get(i)):(fQ(f3,t).call(t,e,i),fQ(fZ,t).delete(i),fQ(fJ,t).delete(e))}),this}},{key:"clear",value:function(){return this.digest([]),this}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i.key),i)}}(m_.prototype,mb),Object.defineProperty(m_,"prototype",{writable:!1}),m_),f5=e.i(98641);function f8(e,t){let r,i;if(void 0===t)for(let t of e)null!=t&&(void 0===r?t>=t&&(r=i=t):(r>t&&(r=t),i<t&&(i=t)));else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(void 0===r?a>=a&&(r=i=a):(r>a&&(r=a),i<a&&(i=a)))}return[r,i]}let f6=(3+8881784197001252e-31)*11102230246251565e-32;function f7(e,t,r,i,n){let a,s,o,l,u=t[0],c=i[0],h=0,d=0;c>u==c>-u?(a=u,u=t[++h]):(a=c,c=i[++d]);let A=0;if(h<e&&d<r)for(c>u==c>-u?(s=u+a,o=a-(s-u),u=t[++h]):(s=c+a,o=a-(s-c),c=i[++d]),a=s,0!==o&&(n[A++]=o);h<e&&d<r;)c>u==c>-u?(l=(s=a+u)-a,o=a-(s-l)+(u-l),u=t[++h]):(l=(s=a+c)-a,o=a-(s-l)+(c-l),c=i[++d]),a=s,0!==o&&(n[A++]=o);for(;h<e;)l=(s=a+u)-a,o=a-(s-l)+(u-l),u=t[++h],a=s,0!==o&&(n[A++]=o);for(;d<r;)l=(s=a+c)-a,o=a-(s-l)+(c-l),c=i[++d],a=s,0!==o&&(n[A++]=o);return(0!==a||0===A)&&(n[A++]=a),A}function f9(e){return new Float64Array(e)}let me=(3+17763568394002505e-31)*11102230246251565e-32,mt=(2+13322676295501878e-31)*11102230246251565e-32,mr=(9+7105427357601002e-30)*11102230246251565e-32*11102230246251565e-32,mi=f9(4),mn=f9(8),ma=f9(12),ms=f9(16),mo=f9(4);function ml(e,t,r,i,n,a){let s=(t-a)*(r-n),o=(e-n)*(i-a),l=s-o,u=Math.abs(s+o);return Math.abs(l)>=me*u?l:-function(e,t,r,i,n,a,s){let o,l,u,c,h,d,A,p,f,m,g,y,v,x,_,b,S,T,w=e-n,M=r-n,E=t-a,C=i-a;x=w*C,A=(d=0x8000001*w)-(d-w),p=w-A,f=(d=0x8000001*C)-(d-C),_=p*(m=C-f)-(x-A*f-p*f-A*m),b=E*M,A=(d=0x8000001*E)-(d-E),p=E-A,f=(d=0x8000001*M)-(d-M),g=_-(S=p*(m=M-f)-(b-A*f-p*f-A*m)),h=_-g,mi[0]=_-(g+h)+(h-S),h=(y=x+g)-x,g=(v=x-(y-h)+(g-h))-b,h=v-g,mi[1]=v-(g+h)+(h-b),h=(T=y+g)-y,mi[2]=y-(T-h)+(g-h),mi[3]=T;let R=function(e,t){let r=t[0];for(let e=1;e<4;e++)r+=t[e];return r}(0,mi),N=mt*s;if(R>=N||-R>=N||(h=e-w,o=e-(w+h)+(h-n),h=r-M,u=r-(M+h)+(h-n),h=t-E,l=t-(E+h)+(h-a),h=i-C,c=i-(C+h)+(h-a),0===o&&0===l&&0===u&&0===c)||(N=mr*s+f6*Math.abs(R),(R+=w*c+C*o-(E*u+M*l))>=N||-R>=N))return R;x=o*C,A=(d=0x8000001*o)-(d-o),p=o-A,f=(d=0x8000001*C)-(d-C),_=p*(m=C-f)-(x-A*f-p*f-A*m),b=l*M,A=(d=0x8000001*l)-(d-l),p=l-A,f=(d=0x8000001*M)-(d-M),g=_-(S=p*(m=M-f)-(b-A*f-p*f-A*m)),h=_-g,mo[0]=_-(g+h)+(h-S),h=(y=x+g)-x,g=(v=x-(y-h)+(g-h))-b,h=v-g,mo[1]=v-(g+h)+(h-b),h=(T=y+g)-y,mo[2]=y-(T-h)+(g-h),mo[3]=T;let P=f7(4,mi,4,mo,mn);x=w*c,A=(d=0x8000001*w)-(d-w),p=w-A,f=(d=0x8000001*c)-(d-c),_=p*(m=c-f)-(x-A*f-p*f-A*m),b=E*u,A=(d=0x8000001*E)-(d-E),p=E-A,f=(d=0x8000001*u)-(d-u),g=_-(S=p*(m=u-f)-(b-A*f-p*f-A*m)),h=_-g,mo[0]=_-(g+h)+(h-S),h=(y=x+g)-x,g=(v=x-(y-h)+(g-h))-b,h=v-g,mo[1]=v-(g+h)+(h-b),h=(T=y+g)-y,mo[2]=y-(T-h)+(g-h),mo[3]=T;let I=f7(P,mn,4,mo,ma);x=o*c,A=(d=0x8000001*o)-(d-o),p=o-A,f=(d=0x8000001*c)-(d-c),_=p*(m=c-f)-(x-A*f-p*f-A*m),b=l*u,A=(d=0x8000001*l)-(d-l),p=l-A,f=(d=0x8000001*u)-(d-u),g=_-(S=p*(m=u-f)-(b-A*f-p*f-A*m)),h=_-g,mo[0]=_-(g+h)+(h-S),h=(y=x+g)-x,g=(v=x-(y-h)+(g-h))-b,h=v-g,mo[1]=v-(g+h)+(h-b),h=(T=y+g)-y,mo[2]=y-(T-h)+(g-h),mo[3]=T;let L=f7(I,ma,4,mo,ms);return ms[L-1]}(e,t,r,i,n,a,u)}f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(8),f9(8),f9(8),f9(4),f9(8),f9(8),f9(8),f9(12),f9(192),f9(192),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(8),f9(8),f9(8),f9(8),f9(8),f9(8),f9(8),f9(8),f9(8),f9(4),f9(4),f9(4),f9(8),f9(16),f9(16),f9(16),f9(32),f9(32),f9(48),f9(64),f9(1152),f9(1152),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(4),f9(24),f9(24),f9(24),f9(24),f9(24),f9(24),f9(24),f9(24),f9(24),f9(24),f9(1152),f9(1152),f9(1152),f9(1152),f9(1152),f9(2304),f9(2304),f9(3456),f9(5760),f9(8),f9(8),f9(8),f9(16),f9(24),f9(48),f9(48),f9(96),f9(192),f9(384),f9(384),f9(384),f9(768),f9(96),f9(96),f9(96),f9(1152);let mu=new Uint32Array(512);class mc{static from(e,t=mp,r=mf){let i=e.length,n=new Float64Array(2*i);for(let a=0;a<i;a++){let i=e[a];n[2*a]=t(i),n[2*a+1]=r(i)}return new mc(n)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*r),this._halfedges=new Int32Array(3*r),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){var e,t,r,i,n,a;let s,o,l,u,c,h,d,A,p,f,{coords:m,_hullPrev:g,_hullNext:y,_hullTri:v,_hullHash:x}=this,_=m.length>>1,b=1/0,S=1/0,T=-1/0,w=-1/0;for(let e=0;e<_;e++){let t=m[2*e],r=m[2*e+1];t<b&&(b=t),r<S&&(S=r),t>T&&(T=t),r>w&&(w=r),this._ids[e]=e}let M=(b+T)/2,E=(S+w)/2;for(let e=0,t=1/0;e<_;e++){let r=mh(M,E,m[2*e],m[2*e+1]);r<t&&(A=e,t=r)}let C=m[2*A],R=m[2*A+1];for(let e=0,t=1/0;e<_;e++){if(e===A)continue;let r=mh(C,R,m[2*e],m[2*e+1]);r<t&&r>0&&(p=e,t=r)}let N=m[2*p],P=m[2*p+1],I=1/0;for(let e=0;e<_;e++){if(e===A||e===p)continue;let t=function(e,t,r,i,n,a){let s=r-e,o=i-t,l=n-e,u=a-t,c=s*s+o*o,h=l*l+u*u,d=.5/(s*u-o*l),A=(u*c-o*h)*d,p=(s*h-l*c)*d;return A*A+p*p}(C,R,N,P,m[2*e],m[2*e+1]);t<I&&(f=e,I=t)}let L=m[2*f],D=m[2*f+1];if(I===1/0){for(let e=0;e<_;e++)this._dists[e]=m[2*e]-m[0]||m[2*e+1]-m[1];md(this._ids,this._dists,0,_-1);let e=new Uint32Array(_),t=0;for(let r=0,i=-1/0;r<_;r++){let n=this._ids[r],a=this._dists[n];a>i&&(e[t++]=n,i=a)}this.hull=e.subarray(0,t),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(0>ml(C,R,N,P,L,D)){let e=p,t=N,r=P;p=f,N=L,P=D,f=e,L=t,D=r}let B=(e=C,t=R,r=N,i=P,n=L,a=D,s=r-e,o=i-t,l=n-e,u=a-t,c=s*s+o*o,h=l*l+u*u,d=.5/(s*u-o*l),{x:e+(u*c-o*h)*d,y:t+(s*h-l*c)*d});this._cx=B.x,this._cy=B.y;for(let e=0;e<_;e++)this._dists[e]=mh(m[2*e],m[2*e+1],B.x,B.y);md(this._ids,this._dists,0,_-1),this._hullStart=A;let F=3;y[A]=g[f]=p,y[p]=g[A]=f,y[f]=g[p]=A,v[A]=0,v[p]=1,v[f]=2,x.fill(-1),x[this._hashKey(C,R)]=A,x[this._hashKey(N,P)]=p,x[this._hashKey(L,D)]=f,this.trianglesLen=0,this._addTriangle(A,p,f,-1,-1,-1);for(let e=0,t,r;e<this._ids.length;e++){let i=this._ids[e],n=m[2*i],a=m[2*i+1];if(e>0&&2220446049250313e-31>=Math.abs(n-t)&&2220446049250313e-31>=Math.abs(a-r)||(t=n,r=a,i===A||i===p||i===f))continue;let s=0;for(let e=0,t=this._hashKey(n,a);e<this._hashSize&&(-1===(s=x[(t+e)%this._hashSize])||s===y[s]);e++);let o=s=g[s],l;for(;l=y[o],ml(n,a,m[2*o],m[2*o+1],m[2*l],m[2*l+1])>=0;)if((o=l)===s){o=-1;break}if(-1===o)continue;let u=this._addTriangle(o,i,y[o],-1,-1,v[o]);v[i]=this._legalize(u+2),v[o]=u,F++;let c=y[o];for(;l=y[c],0>ml(n,a,m[2*c],m[2*c+1],m[2*l],m[2*l+1]);)u=this._addTriangle(c,i,l,v[i],-1,v[c]),v[i]=this._legalize(u+2),y[c]=c,F--,c=l;if(o===s)for(;0>ml(n,a,m[2*(l=g[o])],m[2*l+1],m[2*o],m[2*o+1]);)u=this._addTriangle(l,i,o,-1,v[o],v[l]),this._legalize(u+2),v[l]=u,y[o]=o,F--,o=l;this._hullStart=g[i]=o,y[o]=g[c]=i,y[i]=c,x[this._hashKey(n,a)]=i,x[this._hashKey(m[2*o],m[2*o+1])]=o}this.hull=new Uint32Array(F);for(let e=0,t=this._hullStart;e<F;e++)this.hull[e]=t,t=y[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){var r,i;let n;return Math.floor((r=e-this._cx,n=r/(Math.abs(r)+Math.abs(i=t-this._cy)),(i>0?3-n:1+n)/4*this._hashSize))%this._hashSize}_legalize(e){let{_triangles:t,_halfedges:r,coords:i}=this,n=0,a=0;for(;;){let s=r[e],o=e-e%3;if(a=o+(e+2)%3,-1===s){if(0===n)break;e=mu[--n];continue}let l=s-s%3,u=o+(e+1)%3,c=l+(s+2)%3,h=t[a],d=t[e],A=t[u],p=t[c];if(function(e,t,r,i,n,a,s,o){let l=e-s,u=t-o,c=r-s,h=i-o,d=n-s,A=a-o,p=c*c+h*h,f=d*d+A*A;return l*(h*f-p*A)-u*(c*f-p*d)+(l*l+u*u)*(c*A-h*d)<0}(i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*A],i[2*A+1],i[2*p],i[2*p+1])){t[e]=p,t[s]=h;let i=r[c];if(-1===i){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,i),this._link(s,r[a]),this._link(a,c);let o=l+(s+1)%3;n<mu.length&&(mu[n++]=o)}else{if(0===n)break;e=mu[--n]}}return a}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,r,i,n,a){let s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=t,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,n),this._link(s+2,a),this.trianglesLen+=3,s}}function mh(e,t,r,i){let n=e-r,a=t-i;return n*n+a*a}function md(e,t,r,i){if(i-r<=20)for(let n=r+1;n<=i;n++){let i=e[n],a=t[i],s=n-1;for(;s>=r&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=i}else{let n=r+i>>1,a=r+1,s=i;mA(e,n,a),t[e[r]]>t[e[i]]&&mA(e,r,i),t[e[a]]>t[e[i]]&&mA(e,a,i),t[e[r]]>t[e[a]]&&mA(e,r,a);let o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l)do s--;while(t[e[s]]>l)if(s<a)break;mA(e,a,s)}e[r+1]=e[s],e[s]=o,i-a+1>=s-r?(md(e,t,a,i),md(e,t,r,s-1)):(md(e,t,r,s-1),md(e,t,a,i))}}function mA(e,t,r){let i=e[t];e[t]=e[r],e[r]=i}function mp(e){return e[0]}function mf(e){return e[1]}var mm,mg,my,mv,mx,m_,mb,mS,mT,mw,mM,mE,mC,mR,mN,mP,mI,mL,mD,mB,mF=function(e,t,r={}){if(!e)throw Error("point is required");if(!t)throw Error("polygon is required");let i=function(e){if(!e)throw Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return[...e.geometry.coordinates];if("Point"===e.type)return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw Error("coord must be GeoJSON Point or an Array of numbers")}(e),n="Feature"===t.type?t.geometry:t,a=n.type,s=t.bbox,o=n.coordinates;if(s&&!1==(u=i,(c=s)[0]<=u[0]&&c[1]<=u[1]&&c[2]>=u[0]&&c[3]>=u[1]))return!1;"Polygon"===a&&(o=[o]);let l=!1;for(var u,c,h=0;h<o.length;++h){let e=function(e,t){var r,i,n,a,s,o,l,u,c,h=0,d=e[0],A=e[1],p=t.length;for(r=0;r<p;r++){i=0;var f=t[r],m=f.length-1;if((u=f[0])[0]!==f[m][0]&&u[1]!==f[m][1])throw Error("First and last coordinates in a ring must be the same");for(a=u[0]-d,s=u[1]-A;i<m;i++){if(o=(c=f[i+1])[0]-d,l=c[1]-A,0===s&&0===l){if(o<=0&&a>=0||a<=0&&o>=0)return 0}else if(l>=0&&s<=0||l<=0&&s>=0){if(0===(n=ml(a,o,s,l,0,0)))return 0;(n>0&&l>0&&s<=0||n<0&&l<=0&&s>0)&&h++}u=c,s=l,a=o}}return h%2!=0}(i,o[h]);if(0===e)return!r.ignoreBoundary;e&&(l=!0)}return l},mO=new AA,mU=new AA,mk={point:Ao,lineStart:Ao,lineEnd:Ao,polygonStart:function(){mO=new AA,mk.lineStart=mz,mk.lineEnd=mV},polygonEnd:function(){var e=+mO;mU.add(e<0?d$+e:e),this.lineStart=this.lineEnd=this.point=Ao},sphere:function(){mU.add(d$)}};function mz(){mk.point=mq}function mV(){mG(mP,mI)}function mq(e,t){mk.point=mG,mP=e,mI=t,e*=dK,t*=dK,mL=e,mD=d1(t=t/2+dQ),mB=d8(t)}function mG(e,t){e*=dK,t*=dK;var r=e-mL,i=r>=0?1:-1,n=i*r,a=d1(t=t/2+dQ),s=d8(t),o=mB*s,l=mD*a+o*d1(n),u=o*i*d8(n);mO.add(d0(u,l)),mL=e,mD=a,mB=s}var mH={point:mj,lineStart:mX,lineEnd:mQ,polygonStart:function(){mH.point=m$,mH.lineStart=mY,mH.lineEnd=mK,V=new AA,mk.polygonStart()},polygonEnd:function(){mk.polygonEnd(),mH.point=mj,mH.lineStart=mX,mH.lineEnd=mQ,mO<0?(L=-(B=180),D=-(F=90)):V>1e-6?F=90:V<-1e-6&&(D=-90),G[0]=L,G[1]=B},sphere:function(){L=-(B=180),D=-(F=90)}};function mj(e,t){q.push(G=[L=e,B=e]),t<D&&(D=t),t>F&&(F=t)}function mW(e,t){var r=Af([e*dK,t*dK]);if(z){var i=Ag(z,r),n=Ag([i[1],-i[0],0],i);Ax(n),n=Ap(n);var a,s=e-O,o=s>0?1:-1,l=n[0]*dY*o,u=dZ(s)>180;u^(o*O<l&&l<o*e)?(a=n[1]*dY)>F&&(F=a):u^(o*O<(l=(l+360)%360-180)&&l<o*e)?(a=-n[1]*dY)<D&&(D=a):(t<D&&(D=t),t>F&&(F=t)),u?e<O?mZ(L,e)>mZ(L,B)&&(B=e):mZ(e,B)>mZ(L,B)&&(L=e):B>=L?(e<L&&(L=e),e>B&&(B=e)):e>O?mZ(L,e)>mZ(L,B)&&(B=e):mZ(e,B)>mZ(L,B)&&(L=e)}else q.push(G=[L=e,B=e]);t<D&&(D=t),t>F&&(F=t),z=r,O=e}function mX(){mH.point=mW}function mQ(){G[0]=L,G[1]=B,mH.point=mj,z=null}function m$(e,t){if(z){var r=e-O;V.add(dZ(r)>180?r+(r>0?360:-360):r)}else U=e,k=t;mk.point(e,t),mW(e,t)}function mY(){mk.lineStart()}function mK(){m$(U,k),mk.lineEnd(),dZ(V)>1e-6&&(L=-(B=180)),G[0]=L,G[1]=B,z=null}function mZ(e,t){return(t-=e)<0?t+360:t}function mJ(e,t){return e[0]-t[0]}function m0(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function m1(e){var t,r,i,n,a,s,o;if(F=B=-(L=D=1/0),q=[],AO(e,mH),r=q.length){for(q.sort(mJ),t=1,a=[i=q[0]];t<r;++t)m0(i,(n=q[t])[0])||m0(i,n[1])?(mZ(i[0],n[1])>mZ(i[0],i[1])&&(i[1]=n[1]),mZ(n[0],i[1])>mZ(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(s=-1/0,r=a.length-1,t=0,i=a[r];t<=r;i=n,++t)n=a[t],(o=mZ(i[1],n[0]))>s&&(s=o,L=n[0],B=i[1])}return q=G=null,L===1/0||D===1/0?[[NaN,NaN],[NaN,NaN]]:[[L,D],[B,F]]}var m2={Feature:function(e,t){return m4(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,i=-1,n=r.length;++i<n;)if(m4(r[i].geometry,t))return!0;return!1}},m3={Sphere:function(){return!0},Point:function(e,t){var r;return r=e.coordinates,0===pW(r,t)},MultiPoint:function(e,t){for(var r,i=e.coordinates,n=-1,a=i.length;++n<a;){if(r=i[n],0===pW(r,t))return!0}return!1},LineString:function(e,t){return m5(e.coordinates,t)},MultiLineString:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)if(m5(r[i],t))return!0;return!1},Polygon:function(e,t){return m8(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)if(m8(r[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var r=e.geometries,i=-1,n=r.length;++i<n;)if(m4(r[i],t))return!0;return!1}};function m4(e,t){return!!(e&&m3.hasOwnProperty(e.type))&&m3[e.type](e,t)}function m5(e,t){for(var r,i,n,a=0,s=e.length;a<s;a++){if(0===(i=pW(e[a],t))||a>0&&(n=pW(e[a],e[a-1]))>0&&r<=n&&i<=n&&(r+i-n)*(1-Math.pow((r-i)/n,2))<1e-12*n)return!0;r=i}return!1}function m8(e,t){return!!Ab(e.map(m6),m7(t))}function m6(e){return(e=e.map(m7)).pop(),e}function m7(e){return[e[0]*dK,e[1]*dK]}var m9={sphere:Ao,point:ge,lineStart:gr,lineEnd:ga,polygonStart:function(){m9.lineStart=gs,m9.lineEnd=go},polygonEnd:function(){m9.lineStart=gr,m9.lineEnd=ga}};function ge(e,t){e*=dK;var r=d1(t*=dK);gt(r*d1(e),r*d8(e),d8(t))}function gt(e,t,r){++H,W+=(e-W)/H,X+=(t-X)/H,Q+=(r-Q)/H}function gr(){m9.point=gi}function gi(e,t){e*=dK;var r=d1(t*=dK);ei=r*d1(e),en=r*d8(e),ea=d8(t),m9.point=gn,gt(ei,en,ea)}function gn(e,t){e*=dK;var r=d1(t*=dK),i=r*d1(e),n=r*d8(e),a=d8(t),s=d0(d7((s=en*a-ea*n)*s+(s=ea*i-ei*a)*s+(s=ei*n-en*i)*s),ei*i+en*n+ea*a);j+=s,$+=s*(ei+(ei=i)),Y+=s*(en+(en=n)),K+=s*(ea+(ea=a)),gt(ei,en,ea)}function ga(){m9.point=ge}function gs(){m9.point=gl}function go(){gu(et,er),m9.point=ge}function gl(e,t){et=e,er=t,e*=dK,t*=dK,m9.point=gu;var r=d1(t);ei=r*d1(e),en=r*d8(e),ea=d8(t),gt(ei,en,ea)}function gu(e,t){e*=dK;var r=d1(t*=dK),i=r*d1(e),n=r*d8(e),a=d8(t),s=en*a-ea*n,o=ea*i-ei*a,l=ei*n-en*i,u=d4(s,o,l),c=Ae(u),h=u&&-c/u;Z.add(h*s),J.add(h*o),ee.add(h*l),j+=c,$+=c*(ei+(ei=i)),Y+=c*(en+(en=n)),K+=c*(ea+(ea=a)),gt(ei,en,ea)}function gc(e){H=j=W=X=Q=$=Y=K=0,Z=new AA,J=new AA,ee=new AA,AO(e,m9);var t=+Z,r=+J,i=+ee,n=d4(t,r,i);return n<1e-12&&(t=$,r=Y,i=K,j<1e-6&&(t=W,r=X,i=Q),(n=d4(t,r,i))<1e-12)?[NaN,NaN]:[d0(r,t)*dY,Ae(i/n)*dY]}class gh{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,r){e*=1,t*=1,r*=1;let i=e+r,n=t;if(r<0)throw Error("negative radius");null===this._x1?this._+=`M${i},${n}`:(Math.abs(this._x1-i)>1e-6||Math.abs(this._y1-n)>1e-6)&&(this._+="L"+i+","+n),r&&(this._+=`A${r},${r},0,1,1,${e-r},${t}A${r},${r},0,1,1,${this._x1=i},${this._y1=n}`)}rect(e,t,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class gd{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class gA{constructor(e,[t,r,i,n]=[0,0,960,500]){if(!((i*=1)>=(t*=1))||!((n*=1)>=(r*=1)))throw Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=i,this.xmin=t,this.ymax=n,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let e,t,{delaunay:{points:r,hull:i,triangles:n},vectors:a}=this,s=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let a=0,o=0,l=n.length,u,c;a<l;a+=3,o+=2){let l=2*n[a],h=2*n[a+1],d=2*n[a+2],A=r[l],p=r[l+1],f=r[h],m=r[h+1],g=r[d],y=r[d+1],v=f-A,x=m-p,_=g-A,b=y-p,S=(v*b-x*_)*2;if(1e-9>Math.abs(S)){if(void 0===e){for(let n of(e=t=0,i))e+=r[2*n],t+=r[2*n+1];e/=i.length,t/=i.length}let n=1e9*Math.sign((e-A)*b-(t-p)*_);u=(A+g)/2-n*b,c=(p+y)/2+n*_}else{let e=1/S,t=v*v+x*x,r=_*_+b*b;u=A+(b*t-x*r)*e,c=p+(v*r-_*t)*e}s[o]=u,s[o+1]=c}let o=i[i.length-1],l,u=4*o,c,h=r[2*o],d,A=r[2*o+1];a.fill(0);for(let e=0;e<i.length;++e)o=i[e],l=u,c=h,d=A,u=4*o,h=r[2*o],A=r[2*o+1],a[l+2]=a[u]=d-A,a[l+3]=a[u+1]=h-c}render(e){let t=null==e?e=new gh:void 0,{delaunay:{halfedges:r,inedges:i,hull:n},circumcenters:a,vectors:s}=this;if(n.length<=1)return null;for(let t=0,i=r.length;t<i;++t){let i=r[t];if(i<t)continue;let n=2*Math.floor(t/3),s=2*Math.floor(i/3),o=a[n],l=a[n+1],u=a[s],c=a[s+1];this._renderSegment(o,l,u,c,e)}let o,l=n[n.length-1];for(let t=0;t<n.length;++t){o=l;let r=2*Math.floor(i[l=n[t]]/3),u=a[r],c=a[r+1],h=4*o,d=this._project(u,c,s[h+2],s[h+3]);d&&this._renderSegment(u,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){let t=null==e?e=new gh:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){let r=null==t?t=new gh:void 0,i=this._clip(e);if(null===i||!i.length)return;t.moveTo(i[0],i[1]);let n=i.length;for(;i[0]===i[n-2]&&i[1]===i[n-1]&&n>1;)n-=2;for(let e=2;e<n;e+=2)(i[e]!==i[e-2]||i[e+1]!==i[e-1])&&t.lineTo(i[e],i[e+1]);return t.closePath(),r&&r.value()}*cellPolygons(){let{delaunay:{points:e}}=this;for(let t=0,r=e.length/2;t<r;++t){let e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){let t=new gd;return this.renderCell(e,t),t.value()}_renderSegment(e,t,r,i,n){let a,s=this._regioncode(e,t),o=this._regioncode(r,i);0===s&&0===o?(n.moveTo(e,t),n.lineTo(r,i)):(a=this._clipSegment(e,t,r,i,s,o))&&(n.moveTo(a[0],a[1]),n.lineTo(a[2],a[3]))}contains(e,t,r){return(t*=1)==t&&(r*=1)==r&&this.delaunay._step(e,t,r)===e}*neighbors(e){let t=this._clip(e);if(t)for(let r of this.delaunay.neighbors(e)){let e=this._clip(r);if(e){l:for(let i=0,n=t.length;i<n;i+=2)for(let a=0,s=e.length;a<s;a+=2)if(t[i]===e[a]&&t[i+1]===e[a+1]&&t[(i+2)%n]===e[(a+s-2)%s]&&t[(i+3)%n]===e[(a+s-1)%s]){yield r;break l}}}}_cell(e){let{circumcenters:t,delaunay:{inedges:r,halfedges:i,triangles:n}}=this,a=r[e];if(-1===a)return null;let s=[],o=a;do{let r=Math.floor(o/3);if(s.push(t[2*r],t[2*r+1]),n[o=o%3==2?o-2:o+1]!==e)break;o=i[o]}while(o!==a&&-1!==o)return s}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let t=this._cell(e);if(null===t)return null;let{vectors:r}=this,i=4*e;return this._simplify(r[i]||r[i+1]?this._clipInfinite(e,t,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,t))}_clipFinite(e,t){let r=t.length,i=null,n,a,s=t[r-2],o=t[r-1],l,u=this._regioncode(s,o),c,h=0;for(let d=0;d<r;d+=2)if(n=s,a=o,s=t[d],o=t[d+1],l=u,u=this._regioncode(s,o),0===l&&0===u)c=h,h=0,i?i.push(s,o):i=[s,o];else{let t,r,d,A,p;if(0===l){if(null===(t=this._clipSegment(n,a,s,o,l,u)))continue;[r,d,A,p]=t}else{if(null===(t=this._clipSegment(s,o,n,a,u,l)))continue;[A,p,r,d]=t,c=h,h=this._edgecode(r,d),c&&h&&this._edge(e,c,h,i,i.length),i?i.push(r,d):i=[r,d]}c=h,h=this._edgecode(A,p),c&&h&&this._edge(e,c,h,i,i.length),i?i.push(A,p):i=[A,p]}if(i)c=h,h=this._edgecode(i[0],i[1]),c&&h&&this._edge(e,c,h,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,t,r,i,n,a){let s=n<a;for(s&&([e,t,r,i,n,a]=[r,i,e,t,a,n]);;){if(0===n&&0===a)return s?[r,i,e,t]:[e,t,r,i];if(n&a)return null;let o,l,u=n||a;8&u?(o=e+(r-e)*(this.ymax-t)/(i-t),l=this.ymax):4&u?(o=e+(r-e)*(this.ymin-t)/(i-t),l=this.ymin):2&u?(l=t+(i-t)*(this.xmax-e)/(r-e),o=this.xmax):(l=t+(i-t)*(this.xmin-e)/(r-e),o=this.xmin),n?(e=o,t=l,n=this._regioncode(e,t)):(r=o,i=l,a=this._regioncode(r,i))}}_clipInfinite(e,t,r,i,n,a){let s=Array.from(t),o;if((o=this._project(s[0],s[1],r,i))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],n,a))&&s.push(o[0],o[1]),s=this._clipFinite(e,s))for(let t=0,r=s.length,i,n=this._edgecode(s[r-2],s[r-1]);t<r;t+=2)i=n,n=this._edgecode(s[t],s[t+1]),i&&n&&(t=this._edge(e,i,n,s,t),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,r,i,n){for(;t!==r;){let r,a;switch(t){case 5:t=4;continue;case 4:t=6,r=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,r=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,r=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,r=this.xmin,a=this.ymin}(i[n]!==r||i[n+1]!==a)&&this.contains(e,r,a)&&(i.splice(n,0,r,a),n+=2)}return n}_project(e,t,r,i){let n=1/0,a,s,o;if(i<0){if(t<=this.ymin)return null;(a=(this.ymin-t)/i)<n&&(o=this.ymin,s=e+(n=a)*r)}else if(i>0){if(t>=this.ymax)return null;(a=(this.ymax-t)/i)<n&&(o=this.ymax,s=e+(n=a)*r)}if(r>0){if(e>=this.xmax)return null;(a=(this.xmax-e)/r)<n&&(s=this.xmax,o=t+(n=a)*i)}else if(r<0){if(e<=this.xmin)return null;(a=(this.xmin-e)/r)<n&&(s=this.xmin,o=t+(n=a)*i)}return[s,o]}_edgecode(e,t){return(e===this.xmin?1:2*(e===this.xmax))|(t===this.ymin?4:8*(t===this.ymax))}_regioncode(e,t){return(e<this.xmin?1:2*(e>this.xmax))|(t<this.ymin?4:8*(t>this.ymax))}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){let r=(t+2)%e.length,i=(t+4)%e.length;(e[t]===e[r]&&e[r]===e[i]||e[t+1]===e[r+1]&&e[r+1]===e[i+1])&&(e.splice(r,2),t-=2)}e.length||(e=null)}return e}}let gp=2*Math.PI,gf=Math.pow;function gm(e){return e[0]}function gg(e){return e[1]}class gy{static from(e,t=gm,r=gg,i){return new gy("length"in e?function(e,t,r,i){let n=e.length,a=new Float64Array(2*n);for(let s=0;s<n;++s){let n=e[s];a[2*s]=t.call(i,n,s,e),a[2*s+1]=r.call(i,n,s,e)}return a}(e,t,r,i):Float64Array.from(function*(e,t,r,i){let n=0;for(let a of e)yield t.call(i,a,n,e),yield r.call(i,a,n,e),++n}(e,t,r,i)))}constructor(e){this._delaunator=new mc(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){let{triangles:t,coords:r}=e;for(let e=0;e<t.length;e+=3){let i=2*t[e],n=2*t[e+1],a=2*t[e+2];if((r[a]-r[i])*(r[n+1]-r[i+1])-(r[n]-r[i])*(r[a+1]-r[i+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(e,t)=>t).sort((e,r)=>t[2*e]-t[2*r]||t[2*e+1]-t[2*r+1]);let e=this.collinear[0],n=this.collinear[this.collinear.length-1],a=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],s=1e-8*Math.hypot(a[3]-a[1],a[2]-a[0]);for(let e=0,n=t.length/2;e<n;++e){var r,i;let n=(r=t[2*e],[r+Math.sin(r+(i=t[2*e+1]))*s,i+Math.cos(r-i)*s]);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new mc(t)}else delete this.collinear;let n=this.halfedges=this._delaunator.halfedges,a=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){let t=s[e%3==2?e-2:e+1];(-1===n[e]||-1===o[t])&&(o[t]=e)}for(let e=0,t=a.length;e<t;++e)l[a[e]]=e;a.length<=2&&a.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=a[0],o[a[0]]=1,2===a.length&&(o[a[1]]=0,this.triangles[1]=a[1],this.triangles[2]=a[1]))}voronoi(e){return new gA(this,e)}*neighbors(e){let{inedges:t,hull:r,_hullIndex:i,halfedges:n,triangles:a,collinear:s}=this;if(s){let t=s.indexOf(e);t>0&&(yield s[t-1]),t<s.length-1&&(yield s[t+1]);return}let o=t[e];if(-1===o)return;let l=o,u=-1;do{if(yield u=a[l],a[l=l%3==2?l-2:l+1]!==e)return;if(-1===(l=n[l])){let t=r[(i[e]+1)%r.length];t!==u&&(yield t);return}}while(l!==o)}find(e,t,r=0){let i;if((e*=1)!=e||(t*=1)!=t)return -1;let n=r;for(;(i=this._step(r,e,t))>=0&&i!==r&&i!==n;)r=i;return i}_step(e,t,r){let{inedges:i,hull:n,_hullIndex:a,halfedges:s,triangles:o,points:l}=this;if(-1===i[e]||!l.length)return(e+1)%(l.length>>1);let u=e,c=gf(t-l[2*e],2)+gf(r-l[2*e+1],2),h=i[e],d=h;do{let i=o[d],h=gf(t-l[2*i],2)+gf(r-l[2*i+1],2);if(h<c&&(c=h,u=i),o[d=d%3==2?d-2:d+1]!==e)break;if(-1===(d=s[d])){if((d=n[(a[e]+1)%n.length])!==i&&gf(t-l[2*d],2)+gf(r-l[2*d+1],2)<c)return d;break}}while(d!==h)return u}render(e){let t=null==e?e=new gh:void 0,{points:r,halfedges:i,triangles:n}=this;for(let t=0,a=i.length;t<a;++t){let a=i[t];if(a<t)continue;let s=2*n[t],o=2*n[a];e.moveTo(r[s],r[s+1]),e.lineTo(r[o],r[o+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=void 0==t?2:+t;let r=null==e?e=new gh:void 0,{points:i}=this;for(let r=0,n=i.length;r<n;r+=2){let n=i[r],a=i[r+1];e.moveTo(n+t,a),e.arc(n,a,t,0,gp)}return r&&r.value()}renderHull(e){let t=null==e?e=new gh:void 0,{hull:r,points:i}=this,n=2*r[0],a=r.length;e.moveTo(i[n],i[n+1]);for(let t=1;t<a;++t){let n=2*r[t];e.lineTo(i[n],i[n+1])}return e.closePath(),t&&t.value()}hullPolygon(){let e=new gd;return this.renderHull(e),e.value()}renderTriangle(e,t){let r=null==t?t=new gh:void 0,{points:i,triangles:n}=this,a=2*n[e*=3],s=2*n[e+1],o=2*n[e+2];return t.moveTo(i[a],i[a+1]),t.lineTo(i[s],i[s+1]),t.lineTo(i[o],i[o+1]),t.closePath(),r&&r.value()}*trianglePolygons(){let{triangles:e}=this;for(let t=0,r=e.length/3;t<r;++t)yield this.trianglePolygon(t)}trianglePolygon(e){let t=new gd;return this.renderTriangle(e,t),t.value()}}function gv(e,t){var r=d1(t),i=1+d1(e)*r;return[r*d8(e)/i,d8(t)/i]}gv.invert=function(e,t){var r=d7(e*e+t*t),i=function(e){return 2*dJ(e)}(r),n=d8(i);return[d0(e*n,r*d1(i)),Ae(r&&t*n/r)]};let gx=Math.PI,g_=gx/2,gb=180/gx,gS=gx/180,gT=Math.atan2,gw=Math.cos,gM=Math.max,gE=Math.min,gC=Math.sin,gR=Math.sign||function(e){return e>0?1:e<0?-1:0},gN=Math.sqrt;function gP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gI(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function gL(e,t){return[e[0]+t[0],e[1]+t[1],e[2]+t[2]]}function gD(e){var t=gN(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);return[e[0]/t,e[1]/t,e[2]/t]}function gB(e){var t;return[gT(e[1],e[0])*gb,((t=gM(-1,gE(1,e[2])))>1?g_:t<-1?-g_:Math.asin(t))*gb]}function gF(e){let t=e[0]*gS,r=e[1]*gS,i=gw(r);return[i*gw(t),i*gC(t),gC(r)]}function gO(e){return gP((e=e.map(e=>gF(e)))[0],gI(e[2],e[1]))}function gU(e,t,r){e=gF(e),t=gF(t),r=gF(r);let i=gR(gP(gI(t,e),r));return gB(gD(gL(e,t)).map(e=>i*e))}function gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function gz(e){return(gz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gV=function(){return!!e})()}function gq(e,t){return(gq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gG(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t);else for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(e,t)||gj(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gH(e){return function(e){if(Array.isArray(e))return gk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gj(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gj(e,t){if(e){if("string"==typeof e)return gk(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gk(e,t):void 0}}function gW(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r?(t&&m2.hasOwnProperty(t.type)?m2[t.type]:m4)(t,e):mF(e,t)}var gX=window.THREE?window.THREE:{BufferGeometry:rX,Float32BufferAttribute:rk},gQ=new gX.BufferGeometry().setAttribute?"setAttribute":"addAttribute",g$=function(e){function t(e,r,i,n,a,s,o){if(!(this instanceof t))throw TypeError("Cannot call a class as a function");l=gz(l=t),(u=function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,gV()?Reflect.construct(l,[],gz(this).constructor):l.apply(this,void 0))).type="ConicPolygonGeometry",u.parameters={polygonGeoJson:e,bottomHeight:r,topHeight:i,closedBottom:n,closedTop:a,includeSides:s,curvatureResolution:o},r=r||0,i=i||1,n=void 0===n||n,a=void 0===a||a,s=void 0===s||s;var l,u,c=function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.resolution,a=void 0===n?1/0:n,s=(t=e,r=a,t.map(function(e){var t,i=[];return e.forEach(function(e){if(t){var n=180*pW(e,t)/Math.PI;if(n>r)for(var a=pX(t,e),s=1/Math.ceil(n/r),o=s;o<1;)i.push(a(o)),o+=s}i.push(t=e)}),i})),o=AS(s),l=function(e,t){var r={type:"Polygon",coordinates:e},i=gG(m1(r),2),n=gG(i[0],2),a=n[0],s=n[1],o=gG(i[1],2),l=o[0],u=o[1];if(Math.min(Math.abs(l-a),Math.abs(u-s))<t)return[];var c=a>l||u>=89||s<=-89;return(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.minLng,i=t.maxLng,n=t.minLat,a=t.maxLat,s=Math.round(Math.pow(360/e,2)/Math.PI),o=(1+Math.sqrt(5))/2,l=function(e){return s*(Math.cos((e+90)*Math.PI/180)+1)/2},u=[void 0!==a?Math.ceil(l(a)):0,void 0!==n?Math.floor(l(n)):s-1],c=void 0===r&&void 0===i?function(){return!0}:void 0===r?function(e){return e<=i}:void 0===i?function(e){return e>=r}:i>=r?function(e){return e>=r&&e<=i}:function(e){return e>=r||e<=i},h=[],d=u[0];d<=u[1];d++){var A=d/o*360%360-180;c(A)&&h.push([A,Math.acos(2*d/s-1)/Math.PI*180-90])}return h})(t,{minLng:a,maxLng:l,minLat:s,maxLat:u}).filter(function(e){return gW(e,r,c)})}(e,a),u=[].concat(gH(o),gH(l)),c={type:"Polygon",coordinates:e},h=gG(m1(c),2),d=gG(h[0],2),A=d[0],p=d[1],f=gG(h[1],2),m=f[0],g=f[1],y=A>m||g>=89||p<=-89,v=[];if(y){let e;var x=((e=function(t){if(e.delaunay=null,e._data=t,"object"==typeof e._data&&"FeatureCollection"===e._data.type&&(e._data=e._data.features),"object"==typeof e._data){let t=e._data.map(t=>[e._vx(t),e._vy(t),t]).filter(e=>isFinite(e[0]+e[1]));e.points=t.map(e=>[e[0],e[1]]),e.valid=t.map(e=>e[2]),e.delaunay=function(e){var t,r,i,n,a,s,o,l;let u,c,h,d=function(e){if(e.length<2)return{};let t=0;for(;isNaN(e[t][0]+e[t][1])&&t++<e.length;);let r=function(e){function t(t){return t=e(t[0]*dK,t[1]*dK),t[0]*=dY,t[1]*=dY,t}return e=Ai(e[0]*dK,e[1]*dK,e.length>2?e[2]*dK:0),t.invert=function(t){return t=e.invert(t[0]*dK,t[1]*dK),t[0]*=dY,t[1]*=dY,t},t}(e[t]),i=(function(e){var t,r,i,n,a,s,o,l,u,c,h=150,d=480,A=250,p=0,f=0,m=0,g=0,y=0,v=0,x=1,_=1,b=null,S=AE,T=null,w=AR,M=.5;function E(e){return l(e[0]*dK,e[1]*dK)}function C(e){return(e=l.invert(e[0],e[1]))&&[e[0]*dY,e[1]*dY]}function R(){var e=AQ(h,0,0,x,_,v).apply(null,t(p,f)),i=AQ(h,d-e[0],A-e[1],x,_,v);return r=Ai(m,g,y),o=At(t,i),l=At(r,o),s=AW(o,M),N()}function N(){return u=c=null,E}return E.stream=function(e){var t;return u&&c===e?u:u=AX((t=r,AN({point:function(e,r){var i=t(e,r);return this.stream.point(i[0],i[1])}}))(S(s(w(c=e)))))},E.preclip=function(e){return arguments.length?(S=e,b=void 0,N()):S},E.postclip=function(e){return arguments.length?(w=e,T=i=n=a=null,N()):w},E.clipAngle=function(e){return arguments.length?(S=+e?function(e){var t=d1(e),r=2*dK,i=t>0,n=dZ(t)>1e-6;function a(e,r){return d1(e)*d1(r)>t}function s(e,r,i){var n=Af(e),a=Af(r),s=[1,0,0],o=Ag(n,a),l=Am(o,o),u=o[0],c=l-u*u;if(!c)return!i&&e;var h=Ag(s,o),d=Av(s,t*l/c);Ay(d,Av(o,-t*u/c));var A=Am(d,h),p=Am(h,h),f=A*A-p*(Am(d,d)-1);if(!(f<0)){var m=d7(f),g=Av(h,(-A-m)/p);if(Ay(g,d),g=Ap(g),!i)return g;var y,v=e[0],x=r[0],_=e[1],b=r[1];x<v&&(y=v,v=x,x=y);var S=x-v,T=1e-6>dZ(S-dW);if(!T&&b<_&&(y=_,_=b,b=y),T||S<1e-6?T?_+b>0^g[1]<(1e-6>dZ(g[0]-v)?_:b):_<=g[1]&&g[1]<=b:S>dW^(v<=g[0]&&g[0]<=x)){var w=Av(h,(-A+m)/p);return Ay(w,d),[g,Ap(w)]}}}function o(t,r){var n=i?e:dW-e,a=0;return t<-n?a|=1:t>n&&(a|=2),r<-n?a|=4:r>n&&(a|=8),a}return AT(a,function(e){var t,r,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var A,p,f=[h,d],m=a(h,d),g=i?m?0:o(h,d):m?o(h+(h<0?dW:-dW),d):0;!t&&(u=l=m)&&e.lineStart(),m!==l&&(!(p=s(t,f))||Au(t,p)||Au(f,p))&&(f[2]=1),m!==l?(c=0,m?(e.lineStart(),p=s(f,t),e.point(p[0],p[1])):(p=s(t,f),e.point(p[0],p[1],2),e.lineEnd()),t=p):n&&t&&i^m&&!(g&r)&&(A=s(f,t,!0))&&(c=0,i?(e.lineStart(),e.point(A[0][0],A[0][1]),e.point(A[1][0],A[1][1]),e.lineEnd()):(e.point(A[1][0],A[1][1]),e.lineEnd(),e.lineStart(),e.point(A[0][0],A[0][1],3))),!m||t&&Au(t,f)||e.point(f[0],f[1]),t=f,l=m,r=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return c|(u&&l)<<1}}},function(t,i,n,a){!function(e,t,r,i,n,a){if(r){var s=d1(t),o=d8(t),l=i*r;null==n?(n=t+i*d$,a=t-l/2):(n=AC(s,n),a=AC(s,a),(i>0?n<a:n>a)&&(n+=i*d$));for(var u,c=n;i>0?c>a:c<a;c-=l)u=Ap([s,-o*d1(c),-o*d8(c)]),e.point(u[0],u[1])}}(a,e,r,n,t,i)},i?[0,-e]:[-dW,e-dW])}(b=e*dK):(b=null,AE),N()):b*dY},E.clipExtent=function(e){return arguments.length?(w=null==e?(T=i=n=a=null,AR):function(e,t,r,i){function n(n,a){return e<=n&&n<=r&&t<=a&&a<=i}function a(n,a,o,u){var c=0,h=0;if(null==n||(c=s(n,o))!==(h=s(a,o))||0>l(n,a)^o>0)do u.point(0===c||3===c?e:r,c>1?i:t);while((c=(c+o+4)%4)!==h)else u.point(a[0],a[1])}function s(i,n){return 1e-6>dZ(i[0]-e)?n>0?0:3:1e-6>dZ(i[0]-r)?n>0?2:1:1e-6>dZ(i[1]-t)?+(n>0):n>0?3:2}function o(e,t){return l(e.x,t.x)}function l(e,t){var r=s(e,1),i=s(t,1);return r!==i?r-i:0===r?t[1]-e[1]:1===r?e[0]-t[0]:2===r?e[1]-t[1]:t[0]-e[0]}return function(s){var l,u,c,h,d,A,p,f,m,g,y,v=s,x=Al(),_={point:b,lineStart:function(){_.point=S,u&&u.push(c=[]),g=!0,m=!1,p=f=NaN},lineEnd:function(){l&&(S(h,d),A&&m&&x.rejoin(),l.push(x.result())),_.point=b,m&&v.lineEnd()},polygonStart:function(){v=x,l=[],u=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,r=0,n=u.length;r<n;++r)for(var a,s,o=u[r],l=1,c=o.length,h=o[0],d=h[0],A=h[1];l<c;++l)a=d,s=A,d=(h=o[l])[0],A=h[1],s<=i?A>i&&(d-a)*(i-s)>(A-s)*(e-a)&&++t:A<=i&&(d-a)*(i-s)<(A-s)*(e-a)&&--t;return t}(),r=y&&t,n=(l=AS(l)).length;(r||n)&&(s.polygonStart(),r&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),n&&Ah(l,o,t,a,s),s.polygonEnd()),v=s,l=u=c=null}};function b(e,t){n(e,t)&&v.point(e,t)}function S(a,s){var o=n(a,s);if(u&&c.push([a,s]),g)h=a,d=s,A=o,g=!1,o&&(v.lineStart(),v.point(a,s));else if(o&&m)v.point(a,s);else{var l=[p=Math.max(-1e9,Math.min(1e9,p)),f=Math.max(-1e9,Math.min(1e9,f))],x=[a=Math.max(-1e9,Math.min(1e9,a)),s=Math.max(-1e9,Math.min(1e9,s))];!function(e,t,r,i,n,a){var s,o=e[0],l=e[1],u=t[0],c=t[1],h=0,d=1,A=u-o,p=c-l;if(s=r-o,!A&&s>0)return;if(s/=A,A<0){if(s<h)return;s<d&&(d=s)}else if(A>0){if(s>d)return;s>h&&(h=s)}if(s=n-o,A||!(s<0)){if(s/=A,A<0){if(s>d)return;s>h&&(h=s)}else if(A>0){if(s<h)return;s<d&&(d=s)}if(s=i-l,p||!(s>0)){if(s/=p,p<0){if(s<h)return;s<d&&(d=s)}else if(p>0){if(s>d)return;s>h&&(h=s)}if(s=a-l,p||!(s<0)){if(s/=p,p<0){if(s>d)return;s>h&&(h=s)}else if(p>0){if(s<h)return;s<d&&(d=s)}return h>0&&(e[0]=o+h*A,e[1]=l+h*p),d<1&&(t[0]=o+d*A,t[1]=l+d*p),!0}}}}(l,x,e,t,r,i)?o&&(v.lineStart(),v.point(a,s),y=!1):(m||(v.lineStart(),v.point(l[0],l[1])),v.point(x[0],x[1]),o||v.lineEnd(),y=!1)}p=a,f=s,m=o}return _}}(T=+e[0][0],i=+e[0][1],n=+e[1][0],a=+e[1][1]),N()):null==T?null:[[T,i],[n,a]]},E.scale=function(e){return arguments.length?(h=+e,R()):h},E.translate=function(e){return arguments.length?(d=+e[0],A=+e[1],R()):[d,A]},E.center=function(e){return arguments.length?(p=e[0]%360*dK,f=e[1]%360*dK,R()):[p*dY,f*dY]},E.rotate=function(e){return arguments.length?(m=e[0]%360*dK,g=e[1]%360*dK,y=e.length>2?e[2]%360*dK:0,R()):[m*dY,g*dY,y*dY]},E.angle=function(e){return arguments.length?(v=e%360*dK,R()):v*dY},E.reflectX=function(e){return arguments.length?(x=e?-1:1,R()):x<0},E.reflectY=function(e){return arguments.length?(_=e?-1:1,R()):_<0},E.precision=function(e){return arguments.length?(s=AW(o,M=e*e),N()):d7(M)},E.fitExtent=function(e,t){return AH(E,e,t)},E.fitSize=function(e,t){return AH(E,[[0,0],e],t)},E.fitWidth=function(e,t){return AG(E,function(t){var r=+e,i=r/(t[1][0]-t[0][0]),n=(r-i*(t[1][0]+t[0][0]))/2,a=-i*t[0][1];E.scale(150*i).translate([n,a])},t)},E.fitHeight=function(e,t){return AG(E,function(t){var r=+e,i=r/(t[1][1]-t[0][1]),n=-i*t[0][0],a=(r-i*(t[1][1]+t[0][1]))/2;E.scale(150*i).translate([n,a])},t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&C,R()}})(function(){return gv})().scale(250).clipAngle(142).translate([0,0]).scale(1).rotate(r.invert([180,0]));e=e.map(i);let n=[],a=1;for(let t=0,r=e.length;t<r;t++){let r=e[t][0]**2+e[t][1]**2;!isFinite(r)||r>1e32?n.push(t):r>a&&(a=r)}let s=1e6*gN(a);n.forEach(t=>e[t]=[s,0]),e.push([0,s]),e.push([-s,0]),e.push([0,-s]);let o=gy.from(e);o.projection=i;let{triangles:l,halfedges:u,inedges:c}=o,h=[];for(let r=0,i=u.length;r<i;r++)if(u[r]<0){let e=r%3==2?r-2:r+1,i=r%3==0?r+2:r-1,n=u[e],a=u[i];u[n]=a,u[a]=n,u[e]=u[i]=-1,l[r]=l[e]=l[i]=t,c[l[n]]=n%3==0?n+2:n-1,c[l[a]]=a%3==0?a+2:a-1,h.push(Math.min(r,e,i)),r+=2-r%3}else l[r]>e.length-3-1&&(l[r]=t);return o}(e),A=function(e){let{triangles:t}=e;if(!t)return[];let r=[];for(let e=0,i=t.length/3;e<i;e++){let i=t[3*e],n=t[3*e+1],a=t[3*e+2];i!==n&&n!==a&&r.push([i,a,n])}return r}(d),p=(t=A,r=e,u=new Set,2===r.length?[[0,1]]:(t.forEach(e=>{if(e[0]!==e[1]&&!(0>gO(e.map(e=>r[e]))))for(let t=0,r;t<3;t++)r=(t+1)%3,u.add(f8([e[t],e[r]]).join("-"))}),Array.from(u,e=>e.split("-").map(Number)))),f=(i=A,n=e.length,c=[],i.forEach(e=>{for(let t=0;t<3;t++){let r=e[t],i=e[(t+1)%3];c[r]=c[r]||[],c[r].push(i)}}),0===i.length&&(2===n?(c[0]=[1],c[1]=[0]):1===n&&(c[0]=[])),c),m=function(e,t){function r(e,t){let r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}return function(i,n,a){void 0===a&&(a=0);let s,o,l=a,u=gF([i,n]);do s=a,a=null,o=r(u,gF(t[s])),e[s].forEach(e=>{let i=r(u,gF(t[e]));if(i<o){o=i,a=e,l=e;return}});while(null!==a)return l}}(f,e),{polygons:g,centers:y}=function(e,t,r){let i=[],n=e.slice();if(0===t.length){if(r.length<2)return{polygons:i,centers:n};if(2===r.length){let e=gF(r[0]),t=gF(r[1]),s=gD(gL(e,t)),o=gD(gI(e,t)),l=gI(s,o),u=[s,gI(s,l),gI(gI(s,l),l),gI(gI(gI(s,l),l),l)].map(gB).map(a);return i.push(u),i.push(u.slice().reverse()),{polygons:i,centers:n}}}function a(e){let r=-1;return n.slice(t.length,1/0).forEach((i,n)=>{i[0]===e[0]&&i[1]===e[1]&&(r=n+t.length)}),r<0&&(r=n.length,n.push(e)),r}return t.forEach((e,t)=>{for(let r=0;r<3;r++){let n=e[r],a=e[(r+1)%3],s=e[(r+2)%3];i[n]=i[n]||[],i[n].push([a,s,t,[n,a,s]])}}),{polygons:i.map(e=>{let t=[e[0][2]],i=e[0][1];for(let r=1;r<e.length;r++)for(let r=0;r<e.length;r++)if(e[r][0]==i){i=e[r][1],t.push(e[r][2]);break}if(t.length>2)return t;if(2==t.length){let i=gU(r[e[0][3][0]],r[e[0][3][1]],n[t[0]]),s=gU(r[e[0][3][2]],r[e[0][3][0]],n[t[0]]),o=a(i),l=a(s);return[t[0],l,t[1],o]}}),centers:n}}((a=A,s=e,a.map(e=>{let t=e.map(e=>s[e]).map(gF);return gB(gD(gL(gL(gI(t[1],t[0]),gI(t[2],t[1])),gI(t[0],t[2]))))})),A,e),v=(h=[],g.forEach(e=>{if(!e)return;let t=e[e.length-1];for(let r of e)r>t&&h.push([t,r]),t=r}),h),x=function(e,t){let r,i=new Set,n=[];e.map(e=>{if(!(gO(e.map(e=>t[e>t.length?0:e]))>1e-12))for(let t=0;t<3;t++){let r=[e[t],e[(t+1)%3]],n=`${r[0]}-${r[1]}`;i.has(n)?i.delete(n):i.add(`${r[1]}-${r[0]}`)}});let a=new Map;if(i.forEach(e=>{e=e.split("-").map(Number),a.set(e[0],e[1]),r=e[0]}),void 0===r)return n;let s=r;do{n.push(s);let e=a.get(s);a.set(s,-1),s=e}while(s>-1&&s!==r)return n}(A,e),_=(o=p,l=A,function(e){let t=new Map,r=new Map;return o.forEach((i,n)=>{let a=i.join("-");t.set(a,e[n]),r.set(a,!0)}),l.forEach(e=>{let i=0,n=-1;for(let r=0;r<3;r++){let a=f8([e[r],e[(r+1)%3]]).join("-");t.get(a)>i&&(i=t.get(a),n=a)}r.set(n,!1)}),o.map(e=>r.get(e.join("-")))});return{delaunay:d,edges:p,triangles:A,centers:y,neighbors:f,polygons:g,mesh:v,hull:x,urquhart:_,find:m}}(e.points)}return e})._vx=function(e){return"object"==typeof e&&"type"in e?gc(e)[0]:0 in e?e[0]:void 0},e._vy=function(e){return"object"==typeof e&&"type"in e?gc(e)[1]:1 in e?e[1]:void 0},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(void 0!==t&&e(t),!e.delaunay)return!1;let r={type:"FeatureCollection",features:[]};return 0===e.valid.length||(e.delaunay.polygons.forEach((t,i)=>r.features.push({type:"Feature",geometry:t?{type:"Polygon",coordinates:[[...t,t[0]].map(t=>e.delaunay.centers[t])]}:null,properties:{site:e.valid[i],sitecoordinates:e.points[i],neighbours:e.delaunay.neighbors[i]}})),1===e.valid.length&&r.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),r},e.triangles=function(t){return void 0!==t&&e(t),!!e.delaunay&&{type:"FeatureCollection",features:e.delaunay.triangles.map((t,r)=>((t=t.map(t=>e.points[t])).center=e.delaunay.centers[r],t)).filter(e=>gO(e)>0).map(e=>({type:"Feature",properties:{circumcenter:e.center},geometry:{type:"Polygon",coordinates:[[...e,e[0]]]}}))}},e.links=function(t){if(void 0!==t&&e(t),!e.delaunay)return!1;let r=e.delaunay.edges.map(t=>pW(e.points[t[0]],e.points[t[1]])),i=e.delaunay.urquhart(r);return{type:"FeatureCollection",features:e.delaunay.edges.map((t,n)=>({type:"Feature",properties:{source:e.valid[t[0]],target:e.valid[t[1]],length:r[n],urquhart:!!i[n]},geometry:{type:"LineString",coordinates:[e.points[t[0]],e.points[t[1]]]}}))}},e.mesh=function(t){return void 0!==t&&e(t),!!e.delaunay&&{type:"MultiLineString",coordinates:e.delaunay.edges.map(t=>[e.points[t[0]],e.points[t[1]]])}},e.cellMesh=function(t){if(void 0!==t&&e(t),!e.delaunay)return!1;let{centers:r,polygons:i}=e.delaunay,n=[];for(let e of i)if(e)for(let t=e.length,i=e[t-1],a=e[0],s=0;s<t;i=a,a=e[++s])a>i&&n.push([r[i],r[a]]);return{type:"MultiLineString",coordinates:n}},e._found=void 0,e.find=function(t,r,i){if(e._found=e.delaunay.find(t,r,e._found),!i||pW([t,r],e.points[e._found])<i)return e._found},e.hull=function(t){void 0!==t&&e(t);let r=e.delaunay.hull,i=e.points;return 0===r.length?null:{type:"Polygon",coordinates:[[...r.map(e=>i[e]),i[r[0]]]]}},u?e(u):e).triangles(),_=new Map(u.map(function(e,t){var r=gG(e,2),i=r[0],n=r[1];return["".concat(i,"-").concat(n),t]}));x.features.forEach(function(e){var t,r=e.geometry.coordinates[0].slice(0,3).reverse(),i=[];if(r.forEach(function(e){var t=gG(e,2),r=t[0],n=t[1],a="".concat(r,"-").concat(n);_.has(a)&&i.push(_.get(a))}),3===i.length){if(i.some(function(e){return e<o.length})&&!gW(e.properties.circumcenter,c,y))return;(t=v).push.apply(t,i)}})}else if(l.length){for(var b=mc.from(u),S=function(e){var t,r=[2,1,0].map(function(t){return b.triangles[e+t]}),i=r.map(function(e){return u[e]});if(r.some(function(e){return e<o.length})&&!gW([0,1].map(function(e){return function(e,t){let r=0,i=0;if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(++r,i+=t);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(a*=1)>=a&&(++r,i+=a)}if(r)return i/r}(i,function(t){return t[e]})}),c,y))return 1;(t=v).push.apply(t,gH(r))},T=0,w=b.triangles.length;T<w;T+=3)if(S(T))continue}else{var M=pk(s),E=M.vertices,C=M.holes;v=function(e,t,r=2){let i,n,a,s=t&&t.length,o=s?t[0]*r:e.length,l=pS(e,0,o,r,!0),u=[];if(!l||l.next===l.prev)return u;if(s&&(l=function(e,t,r,i){let n=[];for(let r=0,a=t.length;r<a;r++){let s=t[r]*i,o=r<a-1?t[r+1]*i:e.length,l=pS(e,s,o,i,!1);l===l.next&&(l.steiner=!0),n.push(function(e){let t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e)return r}(l))}n.sort(pw);for(let e=0;e<n.length;e++)r=function(e,t){let r=function(e,t){let r,i=t,n=e.x,a=e.y,s=-1/0;if(pN(e,i))return i;do{if(pN(e,i.next))return i.next;if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){let e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=n&&e>s&&(s=e,r=i.x<i.next.x?i:i.next,e===n))return r}i=i.next}while(i!==t)if(!r)return null;let o=r,l=r.x,u=r.y,c=1/0;i=r;do{if(n>=i.x&&i.x>=l&&n!==i.x&&pE(a<u?n:s,a,l,u,a<u?s:n,a,i.x,i.y)){var h,d;let t=Math.abs(a-i.y)/(n-i.x);pD(i,e)&&(t<c||t===c&&(i.x>r.x||i.x===r.x&&(h=r,d=i,0>pR(h.prev,h,d.prev)&&0>pR(d.next,h,h.next))))&&(r=i,c=t)}i=i.next}while(i!==o)return r}(e,t);if(!r)return t;let i=pB(r,e);return pT(i,i.next),pT(r,r.next)}(n[e],r);return r}(e,t,l,r)),e.length>80*r){i=e[0],n=e[1];let t=i,s=n;for(let a=r;a<o;a+=r){let r=e[a],o=e[a+1];r<i&&(i=r),o<n&&(n=o),r>t&&(t=r),o>s&&(s=o)}a=0!==(a=Math.max(t-i,s-n))?32767/a:0}return function e(t,r,i,n,a,s,o){if(!t)return;!o&&s&&function(e,t,r,i){let n=e;do 0===n.z&&(n.z=pM(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e)n.prevZ.nextZ=null,n.prevZ=null,function(e){let t,r=1;do{let i,n=e;e=null;let a=null;for(t=0;n;){t++;let s=n,o=0;for(let e=0;e<r&&(o++,s=s.nextZ);e++);let l=r;for(;o>0||l>0&&s;)0!==o&&(0===l||!s||n.z<=s.z)?(i=n,n=n.nextZ,o--):(i=s,s=s.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=s}a.nextZ=null,r*=2}while(t>1)}(n)}(t,n,a,s);let l=t;for(;t.prev!==t.next;){let u=t.prev,c=t.next;if(s?function(e,t,r,i){let n=e.prev,a=e.next;if(pR(n,e,a)>=0)return!1;let s=n.x,o=e.x,l=a.x,u=n.y,c=e.y,h=a.y,d=Math.min(s,o,l),A=Math.min(u,c,h),p=Math.max(s,o,l),f=Math.max(u,c,h),m=pM(d,A,t,r,i),g=pM(p,f,t,r,i),y=e.prevZ,v=e.nextZ;for(;y&&y.z>=m&&v&&v.z<=g;){if(y.x>=d&&y.x<=p&&y.y>=A&&y.y<=f&&y!==n&&y!==a&&pC(s,u,o,c,l,h,y.x,y.y)&&pR(y.prev,y,y.next)>=0||(y=y.prevZ,v.x>=d&&v.x<=p&&v.y>=A&&v.y<=f&&v!==n&&v!==a&&pC(s,u,o,c,l,h,v.x,v.y)&&pR(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;y&&y.z>=m;){if(y.x>=d&&y.x<=p&&y.y>=A&&y.y<=f&&y!==n&&y!==a&&pC(s,u,o,c,l,h,y.x,y.y)&&pR(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;v&&v.z<=g;){if(v.x>=d&&v.x<=p&&v.y>=A&&v.y<=f&&v!==n&&v!==a&&pC(s,u,o,c,l,h,v.x,v.y)&&pR(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}(t,n,a,s):function(e){let t=e.prev,r=e.next;if(pR(t,e,r)>=0)return!1;let i=t.x,n=e.x,a=r.x,s=t.y,o=e.y,l=r.y,u=Math.min(i,n,a),c=Math.min(s,o,l),h=Math.max(i,n,a),d=Math.max(s,o,l),A=r.next;for(;A!==t;){if(A.x>=u&&A.x<=h&&A.y>=c&&A.y<=d&&pC(i,s,n,o,a,l,A.x,A.y)&&pR(A.prev,A,A.next)>=0)return!1;A=A.next}return!0}(t)){r.push(u.i,t.i,c.i),pO(t),t=c.next,l=c.next;continue}if((t=c)===l){o?1===o?e(t=function(e,t){let r=e;do{let i=r.prev,n=r.next.next;!pN(i,n)&&pP(i,r,r.next,n)&&pD(i,n)&&pD(n,i)&&(t.push(i.i,r.i,n.i),pO(r),pO(r.next),r=e=n),r=r.next}while(r!==e)return pT(r)}(pT(t),r),r,i,n,a,s,2):2===o&&function(t,r,i,n,a,s){let o=t;do{let t=o.next.next;for(;t!==o.prev;){var l,u;if(o.i!==t.i&&(l=o,u=t,l.next.i!==u.i&&l.prev.i!==u.i&&!function(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&pP(r,r.next,e,t))return!0;r=r.next}while(r!==e)return!1}(l,u)&&(pD(l,u)&&pD(u,l)&&function(e,t){let r=e,i=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&n<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==e)return i}(l,u)&&(pR(l.prev,l,u.prev)||pR(l,u.prev,u))||pN(l,u)&&pR(l.prev,l,l.next)>0&&pR(u.prev,u,u.next)>0))){let l=pB(o,t);o=pT(o,o.next),l=pT(l,l.next),e(o,r,i,n,a,s,0),e(l,r,i,n,a,s,0);return}t=t.next}o=o.next}while(o!==t)}(t,r,i,n,a,s):e(pT(t),r,i,n,a,s,1);break}}}(l,u,r,i,n,a,0),u}(E,void 0===C?[]:C,2)}var R=dj(f8(u,function(e){return e[0]}),[0,1]),N=dj(f8(u,function(e){return e[1]}),[0,1]),P=u.map(function(e){var t=gG(e,2),r=t[0],i=t[1];return[R(r),N(i)]});return{contour:s,triangles:{points:u,indices:v,uvs:P}}}(e,{resolution:o=o||5}),h=c.contour,d=c.triangles,A=AS(d.uvs),p=[],f=[],m=[],g=0,y=function(e){var t=Math.round(p.length/3),r=m.length;p=p.concat(e.vertices),f=f.concat(e.uvs),m=m.concat(t?e.indices.map(function(e){return e+t}):e.indices),u.addGroup(r,m.length-r,g++)};function v(e,t){var r="function"==typeof t?t:function(){return t};return pk(e.map(function(e){return e.map(function(e){var t=gG(e,2),i=t[0],n=t[1];return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(90-e)*Math.PI/180,n=(90-t)*Math.PI/180;return[r*Math.sin(i)*Math.cos(n),r*Math.cos(i),r*Math.sin(i)*Math.sin(n)]}(n,i,r(i,n))})}))}function x(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return{indices:t?d.indices:d.indices.slice().reverse(),vertices:v([d.points],e).vertices,uvs:A}}return s&&y(function(){for(var e=v(h,r),t=e.vertices,n=e.holes,a=v(h,i).vertices,s=AS([a,t]),o=Math.round(a.length/3),l=new Set(n),u=0,c=[],d=0;d<o;d++){var A=d+1;if(A===o)A=u;else if(l.has(A)){var p=A;A=u,u=p}c.push(d,d+o,A+o),c.push(A+o,A,d)}for(var f=[],m=1;m>=0;m--)for(var g=0;g<o;g+=1)f.push(g/(o-1),m);return{indices:c,vertices:s,uvs:f}}()),n&&y(x(r,!1)),a&&y(x(i,!0)),u.setIndex(m),u[gQ]("position",new gX.Float32BufferAttribute(p,3)),u[gQ]("uv",new gX.Float32BufferAttribute(f,2)),u.computeVertexNormals(),u}if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");return t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gq(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(gX.BufferGeometry);function gY(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function gK(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function gZ(e,t){if(e){if("string"==typeof e)return gY(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gY(e,t):void 0}}var gJ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=(t instanceof Array?t.length?t:[void 0]:[t]).map(function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}}),a=e.reduce(function(e,t){var i=e,a=t;return n.forEach(function(e,t){var s,o=e.keyAccessor;if(e.isProp){var l=a,u=l[o],c=function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.includes(r)||({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(l,[o].map(gK));s=u,a=c}else s=o(a,t);t+1<n.length?(i.hasOwnProperty(s)||(i[s]={}),i=i[s]):r?(i.hasOwnProperty(s)||(i[s]=[]),i[s].push(a)):i[s]=a}),e},{});r instanceof Function&&function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i===n.length?Object.keys(t).forEach(function(e){return t[e]=r(t[e])}):Object.values(t).forEach(function(t){return e(t,i+1)})}(a);var s=a;return i&&(s=[],!function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r.length===n.length?s.push({keys:r,vals:t}):Object.entries(t).forEach(function(t){var i=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),2!==o.length);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(t,2)||gZ(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=i[0];return e(i[1],[].concat(function(e){if(Array.isArray(e))return gY(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||gZ(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[n]))})}(a),t instanceof Array&&0===t.length&&1===s.length&&(s[0].keys=[])),s},g0=function(e){var t,r,i,n,a,s,o,l,u,c,h,d,A=void 0!==(e=e||{})?e:{},p={};for(t in A)A.hasOwnProperty(t)&&(p[t]=A[t]);var f=[],m="";"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",r=function(e,t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(){if(200==i.status||0==i.status&&i.response)return void t(i.response);var n=W(e);n?t(n.buffer):r()},i.onerror=r,i.send(null)};var g=A.print||console.log.bind(console),y=A.printErr||console.warn.bind(console);for(t in p)p.hasOwnProperty(t)&&(A[t]=p[t]);p=null,A.arguments&&(f=A.arguments);var v=0,x=!1;function _(e){var t,r=A["_"+e];return t="Cannot call unknown function "+e+", make sure it is exported",r||en("Assertion failed: "+t),r}var b="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function S(e,t){return e?function(e,t,r){for(var i=t+r,n=t;e[n]&&!(n>=i);)++n;if(n-t>16&&e.subarray&&b)return b.decode(e.subarray(t,n));for(var a="";t<n;){var s=e[t++];if(!(128&s)){a+=String.fromCharCode(s);continue}var o=63&e[t++];if((224&s)==192){a+=String.fromCharCode((31&s)<<6|o);continue}var l=63&e[t++];if((s=(240&s)==224?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var u=s-65536;a+=String.fromCharCode(55296|u>>10,56320|1023&u)}}return a}(a,e,t):""}function T(e,t){return e%t>0&&(e+=t-e%t),e}function w(e){i=e,A.HEAP8=n=new Int8Array(e),A.HEAP16=s=new Int16Array(e),A.HEAP32=o=new Int32Array(e),A.HEAPU8=a=new Uint8Array(e),A.HEAPU16=new Uint16Array(e),A.HEAPU32=new Uint32Array(e),A.HEAPF32=l=new Float32Array(e),A.HEAPF64=u=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var M=A.TOTAL_MEMORY||0x2000000;function E(e){for(;e.length>0;){var t=e.shift();if("function"==typeof t){t();continue}var r=t.func;"number"==typeof r?void 0===t.arg?A.dynCall_v(r):A.dynCall_vi(r,t.arg):r(void 0===t.arg?null:t.arg)}}M=(i=A.buffer?A.buffer:new ArrayBuffer(M)).byteLength,w(i),o[7152]=5271520;var C=[],R=[],N=[],P=[],I=Math.abs,L=Math.ceil,D=Math.floor,B=Math.min,F=0,O=null;A.preloadedImages={},A.preloadedAudios={};var U=null,k="data:application/octet-stream;base64,";function z(e){return String.prototype.startsWith?e.startsWith(k):0===e.indexOf(k)}U="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";function V(e){return e.replace(/\b__Z[\w\d_]+/g,function(e){return e==e?e:e+" ["+e+"]"})}function q(){var e=Error();if(!e.stack){try{throw Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}function G(){return n.length}function H(e){try{var t=new ArrayBuffer(e);if(t.byteLength!=e)return;return new Int8Array(t).set(n),Q(t),w(t),1}catch(e){}}var j="function"==typeof atob?atob:function(e){var t,r,i,n,a,s,o,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=l.indexOf(e.charAt(c++)),a=l.indexOf(e.charAt(c++)),s=l.indexOf(e.charAt(c++)),o=l.indexOf(e.charAt(c++)),t=n<<2|a>>4,r=(15&a)<<4|s>>2,i=(3&s)<<6|o,u+=String.fromCharCode(t),64!==s&&(u+=String.fromCharCode(r)),64!==o&&(u+=String.fromCharCode(i));while(c<e.length)return u};function W(e){if(z(e))return function(e){try{for(var t=j(e),r=new Uint8Array(t.length),i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}catch(e){throw Error("Converting base64 string to bytes failed.")}}(e.slice(k.length))}var X=function(e,t,r){var i=new e.Int8Array(r),n=new e.Int32Array(r),a=(new e.Uint8Array(r),new e.Float32Array(r),new e.Float64Array(r)),s=0|t.o,o=0|t.p,l=e.Math.floor,u=e.Math.abs,c=e.Math.sqrt,h=e.Math.pow,d=e.Math.cos,A=e.Math.sin,p=e.Math.tan,f=e.Math.acos,m=e.Math.asin,g=e.Math.atan,y=e.Math.atan2,v=e.Math.ceil,x=e.Math.imul,_=e.Math.min,b=e.Math.max,S=e.Math.clz32,T=t.b,w=t.c,M=t.d,E=t.e,C=t.f,R=t.g,N=t.h,P=t.i,I=28640;function L(e,t,r,i){return 0|D(e|=0,t|=0,r|=0,i|=0,0)}function D(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0,c=0;if(u=I,I=I+16|0,o=u,!(0|B(e,t,r,i,a)))return i=0,I=u,0|i;do if((0|r)>=0){if((0|r)>0xd2461d){if(0|(s=0|eK(15,o)))break;o=0|n[(l=o)>>2],l=0|n[l+4>>2]}else s=((0|r)<0)<<31>>31,c=0|tT(0|r,0|s,3,0),s=0|tT(0|c,0|(l=0|w()),0|(s=0|tv(0|r,0|s,1,0)),0|w()),s=0|tv(0|s,0|w(),1,0),l=0|w(),n[o>>2]=s,n[o+4>>2]=l,o=s;if(tB(0|i,0,o<<3),0|a){tB(0|a,0,o<<2),s=0|F(e,t,r,i,a,o,l,0);break}(s=0|ty(o,4))?(c=0|F(e,t,r,i,s,o,l,0),tg(s),s=c):s=13}else s=2;while(0)return c=s,I=u,0|c}function B(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0;if(m=I,I=I+16|0,p=m,f=m+8|0,n[(A=p)>>2]=e,n[A+4>>2]=t,(0|r)<0)return f=2,I=m,0|f;if(n[(s=i)>>2]=e,n[s+4>>2]=t,(s=(0|a)!=0)&&(n[a>>2]=0),0|eR(e,t))return f=9,I=m,0|f;n[f>>2]=0;e:do if((0|r)>=1)if(s)for(h=1,c=0,d=0,A=1,s=e;;){if(!(c|d)){if(0|(s=0|O(s,t,4,f,p)))break e;if(0|eR(s=0|n[(t=p)>>2],t=0|n[t+4>>2])){s=9;break e}}if(0|(s=0|O(s,t,0|n[26800+(d<<2)>>2],f,p)))break e;if(s=0|n[(t=p)>>2],t=0|n[t+4>>2],n[(e=i+(h<<3)|0)>>2]=s,n[e+4>>2]=t,n[a+(h<<2)>>2]=A,o=(0|(e=c+1|0))==(0|A),u=(0|(l=d+1|0))==6,0|eR(s,t)){s=9;break e}if((0|(A=A+(u&o&1)|0))>(0|r)){s=0;break}h=h+1|0,c=o?0:e,d=o?u?0:l:d}else for(h=1,c=0,d=0,A=1,s=e;;){if(!(c|d)){if(0|(s=0|O(s,t,4,f,p)))break e;if(0|eR(s=0|n[(t=p)>>2],t=0|n[t+4>>2])){s=9;break e}}if(0|(s=0|O(s,t,0|n[26800+(d<<2)>>2],f,p)))break e;if(s=0|n[(t=p)>>2],t=0|n[t+4>>2],n[(e=i+(h<<3)|0)>>2]=s,n[e+4>>2]=t,o=(0|(e=c+1|0))==(0|A),u=(0|(l=d+1|0))==6,0|eR(s,t)){s=9;break e}if((0|(A=A+(u&o&1)|0))>(0|r)){s=0;break}h=h+1|0,c=o?0:e,d=o?u?0:l:d}else s=0;while(0)return f=s,I=m,0|f}function F(e,t,r,i,a,s,o,l){e|=0,t|=0,r|=0,i|=0,a|=0,s|=0,o|=0,l|=0;var u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0;if(m=I,I=I+16|0,p=m+8|0,f=m,u=0|tM(0|e,0|t,0|s,0|o),h=0|w(),c=(0|(y=0|n[(g=d=i+(u<<3)|0)>>2]))==(0|e)&(0|(g=0|n[g+4>>2]))==(0|t),!((0|y)==0&(0|g)==0|c))do u=0|tw(0|(u=0|tv(0|u,0|h,1,0)),0|w(),0|s,0|o),h=0|w(),c=(0|(g=0|n[(y=d=i+(u<<3)|0)>>2]))==(0|e)&(0|(y=0|n[y+4>>2]))==(0|t);while(!((0|g)==0&(0|y)==0|c))if(u=a+(u<<2)|0,(c?(0|n[u>>2])<=(0|l):0)||(n[(y=d)>>2]=e,n[y+4>>2]=t,n[u>>2]=l,(0|l)>=(0|r)))return y=0,I=m,0|y;switch(c=l+1|0,n[p>>2]=0,0|(u=0|O(e,t,2,p,f))){case 9:A=9;break;case 0:(u=0|F(0|n[(u=f)>>2],0|n[u+4>>2],r,i,a,s,o,c))||(A=9)}e:do if((0|A)==9){switch(n[p>>2]=0,0|(u=0|O(e,t,3,p,f))){case 9:break;case 0:if(0|(u=0|F(0|n[(u=f)>>2],0|n[u+4>>2],r,i,a,s,o,c)))break e;break;default:break e}switch(n[p>>2]=0,0|(u=0|O(e,t,1,p,f))){case 9:break;case 0:if(0|(u=0|F(0|n[(u=f)>>2],0|n[u+4>>2],r,i,a,s,o,c)))break e;break;default:break e}switch(n[p>>2]=0,0|(u=0|O(e,t,5,p,f))){case 9:break;case 0:if(0|(u=0|F(0|n[(u=f)>>2],0|n[u+4>>2],r,i,a,s,o,c)))break e;break;default:break e}switch(n[p>>2]=0,0|(u=0|O(e,t,4,p,f))){case 9:break;case 0:if(0|(u=0|F(0|n[(u=f)>>2],0|n[u+4>>2],r,i,a,s,o,c)))break e;break;default:break e}switch(n[p>>2]=0,0|(u=0|O(e,t,6,p,f))){case 9:break;case 0:if(0|(u=0|F(0|n[(u=f)>>2],0|n[u+4>>2],r,i,a,s,o,c)))break e;break;default:break e}return y=0,I=m,0|y}while(0)return y=u,I=m,0|y}function O(e,t,r,i,a){e|=0,t|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0;if((r|=0)>>>0>6)return 0|(a=1);if(d=(0|n[i>>2])%6|0,n[i>>2]=d,(0|d)>0){s=0;do r=0|eh(r),s=s+1|0;while((0|s)<(0|n[i>>2]))}if(d=0|tC(0|e,0|t,45),w(),(h=127&d)>>>0>121)return 0|(a=5);u=0|eI(e,t),s=0|tC(0|e,0|t,52),w(),s&=15;e:do{if(s){for(;;){if(l=0|tC(0|e,0|t,0|(o=(15-s|0)*3|0)),w(),(0|(l&=7))==7){t=5;break}if(f=(0|eF(s))==0,s=s+-1|0,A=0|tR(7,0,0|o),t&=~(0|w()),p=0|tR(0|n[(f?432:16)+(28*l|0)+(r<<2)>>2],0,0|o),o=0|w(),r=0|n[(f?640:224)+(28*l|0)+(r<<2)>>2],e=p|e&~A,t|=o,!r){r=0;break e}if(!s){c=8;break e}}return 0|t}c=8}while(0)(0|c)==8&&(e|=p=0|tR(0|(f=0|n[848+(28*h|0)+(r<<2)>>2]),0,45),t=w()|-1040385&t,r=0|n[4272+(28*h|0)+(r<<2)>>2],(127&f)==127&&(f=0|tR(0|n[848+(28*h|0)+20>>2],0,45),t=w()|-1040385&t,r=0|n[4272+(28*h|0)+20>>2],e=0|eD(f|e,t),t=0|w(),n[i>>2]=(0|n[i>>2])+1)),l=0|tC(0|e,0|t,45),w(),l&=127;t:do if(0|V(l)){u:do if((0|eI(e,t))==1){if((0|h)!=(0|l))if(0|H(l,0|n[7696+(28*h|0)>>2])){e=0|eB(e,t),o=1,t=0|w();break}else M(27795,26864,533,26872);switch(0|u){case 3:e=0|eD(e,t),t=0|w(),n[i>>2]=(0|n[i>>2])+1,o=0;break u;case 5:e=0|eB(e,t),t=0|w(),n[i>>2]=(0|n[i>>2])+5,o=0;break u;case 0:return 0|(f=9);default:return 0|(f=1)}}else o=0;while(0)if((0|r)>0){s=0;do e=0|eL(e,t),t=0|w(),s=s+1|0;while((0|s)!=(0|r))}if((0|h)!=(0|l)){if(!(0|q(l))){if((0|o)!=0|(0|eI(e,t))!=5)break;n[i>>2]=(0|n[i>>2])+1;break}switch(127&d){case 8:case 118:break t}(0|eI(e,t))!=3&&(n[i>>2]=(0|n[i>>2])+1)}}else if((0|r)>0){s=0;do e=0|eD(e,t),t=0|w(),s=s+1|0;while((0|s)!=(0|r))}while(0)return n[i>>2]=((0|n[i>>2])+r|0)%6|0,n[(f=a)>>2]=e,n[f+4>>2]=t,0|(f=0)}function U(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0;if(f=I,I=I+16|0,A=f,p=f+8|0,n[(d=A)>>2]=e,n[d+4>>2]=t,(0|r)<0)return p=2,I=f,0|p;if(!r)return n[(p=i)>>2]=e,n[p+4>>2]=t,p=0,I=f,0|p;n[p>>2]=0;e:do if(0|eR(e,t))e=9;else{a=0,d=e;do{if(0|(e=0|O(d,t,4,p,A)))break e;if(d=0|n[(t=A)>>2],t=0|n[t+4>>2],a=a+1|0,0|eR(d,t)){e=9;break e}}while((0|a)<(0|r))n[(h=i)>>2]=d,n[h+4>>2]=t,h=r+-1|0,c=0,e=1;do{if(a=26800+(c<<2)|0,(0|c)==5)for(o=0|n[a>>2],s=0,a=e;;){if(0|(e=0|O(0|n[(e=A)>>2],0|n[e+4>>2],o,p,A)))break e;if((0|s)!=(0|h)){if(l=0|n[(u=A)>>2],u=0|n[u+4>>2],n[(e=i+(a<<3)|0)>>2]=l,n[e+4>>2]=u,0|eR(l,u)){e=9;break e}e=a+1|0}else e=a;if((0|(s=s+1|0))>=(0|r))break;a=e}else for(o=A,u=0|n[a>>2],l=0,a=e,s=0|n[o>>2],o=0|n[o+4>>2];;){if(0|(e=0|O(s,o,u,p,A)))break e;if(s=0|n[(o=A)>>2],o=0|n[o+4>>2],n[(e=i+(a<<3)|0)>>2]=s,n[e+4>>2]=o,e=a+1|0,0|eR(s,o)){e=9;break e}if((0|(l=l+1|0))>=(0|r))break;a=e}c=c+1|0}while(c>>>0<6)e=9*((0|d)!=(0|n[(e=A)>>2])||(0|t)!=(0|n[e+4>>2]))}while(0)return p=e,I=f,0|p}function k(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0;for(l=I,I=I+16|0,s=l,o=l+8|0,a=(a=(0|eR(e,t))==0)?1:2;;){if(n[o>>2]=0,(c=(0|O(e,t,a,o,s))==0)&((0|n[(u=s)>>2])==(0|r)?(0|n[u+4>>2])==(0|i):0)){e=4;break}if((a=a+1|0)>>>0>=7){a=7,e=4;break}}return(0|e)==4?(I=l,0|a):0}function z(e,t,r,i,o,c,h){e|=0,t|=0,r|=0,i|=0,o|=0,c|=0,h|=0;var d=0,A=0,p=0,f=0,m=0,g=0,y=0,x=0,b=0,S=0,T=0,M=0,E=0,C=0,R=0,N=0,P=0,L=0,D=0,B=0,F=0,O=0,U=0,k=0,z=0,V=0,q=0,G=0,H=0;if(z=I,I=I+64|0,F=z+48|0,O=z+32|0,U=z+24|0,R=z+8|0,N=z,(0|(A=0|n[e>>2]))<=0)return k=0,I=z,0|k;for(P=e+4|0,L=F+8|0,D=O+8|0,B=R+8|0,d=0,E=0;;){M=(p=0|n[P>>2])+(E<<4)|0,n[F>>2]=n[M>>2],n[F+4>>2]=n[M+4>>2],n[F+8>>2]=n[M+8>>2],n[F+12>>2]=n[M+12>>2],(0|E)==(A+-1|0)?(n[O>>2]=n[p>>2],n[O+4>>2]=n[p+4>>2],n[O+8>>2]=n[p+8>>2],n[O+12>>2]=n[p+12>>2]):(M=p+(E+1<<4)|0,n[O>>2]=n[M>>2],n[O+4>>2]=n[M+4>>2],n[O+8>>2]=n[M+8>>2],n[O+12>>2]=n[M+12>>2]),A=0|function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var o=0,c=0,h=0,d=0,A=0,p=0,f=0;p=I,I=I+288|0,h=p+264|0,d=p+96|0,c=(o=A=p)+96|0;do n[o>>2]=0,o=o+4|0;while((0|o)<(0|c))return 0|(r=0|eq(r,A))?i=r:(ez(o=0|n[(r=A)>>2],r=0|n[r+4>>2],h),eV(o,r,d),f=+e$(h,d+8|0),f=+v(+(e$(e,t)/(2*f))),a[s>>3]=f,r=~~f>>>0,o=+u(f)>=1?f>0?~~_(+l(f/0x100000000),0xffffffff)>>>0:~~v((f-(~~f>>>0))/0x100000000)>>>0:0,(0x7ff00000&n[s+4>>2])==0x7ff00000)?i=1:(A=(0|r)==0&(0|o)==0,n[i>>2]=A?1:r,n[i+4>>2]=A?0:o,i=0),I=p,0|i}(F,O,i,U);e:do if(A)p=0,d=A;else if(p=0|n[(A=U)>>2],(0|(A=0|n[A+4>>2]))>0|(0|A)==0&p>>>0>0){T=0,M=0;t:for(;;){if(q=1/(+(p>>>0)+0x100000000*(0|A)),H=+a[F>>3],G=+((A=0|tx(0|p,0|A,0|T,0|M))>>>0)+0x100000000*(0|w()),V=+(T>>>0)+0x100000000*(0|M),a[R>>3]=H*G*q+q*(a[O>>3]*V),a[B>>3]=q*(a[L>>3]*G)+q*(a[D>>3]*V),0|(A=0|eO(R,i,N))){d=A;break}g=0|tM(0|(b=0|n[(S=N)>>2]),0|(S=0|n[S+4>>2]),0|t,0|r),f=0|w(),p=0|n[(m=A=h+(g<<3)|0)>>2],m=0|n[m+4>>2];u:do if((0|p)==0&(0|m)==0)C=A,k=16;else for(y=0,x=0;;){if((0|y)>(0|r)|(0|y)==(0|r)&x>>>0>t>>>0){d=1;break t}if((0|p)==(0|b)&(0|m)==(0|S))break u;if(g=0|tw(0|(A=0|tv(0|g,0|f,1,0)),0|w(),0|t,0|r),f=0|w(),x=0|tv(0|x,0|y,1,0),y=0|w(),(0|(p=0|n[(m=A=h+(g<<3)|0)>>2]))==0&(0|(m=0|n[m+4>>2]))==0){C=A,k=16;break}}while(0)if(((0|k)==16?(k=0,!((0|b)==0&(0|S)==0)):0)&&(n[(x=C)>>2]=b,n[x+4>>2]=S,x=c+(n[o>>2]<<3)|0,n[x>>2]=b,n[x+4>>2]=S,x=0|tv(0|n[(x=o)>>2],0|n[x+4>>2],1,0),b=0|w(),n[(S=o)>>2]=x,n[S+4>>2]=b),T=0|tv(0|T,0|M,1,0),M=0|w(),p=0|n[(A=U)>>2],!((0|(A=0|n[A+4>>2]))>(0|M)|(0|A)==(0|M)&p>>>0>T>>>0)){p=1;break e}}p=0}else p=1;while(0)if(E=E+1|0,!p){k=21;break}if((0|E)>=(0|(A=0|n[e>>2]))){d=0,k=21;break}}return(0|k)==21?(I=z,0|d):0}function V(e){return(e|=0)>>>0>121?0|(e=0):0|(e=0|n[7696+(28*e|0)+16>>2])}function q(e){return(0|(e|=0))==4|(0|e)==117}function G(e){return 0|n[11120+((0|n[(e|=0)>>2])*216|0)+((0|n[e+4>>2])*72|0)+((0|n[e+8>>2])*24|0)+(n[e+12>>2]<<3)>>2]}function H(e,t){return(t|=0,(0|n[7696+(28*(e|=0)|0)+20>>2])==(0|t))?0|(t=1):0|(t=(0|n[7696+(28*e|0)+24>>2])==(0|t))}function j(e,t){return 0|n[848+(28*(e|=0)|0)+((t|=0)<<2)>>2]}function W(e,t){return(t|=0,(0|n[848+(28*(e|=0)|0)>>2])==(0|t))?0|(t=0):(0|n[848+(28*e|0)+4>>2])==(0|t)?0|(t=1):(0|n[848+(28*e|0)+8>>2])==(0|t)?0|(t=2):(0|n[848+(28*e|0)+12>>2])==(0|t)?0|(t=3):(0|n[848+(28*e|0)+16>>2])==(0|t)?0|(t=4):(0|n[848+(28*e|0)+20>>2])==(0|t)?0|(t=5):((0|n[848+(28*e|0)+24>>2])==(0|t)?6:7)|0}function X(e){return+a[(e|=0)+16>>3]<+a[e+24>>3]|0}function Q(e,t){e|=0,t|=0;var r=0,i=0,n=0;return(r=+a[t>>3])>=+a[e+8>>3]&&r<=+a[e>>3]?(i=+a[e+16>>3],r=+a[e+24>>3],t=(n=+a[t+8>>3])>=r,e=n<=i&1,i<r?t&&(e=1):t||(e=0),0|(t=(0|e)!=0)):0|(t=0)}function $(e,t){t|=0;var r=0,i=0,n=0,s=0,o=0,l=0,u=0,c=0,h=0;return+a[(e|=0)>>3]<+a[t+8>>3]||+a[e+8>>3]>+a[t>>3]?0|(i=0):(o=(s=+a[e+16>>3])<(h=+a[(r=e+24|0)>>3]),l=(c=+a[(i=t+16|0)>>3])<(u=+a[(n=t+24|0)>>3]),t=h-c<u-s,e=o?l|t?1:2:0,t=l?o?1:t?2:1:0,(s=+eQ(s,e))<+eQ(+a[n>>3],t)||(h=+eQ(+a[r>>3],e))>+eQ(+a[i>>3],t))?0|(l=0):0|(l=1)}function Y(e,t){t|=0;var r=0,i=0,n=0,s=0,o=0,l=0,u=0,c=0,h=0;return+a[(e|=0)>>3]<+a[t>>3]||+a[e+8>>3]>+a[t+8>>3]?0|(i=0):(o=(u=+a[(i=e+16|0)>>3])<(s=+a[e+24>>3]),l=(h=+a[(r=t+16|0)>>3])<(c=+a[(n=t+24|0)>>3]),t=s-h<c-u,e=o?l|t?1:2:0,t=l?o?1:t?2:1:0,(s=+eQ(s,e))<=+eQ(+a[n>>3],t))?0|(l=(h=+eQ(+a[i>>3],e))>=+eQ(+a[r>>3],t)):0|(l=0)}function K(e,t){e|=0,t|=0;var r=0,i=0,s=0,o=0,l=0,u=0;s=I,I=I+176|0,n[(i=s)>>2]=4,u=+a[t>>3],a[i+8>>3]=u,o=+a[t+16>>3],a[i+16>>3]=o,a[i+24>>3]=u,u=+a[t+24>>3],a[i+32>>3]=u,l=+a[t+8>>3],a[i+40>>3]=l,a[i+48>>3]=u,a[i+56>>3]=l,a[i+64>>3]=o,r=(t=i+72|0)+96|0;do n[t>>2]=0,t=t+4|0;while((0|t)<(0|r))tD(0|e,0|i,168),I=s}function Z(e,t,r){e|=0,t|=0,r|=0;var i=0,o=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,x=0,b=0,S=0;x=I,I=I+288|0,f=x+264|0,m=x+96|0,A=(d=p=x)+96|0;do n[d>>2]=0,d=d+4|0;while((0|d)<(0|A))return 0|(t=0|eq(t,p))||(ez(p=0|n[(A=p)>>2],A=0|n[A+4>>2],f),eV(p,A,m),h=+e$(f,m+8|0),a[f>>3]=+a[e>>3],a[(A=f+8|0)>>3]=+a[e+16>>3],a[m>>3]=+a[e+8>>3],a[(p=m+8|0)>>3]=+a[e+24>>3],o=+e$(f,m),c=+u(+(S=a[A>>3]-a[p>>3])),i=+u(+(b=a[f>>3]-a[m>>3])),(0==S|0==b?0:(S=+v(+(o*o/tI(+((S=+tP(+c,+i))/tI(+c,+i)),3)/(2.59807621135*h*h*.8))),a[s>>3]=S,g=~~S>>>0,y=+u(S)>=1?S>0?~~_(+l(S/0x100000000),0xffffffff)>>>0:~~v((S-(~~S>>>0))/0x100000000)>>>0:0,(0x7ff00000&n[s+4>>2])!=0x7ff00000))?(m=(0|g)==0&(0|y)==0,n[(t=r)>>2]=m?1:g,n[t+4>>2]=m?0:y,t=0):t=1),y=t,I=x,0|y}function J(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0;t=0|n[e>>2],r=0|n[(o=e+4|0)>>2],(0|t)<0&&(r=r-t|0,n[o>>2]=r,n[(s=e+8|0)>>2]=(0|n[s>>2])-t,n[e>>2]=0,t=0),(0|r)<0?(t=t-r|0,n[e>>2]=t,a=(0|n[(s=e+8|0)>>2])-r|0,n[s>>2]=a,n[o>>2]=0,r=0):(s=a=e+8|0,a=0|n[a>>2]),(0|a)<0&&(t=t-a|0,n[e>>2]=t,r=r-a|0,n[o>>2]=r,n[s>>2]=0,a=0),(0|(i=(0|a)<(0|(i=(0|r)<(0|t)?r:t))?a:i))<=0||(n[e>>2]=t-i,n[o>>2]=r-i,n[s>>2]=a-i)}function ee(e,t){e|=0,t|=0;var r=0,i=0;i=0|n[e+8>>2],r=+((0|n[e+4>>2])-i|0),a[t>>3]=((0|n[e>>2])-i|0)-.5*r,a[t+8>>3]=.8660254037844386*r}function et(e,t,r){e|=0,t|=0,n[(r|=0)>>2]=(0|n[t>>2])+(0|n[e>>2]),n[r+4>>2]=(0|n[t+4>>2])+(0|n[e+4>>2]),n[r+8>>2]=(0|n[t+8>>2])+(0|n[e+8>>2])}function er(e,t,r){e|=0,t|=0,n[(r|=0)>>2]=(0|n[e>>2])-(0|n[t>>2]),n[r+4>>2]=(0|n[e+4>>2])-(0|n[t+4>>2]),n[r+8>>2]=(0|n[e+8>>2])-(0|n[t+8>>2])}function ei(e,t){e|=0,t|=0;var r=0,i=0;r=0|x(0|n[e>>2],t),n[e>>2]=r,i=0|x(0|n[(r=e+4|0)>>2],t),n[r>>2]=i,t=0|x(0|n[(e=e+8|0)>>2],t),n[e>>2]=t}function en(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;l=(0|(o=0|n[e>>2]))<0,i=(0|(r=(0|(e=(r=(0|(a=((s=(0|(i=(0|n[e+4>>2])-(l?o:0)|0))<0)?0-i|0:0)+((0|n[e+8>>2])-(l?o:0))|0))<0)?0:a))<(0|(r=(0|(t=(s?0:i)-(r?a:0)|0))<(0|(a=(l?0:o)-(s?i:0)-(r?a:0)|0))?t:a))?e:r))>0,e=e-(i?r:0)|0,t=t-(i?r:0)|0;e:do switch(a-(i?r:0)|0){case 0:switch(0|t){case 0:return 0|(l=(0|e)==0?0:(0|e)==1?1:7);case 1:return 0|(l=(0|e)==0?2:(0|e)==1?3:7);default:break e}case 1:switch(0|t){case 0:return 0|(l=(0|e)==0?4:(0|e)==1?5:7);case 1:if(e)break e;return 0|(e=6);default:break e}}while(0)return 0|(l=7)}function ea(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;r=0|n[(o=e+8|0)>>2],i=0|tf((((t=(0|n[e>>2])-r|0)<<1)+(r=(0|n[(l=e+4|0)>>2])-r|0)|0)*.14285714285714285),n[e>>2]=i,t=0|tf(((3*r|0)-t|0)*.14285714285714285),n[l>>2]=t,n[o>>2]=0,r=t-i|0,(0|i)<0?(s=0-i|0,n[l>>2]=r,n[o>>2]=s,n[e>>2]=0,t=r,i=0,r=s):r=0,(0|t)<0&&(i=i-t|0,n[e>>2]=i,r=r-t|0,n[o>>2]=r,n[l>>2]=0,t=0),s=i-r|0,a=t-r|0,(0|r)<0?(n[e>>2]=s,n[l>>2]=a,n[o>>2]=0,t=a,a=s,r=0):a=i,(0|(i=(0|r)<(0|(i=(0|t)<(0|a)?t:a))?r:i))<=0||(n[e>>2]=a-i,n[l>>2]=t-i,n[o>>2]=r-i)}function es(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;t=0|n[e>>2],r=0|n[(o=e+4|0)>>2],i=0|n[(l=e+8|0)>>2],a=r+(3*t|0)|0,n[e>>2]=a,r=i+(3*r|0)|0,n[o>>2]=r,t=(3*i|0)+t|0,n[l>>2]=t,i=r-a|0,(0|a)<0?(t=t-a|0,n[o>>2]=i,n[l>>2]=t,n[e>>2]=0,r=i,i=0):i=a,(0|r)<0&&(i=i-r|0,n[e>>2]=i,t=t-r|0,n[l>>2]=t,n[o>>2]=0,r=0),s=i-t|0,a=r-t|0,(0|t)<0?(n[e>>2]=s,n[o>>2]=a,n[l>>2]=0,i=s,t=0):a=r,(0|(r=(0|t)<(0|(r=(0|a)<(0|i)?a:i))?t:r))<=0||(n[e>>2]=i-r,n[o>>2]=a-r,n[l>>2]=t-r)}function eo(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;a=0|n[e>>2],t=0|n[(o=e+4|0)>>2],r=0|n[(l=e+8|0)>>2],i=(3*t|0)+a|0,a=r+(3*a|0)|0,n[e>>2]=a,n[o>>2]=i,t=(3*r|0)+t|0,n[l>>2]=t,r=i-a|0,(0|a)<0?(t=t-a|0,n[o>>2]=r,n[l>>2]=t,n[e>>2]=0,a=0):r=i,(0|r)<0&&(a=a-r|0,n[e>>2]=a,t=t-r|0,n[l>>2]=t,n[o>>2]=0,r=0),s=a-t|0,i=r-t|0,(0|t)<0?(n[e>>2]=s,n[o>>2]=i,n[l>>2]=0,a=s,t=0):i=r,(0|(r=(0|t)<(0|(r=(0|i)<(0|a)?i:a))?t:r))<=0||(n[e>>2]=a-r,n[o>>2]=i-r,n[l>>2]=t-r)}function el(e,t){e|=0;var r=0,i=0,a=0,s=0,o=0,l=0;(t|=0)+-1>>>0>=6||(a=(0|n[15440+(12*t|0)>>2])+(0|n[e>>2])|0,n[e>>2]=a,l=e+4|0,i=(0|n[15440+(12*t|0)+4>>2])+(0|n[l>>2])|0,n[l>>2]=i,o=e+8|0,t=(0|n[15440+(12*t|0)+8>>2])+(0|n[o>>2])|0,n[o>>2]=t,r=i-a|0,(0|a)<0?(t=t-a|0,n[l>>2]=r,n[o>>2]=t,n[e>>2]=0,i=0):(r=i,i=a),(0|r)<0&&(i=i-r|0,n[e>>2]=i,t=t-r|0,n[o>>2]=t,n[l>>2]=0,r=0),s=i-t|0,a=r-t|0,(0|t)<0?(n[e>>2]=s,n[l>>2]=a,n[o>>2]=0,i=s,t=0):a=r,(0|(r=(0|t)<(0|(r=(0|a)<(0|i)?a:i))?t:r))<=0||(n[e>>2]=i-r,n[l>>2]=a-r,n[o>>2]=t-r))}function eu(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;a=0|n[e>>2],t=0|n[(o=e+4|0)>>2],r=0|n[(l=e+8|0)>>2],i=t+a|0,a=r+a|0,n[e>>2]=a,n[o>>2]=i,t=r+t|0,n[l>>2]=t,r=i-a|0,(0|a)<0?(t=t-a|0,n[o>>2]=r,n[l>>2]=t,n[e>>2]=0,i=0):(r=i,i=a),(0|r)<0&&(i=i-r|0,n[e>>2]=i,t=t-r|0,n[l>>2]=t,n[o>>2]=0,r=0),s=i-t|0,a=r-t|0,(0|t)<0?(n[e>>2]=s,n[o>>2]=a,n[l>>2]=0,i=s,t=0):a=r,(0|(r=(0|t)<(0|(r=(0|a)<(0|i)?a:i))?t:r))<=0||(n[e>>2]=i-r,n[o>>2]=a-r,n[l>>2]=t-r)}function ec(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;t=0|n[e>>2],i=0|n[(o=e+4|0)>>2],r=0|n[(l=e+8|0)>>2],a=i+t|0,n[e>>2]=a,i=r+i|0,n[o>>2]=i,t=r+t|0,n[l>>2]=t,r=i-a|0,(0|a)<0?(t=t-a|0,n[o>>2]=r,n[l>>2]=t,n[e>>2]=0,i=0):(r=i,i=a),(0|r)<0&&(i=i-r|0,n[e>>2]=i,t=t-r|0,n[l>>2]=t,n[o>>2]=0,r=0),s=i-t|0,a=r-t|0,(0|t)<0?(n[e>>2]=s,n[o>>2]=a,n[l>>2]=0,i=s,t=0):a=r,(0|(r=(0|t)<(0|(r=(0|a)<(0|i)?a:i))?t:r))<=0||(n[e>>2]=i-r,n[o>>2]=a-r,n[l>>2]=t-r)}function eh(e){switch(0|(e|=0)){case 1:e=5;break;case 5:e=4;break;case 4:e=6;break;case 6:e=2;break;case 2:e=3;break;case 3:e=1}return 0|e}function ed(e){switch(0|(e|=0)){case 1:e=3;break;case 3:e=2;break;case 2:e=6;break;case 6:e=4;break;case 4:e=5;break;case 5:e=1}return 0|e}function eA(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;t=0|n[e>>2],r=0|n[(o=e+4|0)>>2],i=0|n[(l=e+8|0)>>2],a=r+(t<<1)|0,n[e>>2]=a,r=i+(r<<1)|0,n[o>>2]=r,t=(i<<1)+t|0,n[l>>2]=t,i=r-a|0,(0|a)<0?(t=t-a|0,n[o>>2]=i,n[l>>2]=t,n[e>>2]=0,r=i,i=0):i=a,(0|r)<0&&(i=i-r|0,n[e>>2]=i,t=t-r|0,n[l>>2]=t,n[o>>2]=0,r=0),s=i-t|0,a=r-t|0,(0|t)<0?(n[e>>2]=s,n[o>>2]=a,n[l>>2]=0,i=s,t=0):a=r,(0|(r=(0|t)<(0|(r=(0|a)<(0|i)?a:i))?t:r))<=0||(n[e>>2]=i-r,n[o>>2]=a-r,n[l>>2]=t-r)}function ep(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;a=0|n[e>>2],t=0|n[(o=e+4|0)>>2],r=0|n[(l=e+8|0)>>2],i=(t<<1)+a|0,a=r+(a<<1)|0,n[e>>2]=a,n[o>>2]=i,t=(r<<1)+t|0,n[l>>2]=t,r=i-a|0,(0|a)<0?(t=t-a|0,n[o>>2]=r,n[l>>2]=t,n[e>>2]=0,a=0):r=i,(0|r)<0&&(a=a-r|0,n[e>>2]=a,t=t-r|0,n[l>>2]=t,n[o>>2]=0,r=0),s=a-t|0,i=r-t|0,(0|t)<0?(n[e>>2]=s,n[o>>2]=i,n[l>>2]=0,a=s,t=0):i=r,(0|(r=(0|t)<(0|(r=(0|i)<(0|a)?i:a))?t:r))<=0||(n[e>>2]=a-r,n[o>>2]=i-r,n[l>>2]=t-r)}function ef(e,t){e|=0,t|=0;var r=0,i=0,a=0,s=0,o=0,l=0;return l=(0|(o=(0|n[e>>2])-(0|n[t>>2])|0))<0,s=(0|(i=(0|n[e+4>>2])-(0|n[t+4>>2])-(l?o:0)|0))<0,i=(0|(e=(0|(t=(e=(0|(a=(l?0-o|0:0)+(0|n[e+8>>2])-(0|n[t+8>>2])+(s?0-i|0:0)|0))<0)?0:a))<(0|(e=(0|(r=(s?0:i)-(e?a:0)|0))<(0|(a=(l?0:o)-(s?i:0)-(e?a:0)|0))?r:a))?t:e))>0,t=t-(i?e:0)|0,r=r-(i?e:0)|0,((0|(e=(0|(e=a-(i?e:0)|0))>-1?e:0-e|0))>(0|(t=(0|(r=(0|r)>-1?r:0-r|0))>(0|(t=(0|t)>-1?t:0-t|0))?r:t))?e:t)|0}function em(e){e|=0;var t=0,r=0,i=0,a=0;r=(a=0|n[(t=e+8|0)>>2])-(0|n[e>>2])|0,n[e>>2]=r,e=(0|n[(i=e+4|0)>>2])-a|0,n[i>>2]=e,n[t>>2]=0-(e+r)}function eg(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0;return(o=I,I=I+16|0,a=o,s=-0x7f000001&t|0x8000000,!0&(0x78000000&t)==0x10000000)?(i=0|tC(0|e,0|t,56),w(),(0|(i=0|function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0;if(s=I,I=I+16|0,a=s,i=0|eR(e,t),r+-1>>>0>5||(0|r)==1&(i=(0|i)!=0))return a=-1,I=s,0|a;do if(0|tu(e,t,a))i=-1;else if(i){i=((0|n[26352+(r<<2)>>2])+5-(0|n[a>>2])|0)%5|0;break}else{i=((0|n[26384+(r<<2)>>2])+6-(0|n[a>>2])|0)%6|0;break}while(0)return a=i,I=s,0|a}(e,s,7&i)))==-1)?(n[r>>2]=0,s=6):(0|ek(e,s,a)&&M(27795,26932,282,26947),t=0|tC(0|e,0|t,52),w(),t&=15,0|eR(e,s)?ev(a,t,i,2,r):eb(a,t,i,2,r),s=0):s=6,I=o,0|s}function ey(e,t,r,i,s){e|=0,t|=0,r|=0,i|=0,s|=0;var o,l,h,p=0,f=0,v=0;if((p=+(l=0,h=0,+c(+((h=+a[(o=0|e)>>3])*h+(l=+a[o+8>>3])*l))))<1e-16){t=15600+(t<<4)|0,n[s>>2]=n[t>>2],n[s+4>>2]=n[t+4>>2],n[s+8>>2]=n[t+8>>2],n[s+12>>2]=n[t+12>>2];return}if(f=+y(+a[e+8>>3],+a[e>>3]),(0|r)>0){e=0;do p*=.37796447300922725,e=e+1|0;while((0|e)!=(0|r))}v=.3333333333333333*p,i?p=+g(+(((r=(0|eF(r))==0)?v:.37796447300922725*v)*.381966011250105)):(p=+g(+(.381966011250105*p)),0|eF(r)&&(f=+eW(f+.3334731722518321))),function(e,t,r,i){e|=0,t*=1,i|=0;var s=0,o=0,l=0,c=0;if((r*=1)<1e-16){n[i>>2]=n[e>>2],n[i+4>>2]=n[e+4>>2],n[i+8>>2]=n[e+8>>2],n[i+12>>2]=n[e+12>>2];return}o=t<0?t+6.283185307179586:t,o=t>=6.283185307179586?o+-6.283185307179586:o;do if(o<1e-16)t=+a[e>>3]+r,a[i>>3]=t,s=i;else{if(s=1e-16>+u(+(o+-3.141592653589793)),t=+a[e>>3],s){t-=r,a[i>>3]=t,s=i;break}if(l=+d(+r),r=+A(+r),t=+m(+((t=(t=l*A(+t)+d(+o)*(r*d(+t)))>1?1:t)<-1?-1:t)),a[i>>3]=t,1e-16>+u(+(t+-1.5707963267948966))){a[i>>3]=1.5707963267948966,a[i+8>>3]=0;return}if(1e-16>+u(+(t+1.5707963267948966))){a[i>>3]=-1.5707963267948966,a[i+8>>3]=0;return}if(c=1/d(+t),o=r*A(+o)*c,r=+a[e>>3],t=c*((l-A(+t)*A(+r))/d(+r)),l=o>1?1:o,t=t>1?1:t,(t=+a[e+8>>3]+ +y(+(l<-1?-1:l),+(t<-1?-1:t)))>3.141592653589793)do t+=-6.283185307179586;while(t>3.141592653589793)if(t<-3.141592653589793)do t+=6.283185307179586;while(t<-3.141592653589793)a[i+8>>3]=t;return}while(0)if(1e-16>+u(+(t+-1.5707963267948966))){a[s>>3]=1.5707963267948966,a[i+8>>3]=0;return}if(1e-16>+u(+(t+1.5707963267948966))){a[s>>3]=-1.5707963267948966,a[i+8>>3]=0;return}if((t=+a[e+8>>3])>3.141592653589793)do t+=-6.283185307179586;while(t>3.141592653589793)if(t<-3.141592653589793)do t+=6.283185307179586;while(t<-3.141592653589793)a[i+8>>3]=t}(15600+(t<<4)|0,+eW(a[15920+(24*t|0)>>3]-f),p,s)}function ev(e,t,r,i,s){e|=0,t|=0,r|=0,i|=0,s|=0;var o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,w=0,E=0,C=0,R=0,N=0,P=0,L=0,D=0,B=0,F=0;if(D=I,I=I+272|0,o=D+256|0,x=D+240|0,N=D,P=D+224|0,L=D+208|0,_=D+176|0,b=D+160|0,S=D+192|0,T=D+144|0,w=D+128|0,E=D+112|0,C=D+96|0,R=D+80|0,n[o>>2]=t,n[x>>2]=n[e>>2],n[x+4>>2]=n[e+4>>2],n[x+8>>2]=n[e+8>>2],n[x+12>>2]=n[e+12>>2],ex(x,o,N),n[s>>2]=0,(0|(x=i+r+((0|i)==5&1)|0))<=(0|r)){I=D;return}c=0|n[o>>2],h=P+4|0,d=_+4|0,A=r+5|0,p=16880+(c<<2)|0,f=16960+(c<<2)|0,m=w+8|0,g=E+8|0,y=C+8|0,v=L+4|0,u=r;e:for(;;){l=N+((0|u)%5<<4)|0,n[L>>2]=n[l>>2],n[L+4>>2]=n[l+4>>2],n[L+8>>2]=n[l+8>>2],n[L+12>>2]=n[l+12>>2];do;while((0|e_(L,c,0,1))==2)if((0|u)>(0|r)&(0|eF(t))!=0){if(n[_>>2]=n[L>>2],n[_+4>>2]=n[L+4>>2],n[_+8>>2]=n[L+8>>2],n[_+12>>2]=n[L+12>>2],ee(h,b),i=0|n[_>>2],o=0|n[17040+(80*i|0)+(n[P>>2]<<2)>>2],n[_>>2]=n[18640+(80*i|0)+(20*o|0)>>2],(0|(l=0|n[18640+(80*i|0)+(20*o|0)+16>>2]))>0){e=0;do eu(d),e=e+1|0;while((0|e)<(0|l))}switch(l=18640+(80*i|0)+(20*o|0)+4|0,n[S>>2]=n[l>>2],n[S+4>>2]=n[l+4>>2],n[S+8>>2]=n[l+8>>2],ei(S,(0|n[p>>2])*3|0),et(d,S,d),J(d),ee(d,T),B=+(0|n[f>>2]),a[w>>3]=3*B,a[m>>3]=0,F=-1.5*B,a[E>>3]=F,a[g>>3]=2.598076211353316*B,a[C>>3]=F,a[y>>3]=-2.598076211353316*B,0|n[17040+((0|n[_>>2])*80|0)+(n[L>>2]<<2)>>2]){case 1:e=E,i=w;break;case 3:e=C,i=E;break;case 2:e=w,i=C;break;default:e=12;break e}ts(b,T,i,e,R),ey(R,0|n[_>>2],c,1,s+8+(n[s>>2]<<4)|0),n[s>>2]=(0|n[s>>2])+1}if((0|u)<(0|A)&&(ee(v,_),ey(_,0|n[L>>2],c,1,s+8+(n[s>>2]<<4)|0),n[s>>2]=(0|n[s>>2])+1),n[P>>2]=n[L>>2],n[P+4>>2]=n[L+4>>2],n[P+8>>2]=n[L+8>>2],n[P+12>>2]=n[L+12>>2],(0|(u=u+1|0))>=(0|x)){e=3;break}}if((0|e)==3){I=D;return}(0|e)==12&&M(26970,27017,572,27027)}function ex(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0,l=0,u=0;u=I,I=I+128|0,i=u+64|0,a=u,o=20240,l=(s=i)+60|0;do n[s>>2]=n[o>>2],s=s+4|0,o=o+4|0;while((0|s)<(0|l))o=20304,l=(s=a)+60|0;do n[s>>2]=n[o>>2],s=s+4|0,o=o+4|0;while((0|s)<(0|l))i=(l=(0|eF(0|n[t>>2]))==0)?i:a,eA(a=e+4|0),ep(a),0|eF(0|n[t>>2])&&(eo(a),n[t>>2]=(0|n[t>>2])+1),n[r>>2]=n[e>>2],et(a,i,t=r+4|0),J(t),n[r+16>>2]=n[e>>2],et(a,i+12|0,t=r+20|0),J(t),n[r+32>>2]=n[e>>2],et(a,i+24|0,t=r+36|0),J(t),n[r+48>>2]=n[e>>2],et(a,i+36|0,t=r+52|0),J(t),n[r+64>>2]=n[e>>2],et(a,i+48|0,r=r+68|0),J(r),I=u}function e_(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a,s,o,l,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0;if(v=I,I=I+32|0,g=v+12|0,d=v,y=e+4|0,m=0|n[16960+(t<<2)>>2],m=(f=(0|i)!=0)?3*m|0:m,u=0|n[y>>2],h=0|n[(p=e+8|0)>>2],f){if((0|(u=h+u+(i=0|n[(c=e+12|0)>>2])|0))==(0|m))return y=1,I=v,0|y;A=c}else u=h+u+(i=0|n[(A=e+12|0)>>2])|0;if((0|u)<=(0|m))return y=0,I=v,0|y;do if((0|i)>0){if(i=0|n[e>>2],(0|h)>0){c=18640+(80*i|0)+60|0,i=e;break}i=18640+(80*i|0)+40|0,r&&(a=g,o=0,l=0,s=0|m,o|=0,l|=0,n[(a|=0)>>2]=s,n[a+4>>2]=o,n[a+8>>2]=l,er(y,g,d),ec(d),et(d,g,y)),c=i,i=e}else c=18640+((0|n[e>>2])*80|0)+20|0,i=e;while(0)if(n[i>>2]=n[c>>2],(0|n[(u=c+16|0)>>2])>0){i=0;do eu(y),i=i+1|0;while((0|i)<(0|n[u>>2]))}return e=c+4|0,n[g>>2]=n[e>>2],n[g+4>>2]=n[e+4>>2],n[g+8>>2]=n[e+8>>2],t=0|n[16880+(t<<2)>>2],ei(g,f?3*t|0:t),et(y,g,y),J(y),y=i=f&&((0|n[p>>2])+(0|n[y>>2])+(0|n[A>>2])|0)==(0|m)?1:2,I=v,0|y}function eb(e,t,r,i,s){e|=0,t|=0,r|=0,i|=0,s|=0;var o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,w=0,E=0,C=0,R=0,N=0;if(C=I,I=I+240|0,o=C+224|0,S=C+208|0,T=C,w=C+192|0,E=C+176|0,y=C+160|0,v=C+144|0,x=C+128|0,_=C+112|0,b=C+96|0,n[o>>2]=t,n[S>>2]=n[e>>2],n[S+4>>2]=n[e+4>>2],n[S+8>>2]=n[e+8>>2],n[S+12>>2]=n[e+12>>2],eS(S,o,T),n[s>>2]=0,(0|(g=i+r+((0|i)==6&1)|0))<=(0|r)){I=C;return}c=0|n[o>>2],h=r+6|0,d=16960+(c<<2)|0,A=v+8|0,p=x+8|0,f=_+8|0,m=w+4|0,l=0,u=r,i=-1;e:for(;;){if(e=T+((o=(0|u)%6|0)<<4)|0,n[w>>2]=n[e>>2],n[w+4>>2]=n[e+4>>2],n[w+8>>2]=n[e+8>>2],n[w+12>>2]=n[e+12>>2],e=l,l=0|e_(w,c,0,1),(0|u)>(0|r)&(0|eF(t))!=0&&(0|e)!=1?(0|n[w>>2])!=(0|i):0){switch(ee(T+((o+5|0)%6<<4)+4|0,E),ee(T+(o<<4)+4|0,y),R=+(0|n[d>>2]),a[v>>3]=3*R,a[A>>3]=0,N=-1.5*R,a[x>>3]=N,a[p>>3]=2.598076211353316*R,a[_>>3]=N,a[f>>3]=-2.598076211353316*R,o=0|n[S>>2],0|n[17040+(80*o|0)+(((0|i)==(0|o)?0|n[w>>2]:i)<<2)>>2]){case 1:e=x,i=v;break;case 3:e=_,i=x;break;case 2:e=v,i=_;break;default:e=8;break e}ts(E,y,i,e,b),(0|to(E,b)?0:!(0|to(y,b)))&&(ey(b,0|n[S>>2],c,1,s+8+(n[s>>2]<<4)|0),n[s>>2]=(0|n[s>>2])+1)}if((0|u)<(0|h)&&(ee(m,E),ey(E,0|n[w>>2],c,1,s+8+(n[s>>2]<<4)|0),n[s>>2]=(0|n[s>>2])+1),(0|(u=u+1|0))>=(0|g)){e=3;break}i=0|n[w>>2]}if((0|e)==3){I=C;return}(0|e)==8&&M(27054,27017,737,27099)}function eS(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0,l=0,u=0;u=I,I=I+160|0,i=u+80|0,a=u,o=20368,l=(s=i)+72|0;do n[s>>2]=n[o>>2],s=s+4|0,o=o+4|0;while((0|s)<(0|l))o=20448,l=(s=a)+72|0;do n[s>>2]=n[o>>2],s=s+4|0,o=o+4|0;while((0|s)<(0|l))i=(l=(0|eF(0|n[t>>2]))==0)?i:a,eA(a=e+4|0),ep(a),0|eF(0|n[t>>2])&&(eo(a),n[t>>2]=(0|n[t>>2])+1),n[r>>2]=n[e>>2],et(a,i,t=r+4|0),J(t),n[r+16>>2]=n[e>>2],et(a,i+12|0,t=r+20|0),J(t),n[r+32>>2]=n[e>>2],et(a,i+24|0,t=r+36|0),J(t),n[r+48>>2]=n[e>>2],et(a,i+36|0,t=r+52|0),J(t),n[r+64>>2]=n[e>>2],et(a,i+48|0,t=r+68|0),J(t),n[r+80>>2]=n[e>>2],et(a,i+60|0,r=r+84|0),J(r),I=u}function eT(e,t){return e|=0,t|=0,t=0|tC(0|e,0|t,45),w(),127&t}function ew(e,t){e|=0;var r=0,n=0,a=0,s=0,o=0;return!0&(-0x1000000&(t|=0))==0x8000000?(n=0|tC(0|e,0|t,52),w(),n&=15,r=0|tC(0|e,0|t,45),w(),(r&=127)>>>0>121)?0|(e=0):(s=0|tx(-0x4924924a,-1171,0|(o=0|tR(0|(a=0|tC(0|e,0|t,0|(o=(15^n)*3|0))),0|w(),0|o)),0|(a=0|w())),(0x24924924&o&s)==0&(4681&a&w())==0&&(o=0|tC(0|(s=0|tR(~e,~t,0|(o=(3*n|0)+19|0))),0|w(),0|o),(0|n)==15|(0|o)==0&(0|w())==0))?0|i[20528+r|0]?(0|e)==0&(0|(t&=8191))==0?0|(o=1):(o=0|tN(0|e,0|t,0),w(),((63-o|0)%3|0)!=0|0):0|(o=1):0|(o=0):0|(e=0)}function eM(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0;if(a=0|tR(0|t,0,52),s=0|w(),r=0|tR(0|r,0,45),r=s|w()|0x8001fff,(0|t)<1){s=-1,i=r,n[(t=e)>>2]=s,n[(e=e+4|0)>>2]=i;return}for(s=1,a=-1;l=0|tR(7,0,0|(o=(15-s|0)*3|0)),r&=~(0|w()),a=a&~l|(o=0|tR(0|i,0,0|o)),r|=w(),(0|s)!=(0|t);)s=s+1|0;n[(o=l=e)>>2]=a,n[(l=l+4|0)>>2]=r}function eE(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0;if(s=0|tC(0|e,0|t,52),w(),s&=15,r>>>0>15)return 0|(i=4);if((0|s)<(0|r))return 0|(i=12);if((0|s)==(0|r))return n[i>>2]=e,n[i+4>>2]=t,0|(i=0);if(a=tR(0|r,0,52)|e,e=w()|-0xf00001&t,(0|s)>(0|r))do t=0|tR(7,0,(14-r|0)*3|0),r=r+1|0,a|=t,e=w()|e;while((0|r)<(0|s))return n[i>>2]=a,n[i+4>>2]=e,0|(i=0)}function eC(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0;if(s=0|tC(0|e,0|t,52),w(),!((0|r)<16&(0|(s&=15))<=(0|r)))return 0|(i=4);a=r-s|0,r=0|tC(0|e,0|t,45),w();e:do if(0|V(127&r)){t:do if(0|s){for(r=1;((o=0|tR(7,0,(15-r|0)*3|0))&e)==0&(w()&t)==0;)if(r>>>0<s>>>0)r=r+1|0;else break t;r=0|e4(7,0,a,((0|a)<0)<<31>>31),a=0|w();break e}while(0)r=0|tS(0|(r=0|tv(0|(r=0|tT(0|(r=0|e4(7,0,a,((0|a)<0)<<31>>31)),0|w(),5,0)),0|w(),-5,-1)),0|w(),6,0),r=0|tv(0|r,0|w(),1,0),a=0|w()}else r=0|e4(7,0,a,((0|a)<0)<<31>>31),a=0|w();while(0)return n[(o=i)>>2]=r,n[o+4>>2]=a,0|(o=0)}function eR(e,t){e|=0,t|=0;var r=0,i=0,n=0;if(n=0|tC(0|e,0|t,45),w(),!(0|V(127&n)))return 0|(n=0);n=0|tC(0|e,0|t,52),w(),n&=15;e:do if(n)for(i=1;;){if(r=0|tC(0|e,0|t,(15-i|0)*3|0),w(),0|(r&=7))break e;if(i>>>0<n>>>0)i=i+1|0;else{r=0;break}}else r=0;while(0)return 0|(n=(0|r)==0&1)}function eN(e,t,r,i){return(e|=0,t|=0,(0|(i|=0))<(0|(r|=0)))?(r=t,i=e):(r=0|tR(-1,-1,((i-r|0)*3|0)+3|0),i=0|tR(~r,~(0|w()),(15-i|0)*3|0),r=~(0|w())&t,i=~i&e),T(0|r),0|i}function eP(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0;return(a=0|tC(0|e,0|t,52),w(),(0|r)<16&(0|(a&=15))<=(0|r))?((0|a)<(0|r)&&(a=0|tR(-1,-1,((r+-1-a|0)*3|0)+3|0),a=0|tR(~a,~(0|w()),(15-r|0)*3|0),t=~(0|w())&t,e=~a&e),a=0|tR(0|r,0,52),r=-0xf00001&t|w(),n[i>>2]=e|a,n[i+4>>2]=r,0|(i=0)):0|(i=4)}function eI(e,t){e|=0,t|=0;var r=0,i=0,n=0;if(n=0|tC(0|e,0|t,52),w(),!(n&=15))return 0|(n=0);for(i=1;;){if(r=0|tC(0|e,0|t,(15-i|0)*3|0),w(),0|(r&=7)){i=5;break}if(i>>>0<n>>>0)i=i+1|0;else{r=0,i=5;break}}return(0|i)==5?0|r:0}function eL(e,t){e|=0,t|=0;var r=0,i=0,n=0,a=0,s=0,o=0,l=0;if(l=0|tC(0|e,0|t,52),w(),!(l&=15))return o=t,l=e,T(0|o),0|l;for(o=1,r=0;;){i=0|tR(7,0,0|(a=(15-o|0)*3|0)),n=0|w(),s=0|tC(0|e,0|t,0|a),w(),a=0|tR(0|eh(7&s),0,0|a),s=0|w(),e=a|e&~i,t=s|t&~n;e:do if(!r)if((a&i)==0&(s&n)==0)r=0;else if(i=0|tC(0|e,0|t,52),w(),i&=15){r=1;t:for(;;){switch(s=0|tC(0|e,0|t,(15-r|0)*3|0),w(),7&s){case 1:break t;case 0:break;default:r=1;break e}if(r>>>0<i>>>0)r=r+1|0;else{r=1;break e}}for(r=1;;)if(n=0|tC(0|e,0|t,0|(s=(15-r|0)*3|0)),w(),a=0|tR(7,0,0|s),t&=~(0|w()),e=e&~a|(s=0|tR(0|eh(7&n),0,0|s)),t|=w(),r>>>0<i>>>0)r=r+1|0;else{r=1;break}}else r=1;while(0)if(o>>>0<l>>>0)o=o+1|0;else break}return T(0|t),0|e}function eD(e,t){e|=0,t|=0;var r=0,i=0,n=0,a=0,s=0;if(i=0|tC(0|e,0|t,52),w(),!(i&=15))return r=t,i=e,T(0|r),0|i;for(r=1;;)if(s=0|tC(0|e,0|t,0|(a=(15-r|0)*3|0)),w(),n=0|tR(7,0,0|a),t&=~(0|w()),e=(a=0|tR(0|eh(7&s),0,0|a))|e&~n,t=w()|t,r>>>0<i>>>0)r=r+1|0;else break;return T(0|t),0|e}function eB(e,t){e|=0,t|=0;var r=0,i=0,n=0,a=0,s=0;if(i=0|tC(0|e,0|t,52),w(),!(i&=15))return r=t,i=e,T(0|r),0|i;for(r=1;;)if(a=0|tR(7,0,0|(s=(15-r|0)*3|0)),n=t&~(0|w()),t=0|tC(0|e,0|t,0|s),w(),e=(t=0|tR(0|ed(7&t),0,0|s))|e&~a,t=w()|n,r>>>0<i>>>0)r=r+1|0;else break;return T(0|t),0|e}function eF(e){return(0|(e|=0))%2|0}function eO(e,t,r){e|=0,t|=0,r|=0;var i,s,o,l,c,h=0,m=0;return(m=I,I=I+16|0,h=m,t>>>0>15)?(h=4,I=m,0|h):(0x7ff00000&n[e+4>>2])==0x7ff00000||(0x7ff00000&n[e+8+4>>2])==0x7ff00000?(h=3,I=m,0|h):(i=0|e,s=0|t,o=0|h,l=0,c=0,l=I,I=I+16|0,function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var s,o,l,u,c,h,m,g=0,v=0,x=0,_=0,b=0;if(_=I,I=I+16|0,function(e,t,r){e|=0,t|=0,r|=0;var i,s,o,l,u,c=0,h=0,p=0;if(p=I,I=I+32|0,i=e,s=h=p,i|=0,s|=0,o=0,l=0,u=0,l=+d(+(o=+a[i>>3])),o=+A(+o),a[s+16>>3]=o,u=l*d(+(o=+a[i+8>>3])),a[s>>3]=u,o=l*A(+o),a[s+8>>3]=o,n[t>>2]=0,a[r>>3]=5,(c=+tl(16400,h))<+a[r>>3]&&(n[t>>2]=0,a[r>>3]=c),(c=+tl(16424,h))<+a[r>>3]&&(n[t>>2]=1,a[r>>3]=c),(c=+tl(16448,h))<+a[r>>3]&&(n[t>>2]=2,a[r>>3]=c),(c=+tl(16472,h))<+a[r>>3]&&(n[t>>2]=3,a[r>>3]=c),(c=+tl(16496,h))<+a[r>>3]&&(n[t>>2]=4,a[r>>3]=c),(c=+tl(16520,h))<+a[r>>3]&&(n[t>>2]=5,a[r>>3]=c),(c=+tl(16544,h))<+a[r>>3]&&(n[t>>2]=6,a[r>>3]=c),(c=+tl(16568,h))<+a[r>>3]&&(n[t>>2]=7,a[r>>3]=c),(c=+tl(16592,h))<+a[r>>3]&&(n[t>>2]=8,a[r>>3]=c),(c=+tl(16616,h))<+a[r>>3]&&(n[t>>2]=9,a[r>>3]=c),(c=+tl(16640,h))<+a[r>>3]&&(n[t>>2]=10,a[r>>3]=c),(c=+tl(16664,h))<+a[r>>3]&&(n[t>>2]=11,a[r>>3]=c),(c=+tl(16688,h))<+a[r>>3]&&(n[t>>2]=12,a[r>>3]=c),(c=+tl(16712,h))<+a[r>>3]&&(n[t>>2]=13,a[r>>3]=c),(c=+tl(16736,h))<+a[r>>3]&&(n[t>>2]=14,a[r>>3]=c),(c=+tl(16760,h))<+a[r>>3]&&(n[t>>2]=15,a[r>>3]=c),(c=+tl(16784,h))<+a[r>>3]&&(n[t>>2]=16,a[r>>3]=c),(c=+tl(16808,h))<+a[r>>3]&&(n[t>>2]=17,a[r>>3]=c),(c=+tl(16832,h))<+a[r>>3]&&(n[t>>2]=18,a[r>>3]=c),!((c=+tl(16856,h))<+a[r>>3])){I=p;return}n[t>>2]=19,a[r>>3]=c,I=p}(e,r,b=_),(v=+f(+(1-.5*a[b>>3])))<1e-16){n[i>>2]=0,n[i+4>>2]=0,n[i+8>>2]=0,n[i+12>>2]=0,I=_;return}if(g=+eW((g=+a[15920+(24*(b=0|n[r>>2])|0)>>3])-eW(+(s=15600+(b<<4)|0,l=0,u=0,c=0,h=0,m=0,m=(u=+d(+(h=+a[(o=0|e)>>3])))*A(+(c=a[o+8>>3]-a[s+8>>3])),l=+a[s>>3],+y(+m,+(A(+h)*d(+l)-d(+c)*(u*A(+l))))))),x=0|eF(t)?+eW(g+-.3334731722518321):g,g=2.618033988749896*p(+v),(0|t)>0){e=0;do g*=2.6457513110645907,e=e+1|0;while((0|e)!=(0|t))}v=d(+x)*g,a[i>>3]=v,x=A(+x)*g,a[i+8>>3]=x,I=_}(i,s,o,c=l),function(e,t){e|=0,t|=0;var r=0,i=0,s=0,o=0,l=0,c=0,h=0,d=0,A=0,p=0,f=0;n[(p=t+8|0)>>2]=0,r=~~(l=+u(+(h=+a[e>>3]))+.5*(c=1.1547005383792515*u(+(d=+a[e+8>>3])))),e=~~c,l-=0|r,c-=0|e;do{if(l<.5)if(l<.3333333333333333){if(n[t>>2]=r,c<(l+1)*.5){n[t+4>>2]=e;break}e=e+1|0,n[t+4>>2]=e;break}else{if(e=(1&!(c<(f=1-l)))+e|0,n[t+4>>2]=e,f<=c&c<2*l){r=r+1|0,n[t>>2]=r;break}n[t>>2]=r;break}if(!(l<.6666666666666666)){if(r=r+1|0,n[t>>2]=r,c<.5*l){n[t+4>>2]=e;break}e=e+1|0,n[t+4>>2]=e;break}if(c<1-l){if(n[t+4>>2]=e,2*l+-1<c){n[t>>2]=r;break}}else e=e+1|0,n[t+4>>2]=e;r=r+1|0,n[t>>2]=r}while(0)do if(h<0)if(1&e){A=0|tx(0|r,((0|r)<0)<<31>>31,0|(A=(e+1|0)/2|0),((0|A)<0)<<31>>31),r=~~((0|r)-((+(A>>>0)+0x100000000*(0|w()))*2+1)),n[t>>2]=r;break}else{A=0|tx(0|r,((0|r)<0)<<31>>31,0|(A=(0|e)/2|0),((0|A)<0)<<31>>31),r=~~((0|r)-(+(A>>>0)+0x100000000*(0|w()))*2),n[t>>2]=r;break}while(0)A=t+4|0,d<0&&(r=r-((e<<1|1)/2|0)|0,n[t>>2]=r,e=0-e|0,n[A>>2]=e),i=e-r|0,(0|r)<0?(s=0-r|0,n[A>>2]=i,n[p>>2]=s,n[t>>2]=0,e=i,r=0):s=0,(0|e)<0&&(r=r-e|0,n[t>>2]=r,s=s-e|0,n[p>>2]=s,n[A>>2]=0,e=0),o=r-s|0,i=e-s|0,(0|s)<0&&(n[t>>2]=o,n[A>>2]=i,n[p>>2]=0,e=i,r=o,s=0),(0|(i=(0|s)<(0|(i=(0|e)<(0|r)?e:r))?s:i))<=0||(n[t>>2]=r-i,n[A>>2]=e-i,n[p>>2]=s-i)}(c,o+4|0),I=l,t=0|function(e,t){e|=0,t|=0;var r,i=0,a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0;if(c=I,I=I+64|0,u=c+40|0,a=c+24|0,s=c+12|0,o=c,tR(0|t,0,52),i=0x8001fff|w(),!t)return(0|n[e+4>>2])>2||(0|n[e+8>>2])>2||(0|n[e+12>>2])>2?(u=0,T(0|(l=0))):(tR(0|G(e),0,45),l=w()|i,u=-1,T(0|l)),I=c,0|u;if(n[u>>2]=n[e>>2],n[u+4>>2]=n[e+4>>2],n[u+8>>2]=n[e+8>>2],n[u+12>>2]=n[e+12>>2],l=u+4|0,(0|t)>0)for(e=-1;;)if(n[a>>2]=n[l>>2],n[a+4>>2]=n[l+4>>2],n[a+8>>2]=n[l+8>>2],1&t?(!function(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;r=0|n[(o=e+8|0)>>2],i=0|tf(((3*(t=(0|n[e>>2])-r|0)|0)-(r=(0|n[(l=e+4|0)>>2])-r|0)|0)*.14285714285714285),n[e>>2]=i,t=0|tf(((r<<1)+t|0)*.14285714285714285),n[l>>2]=t,n[o>>2]=0,r=t-i|0,(0|i)<0?(s=0-i|0,n[l>>2]=r,n[o>>2]=s,n[e>>2]=0,t=r,i=0,r=s):r=0,(0|t)<0&&(i=i-t|0,n[e>>2]=i,r=r-t|0,n[o>>2]=r,n[l>>2]=0,t=0),s=i-r|0,a=t-r|0,(0|r)<0?(n[e>>2]=s,n[l>>2]=a,n[o>>2]=0,t=a,a=s,r=0):a=i,(0|(i=(0|r)<(0|(i=(0|t)<(0|a)?t:a))?r:i))<=0||(n[e>>2]=a-i,n[l>>2]=t-i,n[o>>2]=r-i)}(l),n[s>>2]=n[l>>2],n[s+4>>2]=n[l+4>>2],n[s+8>>2]=n[l+8>>2],es(s)):(ea(l),n[s>>2]=n[l>>2],n[s+4>>2]=n[l+4>>2],n[s+8>>2]=n[l+8>>2],eo(s)),er(a,s,o),J(o),h=0|tR(7,0,0|(d=(15-t|0)*3|0)),i&=~(0|w()),e=(d=0|tR(0|en(o),0,0|d))|e&~h,i=w()|i,(0|t)>1)t=t+-1|0;else break;else e=-1;e:do if(((0|n[l>>2])<=2?(0|n[u+8>>2])<=2:0)?(0|n[u+12>>2])<=2:0){if(t=tR(0|(a=0|G(u)),0,45)|e,e=w()|-1040385&i,o=0|n[11120+((0|n[(r=0|u)>>2])*216|0)+((0|n[r+4>>2])*72|0)+((0|n[r+8>>2])*24|0)+(n[r+12>>2]<<3)+4>>2],!(0|V(a))){if((0|o)<=0)break;for(s=0;;){if(a=0|tC(0|t,0|e,52),w(),a&=15)for(i=1;;)if(u=0|tC(0|t,0|e,0|(d=(15-i|0)*3|0)),w(),h=0|tR(7,0,0|d),e&=~(0|w()),t=t&~h|(d=0|tR(0|eh(7&u),0,0|d)),e|=w(),i>>>0<a>>>0)i=i+1|0;else break;if((0|(s=s+1|0))==(0|o))break e}}s=0|tC(0|t,0|e,52),w(),s&=15;t:do if(s){i=1;u:for(;;){switch(d=0|tC(0|t,0|e,(15-i|0)*3|0),w(),7&d){case 1:break u;case 0:break;default:break t}if(i>>>0<s>>>0)i=i+1|0;else break t}if(0|H(a,0|n[u>>2]))for(i=1;;)if(h=0|tR(7,0,0|(u=(15-i|0)*3|0)),d=e&~(0|w()),e=0|tC(0|t,0|e,0|u),w(),t=t&~h|(e=0|tR(0|ed(7&e),0,0|u)),e=d|w(),i>>>0<s>>>0)i=i+1|0;else break;else for(i=1;;)if(u=0|tC(0|t,0|e,0|(d=(15-i|0)*3|0)),w(),h=0|tR(7,0,0|d),e&=~(0|w()),t=t&~h|(d=0|tR(0|eh(7&u),0,0|d)),e|=w(),i>>>0<s>>>0)i=i+1|0;else break}while(0)if((0|o)>0){i=0;do t=0|eL(t,e),e=0|w(),i=i+1|0;while((0|i)!=(0|o))}}else t=0,e=0;while(0)return h=e,d=t,T(0|h),I=c,0|d}(h,t),h=0|w(),n[r>>2]=t,n[r+4>>2]=h,(0|t)==0&(0|h)==0&&M(27795,27122,959,27145),h=0,I=m,0|h)}function eU(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0;if(a=r+4|0,s=0|tC(0|e,0|t,52),w(),s&=15,o=0|tC(0|e,0|t,45),w(),i=(0|s)==0,0|V(127&o))if(i)return 0|(o=1);else i=1;else{if(i)return 0|(o=0);i=((0|n[a>>2])==0?(0|n[r+8>>2])==0:0)?(0|n[r+12>>2])!=0&1:1}for(r=1;;)if(1&r?es(a):eo(a),o=0|tC(0|e,0|t,(15-r|0)*3|0),w(),el(a,7&o),r>>>0<s>>>0)r=r+1|0;else break;return 0|i}function ek(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0,l=0,u=0,c=0,h=0;if(h=I,I=I+16|0,u=h,c=0|tC(0|e,0|t,45),w(),(c&=127)>>>0>121)return n[r>>2]=0,n[r+4>>2]=0,n[r+8>>2]=0,n[r+12>>2]=0,c=5,I=h,0|c;e:do if((0|V(c))!=0?(s=0|tC(0|e,0|t,52),w(),(0|(s&=15))!=0):0){i=1;t:for(;;){switch(l=0|tC(0|e,0|t,(15-i|0)*3|0),w(),7&l){case 5:break t;case 0:break;default:i=t;break e}if(i>>>0<s>>>0)i=i+1|0;else{i=t;break e}}for(a=1,i=t;;)if(o=0|tR(7,0,0|(t=(15-a|0)*3|0)),l=i&~(0|w()),i=0|tC(0|e,0|i,0|t),w(),e=e&~o|(i=0|tR(0|ed(7&i),0,0|t)),i=l|w(),a>>>0<s>>>0)a=a+1|0;else break}else i=t;while(0)if(l=7696+(28*c|0)|0,n[r>>2]=n[l>>2],n[r+4>>2]=n[l+4>>2],n[r+8>>2]=n[l+8>>2],n[r+12>>2]=n[l+12>>2],!(0|eU(e,i,r)))return c=0,I=h,0|c;if(o=r+4|0,n[u>>2]=n[o>>2],n[u+4>>2]=n[o+4>>2],n[u+8>>2]=n[o+8>>2],s=0|tC(0|e,0|i,52),w(),l=15&s,1&s?(eo(o),s=l+1|0):s=l,0|V(c)){u:do if(l)for(t=1;;){if(a=0|tC(0|e,0|i,(15-t|0)*3|0),w(),0|(a&=7)){i=a;break u}if(t>>>0<l>>>0)t=t+1|0;else{i=0;break}}else i=0;while(0)i=(0|i)==4&1}else i=0;if(0|e_(r,s,i,0)){if(0|V(c))do;while((0|e_(r,s,0,0))!=0)(0|s)!=(0|l)&&ea(o)}else(0|s)!=(0|l)&&(n[o>>2]=n[u>>2],n[o+4>>2]=n[u+4>>2],n[o+8>>2]=n[u+8>>2]);return c=0,I=h,0|c}function ez(e,t,r){e|=0,t|=0,r|=0;var i,a,s,o,l,u=0,c=0,h=0;return(h=I,I=I+16|0,0|(c=0|ek(e,t,u=h)))?(I=h,0|c):(c=0|tC(0|e,0|t,52),w(),i=0|u,a=15&c,s=0|r,o=0,l=0,o=I,I=I+16|0,ee(i+4|0,l=o),ey(l,0|n[i>>2],a,0,s),I=o,c=0,I=h,0|c)}function eV(e,t,r){e|=0,t|=0,r|=0;var i=0,n=0,a=0,s=0,o=0;if(s=I,I=I+16|0,0|(i=0|ek(e,t,a=s)))return a=i,I=s,0|a;i=0|tC(0|e,0|t,45),w(),i=(0|V(127&i))==0,n=0|tC(0|e,0|t,52),w(),n&=15;e:do if(!i){if(0|n)for(i=1;;){if(!(((o=0|tR(7,0,(15-i|0)*3|0))&e)==0&(w()&t)==0))break e;if(i>>>0<n>>>0)i=i+1|0;else break}return ev(a,n,0,5,r),o=0,I=s,0|o}while(0)return eb(a,n,0,6,r),o=0,I=s,0|o}function eq(e,t){t|=0;var r=0,i=0,a=0,s=0,o=0,l=0,u=0;if((e|=0)>>>0>15)return 0|(l=4);if(tR(0|e,0,52),l=0x8001fff|w(),!e){r=0,i=0;do 0|V(i)&&(tR(0|i,0,45),o=l|w(),n[(e=t+(r<<3)|0)>>2]=-1,n[e+4>>2]=o,r=r+1|0),i=i+1|0;while((0|i)!=122)return 0|(r=0)}r=0,o=0;do{if(0|V(o)){for(tR(0|o,0,45),i=1,a=-1,s=l|w();a&=~(u=0|tR(7,0,(15-i|0)*3|0)),s&=~(0|w()),(0|i)!=(0|e);)i=i+1|0;n[(u=t+(r<<3)|0)>>2]=a,n[u+4>>2]=s,r=r+1|0}o=o+1|0}while((0|o)!=122)return 0|(r=0)}function eG(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0;a=0|tC(0|t,0|r,52),w(),(0|i)>15|(0|(a&=15))>(0|i)|(0|t)==0&(0|r)==0?(s=-1,t=-1,r=0,a=0):(t=0|eN(t,r,a+1|0,i),o=-0xf00001&w(),r=tR(0|i,0,52)|t,o|=w(),t=(0|eR(r,o))==0,s=a,t=t?-1:i,a=o),n[(o=e)>>2]=r,n[o+4>>2]=a,n[e+8>>2]=s,n[e+12>>2]=t}function eH(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0;if(a=0|tC(0|e,0|t,52),w(),a&=15,n[(s=i+8|0)>>2]=a,(0|r)>15|(0|a)>(0|r)|(0|e)==0&(0|t)==0){n[(r=i)>>2]=0,n[r+4>>2]=0,n[s>>2]=-1,n[i+12>>2]=-1;return}if(e=0|eN(e,t,a+1|0,r),s=-0xf00001&w(),a=tR(0|r,0,52)|e,s|=w(),n[(e=i)>>2]=a,n[e+4>>2]=s,e=i+12|0,0|eR(a,s)){n[e>>2]=r;return}n[e>>2]=-1}function ej(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0,u=0,c=0;if(!((0|(t=0|n[(r=e)>>2]))==0&(0|(r=0|n[r+4>>2]))==0)&&(i=0|tC(0|t,0|r,52),w(),i&=15,t=0|tv(0|(l=0|tR(1,0,(15^i)*3|0)),0|w(),0|t,0|r),r=0|w(),n[(l=e)>>2]=t,n[l+4>>2]=r,!((0|i)<(0|(o=0|n[(l=e+8|0)>>2]))))){for(u=e+12|0,s=i;;){if((0|s)==(0|o)){i=5;break}if(c=(0|s)==(0|n[u>>2]),i=0|tC(0|t,0|r,0|(a=(15-s|0)*3|0)),w(),(0|(i&=7))==1&!0&c){i=7;break}if(!((0|i)==7&!0)){i=10;break}if(t=0|tv(0|t,0|r,0|(c=0|tR(1,0,0|a)),0|w()),r=0|w(),n[(c=e)>>2]=t,n[c+4>>2]=r,(0|s)>(0|o))s=s+-1|0;else{i=10;break}}if((0|i)==5){n[(c=e)>>2]=0,n[c+4>>2]=0,n[l>>2]=-1,n[u>>2]=-1;return}if((0|i)==7){o=0|tv(0|t,0|r,0|(o=0|tR(1,0,0|a)),0|w()),l=0|w(),n[(c=e)>>2]=o,n[c+4>>2]=l,n[u>>2]=s+-1;return}if((0|i)==10)return}}function eW(e){e*=1;var t=0;return t=e<0?e+6.283185307179586:e,+(!(e>=6.283185307179586)?t:t+-6.283185307179586)}function eX(e,t){return(t|=0,17453292519943298e-27>+u(+(a[(e|=0)>>3]-a[t>>3])))?0|(t=17453292519943298e-27>+u(+(a[e+8>>3]-a[t+8>>3]))):0|(t=0)}function eQ(e,t){switch(e*=1,0|(t|=0)){case 1:e=e<0?e+6.283185307179586:e;break;case 2:e=e>0?e+-6.283185307179586:e}return+e}function e$(e,t){e|=0,t|=0;var r=0,i=0,n=0,s=0;return+(2*y(+c(+(r=(s=+A(+(((n=+a[t>>3])-(i=+a[e>>3]))*.5)))*s+(r=+A(+((a[t+8>>3]-a[e+8>>3])*.5)))*(d(+n)*d(+i)*r))),+c(+(1-r)))*6371.007180918475)}function eY(e,t){return(t|=0,(e|=0)>>>0>15)?0|(t=4):(a[t>>3]=+a[20656+(e<<3)>>3],0|(t=0))}function eK(e,t){t|=0;var r=0;return(e|=0)>>>0>15?0|(t=4):(r=0|tT(0|(r=0|e4(7,0,e,((0|e)<0)<<31>>31)),0|w(),120,0),e=0|w(),n[t>>2]=2|r,n[t+4>>2]=e,0|(t=0))}function eZ(e,t,r){e|=0,t|=0,r|=0;var i=0,n=0,s=0,o=0,l=0,u=0,h=0,f=0,m=0,v=0;return u=+A(+(((v=+a[t>>3])-(f=+a[e>>3]))*.5)),o=+A(+(((s=+a[t+8>>3])-(h=+a[e+8>>3]))*.5)),l=+d(+f),o=2*y(+c(+(o=u*u+(m=+d(+v))*l*o*o)),+c(+(1-o))),v=+A(+(((u=+a[r>>3])-v)*.5)),s=+A(+(((i=+a[r+8>>3])-s)*.5)),s=2*y(+c(+(s=v*v+m*(n=+d(+u))*s*s)),+c(+(1-s))),n=(o+s+(i=2*y(+c(+(i=(u=+A(+((f-u)*.5)))*u+l*n*(i=+A(+((h-i)*.5)))*i)),+c(+(1-i)))))*.5,+(4*g(+c(+(p(+(.5*n))*p(+((n-o)*.5))*p(+((n-s)*.5))*p(+((n-i)*.5))))))}function eJ(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0,u=0;if(u=I,I=I+192|0,o=u+168|0,l=u,0|(s=0|ez(e,t,o)))return r=s,I=u,0|r;if(0|eV(e,t,l)&&M(27795,27190,415,27199),(0|(t=0|n[l>>2]))>0){if(i=+eZ(l+8|0,l+8+(((0|t)!=1&1)<<4)|0,o)+0,(0|t)!=1){e=1;do i+=+eZ(l+8+((s=e)<<4)|0,l+8+((0|(e=e+1|0))%(0|t)<<4)|0,o);while((0|e)<(0|t))}}else i=0;return a[r>>3]=i,r=0,I=u,0|r}function e0(e){var t=0,r=0,i=0,a=0;if(e|=0)for(i=1;;){if(0|(t=0|n[e>>2]))do{if(0|(r=0|n[t>>2]))do a=r,r=0|n[r+16>>2],tg(a);while((0|r)!=0)a=t,t=0|n[t+8>>2],tg(a)}while((0|t)!=0)if(t=e,e=0|n[e+8>>2],i||tg(t),e)i=0;else break}}function e1(e,t,r){e|=0;var i=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0;if(!(0|Q(t|=0,r|=0))||(t=0|X(t),i=+a[r>>3],s=t&(s=+a[r+8>>3])<0?s+6.283185307179586:s,!(e=0|n[e>>2])))return 0|(e=0);if(t){t=0,h=s,r=e;e:for(;;){for(;l=+a[r>>3],s=+a[r+8>>3],o=+a[(d=(0|(d=0|n[(r=r+16|0)>>2]))==0?e:d)>>3],u=+a[d+8>>3],l>o?(c=l,l=u):(c=o,o=l,l=s,s=u),(i=i==o|i==c?i+2220446049250313e-31:i)<o|i>c;)if(!(r=0|n[r>>2])){r=22;break e}if(h=(u=l<0?l+6.283185307179586:l)==h|(l=s<0?s+6.283185307179586:s)==h?h+-2220446049250313e-31:h,((c=u+(i-o)/(c-o)*(l-u))<0?c+6.283185307179586:c)>h&&(t^=1),!(r=0|n[r>>2])){r=22;break}}if((0|r)==22)return 0|t}else{t=0,h=s,r=e;t:for(;;){for(;l=+a[r>>3],s=+a[r+8>>3],o=+a[(d=(0|(d=0|n[(r=r+16|0)>>2]))==0?e:d)>>3],u=+a[d+8>>3],l>o?(c=l,l=u):(c=o,o=l,l=s,s=u),(i=i==o|i==c?i+2220446049250313e-31:i)<o|i>c;)if(!(r=0|n[r>>2])){r=22;break t}if(h=l==h|s==h?h+-2220446049250313e-31:h,l+(i-o)/(c-o)*(s-l)>h&&(t^=1),!(r=0|n[r>>2])){r=22;break}}if((0|r)==22)return 0|t}return 0}function e2(e,t,r,a,s){e|=0,t|=0,r|=0,a|=0,s|=0;var o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0;if(x=I,I=I+32|0,v=x+16|0,y=x,o=0|tC(0|e,0|t,52),w(),o&=15,f=0|tC(0|r,0|a,52),w(),(0|o)!=(15&f))return v=12,I=x,0|v;if(h=0|tC(0|e,0|t,45),w(),h&=127,d=0|tC(0|r,0|a,45),w(),h>>>0>121|(d&=127)>>>0>121)return v=5,I=x,0|v;if(f=(0|h)!=(0|d)){if((0|(u=0|W(h,d)))==7)return v=1,I=x,0|v;(0|(c=0|W(d,h)))==7?M(27514,27538,161,27548):(m=u,l=c)}else m=0,l=0;A=0|V(h),p=0|V(d),n[v>>2]=0,n[v+4>>2]=0,n[v+8>>2]=0,n[v+12>>2]=0;do if(m){if(u=(0|(d=0|n[4272+(28*h|0)+(m<<2)>>2]))>0,p)if(u){h=0,c=r,u=a;do c=0|function(e,t){e|=0,t|=0;var r=0,i=0,n=0,a=0,s=0,o=0,l=0;if(l=0|tC(0|e,0|t,52),w(),!(l&=15))return o=t,l=e,T(0|o),0|l;for(o=1,r=0;;){i=0|tR(7,0,0|(a=(15-o|0)*3|0)),n=0|w(),s=0|tC(0|e,0|t,0|a),w(),a=0|tR(0|ed(7&s),0,0|a),s=0|w(),e=a|e&~i,t=s|t&~n;e:do if(!r)if((a&i)==0&(s&n)==0)r=0;else if(i=0|tC(0|e,0|t,52),w(),i&=15){r=1;t:for(;;){switch(s=0|tC(0|e,0|t,(15-r|0)*3|0),w(),7&s){case 1:break t;case 0:break;default:r=1;break e}if(r>>>0<i>>>0)r=r+1|0;else{r=1;break e}}for(r=1;;)if(a=0|tR(7,0,0|(n=(15-r|0)*3|0)),s=t&~(0|w()),t=0|tC(0|e,0|t,0|n),w(),e=e&~a|(t=0|tR(0|ed(7&t),0,0|n)),t=s|w(),r>>>0<i>>>0)r=r+1|0;else{r=1;break}}else r=1;while(0)if(o>>>0<l>>>0)o=o+1|0;else break}return T(0|t),0|e}(c,u),u=0|w(),(0|(l=0|ed(l)))==1&&(l=0|ed(1)),h=h+1|0;while((0|h)!=(0|d))d=l,h=c,c=u}else d=l,h=r,c=a;else if(u){h=0,c=r,u=a;do c=0|eB(c,u),u=0|w(),l=0|ed(l),h=h+1|0;while((0|h)!=(0|d))d=l,h=c,c=u}else d=l,h=r,c=a;if(eU(h,c,v),f||M(27563,27538,191,27548),(u=(0|A)!=0)&(l=(0|p)!=0)&&M(27590,27538,192,27548),u){if((0|(l=0|eI(e,t)))==7){o=5;break}if(0|i[22e3+(7*l|0)+m|0]){o=1;break}h=c=0|n[21168+(28*l|0)+(m<<2)>>2]}else if(l){if((0|(l=0|eI(h,c)))==7){o=5;break}if(0|i[22e3+(7*l|0)+d|0]){o=1;break}h=0,c=0|n[21168+(28*d|0)+(l<<2)>>2]}else h=0,c=0;if((h|c)<0)o=5;else{if((0|c)>0){u=v+4|0,l=0;do ec(u),l=l+1|0;while((0|l)!=(0|c))}if(n[y>>2]=0,n[y+4>>2]=0,n[y+8>>2]=0,el(y,m),0|o)for(;;)if(0|eF(o)?es(y):eo(y),(0|o)>1)o=o+-1|0;else break;if((0|h)>0){o=0;do ec(y),o=o+1|0;while((0|o)!=(0|h))}et(g=v+4|0,y,g),J(g),g=51}}else if(eU(r,a,v),(0|A)!=0&(0|p)!=0)if((0|d)!=(0|h)&&M(27621,27538,261,27548),(0|(l=0|eI(e,t)))==7|(0|(o=0|eI(r,a)))==7)o=5;else if(0|i[22e3+(7*l|0)+o|0])o=1;else if((0|(l=0|n[21168+(28*l|0)+(o<<2)>>2]))>0){u=v+4|0,o=0;do ec(u),o=o+1|0;while((0|o)!=(0|l))g=51}else g=51;else g=51;while(0)return(0|g)==51&&(o=v+4|0,n[s>>2]=n[o>>2],n[s+4>>2]=n[o+4>>2],n[s+8>>2]=n[o+8>>2],o=0),v=o,I=x,0|v}function e3(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0;if(m=I,I=I+48|0,c=m+36|0,o=m+24|0,l=m+12|0,u=m,a=0|tC(0|e,0|t,52),w(),a&=15,A=0|tC(0|e,0|t,45),w(),(A&=127)>>>0>121)return i=5,I=m,0|i;if(h=0|V(A),tR(0|a,0,52),g=0x8001fff|w(),n[(s=i)>>2]=-1,n[s+4>>2]=g,!a)return(0|(a=0|en(r)))==7||(0|(a=0|j(A,a)))==127?g=1:(p=0|tR(0|a,0,45),f=0|w(),f=-1040385&n[(A=i)+4>>2]|f,n[(g=i)>>2]=n[A>>2]|p,n[g+4>>2]=f,g=0),I=m,0|g;for(n[c>>2]=n[r>>2],n[c+4>>2]=n[r+4>>2],n[c+8>>2]=n[r+8>>2],r=a;;){if(s=r,r=r+-1|0,n[o>>2]=n[c>>2],n[o+4>>2]=n[c+4>>2],n[o+8>>2]=n[c+8>>2],0|eF(s)){if(0|(a=0|function(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0,u=0,c=0;if(o=0|n[(u=e+8|0)>>2],(l=(0|n[e>>2])-o|0)>>>0>0x2aaaaaa9|(o=(0|n[(c=e+4|0)>>2])-o|0)>>>0>0x2aaaaaa9){if(i=(0|l)>0,a=0x7fffffff-l|0,s=-0x80000000-l|0,(i?(0|a)<(0|l):(0|s)>(0|l))||(r=l<<1,(i?(0x7fffffff-r|0)<(0|l):(-0x80000000-r|0)>(0|l))||((0|o)>0?(0x7fffffff-o|0)<(0|o):(-0x80000000-o|0)>(0|o)))||(t=3*l|0,r=o<<1,(i?(0|a)<(0|r):(0|s)>(0|r))?1:(0|l)>-1?(-0x80000000|t)>=(0|o):(-0x80000000^t)<(0|o)))return 0|(c=1)}else r=o<<1,t=3*l|0;return i=0|tf((t-o|0)*.14285714285714285),n[e>>2]=i,a=0|tf((r+l|0)*.14285714285714285),n[c>>2]=a,n[u>>2]=0,t=(r=(0|a)<(0|i))?i:a,(0|(r=r?a:i))<0&&(((0|r)==-0x80000000?1:(0|t)>0?(0x7fffffff-t|0)<(0|r):(-0x80000000-t|0)>(0|r))&&M(27795,26892,354,26903),((0|t)>-1?(-0x80000000|t)>=(0|r):(-0x80000000^t)<(0|r))&&M(27795,26892,354,26903)),t=a-i|0,(0|i)<0?(r=0-i|0,n[c>>2]=t,n[u>>2]=r,n[e>>2]=0,i=0):(t=a,r=0),(0|t)<0&&(i=i-t|0,n[e>>2]=i,r=r-t|0,n[u>>2]=r,n[c>>2]=0,t=0),s=i-r|0,a=t-r|0,(0|r)<0?(n[e>>2]=s,n[c>>2]=a,n[u>>2]=0,t=a,a=s,r=0):a=i,(0|(i=(0|r)<(0|(i=(0|t)<(0|a)?t:a))?r:i))<=0||(n[e>>2]=a-i,n[c>>2]=t-i,n[u>>2]=r-i),0|(c=0)}(c))){r=13;break}n[l>>2]=n[c>>2],n[l+4>>2]=n[c+4>>2],n[l+8>>2]=n[c+8>>2],es(l)}else{if(0|(a=0|function(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0,u=0;if(a=0|n[(o=e+8|0)>>2],(s=(0|n[e>>2])-a|0)>>>0>0x2aaaaaa9|(a=(0|n[(l=e+4|0)>>2])-a|0)>>>0>0x2aaaaaa9){if(((r=(0|s)>0)?(0x7fffffff-s|0)<(0|s):(-0x80000000-s|0)>(0|s))||(t=s<<1,(i=(0|a)>0)?(0x7fffffff-a|0)<(0|a):(-0x80000000-a|0)>(0|a)))return 0|(l=1);if(u=a<<1,(i?(0x7fffffff-u|0)<(0|a):(-0x80000000-u|0)>(0|a))||(r?(0x7fffffff-t|0)<(0|a):(-0x80000000-t|0)>(0|a))||(r=3*a|0,(0|a)>-1?(-0x80000000|r)>=(0|s):(-0x80000000^r)<(0|s)))return 0|(u=1)}else r=3*a|0,t=s<<1;return i=0|tf((t+a|0)*.14285714285714285),n[e>>2]=i,a=0|tf((r-s|0)*.14285714285714285),n[l>>2]=a,n[o>>2]=0,t=(r=(0|a)<(0|i))?i:a,(0|(r=r?a:i))<0&&(((0|r)==-0x80000000?1:(0|t)>0?(0x7fffffff-t|0)<(0|r):(-0x80000000-t|0)>(0|r))&&M(27795,26892,402,26917),((0|t)>-1?(-0x80000000|t)>=(0|r):(-0x80000000^t)<(0|r))&&M(27795,26892,402,26917)),t=a-i|0,(0|i)<0?(r=0-i|0,n[l>>2]=t,n[o>>2]=r,n[e>>2]=0,i=0):(t=a,r=0),(0|t)<0&&(i=i-t|0,n[e>>2]=i,r=r-t|0,n[o>>2]=r,n[l>>2]=0,t=0),s=i-r|0,a=t-r|0,(0|r)<0?(n[e>>2]=s,n[l>>2]=a,n[o>>2]=0,t=a,a=s,r=0):a=i,(0|(i=(0|r)<(0|(i=(0|t)<(0|a)?t:a))?r:i))<=0||(n[e>>2]=a-i,n[l>>2]=t-i,n[o>>2]=r-i),0|(u=0)}(c))){r=13;break}n[l>>2]=n[c>>2],n[l+4>>2]=n[c+4>>2],n[l+8>>2]=n[c+8>>2],eo(l)}if(er(o,l,u),J(u),v=0|n[(a=i)>>2],a=0|n[a+4>>2],y=0|tR(7,0,0|(x=(15-s|0)*3|0)),a&=~(0|w()),x=0|tR(0|en(u),0,0|x),a=w()|a,n[(g=i)>>2]=x|v&~y,n[g+4>>2]=a,(0|s)<=1){r=14;break}}e:do if((0|r)!=13&&(0|r)==14)if(((0|n[c>>2])<=1?(0|n[c+4>>2])<=1:0)?(0|n[c+8>>2])<=1:0){u=(0|(a=0|j(A,r=0|en(c))))==127?0:0|V(a);t:do if(r){if(h){if((0|(a=0|eI(e,t)))==7){a=5;break e}if((0|(s=0|n[21376+(28*a|0)+(r<<2)>>2]))>0){a=r,r=0;do a=0|eh(a),r=r+1|0;while((0|r)!=(0|s))}else a=r;if((0|a)==1){a=9;break e}(0|(r=0|j(A,a)))==127&&M(27648,27538,411,27678),0|V(r)?M(27693,27538,412,27678):(f=r,p=s,d=a)}else f=a,p=0,d=r;if((0|(l=0|n[4272+(28*A|0)+(d<<2)>>2]))<=-1&&M(27724,27538,419,27678),!u){if((0|p)<0){a=5;break e}if(0|p){a=0,r=0|n[(s=i)>>2],s=0|n[s+4>>2];do r=0|eD(r,s),s=0|w(),n[(x=i)>>2]=r,n[x+4>>2]=s,a=a+1|0;while((0|a)<(0|p))}if((0|l)<=0){a=f,r=58;break}for(a=0,r=0|n[(s=i)>>2],s=0|n[s+4>>2];;)if(r=0|eD(r,s),s=0|w(),n[(x=i)>>2]=r,n[x+4>>2]=s,(0|(a=a+1|0))==(0|l)){a=f,r=58;break t}}if((0|(o=0|W(f,A)))==7&&M(27514,27538,428,27678),r=0|n[(a=i)>>2],a=0|n[a+4>>2],(0|l)>0){s=0;do r=0|eD(r,a),a=0|w(),n[(x=i)>>2]=r,n[x+4>>2]=a,s=s+1|0;while((0|s)!=(0|l))}if((0|(a=0|eI(r,a)))==7&&M(27795,27538,440,27678),(0|(r=0|n[((r=0|q(f))?21792:21584)+(28*o|0)+(a<<2)>>2]))<0&&M(27795,27538,454,27678),r){a=0,s=0|n[(o=i)>>2],o=0|n[o+4>>2];do s=0|eL(s,o),o=0|w(),n[(x=i)>>2]=s,n[x+4>>2]=o,a=a+1|0;while((0|a)<(0|r))a=f,r=58}else a=f,r=58}else if((0|h)!=0&(0|u)!=0){if((0|(r=0|eI(e,t)))==7|(0|(s=0|eI(0|n[(s=i)>>2],0|n[s+4>>2])))==7||(0|(s=0|n[21376+(28*r|0)+(s<<2)>>2]))<0){a=5;break e}if(s){r=0,o=0|n[(l=i)>>2],l=0|n[l+4>>2];do o=0|eD(o,l),l=0|w(),n[(x=i)>>2]=o,n[x+4>>2]=l,r=r+1|0;while((0|r)<(0|s))r=58}else r=59}else r=58;while(0)if((0|r)==58&&u&&(r=59),(0|r)==59&&(0|eI(0|n[(x=i)>>2],0|n[x+4>>2]))==1){a=9;break}y=0|n[(x=i)>>2],x=-1040385&n[x+4>>2],v=0|tR(0|a,0,45),x|=w(),n[(a=i)>>2]=y|v,n[a+4>>2]=x,a=0}else a=1;while(0)return x=a,I=m,0|x}function e4(e,t,r,i){e|=0,t|=0;var n=0,a=0,s=0;if((0|(r|=0))==0&(0|(i|=0))==0)return a=1,T(0|(n=0)),0|a;a=e,n=t,e=1,t=0;do e=0|tT(((s=(1&r)==0&!0)?1:a)|0,(s?0:n)|0,0|e,0|t),t=0|w(),r=0|tE(0|r,0|i,1),i=0|w(),a=0|tT(0|a,0|n,0|a,0|n),n=0|w();while(!((0|r)==0&(0|i)==0))return T(0|t),0|e}function e5(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var s,o,l,u,c,h,A,p,f,m,g,y=0,v=0,x=0,_=0,b=0,S=0,T=0;_=I,I=I+16|0,v=_,x=0|tC(0|e,0|t,52),w(),x&=15;do{if(x){if(!(y=0|ez(e,t,v))){b=1/d(+(S=+a[v>>3])),T=+a[25968+(x<<3)>>3],a[r>>3]=S+T,a[r+8>>3]=S-T,S=+a[v+8>>3],b*=T,a[r+16>>3]=b+S,a[r+24>>3]=S-b;break}return x=y,I=_,0|x}if(y=0|tC(0|e,0|t,45),w(),(y&=127)>>>0>121)return x=5,I=_,0|x;v=22064+(y<<5)|0,n[r>>2]=n[v>>2],n[r+4>>2]=n[v+4>>2],n[r+8>>2]=n[v+8>>2],n[r+12>>2]=n[v+12>>2],n[r+16>>2]=n[v+16>>2],n[r+20>>2]=n[v+20>>2],n[r+24>>2]=n[v+24>>2],n[r+28>>2]=n[v+28>>2];break}while(0)return s=0|r,o=(i?1.4:1.1)*1,l=0,u=0,c=0,h=0,A=0,p=0,f=0,m=0,g=0,u=(A=+a[(h=s+16|0)>>3])-(c=+a[(l=s+24|0)>>3]),u=A<c?u+6.283185307179586:u,g=(m=+a[s>>3])-(f=+a[(p=s+8|0)>>3]),u=(u*o-u)*.5,m+=o=(g*o-g)*.5,a[s>>3]=m>1.5707963267948966?1.5707963267948966:m,o=f-o,a[p>>3]=o<-1.5707963267948966?-1.5707963267948966:o,o=(o=A+u)>3.141592653589793?o+-6.283185307179586:o,a[h>>3]=o<-3.141592653589793?o+6.283185307179586:o,o=(o=c-u)>3.141592653589793?o+-6.283185307179586:o,a[l>>3]=o<-3.141592653589793?o+6.283185307179586:o,((0|n[(i=26096+(x<<3)|0)>>2])==(0|e)?(0|n[i+4>>2])==(0|t):0)&&(a[r>>3]=1.5707963267948966),((0|n[(x=26224+(x<<3)|0)>>2])==(0|e)?(0|n[x+4>>2])==(0|t):0)&&(a[r+8>>3]=-1.5707963267948966),(1.5707963267948966!=+a[r>>3]?-1.5707963267948966!=+a[r+8>>3]:0)||(a[r+16>>3]=3.141592653589793,a[r+24>>3]=-3.141592653589793),x=0,I=_,0|x}function e8(e){e|=0;var t=0,r=0,a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0;if(b=I,I=I+336|0,f=b+168|0,m=b,(0|(r=0|n[(a=e)>>2]))==0&(0|(a=0|n[a+4>>2]))==0){I=b;return}if(0|i[0|(t=e+28|0)]?(r=0|e6(r,a),a=0|w()):i[0|t]=1,!(0|n[n[(_=e+20|0)>>2]>>2])){0|(r=0|n[(t=e+24|0)>>2])&&tg(r),n[(x=e)>>2]=0,n[x+4>>2]=0,n[e+8>>2]=0,n[_>>2]=0,n[e+12>>2]=-1,n[e+16>>2]=0,n[t>>2]=0,I=b;return}s=15&(t=0|n[(x=e+16|0)>>2]);e:do if((0|r)==0&(0|a)==0)v=e+24|0;else{g=e+12|0,A=(0|s)==3,d=255&t,c=(1|s)==3,p=e+24|0,h=s+-1>>>0<3,l=(2|s)==3,u=m+8|0;t:for(;;){if(o=0|tC(0|r,0|a,52),w(),(0|(o&=15))==(0|n[g>>2])){switch(15&d){case 0:case 2:case 3:if(0|(s=0|ez(r,a,f))){y=15;break t}if(0|tr(0|n[_>>2],0|n[p>>2],f)){y=19;break t}}if(c?(s=0|n[(0|n[_>>2])+4>>2],n[f>>2]=n[s>>2],n[f+4>>2]=n[s+4>>2],n[f+8>>2]=n[s+8>>2],n[f+12>>2]=n[s+12>>2],0|Q(26832,f)):0){if(0|eO(0|n[(0|n[_>>2])+4>>2],o,m)){y=25;break}if((0|n[(s=m)>>2])==(0|r)?(0|n[s+4>>2])==(0|a):0){y=29;break}}if(h){if(0|(s=0|eV(r,a,f))){y=32;break}if(0|e5(r,a,m,0)){y=36;break}if((l?0|ti(0|n[_>>2],0|n[p>>2],f,m):0)||(c?0|ta(0|n[_>>2],0|n[p>>2],f,m):0)){y=42;break}}if(A){if(t=0|e5(r,a,f,1),s=0|n[p>>2],0|t){y=45;break}if(0|$(s,f)&&(K(m,f),0|Y(f,0|n[p>>2])||0|tr(0|n[_>>2],0|n[p>>2],u)||0|ta(0|n[_>>2],0|n[p>>2],m,f))){y=53;break}}}do if((0|o)<(0|n[g>>2])){if(t=0|e5(r,a,f,1),s=0|n[p>>2],0|t){y=58;break t}if(!(0|$(s,f))){y=73;break}if(0|Y(0|n[p>>2],f)?(K(m,f),0|ti(0|n[_>>2],0|n[p>>2],m,f)):0){y=65;break t}if(0|(r=0|eP(r,a,o+1|0,m))){y=67;break t}r=0|n[(a=m)>>2],a=0|n[a+4>>2]}else y=73;while(0)if((0|y)==73&&(y=0,r=0|e6(r,a),a=0|w()),(0|r)==0&(0|a)==0){v=p;break e}}switch(0|y){case 15:0|(t=0|n[p>>2])&&tg(t),n[(y=e)>>2]=0,n[y+4>>2]=0,n[_>>2]=0,n[g>>2]=-1,n[x>>2]=0,n[p>>2]=0,n[e+8>>2]=s,y=20;break;case 19:n[e>>2]=r,n[e+4>>2]=a,y=20;break;case 25:M(27795,27761,470,27772);break;case 29:case 42:n[e>>2]=r,n[e+4>>2]=a,I=b;return;case 32:0|(t=0|n[p>>2])&&tg(t),n[(v=e)>>2]=0,n[v+4>>2]=0,n[_>>2]=0,n[g>>2]=-1,n[x>>2]=0,n[p>>2]=0,n[e+8>>2]=s,I=b;return;case 36:M(27795,27761,493,27772);break;case 45:0|s&&tg(s),n[(y=e)>>2]=0,n[y+4>>2]=0,n[_>>2]=0,n[g>>2]=-1,n[x>>2]=0,n[p>>2]=0,n[e+8>>2]=t,y=55;break;case 53:n[e>>2]=r,n[e+4>>2]=a,y=55;break;case 58:0|s&&tg(s),n[(y=e)>>2]=0,n[y+4>>2]=0,n[_>>2]=0,n[g>>2]=-1,n[x>>2]=0,n[p>>2]=0,n[e+8>>2]=t,y=71;break;case 65:n[e>>2]=r,n[e+4>>2]=a,y=71;break;case 67:0|(t=0|n[p>>2])&&tg(t),n[(v=e)>>2]=0,n[v+4>>2]=0,n[_>>2]=0,n[g>>2]=-1,n[x>>2]=0,n[p>>2]=0,n[e+8>>2]=r,I=b;return}if((0|y)==20){I=b;return}if((0|y)==55){I=b;return}if((0|y)==71){I=b;return}}while(0)0|(t=0|n[v>>2])&&tg(t),n[(y=e)>>2]=0,n[y+4>>2]=0,n[e+8>>2]=0,n[_>>2]=0,n[e+12>>2]=-1,n[x>>2]=0,n[v>>2]=0,I=b}function e6(e,t){e|=0,t|=0;var r=0,i=0,a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0;d=I,I=I+16|0,h=d,i=0|tC(0|e,0|t,52),w(),i&=15,r=0|tC(0|e,0|t,45),w();do if(i){for(;r=0|tR(i+4095|0,0,52),a=w()|-0xf00001&t,o=0|tR(7,0,0|(s=(15-i|0)*3|0)),l=0|w(),r=r|e|o,a|=l,u=0|tC(0|e,0|t,0|s),w(),i=i+-1|0,!((u&=7)>>>0<6);)if(i)t=a,e=r;else{c=4;break}if((0|c)==4){r=0|tC(0|r,0|a,45),w();break}return h=0|tR(((h=(0|u)==0&(0|eR(r,a))!=0)?2:1)+u|0,0,0|s),c=w()|t&~l,h|=e&~o,T(0|c),I=d,0|h}while(0)return(r&=127)>>>0>120?(h=0,T(0|(c=0))):(eM(h,0,r+1|0,0),c=0|n[h+4>>2],h=0|n[h>>2],T(0|c)),I=d,0|h}function e7(e,t,r){e|=0;var i=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0;if(!(0|Q(t|=0,r|=0))||(t=0|X(t),i=+a[r>>3],s=t&(s=+a[r+8>>3])<0?s+6.283185307179586:s,(0|(p=0|n[e>>2]))<=0))return 0|(p=0);if(A=0|n[e+4>>2],t){t=0,d=s,r=-1,e=0;e:for(;;){for(h=e;l=+a[A+(h<<4)>>3],s=+a[A+(h<<4)+8>>3],o=+a[A+((e=(r+2|0)%(0|p)|0)<<4)>>3],u=+a[A+(e<<4)+8>>3],l>o?(c=l,l=u):(c=o,o=l,l=s,s=u),(i=i==o|i==c?i+2220446049250313e-31:i)<o|i>c;){if((0|(r=h+1|0))>=(0|p)){r=22;break e}e=h,h=r,r=e}if(d=(u=l<0?l+6.283185307179586:l)==d|(l=s<0?s+6.283185307179586:s)==d?d+-2220446049250313e-31:d,((c=u+(i-o)/(c-o)*(l-u))<0?c+6.283185307179586:c)>d&&(t^=1),(0|(e=h+1|0))>=(0|p)){r=22;break}r=h}if((0|r)==22)return 0|t}else{t=0,d=s,r=-1,e=0;t:for(;;){for(h=e;l=+a[A+(h<<4)>>3],s=+a[A+(h<<4)+8>>3],o=+a[A+((e=(r+2|0)%(0|p)|0)<<4)>>3],u=+a[A+(e<<4)+8>>3],l>o?(c=l,l=u):(c=o,o=l,l=s,s=u),(i=i==o|i==c?i+2220446049250313e-31:i)<o|i>c;){if((0|(r=h+1|0))>=(0|p)){r=22;break t}e=h,h=r,r=e}if(d=l==d|s==d?d+-2220446049250313e-31:d,l+(i-o)/(c-o)*(s-l)>d&&(t^=1),(0|(e=h+1|0))>=(0|p)){r=22;break}r=h}if((0|r)==22)return 0|t}return 0}function e9(e,t){e|=0,t|=0;var r=0,i=0,s=0,o=0,l=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0;if(!(g=0|n[e>>2])){n[t>>2]=0,n[t+4>>2]=0,n[t+8>>2]=0,n[t+12>>2]=0,n[t+16>>2]=0,n[t+20>>2]=0,n[t+24>>2]=0,n[t+28>>2]=0;return}if(a[(y=t+8|0)>>3]=17976931348623157e292,a[(v=t+24|0)>>3]=17976931348623157e292,a[t>>3]=-17976931348623157e292,a[(x=t+16|0)>>3]=-17976931348623157e292,!((0|g)<=0)){for(f=0|n[e+4>>2],d=17976931348623157e292,A=-17976931348623157e292,p=0,e=-1,o=17976931348623157e292,l=17976931348623157e292,h=-17976931348623157e292,i=-17976931348623157e292,m=0;r=+a[f+(m<<4)>>3],c=+a[f+(m<<4)+8>>3],s=+a[f+(((0|(e=e+2|0))==(0|g)?0:e)<<4)+8>>3],r<o&&(a[y>>3]=r,o=r),c<l&&(a[v>>3]=c,l=c),r>h?a[t>>3]=r:r=h,c>i&&(a[x>>3]=c,i=c),d=c>0&c<d?c:d,A=c<0&c>A?c:A,p|=+u(+(c-s))>3.141592653589793,(0|(e=m+1|0))!=(0|g);)_=m,h=r,m=e,e=_;p&&(a[x>>3]=A,a[v>>3]=d)}}function te(e){return((e|=0)>>>0<4?0:15)|0}function tt(e,t){e|=0,t|=0;var r=0,i=0,s=0,o=0,l=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,w=0,M=0;if(g=0|n[e>>2]){if(a[(y=t+8|0)>>3]=17976931348623157e292,a[(v=t+24|0)>>3]=17976931348623157e292,a[t>>3]=-17976931348623157e292,a[(x=t+16|0)>>3]=-17976931348623157e292,(0|g)>0){for(s=0|n[e+4>>2],f=17976931348623157e292,m=-17976931348623157e292,i=0,r=-1,h=17976931348623157e292,d=17976931348623157e292,p=-17976931348623157e292,l=-17976931348623157e292,_=0;o=+a[s+(_<<4)>>3],A=+a[s+(_<<4)+8>>3],c=+a[s+(((0|(w=r+2|0))==(0|g)?0:w)<<4)+8>>3],o<h&&(a[y>>3]=o,h=o),A<d&&(a[v>>3]=A,d=A),o>p?a[t>>3]=o:o=p,A>l&&(a[x>>3]=A,l=A),f=A>0&A<f?A:f,m=A<0&A>m?A:m,i|=+u(+(A-c))>3.141592653589793,(0|(r=_+1|0))!=(0|g);)w=_,p=o,_=r,r=w;i&&(a[x>>3]=m,a[v>>3]=f)}}else n[t>>2]=0,n[t+4>>2]=0,n[t+8>>2]=0,n[t+12>>2]=0,n[t+16>>2]=0,n[t+20>>2]=0,n[t+24>>2]=0,n[t+28>>2]=0;if(!((0|(r=0|n[(w=e+8|0)>>2]))<=0)){T=e+12|0,S=0;do if(s=0|n[T>>2],i=S,v=t+((S=S+1|0)<<5)|0,x=0|n[s+(i<<3)>>2]){if(a[(_=t+(S<<5)+8|0)>>3]=17976931348623157e292,a[(e=t+(S<<5)+24|0)>>3]=17976931348623157e292,a[v>>3]=-17976931348623157e292,a[(b=t+(S<<5)+16|0)>>3]=-17976931348623157e292,(0|x)>0){for(g=0|n[s+(i<<3)+4>>2],f=17976931348623157e292,m=-17976931348623157e292,s=0,i=-1,y=0,h=17976931348623157e292,d=17976931348623157e292,A=-17976931348623157e292,l=-17976931348623157e292;o=+a[g+(y<<4)>>3],p=+a[g+(y<<4)+8>>3],c=+a[g+(((0|(i=i+2|0))==(0|x)?0:i)<<4)+8>>3],o<h&&(a[_>>3]=o,h=o),p<d&&(a[e>>3]=p,d=p),o>A?a[v>>3]=o:o=A,p>l&&(a[b>>3]=p,l=p),f=p>0&p<f?p:f,m=p<0&p>m?p:m,s|=+u(+(p-c))>3.141592653589793,(0|(i=y+1|0))!=(0|x);)M=y,y=i,A=o,i=M;s&&(a[b>>3]=m,a[e>>3]=f)}}else n[v>>2]=0,n[v+4>>2]=0,n[v+8>>2]=0,n[v+12>>2]=0,n[v+16>>2]=0,n[v+20>>2]=0,n[v+24>>2]=0,n[v+28>>2]=0,r=0|n[w>>2];while((0|S)<(0|r))}}function tr(e,t,r){var i=0,a=0,s=0;if(!(0|e7(e|=0,t|=0,r|=0)))return 0|(a=0);if((0|n[(a=e+8|0)>>2])<=0)return 0|(a=1);for(i=e+12|0,e=0;;){if(s=e,e=e+1|0,0|e7((0|n[i>>2])+(s<<3)|0,t+(e<<5)|0,r)){e=0,i=6;break}if((0|e)>=(0|n[a>>2])){e=1,i=6;break}}return(0|i)==6?0|e:0}function ti(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0;if(c=I,I=I+16|0,l=c,!(0|e7(e,t,o=r+8|0)))return u=0,I=c,0|u;u=e+8|0;e:do if((0|n[u>>2])>0){for(s=e+12|0,a=0;;){if(h=a,a=a+1|0,0|e7((0|n[s>>2])+(h<<3)|0,t+(a<<5)|0,o)){a=0;break}if((0|a)>=(0|n[u>>2]))break e}return I=c,0|a}while(0)if(0|tn(e,t,r,i))return h=0,I=c,0|h;n[l>>2]=n[r>>2],n[l+4>>2]=o,a=0|n[u>>2];t:do if((0|a)>0)for(e=e+12|0,o=0,s=a;;){if(a=0|n[e>>2],(0|n[a+(o<<3)>>2])>0){if(0|e7(l,i,0|n[a+(o<<3)+4>>2])||(a=o+1|0,0|tn((0|n[e>>2])+(o<<3)|0,t+(a<<5)|0,r,i))){a=0;break t}s=0|n[u>>2]}else a=o+1|0;if((0|a)<(0|s))o=a;else{a=1;break}}else a=1;while(0)return h=a,I=c,0|h}function tn(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var s,o,l,u,c,h,d,A,p,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,w=0,M=0,E=0,C=0,R=0,N=0,P=0,L=0,D=0,B=0,F=0;if(D=I,I=I+176|0,R=D+172|0,f=D+168|0,N=D,!(0|$(t,i)))return e=0,I=D,0|e;if(s=0|t,o=0|i,l=0|R,u=0|f,c=0,h=0,d=0,A=0,p=0,s=(h=+a[s+16>>3])<(p=+a[s+24>>3]),c=(A=+a[o+16>>3])<(d=+a[o+24>>3]),o=p-A<d-h,n[l>>2]=s?c|o?1:2:0,n[u>>2]=c?s?1:o?2:1:0,tD(0|N,0|r,168),(0|n[r>>2])>0){t=0;do C=+eQ(+a[(B=N+8+(t<<4)+8|0)>>3],0|n[f>>2]),a[B>>3]=C,t=t+1|0;while((0|t)<(0|n[r>>2]))}M=+a[i>>3],E=+a[i+8>>3],C=+eQ(+a[i+16>>3],0|n[f>>2]),T=+eQ(+a[i+24>>3],0|n[f>>2]);e:do if((0|n[e>>2])>0){if(i=e+4|0,(0|(f=0|n[N>>2]))<=0){for(t=0;;)if((0|(t=t+1|0))>=(0|n[e>>2])){t=0;break e}}for(r=0;;){if(S=+a[(t=0|n[i>>2])+(r<<4)>>3],w=+eQ(+a[t+(r<<4)+8>>3],0|n[R>>2]),m=+a[(t=0|n[i>>2])+((B=(0|(r=r+1|0))%(0|n[e>>2])|0)<<4)>>3],g=+eQ(+a[t+(B<<4)+8>>3],0|n[R>>2]),((!(S>=M)|!(m>=M)?!(S<=E)|!(m<=E):0)?!(w<=T)|!(g<=T):0)?!(w>=C)|!(g>=C):0){b=m-S,x=g-w,t=0;do if(F=t,B=(0|(t=t+1|0))==(0|f)?0:t,m=+a[N+8+(F<<4)+8>>3],g=a[N+8+(B<<4)+8>>3]-m,y=+a[N+8+(F<<4)>>3],(0!=(_=b*g-x*(v=a[N+8+(B<<4)>>3]-y))?!((v=((P=w-m)*v-g*(L=S-y))/_)<0|v>1):0)?(_=(b*P-x*L)/_)>=0&_<=1:0){t=1;break e}while((0|t)<(0|f))}if((0|r)>=(0|n[e>>2])){t=0;break}}}else t=0;while(0)return F=t,I=D,0|F}function ta(e,t,r,i){var a=0,s=0,o=0;if(0|tn(e|=0,t|=0,r|=0,i|=0))return 0|(s=1);if((0|n[(s=e+8|0)>>2])<=0)return 0|(s=0);for(a=e+12|0,e=0;;){if(o=e,e=e+1|0,0|tn((0|n[a>>2])+(o<<3)|0,t+(e<<5)|0,r,i)){e=1,a=6;break}if((0|e)>=(0|n[s>>2])){e=0,a=6;break}}return(0|a)==6?0|e:0}function ts(e,t,r,i,n){e|=0,t|=0,r|=0,i|=0,n|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0;c=+a[e>>3],u=a[t>>3]-c,l=+a[e+8>>3],o=a[t+8>>3]-l,d=+a[r>>3],s=a[i>>3]-d,A=+a[r+8>>3],h=a[i+8>>3]-A,s=(s*(l-A)-(c-d)*h)/(u*h-o*s),a[n>>3]=c+u*s,a[n+8>>3]=l+o*s}function to(e,t){return(t|=0,11920928955078125e-23>+u(+(a[(e|=0)>>3]-a[t>>3])))?0|(t=11920928955078125e-23>+u(+(a[e+8>>3]-a[t+8>>3]))):0|(t=0)}function tl(e,t){e|=0,t|=0;var r=0,i=0,n=0;return n=a[e>>3]-a[t>>3],+(n*n+(i=a[e+8>>3]-a[t+8>>3])*i+(r=a[e+16>>3]-a[t+16>>3])*r)}function tu(e,t,r){e|=0,t|=0,r|=0;var i,a,s=0,o=0,l=0,u=0,c=0,h=0,d=0;if(d=I,I=I+32|0,u=d+16|0,c=d,0|(s=0|ek(e,t,u)))return r=s,I=d,0|r;l=0|eT(e,t),h=0|eI(e,t),i=7696+(28*(i=0|l)|0)|0,n[(a=0|c)>>2]=n[i>>2],n[a+4>>2]=n[i+4>>2],n[a+8>>2]=n[i+8>>2],n[a+12>>2]=n[i+12>>2],s=0|function(e,t){e|=0;var r=0,i=0;if((t|=0)>>>0>20)return 0|(t=-1);do if((0|n[11120+(216*t|0)>>2])!=(0|e))if((0|n[11120+(216*t|0)+8>>2])!=(0|e))if((0|n[11120+(216*t|0)+16>>2])!=(0|e))if((0|n[11120+(216*t|0)+24>>2])!=(0|e))if((0|n[11120+(216*t|0)+32>>2])!=(0|e))if((0|n[11120+(216*t|0)+40>>2])!=(0|e))if((0|n[11120+(216*t|0)+48>>2])!=(0|e))if((0|n[11120+(216*t|0)+56>>2])!=(0|e))if((0|n[11120+(216*t|0)+64>>2])!=(0|e))if((0|n[11120+(216*t|0)+72>>2])!=(0|e))if((0|n[11120+(216*t|0)+80>>2])!=(0|e))if((0|n[11120+(216*t|0)+88>>2])!=(0|e))if((0|n[11120+(216*t|0)+96>>2])!=(0|e))if((0|n[11120+(216*t|0)+104>>2])!=(0|e))if((0|n[11120+(216*t|0)+112>>2])!=(0|e))if((0|n[11120+(216*t|0)+120>>2])!=(0|e))if((0|n[11120+(216*t|0)+128>>2])!=(0|e))if((0|n[11120+(216*t|0)+136>>2])==(0|e))e=2,r=1,i=2;else{if((0|n[11120+(216*t|0)+144>>2])==(0|e)){e=0,r=2,i=0;break}if((0|n[11120+(216*t|0)+152>>2])==(0|e)){e=0,r=2,i=1;break}if((0|n[11120+(216*t|0)+160>>2])==(0|e)){e=0,r=2,i=2;break}if((0|n[11120+(216*t|0)+168>>2])==(0|e)){e=1,r=2,i=0;break}if((0|n[11120+(216*t|0)+176>>2])==(0|e)){e=1,r=2,i=1;break}if((0|n[11120+(216*t|0)+184>>2])==(0|e)){e=1,r=2,i=2;break}if((0|n[11120+(216*t|0)+192>>2])==(0|e)){e=2,r=2,i=0;break}if((0|n[11120+(216*t|0)+200>>2])==(0|e)){e=2,r=2,i=1;break}if((0|n[11120+(216*t|0)+208>>2])==(0|e)){e=2,r=2,i=2;break}return 0|(e=-1)}else e=2,r=1,i=1;else e=2,r=1,i=0;else e=1,r=1,i=2;else e=1,r=1,i=1;else e=1,r=1,i=0;else e=0,r=1,i=2;else e=0,r=1,i=1;else e=0,r=1,i=0;else e=2,r=0,i=2;else e=2,r=0,i=1;else e=2,r=0,i=0;else e=1,r=0,i=2;else e=1,r=0,i=1;else e=1,r=0,i=0;else e=0,r=0,i=2;else e=0,r=0,i=1;else e=0,r=0,i=0;while(0)return 0|(t=0|n[11120+(216*t|0)+(72*r|0)+(24*e|0)+(i<<3)+4>>2])}(l,0|n[u>>2]);e:do if(0|V(l)){do switch(0|l){case 4:e=0;break;case 14:e=1;break;case 24:e=2;break;case 38:e=3;break;case 49:e=4;break;case 58:e=5;break;case 63:e=6;break;case 72:e=7;break;case 83:e=8;break;case 97:e=9;break;case 107:e=10;break;case 117:e=11;break;default:s=1;break e}while(0)if(o=0|n[26416+(24*e|0)+8>>2],t=0|n[26416+(24*e|0)+16>>2],(0|(e=0|n[u>>2]))!=(0|n[c>>2])&&(c=0|q(l))|(0|(e=0|n[u>>2]))==(0|t)&&(s=(s+1|0)%6|0),(0|h)==3&(0|e)==(0|t)){s=(s+5|0)%6|0,o=22;break}(0|h)==5&(0|e)==(0|o)&&(s=(s+1|0)%6|0),o=22}else o=22;while(0)return(0|o)==22&&(n[r>>2]=s,s=0),r=s,I=d,0|r}function tc(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0;if(x=I,I=I+32|0,v=x+24|0,g=x+20|0,f=x+8|0,p=x+16|0,A=x,u=(u=(0|eR(e,t))==0)?6:5,h=0|tC(0|e,0|t,52),w(),h&=15,u>>>0<=r>>>0)return i=2,I=x,0|i;((d=(0|h)==0)?0:((m=0|tR(7,0,(15^h)*3|0))&e)==0&(w()&t)==0)?a=r:s=4;e:do if((0|s)==4){if((((a=(0|eR(e,t))!=0)?4:5)|0)<(0|r)||0|tu(e,t,v)||(s=(0|n[v>>2])+r|0,(0|(m=0|n[(a=a?26704+((0|s)%5<<2)|0:26736+((0|s)%6<<2)|0)>>2]))==7))return i=1,I=x,0|i;n[g>>2]=0,a=0|O(e,t,m,g,f);do if(!a){if(c=0|n[(l=f)>>2],s=(o=(l=0|n[l+4>>2])>>>0<t>>>0|(0|l)==(0|t)&c>>>0<e>>>0)?c:e,o=o?l:t,d?0:(c&(d=0|tR(7,0,(15^h)*3|0)))==0&(l&w())==0)a=r;else{if(l=(r+-1+u|0)%(0|u)|0,a=0|eR(e,t),(0|l)<0&&M(27795,27797,246,27806),(((u=(0|a)!=0)?4:5)|0)<(0|l)&&M(27795,27797,246,27806),0|tu(e,t,v)&&M(27795,27797,246,27806),a=(0|n[v>>2])+l|0,(0|(l=0|n[(a=u?26704+((0|a)%5<<2)|0:26736+((0|a)%6<<2)|0)>>2]))==7&&M(27795,27797,246,27806),n[p>>2]=0,0|(a=0|O(e,t,l,p,A)))break;u=0|n[(c=A)>>2],c=0|n[c+4>>2];do if(c>>>0<o>>>0|(0|c)==(0|o)&u>>>0<s>>>0){if(s=0|eR(u,c)?0|k(u,c,e,t):0|n[26800+(((0|n[p>>2])+(0|n[26768+(l<<2)>>2])|0)%6<<2)>>2],a=0|eR(u,c),s+-1>>>0>5||(0|s)==1&(a=(0|a)!=0)){a=-1,s=u,o=c;break}do if(0|tu(u,c,v))a=-1;else if(a){a=((0|n[26352+(s<<2)>>2])+5-(0|n[v>>2])|0)%5|0;break}else{a=((0|n[26384+(s<<2)>>2])+6-(0|n[v>>2])|0)%6|0;break}while(0)s=u,o=c}else a=r;while(0)c=0|n[(l=f)>>2],l=0|n[l+4>>2]}if((0|s)==(0|c)&(0|o)==(0|l)){if(e=(u=(0|eR(c,l))!=0)?0|k(c,l,e,t):0|n[26800+(((0|n[g>>2])+(0|n[26768+(m<<2)>>2])|0)%6<<2)>>2],a=0|eR(c,l),e+-1>>>0<=5?!((0|e)==1&(y=(0|a)!=0)):0)do if(0|tu(c,l,v))a=-1;else if(y){a=((0|n[26352+(e<<2)>>2])+5-(0|n[v>>2])|0)%5|0;break}else{a=((0|n[26384+(e<<2)>>2])+6-(0|n[v>>2])|0)%6|0;break}while(0)else a=-1;a=(0|(a=a+1|0))==6|u&(0|a)==5?0:a}t=o,e=s;break e}while(0)return i=a,I=x,0|i}while(0)return y=0|tR(0|a,0,56),v=w()|-0x7f000001&t|0x20000000,n[i>>2]=y|e,n[i+4>>2]=v,i=0,I=x,0|i}function th(e,t,r){e|=0,r|=0;var i=0;(0|(t|=0))>0?(i=0|ty(t,4),n[e>>2]=i,i||M(27819,27842,40,27856)):n[e>>2]=0,n[e+4>>2]=t,n[e+8>>2]=0,n[e+12>>2]=r}function td(e){e|=0;var t=0,r=0,i=0,s=0,o=0,l=0,c=0;s=e+4|0,o=e+12|0,l=e+8|0;e:for(;;){for(r=0|n[s>>2],t=0;;){if((0|t)>=(0|r))break e;if(i=0|n[e>>2],c=0|n[i+(t<<2)>>2])break;t=t+1|0}t=i+(~~(u(+(h(10,+(15-(0|n[o>>2])|0))*(+a[c>>3]+ +a[c+8>>3])))%(0|r))>>>0<<2)|0,r=0|n[t>>2];t:do if(0|r){if(i=c+32|0,(0|r)==(0|c))n[t>>2]=n[i>>2];else{if(!(t=0|n[(r=r+32|0)>>2]))break;for(;(0|t)!=(0|c);)if(!(t=0|n[(r=t+32|0)>>2]))break t;n[r>>2]=n[i>>2]}tg(c),n[l>>2]=(0|n[l>>2])+-1}while(0)}tg(0|n[e>>2])}function tA(e){e|=0;var t=0,r=0,i=0;for(i=0|n[e+4>>2],r=0;;){if((0|r)>=(0|i)){t=0,r=4;break}if(t=0|n[(0|n[e>>2])+(r<<2)>>2]){r=4;break}r=r+1|0}return(0|r)==4?0|t:0}function tp(e,t){e|=0,t|=0;var r=0,i=0,s=0,o=0;if(r=~~(u(+(h(10,+(15-(0|n[e+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3])))%(0|n[e+4>>2]))>>>0,r=(0|n[e>>2])+(r<<2)|0,!(i=0|n[r>>2]))return 0|(o=1);o=t+32|0;do if((0|i)!=(0|t)){if(!(r=0|n[i+32>>2]))return 0|(o=1);for(s=r;;){if((0|s)==(0|t)){s=8;break}if(r=0|n[s+32>>2])i=s,s=r;else{r=1,s=10;break}}if((0|s)==8){n[i+32>>2]=n[o>>2];break}if((0|s)==10)return 0|r}else n[r>>2]=n[o>>2];while(0)return tg(t),n[(o=e+8|0)>>2]=(0|n[o>>2])+-1,0|(o=0)}function tf(e){return~~tF(+(e*=1))}function tm(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0;b=I,I=I+16|0,A=b;do if(e>>>0<245){if(e=(c=e>>>0<11?16:e+11&-8)>>>3,3&(r=(d=0|n[6977])>>>e))return a=(i=0|n[(r=(e=27948+((t=(1&r^1)+e|0)<<1<<2)|0)+8|0)>>2])+8|0,(0|(s=0|n[a>>2]))==(0|e)?n[6977]=d&~(1<<t):(n[s+12>>2]=e,n[r>>2]=s),_=t<<3,n[i+4>>2]=3|_,n[(_=i+_+4|0)>>2]=1|n[_>>2],_=a,I=b,0|_;if(c>>>0>(h=0|n[6979])>>>0){if(0|r)return t=2<<e,l=(t=((t=r<<e&(t|0-t))&0-t)+-1|0)>>>12&16,t>>>=l,r=t>>>5&8,t>>>=r,s=t>>>2&4,t>>>=s,e=t>>>1&2,t>>>=e,l=(s=0|n[(e=(t=27948+((i=(r|l|s|e|(i=t>>>1&1))+(t>>>i)|0)<<1<<2)|0)+8|0)>>2])+8|0,(0|(r=0|n[l>>2]))==(0|t)?(e=d&~(1<<i),n[6977]=e):(n[r+12>>2]=t,n[e>>2]=r,e=d),o=(_=i<<3)-c|0,n[s+4>>2]=3|c,n[(a=s+c|0)+4>>2]=1|o,n[s+_>>2]=o,0|h&&(i=0|n[6982],r=27948+((t=h>>>3)<<1<<2)|0,e&(t=1<<t)?t=0|n[(e=r+8|0)>>2]:(n[6977]=e|t,t=r,e=r+8|0),n[e>>2]=i,n[t+12>>2]=i,n[i+8>>2]=t,n[i+12>>2]=r),n[6979]=o,n[6982]=a,_=l,I=b,0|_;if(s=0|n[6978]){for(a=(r=(s&0-s)+-1|0)>>>12&16,r>>>=a,i=r>>>5&8,r>>>=i,o=r>>>2&4,r>>>=o,l=r>>>1&2,r>>>=l,r=u=0|n[28212+((i|a|o|l|(u=r>>>1&1))+(r>>>u)<<2)>>2],l=u,u=(-8&n[u+4>>2])-c|0;(e=0|n[r+16>>2])||(e=0|n[r+20>>2]);)a=(o=(-8&n[e+4>>2])-c|0)>>>0<u>>>0,r=e,l=a?e:l,u=a?o:u;if((o=l+c|0)>>>0>l>>>0){a=0|n[l+24>>2],t=0|n[l+12>>2];do if((0|t)==(0|l)){if(!(t=0|n[(e=l+20|0)>>2])&&!(t=0|n[(e=l+16|0)>>2])){r=0;break}for(;;)if(r=0|n[(i=t+20|0)>>2])t=r,e=i;else if(r=0|n[(i=t+16|0)>>2])t=r,e=i;else break;n[e>>2]=0,r=t}else r=0|n[l+8>>2],n[r+12>>2]=t,n[t+8>>2]=r,r=t;while(0)do if(0|a){if(e=28212+((t=0|n[l+28>>2])<<2)|0,(0|l)==(0|n[e>>2])){if(n[e>>2]=r,!r){n[6978]=s&~(1<<t);break}}else if(n[((0|n[(_=a+16|0)>>2])==(0|l)?_:a+20|0)>>2]=r,!r)break;n[r+24>>2]=a,0|(t=0|n[l+16>>2])&&(n[r+16>>2]=t,n[t+24>>2]=r),0|(t=0|n[l+20>>2])&&(n[r+20>>2]=t,n[t+24>>2]=r)}while(0)return u>>>0<16?(_=u+c|0,n[l+4>>2]=3|_,n[(_=l+_+4|0)>>2]=1|n[_>>2]):(n[l+4>>2]=3|c,n[o+4>>2]=1|u,n[o+u>>2]=u,0|h&&(i=0|n[6982],r=27948+((t=h>>>3)<<1<<2)|0,(t=1<<t)&d?t=0|n[(e=r+8|0)>>2]:(n[6977]=t|d,t=r,e=r+8|0),n[e>>2]=i,n[t+12>>2]=i,n[i+8>>2]=t,n[i+12>>2]=r),n[6979]=u,n[6982]=o),_=l+8|0,I=b,0|_}d=c}else d=c}else d=c}else if(e>>>0<=0xffffffbf)if(c=-8&(e=e+11|0),i=0|n[6978]){a=0-c|0,(e>>>=8)?c>>>0>0xffffff?u=31:(d=e+1048320>>>16&8,l=(m=e<<d)+520192>>>16&4,m<<=l,u=c>>>(u=14-(l|d|(u=m+245760>>>16&2))+(m<<u>>>15)|0)+7&1|u<<1):u=0,r=0|n[28212+(u<<2)>>2];e:do if(r)for(e=0,l=c<<((0|u)==31?0:25-(u>>>1)|0),s=0;;){if((o=(-8&n[r+4>>2])-c|0)>>>0<a>>>0)if(o)e=r,a=o;else{e=r,a=0,m=65;break e}if(s=(0|(m=0|n[r+20>>2]))==0|(0|m)==(0|(r=0|n[r+16+(l>>>31<<2)>>2]))?s:m,r)l<<=1;else{r=s,m=61;break}}else r=0,e=0,m=61;while(0)if((0|m)==61){if((0|r)==0&(0|e)==0){if(!(e=((e=2<<u)|0-e)&i)){d=c;break}o=(d=(e&0-e)+-1|0)>>>12&16,d>>>=o,s=d>>>5&8,d>>>=s,l=d>>>2&4,d>>>=l,u=d>>>1&2,d>>>=u,e=0,r=0|n[28212+((s|o|l|u|(r=d>>>1&1))+(d>>>r)<<2)>>2]}r?m=65:(l=e,o=a)}if((0|m)==65)for(s=r;;)if(a=(r=(d=(-8&n[s+4>>2])-c|0)>>>0<a>>>0)?d:a,e=r?s:e,(r=0|n[s+16>>2])||(r=0|n[s+20>>2]),r)s=r;else{l=e,o=a;break}if(((0|l)!=0?o>>>0<(0|n[6979])-c>>>0:0)?(h=l+c|0)>>>0>l>>>0:0){s=0|n[l+24>>2],t=0|n[l+12>>2];do if((0|t)==(0|l)){if(!(t=0|n[(e=l+20|0)>>2])&&!(t=0|n[(e=l+16|0)>>2])){t=0;break}for(;;)if(r=0|n[(a=t+20|0)>>2])t=r,e=a;else if(r=0|n[(a=t+16|0)>>2])t=r,e=a;else break;n[e>>2]=0}else _=0|n[l+8>>2],n[_+12>>2]=t,n[t+8>>2]=_;while(0)do if(s){if(r=28212+((e=0|n[l+28>>2])<<2)|0,(0|l)==(0|n[r>>2])){if(n[r>>2]=t,!t){i&=~(1<<e),n[6978]=i;break}}else if(n[((0|n[(_=s+16|0)>>2])==(0|l)?_:s+20|0)>>2]=t,!t)break;n[t+24>>2]=s,0|(e=0|n[l+16>>2])&&(n[t+16>>2]=e,n[e+24>>2]=t),(e=0|n[l+20>>2])&&(n[t+20>>2]=e,n[e+24>>2]=t)}while(0)t:do if(o>>>0<16)_=o+c|0,n[l+4>>2]=3|_,n[(_=l+_+4|0)>>2]=1|n[_>>2];else{if(n[l+4>>2]=3|c,n[h+4>>2]=1|o,n[h+o>>2]=o,t=o>>>3,o>>>0<256){r=27948+(t<<1<<2)|0,(e=0|n[6977])&(t=1<<t)?t=0|n[(e=r+8|0)>>2]:(n[6977]=e|t,t=r,e=r+8|0),n[e>>2]=h,n[t+12>>2]=h,n[h+8>>2]=t,n[h+12>>2]=r;break}if((t=o>>>8)?o>>>0>0xffffff?r=31:(x=t+1048320>>>16&8,v=(_=t<<x)+520192>>>16&4,_<<=v,r=o>>>(r=14-(v|x|(r=_+245760>>>16&2))+(_<<r>>>15)|0)+7&1|r<<1):r=0,t=28212+(r<<2)|0,n[h+28>>2]=r,n[(e=h+16|0)+4>>2]=0,n[e>>2]=0,!(i&(e=1<<r))){n[6978]=i|e,n[t>>2]=h,n[h+24>>2]=t,n[h+12>>2]=h,n[h+8>>2]=h;break}t=0|n[t>>2];u:do if((-8&n[t+4>>2])!=(0|o)){for(i=o<<((0|r)==31?0:25-(r>>>1)|0);e=0|n[(r=t+16+(i>>>31<<2)|0)>>2];){if((-8&n[e+4>>2])==(0|o)){t=e;break u}i<<=1,t=e}n[r>>2]=h,n[h+24>>2]=t,n[h+12>>2]=h,n[h+8>>2]=h;break t}while(0)_=0|n[(x=t+8|0)>>2],n[_+12>>2]=h,n[x>>2]=h,n[h+8>>2]=_,n[h+12>>2]=t,n[h+24>>2]=0}while(0)return _=l+8|0,I=b,0|_}d=c}else d=c;else d=-1;while(0)if((r=0|n[6979])>>>0>=d>>>0)return t=r-d|0,e=0|n[6982],t>>>0>15?(_=e+d|0,n[6982]=_,n[6979]=t,n[_+4>>2]=1|t,n[e+r>>2]=t,n[e+4>>2]=3|d):(n[6979]=0,n[6982]=0,n[e+4>>2]=3|r,n[(_=e+r+4|0)>>2]=1|n[_>>2]),_=e+8|0,I=b,0|_;if((o=0|n[6980])>>>0>d>>>0)return v=o-d|0,n[6980]=v,x=(_=0|n[6983])+d|0,n[6983]=x,n[x+4>>2]=1|v,n[_+4>>2]=3|d,_=_+8|0,I=b,0|_;if(0|n[7095]?e=0|n[7097]:(n[7097]=4096,n[7096]=4096,n[7098]=-1,n[7099]=-1,n[7100]=0,n[7088]=0,n[7095]=-16&A^0x55555558,e=4096),l=d+48|0,(c=(s=e+(u=d+47|0)|0)&(a=0-e|0))>>>0<=d>>>0||(0|(e=0|n[7087])?(A=(h=0|n[7085])+c|0)>>>0<=h>>>0|A>>>0>e>>>0:0))return _=0,I=b,0|_;c:do if(4&n[7088])t=0,m=143;else{r=0|n[6983];h:do if(r){for(i=28356;!((A=0|n[i>>2])>>>0<=r>>>0)||!(A+(0|n[i+4>>2])>>>0>r>>>0);)if(e=0|n[i+8>>2])i=e;else{m=128;break h}if((t=s-o&a)>>>0<0x7fffffff)if((0|(e=0|tO(0|t)))==((0|n[i>>2])+(0|n[i+4>>2])|0)){if((0|e)!=-1){o=t,s=e,m=145;break c}}else i=e,m=136;else t=0}else m=128;while(0)do if((0|m)==128)if((0|(r=0|tO(0)))!=-1?(t=r,f=(t=(((f=(p=0|n[7096])+-1|0)&t)==0?0:(f+t&0-p)-t|0)+c|0)+(p=0|n[7085])|0,t>>>0>d>>>0&t>>>0<0x7fffffff):0){if(0|(A=0|n[7087])?f>>>0<=p>>>0|f>>>0>A>>>0:0){t=0;break}if((0|(e=0|tO(0|t)))==(0|r)){o=t,s=r,m=145;break c}i=e,m=136}else t=0;while(0)do if((0|m)==136){if(r=0-t|0,!(t>>>0<0x7fffffff&(0|i)!=-1&l>>>0>t>>>0))if((0|i)==-1){t=0;break}else{o=t,s=i,m=145;break c}if((e=u-t+(e=0|n[7097])&0-e)>>>0>=0x7fffffff){o=t,s=i,m=145;break c}if((0|tO(0|e))==-1){tO(0|r),t=0;break}o=e+t|0,s=i,m=145;break c}while(0)n[7088]=4|n[7088],m=143}while(0)if((((0|m)==143?c>>>0<0x7fffffff:0)?(v=0|tO(0|c),y=(g=(f=0|tO(0))-v|0)>>>0>d+40>>>0,!((0|v)==-1|1^y|(0|v)!=-1&(0|f)!=-1&v>>>0<f>>>0^1)):0)&&(o=y?g:t,s=v,m=145),(0|m)==145){t=(0|n[7085])+o|0,n[7085]=t,t>>>0>n[7086]>>>0&&(n[7086]=t),u=0|n[6983];d:do if(u){for(t=28356;;){if((0|s)==((e=0|n[t>>2])+(r=0|n[t+4>>2])|0)){m=154;break}if(i=0|n[t+8>>2])t=i;else break}if(((0|m)==154?(x=t+4|0,(8&n[t+12>>2])==0):0)?s>>>0>u>>>0&e>>>0<=u>>>0:0){n[x>>2]=r+o,_=(0|n[6980])+o|0,v=(7&(v=u+8|0))==0?0:0-v&7,x=u+v|0,v=_-v|0,n[6983]=x,n[6980]=v,n[x+4>>2]=1|v,n[u+_+4>>2]=40,n[6984]=n[7099];break}for(s>>>0<n[6981]>>>0&&(n[6981]=s),r=s+o|0,t=28356;;){if((0|n[t>>2])==(0|r)){m=162;break}if(e=0|n[t+8>>2])t=e;else break}if((0|m)==162?(8&n[t+12>>2])==0:0){n[t>>2]=s,n[(h=t+4|0)>>2]=(0|n[h>>2])+o,h=s+8|0,h=s+((7&h)==0?0:0-h&7)|0,t=r+8|0,t=r+((7&t)==0?0:0-t&7)|0,c=h+d|0,l=t-h-d|0,n[h+4>>2]=3|d;A:do if((0|u)==(0|t))_=(0|n[6980])+l|0,n[6980]=_,n[6983]=c,n[c+4>>2]=1|_;else{if((0|n[6982])==(0|t)){_=(0|n[6979])+l|0,n[6979]=_,n[6982]=c,n[c+4>>2]=1|_,n[c+_>>2]=_;break}if((3&(e=0|n[t+4>>2]))==1){o=-8&e,i=e>>>3;p:do{if(e>>>0<256){if(e=0|n[t+8>>2],(0|(r=0|n[t+12>>2]))==(0|e)){n[6977]=n[6977]&~(1<<i);break}n[e+12>>2]=r,n[r+8>>2]=e;break}s=0|n[t+24>>2],e=0|n[t+12>>2];do if((0|e)==(0|t)){if(e=0|n[(i=(r=t+16|0)+4|0)>>2])r=i;else if(!(e=0|n[r>>2])){e=0;break}for(;;)if(i=0|n[(a=e+20|0)>>2])e=i,r=a;else if(i=0|n[(a=e+16|0)>>2])e=i,r=a;else break;n[r>>2]=0}else _=0|n[t+8>>2],n[_+12>>2]=e,n[e+8>>2]=_;while(0)if(!s)break;i=28212+((r=0|n[t+28>>2])<<2)|0;do if((0|n[i>>2])!=(0|t)){if(n[((0|n[(_=s+16|0)>>2])==(0|t)?_:s+20|0)>>2]=e,!e)break p}else{if(n[i>>2]=e,0|e)break;n[6978]=n[6978]&~(1<<r);break p}while(0)if(n[e+24>>2]=s,0|(i=0|n[(r=t+16|0)>>2])&&(n[e+16>>2]=i,n[i+24>>2]=e),!(r=0|n[r+4>>2]))break;n[e+20>>2]=r,n[r+24>>2]=e}while(0)t=t+o|0,a=o+l|0}else a=l;if(n[(t=t+4|0)>>2]=-2&n[t>>2],n[c+4>>2]=1|a,n[c+a>>2]=a,t=a>>>3,a>>>0<256){r=27948+(t<<1<<2)|0,(e=0|n[6977])&(t=1<<t)?t=0|n[(e=r+8|0)>>2]:(n[6977]=e|t,t=r,e=r+8|0),n[e>>2]=c,n[t+12>>2]=c,n[c+8>>2]=t,n[c+12>>2]=r;break}t=a>>>8;do if(t){if(a>>>0>0xffffff){i=31;break}x=t+1048320>>>16&8,v=(_=t<<x)+520192>>>16&4,_<<=v,i=a>>>(i=14-(v|x|(i=_+245760>>>16&2))+(_<<i>>>15)|0)+7&1|i<<1}else i=0;while(0)if(t=28212+(i<<2)|0,n[c+28>>2]=i,n[(e=c+16|0)+4>>2]=0,n[e>>2]=0,!((e=0|n[6978])&(r=1<<i))){n[6978]=e|r,n[t>>2]=c,n[c+24>>2]=t,n[c+12>>2]=c,n[c+8>>2]=c;break}t=0|n[t>>2];f:do if((-8&n[t+4>>2])!=(0|a)){for(i=a<<((0|i)==31?0:25-(i>>>1)|0);e=0|n[(r=t+16+(i>>>31<<2)|0)>>2];){if((-8&n[e+4>>2])==(0|a)){t=e;break f}i<<=1,t=e}n[r>>2]=c,n[c+24>>2]=t,n[c+12>>2]=c,n[c+8>>2]=c;break A}while(0)_=0|n[(x=t+8|0)>>2],n[_+12>>2]=c,n[x>>2]=c,n[c+8>>2]=_,n[c+12>>2]=t,n[c+24>>2]=0}while(0)return _=h+8|0,I=b,0|_}for(t=28356;!((e=0|n[t>>2])>>>0<=u>>>0)||!((_=e+(0|n[t+4>>2])|0)>>>0>u>>>0);)t=0|n[t+8>>2];e=(a=_+-47|0)+8|0,t=(e=(e=a+((7&e)==0?0:0-e&7)|0)>>>0<(a=u+16|0)>>>0?u:e)+8|0,r=o+-40|0,v=(7&(v=s+8|0))==0?0:0-v&7,x=s+v|0,v=r-v|0,n[6983]=x,n[6980]=v,n[x+4>>2]=1|v,n[s+r+4>>2]=40,n[6984]=n[7099],n[(r=e+4|0)>>2]=27,n[t>>2]=n[7089],n[t+4>>2]=n[7090],n[t+8>>2]=n[7091],n[t+12>>2]=n[7092],n[7089]=s,n[7090]=o,n[7092]=0,n[7091]=t,t=e+24|0;do x=t,n[(t=t+4|0)>>2]=7;while(x+8>>>0<_>>>0)if((0|e)!=(0|u)){if(s=e-u|0,n[r>>2]=-2&n[r>>2],n[u+4>>2]=1|s,n[e>>2]=s,t=s>>>3,s>>>0<256){r=27948+(t<<1<<2)|0,(e=0|n[6977])&(t=1<<t)?t=0|n[(e=r+8|0)>>2]:(n[6977]=e|t,t=r,e=r+8|0),n[e>>2]=u,n[t+12>>2]=u,n[u+8>>2]=t,n[u+12>>2]=r;break}if((t=s>>>8)?s>>>0>0xffffff?i=31:(x=t+1048320>>>16&8,v=(_=t<<x)+520192>>>16&4,_<<=v,i=s>>>(i=14-(v|x|(i=_+245760>>>16&2))+(_<<i>>>15)|0)+7&1|i<<1):i=0,r=28212+(i<<2)|0,n[u+28>>2]=i,n[u+20>>2]=0,n[a>>2]=0,!((t=0|n[6978])&(e=1<<i))){n[6978]=t|e,n[r>>2]=u,n[u+24>>2]=r,n[u+12>>2]=u,n[u+8>>2]=u;break}t=0|n[r>>2];m:do if((-8&n[t+4>>2])!=(0|s)){for(i=s<<((0|i)==31?0:25-(i>>>1)|0);e=0|n[(r=t+16+(i>>>31<<2)|0)>>2];){if((-8&n[e+4>>2])==(0|s)){t=e;break m}i<<=1,t=e}n[r>>2]=u,n[u+24>>2]=t,n[u+12>>2]=u,n[u+8>>2]=u;break d}while(0)_=0|n[(x=t+8|0)>>2],n[_+12>>2]=u,n[x>>2]=u,n[u+8>>2]=_,n[u+12>>2]=t,n[u+24>>2]=0}}else(0|(_=0|n[6981]))==0|s>>>0<_>>>0&&(n[6981]=s),n[7089]=s,n[7090]=o,n[7092]=0,n[6986]=n[7095],n[6985]=-1,n[6990]=27948,n[6989]=27948,n[6992]=27956,n[6991]=27956,n[6994]=27964,n[6993]=27964,n[6996]=27972,n[6995]=27972,n[6998]=27980,n[6997]=27980,n[7e3]=27988,n[6999]=27988,n[7002]=27996,n[7001]=27996,n[7004]=28004,n[7003]=28004,n[7006]=28012,n[7005]=28012,n[7008]=28020,n[7007]=28020,n[7010]=28028,n[7009]=28028,n[7012]=28036,n[7011]=28036,n[7014]=28044,n[7013]=28044,n[7016]=28052,n[7015]=28052,n[7018]=28060,n[7017]=28060,n[7020]=28068,n[7019]=28068,n[7022]=28076,n[7021]=28076,n[7024]=28084,n[7023]=28084,n[7026]=28092,n[7025]=28092,n[7028]=28100,n[7027]=28100,n[7030]=28108,n[7029]=28108,n[7032]=28116,n[7031]=28116,n[7034]=28124,n[7033]=28124,n[7036]=28132,n[7035]=28132,n[7038]=28140,n[7037]=28140,n[7040]=28148,n[7039]=28148,n[7042]=28156,n[7041]=28156,n[7044]=28164,n[7043]=28164,n[7046]=28172,n[7045]=28172,n[7048]=28180,n[7047]=28180,n[7050]=28188,n[7049]=28188,n[7052]=28196,n[7051]=28196,_=o+-40|0,v=(7&(v=s+8|0))==0?0:0-v&7,x=s+v|0,v=_-v|0,n[6983]=x,n[6980]=v,n[x+4>>2]=1|v,n[s+_+4>>2]=40,n[6984]=n[7099];while(0)if((t=0|n[6980])>>>0>d>>>0)return v=t-d|0,n[6980]=v,x=(_=0|n[6983])+d|0,n[6983]=x,n[x+4>>2]=1|v,n[_+4>>2]=3|d,_=_+8|0,I=b,0|_}return n[(_=27904)>>2]=12,_=0,I=b,0|_}function tg(e){var t=0,r=0,i=0,a=0,s=0,o=0,l=0,u=0;if(e|=0){r=e+-8|0,a=0|n[6981],u=r+(t=-8&(e=0|n[e+-4>>2]))|0;do if(1&e)l=r,o=r;else{if(i=0|n[r>>2],!(3&e)||(o=r+(0-i)|0,s=i+t|0,o>>>0<a>>>0))return;if((0|n[6982])==(0|o)){if((3&(t=0|n[(e=u+4|0)>>2]))!=3){l=o,t=s;break}n[6979]=s,n[e>>2]=-2&t,n[o+4>>2]=1|s,n[o+s>>2]=s;return}if(r=i>>>3,i>>>0<256){if(e=0|n[o+8>>2],(0|(t=0|n[o+12>>2]))==(0|e)){n[6977]=n[6977]&~(1<<r),l=o,t=s;break}n[e+12>>2]=t,n[t+8>>2]=e,l=o,t=s;break}a=0|n[o+24>>2],e=0|n[o+12>>2];do if((0|e)==(0|o)){if(e=0|n[(r=(t=o+16|0)+4|0)>>2])t=r;else if(!(e=0|n[t>>2])){e=0;break}for(;;)if(r=0|n[(i=e+20|0)>>2])e=r,t=i;else if(r=0|n[(i=e+16|0)>>2])e=r,t=i;else break;n[t>>2]=0}else l=0|n[o+8>>2],n[l+12>>2]=e,n[e+8>>2]=l;while(0)if(a){if(r=28212+((t=0|n[o+28>>2])<<2)|0,(0|n[r>>2])==(0|o)){if(n[r>>2]=e,!e){n[6978]=n[6978]&~(1<<t),l=o,t=s;break}}else if(n[((0|n[(l=a+16|0)>>2])==(0|o)?l:a+20|0)>>2]=e,!e){l=o,t=s;break}n[e+24>>2]=a,0|(r=0|n[(t=o+16|0)>>2])&&(n[e+16>>2]=r,n[r+24>>2]=e),(t=0|n[t+4>>2])&&(n[e+20>>2]=t,n[t+24>>2]=e),l=o,t=s}else l=o,t=s}while(0)if(!(o>>>0>=u>>>0)&&1&(i=0|n[(e=u+4|0)>>2])){if(2&i)n[e>>2]=-2&i,n[l+4>>2]=1|t,n[o+t>>2]=t,a=t;else{if((0|n[6983])==(0|u)){if(u=(0|n[6980])+t|0,n[6980]=u,n[6983]=l,n[l+4>>2]=1|u,(0|l)!=(0|n[6982]))return;n[6982]=0,n[6979]=0;return}if((0|n[6982])==(0|u)){u=(0|n[6979])+t|0,n[6979]=u,n[6982]=o,n[l+4>>2]=1|u,n[o+u>>2]=u;return}a=(-8&i)+t|0,r=i>>>3;do{if(i>>>0<256){if(t=0|n[u+8>>2],(0|(e=0|n[u+12>>2]))==(0|t)){n[6977]=n[6977]&~(1<<r);break}n[t+12>>2]=e,n[e+8>>2]=t;break}s=0|n[u+24>>2],e=0|n[u+12>>2];do if((0|e)==(0|u)){if(e=0|n[(r=(t=u+16|0)+4|0)>>2])t=r;else if(!(e=0|n[t>>2])){r=0;break}for(;;)if(r=0|n[(i=e+20|0)>>2])e=r,t=i;else if(r=0|n[(i=e+16|0)>>2])e=r,t=i;else break;n[t>>2]=0,r=e}else r=0|n[u+8>>2],n[r+12>>2]=e,n[e+8>>2]=r,r=e;while(0)if(0|s){if(t=28212+((e=0|n[u+28>>2])<<2)|0,(0|n[t>>2])==(0|u)){if(n[t>>2]=r,!r){n[6978]=n[6978]&~(1<<e);break}}else if(n[((0|n[(i=s+16|0)>>2])==(0|u)?i:s+20|0)>>2]=r,!r)break;n[r+24>>2]=s,0|(t=0|n[(e=u+16|0)>>2])&&(n[r+16>>2]=t,n[t+24>>2]=r),0|(e=0|n[e+4>>2])&&(n[r+20>>2]=e,n[e+24>>2]=r)}}while(0)if(n[l+4>>2]=1|a,n[o+a>>2]=a,(0|l)==(0|n[6982])){n[6979]=a;return}}if(e=a>>>3,a>>>0<256){r=27948+(e<<1<<2)|0,(t=0|n[6977])&(e=1<<e)?e=0|n[(t=r+8|0)>>2]:(n[6977]=t|e,e=r,t=r+8|0),n[t>>2]=l,n[e+12>>2]=l,n[l+8>>2]=e,n[l+12>>2]=r;return}(e=a>>>8)?a>>>0>0xffffff?i=31:(o=e+1048320>>>16&8,s=(u=e<<o)+520192>>>16&4,u<<=s,i=a>>>(i=14-(s|o|(i=u+245760>>>16&2))+(u<<i>>>15)|0)+7&1|i<<1):i=0,e=28212+(i<<2)|0,n[l+28>>2]=i,n[l+20>>2]=0,n[l+16>>2]=0,t=0|n[6978],r=1<<i;e:do if(t&r){e=0|n[e>>2];t:do if((-8&n[e+4>>2])!=(0|a)){for(i=a<<((0|i)==31?0:25-(i>>>1)|0);t=0|n[(r=e+16+(i>>>31<<2)|0)>>2];){if((-8&n[t+4>>2])==(0|a)){e=t;break t}i<<=1,e=t}n[r>>2]=l,n[l+24>>2]=e,n[l+12>>2]=l,n[l+8>>2]=l;break e}while(0)u=0|n[(o=e+8|0)>>2],n[u+12>>2]=l,n[o>>2]=l,n[l+8>>2]=u,n[l+12>>2]=e,n[l+24>>2]=0}else n[6978]=t|r,n[e>>2]=l,n[l+24>>2]=e,n[l+12>>2]=l,n[l+8>>2]=l;while(0)if(u=(0|n[6985])+-1|0,n[6985]=u,!(0|u)){for(e=28364;;)if(e=0|n[e>>2])e=e+8|0;else break;n[6985]=-1}}}}function ty(e,t){t|=0;var r=0;return(e|=0)?(r=0|x(t,e),(t|e)>>>0>65535&&(r=((r>>>0)/(e>>>0)|0)==(0|t)?r:-1)):r=0,(e=0|tm(r))&&3&n[e+-4>>2]&&tB(0|e,0,0|r),0|e}function tv(e,t,r,i){return e|=0,r|=0,T((t|=0)+(i|=0)+((r=e+r>>>0)>>>0<e>>>0|0)>>>0),0|r}function tx(e,t,r,i){return e|=0,t|=0,r|=0,i|=0,T(0|(i=t-i-(r>>>0>e>>>0|0)>>>0)),e-r>>>0}function t_(e){return((e|=0)?31-(0|S(e^e-1))|0:32)|0}function tb(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0;if(h=e,c=u=t,o=r,l=A=i,!c)return(s=(0|a)!=0,l)?(s&&(n[a>>2]=0|e,n[a+4>>2]=0&t),a=0,T(0|(A=0))):(s&&(n[a>>2]=(h>>>0)%(o>>>0),n[a+4>>2]=0),A=0,a=(h>>>0)/(o>>>0)>>>0,T(0|A)),0|a;s=(0|l)==0;do{if(o){if(!s){if((s=(0|S(0|l))-(0|S(0|c))|0)>>>0<=31){d=s+1|0,l=31-s|0,t=s-31>>31,o=d,e=h>>>(d>>>0)&t|c<<l,t=c>>>(d>>>0)&t,s=0,l=h<<l;break}if(!a)return a=0,T(0|(A=0)),0|a;return n[a>>2]=0|e,n[a+4>>2]=u|0&t,a=0,T(0|(A=0)),0|a}if((s=o-1|0)&o){f=64-(l=(0|S(0|o))+33-(0|S(0|c))|0)|0,u=(d=32-l|0)>>31,t=(p=l-32|0)>>31,o=l,e=d-1>>31&c>>>(p>>>0)|(c<<d|h>>>(l>>>0))&t,t&=c>>>(l>>>0),s=h<<f&u,l=(c<<f|h>>>(p>>>0))&u|h<<d&l-33>>31;break}if(0|a&&(n[a>>2]=s&h,n[a+4>>2]=0),(0|o)==1)return p=u|0&t,f=0|e,T(0|p),0|f;return p=c>>>((f=0|t_(0|o))>>>0),f=c<<32-f|h>>>(f>>>0),T(0|p),0|f}if(s)return 0|a&&(n[a>>2]=(c>>>0)%(o>>>0),n[a+4>>2]=0),p=0,f=(c>>>0)/(o>>>0)>>>0,T(0|p),0|f;if(!h)return 0|a&&(n[a>>2]=0,n[a+4>>2]=(c>>>0)%(l>>>0)),p=0,f=(c>>>0)/(l>>>0)>>>0,T(0|p),0|f;if(!((s=l-1|0)&l))return 0|a&&(n[a>>2]=0|e,n[a+4>>2]=s&c|0&t),p=0,f=c>>>(t_(0|l)>>>0),T(0|p),0|f;if((s=(0|S(0|l))-(0|S(0|c))|0)>>>0<=30){t=s+1|0,l=31-s|0,o=t,e=c<<l|h>>>(t>>>0),t=c>>>(t>>>0),s=0,l=h<<l;break}if(!a)return f=0,T(0|(p=0)),0|f;return n[a>>2]=0|e,n[a+4>>2]=u|0&t,f=0,T(0|(p=0)),0|f}while(0)if(o){c=0|tv(0|(d=0|r),0|(h=A|0&i),-1,-1),r=0|w(),u=l,l=0;do i=u,u=s>>>31|u<<1,s=l|s<<1,tx(0|c,0|r,0|(i=e<<1|i>>>31),0|(A=e>>>31|t<<1)),l=1&(p=(f=0|w())>>31|((0|f)<0?-1:0)<<1),e=0|tx(0|i,0|A,p&d,(((0|f)<0?-1:0)>>31|((0|f)<0?-1:0)<<1)&h),t=0|w(),o=o-1|0;while((0|o)!=0)c=u,u=0}else c=l,u=0,l=0;return o=0,0|a&&(n[a>>2]=e,n[a+4>>2]=t),p=s>>>31|(c|o)<<1|(o<<1|s>>>31)&0|u,f=s<<1&-2|l,T(0|p),0|f}function tS(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var n=0,a=0,s=0,o=0,l=0,u=0;return u=t>>31|((0|t)<0?-1:0)<<1,l=((0|t)<0?-1:0)>>31|((0|t)<0?-1:0)<<1,a=i>>31|((0|i)<0?-1:0)<<1,n=((0|i)<0?-1:0)>>31|((0|i)<0?-1:0)<<1,o=0|tx(u^e,l^t,0|u,0|l),s=0|w(),e=a^u,t=n^l,0|tx(tb(o,s,0|tx(a^r,n^i,0|a,0|n),0|w(),0)^e,w()^t,0|e,0|t)}function tT(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var n,a,s,o,l,u,c=0,h=0;return c=e,h=r,r=0|(n=0|c,a=0|h,s=0,o=0,l=0,u=0,u=65535&n,n=((s=0|x(l=65535&a,u))>>>16)+(0|x(l,o=n>>>16))|0,a=0|x(l=a>>>16,u),T((n>>>16)+(0|x(l,o))+((65535&n)+a>>>16)|0),n+a<<16|65535&s),e=0|w(),T((0|x(t,h))+(0|x(i,c))+e|0&e),0|r}function tw(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0;return a=I,I=I+16|0,l=0|a,o=t>>31|((0|t)<0?-1:0)<<1,s=((0|t)<0?-1:0)>>31|((0|t)<0?-1:0)<<1,c=i>>31|((0|i)<0?-1:0)<<1,u=((0|i)<0?-1:0)>>31|((0|i)<0?-1:0)<<1,tb(e=0|tx(o^e,s^t,0|o,0|s),t=0|w(),0|tx(c^r,u^i,0|c,0|u),0|w(),l),i=0|tx(n[l>>2]^o,n[l+4>>2]^s,0|o,0|s),r=0|w(),I=a,T(0|r),0|i}function tM(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0;return s=I,I=I+16|0,tb(e,t,r,i,a=0|s),I=s,T(0|n[a+4>>2]),0|n[a>>2]}function tE(e,t,r){return(e|=0,t|=0,(0|(r|=0))<32)?(T(t>>r),e>>>r|(t&(1<<r)-1)<<32-r):(T(((0|t)<0?-1:0)|0),t>>r-32)}function tC(e,t,r){return(e|=0,t|=0,(0|(r|=0))<32)?(T(t>>>r),e>>>r|(t&(1<<r)-1)<<32-r):(T(0),t>>>r-32)}function tR(e,t,r){return(e|=0,t|=0,(0|(r|=0))<32)?(T(t<<r|(e&(1<<r)-1<<32-r)>>>32-r),e<<r):(T(e<<r-32),0)}function tN(e,t,r){return e|=0,t|=0,(0|(t=0|S(t)))==32&&(t=t+(0|S(e))|0),T(0),0|t}function tP(e,t){return(t*=1,(e*=1)!=e)?+t:t!=t?+e:+b(+e,+t)}function tI(e,t){return(t*=1,(e*=1)!=e)?+t:t!=t?+e:+_(+e,+t)}function tL(e){return(e*=1)>=0?+l(e+.5):+v(e-.5)}function tD(e,t,r){e|=0,t|=0;var a=0,s=0,o=0;if((0|(r|=0))>=8192)return R(0|e,0|t,0|r),0|e;if(o=0|e,s=e+r|0,(3&e)==(3&t)){for(;3&e;){if(!r)return 0|o;i[0|e]=0|i[0|t],e=e+1|0,t=t+1|0,r=r-1|0}for(a=(r=-4&s)-64|0;(0|e)<=(0|a);)n[e>>2]=n[t>>2],n[e+4>>2]=n[t+4>>2],n[e+8>>2]=n[t+8>>2],n[e+12>>2]=n[t+12>>2],n[e+16>>2]=n[t+16>>2],n[e+20>>2]=n[t+20>>2],n[e+24>>2]=n[t+24>>2],n[e+28>>2]=n[t+28>>2],n[e+32>>2]=n[t+32>>2],n[e+36>>2]=n[t+36>>2],n[e+40>>2]=n[t+40>>2],n[e+44>>2]=n[t+44>>2],n[e+48>>2]=n[t+48>>2],n[e+52>>2]=n[t+52>>2],n[e+56>>2]=n[t+56>>2],n[e+60>>2]=n[t+60>>2],e=e+64|0,t=t+64|0;for(;(0|e)<(0|r);)n[e>>2]=n[t>>2],e=e+4|0,t=t+4|0}else for(r=s-4|0;(0|e)<(0|r);)i[0|e]=0|i[0|t],i[e+1|0]=0|i[t+1|0],i[e+2|0]=0|i[t+2|0],i[e+3|0]=0|i[t+3|0],e=e+4|0,t=t+4|0;for(;(0|e)<(0|s);)i[0|e]=0|i[0|t],e=e+1|0,t=t+1|0;return 0|o}function tB(e,t,r){e|=0,t|=0,r|=0;var a=0,s=0,o=0,l=0;if(o=e+r|0,t&=255,(0|r)>=67){for(;3&e;)i[0|e]=t,e=e+1|0;for(a=-4&o,l=t|t<<8|t<<16|t<<24,s=a-64|0;(0|e)<=(0|s);)n[e>>2]=l,n[e+4>>2]=l,n[e+8>>2]=l,n[e+12>>2]=l,n[e+16>>2]=l,n[e+20>>2]=l,n[e+24>>2]=l,n[e+28>>2]=l,n[e+32>>2]=l,n[e+36>>2]=l,n[e+40>>2]=l,n[e+44>>2]=l,n[e+48>>2]=l,n[e+52>>2]=l,n[e+56>>2]=l,n[e+60>>2]=l,e=e+64|0;for(;(0|e)<(0|a);)n[e>>2]=l,e=e+4|0}for(;(0|e)<(0|o);)i[0|e]=t,e=e+1|0;return o-r|0}function tF(e){return(e*=1)>=0?+l(e+.5):+v(e-.5)}function tO(e){e|=0;var t=0,r=0,i=0;return(i=0|C(),t=(r=0|n[o>>2])+e|0,(0|e)>0&(0|t)<(0|r)|(0|t)<0)?(P(0|t),E(12),-1):(0|t)>(0|i)&&!(0|N(0|t))?(E(12),-1):(n[o>>2]=t,0|r)}return{___divdi3:tS,___muldi3:tT,___remdi3:tw,___uremdi3:tM,_areNeighborCells:function(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0;if(d=I,I=I+64|0,h=d,l=d+56|0,!(!0&(0x78000000&t)==0x8000000&(!0&(0x78000000&i)==0x8000000)))return a=5,I=d,0|a;if((0|e)==(0|r)&(0|t)==(0|i))return n[a>>2]=0,a=0,I=d,0|a;if(o=0|tC(0|e,0|t,52),w(),o&=15,c=0|tC(0|r,0|i,52),w(),(0|o)!=(15&c))return a=12,I=d,0|a;if(s=o+-1|0,o>>>0>1){eE(e,t,s,h),eE(r,i,s,l),u=0|n[(c=h)>>2],c=0|n[c+4>>2];e:do if((0|u)==(0|n[l>>2])?(0|c)==(0|n[l+4>>2]):0){s=0|tC(0|e,0|t,0|(o=(15^o)*3|0)),w(),s&=7,o=0|tC(0|r,0|i,0|o),w(),o&=7;do if((0|s)==0|(0|o)==0)n[a>>2]=1,s=0;else if((0|s)==7)s=5;else{if((0|s)==1|(0|o)==1?0|eR(u,c):0){s=5;break}if((0|n[15536+(s<<2)>>2])!=(0|o)?(0|n[15568+(s<<2)>>2])!=(0|o):0)break e;n[a>>2]=1,s=0}while(0)return a=s,I=d,0|a}while(0)}o=(s=h)+56|0;do n[s>>2]=0,s=s+4|0;while((0|s)<(0|o))return L(e,t,1,h),s=(((((((0|n[(t=h)>>2])==(0|r)?(0|n[t+4>>2])==(0|i):0)?0:!((0|n[(t=h+8|0)>>2])==(0|r)?(0|n[t+4>>2])==(0|i):0))?!((0|n[(t=h+16|0)>>2])==(0|r)?(0|n[t+4>>2])==(0|i):0):0)?!((0|n[(t=h+24|0)>>2])==(0|r)?(0|n[t+4>>2])==(0|i):0):0)?!((0|n[(t=h+32|0)>>2])==(0|r)?(0|n[t+4>>2])==(0|i):0):0)?!((0|n[(t=h+40|0)>>2])==(0|r)?(0|n[t+4>>2])==(0|i):0):0)?((0|n[(s=h+48|0)>>2])==(0|r)?(0|n[s+4>>2])==(0|i):0)&1:1,n[a>>2]=s,a=0,I=d,0|a},_bitshift64Ashr:tE,_bitshift64Lshr:tC,_bitshift64Shl:tR,_calloc:ty,_cellAreaKm2:function(e,t,r){return e|=0,t|=0,r|=0,0|(e=0|eJ(e,t,r))||(a[r>>3]=6371.007180918475*a[r>>3]*6371.007180918475),0|e},_cellAreaM2:function(e,t,r){return e|=0,t|=0,r|=0,0|(e=0|eJ(e,t,r))||(a[r>>3]=6371.007180918475*a[r>>3]*6371007180.918475),0|e},_cellAreaRads2:eJ,_cellToBoundary:eV,_cellToCenterChild:eP,_cellToChildPos:function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0;if(v=I,I=I+16|0,g=v,y=0|tC(0|e,0|t,52),w(),y&=15,r>>>0>15)return y=4,I=v,0|y;if((0|y)<(0|r))return y=12,I=v,0|y;if((0|y)!=(0|r))if(s=tR(0|r,0,52)|e,l=w()|-0xf00001&t,(0|y)>(0|r)){u=r;do m=0|tR(7,0,(14-u|0)*3|0),u=u+1|0,s|=m,l=w()|l;while((0|u)<(0|y))m=s}else m=s;else m=e,l=t;f=0|tC(0|m,0|l,45),w();e:do if(0|V(127&f)){if(u=0|tC(0|m,0|l,52),w(),0|(u&=15))for(s=1;;){if(!(((f=0|tR(7,0,(15-s|0)*3|0))&m)==0&(w()&l)==0)){c=33;break e}if(s>>>0<u>>>0)s=s+1|0;else break}if(n[(f=i)>>2]=0,n[f+4>>2]=0,(0|y)>(0|r)){for(f=-0xf00001&t,p=y;;){if(A=p,(p=p+-1|0)>>>0>15|(0|y)<(0|p)){c=19;break}if((0|y)!=(0|p))if(s=tR(0|p,0,52)|e,u=w()|f,(0|y)<(0|A))d=s;else{c=p;do d=0|tR(7,0,(14-c|0)*3|0),c=c+1|0,s|=d,u=w()|u;while((0|c)<(0|y))d=s}else d=e,u=t;if(h=0|tC(0|d,0|u,45),w(),0|V(127&h)){h=0|tC(0|d,0|u,52),w(),h&=15;t:do if(h)for(c=1;;){if(s=0|tC(0|d,0|u,(15-c|0)*3|0),w(),0|(s&=7))break t;if(c>>>0<h>>>0)c=c+1|0;else{s=0;break}}else s=0;while(0)s=(0|s)==0&1}else s=0;if(u=0|tC(0|e,0|t,(15-A|0)*3|0),w(),(0|(u&=7))==7||(0|u)==1&(s=(0|s)!=0)){a=5,c=42;break}if(0|(d=u+(((0|u)!=0&s)<<31>>31)|0)&&(c=0|e4(7,0,c=y-A|0,((0|c)<0)<<31>>31),h=0|w(),s?(s=0|tS(0|(s=0|tv(0|(s=0|tT(0|c,0|h,5,0)),0|w(),-5,-1)),0|w(),6,0),s=0|tv(0|s,0|w(),1,0),u=0|w()):(s=c,u=h),A=0|tv(0|s,0|u,0|(A=0|tT(0|c,0|h,0|(A=d+-1|0),((0|A)<0)<<31>>31)),0|w()),h=0|tv(0|A,0|(d=0|w()),0|n[(h=i)>>2],0|n[h+4>>2]),d=0|w(),n[(A=i)>>2]=h,n[A+4>>2]=d),(0|p)<=(0|r)){c=37;break}}if((0|c)==19)M(27795,27122,1276,27158);else if((0|c)==37){a=0|n[(o=i)+4>>2],o=0|n[o>>2];break}else if((0|c)==42)return I=v,0|a}else a=0,o=0}else c=33;while(0)u:do if((0|c)==33){if(n[(f=i)>>2]=0,n[f+4>>2]=0,(0|y)>(0|r)){for(s=y;;){if(a=0|tC(0|e,0|t,(15-s|0)*3|0),w(),(0|(a&=7))==7){a=5;break}if(a=0|tT(0|(o=0|e4(7,0,o=y-s|0,((0|o)<0)<<31>>31)),0|w(),0|a,0),o=0|w(),o=0|tv(0|n[(f=i)>>2],0|n[f+4>>2],0|a,0|o),a=0|w(),n[(f=i)>>2]=o,n[f+4>>2]=a,(0|(s=s+-1|0))<=(0|r))break u}return I=v,0|a}a=0,o=0}while(0)return(0|eC(m,l,y,g)&&M(27795,27122,1236,27173),((0|a)>-1|(0|a)==-1&o>>>0>0xffffffff)&((0|(g=0|n[(y=g)+4>>2]))>(0|a)|((0|g)==(0|a)?n[y>>2]>>>0>o>>>0:0)))?(y=0,I=v,0|y):(M(27795,27122,1316,27158),0)},_cellToChildren:function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0;if(o=I,I=I+16|0,eG(s=o,e,t,r),(0|(e=0|n[(t=s)>>2]))==0&(0|(t=0|n[t+4>>2]))==0)return I=o,0;a=0,r=0;do n[(l=i+(a<<3)|0)>>2]=e,n[l+4>>2]=t,a=0|tv(0|a,0|r,1,0),r=0|w(),ej(s),e=0|n[(l=s)>>2],t=0|n[l+4>>2];while(!((0|e)==0&(0|t)==0))return I=o,0},_cellToChildrenSize:eC,_cellToLatLng:ez,_cellToLocalIj:function(e,t,r,i,a,s){e|=0,t|=0,r|=0,i|=0,a|=0,s|=0;var o,l,u,c=0,h=0;return(h=I,I=I+16|0,c=h,a)?e=15:(e=0|e2(e,t,r,i,c))||(o=0|c,l=0|s,u=0,u=0|n[o+8>>2],n[l>>2]=(0|n[o>>2])-u,n[l+4>>2]=(0|n[o+4>>2])-u,e=0),I=h,0|e},_cellToParent:eE,_cellToVertex:tc,_cellToVertexes:function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0;return(s=(0|eR(e,t))==0,a=(0|(i=0|tc(e,t,0,r)))==0,s)?!a||0|(i=0|tc(e,t,1,r+8|0))||0|(i=0|tc(e,t,2,r+16|0))||0|(i=0|tc(e,t,3,r+24|0))||(i=0|tc(e,t,4,r+32|0))?0|(s=i):0|tc(e,t,5,r+40|0):!a||0|(i=0|tc(e,t,1,r+8|0))||0|(i=0|tc(e,t,2,r+16|0))||0|(i=0|tc(e,t,3,r+24|0))||0|(i=0|tc(e,t,4,r+32|0))?0|(s=i):(n[(s=r+40|0)>>2]=0,n[s+4>>2]=0,0|(s=0))},_cellsToDirectedEdge:function(e,t,r,i,a){return(e|=0,t|=0,r|=0,i|=0,a|=0,(0|(r=0|k(e,t,r,i)))==7)?0|(a=11):(i=0|tR(0|r,0,56),t=-0x7f000001&t|w()|0x10000000,n[a>>2]=e|i,n[a+4>>2]=t,0|(a=0))},_cellsToLinkedMultiPolygon:function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0;if(o=I,I=I+32|0,i=o,0|(e=0|function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0,c=0,d=0,A=0,p=0;if(p=I,I=I+176|0,d=p,(0|t)<1)return th(r,0,0),A=0,I=p,0|A;for(c=0|tC(0|n[(c=e)>>2],0|n[c+4>>2],52),w(),th(r,(0|t)>6?t:6,15&c),c=0;!(0|(i=0|eV(0|n[(i=e+(c<<3)|0)>>2],0|n[i+4>>2],d)));){if((0|(i=0|n[d>>2]))>0){l=0;do o=d+8+(l<<4)|0,(s=0|function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0;if(s=~~(u(+(h(10,+(15-(0|n[e+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3])))%(0|n[e+4>>2]))>>>0,!(s=0|n[(0|n[e>>2])+(s<<2)>>2]))return 0|(r=0);if(!r){for(e=s;;){if(0|eX(e,t)){i=10;break}if(!(e=0|n[e+32>>2])){e=0,i=10;break}}if((0|i)==10)return 0|e}for(e=s;;){if(0|eX(e,t)?0|eX(e+16|0,r):0){i=10;break}if(!(e=0|n[e+32>>2])){e=0,i=10;break}}return(0|i)==10?0|e:0}(r,i=d+8+((0|(l=l+1|0))%(0|i)<<4)|0,o))?tp(r,s):function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0;(o=0|tm(40))||M(27872,27842,98,27885),n[o>>2]=n[t>>2],n[o+4>>2]=n[t+4>>2],n[o+8>>2]=n[t+8>>2],n[o+12>>2]=n[t+12>>2],n[(s=o+16|0)>>2]=n[r>>2],n[s+4>>2]=n[r+4>>2],n[s+8>>2]=n[r+8>>2],n[s+12>>2]=n[r+12>>2],n[o+32>>2]=0,s=~~(u(+(h(10,+(15-(0|n[e+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3])))%(0|n[e+4>>2]))>>>0,s=(0|n[e>>2])+(s<<2)|0,i=0|n[s>>2];do{if(i){for(;!(0|eX(i,t))||!(0|eX(i+16|0,r));)if(i=(0|(s=0|n[i+32>>2]))==0?i:s,!(0|n[i+32>>2])){l=10;break}if((0|l)==10){n[i+32>>2]=o;break}return tg(o),0|(l=i)}n[s>>2]=o}while(0)n[(l=e+8|0)>>2]=(0|n[l>>2])+1,l=o}(r,o,i),i=0|n[d>>2];while((0|l)<(0|i))}if((0|(c=c+1|0))>=(0|t)){i=0,A=13;break}}return(0|A)==13?(I=p,0|i):(td(r),A=i,I=p,0|A)}(e,t,s=o+16|0)))return r=e,I=o,0|r;if(n[r>>2]=0,n[r+4>>2]=0,n[r+8>>2]=0,0|(e=0|tA(s)))do{t=0|function(e){e|=0;var t=0,r=0,i=0;return((t=0|ty(1,12))||M(27280,27235,49,27293),0|(i=0|n[(r=e+4|0)>>2]))?n[(i=i+8|0)>>2]=t:(0|n[e>>2]&&M(27310,27235,61,27333),n[(i=e)>>2]=t),n[r>>2]=t,0|t}(r);do(function(e,t){e|=0,t|=0;var r=0,i=0;((i=0|tm(24))||M(27347,27235,78,27361),n[i>>2]=n[t>>2],n[i+4>>2]=n[t+4>>2],n[i+8>>2]=n[t+8>>2],n[i+12>>2]=n[t+12>>2],n[i+16>>2]=0,0|(r=0|n[(t=e+4|0)>>2]))?n[r+16>>2]=i:(0|n[e>>2]&&M(27376,27235,82,27361),n[e>>2]=i),n[t>>2]=i})(t,e),l=e+16|0,n[i>>2]=n[l>>2],n[i+4>>2]=n[l+4>>2],n[i+8>>2]=n[l+8>>2],n[i+12>>2]=n[l+12>>2],tp(s,e),e=0|function(e,t){e|=0,t|=0;var r=0;if(r=~~(u(+(h(10,+(15-(0|n[e+12>>2])|0))*(+a[t>>3]+ +a[t+8>>3])))%(0|n[e+4>>2]))>>>0,!(e=0|n[(0|n[e>>2])+(r<<2)>>2]))return 0|(r=0);for(;;){if(0|eX(e,t)){t=5;break}if(!(e=0|n[e+32>>2])){e=0,t=5;break}}return(0|t)==5?0|e:0}(s,i);while((0|e)!=0)e=0|tA(s)}while((0|e)!=0)return(td(s),e=0|function(e){e|=0;var t=0,r=0,i=0,s=0,o=0,l=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,w=0,E=0,C=0,R=0,N=0,P=0,I=0,L=0,D=0,B=0,F=0;if(0|n[(s=e+8|0)>>2])return 0|(F=1);if(!(i=0|n[e>>2]))return 0|(F=0);t=i,r=0;do r=r+1|0,t=0|n[t+8>>2];while((0|t)!=0)if(r>>>0<2)return 0|(F=0);(D=0|tm(r<<2))||M(27396,27235,317,27415),(L=0|tm(r<<5))||M(27437,27235,321,27415),n[e>>2]=0,n[(w=e+4|0)>>2]=0,n[s>>2]=0,r=0,I=0,T=0,p=0;e:for(;;){if(A=0|n[i>>2]){o=0,l=A;do{if(h=+a[l+8>>3],t=l,+u(+(h-(c=+a[(s=(d=(0|(l=0|n[l+16>>2]))==0)?A:l)+8>>3])))>3.141592653589793){F=14;break}o+=(c-h)*(+a[t>>3]+ +a[s>>3])}while(!d)if((0|F)==14){F=0,o=0,t=A;do S=+a[t+8>>3],b=+a[(N=(0|(N=0|n[(P=t+16|0)>>2]))==0?A:N)+8>>3],o+=(+a[t>>3]+ +a[N>>3])*((b<0?b+6.283185307179586:b)-(S<0?S+6.283185307179586:S)),t=0|n[((0|t)==0?i:P)>>2];while((0|t)!=0)}o>0?(n[D+(I<<2)>>2]=i,I=I+1|0,s=T,t=p):F=19}else F=19;if((0|F)==19){F=0;do if(r){if(0|n[(t=r+8|0)>>2]){F=21;break e}if(!(r=0|ty(1,12))){F=23;break e}n[t>>2]=r,s=r+4|0,l=r,t=p}else if(p){s=w,l=p+8|0,t=i,r=e;break}else if(0|n[e>>2]){F=27;break e}else{s=w,l=e,t=i,r=e;break}while(0)if(n[l>>2]=i,n[s>>2]=i,l=L+(T<<5)|0,d=0|n[i>>2]){for(a[(A=L+(T<<5)+8|0)>>3]=17976931348623157e292,a[(p=L+(T<<5)+24|0)>>3]=17976931348623157e292,a[l>>3]=-17976931348623157e292,a[(f=L+(T<<5)+16|0)>>3]=-17976931348623157e292,x=17976931348623157e292,_=-17976931348623157e292,s=0,m=d,h=17976931348623157e292,y=17976931348623157e292,v=-17976931348623157e292,c=-17976931348623157e292;o=+a[m>>3],S=+a[m+8>>3],b=+a[((g=(0|(m=0|n[m+16>>2]))==0)?d:m)+8>>3],o<h&&(a[A>>3]=o,h=o),S<y&&(a[p>>3]=S,y=S),o>v?a[l>>3]=o:o=v,S>c&&(a[f>>3]=S,c=S),x=S>0&S<x?S:x,_=S<0&S>_?S:_,s|=+u(+(S-b))>3.141592653589793,!g;)v=o;s&&(a[f>>3]=_,a[p>>3]=x)}else n[l>>2]=0,n[l+4>>2]=0,n[l+8>>2]=0,n[l+12>>2]=0,n[l+16>>2]=0,n[l+20>>2]=0,n[l+24>>2]=0,n[l+28>>2]=0;s=T+1|0}if(i=0|n[(P=i+8|0)>>2],n[P>>2]=0,i)T=s,p=t;else{F=45;break}}if((0|F)==21)M(27213,27235,35,27247);else if((0|F)==23)M(27267,27235,37,27247);else if((0|F)==27)M(27310,27235,61,27333);else if((0|F)==45){t:do if((0|I)>0){for(P=(0|s)==0,R=s<<2,N=(0|e)==0,C=0,t=0;;){if(E=0|n[D+(C<<2)>>2],P)F=73;else{if(!(T=0|tm(R))){F=50;break}if(!(w=0|tm(R))){F=52;break}u:do if(N)r=0;else{for(s=0,r=0,l=e;;)if(i=L+(s<<5)|0,0|e1(0|n[l>>2],i,0|n[E>>2])?(n[T+(r<<2)>>2]=l,n[w+(r<<2)>>2]=i,g=r+1|0):g=r,l=0|n[l+8>>2])s=s+1|0,r=g;else break;if((0|g)>0)if(i=0|n[T>>2],(0|g)==1)r=i;else for(f=0,m=-1,r=i,p=i;;){for(d=0|n[p>>2],i=0,l=0;A=(0|(s=0|n[n[T+(l<<2)>>2]>>2]))==(0|d)?i:i+(1&e1(s,0|n[w+(l<<2)>>2],0|n[d>>2]))|0,(0|(l=l+1|0))!=(0|g);)i=A;if(r=(s=(0|A)>(0|m))?p:r,(0|(i=f+1|0))==(0|g))break u;f=i,m=s?A:m,p=0|n[T+(i<<2)>>2]}else r=0}while(0)if(tg(T),tg(w),r){if(i=0|n[(s=r+4|0)>>2])r=i+8|0;else if(0|n[r>>2]){F=70;break}n[r>>2]=E,n[s>>2]=E}else F=73}if((0|F)==73){if(F=0,0|(t=0|n[E>>2]))do w=t,t=0|n[t+16>>2],tg(w);while((0|t)!=0)tg(E),t=1}if((0|(C=C+1|0))>=(0|I)){B=t;break t}}(0|F)==50?M(27452,27235,249,27471):(0|F)==52?M(27490,27235,252,27471):(0|F)==70&&M(27310,27235,61,27333)}else B=0;while(0)return tg(D),tg(L),0|(F=B)}return 0}(r))?(e0(r),l=e):l=0,I=o,0|l},_childPosToCell:function(e,t,r,i,a,s){e|=0,t|=0,r|=0,i|=0,a|=0,s|=0;var o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0;if(d=I,I=I+16|0,o=d,a>>>0>15)return s=4,I=d,0|s;if(l=0|tC(0|r,0|i,52),w(),(0|(l&=15))>(0|a))return s=12,I=d,0|s;if(0|eC(r,i,a,o)&&M(27795,27122,1236,27173),!(((0|t)>-1|(0|t)==-1&e>>>0>0xffffffff)&((0|(c=0|n[(h=o)+4>>2]))>(0|t)|((0|c)==(0|t)?n[h>>2]>>>0>e>>>0:0))))return s=2,I=d,0|s;h=a-l|0,a=0|tR(0|a,0,52),u=w()|-0xf00001&i,n[(c=s)>>2]=a|r,n[c+4>>2]=u,c=0|tC(0|r,0|i,45),w();e:do if(0|V(127&c)){if(0|l)for(o=1;;){if(!(((c=0|tR(7,0,(15-o|0)*3|0))&r)==0&(w()&i)==0))break e;if(o>>>0<l>>>0)o=o+1|0;else break}if((0|h)<1)return s=0,I=d,0|s;for(c=15^l,i=-1,u=1,o=1;;){l=0|e4(7,0,l=h-u|0,((0|l)<0)<<31>>31),r=0|w();do{if(o){if(o=0|tS(0|(o=0|tv(0|(o=0|tT(0|l,0|r,5,0)),0|w(),-5,-1)),0|w(),6,0),(0|t)>(0|(a=0|w()))|(0|t)==(0|a)&e>>>0>o>>>0){t=0|tx(0|(t=0|tv(0|e,0|t,-1,-1)),0|w(),0|o,0|a),o=0|w(),f=0|n[(A=s)>>2],A=0|n[A+4>>2],p=0|tR(7,0,0|(m=(c+i|0)*3|0)),A&=~(0|w()),m=0|tR(0|(a=0|tv(0|(i=0|tS(0|t,0|o,0|l,0|r)),0|(e=0|w()),2,0)),0|w(),0|m),A=w()|A,n[(a=s)>>2]=m|f&~p,n[a+4>>2]=A,e=0|tx(0|t,0|o,0|(e=0|tT(0|i,0|e,0|l,0|r)),0|w()),o=0,t=0|w();break}p=0|n[(m=s)>>2],m=0|n[m+4>>2],f=0|tR(7,0,(c+i|0)*3|0),m&=~(0|w()),n[(o=s)>>2]=p&~f,n[o+4>>2]=m,o=1;break}a=0|n[(p=s)>>2],p=0|n[p+4>>2],A=0|tR(7,0,0|(i=(c+i|0)*3|0)),p&=~(0|w()),i=0|tR(0|(m=0|tS(0|e,0|t,0|l,0|r)),0|(o=0|w()),0|i),p=w()|p,n[(f=s)>>2]=i|a&~A,n[f+4>>2]=p,e=0|tx(0|e,0|t,0|(o=0|tT(0|m,0|o,0|l,0|r)),0|w()),o=0,t=0|w()}while(0)if((0|h)>(0|u))i=~u,u=u+1|0;else{t=0;break}}return I=d,0|t}while(0)if((0|h)<1)return m=0,I=d,0|m;for(a=15^l,o=1;;){if(f=0|e4(7,0,f=h-o|0,((0|f)<0)<<31>>31),m=0|w(),r=0|n[(u=s)>>2],u=0|n[u+4>>2],i=0|tR(7,0,0|(l=(a-o|0)*3|0)),u&=~(0|w()),l=0|tR(0|(A=0|tS(0|e,0|t,0|f,0|m)),0|(p=0|w()),0|l),u=w()|u,n[(c=s)>>2]=l|r&~i,n[c+4>>2]=u,e=0|tx(0|e,0|t,0|(m=0|tT(0|A,0|p,0|f,0|m)),0|w()),t=0|w(),(0|h)<=(0|o)){t=0;break}o=o+1|0}return I=d,0|t},_compactCells:function(e,t,r,i){e|=0,t|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,E=0,C=0,R=0,N=0,P=0,I=0;if((0|(r|=0))==0&(0|(i|=0))==0)return 0|(I=0);if(s=0|n[(a=e)>>2],!0&(0xf00000&(a=0|n[a+4>>2]))==0){if(!((0|i)>0|(0|i)==0&r>>>0>0)||(n[(I=t)>>2]=s,n[I+4>>2]=a,(0|r)==1&(0|i)==0))return 0|(I=0);a=1,s=0;do P=0|n[(N=e+(a<<3)|0)+4>>2],n[(I=t+(a<<3)|0)>>2]=n[N>>2],n[I+4>>2]=P,a=0|tv(0|a,0|s,1,0),s=0|w();while((0|s)<(0|i)|(0|s)==(0|i)&a>>>0<r>>>0)return 0|(a=0)}if(!(P=0|tm(R=r<<3)))return 0|(I=13);if(tD(0|P,0|e,0|R),!(N=0|ty(r,8)))return tg(P),0|(I=13);e:for(;;){E=0|tC(0|(c=0|n[(a=P)>>2]),0|(a=0|n[a+4>>2]),52),w(),E&=15,C=E+-1|0,T=(0|E)!=0,S=(0|i)>0|(0|i)==0&r>>>0>0;t:do if(T&S){if(v=0|tR(0|C,0,52),x=0|w(),C>>>0>15){if(!((0|c)==0&(0|a)==0)){I=16;break e}for(s=0,e=0;;){if(s=0|tv(0|s,0|e,1,0),!((0|(e=0|w()))<(0|i)|(0|e)==(0|i)&s>>>0<r>>>0))break t;if(!((0|(b=0|n[(o=P+(s<<3)|0)>>2]))==0&(0|(o=0|n[o+4>>2]))==0)){a=o,I=16;break e}}}for(l=c,e=a,s=0,o=0;;){if(!((0|l)==0&(0|e)==0)){if(!(!0&(0x7000000&e)==0)){I=21;break e}if(h=0|tC(0|l,0|e,52),w(),(0|(h&=15))<(0|C)){a=12,I=27;break e}if((0|h)!=(0|C)&&(l|=v,e=-0xf00001&e|x,h>>>0>=E>>>0)){u=C;do b=0|tR(7,0,(14-u|0)*3|0),u=u+1|0,l|=b,e=w()|e;while(u>>>0<h>>>0)}if(A=0|tM(0|l,0|e,0|r,0|i),p=0|w(),!((0|(d=0|n[(h=u=N+(A<<3)|0)>>2]))==0&(0|(h=0|n[h+4>>2]))==0)){g=0,y=0;do{if((0|g)>(0|i)|(0|g)==(0|i)&y>>>0>r>>>0){I=31;break e}if((0|d)==(0|l)&(-0x7000001&h)==(0|e)){f=0|tC(0|d,0|h,56),w(),f&=7,m=f+1|0,b=0|tC(0|d,0|h,45),w();u:do if(0|V(127&b)){if(d=0|tC(0|d,0|h,52),w(),!(d&=15)){h=6;break}for(h=1;;){if(!(((b=0|tR(7,0,(15-h|0)*3|0))&l)==0&(w()&e)==0)){h=7;break u}if(h>>>0<d>>>0)h=h+1|0;else{h=6;break}}}else h=7;while(0)if(f+2>>>0>h>>>0){I=41;break e}b=0|tR(0|m,0,56),e=w()|-0x7000001&e,n[(_=u)>>2]=0,n[_+4>>2]=0,l|=b}else A=0|tw(0|(A=0|tv(0|A,0|p,1,0)),0|w(),0|r,0|i),p=0|w();y=0|tv(0|y,0|g,1,0),g=0|w(),d=0|n[(h=u=N+(A<<3)|0)>>2],h=0|n[h+4>>2]}while(!((0|d)==0&(0|h)==0))}n[(b=u)>>2]=l,n[b+4>>2]=e}if(s=0|tv(0|s,0|o,1,0),!((0|(o=0|w()))<(0|i)|(0|o)==(0|i)&s>>>0<r>>>0))break t;l=0|n[(e=P+(s<<3)|0)>>2],e=0|n[e+4>>2]}}while(0)if(b=0|tv(0|r,0|i,5,0),(_=0|w())>>>0<0|(0|_)==0&b>>>0<11){I=85;break}if(b=0|tS(0|r,0|i,6,0),w(),!(b=0|ty(b,8))){I=48;break}do if(S){for(m=0,e=0,f=0,g=0;;){if((0|(s=0|n[(o=h=N+(m<<3)|0)>>2]))==0&(0|(o=0|n[o+4>>2]))==0)_=f;else{d=0|tC(0|s,0|o,56),w(),d&=7,l=d+1|0,A=-0x7000001&o,_=0|tC(0|s,0|o,45),w();c:do if(0|V(127&_)){if(p=0|tC(0|s,0|o,52),w(),0|(p&=15))for(u=1;;){if(!((s&(_=0|tR(7,0,(15-u|0)*3|0)))==0&(A&w())==0))break c;if(u>>>0<p>>>0)u=u+1|0;else break}s|=o=0|tR(0|l,0,56),o=w()|A,n[(l=h)>>2]=s,n[l+4>>2]=o,l=d+2|0}while(0)(0|l)==7?(n[(_=b+(e<<3)|0)>>2]=s,n[_+4>>2]=-0x7000001&o,e=0|tv(0|e,0|f,1,0),_=0|w()):_=f}if(m=0|tv(0|m,0|g,1,0),(0|(g=0|w()))<(0|i)|(0|g)==(0|i)&m>>>0<r>>>0)f=_;else break}if(S){if(y=C>>>0>15,v=0|tR(0|C,0,52),x=0|w(),!T){for(s=0,u=0,l=0,o=0;(0|c)==0&(0|a)==0||(n[(C=t+(s<<3)|0)>>2]=c,n[C+4>>2]=a,s=0|tv(0|s,0|u,1,0),u=0|w()),l=0|tv(0|l,0|o,1,0),(0|(o=0|w()))<(0|i)|(0|o)==(0|i)&l>>>0<r>>>0;)c=0|n[(a=P+(l<<3)|0)>>2],a=0|n[a+4>>2];a=_;break}for(s=0,u=0,o=0,l=0;;){do if(!((0|c)==0&(0|a)==0)){if(p=0|tC(0|c,0|a,52),w(),y|(0|(p&=15))<(0|C)){I=80;break e}if((0|p)!=(0|C)){if(h=c|v,d=-0xf00001&a|x,p>>>0>=E>>>0){A=C;do T=0|tR(7,0,(14-A|0)*3|0),A=A+1|0,h|=T,d=w()|d;while(A>>>0<p>>>0)}}else h=c,d=a;f=0|tM(0|h,0|d,0|r,0|i),A=0,p=0,g=0|w();do{if((0|A)>(0|i)|(0|A)==(0|i)&p>>>0>r>>>0){I=81;break e}if((-0x7000001&(m=0|n[(T=N+(f<<3)|0)+4>>2]))==(0|d)?(0|n[T>>2])==(0|h):0){I=65;break}f=0|tw(0|(T=0|tv(0|f,0|g,1,0)),0|w(),0|r,0|i),g=0|w(),p=0|tv(0|p,0|A,1,0),A=0|w(),T=N+(f<<3)|0}while(!((0|n[T>>2])==(0|h)?(0|n[T+4>>2])==(0|d):0))if((0|I)==65?(I=0,!0&(0x7000000&m)==0x6000000):0)break;n[(T=t+(s<<3)|0)>>2]=c,n[T+4>>2]=a,s=0|tv(0|s,0|u,1,0),u=0|w()}while(0)if(o=0|tv(0|o,0|l,1,0),!((0|(l=0|w()))<(0|i)|(0|l)==(0|i)&o>>>0<r>>>0))break;c=0|n[(a=P+(o<<3)|0)>>2],a=0|n[a+4>>2]}a=_}else s=0,a=_}else s=0,e=0,a=0;while(0)if(tB(0|N,0,0|R),tD(0|P,0|b,e<<3),tg(b),(0|e)==0&(0|a)==0){I=89;break}t=t+(s<<3)|0,i=a,r=e}if((0|I)==16)!0&(0x7000000&a)==0?(a=4,I=27):I=21;else if((0|I)==31)M(27795,27122,529,27132);else{if((0|I)==41)return tg(P),tg(N),0|(I=10);if((0|I)==48)return tg(P),tg(N),0|(I=13);(0|I)==80?M(27795,27122,620,27132):(0|I)==81?M(27795,27122,632,27132):(0|I)==85&&(tD(0|t,0|P,r<<3),I=89)}return(0|I)==21?(tg(P),tg(N),0|(I=5)):(0|I)==27?(tg(P),tg(N),0|(I=a)):(0|I)==89?(tg(P),tg(N),0|(I=0)):0},_destroyLinkedMultiPolygon:e0,_directedEdgeToBoundary:eg,_directedEdgeToCells:function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0;return(a=I,I=I+16|0,i=a,!0&(0x78000000&t)==0x10000000)?(s=-0x7f000001&t|0x8000000,n[(o=r)>>2]=e,n[o+4>>2]=s,n[i>>2]=0,t=0|tC(0|e,0|t,56),w(),i=0|O(e,s,7&t,i,r+8|0)):i=6,I=a,0|i},_edgeLengthKm:function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0,u=0,h=0,p=0,f=0;if(u=I,I=I+176|0,0|(e=0|eg(e,t,l=u)))return l=e,o=6371.007180918475*a[r>>3],a[r>>3]=o,I=u,0|l;if(a[r>>3]=0,(0|(e=0|n[l>>2]))<=1)return l=0,o=0,a[r>>3]=o,I=u,0|l;t=e+-1|0,e=0,i=+a[l+8>>3],s=+a[l+16>>3],o=0;do e=e+1|0,p=i,f=+A(+(((i=+a[l+8+(e<<4)>>3])-p)*.5)),h=s,o+=2*y(+c(+(h=f*f+(h=+A(+(((s=+a[l+8+(e<<4)+8>>3])-h)*.5)))*(d(+p)*d(+i)*h))),+c(+(1-h)));while((0|e)!=(0|t))return a[r>>3]=o,l=0,f=6371.007180918475*o,a[r>>3]=f,I=u,0|l},_edgeLengthM:function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0,u=0,h=0,p=0,f=0;if(u=I,I=I+176|0,0|(e=0|eg(e,t,l=u)))return l=e,o=6371.007180918475*a[r>>3]*1e3,a[r>>3]=o,I=u,0|l;if(a[r>>3]=0,(0|(e=0|n[l>>2]))<=1)return l=0,o=0,a[r>>3]=o,I=u,0|l;t=e+-1|0,e=0,i=+a[l+8>>3],s=+a[l+16>>3],o=0;do e=e+1|0,p=i,f=+A(+(((i=+a[l+8+(e<<4)>>3])-p)*.5)),h=s,o+=2*y(+c(+(h=f*f+(h=+A(+(((s=+a[l+8+(e<<4)+8>>3])-h)*.5)))*(d(+p)*d(+i)*h))),+c(+(1-h)));while((0|e)!=(0|t))return a[r>>3]=o,l=0,f=6371.007180918475*o*1e3,a[r>>3]=f,I=u,0|l},_edgeLengthRads:function(e,t,r){e|=0,t|=0,r|=0;var i=0,s=0,o=0,l=0,u=0,h=0,p=0,f=0;if(u=I,I=I+176|0,0|(e=0|eg(e,t,l=u)))return l=e,I=u,0|l;if(a[r>>3]=0,(0|(e=0|n[l>>2]))<=1)return l=0,I=u,0|l;t=e+-1|0,e=0,i=+a[l+8>>3],s=+a[l+16>>3],o=0;do e=e+1|0,p=i,f=+A(+(((i=+a[l+8+(e<<4)>>3])-p)*.5)),h=s,o+=2*y(+c(+(h=f*f+(h=+A(+(((s=+a[l+8+(e<<4)+8>>3])-h)*.5)))*(d(+i)*d(+p)*h))),+c(+(1-h)));while((0|e)<(0|t))return a[r>>3]=o,l=0,I=u,0|l},_emscripten_replace_memory:function(e){return i=new Int8Array(e),new Uint8Array(e),n=new Int32Array(e),new Float32Array(e),a=new Float64Array(e),r=e,!0},_free:tg,_getBaseCellNumber:eT,_getDirectedEdgeDestination:function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0;return(a=I,I=I+16|0,n[(i=a)>>2]=0,!0&(0x78000000&t)==0x10000000)?(s=0|tC(0|e,0|t,56),w(),i=0|O(e,-0x7f000001&t|0x8000000,7&s,i,r)):i=6,I=a,0|i},_getDirectedEdgeOrigin:function(e,t,r){return(e|=0,r|=0,!0&(0x78000000&(t|=0))==0x10000000)?(n[r>>2]=e,n[r+4>>2]=-0x7f000001&t|0x8000000,0|(r=0)):0|(r=6)},_getHexagonAreaAvgKm2:eY,_getHexagonAreaAvgM2:function(e,t){return(t|=0,(e|=0)>>>0>15)?0|(t=4):(a[t>>3]=+a[20784+(e<<3)>>3],0|(t=0))},_getHexagonEdgeLengthAvgKm:function(e,t){return(t|=0,(e|=0)>>>0>15)?0|(t=4):(a[t>>3]=+a[20912+(e<<3)>>3],0|(t=0))},_getHexagonEdgeLengthAvgM:function(e,t){return(t|=0,(e|=0)>>>0>15)?0|(t=4):(a[t>>3]=+a[21040+(e<<3)>>3],0|(t=0))},_getIcosahedronFaces:function e(t,r,i){t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0;A=I,I=I+128|0,h=A+112|0,o=A+96|0,d=A,s=0|tC(0|t,0|r,52),w(),u=15&s,n[h>>2]=u,l=0|tC(0|t,0|r,45),w(),l&=127;e:do if(0|V(l)){if(0|u)for(a=1;;){if(!(((c=0|tR(7,0,(15-a|0)*3|0))&t)==0&(w()&r)==0)){s=0;break e}if(a>>>0<u>>>0)a=a+1|0;else break}if(!(1&s))return c=0|tR(u+1|0,0,52),d=w()|-0xf00001&r,d=0|e((c|t)&~(h=0|tR(7,0,(14-u|0)*3|0)),d&~(0|w()),i),I=A,0|d;s=1}else s=0;while(0)if(!(a=0|ek(t,r,o))){s?(ex(o,h,d),c=5):(eS(o,h,d),c=6);t:do if(0|V(l))if(u)for(a=1;;){if(!(((l=0|tR(7,0,(15-a|0)*3|0))&t)==0&(w()&r)==0)){t=2;break t}if(a>>>0<u>>>0)a=a+1|0;else{t=5;break}}else t=5;else t=2;while(0)tB(0|i,-1,t<<2);u:do if(s)for(o=0;;){if(!function(e,t){e|=0,t|=0;var r=0;do r=0|e_(e,t,0,1);while((0|r)==2)}(l=d+(o<<4)|0,0|n[h>>2]),l=0|n[l>>2],(0|(u=0|n[i>>2]))==-1|(0|u)==(0|l))a=i;else{s=0;do{if((s=s+1|0)>>>0>=t>>>0){a=1;break u}u=0|n[(a=i+(s<<2)|0)>>2]}while(!((0|u)==-1|(0|u)==(0|l)))}if(n[a>>2]=l,(o=o+1|0)>>>0>=c>>>0){a=0;break}}else for(o=0;;){if(e_(l=d+(o<<4)|0,0|n[h>>2],0,1),l=0|n[l>>2],(0|(u=0|n[i>>2]))==-1|(0|u)==(0|l))a=i;else{s=0;do{if((s=s+1|0)>>>0>=t>>>0){a=1;break u}u=0|n[(a=i+(s<<2)|0)>>2]}while(!((0|u)==-1|(0|u)==(0|l)))}if(n[a>>2]=l,(o=o+1|0)>>>0>=c>>>0){a=0;break}}while(0)}return d=a,I=A,0|d},_getNumCells:eK,_getPentagons:eq,_getRes0Cells:function(e){e|=0;var t=0,r=0,i=0;t=0;do tR(0|t,0,45),i=0x8001fff|w(),n[(r=e+(t<<3)|0)>>2]=-1,n[r+4>>2]=i,t=t+1|0;while((0|t)!=122)return 0},_getResolution:function(e,t){return e|=0,t|=0,t=0|tC(0|e,0|t,52),w(),15&t},_greatCircleDistanceKm:e$,_greatCircleDistanceM:function(e,t){e|=0,t|=0;var r=0,i=0,n=0,s=0;return+(2*y(+c(+(r=(s=+A(+(((n=+a[t>>3])-(i=+a[e>>3]))*.5)))*s+(r=+A(+((a[t+8>>3]-a[e+8>>3])*.5)))*(d(+n)*d(+i)*r))),+c(+(1-r)))*6371007.180918475)},_greatCircleDistanceRads:function(e,t){e|=0,t|=0;var r=0,i=0,n=0,s=0;return+(2*y(+c(+(r=(s=+A(+(((n=+a[t>>3])-(i=+a[e>>3]))*.5)))*s+(r=+A(+((a[t+8>>3]-a[e+8>>3])*.5)))*(d(+n)*d(+i)*r))),+c(+(1-r))))},_gridDisk:L,_gridDiskDistances:D,_gridDistance:function(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0;return(u=I,I=I+32|0,o=u+12|0,l=u,0|(s=0|e2(e,t,e,t,o)))?l=s:0|(e=0|e2(e,t,r,i,l))?l=e:(o=0|ef(o,l),n[(l=a)>>2]=o,n[l+4>>2]=((0|o)<0)<<31>>31,l=0),I=u,0|l},_gridPathCells:function(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,E=0,C=0;if(E=I,I=I+48|0,S=E+24|0,o=E+12|0,T=E,!(s=0|e2(e,t,e,t,S))&&!(s=0|e2(e,t,r,i,o))){b=((0|(_=0|ef(S,o)))<0)<<31>>31,n[S>>2]=0,n[S+4>>2]=0,n[S+8>>2]=0,n[o>>2]=0,n[o+4>>2]=0,n[o+8>>2]=0,0|e2(e,t,e,t,S)&&M(27795,27538,692,27747),0|e2(e,t,r,i,o)&&M(27795,27538,697,27747),em(S),em(o),d=(0|_)==0?0:1/(0|_),r=0|n[S>>2],g=d*((0|n[o>>2])-r|0),i=0|n[(y=S+4|0)>>2],v=d*((0|n[o+4>>2])-i|0),s=0|n[(x=S+8|0)>>2],d*=(0|n[o+8>>2])-s|0,n[T>>2]=r,n[(A=T+4|0)>>2]=i,n[(p=T+8|0)>>2]=s;e:do if((0|_)<0)s=0;else for(f=0,m=0;;){C=g*(c=+(m>>>0)+0x100000000*(0|f))+ +(0|r),l=v*c+ +(0|i),c=d*c+ +(0|s),r=~~tL(+C),o=~~tL(+l),s=~~tL(+c),C=+u(+((0|r)-C)),l=+u(+((0|o)-l)),c=+u(+((0|s)-c));do if(C>l&C>c)r=0-(o+s)|0,i=o;else{if(h=0-r|0,l>c){i=h-s|0;break}i=o,s=h-o|0;break}while(0)if(n[T>>2]=r,n[A>>2]=i,n[p>>2]=s,!function(e){e|=0;var t=0,r=0,i=0,a=0,s=0,o=0,l=0;t=0-(r=0|n[e>>2])|0,n[e>>2]=t,n[(o=e+8|0)>>2]=0,a=(i=0|n[(l=e+4|0)>>2])+r|0,(0|r)>0?(n[l>>2]=a,n[o>>2]=r,n[e>>2]=0,t=0,i=a):r=0,(0|i)<0?(s=t-i|0,n[e>>2]=s,r=r-i|0,n[o>>2]=r,n[l>>2]=0,a=s-r|0,t=0-r|0,(0|r)<0?(n[e>>2]=a,n[l>>2]=t,n[o>>2]=0,i=t,r=0):(i=0,a=s)):a=t,(0|(t=(0|r)<(0|(t=(0|i)<(0|a)?i:a))?r:t))<=0||(n[e>>2]=a-t,n[l>>2]=i-t,n[o>>2]=r-t)}(T),0|(s=0|e3(e,t,T,a+(m<<3)|0)))break e;if(!((0|f)<(0|b)|(0|f)==(0|b)&m>>>0<_>>>0)){s=0;break e}r=0|tv(0|m,0|f,1,0),f=i=0|w(),m=r,r=0|n[S>>2],i=0|n[y>>2],s=0|n[x>>2]}while(0)}return T=s,I=E,0|T},_gridPathCellsSize:function(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0;return(u=I,I=I+32|0,o=u+12|0,l=u,(s=0|e2(e,t,e,t,o))||(s=0|e2(e,t,r,i,l)))?(l=s,I=u,0|l):(i=0|tv(0|(i=0|ef(o,l)),((0|i)<0)<<31>>31,1,0),o=0|w(),n[(l=a)>>2]=i,n[l+4>>2]=o,l=0,I=u,0|l)},_gridRing:function(e,t,r,i){return 0|U(e|=0,t|=0,r|=0,i|=0)?(tB(0|i,0,48*r|0),0|(i=0|function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0;if(d=I,I=I+16|0,o=d,!r)return n[i>>2]=e,n[i+4>>2]=t,i=0,I=d,0|i;do if((0|r)>=0){if((0|r)>0xd2461d){if(0|(a=0|eK(15,o)))break;a=0|n[(s=o)>>2],s=0|n[s+4>>2]}else a=((0|r)<0)<<31>>31,h=0|tT(0|r,0|a,3,0),a=0|tT(0|h,0|(s=0|w()),0|(a=0|tv(0|r,0|a,1,0)),0|w()),a=0|tv(0|a,0|w(),1,0),s=0|w(),n[(h=o)>>2]=a,n[h+4>>2]=s;if(c=0|ty(a,8)){if(!(h=0|ty(a,4))){tg(c),a=13;break}if(0|(a=0|F(e,t,r,c,h,a,s,0))){tg(c),tg(h);break}if(t=0|n[o>>2],(0|(o=0|n[o+4>>2]))>0|(0|o)==0&t>>>0>0){a=0,l=0,u=0;do((0|(s=0|n[(e=c+(l<<3)|0)>>2]))==0&(0|(e=0|n[e+4>>2]))==0?0:(0|n[h+(l<<2)>>2])==(0|r))&&(n[(A=i+(a<<3)|0)>>2]=s,n[A+4>>2]=e,a=a+1|0),l=0|tv(0|l,0|u,1,0),u=0|w();while((0|u)<(0|o)|(0|u)==(0|o)&l>>>0<t>>>0)}tg(c),tg(h),a=0}else a=13}else a=2;while(0)return A=a,I=d,0|A}(e,t,r,i))):0|(i=0)},_gridRingUnsafe:U,_i64Add:tv,_i64Subtract:tx,_isPentagon:eR,_isResClassIII:function(e,t){return e|=0,t|=0,t=0|tC(0|e,0|t,52),w(),1&t},_isValidCell:ew,_isValidDirectedEdge:function(e,t){e|=0,t|=0;var r=0;switch(r=0|tC(0|e,0|t,56),w(),7&r){case 0:case 7:return 0|(r=0)}return(r=-0x7f000001&t|0x8000000,!(!0&(0x78000000&t)==0x10000000)||!0&(0x7000000&t)==0x1000000&(0|eR(e,r))!=0)?0|(r=0):0|(r=0|ew(e,r))},_isValidVertex:function(e,t){e|=0,t|=0;var r=0,i=0,a=0,s=0;return(a=I,I=I+16|0,r=a,!0&(0x78000000&t)==0x20000000&&0|ew(e,i=-0x7f000001&t|0x8000000))?(s=0|tC(0|e,0|t,56),w(),i=(s=(0|tc(e,i,7&s,r))==0)&((0|n[(i=r)>>2])==(0|e)?(0|n[i+4>>2])==(0|t):0)&1):i=0,I=a,0|i},_latLngToCell:eO,_llvm_ctlz_i64:tN,_llvm_maxnum_f64:tP,_llvm_minnum_f64:tI,_llvm_round_f64:tL,_localIjToCell:function(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s,o,l,u,c,h,d,A,p=0,f=0;return f=I,I=I+16|0,p=f,i?r=15:(r=0|(s=0|r,o=0|p,l=0,u=0,c=0,h=0,d=0,A=0,(u=0|n[s>>2],n[o>>2]=u,c=0|n[s+4>>2],n[(d=o+4|0)>>2]=c,n[(A=o+8|0)>>2]=0,s=(l=(0|c)<(0|u))?u:c,(0|(l=l?c:u))<0&&(((0|l)==-0x80000000?1:(0|s)>0?(0x7fffffff-s|0)<(0|l):(-0x80000000-s|0)>(0|l))||((0|s)>-1?(-0x80000000|s)>=(0|l):(-0x80000000^s)<(0|l))))?0|(o=1):(s=c-u|0,(0|u)<0?(l=0-u|0,n[d>>2]=s,n[A>>2]=l,n[o>>2]=0,u=0):(s=c,l=0),(0|s)<0&&(u=u-s|0,n[o>>2]=u,l=l-s|0,n[A>>2]=l,n[d>>2]=0,s=0),h=u-l|0,c=s-l|0,(0|l)<0?(n[o>>2]=h,n[d>>2]=c,n[A>>2]=0,s=c,c=h,l=0):c=u,(0|(u=(0|l)<(0|(u=(0|s)<(0|c)?s:c))?l:u))<=0||(n[o>>2]=c-u,n[d>>2]=s-u,n[A>>2]=l-u),0|(o=0))))||(r=0|e3(e,t,p,a)),I=f,0|r},_malloc:tm,_maxFaceCount:function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0;if(a=0|tC(0|e,0|t,45),w(),!(0|V(127&a)))return a=2,n[r>>2]=a,0;if(a=0|tC(0|e,0|t,52),w(),!(a&=15))return a=5,n[r>>2]=a,0;for(i=1;;){if(!((tR(7,0,(15-i|0)*3|0)&e)==0&(w()&t)==0)){i=2,e=6;break}if(i>>>0<a>>>0)i=i+1|0;else{i=5,e=6;break}}return(0|e)==6&&(n[r>>2]=i),0},_maxGridDiskSize:function(e,t){t|=0;var r=0,i=0,a=0;return(0|(e|=0))<0?0|(t=2):(0|e)>0xd2461d?0|(t=0|eK(15,t)):(r=((0|e)<0)<<31>>31,a=0|tT(0|e,0|r,3,0),r=0|tT(0|a,0|(i=0|w()),0|(r=0|tv(0|e,0|r,1,0)),0|w()),r=0|tv(0|r,0|w(),1,0),e=0|w(),n[t>>2]=r,n[t+4>>2]=e,0|(t=0))},_maxPolygonToCellsSize:function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0;if(l=I,I=I+48|0,a=l+16|0,s=l+8|0,o=l,0|(r=0|te(r)))return o=r,I=l,0|o;if(u=0|n[(c=e)+4>>2],n[(r=s)>>2]=n[c>>2],n[r+4>>2]=u,e9(s,a),!(r=0|Z(a,t,o))){if(t=0|n[s>>2],(0|(s=0|n[e+8>>2]))>0){a=0|n[e+12>>2],r=0;do t=(0|n[a+(r<<3)>>2])+t|0,r=r+1|0;while((0|r)<(0|s))}a=0|n[(r=o)>>2],(0|(r=0|n[r+4>>2]))<(0|(s=((0|t)<0)<<31>>31))|(0|r)==(0|s)&a>>>0<t>>>0?(n[(r=o)>>2]=t,n[r+4>>2]=s,r=s):t=a,u=0|tv(0|t,0|r,12,0),c=0|w(),n[(r=o)>>2]=u,n[r+4>>2]=c,n[(r=i)>>2]=u,n[r+4>>2]=c,r=0}return c=r,I=l,0|c},_maxPolygonToCellsSizeExperimental:function(e,t,r,s){e|=0,t|=0,r|=0,s|=0;var o,l=0,c=0,h=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0;if(g=I,I=I+48|0,p=g+32|0,A=g+40|0,f=g,!(0|n[e>>2]))return n[(m=s)>>2]=0,n[m+4>>2]=0,m=0,I=g,0|m;eM(p,0,0,0),l=0|n[(h=p)>>2],h=0|n[h+4>>2];do if(t>>>0>15)n[(m=f)>>2]=0,n[m+4>>2]=0,n[f+8>>2]=4,n[f+12>>2]=-1,m=f+16|0,r=f+29|0,n[m>>2]=0,n[m+4>>2]=0,n[m+8>>2]=0,i[m+12|0]=0,i[0|r]=0|i[0|A],i[r+1|0]=0|i[A+1|0],i[r+2|0]=0|i[A+2|0],r=4,m=9;else{if(0|(r=0|te(r))){n[(p=f)>>2]=0,n[p+4>>2]=0,n[f+8>>2]=r,n[f+12>>2]=-1,p=f+16|0,m=f+29|0,n[p>>2]=0,n[p+4>>2]=0,n[p+8>>2]=0,i[p+12|0]=0,i[0|m]=0|i[0|A],i[m+1|0]=0|i[A+1|0],i[m+2|0]=0|i[A+2|0],m=9;break}if(!(r=0|ty((0|n[e+8>>2])+1|0,32))){n[(m=f)>>2]=0,n[m+4>>2]=0,n[f+8>>2]=13,n[f+12>>2]=-1,m=f+16|0,r=f+29|0,n[m>>2]=0,n[m+4>>2]=0,n[m+8>>2]=0,i[m+12|0]=0,i[0|r]=0|i[0|A],i[r+1|0]=0|i[A+1|0],i[r+2|0]=0|i[A+2|0],r=13,m=9;break}tt(e,r),n[(v=f)>>2]=l,n[v+4>>2]=h,n[(h=f+8|0)>>2]=0,n[f+12>>2]=t,n[f+20>>2]=e,n[f+24>>2]=r,i[f+28|0]=0,i[0|(l=f+29|0)]=0|i[0|A],i[l+1|0]=0|i[A+1|0],i[l+2|0]=0|i[A+2|0],n[f+16>>2]=3,c=(y=(a[(o=0|r)>>3]-a[o+8>>3])*function(e){e|=0;var t=0,r=0,i=0;return t=(i=+a[e+16>>3])-(r=+a[e+24>>3]),+(i<r?t+6.283185307179586:t)}(r))/d(+tI(+(c=+u(+a[r>>3])),+u(+a[r+8>>3])))*40589732.49931477,r=0|n[(l=f+12|0)>>2];e:do if((0|r)>0)do{if(eY(r+-1|0,p),!(c/a[p>>3]>10))break e;r=(v=0|n[l>>2])+-1|0,n[l>>2]=r}while((0|v)>1)while(0)if(e8(f),n[(l=s)>>2]=0,n[l+4>>2]=0,!((0|(r=0|n[(l=f)>>2]))==0&(0|(l=0|n[l+4>>2]))==0))do eC(r,l,t,p),A=p,A=0|tv(0|n[(e=s)>>2],0|n[e+4>>2],0|n[A>>2],0|n[A+4>>2]),e=0|w(),n[(v=s)>>2]=A,n[v+4>>2]=e,e8(f),r=0|n[(v=f)>>2],l=0|n[v+4>>2];while(!((0|r)==0&(0|l)==0))r=0|n[h>>2]}while(0)return v=r,I=g,0|v},_memcpy:tD,_memset:tB,_originToDirectedEdges:function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0;return a=(0|eR(e,t))==0,t&=-0x7f000001,n[(i=r)>>2]=a?e:0,n[i+4>>2]=a?0x11000000|t:0,n[(i=r+8|0)>>2]=e,n[i+4>>2]=0x12000000|t,n[(i=r+16|0)>>2]=e,n[i+4>>2]=0x13000000|t,n[(i=r+24|0)>>2]=e,n[i+4>>2]=0x14000000|t,n[(i=r+32|0)>>2]=e,n[i+4>>2]=0x15000000|t,n[(r=r+40|0)>>2]=e,n[r+4>>2]=0x16000000|t,0},_pentagonCount:function(){return 12},_polygonToCells:function(e,t,r,i){e|=0,t|=0,r|=0,i|=0;var a=0,s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0,v=0,x=0,_=0,b=0,S=0,T=0,M=0,E=0,C=0,R=0,N=0,P=0,L=0,D=0,O=0,U=0,k=0;if(k=I,I=I+112|0,L=k+80|0,u=k+72|0,D=k,O=k+56|0,0|(a=0|te(r)))return U=a,I=k,0|U;if(!(U=0|tm((n[(c=e+8|0)>>2]<<5)+32|0)))return U=13,I=k,0|U;if(tt(e,U),!(a=0|te(r))){if(P=0|n[(N=e)+4>>2],n[(a=u)>>2]=n[N>>2],n[a+4>>2]=P,e9(u,L),a=0|Z(L,t,D))N=0,P=0;else{if(a=0|n[u>>2],(0|(s=0|n[c>>2]))>0){o=0|n[e+12>>2],r=0;do a=(0|n[o+(r<<3)>>2])+a|0,r=r+1|0;while((0|r)!=(0|s))r=a}else r=a;s=0|n[(a=D)>>2],(0|(a=0|n[a+4>>2]))<(0|(o=((0|r)<0)<<31>>31))|(0|a)==(0|o)&s>>>0<r>>>0?(n[(a=D)>>2]=r,n[a+4>>2]=o,a=o):r=s,N=0|tv(0|r,0|a,12,0),P=0|w(),n[(a=D)>>2]=N,n[a+4>>2]=P,a=0}if(!a){if(!(r=0|ty(N,8)))return tg(U),U=13,I=k,0|U;if(!(l=0|ty(N,8)))return tg(U),tg(r),U=13,I=k,0|U;n[(C=L)>>2]=0,n[C+4>>2]=0,R=0|n[(C=e)+4>>2],n[(a=u)>>2]=n[C>>2],n[a+4>>2]=R,a=0|z(u,N,P,t,L,r,l);e:do if(a)tg(r),tg(l),tg(U);else{t:do if((0|n[c>>2])>0){for(o=e+12|0,s=0;a=0|z((0|n[o>>2])+(s<<3)|0,N,P,t,L,r,l),s=s+1|0,!(0|a);)if((0|s)>=(0|n[c>>2]))break t;tg(r),tg(l),tg(U);break e}while(0)(0|P)>0|(0|P)==0&N>>>0>0&&tB(0|l,0,N<<3),C=0|n[(R=L)+4>>2];u:do{if((0|C)>0|(0|C)==0&n[R>>2]>>>0>0){T=r,M=l,E=r,C=l,R=r,a=r,_=r,b=l,S=l,r=l;c:for(;;){for(g=0,y=0,v=0,x=0,s=0,o=0;;){u=(l=D)+56|0;do n[l>>2]=0,l=l+4|0;while((0|l)<(0|u))if(0|B(c=0|n[(t=T+(g<<3)|0)>>2],t=0|n[t+4>>2],1,D,0)){u=(l=D)+56|0;do n[l>>2]=0,l=l+4|0;while((0|l)<(0|u))0|(l=0|ty(7,4))&&(F(c,t,1,D,l,7,0,0),tg(l))}for(m=0;;){p=0|n[(f=D+(m<<3)|0)>>2],f=0|n[f+4>>2];h:do if((0|p)==0&(0|f)==0)l=s,u=o;else{if(h=0|tM(0|p,0|f,0|N,0|P),c=0|w(),!((0|(u=0|n[(t=l=i+(h<<3)|0)>>2]))==0&(0|(t=0|n[t+4>>2]))==0)){d=0,A=0;do{if((0|d)>(0|P)|(0|d)==(0|P)&A>>>0>N>>>0)break c;if((0|u)==(0|p)&(0|t)==(0|f)){l=s,u=o;break h}h=0|tw(0|(l=0|tv(0|h,0|c,1,0)),0|w(),0|N,0|P),c=0|w(),A=0|tv(0|A,0|d,1,0),d=0|w(),u=0|n[(t=l=i+(h<<3)|0)>>2],t=0|n[t+4>>2]}while(!((0|u)==0&(0|t)==0))}if((0|p)==0&(0|f)==0){l=s,u=o;break}ez(p,f,O),0|tr(e,U,O)&&(A=0|tv(0|s,0|o,1,0),o=0|w(),n[(d=l)>>2]=p,n[d+4>>2]=f,n[(s=M+(s<<3)|0)>>2]=p,n[s+4>>2]=f,s=A),l=s,u=o}while(0)if((m=m+1|0)>>>0>=7)break;s=l,o=u}if(g=0|tv(0|g,0|y,1,0),y=0|w(),v=0|tv(0|v,0|x,1,0),x=0|w(),s=0|n[(o=L)>>2],(0|x)<(0|(o=0|n[o+4>>2]))|(0|x)==(0|o)&v>>>0<s>>>0)s=l,o=u;else break}if((0|o)>0|(0|o)==0&s>>>0>0){s=0,o=0;do n[(x=T+(s<<3)|0)>>2]=0,n[x+4>>2]=0,s=0|tv(0|s,0|o,1,0),o=0|w(),v=0|n[(x=L)+4>>2];while((0|o)<(0|v)|((0|o)==(0|v)?s>>>0<n[x>>2]>>>0:0))}if(n[(x=L)>>2]=l,n[x+4>>2]=u,(0|u)>0|(0|u)==0&l>>>0>0)m=r,g=S,y=R,v=b,x=M,r=_,S=a,b=E,_=m,a=g,R=C,C=y,E=v,M=T,T=x;else break u}tg(E),tg(C),tg(U),a=1;break e}a=l}while(0)tg(U),tg(r),tg(a),a=0}while(0)return U=a,I=k,0|U}}return tg(U),U=a,I=k,0|U},_polygonToCellsExperimental:function(e,t,r,a,s,o){e|=0,t|=0,r|=0,a|=0,s|=0,o|=0;var l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0,g=0,y=0;y=I,I=I+160|0,A=y+80|0,u=y+64|0,p=y+112|0,g=y,function(e,t,r,a){e|=0,t|=0,r|=0,a|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0;h=I,I=I+48|0,l=h+32|0,o=h+40|0,u=h,eM(l,0,0,0),c=0|n[l>>2],l=0|n[l+4>>2];do{if(r>>>0<=15){if(0|(s=0|te(a))){n[(a=u)>>2]=0,n[a+4>>2]=0,n[u+8>>2]=s,n[u+12>>2]=-1,a=u+16|0,c=u+29|0,n[a>>2]=0,n[a+4>>2]=0,n[a+8>>2]=0,i[a+12|0]=0,i[0|c]=0|i[0|o],i[c+1|0]=0|i[o+1|0],i[c+2|0]=0|i[o+2|0];break}if(s=0|ty((0|n[t+8>>2])+1|0,32)){tt(t,s),n[(d=u)>>2]=c,n[d+4>>2]=l,n[u+8>>2]=0,n[u+12>>2]=r,n[u+16>>2]=a,n[u+20>>2]=t,n[u+24>>2]=s,i[u+28|0]=0,i[0|(c=u+29|0)]=0|i[0|o],i[c+1|0]=0|i[o+1|0],i[c+2|0]=0|i[o+2|0];break}n[(a=u)>>2]=0,n[a+4>>2]=0,n[u+8>>2]=13,n[u+12>>2]=-1,a=u+16|0,c=u+29|0,n[a>>2]=0,n[a+4>>2]=0,n[a+8>>2]=0,i[a+12|0]=0,i[0|c]=0|i[0|o],i[c+1|0]=0|i[o+1|0],i[c+2|0]=0|i[o+2|0];break}n[(c=u)>>2]=0,n[c+4>>2]=0,n[u+8>>2]=4,n[u+12>>2]=-1,c=u+16|0,d=u+29|0,n[c>>2]=0,n[c+4>>2]=0,n[c+8>>2]=0,i[c+12|0]=0,i[0|d]=0|i[0|o],i[d+1|0]=0|i[o+1|0],i[d+2|0]=0|i[o+2|0]}while(0)e8(u),n[e>>2]=n[u>>2],n[e+4>>2]=n[u+4>>2],n[e+8>>2]=n[u+8>>2],n[e+12>>2]=n[u+12>>2],n[e+16>>2]=n[u+16>>2],n[e+20>>2]=n[u+20>>2],n[e+24>>2]=n[u+24>>2],n[e+28>>2]=n[u+28>>2],I=h}(A,e,t,r),eG(u,0|n[(h=A)>>2],0|n[h+4>>2],t),c=0|n[(h=u)>>2],h=0|n[h+4>>2],l=0|n[A+8>>2],n[(f=p+4|0)>>2]=n[A>>2],n[f+4>>2]=n[A+4>>2],n[f+8>>2]=n[A+8>>2],n[f+12>>2]=n[A+12>>2],n[f+16>>2]=n[A+16>>2],n[f+20>>2]=n[A+20>>2],n[f+24>>2]=n[A+24>>2],n[f+28>>2]=n[A+28>>2],n[(f=g)>>2]=c,n[f+4>>2]=h,n[(f=g+8|0)>>2]=l,e=g+12|0,t=p,r=e+36|0;do n[e>>2]=n[t>>2],e=e+4|0,t=t+4|0;while((0|e)<(0|r))if(n[(p=g+48|0)>>2]=n[u>>2],n[p+4>>2]=n[u+4>>2],n[p+8>>2]=n[u+8>>2],n[p+12>>2]=n[u+12>>2],(0|c)==0&(0|h)==0)return g=l,I=y,0|g;r=g+16|0,d=g+24|0,A=g+28|0,l=0,u=0,t=c,e=h;do{if(!((0|l)<(0|s)|(0|l)==(0|s)&u>>>0<a>>>0)){m=4;break}if(h=u,u=0|tv(0|u,0|l,1,0),l=0|w(),n[(h=o+(h<<3)|0)>>2]=t,n[h+4>>2]=e,ej(p),(0|(t=0|n[(e=p)>>2]))==0&(0|(e=0|n[e+4>>2]))==0){if(e8(r),(0|(e=0|n[(t=r)>>2]))==0&(0|(t=0|n[t+4>>2]))==0){m=10;break}eH(e,t,0|n[A>>2],p),t=0|n[(e=p)>>2],e=0|n[e+4>>2]}n[(h=g)>>2]=t,n[h+4>>2]=e}while(!((0|t)==0&(0|e)==0))return(0|m)==4?(0|(t=0|n[(e=g+40|0)>>2])&&tg(t),n[(m=g+16|0)>>2]=0,n[m+4>>2]=0,n[d>>2]=0,n[g+36>>2]=0,n[A>>2]=-1,n[g+32>>2]=0,n[e>>2]=0,eH(0,0,0,p),n[g>>2]=0,n[g+4>>2]=0,n[f>>2]=0,g=14):((0|m)==10&&(n[g>>2]=0,n[g+4>>2]=0,n[f>>2]=n[d>>2]),g=0|n[f>>2]),I=y,0|g},_readInt64AsDoubleFromPointer:function(e){return+(+(n[(e|=0)>>2]>>>0)+0x100000000*(0|n[e+4>>2]))},_res0CellCount:function(){return 122},_round:tF,_sbrk:tO,_sizeOfCellBoundary:function(){return 168},_sizeOfCoordIJ:function(){return 8},_sizeOfGeoLoop:function(){return 8},_sizeOfGeoPolygon:function(){return 16},_sizeOfH3Index:function(){return 8},_sizeOfLatLng:function(){return 16},_sizeOfLinkedGeoPolygon:function(){return 12},_uncompactCells:function(e,t,r,i,a,s,o){e|=0,t|=0,r|=0,i|=0,a|=0,s|=0,o|=0;var l=0,u=0,c=0,h=0,d=0,A=0,p=0,f=0,m=0;if(m=I,I=I+16|0,f=m,!((0|r)>0|(0|r)==0&t>>>0>0))return f=0,I=m,0|f;if((0|o)>=16)return f=12,I=m,0|f;A=0,p=0,d=0,l=0;e:for(;;){if(h=0|tC(0|(u=0|n[(c=e+(A<<3)|0)>>2]),0|(c=0|n[c+4>>2]),52),w(),(15&h)>(0|o)){l=12,u=11;break}if(eG(f,u,c,o),(0|(c=0|n[(h=f)>>2]))==0&(0|(h=0|n[h+4>>2]))==0)u=d;else{u=d;do{if(!((0|l)<(0|s)|(0|l)==(0|s)&u>>>0<a>>>0)){u=10;break e}n[(d=i+(u<<3)|0)>>2]=c,n[d+4>>2]=h,u=0|tv(0|u,0|l,1,0),l=0|w(),ej(f),c=0|n[(d=f)>>2],h=0|n[d+4>>2]}while(!((0|c)==0&(0|h)==0))}if(A=0|tv(0|A,0|p,1,0),(0|(p=0|w()))<(0|r)|(0|p)==(0|r)&A>>>0<t>>>0)d=u;else{l=0,u=11;break}}return(0|u)==10?(f=14,I=m,0|f):(0|u)==11?(I=m,0|l):0},_uncompactCellsSize:function(e,t,r,i,a){e|=0,t|=0,r|=0,i|=0,a|=0;var s=0,o=0,l=0,u=0,c=0,h=0,d=0,A=0;A=I,I=I+16|0,d=A;e:do{if((0|r)>0|(0|r)==0&t>>>0>0){for(c=0,o=0,s=0,h=0;;){if(!((0|(l=0|n[(u=e+(c<<3)|0)>>2]))==0&(0|(u=0|n[u+4>>2]))==0)&&(u=(0|eC(l,u,i,d))==0,o=0|tv(0|n[(l=d)>>2],0|n[l+4>>2],0|o,0|s),s=0|w(),!u)){s=12;break}if(c=0|tv(0|c,0|h,1,0),!((0|(h=0|w()))<(0|r)|(0|h)==(0|r)&c>>>0<t>>>0))break e}return I=A,0|s}o=0,s=0}while(0)return n[a>>2]=o,n[a+4>>2]=s,a=0,I=A,0|a},_vertexToLatLng:function(e,t,r){e|=0,t|=0,r|=0;var i=0,a=0,s=0,o=0,l=0,u=0;return(u=I,I=I+192|0,a=u,s=u+168|0,o=0|tC(0|e,0|t,56),w(),o&=7,0|(i=0|ek(e,l=-0x7f000001&t|0x8000000,s)))?l=i:(t=0|tC(0|e,0|t,52),w(),t&=15,0|eR(e,l)?ev(s,t,o,1,a):eb(s,t,o,1,a),l=a+8|0,n[r>>2]=n[l>>2],n[r+4>>2]=n[l+4>>2],n[r+8>>2]=n[l+8>>2],n[r+12>>2]=n[l+12>>2],l=0),I=u,0|l},establishStackSpace:function(e,t){e|=0,I=e},stackAlloc:function(e){e|=0;var t=0;return t=I,I=(I=I+e|0)+15&-16,0|t},stackRestore:function(e){e|=0,I=e},stackSave:function(){return 0|I}}}({Math:Math,Int8Array:Int8Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Float32Array:Float32Array,Float64Array:Float64Array},{a:en,b:function(e){v=e},c:function(){return v},d:function(e,t,r,i){en("Assertion failed: "+S(e)+", at: "+[t?S(t):"unknown filename",r,i?S(i):"unknown function"])},e:function(e){return A.___errno_location&&(o[A.___errno_location()>>2]=e),e},f:G,g:function(e,t,r){a.set(a.subarray(t,t+r),e)},h:function(e){var t=G();if(e>0x7f000000)return!1;for(var r=Math.max(t,0x1000000);r<e;)r=r<=0x20000000?T(2*r,0x1000000):Math.min(T((3*r+0x80000000)/4,0x1000000),0x7f000000);return!!H(r)},i:function(e){en("OOM")},j:function(e){return e},k:V,l:H,m:q,n:function(){var e=q();return A.extraStackTrace&&(e+="\n"+A.extraStackTrace()),V(e)},o:28624,p:28608},i);A.___divdi3=X.___divdi3,A.___muldi3=X.___muldi3,A.___remdi3=X.___remdi3,A.___uremdi3=X.___uremdi3,A._areNeighborCells=X._areNeighborCells,A._bitshift64Ashr=X._bitshift64Ashr,A._bitshift64Lshr=X._bitshift64Lshr,A._bitshift64Shl=X._bitshift64Shl,A._calloc=X._calloc,A._cellAreaKm2=X._cellAreaKm2,A._cellAreaM2=X._cellAreaM2,A._cellAreaRads2=X._cellAreaRads2,A._cellToBoundary=X._cellToBoundary,A._cellToCenterChild=X._cellToCenterChild,A._cellToChildPos=X._cellToChildPos,A._cellToChildren=X._cellToChildren,A._cellToChildrenSize=X._cellToChildrenSize,A._cellToLatLng=X._cellToLatLng,A._cellToLocalIj=X._cellToLocalIj,A._cellToParent=X._cellToParent,A._cellToVertex=X._cellToVertex,A._cellToVertexes=X._cellToVertexes,A._cellsToDirectedEdge=X._cellsToDirectedEdge,A._cellsToLinkedMultiPolygon=X._cellsToLinkedMultiPolygon,A._childPosToCell=X._childPosToCell,A._compactCells=X._compactCells,A._destroyLinkedMultiPolygon=X._destroyLinkedMultiPolygon,A._directedEdgeToBoundary=X._directedEdgeToBoundary,A._directedEdgeToCells=X._directedEdgeToCells,A._edgeLengthKm=X._edgeLengthKm,A._edgeLengthM=X._edgeLengthM,A._edgeLengthRads=X._edgeLengthRads;var Q=A._emscripten_replace_memory=X._emscripten_replace_memory;A._free=X._free,A._getBaseCellNumber=X._getBaseCellNumber,A._getDirectedEdgeDestination=X._getDirectedEdgeDestination,A._getDirectedEdgeOrigin=X._getDirectedEdgeOrigin,A._getHexagonAreaAvgKm2=X._getHexagonAreaAvgKm2,A._getHexagonAreaAvgM2=X._getHexagonAreaAvgM2,A._getHexagonEdgeLengthAvgKm=X._getHexagonEdgeLengthAvgKm,A._getHexagonEdgeLengthAvgM=X._getHexagonEdgeLengthAvgM,A._getIcosahedronFaces=X._getIcosahedronFaces,A._getNumCells=X._getNumCells,A._getPentagons=X._getPentagons,A._getRes0Cells=X._getRes0Cells,A._getResolution=X._getResolution,A._greatCircleDistanceKm=X._greatCircleDistanceKm,A._greatCircleDistanceM=X._greatCircleDistanceM,A._greatCircleDistanceRads=X._greatCircleDistanceRads,A._gridDisk=X._gridDisk,A._gridDiskDistances=X._gridDiskDistances,A._gridDistance=X._gridDistance,A._gridPathCells=X._gridPathCells,A._gridPathCellsSize=X._gridPathCellsSize,A._gridRing=X._gridRing,A._gridRingUnsafe=X._gridRingUnsafe,A._i64Add=X._i64Add,A._i64Subtract=X._i64Subtract,A._isPentagon=X._isPentagon,A._isResClassIII=X._isResClassIII,A._isValidCell=X._isValidCell,A._isValidDirectedEdge=X._isValidDirectedEdge,A._isValidVertex=X._isValidVertex,A._latLngToCell=X._latLngToCell,A._llvm_ctlz_i64=X._llvm_ctlz_i64,A._llvm_maxnum_f64=X._llvm_maxnum_f64,A._llvm_minnum_f64=X._llvm_minnum_f64,A._llvm_round_f64=X._llvm_round_f64,A._localIjToCell=X._localIjToCell,A._malloc=X._malloc,A._maxFaceCount=X._maxFaceCount,A._maxGridDiskSize=X._maxGridDiskSize,A._maxPolygonToCellsSize=X._maxPolygonToCellsSize,A._maxPolygonToCellsSizeExperimental=X._maxPolygonToCellsSizeExperimental,A._memcpy=X._memcpy,A._memset=X._memset,A._originToDirectedEdges=X._originToDirectedEdges,A._pentagonCount=X._pentagonCount,A._polygonToCells=X._polygonToCells,A._polygonToCellsExperimental=X._polygonToCellsExperimental,A._readInt64AsDoubleFromPointer=X._readInt64AsDoubleFromPointer,A._res0CellCount=X._res0CellCount,A._round=X._round,A._sbrk=X._sbrk,A._sizeOfCellBoundary=X._sizeOfCellBoundary,A._sizeOfCoordIJ=X._sizeOfCoordIJ,A._sizeOfGeoLoop=X._sizeOfGeoLoop,A._sizeOfGeoPolygon=X._sizeOfGeoPolygon,A._sizeOfH3Index=X._sizeOfH3Index,A._sizeOfLatLng=X._sizeOfLatLng,A._sizeOfLinkedGeoPolygon=X._sizeOfLinkedGeoPolygon,A._uncompactCells=X._uncompactCells,A._uncompactCellsSize=X._uncompactCellsSize,A._vertexToLatLng=X._vertexToLatLng,A.establishStackSpace=X.establishStackSpace;var $=A.stackAlloc=X.stackAlloc,Y=A.stackRestore=X.stackRestore,K=A.stackSave=X.stackSave;if(A.asm=X,A.cwrap=function(e,t,r,i){var s=(r=r||[]).every(function(e){return"number"===e});return"string"!==t&&s&&!i?_(e):function(){return function(e,t,r,i,s){var o,l={string:function(e){var t=0;if(null!=e&&0!==e){var r=(e.length<<2)+1;!function(e,t,r){var i=a,n=t;if(r>0){for(var s=n+r-1,o=0;o<e.length;++o){var l=e.charCodeAt(o);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&e.charCodeAt(++o)),l<=127){if(n>=s)break;i[n++]=l}else if(l<=2047){if(n+1>=s)break;i[n++]=192|l>>6,i[n++]=128|63&l}else if(l<=65535){if(n+2>=s)break;i[n++]=224|l>>12,i[n++]=128|l>>6&63,i[n++]=128|63&l}else{if(n+3>=s)break;i[n++]=240|l>>18,i[n++]=128|l>>12&63,i[n++]=128|l>>6&63,i[n++]=128|63&l}}i[n]=0}}(e,t=$(r),r)}return t},array:function(e){var t,r,i=$(e.length);return t=e,r=i,n.set(t,r),i}},u=_(e),c=[],h=0;if(i)for(var d=0;d<i.length;d++){var A=l[r[d]];A?(0===h&&(h=K()),c[d]=A(i[d])):c[d]=i[d]}var p=u.apply(null,c);return o=p,p="string"===t?S(o):"boolean"===t?!!o:o,0!==h&&Y(h),p}(e,t,r,arguments,0)}},A.setValue=function(e,t,r,i){switch("*"===(r=r||"i8").charAt(r.length-1)&&(r="i32"),r){case"i1":case"i8":n[0|e]=t;break;case"i16":s[e>>1]=t;break;case"i32":o[e>>2]=t;break;case"i64":h=[t>>>0,+I(c=t)>=1?c>0?B(+D(c/0x100000000),0xffffffff)>>>0:~~L((c-(~~c>>>0))/0x100000000)>>>0:0],o[e>>2]=h[0],o[e+4>>2]=h[1];break;case"float":l[e>>2]=t;break;case"double":u[e>>3]=t;break;default:en("invalid type for setValue: "+r)}},A.getValue=function(e,t,r){switch("*"===(t=t||"i8").charAt(t.length-1)&&(t="i32"),t){case"i1":case"i8":return n[0|e];case"i16":return s[e>>1];case"i32":case"i64":return o[e>>2];case"float":return l[e>>2];case"double":return u[e>>3];default:en("invalid type for getValue: "+t)}return null},U){z(U)||(Z=U,U=A.locateFile?A.locateFile(Z,m):m+Z),F++,A.monitorRunDependencies&&A.monitorRunDependencies(F);var Z,J=function(e){e.byteLength&&(e=new Uint8Array(e)),a.set(e,8),A.memoryInitializerRequest&&delete A.memoryInitializerRequest.response;if(F--,A.monitorRunDependencies&&A.monitorRunDependencies(F),0==F&&O){var t=O;O=null,t()}},ee=function(){r(U,J,function(){throw"could not load memory initializer "+U})},et=W(U);if(et)J(et.buffer);else if(A.memoryInitializerRequest){var er=function(){var e=A.memoryInitializerRequest,t=e.response;if(200!==e.status&&0!==e.status){var r=W(A.memoryInitializerRequestURL);if(r)t=r.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+e.status+", retrying "+U),ee();return}}J(t)};A.memoryInitializerRequest.response?setTimeout(er,0):A.memoryInitializerRequest.addEventListener("load",er)}else ee()}function ei(e){if(e=e||f,!(F>0)){if(A.preRun)for("function"==typeof A.preRun&&(A.preRun=[A.preRun]);A.preRun.length;){var t;t=A.preRun.shift(),C.unshift(t)}E(C),F>0||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),r()},1)):r())}function r(){if(!d&&(d=!0,!x)){if(E(R),E(N),A.onRuntimeInitialized&&A.onRuntimeInitialized(),A.postRun)for("function"==typeof A.postRun&&(A.postRun=[A.postRun]);A.postRun.length;){var e;e=A.postRun.shift(),P.unshift(e)}E(P)}}}function en(e){throw A.onAbort&&A.onAbort(e),g(e+=""),y(e),x=!0,"abort("+e+"). Build with -s ASSERTIONS=1 for more info."}if(O=function e(){d||ei(),d||(O=e)},A.run=ei,A.abort=en,A.preInit)for("function"==typeof A.preInit&&(A.preInit=[A.preInit]);A.preInit.length>0;)A.preInit.pop()();return ei(),e}("object"==typeof g0?g0:{}),g1="number",g2={};g2[0]="Success",g2[1]="The operation failed but a more specific error is not available",g2[2]="Argument was outside of acceptable range",g2[3]="Latitude or longitude arguments were outside of acceptable range",g2[4]="Resolution argument was outside of acceptable range",g2[5]="Cell argument was not valid",g2[6]="Directed edge argument was not valid",g2[7]="Undirected edge argument was not valid",g2[8]="Vertex argument was not valid",g2[9]="Pentagon distortion was encountered",g2[10]="Duplicate input",g2[11]="Cell arguments were not neighbors",g2[12]="Cell arguments had incompatible resolutions",g2[13]="Memory allocation failed",g2[14]="Bounds of provided memory were insufficient",g2[15]="Mode or flags argument was not valid";var g3={};function g4(e,t,r){var i=r&&"value"in r,n=Error((e[t]||"Unknown error")+" (code: "+t+(i?", value: "+r.value:"")+")");return n.code=t,n}function g5(e,t){var r=2==arguments.length?{value:t}:{};return g4(g2,e,r)}function g8(e,t){var r=2==arguments.length?{value:t}:{};return g4(g3,e,r)}function g6(e){if(0!==e)throw g5(e)}g3[1e3]="Unknown unit",g3[1001]="Array length out of bounds",g3[1002]="Got unexpected null value for H3 index";var g7={};[["sizeOfH3Index",g1],["sizeOfLatLng",g1],["sizeOfCellBoundary",g1],["sizeOfGeoLoop",g1],["sizeOfGeoPolygon",g1],["sizeOfLinkedGeoPolygon",g1],["sizeOfCoordIJ",g1],["readInt64AsDoubleFromPointer",g1],["isValidCell",g1,[g1,g1]],["latLngToCell",g1,[g1,g1,g1,g1]],["cellToLatLng",g1,[g1,g1,g1]],["cellToBoundary",g1,[g1,g1,g1]],["maxGridDiskSize",g1,[g1,g1]],["gridDisk",g1,[g1,g1,g1,g1]],["gridDiskDistances",g1,[g1,g1,g1,g1,g1]],["gridRing",g1,[g1,g1,g1,g1]],["gridRingUnsafe",g1,[g1,g1,g1,g1]],["maxPolygonToCellsSize",g1,[g1,g1,g1,g1]],["polygonToCells",g1,[g1,g1,g1,g1]],["maxPolygonToCellsSizeExperimental",g1,[g1,g1,g1,g1]],["polygonToCellsExperimental",g1,[g1,g1,g1,g1,g1,g1]],["cellsToLinkedMultiPolygon",g1,[g1,g1,g1]],["destroyLinkedMultiPolygon",null,[g1]],["compactCells",g1,[g1,g1,g1,g1]],["uncompactCells",g1,[g1,g1,g1,g1,g1,g1]],["uncompactCellsSize",g1,[g1,g1,g1,g1,g1]],["isPentagon",g1,[g1,g1]],["isResClassIII",g1,[g1,g1]],["getBaseCellNumber",g1,[g1,g1]],["getResolution",g1,[g1,g1]],["maxFaceCount",g1,[g1,g1,g1]],["getIcosahedronFaces",g1,[g1,g1,g1]],["cellToParent",g1,[g1,g1,g1,g1]],["cellToChildren",g1,[g1,g1,g1,g1]],["cellToCenterChild",g1,[g1,g1,g1,g1]],["cellToChildrenSize",g1,[g1,g1,g1,g1]],["cellToChildPos",g1,[g1,g1,g1,g1]],["childPosToCell",g1,[g1,g1,g1,g1,g1,g1]],["areNeighborCells",g1,[g1,g1,g1,g1,g1]],["cellsToDirectedEdge",g1,[g1,g1,g1,g1,g1]],["getDirectedEdgeOrigin",g1,[g1,g1,g1]],["getDirectedEdgeDestination",g1,[g1,g1,g1]],["isValidDirectedEdge",g1,[g1,g1]],["directedEdgeToCells",g1,[g1,g1,g1]],["originToDirectedEdges",g1,[g1,g1,g1]],["directedEdgeToBoundary",g1,[g1,g1,g1]],["gridDistance",g1,[g1,g1,g1,g1,g1]],["gridPathCells",g1,[g1,g1,g1,g1,g1]],["gridPathCellsSize",g1,[g1,g1,g1,g1,g1]],["cellToLocalIj",g1,[g1,g1,g1,g1,g1,g1]],["localIjToCell",g1,[g1,g1,g1,g1,g1]],["getHexagonAreaAvgM2",g1,[g1,g1]],["getHexagonAreaAvgKm2",g1,[g1,g1]],["getHexagonEdgeLengthAvgM",g1,[g1,g1]],["getHexagonEdgeLengthAvgKm",g1,[g1,g1]],["greatCircleDistanceM",g1,[g1,g1]],["greatCircleDistanceKm",g1,[g1,g1]],["greatCircleDistanceRads",g1,[g1,g1]],["cellAreaM2",g1,[g1,g1,g1]],["cellAreaKm2",g1,[g1,g1,g1]],["cellAreaRads2",g1,[g1,g1,g1]],["edgeLengthM",g1,[g1,g1,g1]],["edgeLengthKm",g1,[g1,g1,g1]],["edgeLengthRads",g1,[g1,g1,g1]],["getNumCells",g1,[g1,g1]],["getRes0Cells",g1,[g1]],["res0CellCount",g1],["getPentagons",g1,[g1,g1]],["pentagonCount",g1],["cellToVertex",g1,[g1,g1,g1,g1]],["cellToVertexes",g1,[g1,g1,g1]],["vertexToLatLng",g1,[g1,g1,g1]],["isValidVertex",g1,[g1,g1]]].forEach(function(e){g7[e[0]]=g0.cwrap.apply(g0,e)});var g9=g7.sizeOfH3Index(),ye=g7.sizeOfLatLng(),yt=g7.sizeOfCellBoundary(),yr=g7.sizeOfGeoPolygon(),yi=g7.sizeOfGeoLoop();g7.sizeOfLinkedGeoPolygon(),g7.sizeOfCoordIJ();var yn=/[^0-9a-fA-F]/;function ya(e){if(Array.isArray(e)&&2===e.length&&Number.isInteger(e[0])&&Number.isInteger(e[1]))return e;if("string"!=typeof e||yn.test(e))return[0,0];var t=parseInt(e.substring(0,e.length-8),16);return[parseInt(e.substring(e.length-8),16),t]}function ys(e){if(e>=0)return e.toString(16);var t=yo(8,(e&=0x7fffffff).toString(16));return(parseInt(t[0],16)+8).toString(16)+t.substring(1)}function yo(e,t){for(var r=e-t.length,i="",n=0;n<r;n++)i+="0";return i+t}function yl(e,t,r){for(var i=e.length,n=g0._calloc(i,ye),a=+!!r,s=+!r,o=0;o<2*i;o+=2)g0.HEAPF64.set([e[o/2][a],e[o/2][s]].map(ym),n/8+o);return g0.HEAPU32.set([i,n],t/4),t}function yu(e,t){void 0===t&&(t=0);var r=g0.getValue(e+g9*t,"i32"),i=g0.getValue(e+g9*t+4,"i32");return i?ys(i)+yo(8,ys(r)):null}function yc(e){return 180*g0.getValue(e,"double")/Math.PI}function yh(e){return[yc(e),yc(e+8)]}function yd(e){return[yc(e+8),yc(e)]}function yA(e){var t=g0._malloc(ye),r=ya(e),i=r[0],n=r[1];try{return g6(g7.cellToLatLng(i,n,t)),yh(t)}finally{g0._free(t)}}function yp(e,t){var r=g0._malloc(yt),i=ya(e),n=i[0],a=i[1];try{return g6(g7.cellToBoundary(n,a,r)),function(e,t,r){for(var i=g0.getValue(e,"i32"),n=e+8,a=[],s=t?yd:yh,o=0;o<2*i;o+=2)a.push(s(n+8*o));return r&&a.push(a[0]),a}(r,t,t)}finally{g0._free(r)}}function yf(e,t,r){if(!function(e){if("number"!=typeof e||e<0||e>15||Math.floor(e)!==e)throw g5(4,e)}(t),r=!!r,0===e.length||0===e[0].length)return[];var i=function(e,t){var r,i=e.length-1,n=g0._calloc(yr),a=0+yi;if(yl(e[0],n+0,t),i>0){r=g0._calloc(i,yi);for(var s=0;s<i;s++)yl(e[s+1],r+yi*s,t)}return g0.setValue(n+a,i,"i32"),g0.setValue(n+(a+4),r,"i32"),n}("number"==typeof e[0][0]?[e]:e,r),n=g0._malloc(8);try{g6(g7.maxPolygonToCellsSize(i,t,0,n));var a=function(e){if(e>0xffffffff)throw g8(1001,e);return e}(g7.readInt64AsDoubleFromPointer(n)),s=g0._calloc(a,g9);try{g6(g7.polygonToCells(i,t,0,s));for(var o=[],l=0;l<a;l++){var u=yu(s,l);null!==u&&o.push(u)}return o}finally{g0._free(s)}}finally{g0._free(n);var c=0+yi;g0._free(g0.getValue(i+0+4,"i8*"));var h=g0.getValue(i+c,"i32");if(h>0){for(var d=g0.getValue(i+(c+4),"i32"),A=0;A<h;A++)g0._free(g0.getValue(d+yi*A+4,"i8*"));g0._free(d)}g0._free(i)}}function ym(e){return e*Math.PI/180}let yg=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],yy=new WeakMap;class yv{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=!0===e.object.isSkinnedMesh,this.refreshUniforms=yg,this.renderId=0}firstInitialization(e){return!1===this.renderObjects.has(e)&&(this.getRenderObjectData(e),!0)}needsVelocity(e){let t=e.getMRT();return null!==t&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(void 0===t){let{geometry:r,material:i,object:n}=e;if(t={material:this.getMaterialData(i),geometry:{id:r.id,attributes:this.getAttributesData(r.attributes),indexVersion:r.index?r.index.version:null,drawRange:{start:r.drawRange.start,count:r.drawRange.count}},worldMatrix:n.matrixWorld.clone()},n.center&&(t.center=n.center.clone()),n.morphTargetInfluences&&(t.morphTargetInfluences=n.morphTargetInfluences.slice()),null!==e.bundle&&(t.version=e.bundle.version),t.material.transmission>0){let{width:r,height:i}=e.context;t.bufferWidth=r,t.bufferHeight=i}t.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,t)}return t}getAttributesData(e){let t={};for(let r in e){let i=e[r];t[r]={version:i.version}}return t}containsNode(e){let t=e.material;for(let e in t)if(t[e]&&t[e].isNode)return!0;return null!==e.renderer.overrideNodes.modelViewMatrix||null!==e.renderer.overrideNodes.modelNormalViewMatrix}getMaterialData(e){let t={};for(let r of this.refreshUniforms){let i=e[r];null!=i&&("object"==typeof i&&void 0!==i.clone?!0===i.isTexture?t[r]={id:i.id,version:i.version}:t[r]=i.clone():t[r]=i)}return t}equals(e,t){let{object:r,material:i,geometry:n}=e,a=this.getRenderObjectData(e);if(!0!==a.worldMatrix.equals(r.matrixWorld))return a.worldMatrix.copy(r.matrixWorld),!1;let s=a.material;for(let e in s){let t=s[e],r=i[e];if(void 0!==t.equals){if(!1===t.equals(r))return t.copy(r),!1}else if(!0===r.isTexture){if(t.id!==r.id||t.version!==r.version)return t.id=r.id,t.version=r.version,!1}else if(t!==r)return s[e]=r,!1}if(s.transmission>0){let{width:t,height:r}=e.context;if(a.bufferWidth!==t||a.bufferHeight!==r)return a.bufferWidth=t,a.bufferHeight=r,!1}let o=a.geometry,l=n.attributes,u=o.attributes,c=Object.keys(u),h=Object.keys(l);if(o.id!==n.id)return o.id=n.id,!1;if(c.length!==h.length)return a.geometry.attributes=this.getAttributesData(l),!1;for(let e of c){let t=u[e],r=l[e];if(void 0===r)return delete u[e],!1;if(t.version!==r.version)return t.version=r.version,!1}let d=n.index,A=o.indexVersion,p=d?d.version:null;if(A!==p)return o.indexVersion=p,!1;if(o.drawRange.start!==n.drawRange.start||o.drawRange.count!==n.drawRange.count)return o.drawRange.start=n.drawRange.start,o.drawRange.count=n.drawRange.count,!1;if(a.morphTargetInfluences){let e=!1;for(let t=0;t<a.morphTargetInfluences.length;t++)a.morphTargetInfluences[t]!==r.morphTargetInfluences[t]&&(a.morphTargetInfluences[t]=r.morphTargetInfluences[t],e=!0);if(e)return!1}if(a.lights){for(let e=0;e<t.length;e++)if(a.lights[e].map!==t[e].map)return!1}return a.center&&!1===a.center.equals(r.center)?a.center.copy(r.center):null!==e.bundle&&(a.version=e.bundle.version),!0}getLightsData(e){let t=[];for(let r of e)!0===r.isSpotLight&&null!==r.map&&t.push({map:r.map.version});return t}getLights(e,t){if(yy.has(e)){let r=yy.get(e);if(r.renderId===t)return r.lightsData}let r=this.getLightsData(e.getLights());return yy.set(e,{renderId:t,lightsData:r}),r}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;let{renderId:r}=t;if(this.renderId!==r)return this.renderId=r,!0;let i=!0===e.object.static,n=null!==e.bundle&&!0===e.bundle.static&&this.getRenderObjectData(e).version===e.bundle.version;if(i||n)return!1;let a=this.getLights(e.lightsNode,r);return!0!==this.equals(e,a)}}function yx(e,t=0){let r=0xdeadbeef^t,i=0x41c6ce57^t;if(e instanceof Array)for(let t=0,n;t<e.length;t++)r=Math.imul(r^(n=e[t]),0x9e3779b1),i=Math.imul(i^n,0x5f356495);else for(let t=0,n;t<e.length;t++)r=Math.imul(r^(n=e.charCodeAt(t)),0x9e3779b1),i=Math.imul(i^n,0x5f356495);return r=Math.imul(r^r>>>16,0x85ebca6b)^Math.imul(i^i>>>13,0xc2b2ae35),0x100000000*(2097151&(i=Math.imul(i^i>>>16,0x85ebca6b)^Math.imul(r^r>>>13,0xc2b2ae35)))+(r>>>0)}let y_=e=>yx(e),yb=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),yS=new WeakMap;function yT(e){if(/[iu]?vec\d/.test(e))return e.startsWith("ivec")?Int32Array:e.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(e)||/float/.test(e))return Float32Array;if(/uint/.test(e))return Uint32Array;if(/int/.test(e))return Int32Array;throw Error(`THREE.NodeUtils: Unsupported type: ${e}`)}function yw(e){return/float|int|uint/.test(e)?1:/vec2/.test(e)?2:/vec3/.test(e)?3:/vec4/.test(e)||/mat2/.test(e)?4:/mat3/.test(e)?9:/mat4/.test(e)?16:void eL("TSL: Unsupported type:",e)}function yM(e){if(null==e)return null;let t=typeof e;if(!0===e.isNode)return"node";if("number"===t)return"float";if("boolean"===t)return"bool";if("string"===t)return"string";if("function"===t)return"shader";else if(!0===e.isVector2)return"vec2";else if(!0===e.isVector3)return"vec3";else if(!0===e.isVector4)return"vec4";else if(!0===e.isMatrix2)return"mat2";else if(!0===e.isMatrix3)return"mat3";else if(!0===e.isMatrix4)return"mat4";else if(!0===e.isColor)return"color";else if(e instanceof ArrayBuffer)return"ArrayBuffer";return null}function yE(e,...t){let r=e?e.slice(-4):void 0;if(1===t.length&&("vec2"===r?t=[t[0],t[0]]:"vec3"===r?t=[t[0],t[0],t[0]]:"vec4"===r&&(t=[t[0],t[0],t[0],t[0]])),"color"===e)return new ry(...t);if("vec2"===r)return new eX(...t);if("vec3"===r)return new e$(...t);if("vec4"===r)return new tr(...t);if("mat2"===r)return new o4(...t);else if("mat3"===r)return new eZ(...t);else if("mat4"===r)return new tF(...t);else if("bool"===e)return t[0]||!1;else if("float"===e||"int"===e||"uint"===e)return t[0]||0;else if("string"===e)return t[0]||"";else if("ArrayBuffer"===e)return yN(t[0]);return null}function yC(e){let t=yS.get(e);return void 0===t&&(t={},yS.set(e,t)),t}function yR(e){let t="",r=new Uint8Array(e);for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return btoa(t)}function yN(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0)).buffer}let yP={VERTEX:"vertex",FRAGMENT:"fragment"},yI={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},yL={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},yD=["fragment","vertex"],yB=["setup","analyze","generate"],yF=[...yD,"compute"],yO=["x","y","z","w"],yU={analyze:"setup",generate:"analyze"},yk=0;class yz extends eB{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=yI.NONE,this.updateBeforeType=yI.NONE,this.updateAfterType=yI.NONE,this.uuid=eW.generateUUID(),this.version=0,this.name="",this.global=!1,this.parents=!1,this.isNode=!0,this._beforeNodes=null,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:yk++})}set needsUpdate(e){!0===e&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this),this}onFrameUpdate(e){return this.onUpdate(e,yI.FRAME)}onRenderUpdate(e){return this.onUpdate(e,yI.RENDER)}onObjectUpdate(e){return this.onUpdate(e,yI.OBJECT)}onReference(e){return this.updateReference=e.bind(this),this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(let{childNode:e}of this._getChildren())yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){for(let t of(e(this),this.getChildren()))t.traverse(e)}_getChildren(e=new Set){let t=[];for(let r of(e.add(this),Object.getOwnPropertyNames(this))){let i=this[r];if(!(!0===r.startsWith("_")||e.has(i))){if(!0===Array.isArray(i))for(let e=0;e<i.length;e++){let n=i[e];n&&!0===n.isNode&&t.push({property:r,index:e,childNode:n})}else if(i&&!0===i.isNode)t.push({property:r,childNode:i});else if(i&&Object.getPrototypeOf(i)===Object.prototype)for(let e in i){if(!0===e.startsWith("_"))continue;let n=i[e];n&&!0===n.isNode&&t.push({property:r,index:e,childNode:n})}}}return t}getCacheKey(e=!1,t=null){if(!0===(e=e||this.version!==this._cacheKeyVersion)||null===this._cacheKey){null===t&&(t=new Set);let r=[];for(let{property:i,childNode:n}of this._getChildren(t))r.push(y_(i.slice(0,-4)),n.getCacheKey(e,t));this._cacheKey=((...e)=>yx(e))(yx(r),this.customCacheKey()),this._cacheKeyVersion=this.version}return this._cacheKey}customCacheKey(){return this.id}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){let t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){let t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){let t=this.getHash(e);return e.getNodeFromHash(t)||this}getArrayCount(){return null}setup(e){let t=e.getNodeProperties(this),r=0;for(let e of this.getChildren())t["node"+r++]=e;return t.outputNode||null}analyze(e,t=null){let r=e.increaseUsage(this);if(!0===this.parents){let r=e.getDataFromNode(this,"any");r.stages=r.stages||{},r.stages[e.shaderStage]=r.stages[e.shaderStage]||[],r.stages[e.shaderStage].push(t)}if(1===r)for(let t of Object.values(e.getNodeProperties(this)))t&&!0===t.isNode&&t.build(e,this)}generate(e,t){let{outputNode:r}=e.getNodeProperties(this);if(r&&!0===r.isNode)return r.build(e,t)}updateBefore(){eI("Abstract function.")}updateAfter(){eI("Abstract function.")}update(){eI("Abstract function.")}before(e){return null===this._beforeNodes&&(this._beforeNodes=[]),this._beforeNodes.push(e),this}build(e,t=null){let r=this.getShared(e);if(this!==r)return r.build(e,t);if(null!==this._beforeNodes){let r=this._beforeNodes;for(let i of(this._beforeNodes=null,r))i.build(e,t);this._beforeNodes=r}let i=e.getDataFromNode(this);i.buildStages=i.buildStages||{},i.buildStages[e.buildStage]=!0;let n=yU[e.buildStage];if(n&&!0!==i.buildStages[n]){let t=e.getBuildStage();e.setBuildStage(n),this.build(e),e.setBuildStage(t)}e.addNode(this),e.addChain(this);let a=null,s=e.getBuildStage();if("setup"===s){this.updateReference(e);let t=e.getNodeProperties(this);if(!0!==t.initialized){for(let r of(t.initialized=!0,t.outputNode=this.setup(e)||t.outputNode||null,Object.values(t)))if(r&&!0===r.isNode){if(!0===r.parents){let t=e.getNodeProperties(r);t.parents=t.parents||[],t.parents.push(this)}r.build(e)}}a=t.outputNode}else if("analyze"===s)this.analyze(e,t);else if("generate"===s){if(this.generate.length<2){let r=this.getNodeType(e),i=e.getDataFromNode(this);void 0===(a=i.snippet)?void 0===i.generated?(i.generated=!0,i.snippet=a=this.generate(e)||""):(eI("Node: Recursion detected.",this),a="/* Recursion detected. */"):void 0!==i.flowCodes&&void 0!==e.context.nodeBlock&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),a=e.format(a,r,t)}else a=this.generate(e,t)||"";""===a&&null!==t&&"void"!==t&&"OutputType"!==t&&(eL(`TSL: Invalid generated code, expected a "${t}".`),a=e.generateConst(t))}return e.removeChain(this),e.addSequentialNode(this),a}getSerializeChildren(){return this._getChildren()}serialize(e){let t=this.getSerializeChildren(),r={};for(let{property:i,index:n,childNode:a}of t)void 0!==n?(void 0===r[i]&&(r[i]=Number.isInteger(n)?[]:{}),r[i][n]=a.toJSON(e.meta).uuid):r[i]=a.toJSON(e.meta).uuid;Object.keys(r).length>0&&(e.inputNodes=r)}deserialize(e){if(void 0!==e.inputNodes){let t=e.meta.nodes;for(let r in e.inputNodes)if(Array.isArray(e.inputNodes[r])){let i=[];for(let n of e.inputNodes[r])i.push(t[n]);this[r]=i}else if("object"==typeof e.inputNodes[r]){let i={};for(let n in e.inputNodes[r]){let a=e.inputNodes[r][n];i[n]=t[a]}this[r]=i}else{let i=e.inputNodes[r];this[r]=t[i]}}}toJSON(e){let{uuid:t,type:r}=this,i=void 0===e||"string"==typeof e;i&&(e={textures:{},images:{},nodes:{}});let n=e.nodes[t];function a(e){let t=[];for(let r in e){let i=e[r];delete i.metadata,t.push(i)}return t}if(void 0===n&&(n={uuid:t,type:r,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},!0!==i&&(e.nodes[n.uuid]=n),this.serialize(n),delete n.meta),i){let t=a(e.textures),r=a(e.images),i=a(e.nodes);t.length>0&&(n.textures=t),r.length>0&&(n.images=r),i.length>0&&(n.nodes=i)}return n}}class yV extends yz{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){let t=this.indexNode.getNodeType(e),r=this.node.build(e),i=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${r}[ ${i} ]`}}class yq extends yz{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){let t=this.node.getNodeType(e),r=null;for(let i of this.convertTo.split("|"))(null===r||e.getTypeLength(t)===e.getTypeLength(i))&&(r=i);return r}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){let r=this.node,i=this.getNodeType(e),n=r.build(e,i);return e.format(n,i,t)}}class yG extends yz{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if("generate"===e.getBuildStage()){let r=e.getVectorType(this.getNodeType(e,t)),i=e.getDataFromNode(this);if(void 0!==i.propertyName)return e.format(i.propertyName,r,t);if("void"!==r&&"void"!==t&&this.hasDependencies(e)){let n=super.build(e,r),a=e.getVarFromNode(this,null,r),s=e.getPropertyName(a);return e.addLineFlowCode(`${s} = ${n}`,this),i.snippet=n,i.propertyName=s,e.format(i.propertyName,r,t)}}return super.build(e,t)}}class yH extends yG{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return null!==this.nodeType?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,r)=>t+e.getTypeLength(r.getNodeType(e)),0))}generate(e,t){let r=this.getNodeType(e),i=e.getTypeLength(r),n=this.nodes,a=e.getComponentType(r),s=[],o=0;for(let t of n){let n;if(o>=i){eL(`TSL: Length of parameters exceeds maximum length of function '${r}()' type.`);break}let l=t.getNodeType(e),u=e.getTypeLength(l);if(o+u>i&&(eL(`TSL: Length of '${r}()' data exceeds maximum length of output type.`),u=i-o,l=e.getTypeFromLength(u)),o+=u,n=t.build(e,l),e.getComponentType(l)!==a){let t=e.getTypeFromLength(u,a);n=e.format(n,l,t)}s.push(n)}let l=`${e.getType(r)}( ${s.join(", ")} )`;return e.format(l,r,t)}}let yj=yO.join("");class yW extends yz{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(let t of this.components)e=Math.max(yO.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}getScope(){return this.node.getScope()}generate(e,t){let r=this.node,i=e.getTypeLength(r.getNodeType(e)),n=null;if(i>1){let a=null;this.getVectorLength()>=i&&(a=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));let s=r.build(e,a);n=this.components.length===i&&this.components===yj.slice(0,this.components.length)?e.format(s,a,t):e.format(`${s}.${this.components}`,this.getNodeType(e),t)}else n=r.build(e,t);return n}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class yX extends yG{static get type(){return"SetNode"}constructor(e,t,r){super(),this.sourceNode=e,this.components=t,this.targetNode=r}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){let{sourceNode:t,components:r,targetNode:i}=this,n=this.getNodeType(e),a=e.getComponentType(i.getNodeType(e)),s=e.getTypeFromLength(r.length,a),o=i.build(e,s),l=t.build(e,n),u=e.getTypeLength(n),c=[];for(let e=0;e<u;e++){let t=yO[e];t===r[0]?(c.push(o),e+=r.length-1):c.push(l+"."+t)}return`${e.getType(n)}( ${c.join(", ")} )`}}class yQ extends yG{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){let{components:t,sourceNode:r}=this,i=this.getNodeType(e),n=r.build(e),a=e.getVarFromNode(this),s=e.getPropertyName(a);e.addLineFlowCode(s+" = "+n,this);let o=e.getTypeLength(i),l=[],u=0;for(let e=0;e<o;e++){let r=yO[e];r===t[u]?(l.push("1.0 - "+s+"."+r),u++):l.push(s+"."+r)}return`${e.getType(i)}( ${l.join(", ")} )`}}class y$ extends yz{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return null===this.nodeType?yM(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=yM(this.value),e.nodeType=this.nodeType,"ArrayBuffer"===e.valueType&&(e.value=yR(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?yE(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){eI("Abstract function.")}}let yY=/float|u?int/;class yK extends y${static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){let r=this.getNodeType(e);return yY.test(r)&&yY.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),r,t)}}class yZ extends yz{static get type(){return"MemberNode"}constructor(e,t){super(),this.structNode=e,this.property=t,this.isMemberNode=!0}hasMember(e){return(!this.structNode.isMemberNode||!1!==this.structNode.hasMember(e))&&"void"!==this.structNode.getMemberType(e,this.property)}getNodeType(e){return!1===this.hasMember(e)?"float":this.structNode.getMemberType(e,this.property)}getMemberType(e,t){if(!1===this.hasMember(e))return"float";let r=this.getNodeType(e);return e.getStructTypeNode(r).getMemberType(e,t)}generate(e){if(!1===this.hasMember(e)){eI(`TSL: Member "${this.property}" does not exist in struct.`);let t=this.getNodeType(e);return e.generateConst(t)}return this.structNode.build(e)+"."+this.property}}let yJ=null,y0=new Map;function y1(e,t){if(y0.has(e))return void eI(`TSL: Redefinition of method chaining '${e}'.`);if("function"!=typeof t)throw Error(`THREE.TSL: Node element ${e} is not a function`);y0.set(e,t),"assign"!==e&&(yz.prototype[e]=function(...e){return this.isStackNode?this.addToStack(t(...e)):t(this,...e)},yz.prototype[e+"Assign"]=function(...e){return this.isStackNode?this.assign(e[0],t(...e)):this.assign(t(this,...e))})}let y2=e=>e.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w").split("").sort().join("");yz.prototype.assign=function(...e){if(!0!==this.isStackNode)return null!==yJ?yJ.assign(this,...e):eL("TSL: No stack defined for assign operation. Make sure the assign is inside a Fn()."),this;{let t=y0.get("assign");return this.addToStack(t(...e))}},yz.prototype.toVarIntent=function(){return this},yz.prototype.get=function(e){return new yZ(this,e)};let y3={};function y4(e,t,r){y3[e]=y3[t]=y3[r]={get(){this._cache=this._cache||{};let t=this._cache[e];return void 0===t&&(t=new yW(this,e),this._cache[e]=t),t},set(t){this[e].assign(vg(t))}};let i=e.toUpperCase(),n=t.toUpperCase(),a=r.toUpperCase();yz.prototype["set"+i]=yz.prototype["set"+n]=yz.prototype["set"+a]=function(t){return new yX(this,y2(e),vg(t))},yz.prototype["flip"+i]=yz.prototype["flip"+n]=yz.prototype["flip"+a]=function(){return new yQ(this,y2(e))}}let y5=["x","y","z","w"],y8=["r","g","b","a"],y6=["s","t","p","q"];for(let e=0;e<4;e++){let t=y5[e],r=y8[e],i=y6[e];y4(t,r,i);for(let n=0;n<4;n++){t=y5[e]+y5[n],y4(t,r=y8[e]+y8[n],i=y6[e]+y6[n]);for(let a=0;a<4;a++){t=y5[e]+y5[n]+y5[a],y4(t,r=y8[e]+y8[n]+y8[a],i=y6[e]+y6[n]+y6[a]);for(let s=0;s<4;s++)t=y5[e]+y5[n]+y5[a]+y5[s],y4(t,r=y8[e]+y8[n]+y8[a]+y8[s],i=y6[e]+y6[n]+y6[a]+y6[s])}}}for(let e=0;e<32;e++)y3[e]={get(){this._cache=this._cache||{};let t=this._cache[e];return void 0===t&&(t=new yV(this,new yK(e,"uint")),this._cache[e]=t),t},set(t){this[e].assign(vg(t))}};Object.defineProperties(yz.prototype,y3);let y7=new WeakMap,y9=function(e,t=null){let r=yM(e);if("node"===r);else if(null===t&&("float"===r||"boolean"===r)||r&&"shader"!==r&&"string"!==r)return vg(vd(e,t));else if("shader"===r)return e.isFn?e:vM(e);return e},ve=function(e,t=null){for(let r in e)e[r]=vg(e[r],t);return e},vt=function(e,t=null){let r=e.length;for(let i=0;i<r;i++)e[i]=vg(e[i],t);return e},vr=function(e,t=null,r=null,i=null){function n(e){return null!==i?(e=vg(Object.assign(e,i)),!0===i.intent&&(e=e.toVarIntent())):e=vg(e),e}let a,s=t,o,l;function u(t){let r;return(r=s?/[a-z]/i.test(s)?s+"()":s:e.type,void 0!==o&&t.length<o)?(eL(`TSL: "${r}" parameter length is less than minimum required.`),t.concat(Array(o-t.length).fill(0))):void 0!==l&&t.length>l?(eL(`TSL: "${r}" parameter length exceeds limit.`),t.slice(0,l)):t}return null===t?a=(...t)=>n(new e(...vx(u(t)))):null!==r?(r=vg(r),a=(...i)=>n(new e(t,...vx(u(i)),r))):a=(...r)=>n(new e(t,...vx(u(r)))),a.setParameterLength=(...e)=>(1===e.length?o=l=e[0]:2===e.length&&([o,l]=e),a),a.setName=e=>(s=e,a),a},vi=function(e,...t){return vg(new e(...vx(t)))};class vn extends yz{constructor(e,t){super(),this.shaderNode=e,this.rawInputs=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getElementType(e){return this.getOutputNode(e).getElementType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){var t,r;let{shaderNode:i,rawInputs:n}=this,a=e.getNodeProperties(i),s=e.getClosestSubBuild(i.subBuilds)||"",o=s||"default";if(a[o])return a[o];let l=e.subBuildFn,u=e.fnCall;e.subBuildFn=s,e.fnCall=this;let c=null;if(i.layout){let r=y7.get(e.constructor);void 0===r&&(r=new WeakMap,y7.set(e.constructor,r));let a=r.get(i);void 0===a&&(a=vg(e.buildFunctionNode(i)),r.set(i,a)),e.addInclude(a);let s=n?(vv(t=n),t[0]&&(t[0].isNode||Object.getPrototypeOf(t[0])!==Object.prototype)?[...t]:t[0]):null;c=vg(a.call(s))}else{let t,a=new Proxy(e,{get:(e,t,r)=>Symbol.iterator===t?function*(){yield}:Reflect.get(e,t,r)}),s=n?(t=0,vv(r=n),new Proxy(r,{get:(e,i,n)=>{let a;if("length"===i)return r.length;if(Symbol.iterator===i)a=function*(){for(let e of r)yield vg(e)};else{if(r.length>0)if(Object.getPrototypeOf(r[0])===Object.prototype){let e=r[0];a=void 0===e[i]?e[t++]:Reflect.get(e,i,n)}else r[0]instanceof yz&&(a=void 0===r[i]?r[t++]:Reflect.get(r,i,n));else a=Reflect.get(e,i,n);a=vg(a)}return a}})):null,o=Array.isArray(n)?n.length>0:null!==n,l=i.jsFunc;c=vg(o||l.length>1?l(s,a):l(a))}return e.subBuildFn=l,e.fnCall=u,i.once&&(a[o]=c),c}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){let t=e.getNodeProperties(this),r=e.getSubBuildOutput(this);return t[r]=t[r]||this.setupOutput(e),t[r].subBuild=e.getClosestSubBuild(this),t[r]}build(e,t=null){let r=null,i=e.getBuildStage(),n=e.getNodeProperties(this),a=e.getSubBuildOutput(this),s=this.getOutputNode(e),o=e.fnCall;if(e.fnCall=this,"setup"===i){let t=e.getSubBuildProperty("initialized",this);if(!0!==n[t]&&(n[t]=!0,n[a]=this.getOutputNode(e),n[a].build(e),this.shaderNode.subBuilds))for(let t of e.chaining){let r=e.getDataFromNode(t,"any");for(let e of(r.subBuilds=r.subBuilds||new Set,this.shaderNode.subBuilds))r.subBuilds.add(e)}r=n[a]}else"analyze"===i?s.build(e,t):"generate"===i&&(r=s.build(e,t)||"");return e.fnCall=o,r}}class va extends yz{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}getLayout(){return this.layout}call(e=null){return new vn(this,e)}setup(){return this.call()}}let vs=[.5,1.5,1/3,1e-6,1e6,Math.PI,2*Math.PI,1/Math.PI,2/Math.PI,1/(2*Math.PI),Math.PI/2],vo=new Map;for(let e of[!1,!0])vo.set(e,new yK(e));let vl=new Map;for(let e of[0,1,2,3])vl.set(e,new yK(e,"uint"));let vu=new Map([...vl].map(e=>new yK(e.value,"int")));for(let e of[-1,-2])vu.set(e,new yK(e,"int"));let vc=new Map([...vu].map(e=>new yK(e.value)));for(let e of vs)vc.set(e,new yK(e));for(let e of vs)vc.set(-e,new yK(-e));let vh=new Map([...vo,...vc]),vd=(e,t)=>vh.has(e)?vh.get(e):!0===e.isNode?e:new yK(e,t),vA=function(e,t=null){return(...r)=>{for(let t of r)if(void 0===t)return eL(`TSL: Invalid parameter for the type "${e}".`),vg(new yK(0,e));if((0===r.length||!["bool","float","int","uint"].includes(e)&&r.every(e=>{let t=typeof e;return"object"!==t&&"function"!==t}))&&(r=[yE(e,...r)]),1===r.length&&null!==t&&t.has(r[0]))return vy(t.get(r[0]));if(1===r.length){let t=vd(r[0],e);return t.nodeType===e?vy(t):vy(new yq(t,e))}return vy(new yH(r.map(e=>vd(e)),e))}},vp=e=>"object"==typeof e&&null!==e?e.value:e,vf=e=>null!=e?e.nodeType||e.convertTo||("string"==typeof e?e:null):null;function vm(e,t){return new va(e,t)}let vg=(e,t=null)=>y9(e,t),vy=(e,t=null)=>vg(e,t).toVarIntent(),vv=(e,t=null)=>new ve(e,t),vx=(e,t=null)=>new vt(e,t),v_=(e,t=null,r=null,i=null)=>new vr(e,t,r,i),vb=(e,...t)=>new vi(e,...t),vS=(e,t=null,r=null,i={})=>new vr(e,t,r,{...i,intent:!0}),vT=0;class vw extends yz{constructor(e,t=null){super();let r=null;null!==t&&("object"==typeof t?r=t.return:("string"==typeof t?r=t:eL("TSL: Invalid layout type."),t=null)),this.shaderNode=new vm(e,r),null!==t&&this.setLayout(t),this.isFn=!0}setLayout(e){let t=this.shaderNode.nodeType;if("object"!=typeof e.inputs){let r={name:"fn"+vT++,type:t,inputs:[]};for(let t in e)"return"!==t&&r.inputs.push({name:t,type:e[t]});e=r}return this.shaderNode.setLayout(e),this}getNodeType(e){return this.shaderNode.getNodeType(e)||"float"}call(...e){let t=this.shaderNode.call(e);return"void"===this.shaderNode.nodeType&&t.toStack(),t.toVarIntent()}once(e=null){return this.shaderNode.once=!0,this.shaderNode.subBuilds=e,this}generate(e){let t=this.getNodeType(e);return eL('TSL: "Fn()" was declared but not invoked. Try calling it like "Fn()( ...params )".'),e.generateConst(t)}}function vM(e,t=null){let r=new vw(e,t);return new Proxy(()=>{},{apply:(e,t,i)=>r.call(...i),get:(e,t,i)=>Reflect.get(r,t,i),set:(e,t,i,n)=>Reflect.set(r,t,i,n)})}let vE=e=>{yJ=e},vC=()=>yJ,vR=(...e)=>yJ.If(...e);function vN(e){return yJ&&yJ.addToStack(e),e}y1("toStack",vN);let vP=new vA("color"),vI=new vA("float",vc),vL=new vA("int",vu),vD=new vA("uint",vl),vB=new vA("bool",vo),vF=new vA("vec2"),vO=new vA("ivec2"),vU=new vA("uvec2"),vk=new vA("bvec2"),vz=new vA("vec3"),vV=new vA("ivec3"),vq=new vA("uvec3"),vG=new vA("bvec3"),vH=new vA("vec4"),vj=new vA("ivec4"),vW=new vA("uvec4"),vX=new vA("bvec4"),vQ=new vA("mat2"),v$=new vA("mat3"),vY=new vA("mat4");y1("toColor",vP),y1("toFloat",vI),y1("toInt",vL),y1("toUint",vD),y1("toBool",vB),y1("toVec2",vF),y1("toIVec2",vO),y1("toUVec2",vU),y1("toBVec2",vk),y1("toVec3",vz),y1("toIVec3",vV),y1("toUVec3",vq),y1("toBVec3",vG),y1("toVec4",vH),y1("toIVec4",vj),y1("toUVec4",vW),y1("toBVec4",vX),y1("toMat2",vQ),y1("toMat3",v$),y1("toMat4",vY);let vK=v_(yV).setParameterLength(2),vZ=(e,t)=>vg(new yq(vg(e),t));y1("element",vK),y1("convert",vZ),y1("append",e=>(eI("TSL: .append() has been renamed to .toStack()."),vN(e)));class vJ extends yz{static get type(){return"PropertyNode"}constructor(e,t=null,r=!1){super(e),this.name=t,this.varying=r,this.isPropertyNode=!0,this.global=!0}customCacheKey(){return y_(this.type+":"+(this.name||"")+":"+(this.varying?"1":"0"))}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return!0===this.varying?(t=e.getVaryingFromNode(this,this.name)).needsInterpolation=!0:t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}let v0=(e,t)=>vg(new vJ(e,t)),v1=(e,t)=>vg(new vJ(e,t,!0)),v2=vb(vJ,"vec4","DiffuseColor"),v3=vb(vJ,"vec3","EmissiveColor"),v4=vb(vJ,"float","Roughness"),v5=vb(vJ,"float","Metalness"),v8=vb(vJ,"float","Clearcoat"),v6=vb(vJ,"float","ClearcoatRoughness"),v7=vb(vJ,"vec3","Sheen"),v9=vb(vJ,"float","SheenRoughness"),xe=vb(vJ,"float","Iridescence"),xt=vb(vJ,"float","IridescenceIOR"),xr=vb(vJ,"float","IridescenceThickness"),xi=vb(vJ,"float","AlphaT"),xn=vb(vJ,"float","Anisotropy"),xa=vb(vJ,"vec3","AnisotropyT"),xs=vb(vJ,"vec3","AnisotropyB"),xo=vb(vJ,"color","SpecularColor"),xl=vb(vJ,"float","SpecularF90"),xu=vb(vJ,"float","Shininess"),xc=vb(vJ,"vec4","Output"),xh=vb(vJ,"float","dashSize"),xd=vb(vJ,"float","gapSize"),xA=vb(vJ,"float","pointWidth"),xp=vb(vJ,"float","IOR"),xf=vb(vJ,"float","Transmission"),xm=vb(vJ,"float","Thickness"),xg=vb(vJ,"float","AttenuationDistance"),xy=vb(vJ,"color","AttenuationColor"),xv=vb(vJ,"float","Dispersion");class xx extends yz{static get type(){return"UniformGroupNode"}constructor(e,t=!1,r=1){super("string"),this.name=e,this.shared=t,this.order=r,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}let x_=e=>new xx(e),xb=(e,t=0)=>new xx(e,!0,t),xS=xb("frame"),xT=xb("render"),xw=x_("object");class xM extends y${static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=xw}setName(e){return this.name=e,this}label(e){return eI('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){return e=e.bind(this),super.onUpdate(t=>{let r=e(t,this);void 0!==r&&(this.value=r)},t)}getInputType(e){let t=super.getInputType(e);return"bool"===t&&(t="uint"),t}generate(e,t){let r=this.getNodeType(e),i=this.getUniformHash(e),n=e.getNodeFromHash(i);void 0===n&&(e.setHashNode(this,i),n=this);let a=n.getInputType(e),s=e.getUniformFromNode(n,a,e.shaderStage,this.name||e.context.nodeName),o=e.getPropertyName(s);void 0!==e.context.nodeName&&delete e.context.nodeName;let l=o;if("bool"===r){let t=e.getDataFromNode(this),i=t.propertyName;if(void 0===i){let n=e.getVarFromNode(this,null,"bool");t.propertyName=i=e.getPropertyName(n),l=e.format(o,a,r),e.addLineFlowCode(`${i} = ${l}`,this)}l=i}return e.format(l,r,t)}}let xE=(e,t)=>{let r=vf(t||e);return r===e&&(e=yE(r)),vg(new xM(e=e&&!0===e.isNode?e.node&&e.node.value||e.value:e,r))};class xC extends yG{static get type(){return"ArrayNode"}constructor(e,t,r=null){super(e),this.count=t,this.values=r,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return null===this.nodeType&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){let t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}let xR=(...e)=>{let t;if(1===e.length){let r=e[0];t=new xC(null,r.length,r)}else t=new xC(e[0],e[1]);return vg(t)};y1("toArray",(e,t)=>xR(Array(t).fill(e)));let xN=v_(class extends yG{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return"void"!==t?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){let{targetNode:t}=this;if(!1===e.isAvailable("swizzleAssign")&&t.isSplitNode&&t.components.length>1){let r=e.getTypeLength(t.node.getNodeType(e));return yO.join("").slice(0,r)!==t.components}return!1}setup(e){let{targetNode:t,sourceNode:r}=this,i=t.getScope();e.getNodeProperties(i).assign=!0;let n=e.getNodeProperties(this);n.sourceNode=r,n.targetNode=t.context({assign:!0})}generate(e,t){let r,{targetNode:i,sourceNode:n}=e.getNodeProperties(this),a=this.needsSplitAssign(e),s=i.build(e),o=i.getNodeType(e),l=n.build(e,o),u=n.getNodeType(e),c=e.getDataFromNode(this);if(!0===c.initialized)"void"!==t&&(r=s);else if(a){let n=e.getVarFromNode(this,null,o),a=e.getPropertyName(n);e.addLineFlowCode(`${a} = ${l}`,this);let u=i.node,c=u.node.context({assign:!0}).build(e);for(let t=0;t<u.components.length;t++){let r=u.components[t];e.addLineFlowCode(`${c}.${r} = ${a}[ ${t} ]`,this)}"void"!==t&&(r=s)}else r=`${s} = ${l}`,("void"===t||"void"===u)&&(e.addLineFlowCode(r,this),"void"!==t&&(r=s));return c.initialized=!0,e.format(r,o,t)}}).setParameterLength(2);y1("assign",xN);class xP extends yG{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}getMemberType(e,t){return this.functionNode.getMemberType(e,t)}generate(e){let t=[],r=this.functionNode,i=r.getInputs(e),n=this.parameters,a=(t,r)=>{let i=r.type;return"pointer"===i?"&"+t.build(e):t.build(e,i)};if(Array.isArray(n)){if(n.length>i.length)eL("TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),n.length=i.length;else if(n.length<i.length)for(eL("TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");n.length<i.length;)n.push(vI(0));for(let e=0;e<n.length;e++)t.push(a(n[e],i[e]))}else for(let e of i){let r=n[e.name];void 0!==r?t.push(a(r,e)):(eL(`TSL: Input '${e.name}' not found in 'Fn()'.`),t.push(a(vI(0),e)))}let s=r.build(e,"property");return`${s}( ${t.join(", ")} )`}}let xI=(e,...t)=>(t=t.length>1||t[0]&&!0===t[0].isNode?vx(t):vv(t[0]),new xP(vg(e),t));y1("call",xI);let xL={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class xD extends yG{static get type(){return"OperatorNode"}constructor(e,t,r,...i){if(super(),i.length>0){let n=new xD(e,t,r);for(let t=0;t<i.length-1;t++)n=new xD(e,n,i[t]);t=n,r=i[i.length-1]}this.op=e,this.aNode=t,this.bNode=r,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(xL[this.op],t)}getNodeType(e,t=null){let r=this.op,i=this.aNode,n=this.bNode,a=i.getNodeType(e),s=n?n.getNodeType(e):null;if("void"===a||"void"===s)return t||"void";if("%"===r)return a;if("~"===r||"&"===r||"|"===r||"^"===r||">>"===r||"<<"===r)return e.getIntegerType(a);if("!"===r||"&&"===r||"||"===r||"^^"===r)return"bool";if("=="===r||"!="===r||"<"===r||">"===r||"<="===r||">="===r){let t=Math.max(e.getTypeLength(a),e.getTypeLength(s));return t>1?`bvec${t}`:"bool"}else{if(e.isMatrix(a)){if("float"===s)return a;else if(e.isVector(s))return e.getVectorFromMatrix(a);else if(e.isMatrix(s))return a}else if(e.isMatrix(s)){if("float"===a)return s;else if(e.isVector(a))return e.getVectorFromMatrix(s)}return e.getTypeLength(s)>e.getTypeLength(a)?s:a}}generate(e,t){let r=this.op,{aNode:i,bNode:n}=this,a=this.getNodeType(e,t),s=null,o=null;"void"!==a?(s=i.getNodeType(e),o=n?n.getNodeType(e):null,"<"===r||">"===r||"<="===r||">="===r||"=="===r||"!="===r?e.isVector(s)?o=s:e.isVector(o)?s=o:s!==o&&(s=o="float"):">>"===r||"<<"===r?(s=a,o=e.changeComponentType(o,"uint")):"%"===r?(s=a,o=e.isInteger(s)&&e.isInteger(o)?o:s):e.isMatrix(s)?"float"===o?o="float":e.isVector(o)?o=e.getVectorFromMatrix(s):e.isMatrix(o)||(s=o=a):s=e.isMatrix(o)?"float"===s?"float":e.isVector(s)?e.getVectorFromMatrix(o):o=a:o=a):s=o=a;let l=i.build(e,s),u=n?n.build(e,o):null,c=e.getFunctionOperator(r);if("void"!==t){let i=2e3===e.renderer.coordinateSystem;if("=="===r||"!="===r||"<"===r||">"===r||"<="===r||">="===r)if(!i)return e.format(`( ${l} ${r} ${u} )`,a,t);else if(e.isVector(s))return e.format(`${this.getOperatorMethod(e,t)}( ${l}, ${u} )`,a,t);else return e.format(`( ${l} ${r} ${u} )`,a,t);if("%"===r)if(e.isInteger(o))return e.format(`( ${l} % ${u} )`,a,t);else return e.format(`${this.getOperatorMethod(e,a)}( ${l}, ${u} )`,a,t);{if("!"===r||"~"===r)return e.format(`(${r}${l})`,s,t);if(c)return e.format(`${c}( ${l}, ${u} )`,a,t);if(e.isMatrix(s)&&"float"===o)return e.format(`( ${u} ${r} ${l} )`,a,t);if("float"===s&&e.isMatrix(o))return e.format(`${l} ${r} ${u}`,a,t);let n=`( ${l} ${r} ${u} )`;return!i&&"bool"===a&&e.isVector(s)&&e.isVector(o)&&(n=`all${n}`),e.format(n,a,t)}}if("void"!==s)if(c)return e.format(`${c}( ${l}, ${u} )`,a,t);else if(e.isMatrix(s)&&"float"===o)return e.format(`${u} ${r} ${l}`,a,t);else return e.format(`${l} ${r} ${u}`,a,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}let xB=vS(xD,"+").setParameterLength(2,1/0).setName("add"),xF=vS(xD,"-").setParameterLength(2,1/0).setName("sub"),xO=vS(xD,"*").setParameterLength(2,1/0).setName("mul"),xU=vS(xD,"/").setParameterLength(2,1/0).setName("div"),xk=vS(xD,"%").setParameterLength(2).setName("mod"),xz=vS(xD,"==").setParameterLength(2).setName("equal"),xV=vS(xD,"!=").setParameterLength(2).setName("notEqual"),xq=vS(xD,"<").setParameterLength(2).setName("lessThan"),xG=vS(xD,">").setParameterLength(2).setName("greaterThan"),xH=vS(xD,"<=").setParameterLength(2).setName("lessThanEqual"),xj=vS(xD,">=").setParameterLength(2).setName("greaterThanEqual"),xW=vS(xD,"&&").setParameterLength(2,1/0).setName("and"),xX=vS(xD,"||").setParameterLength(2,1/0).setName("or"),xQ=vS(xD,"!").setParameterLength(1).setName("not"),x$=vS(xD,"^^").setParameterLength(2).setName("xor"),xY=vS(xD,"&").setParameterLength(2).setName("bitAnd"),xK=vS(xD,"~").setParameterLength(1).setName("bitNot"),xZ=vS(xD,"|").setParameterLength(2).setName("bitOr"),xJ=vS(xD,"^").setParameterLength(2).setName("bitXor"),x0=vS(xD,"<<").setParameterLength(2).setName("shiftLeft"),x1=vS(xD,">>").setParameterLength(2).setName("shiftRight"),x2=vM(([e])=>(e.addAssign(1),e)),x3=vM(([e])=>(e.subAssign(1),e)),x4=vM(([e])=>{let t=vL(e).toConst();return e.addAssign(1),t}),x5=vM(([e])=>{let t=vL(e).toConst();return e.subAssign(1),t});y1("add",xB),y1("sub",xF),y1("mul",xO),y1("div",xU),y1("mod",xk),y1("equal",xz),y1("notEqual",xV),y1("lessThan",xq),y1("greaterThan",xG),y1("lessThanEqual",xH),y1("greaterThanEqual",xj),y1("and",xW),y1("or",xX),y1("not",xQ),y1("xor",x$),y1("bitAnd",xY),y1("bitNot",xK),y1("bitOr",xZ),y1("bitXor",xJ),y1("shiftLeft",x0),y1("shiftRight",x1),y1("incrementBefore",x2),y1("decrementBefore",x3),y1("increment",x4),y1("decrement",x5);let x8=(e,t)=>(eI('TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),xk(vL(e),vL(t)));y1("modInt",x8);class x6 extends yG{static get type(){return"MathNode"}constructor(e,t,r=null,i=null){if(super(),(e===x6.MAX||e===x6.MIN)&&arguments.length>3){let n=new x6(e,t,r);for(let t=2;t<arguments.length-1;t++)n=new x6(e,n,arguments[t]);t=n,r=arguments[arguments.length-1],i=null}this.method=e,this.aNode=t,this.bNode=r,this.cNode=i,this.isMathNode=!0}getInputType(e){let t=this.aNode.getNodeType(e),r=this.bNode?this.bNode.getNodeType(e):null,i=this.cNode?this.cNode.getNodeType(e):null,n=e.isMatrix(t)?0:e.getTypeLength(t),a=e.isMatrix(r)?0:e.getTypeLength(r),s=e.isMatrix(i)?0:e.getTypeLength(i);if(n>a&&n>s);else if(a>s)return r;else if(s>n)return i;return t}getNodeType(e){let t=this.method;return t===x6.LENGTH||t===x6.DISTANCE||t===x6.DOT?"float":t===x6.CROSS?"vec3":t===x6.ALL||t===x6.ANY?"bool":t===x6.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){let{aNode:t,bNode:r,method:i}=this,n=null;if(i===x6.ONE_MINUS)n=xF(1,t);else if(i===x6.RECIPROCAL)n=xU(1,t);else if(i===x6.DIFFERENCE)n=_T(xF(t,r));else if(i===x6.TRANSFORM_DIRECTION){let i=t,a=r;e.isMatrix(i.getNodeType(e))?a=vH(vz(a),0):i=vH(vz(i),0),n=_m(xO(i,a).xyz)}return null!==n?n:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let r=this.method,i=this.getNodeType(e),n=this.getInputType(e),a=this.aNode,s=this.bNode,o=this.cNode,l=e.renderer.coordinateSystem;if(r===x6.NEGATE)return e.format("( - "+a.build(e,n)+" )",i,t);{let u=[];return r===x6.CROSS?u.push(a.build(e,i),s.build(e,i)):2e3===l&&r===x6.STEP?u.push(a.build(e,1===e.getTypeLength(a.getNodeType(e))?"float":n),s.build(e,n)):2e3===l&&(r===x6.MIN||r===x6.MAX)?u.push(a.build(e,n),s.build(e,1===e.getTypeLength(s.getNodeType(e))?"float":n)):r===x6.REFRACT?u.push(a.build(e,n),s.build(e,n),o.build(e,"float")):r===x6.MIX?u.push(a.build(e,n),s.build(e,n),o.build(e,1===e.getTypeLength(o.getNodeType(e))?"float":n)):(2001===l&&r===x6.ATAN&&null!==s&&(r="atan2"),"fragment"!==e.shaderStage&&(r===x6.DFDX||r===x6.DFDY)&&(eI(`TSL: '${r}' is not supported in the ${e.shaderStage} stage.`),r="/*"+r+"*/"),u.push(a.build(e,n)),null!==s&&u.push(s.build(e,n)),null!==o&&u.push(o.build(e,n))),e.format(`${e.getMethod(r,i)}( ${u.join(", ")} )`,i,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}x6.ALL="all",x6.ANY="any",x6.RADIANS="radians",x6.DEGREES="degrees",x6.EXP="exp",x6.EXP2="exp2",x6.LOG="log",x6.LOG2="log2",x6.SQRT="sqrt",x6.INVERSE_SQRT="inversesqrt",x6.FLOOR="floor",x6.CEIL="ceil",x6.NORMALIZE="normalize",x6.FRACT="fract",x6.SIN="sin",x6.COS="cos",x6.TAN="tan",x6.ASIN="asin",x6.ACOS="acos",x6.ATAN="atan",x6.ABS="abs",x6.SIGN="sign",x6.LENGTH="length",x6.NEGATE="negate",x6.ONE_MINUS="oneMinus",x6.DFDX="dFdx",x6.DFDY="dFdy",x6.ROUND="round",x6.RECIPROCAL="reciprocal",x6.TRUNC="trunc",x6.FWIDTH="fwidth",x6.TRANSPOSE="transpose",x6.DETERMINANT="determinant",x6.INVERSE="inverse",x6.EQUALS="equals",x6.MIN="min",x6.MAX="max",x6.STEP="step",x6.REFLECT="reflect",x6.DISTANCE="distance",x6.DIFFERENCE="difference",x6.DOT="dot",x6.CROSS="cross",x6.POW="pow",x6.TRANSFORM_DIRECTION="transformDirection",x6.MIX="mix",x6.CLAMP="clamp",x6.REFRACT="refract",x6.SMOOTHSTEP="smoothstep",x6.FACEFORWARD="faceforward";let x7=vI(1e-6),x9=vI(1e6),_e=vI(Math.PI),_t=vI(2*Math.PI),_r=vI(2*Math.PI),_i=vI(.5*Math.PI),_n=vS(x6,x6.ALL).setParameterLength(1),_a=vS(x6,x6.ANY).setParameterLength(1),_s=vS(x6,x6.RADIANS).setParameterLength(1),_o=vS(x6,x6.DEGREES).setParameterLength(1),_l=vS(x6,x6.EXP).setParameterLength(1),_u=vS(x6,x6.EXP2).setParameterLength(1),_c=vS(x6,x6.LOG).setParameterLength(1),_h=vS(x6,x6.LOG2).setParameterLength(1),_d=vS(x6,x6.SQRT).setParameterLength(1),_A=vS(x6,x6.INVERSE_SQRT).setParameterLength(1),_p=vS(x6,x6.FLOOR).setParameterLength(1),_f=vS(x6,x6.CEIL).setParameterLength(1),_m=vS(x6,x6.NORMALIZE).setParameterLength(1),_g=vS(x6,x6.FRACT).setParameterLength(1),_y=vS(x6,x6.SIN).setParameterLength(1),_v=vS(x6,x6.COS).setParameterLength(1),_x=vS(x6,x6.TAN).setParameterLength(1),__=vS(x6,x6.ASIN).setParameterLength(1),_b=vS(x6,x6.ACOS).setParameterLength(1),_S=vS(x6,x6.ATAN).setParameterLength(1,2),_T=vS(x6,x6.ABS).setParameterLength(1),_w=vS(x6,x6.SIGN).setParameterLength(1),_M=vS(x6,x6.LENGTH).setParameterLength(1),_E=vS(x6,x6.NEGATE).setParameterLength(1),_C=vS(x6,x6.ONE_MINUS).setParameterLength(1),_R=vS(x6,x6.DFDX).setParameterLength(1),_N=vS(x6,x6.DFDY).setParameterLength(1),_P=vS(x6,x6.ROUND).setParameterLength(1),_I=vS(x6,x6.RECIPROCAL).setParameterLength(1),_L=vS(x6,x6.TRUNC).setParameterLength(1),_D=vS(x6,x6.FWIDTH).setParameterLength(1),_B=vS(x6,x6.TRANSPOSE).setParameterLength(1),_F=vS(x6,x6.DETERMINANT).setParameterLength(1),_O=vS(x6,x6.INVERSE).setParameterLength(1),_U=(e,t)=>(eI('TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),xz(e,t)),_k=vS(x6,x6.MIN).setParameterLength(2,1/0),_z=vS(x6,x6.MAX).setParameterLength(2,1/0),_V=vS(x6,x6.STEP).setParameterLength(2),_q=vS(x6,x6.REFLECT).setParameterLength(2),_G=vS(x6,x6.DISTANCE).setParameterLength(2),_H=vS(x6,x6.DIFFERENCE).setParameterLength(2),_j=vS(x6,x6.DOT).setParameterLength(2),_W=vS(x6,x6.CROSS).setParameterLength(2),_X=vS(x6,x6.POW).setParameterLength(2),_Q=e=>xO(e,e),_$=e=>xO(e,e,e),_Y=e=>xO(e,e,e,e),_K=vS(x6,x6.TRANSFORM_DIRECTION).setParameterLength(2),_Z=e=>xO(_w(e),_X(_T(e),1/3)),_J=e=>_j(e,e),_0=vS(x6,x6.MIX).setParameterLength(3),_1=(e,t=0,r=1)=>vg(new x6(x6.CLAMP,vg(e),vg(t),vg(r))),_2=e=>_1(e),_3=vS(x6,x6.REFRACT).setParameterLength(3),_4=vS(x6,x6.SMOOTHSTEP).setParameterLength(3),_5=vS(x6,x6.FACEFORWARD).setParameterLength(3),_8=vM(([e])=>_g(_y(xk(_j(e.xy,vF(12.9898,78.233)),_e)).mul(43758.5453))),_6=(e,t,r)=>_0(t,r,e),_7=(e,t,r)=>_4(t,r,e),_9=(e,t)=>_V(t,e),be=(e,t)=>(eI('TSL: "atan2" is overloaded. Use "atan" instead.'),_S(e,t));y1("all",_n),y1("any",_a),y1("equals",_U),y1("radians",_s),y1("degrees",_o),y1("exp",_l),y1("exp2",_u),y1("log",_c),y1("log2",_h),y1("sqrt",_d),y1("inverseSqrt",_A),y1("floor",_p),y1("ceil",_f),y1("normalize",_m),y1("fract",_g),y1("sin",_y),y1("cos",_v),y1("tan",_x),y1("asin",__),y1("acos",_b),y1("atan",_S),y1("abs",_T),y1("sign",_w),y1("length",_M),y1("lengthSq",_J),y1("negate",_E),y1("oneMinus",_C),y1("dFdx",_R),y1("dFdy",_N),y1("round",_P),y1("reciprocal",_I),y1("trunc",_L),y1("fwidth",_D),y1("atan2",be),y1("min",_k),y1("max",_z),y1("step",_9),y1("reflect",_q),y1("distance",_G),y1("dot",_j),y1("cross",_W),y1("pow",_X),y1("pow2",_Q),y1("pow3",_$),y1("pow4",_Y),y1("transformDirection",_K),y1("mix",_6),y1("clamp",_1),y1("refract",_3),y1("smoothstep",_7),y1("faceForward",_5),y1("difference",_H),y1("saturate",_2),y1("cbrt",_Z),y1("transpose",_B),y1("determinant",_F),y1("inverse",_O),y1("rand",_8);let bt=v_(class extends yz{static get type(){return"ConditionalNode"}constructor(e,t,r=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=r}getNodeType(e){let{ifNode:t,elseNode:r}=e.getNodeProperties(this);if(void 0===t)return e.flowBuildStage(this,"setup"),this.getNodeType(e);let i=t.getNodeType(e);if(null!==r){let t=r.getNodeType(e);if(e.getTypeLength(t)>e.getTypeLength(i))return t}return i}setup(e){let t=this.condNode,r=this.ifNode.isolate(),i=this.elseNode?this.elseNode.isolate():null,n=e.context.nodeBlock;e.getDataFromNode(r).parentNodeBlock=n,null!==i&&(e.getDataFromNode(i).parentNodeBlock=n);let a=e.context.uniformFlow,s=e.getNodeProperties(this);s.condNode=t,s.ifNode=a?r:r.context({nodeBlock:r}),s.elseNode=i?a?i:i.context({nodeBlock:i}):null}generate(e,t){let r=this.getNodeType(e),i=e.getDataFromNode(this);if(void 0!==i.nodeProperty)return i.nodeProperty;let{condNode:n,ifNode:a,elseNode:s}=e.getNodeProperties(this),o=e.currentFunctionNode,l="void"!==t,u=l?v0(r).build(e):"";i.nodeProperty=u;let c=n.build(e,"bool");if(e.context.uniformFlow&&null!==s){let i=a.build(e,r),n=s.build(e,r),o=e.getTernary(c,i,n);return e.format(o,r,t)}e.addFlowCode(`
${e.tab}if ( ${c} ) {

`).addFlowTab();let h=a.build(e,r);if(h&&(l?h=u+" = "+h+";":(h="return "+h+";",null===o&&(eI("TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),h="// "+h))),e.removeFlowTab().addFlowCode(e.tab+"	"+h+"\n\n"+e.tab+"}"),null!==s){e.addFlowCode(" else {\n\n").addFlowTab();let t=s.build(e,r);t&&(l?t=u+" = "+t+";":(t="return "+t+";",null===o&&(eI("TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),t="// "+t))),e.removeFlowTab().addFlowCode(e.tab+"	"+t+"\n\n"+e.tab+"}\n\n")}else e.addFlowCode("\n\n");return e.format(u,r,t)}}).setParameterLength(2,3);y1("select",bt);class br extends yz{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}getMemberType(e,t){return this.node.getMemberType(e,t)}analyze(e){let t=e.addContext(this.value);this.node.build(e),e.setContext(t)}setup(e){let t=e.addContext(this.value);this.node.build(e),e.setContext(t)}generate(e,t){let r=e.addContext(this.value),i=this.node.build(e,t);return e.setContext(r),i}}let bi=v_(br).setParameterLength(1,2),bn=e=>bi(e,{uniformFlow:!0}),ba=(e,t)=>bi(e,{nodeName:t});function bs(e,t){return eI('TSL: "label()" has been deprecated. Use "setName()" instead.'),ba(e,t)}y1("context",bi),y1("label",bs),y1("uniformFlow",bn),y1("setName",ba);class bo extends yz{static get type(){return"VarNode"}constructor(e,t=null,r=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=r,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}getIntent(){return this.intent}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}isAssign(e){let t=e.getNodeProperties(this).assign;return!0!==t&&this.node.isShaderCallNodeInternal&&null===this.node.shaderNode.getLayout()&&e.fnCall&&e.fnCall.shaderNode&&e.getDataFromNode(this.node.shaderNode).hasLoop&&(t=!0),t}build(...e){let t=e[0];return(!1===this._hasStack(t)&&"setup"===t.buildStage&&(t.context.nodeLoop||t.context.nodeBlock)&&t.getBaseStack().addToStack(this),!0===this.intent&&!0!==this.isAssign(t))?this.node.build(...e):super.build(...e)}generate(e){let{node:t,name:r,readOnly:i}=this,{renderer:n}=e,a=!0===n.backend.isWebGPUBackend,s=!1,o=!1;i&&(s=e.isDeterministic(t),o=a?i:s);let l=this.getNodeType(e);if("void"==l)return!0!==this.intent&&eL('TSL: ".toVar()" can not be used with void type.'),t.build(e);let u=e.getVectorType(l),c=t.build(e,u),h=e.getVarFromNode(this,r,u,void 0,o),d=e.getPropertyName(h),A=d;if(o)if(a)A=s?`const ${d}`:`let ${d}`;else{let r=t.getArrayCount(e);A=`const ${e.getVar(h.type,d,r)}`}return e.addLineFlowCode(`${A} = ${c}`,this),d}_hasStack(e){return void 0!==e.getDataFromNode(this).stack}}let bl=v_(bo),bu=(e,t=null)=>bl(e,t).toStack(),bc=(e,t=null)=>bl(e,t,!0).toStack(),bh=e=>bl(e).setIntent(!0).toStack();y1("toVar",bu),y1("toConst",bc),y1("toVarIntent",bh);class bd extends yz{static get type(){return"SubBuild"}constructor(e,t,r=null){super(r),this.node=e,this.name=t,this.isSubBuildNode=!0}getNodeType(e){if(null!==this.nodeType)return this.nodeType;e.addSubBuild(this.name);let t=this.node.getNodeType(e);return e.removeSubBuild(),t}build(e,...t){e.addSubBuild(this.name);let r=this.node.build(e,...t);return e.removeSubBuild(),r}}let bA=(e,t,r=null)=>vg(new bd(vg(e),t,r)),bp=v_(class extends yz{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){let t=e.getNodeProperties(this),r=t.varying;if(void 0===r){let i=this.name,n=this.getNodeType(e),a=this.interpolationType,s=this.interpolationSampling;t.varying=r=e.getVaryingFromNode(this,i,n,a,s),t.node=bA(this.node,"VERTEX")}return r.needsInterpolation||(r.needsInterpolation="fragment"===e.shaderStage),r}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(yP.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(yP.VERTEX,this.node)}generate(e){let t=e.getSubBuildProperty("property",e.currentStack),r=e.getNodeProperties(this),i=this.setupVarying(e);if(void 0===r[t]){let n=this.getNodeType(e),a=e.getPropertyName(i,yP.VERTEX);e.flowNodeFromShaderStage(yP.VERTEX,r.node,n,a),r[t]=a}return e.getPropertyName(i)}}).setParameterLength(1,2),bf=e=>bp(e);y1("toVarying",bp),y1("toVertexStage",bf),y1("varying",(...e)=>(eI("TSL: .varying() has been renamed to .toVarying()."),bp(...e))),y1("vertexStage",(...e)=>(eI("TSL: .vertexStage() has been renamed to .toVertexStage()."),bp(...e)));let bm=vM(([e])=>_0(e.mul(.9478672986).add(.0521327014).pow(2.4),e.mul(.0773993808),e.lessThanEqual(.04045))).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),bg=vM(([e])=>_0(e.pow(.41666).mul(1.055).sub(.055),e.mul(12.92),e.lessThanEqual(.0031308))).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),by="WorkingColorSpace";class bv extends yG{static get type(){return"ColorSpaceNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this.source=t,this.target=r}resolveColorSpace(e,t){return t===by?e2.workingColorSpace:"OutputColorSpace"===t?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){let{colorNode:t}=this,r=this.resolveColorSpace(e,this.source),i=this.resolveColorSpace(e,this.target),n=t;return!1!==e2.enabled&&r!==i&&r&&i&&(e2.getTransfer(r)===eg&&(n=vH(bm(n.rgb),n.a)),e2.getPrimaries(r)!==e2.getPrimaries(i)&&(n=vH(v$(e2._getMatrix(new eZ,r,i)).mul(n.rgb),n.a)),e2.getTransfer(i)===eg&&(n=vH(bg(n.rgb),n.a))),n}}let bx=(e,t)=>vg(new bv(vg(e),by,t)),b_=(e,t)=>vg(new bv(vg(e),t,by));y1("workingToColorSpace",bx),y1("colorSpaceToWorking",b_);let bb=class extends yV{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){let t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}};class bS extends yz{static get type(){return"ReferenceBaseNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.updateType=yI.OBJECT}setGroup(e){return this.group=e,this}element(e){return vg(new bb(this,vg(e)))}setNodeType(e){let t=xE(null,e);null!==this.group&&t.setGroup(this.group),this.node=t}getNodeType(e){return null===this.node&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){let{properties:t}=this,r=e[t[0]];for(let e=1;e<t.length;e++)r=r[t[e]];return r}updateReference(e){return this.reference=null!==this.object?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){null===this.node&&this.setNodeType(this.uniformType);let e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}class bT extends bS{static get type(){return"RendererReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.renderer=r,this.setGroup(xT)}updateReference(e){return this.reference=null!==this.renderer?this.renderer:e.renderer,this.reference}}let bw=(e,t,r=null)=>vg(new bT(e,t,r));class bM extends yG{static get type(){return"ToneMappingNode"}constructor(e,t=bC,r=null){super("vec3"),this._toneMapping=e,this.exposureNode=t,this.colorNode=r}customCacheKey(){return((...e)=>yx(e))(this._toneMapping)}setToneMapping(e){return this._toneMapping=e,this}getToneMapping(){return this._toneMapping}setup(e){let t=this.colorNode||e.context.color,r=this._toneMapping;if(0===r)return t;let i=null,n=e.renderer.library.getToneMappingFunction(r);return null!==n?i=vH(n(t.rgb,this.exposureNode),t.a):(eL("ToneMappingNode: Unsupported Tone Mapping configuration.",r),i=t),i}}let bE=(e,t,r)=>vg(new bM(e,vg(t),vg(r))),bC=bw("toneMappingExposure","float");y1("toneMapping",(e,t,r)=>bE(t,r,e));class bR extends y${static get type(){return"BufferAttributeNode"}constructor(e,t=null,r=0,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=r,this.bufferOffset=i,this.usage=35044,this.instanced=!1,this.attribute=null,this.global=!0,e&&!0===e.isBufferAttribute&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(0===this.bufferStride&&0===this.bufferOffset){let t=e.globalCache.getData(this.value);return void 0===t&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return null===this.bufferType&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(null!==this.attribute)return;let t=this.getNodeType(e),r=this.value,i=e.getTypeLength(t),n=this.bufferStride||i,a=this.bufferOffset,s=!0===r.isInterleavedBuffer?r:new iv(r,n),o=new i_(s,i,a);s.setUsage(this.usage),this.attribute=o,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){let t=this.getNodeType(e),r=e.getBufferAttributeFromNode(this,t),i=e.getPropertyName(r),n=null;return"vertex"===e.shaderStage||"compute"===e.shaderStage?(this.name=i,n=i):n=bp(this).build(e,t),n}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&!0===this.attribute.isBufferAttribute&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}let bN=(e,t=null,r=0,i=0)=>vg(new bR(e,t,r,i)),bP=(e,t=null,r=0,i=0)=>bN(e,t,r,i).setUsage(35048),bI=(e,t=null,r=0,i=0)=>bN(e,t,r,i).setInstanced(!0),bL=(e,t=null,r=0,i=0)=>bP(e,t,r,i).setInstanced(!0);y1("toAttribute",e=>bN(e.value));class bD extends yz{static get type(){return"ComputeNode"}constructor(e,t){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=t,this.count=null,this.version=1,this.name="",this.updateBeforeType=yI.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return eI('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){let t=this.computeNode.build(e);return t&&(e.getNodeProperties(this).outputComputeNode=t.outputNode,t.outputNode=null),t}generate(e,t){let{shaderStage:r}=e;if("compute"===r){let t=this.computeNode.build(e,"void");""!==t&&e.addLineFlowCode(t,this)}else{let r=e.getNodeProperties(this).outputComputeNode;if(r)return r.build(e,t)}}}let bB=(e,t=[64])=>{(0===t.length||t.length>3)&&eL("TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let e=0;e<t.length;e++){let r=t[e];("number"!=typeof r||r<=0||!Number.isInteger(r))&&eL(`TSL: compute() workgroupSize element at index [ ${e} ] must be a positive integer`)}for(;t.length<3;)t.push(1);return vg(new bD(vg(e),t))},bF=(e,t,r)=>bB(e,r).setCount(t);y1("compute",bF),y1("computeKernel",bB);class bO extends yz{static get type(){return"IsolateNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isIsolateNode=!0}getNodeType(e){let t=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);let i=this.node.getNodeType(e);return e.setCache(t),i}build(e,...t){let r=e.getCache(),i=e.getCacheFromNode(this,this.parent);e.setCache(i);let n=this.node.build(e,...t);return e.setCache(r),n}setParent(e){return this.parent=e,this}getParent(){return this.parent}}let bU=e=>new bO(vg(e));function bk(e,t=!0){return eI('TSL: "cache()" has been deprecated. Use "isolate()" instead.'),bU(e).setParent(t)}y1("cache",bk),y1("isolate",bU);let bz=v_(class extends yz{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){let t=this.callNode.build(e,"void");return""!==t&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}).setParameterLength(2);y1("bypass",bz);class bV extends yz{static get type(){return"RemapNode"}constructor(e,t,r,i=vI(0),n=vI(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=r,this.outLowNode=i,this.outHighNode=n,this.doClamp=!0}setup(){let{node:e,inLowNode:t,inHighNode:r,outLowNode:i,outHighNode:n,doClamp:a}=this,s=e.sub(t).div(r.sub(t));return!0===a&&(s=s.clamp()),s.mul(n.sub(i)).add(i)}}let bq=v_(bV,null,null,{doClamp:!1}).setParameterLength(3,5),bG=v_(bV).setParameterLength(3,5);y1("remap",bq),y1("remapClamp",bG);class bH extends yz{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){let r=this.getNodeType(e),i=this.snippet;if("void"!==r)return e.format(i,r,t);e.addLineFlowCode(i,this)}}let bj=v_(bH).setParameterLength(1,2),bW=e=>(e?bt(e,bj("discard")):bj("discard")).toStack();y1("discard",bW);class bX extends yG{static get type(){return"RenderOutputNode"}constructor(e,t,r){super("vec4"),this.colorNode=e,this._toneMapping=t,this.outputColorSpace=r,this.isRenderOutputNode=!0}setToneMapping(e){return this._toneMapping=e,this}getToneMapping(){return this._toneMapping}setup({context:e}){let t=this.colorNode||e.color,r=(null!==this._toneMapping?this._toneMapping:e.toneMapping)||0,i=(null!==this.outputColorSpace?this.outputColorSpace:e.outputColorSpace)||"";return 0!==r&&(t=t.toneMapping(r)),""!==i&&i!==e2.workingColorSpace&&(t=t.workingToColorSpace(i)),t}}let bQ=(e,t=null,r=null)=>vg(new bX(vg(e),t,r));y1("renderOutput",bQ);class b$ extends yG{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){let t=this.callback,r=this.node.build(e),i="--- TSL debug - "+e.shaderStage+" shader ---",n="-".repeat(i.length),a="";return a+="// #"+i+"#\n"+e.flow.code.replace(/^\t/mg,"")+"\n"+("/* ... */ "+r)+" /* ... */\n"+("// #"+n)+"#\n",null!==t?t(e,a):eP(a),r}}let bY=(e,t=null)=>vg(new b$(vg(e),t)).toStack();y1("debug",bY);class bK{constructor(){this._renderer=null,this.currentFrame=null}get nodeFrame(){return this._renderer._nodes.nodeFrame}setRenderer(e){return this._renderer=e,this}getRenderer(){return this._renderer}init(){}begin(){}finish(){}inspect(){}computeAsync(){}beginCompute(){}finishCompute(){}beginRender(){}finishRender(){}copyTextureToTexture(){}copyFramebufferToTexture(){}}class bZ extends yz{static get type(){return"InspectorNode"}constructor(e,t="",r=null){super(),this.node=e,this.name=t,this.callback=r,this.updateType=yI.FRAME,this.isInspectorNode=!0}getName(){return this.name||this.node.name}update(e){e.renderer.inspector.inspect(this)}getNodeType(e){return this.node.getNodeType(e)}setup(e){let t=this.node;return!0===e.context.inspector&&null!==this.callback&&(t=this.callback(t)),!0!==e.renderer.backend.isWebGPUBackend&&e.renderer.inspector.constructor!==bK&&eD('TSL: ".toInspector()" is only available with WebGPU.'),t}}function bJ(e,t="",r=null){return(e=vg(e)).before(new bZ(e,t,r))}y1("toInspector",bJ);class b0 extends yz{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(null===t){let r=this.getAttributeName(e);if(e.hasGeometryAttribute(r)){let i=e.geometry.getAttribute(r);t=e.getTypeFromAttribute(i)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){let t=this.getAttributeName(e),r=this.getNodeType(e);if(!0!==e.hasGeometryAttribute(t))return eI(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(r);{let i=e.geometry.getAttribute(t),n=e.getTypeFromAttribute(i),a=e.getAttribute(t,n);return"vertex"===e.shaderStage?e.format(a.name,n,r):bp(this).build(e,r)}}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}let b1=(e,t=null)=>vg(new b0(e,t)),b2=(e=0)=>b1("uv"+(e>0?e:""),"vec2"),b3=v_(class extends yz{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){let r=this.textureNode.build(e,"property"),i=null===this.levelNode?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${r}, ${i} )`,this.getNodeType(e),t)}}).setParameterLength(1,2),b4=v_(class extends xM{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=yI.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){let e=this.texture,t=e.images,r=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(r&&void 0!==r.width){let{width:e,height:t}=r;this.value=Math.log2(Math.max(e,t))}}}).setParameterLength(1),b5=new tt;class b8 extends xM{static get type(){return"TextureNode"}constructor(e=b5,t=null,r=null,i=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=r,this.biasNode=i,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.offsetNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=yI.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this._flipYUniform=null,this.setUpdateMatrix(null===t)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return!0===this.value.isDepthTexture?"float":1014===this.value.type?"uvec4":1013===this.value.type?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return b2(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return null===this._matrixUniform&&(this._matrixUniform=xE(this.value.matrix)),this._matrixUniform.mul(vz(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this}setupUV(e,t){return e.isFlipY()&&(null===this._flipYUniform&&(this._flipYUniform=xE(!1)),t=t.toVar(),t=this.sampler?this._flipYUniform.select(t.flipY(),t):this._flipYUniform.select(t.setY(vL(b3(this,this.levelNode).y).sub(t.y).sub(1)),t)),t}setup(e){let t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;let r=this.value;if(!r||!0!==r.isTexture)throw Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let i=vM(()=>{let t=this.uvNode;return(null===t||!0===e.context.forceUVContext)&&e.context.getUV&&(t=e.context.getUV(this,e)),t||(t=this.getDefaultUV()),!0===this.updateMatrix&&(t=this.getTransformedUV(t)),t=this.setupUV(e,t),this.updateType=null!==this._matrixUniform||null!==this._flipYUniform?yI.OBJECT:yI.NONE,t})(),n=this.levelNode;null===n&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),t.uvNode=i,t.levelNode=n,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode,t.offsetNode=this.offsetNode}generateUV(e,t){return t.build(e,!0===this.sampler?"vec2":"ivec2")}generateOffset(e,t){return t.build(e,"ivec2")}generateSnippet(e,t,r,i,n,a,s,o,l){let u=this.value;return n?e.generateTextureBias(u,t,r,n,a,l):o?e.generateTextureGrad(u,t,r,o,a,l):s?e.generateTextureCompare(u,t,r,s,a,l):!1===this.sampler?e.generateTextureLoad(u,t,r,i,a,l):i?e.generateTextureLevel(u,t,r,i,a,l):e.generateTexture(u,t,r,a,l)}generate(e,t){let r=this.value,i=e.getNodeProperties(this),n=super.generate(e,"property");if(/^sampler/.test(t))return n+"_sampler";{if(e.isReference(t))return n;let a=e.getDataFromNode(this),s=a.propertyName;if(void 0===s){let{uvNode:t,levelNode:r,biasNode:o,compareNode:l,depthNode:u,gradNode:c,offsetNode:h}=i,d=this.generateUV(e,t),A=r?r.build(e,"float"):null,p=o?o.build(e,"float"):null,f=u?u.build(e,"int"):null,m=l?l.build(e,"float"):null,g=c?[c[0].build(e,"vec2"),c[1].build(e,"vec2")]:null,y=h?this.generateOffset(e,h):null,v=e.getVarFromNode(this);s=e.getPropertyName(v);let x=this.generateSnippet(e,n,d,A,p,f,m,g,y);e.addLineFlowCode(`${s} = ${x}`,this),a.snippet=x,a.propertyName=s}let o=s,l=this.getNodeType(e);return e.needsToWorkingColorSpace(r)&&(o=b_(bj(o,l),r.colorSpace).setup(e).build(e,l)),e.format(o,l,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return eI("TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){let t=this.clone();return t.uvNode=vg(e),t.referenceNode=this.getBase(),vg(t)}load(e){return this.sample(e).setSampler(!1)}blur(e){let t=this.clone();t.biasNode=vg(e).mul(b4(t)),t.referenceNode=this.getBase();let r=t.value;return!1===t.generateMipmaps&&(r&&!1===r.generateMipmaps||1003===r.minFilter||1003===r.magFilter)&&(eI("TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),vg(t)}level(e){let t=this.clone();return t.levelNode=vg(e),t.referenceNode=this.getBase(),vg(t)}size(e){return b3(this,e)}bias(e){let t=this.clone();return t.biasNode=vg(e),t.referenceNode=this.getBase(),vg(t)}getBase(){return this.referenceNode?this.referenceNode.getBase():this}compare(e){let t=this.clone();return t.compareNode=vg(e),t.referenceNode=this.getBase(),vg(t)}grad(e,t){let r=this.clone();return r.gradNode=[vg(e),vg(t)],r.referenceNode=this.getBase(),vg(r)}depth(e){let t=this.clone();return t.depthNode=vg(e),t.referenceNode=this.getBase(),vg(t)}offset(e){let t=this.clone();return t.offsetNode=vg(e),t.referenceNode=this.getBase(),vg(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){let e=this.value,t=this._matrixUniform;null!==t&&(t.value=e.matrix),!0===e.matrixAutoUpdate&&e.updateMatrix();let r=this._flipYUniform;null!==r&&(r.value=e.image instanceof ImageBitmap&&!0===e.flipY||!0===e.isRenderTargetTexture||!0===e.isFramebufferTexture||!0===e.isDepthTexture)}clone(){let e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}let b6=v_(b8).setParameterLength(1,4).setName("texture"),b7=(e=b5,t=null,r=null,i=null)=>{let n;return e&&!0===e.isTextureNode?((n=vg(e.clone())).referenceNode=e.getBase(),null!==t&&(n.uvNode=vg(t)),null!==r&&(n.levelNode=vg(r)),null!==i&&(n.biasNode=vg(i))):n=b6(e,t,r,i),n},b9=(...e)=>b7(...e).setSampler(!1);class Se extends xM{static get type(){return"BufferNode"}constructor(e,t,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=r}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}let St=(e,t,r)=>vg(new Se(e,t,r));class Sr extends yV{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){let t=super.generate(e),r=this.getNodeType(),i=this.node.getPaddedType();return e.format(t,i,r)}}class Si extends Se{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=null===t?yM(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=yI.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){let e=this.elementType,t="vec4";return"mat2"===e?t="mat2":!0===/mat/.test(e)?t="mat4":"i"===e.charAt(0)?t="ivec4":"u"===e.charAt(0)&&(t="uvec4"),t}update(){let{array:e,value:t}=this,r=this.elementType;if("float"===r||"int"===r||"uint"===r)for(let r=0;r<e.length;r++)t[4*r]=e[r];else if("color"===r)for(let r=0;r<e.length;r++){let i=4*r,n=e[r];t[i]=n.r,t[i+1]=n.g,t[i+2]=n.b||0}else if("mat2"===r)for(let r=0;r<e.length;r++){let i=4*r,n=e[r];t[i]=n.elements[0],t[i+1]=n.elements[1],t[i+2]=n.elements[2],t[i+3]=n.elements[3]}else if("mat3"===r)for(let r=0;r<e.length;r++){let i=16*r,n=e[r];t[i]=n.elements[0],t[i+1]=n.elements[1],t[i+2]=n.elements[2],t[i+4]=n.elements[3],t[i+5]=n.elements[4],t[i+6]=n.elements[5],t[i+8]=n.elements[6],t[i+9]=n.elements[7],t[i+10]=n.elements[8],t[i+15]=1}else if("mat4"===r)for(let r=0;r<e.length;r++){let i=16*r,n=e[r];for(let e=0;e<n.elements.length;e++)t[i+e]=n.elements[e]}else for(let r=0;r<e.length;r++){let i=4*r,n=e[r];t[i]=n.x,t[i+1]=n.y,t[i+2]=n.z||0,t[i+3]=n.w||0}}setup(e){let t=this.array.length,r=this.elementType,i=Float32Array,n=this.paddedType,a=e.getTypeLength(n);return"i"===r.charAt(0)&&(i=Int32Array),"u"===r.charAt(0)&&(i=Uint32Array),this.value=new i(t*a),this.bufferCount=t,this.bufferType=n,super.setup(e)}element(e){return vg(new Sr(this,vg(e)))}}let Sn=(e,t)=>vg(new Si(e,t)),Sa=v_(class extends yz{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}).setParameterLength(1);class Ss extends yz{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this._output=null,this.isViewportNode=!0}getNodeType(){return this.scope===Ss.DPR?"float":this.scope===Ss.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=yI.NONE;return(this.scope===Ss.SIZE||this.scope===Ss.VIEWPORT||this.scope===Ss.DPR)&&(e=yI.RENDER),this.updateType=e,e}update({renderer:e}){let t=e.getRenderTarget();this.scope===Ss.VIEWPORT?null!==t?o.copy(t.viewport):(e.getViewport(o),o.multiplyScalar(e.getPixelRatio())):this.scope===Ss.DPR?this._output.value=e.getPixelRatio():null!==t?(s.width=t.width,s.height=t.height):e.getDrawingBufferSize(s)}setup(){let e=this.scope,t=null;return t=e===Ss.SIZE?xE(s||(s=new eX)):e===Ss.VIEWPORT?xE(o||(o=new tr)):e===Ss.DPR?xE(1):vF(Sc.div(Su)),this._output=t,t}generate(e){if(this.scope===Ss.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){let r=e.getNodeProperties(Su).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${r}.y - ${t}.y )`}return t}return super.generate(e)}}Ss.COORDINATE="coordinate",Ss.VIEWPORT="viewport",Ss.SIZE="size",Ss.UV="uv",Ss.DPR="dpr";let So=vb(Ss,Ss.DPR),Sl=vb(Ss,Ss.UV),Su=vb(Ss,Ss.SIZE),Sc=vb(Ss,Ss.COORDINATE),Sh=vb(Ss,Ss.VIEWPORT),Sd=Sh.zw,SA=Sc.sub(Sh.xy),Sp=SA.div(Sd),Sf=vM(()=>(eI('TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),Su),"vec2").once()(),Sm=xE(0,"uint").setName("u_cameraIndex").setGroup(xb("cameraIndex")).toVarying("v_cameraIndex"),Sg=xE("float").setName("cameraNear").setGroup(xT).onRenderUpdate(({camera:e})=>e.near),Sy=xE("float").setName("cameraFar").setGroup(xT).onRenderUpdate(({camera:e})=>e.far),Sv=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t of e.cameras)r.push(t.projectionMatrix);t=Sn(r).setGroup(xT).setName("cameraProjectionMatrices").element(e.isMultiViewCamera?Sa("gl_ViewID_OVR"):Sm).toConst("cameraProjectionMatrix")}else t=xE("mat4").setName("cameraProjectionMatrix").setGroup(xT).onRenderUpdate(({camera:e})=>e.projectionMatrix);return t}).once()(),Sx=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t of e.cameras)r.push(t.projectionMatrixInverse);t=Sn(r).setGroup(xT).setName("cameraProjectionMatricesInverse").element(e.isMultiViewCamera?Sa("gl_ViewID_OVR"):Sm).toConst("cameraProjectionMatrixInverse")}else t=xE("mat4").setName("cameraProjectionMatrixInverse").setGroup(xT).onRenderUpdate(({camera:e})=>e.projectionMatrixInverse);return t}).once()(),S_=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t of e.cameras)r.push(t.matrixWorldInverse);t=Sn(r).setGroup(xT).setName("cameraViewMatrices").element(e.isMultiViewCamera?Sa("gl_ViewID_OVR"):Sm).toConst("cameraViewMatrix")}else t=xE("mat4").setName("cameraViewMatrix").setGroup(xT).onRenderUpdate(({camera:e})=>e.matrixWorldInverse);return t}).once()(),Sb=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t of e.cameras)r.push(t.matrixWorld);t=Sn(r).setGroup(xT).setName("cameraWorldMatrices").element(e.isMultiViewCamera?Sa("gl_ViewID_OVR"):Sm).toConst("cameraWorldMatrix")}else t=xE("mat4").setName("cameraWorldMatrix").setGroup(xT).onRenderUpdate(({camera:e})=>e.matrixWorld);return t}).once()(),SS=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t of e.cameras)r.push(t.normalMatrix);t=Sn(r).setGroup(xT).setName("cameraNormalMatrices").element(e.isMultiViewCamera?Sa("gl_ViewID_OVR"):Sm).toConst("cameraNormalMatrix")}else t=xE("mat3").setName("cameraNormalMatrix").setGroup(xT).onRenderUpdate(({camera:e})=>e.normalMatrix);return t}).once()(),ST=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t=0,i=e.cameras.length;t<i;t++)r.push(new e$);t=Sn(r).setGroup(xT).setName("cameraPositions").onRenderUpdate(({camera:e},t)=>{let r=e.cameras,i=t.array;for(let e=0,t=r.length;e<t;e++)i[e].setFromMatrixPosition(r[e].matrixWorld)}).element(e.isMultiViewCamera?Sa("gl_ViewID_OVR"):Sm).toConst("cameraPosition")}else t=xE(new e$).setName("cameraPosition").setGroup(xT).onRenderUpdate(({camera:e},t)=>t.value.setFromMatrixPosition(e.matrixWorld));return t}).once()(),Sw=vM(({camera:e})=>{let t;if(e.isArrayCamera&&e.cameras.length>0){let r=[];for(let t of e.cameras)r.push(t.viewport);t=Sn(r,"vec4").setGroup(xT).setName("cameraViewports").element(Sm).toConst("cameraViewport")}else t=vH(0,0,Su.x,Su.y).toConst("cameraViewport");return t}).once()(),SM=new tE;class SE extends yz{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=yI.OBJECT,this.uniformNode=new xM(null)}getNodeType(){let e=this.scope;return e===SE.WORLD_MATRIX?"mat4":e===SE.POSITION||e===SE.VIEW_POSITION||e===SE.DIRECTION||e===SE.SCALE?"vec3":e===SE.RADIUS?"float":void 0}update(e){let t=this.object3d,r=this.uniformNode,i=this.scope;if(i===SE.WORLD_MATRIX)r.value=t.matrixWorld;else if(i===SE.POSITION)r.value=r.value||new e$,r.value.setFromMatrixPosition(t.matrixWorld);else if(i===SE.SCALE)r.value=r.value||new e$,r.value.setFromMatrixScale(t.matrixWorld);else if(i===SE.DIRECTION)r.value=r.value||new e$,t.getWorldDirection(r.value);else if(i===SE.VIEW_POSITION){let i=e.camera;r.value=r.value||new e$,r.value.setFromMatrixPosition(t.matrixWorld),r.value.applyMatrix4(i.matrixWorldInverse)}else if(i===SE.RADIUS){let i=e.object.geometry;null===i.boundingSphere&&i.computeBoundingSphere(),SM.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),r.value=SM.radius}}generate(e){let t=this.scope;return t===SE.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===SE.POSITION||t===SE.VIEW_POSITION||t===SE.DIRECTION||t===SE.SCALE?this.uniformNode.nodeType="vec3":t===SE.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}SE.WORLD_MATRIX="worldMatrix",SE.POSITION="position",SE.SCALE="scale",SE.VIEW_POSITION="viewPosition",SE.DIRECTION="direction",SE.RADIUS="radius";let SC=v_(SE,SE.DIRECTION).setParameterLength(1),SR=v_(SE,SE.WORLD_MATRIX).setParameterLength(1),SN=v_(SE,SE.POSITION).setParameterLength(1),SP=v_(SE,SE.SCALE).setParameterLength(1),SI=v_(SE,SE.VIEW_POSITION).setParameterLength(1),SL=v_(SE,SE.RADIUS).setParameterLength(1);class SD extends SE{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}let SB=vb(SD,SD.DIRECTION),SF=vb(SD,SD.WORLD_MATRIX),SO=vb(SD,SD.POSITION),SU=vb(SD,SD.SCALE),Sk=vb(SD,SD.VIEW_POSITION),Sz=vb(SD,SD.RADIUS),SV=xE(new eZ).onObjectUpdate(({object:e},t)=>t.value.getNormalMatrix(e.matrixWorld)),Sq=xE(new tF).onObjectUpdate(({object:e},t)=>t.value.copy(e.matrixWorld).invert()),SG=vM(e=>e.renderer.overrideNodes.modelViewMatrix||SH).once()().toVar("modelViewMatrix"),SH=S_.mul(SF),Sj=vM(e=>(e.context.isHighPrecisionModelViewMatrix=!0,xE("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),SW=vM(e=>{let t=e.context.isHighPrecisionModelViewMatrix;return xE("mat3").onObjectUpdate(({object:e,camera:r})=>(!0!==t&&e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),SX=b1("position","vec3"),SQ=SX.toVarying("positionLocal"),S$=SX.toVarying("positionPrevious"),SY=vM(e=>SF.mul(SQ).xyz.toVarying(e.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),SK=vM(()=>SQ.transformDirection(SF).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),SZ=vM(e=>e.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),SJ=vM(e=>(e.camera.isOrthographicCamera?vz(0,0,1):SZ.negate().toVarying("v_positionViewDirection").normalize()).toVar("positionViewDirection"),"vec3").once(["POSITION"])(),S0=vb(class extends yz{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if("fragment"!==e.shaderStage)return"true";let{material:t}=e;return 1===t.side?"false":e.getFrontFacing()}}),S1=vI(S0).mul(2).sub(1),S2=vM(([e],{material:t})=>{let r=t.side;return 1===r?e=e.mul(-1):2===r&&(e=e.mul(S1)),e}),S3=b1("normal","vec3"),S4=vM(e=>!1===e.geometry.hasAttribute("normal")?(eI('TSL: Vertex attribute "normal" not found on geometry.'),vz(0,1,0)):S3,"vec3").once()().toVar("normalLocal"),S5=SZ.dFdx().cross(SZ.dFdy()).normalize().toVar("normalFlat"),S8=vM(e=>!0===e.material.flatShading?S5:Tr(S4).toVarying("v_normalViewGeometry").normalize(),"vec3").once()().toVar("normalViewGeometry"),S6=vM(e=>{let t=S8.transformDirection(S_);return!0!==e.material.flatShading&&(t=t.toVarying("v_normalWorldGeometry")),t.normalize().toVar("normalWorldGeometry")},"vec3").once()(),S7=vM(({subBuildFn:e,material:t,context:r})=>{let i;return"NORMAL"===e||"VERTEX"===e?(i=S8,!0!==t.flatShading&&(i=S2(i))):i=r.setupNormal().context({getUV:null}),i},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),S9=S7.transformDirection(S_).toVar("normalWorld"),Te=vM(({subBuildFn:e,context:t})=>"NORMAL"===e||"VERTEX"===e?S7:t.setupClearcoatNormal().context({getUV:null}),"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),Tt=vM(([e,t=SF])=>{let r=v$(t),i=e.div(vz(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2])));return r.mul(i).xyz}),Tr=vM(([e],t)=>{let r=t.renderer.overrideNodes.modelNormalViewMatrix;if(null!==r)return r.transformDirection(e);let i=SV.mul(e);return S_.transformDirection(i)}),Ti=vM(()=>(eI('TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),S7)).once(["NORMAL","VERTEX"])(),Tn=vM(()=>(eI('TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),S9)).once(["NORMAL","VERTEX"])(),Ta=vM(()=>(eI('TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),Te)).once(["NORMAL","VERTEX"])(),Ts=new tW,To=new tF,Tl=xE(0).onReference(({material:e})=>e).onObjectUpdate(({material:e})=>e.refractionRatio),Tu=xE(1).onReference(({material:e})=>e).onObjectUpdate(function({material:e,scene:t}){return e.envMap?e.envMapIntensity:t.environmentIntensity}),Tc=xE(new tF).onReference(function(e){return e.material}).onObjectUpdate(function({material:e,scene:t}){let r=null!==t.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation;return r?(Ts.copy(r),To.makeRotationFromEuler(Ts)):To.identity(),To}),Th=SJ.negate().reflect(S7),Td=SJ.negate().refract(S7,Tl),TA=Th.transformDirection(S_).toVar("reflectVector"),Tp=Td.transformDirection(S_).toVar("reflectVector"),Tf=new ic,Tm=v_(class extends b8{static get type(){return"CubeTextureNode"}constructor(e,t=null,r=null,i=null){super(e,t,r,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){let e=this.value;return 301===e.mapping?TA:302===e.mapping?Tp:(eL('CubeTextureNode: Mapping "%s" not supported.',e.mapping),vz(0,0,0))}setUpdateMatrix(){}setupUV(e,t){let r=this.value;return 2001!==e.renderer.coordinateSystem&&r.isRenderTargetTexture||(t=vz(t.x.negate(),t.yz)),Tc.mul(t)}generateUV(e,t){return t.build(e,!0===this.sampler?"vec3":"ivec3")}}).setParameterLength(1,4).setName("cubeTexture"),Tg=(e=Tf,t=null,r=null,i=null)=>{let n;return e&&!0===e.isCubeTextureNode?((n=vg(e.clone())).referenceNode=e,null!==t&&(n.uvNode=vg(t)),null!==r&&(n.levelNode=vg(r)),null!==i&&(n.biasNode=vg(i))):n=Tm(e,t,r,i),n};class Ty extends yV{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){let t=super.generate(e),r=this.referenceNode.getNodeType(),i=this.getNodeType();return e.format(t,r,i)}}class Tv extends yz{static get type(){return"ReferenceNode"}constructor(e,t,r=null,i=null){super(),this.property=e,this.uniformType=t,this.object=r,this.count=i,this.properties=e.split("."),this.reference=r,this.node=null,this.group=null,this.name=null,this.updateType=yI.OBJECT}element(e){return vg(new Ty(this,vg(e)))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return eI('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let t=null;t=null!==this.count?St(null,e,this.count):Array.isArray(this.getValueFromReference())?Sn(null,e):"texture"===e?b7(null):"cubeTexture"===e?Tg(null):xE(null,e),null!==this.group&&t.setGroup(this.group),null!==this.name&&t.setName(this.name),this.node=t}getNodeType(e){return null===this.node&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){let{properties:t}=this,r=e[t[0]];for(let e=1;e<t.length;e++)r=r[t[e]];return r}updateReference(e){return this.reference=null!==this.object?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){null===this.node&&this.setNodeType(this.uniformType);let e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}let Tx=(e,t,r)=>vg(new Tv(e,t,r)),T_=(e,t,r,i)=>vg(new Tv(e,t,i,r));class Tb extends Tv{static get type(){return"MaterialReferenceNode"}constructor(e,t,r=null){super(e,t,r),this.material=r,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=null!==this.material?this.material:e.material,this.reference}}let TS=(e,t,r=null)=>vg(new Tb(e,t,r)),TT=b2(),Tw=SZ.dFdx(),TM=SZ.dFdy(),TE=TT.dFdx(),TC=TT.dFdy(),TR=TM.cross(S7),TN=S7.cross(Tw),TP=TR.mul(TE.x).add(TN.mul(TC.x)),TI=TR.mul(TE.y).add(TN.mul(TC.y)),TL=TP.dot(TP).max(TI.dot(TI)),TD=TL.equal(0).select(0,TL.inverseSqrt()),TB=TP.mul(TD).toVar("tangentViewFrame"),TF=TI.mul(TD).toVar("bitangentViewFrame"),TO=vM(e=>(!1===e.geometry.hasAttribute("tangent")&&e.geometry.computeTangents(),b1("tangent","vec4")))(),TU=TO.xyz.toVar("tangentLocal"),Tk=vM(({subBuildFn:e,geometry:t,material:r})=>{let i;return i="VERTEX"===e||t.hasAttribute("tangent")?SG.mul(vH(TU,0)).xyz.toVarying("v_tangentView").normalize():TB,!0!==r.flatShading&&(i=S2(i)),i},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),Tz=Tk.transformDirection(S_).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),TV=vM(([e,t],{subBuildFn:r,material:i})=>{let n=e.mul(TO.w).xyz;return"NORMAL"===r&&!0!==i.flatShading&&(n=n.toVarying(t)),n}).once(["NORMAL"]),Tq=TV(S3.cross(TO),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),TG=TV(S4.cross(TU),"v_bitangentLocal").normalize().toVar("bitangentLocal"),TH=vM(({subBuildFn:e,geometry:t,material:r})=>{let i;return i="VERTEX"===e||t.hasAttribute("tangent")?TV(S7.cross(Tk),"v_bitangentView").normalize():TF,!0!==r.flatShading&&(i=S2(i)),i},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),Tj=TV(S9.cross(Tz),"v_bitangentWorld").normalize().toVar("bitangentWorld"),TW=v$(Tk,TH,S7).toVar("TBNViewMatrix"),TX=SJ.mul(TW),TQ=vM(()=>{let e=xs.cross(SJ);return _0(e=e.cross(xs).normalize(),S7,xn.mul(v4.oneMinus()).oneMinus().pow2().pow2()).normalize()}).once()(),T$=v_(class extends yG{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=0}setup({material:e}){let{normalMapType:t,scaleNode:r}=this,i=this.node.mul(2).sub(1);if(null!==r){let t=r;!0===e.flatShading&&(t=S2(t)),i=vz(i.xy.mul(t),i.z)}let n=null;return 1===t?n=Tr(i):0===t?n=TW.mul(i).normalize():(eL(`NodeMaterial: Unsupported normal map type: ${t}`),n=S7),n}}).setParameterLength(1,2),TY=vM(({textureNode:e,bumpScale:t})=>{let r=t=>e.isolate().context({getUV:e=>t(e.uvNode||b2()),forceUVContext:!0}),i=vI(r(e=>e));return vF(vI(r(e=>e.add(e.dFdx()))).sub(i),vI(r(e=>e.add(e.dFdy()))).sub(i)).mul(t)}),TK=vM(e=>{let{surf_pos:t,surf_norm:r,dHdxy:i}=e,n=t.dFdx().normalize(),a=t.dFdy().normalize().cross(r),s=r.cross(n),o=n.dot(a).mul(S1),l=o.sign().mul(i.x.mul(a).add(i.y.mul(s)));return o.abs().mul(r).sub(l).normalize()}),TZ=v_(class extends yG{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){let e=null!==this.scaleNode?this.scaleNode:1;return TK({surf_pos:SZ,surf_norm:S7,dHdxy:TY({textureNode:this.textureNode,bumpScale:e})})}}).setParameterLength(1,2),TJ=new Map;class T0 extends yz{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let r=TJ.get(e);return void 0===r&&(r=TS(e,t),TJ.set(e,r)),r}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache("map"===e?"map":e+"Map","texture")}setup(e){let t=e.context.material,r=this.scope,i=null;if(r===T0.COLOR){let e=void 0!==t.color?this.getColor(r):vz();i=t.map&&!0===t.map.isTexture?e.mul(this.getTexture("map")):e}else if(r===T0.OPACITY){let e=this.getFloat(r);i=t.alphaMap&&!0===t.alphaMap.isTexture?e.mul(this.getTexture("alpha")):e}else if(r===T0.SPECULAR_STRENGTH)i=t.specularMap&&!0===t.specularMap.isTexture?this.getTexture("specular").r:vI(1);else if(r===T0.SPECULAR_INTENSITY){let e=this.getFloat(r);i=t.specularIntensityMap&&!0===t.specularIntensityMap.isTexture?e.mul(this.getTexture(r).a):e}else if(r===T0.SPECULAR_COLOR){let e=this.getColor(r);i=t.specularColorMap&&!0===t.specularColorMap.isTexture?e.mul(this.getTexture(r).rgb):e}else if(r===T0.ROUGHNESS){let e=this.getFloat(r);i=t.roughnessMap&&!0===t.roughnessMap.isTexture?e.mul(this.getTexture(r).g):e}else if(r===T0.METALNESS){let e=this.getFloat(r);i=t.metalnessMap&&!0===t.metalnessMap.isTexture?e.mul(this.getTexture(r).b):e}else if(r===T0.EMISSIVE){let e=this.getFloat("emissiveIntensity"),n=this.getColor(r).mul(e);i=t.emissiveMap&&!0===t.emissiveMap.isTexture?n.mul(this.getTexture(r)):n}else if(r===T0.NORMAL)t.normalMap?(i=T$(this.getTexture("normal"),this.getCache("normalScale","vec2"))).normalMapType=t.normalMapType:i=t.bumpMap?TZ(this.getTexture("bump").r,this.getFloat("bumpScale")):S7;else if(r===T0.CLEARCOAT){let e=this.getFloat(r);i=t.clearcoatMap&&!0===t.clearcoatMap.isTexture?e.mul(this.getTexture(r).r):e}else if(r===T0.CLEARCOAT_ROUGHNESS){let e=this.getFloat(r);i=t.clearcoatRoughnessMap&&!0===t.clearcoatRoughnessMap.isTexture?e.mul(this.getTexture(r).r):e}else if(r===T0.CLEARCOAT_NORMAL)i=t.clearcoatNormalMap?T$(this.getTexture(r),this.getCache(r+"Scale","vec2")):S7;else if(r===T0.SHEEN){let e=this.getColor("sheenColor").mul(this.getFloat("sheen"));i=t.sheenColorMap&&!0===t.sheenColorMap.isTexture?e.mul(this.getTexture("sheenColor").rgb):e}else if(r===T0.SHEEN_ROUGHNESS){let e=this.getFloat(r);i=(i=t.sheenRoughnessMap&&!0===t.sheenRoughnessMap.isTexture?e.mul(this.getTexture(r).a):e).clamp(.07,1)}else if(r===T0.ANISOTROPY)if(t.anisotropyMap&&!0===t.anisotropyMap.isTexture){let e=this.getTexture(r);i=vQ(wC.x,wC.y,wC.y.negate(),wC.x).mul(e.rg.mul(2).sub(vF(1)).normalize().mul(e.b))}else i=wC;else if(r===T0.IRIDESCENCE_THICKNESS){let e=Tx("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){let n=Tx("0","float",t.iridescenceThicknessRange);i=e.sub(n).mul(this.getTexture(r).g).add(n)}else i=e}else if(r===T0.TRANSMISSION){let e=this.getFloat(r);i=t.transmissionMap?e.mul(this.getTexture(r).r):e}else if(r===T0.THICKNESS){let e=this.getFloat(r);i=t.thicknessMap?e.mul(this.getTexture(r).g):e}else if(r===T0.IOR)i=this.getFloat(r);else if(r===T0.LIGHT_MAP)i=this.getTexture(r).rgb.mul(this.getFloat("lightMapIntensity"));else if(r===T0.AO)i=this.getTexture(r).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(r===T0.LINE_DASH_OFFSET)i=t.dashOffset?this.getFloat(r):vI(0);else{let t=this.getNodeType(e);i=this.getCache(r,t)}return i}}T0.ALPHA_TEST="alphaTest",T0.COLOR="color",T0.OPACITY="opacity",T0.SHININESS="shininess",T0.SPECULAR="specular",T0.SPECULAR_STRENGTH="specularStrength",T0.SPECULAR_INTENSITY="specularIntensity",T0.SPECULAR_COLOR="specularColor",T0.REFLECTIVITY="reflectivity",T0.ROUGHNESS="roughness",T0.METALNESS="metalness",T0.NORMAL="normal",T0.CLEARCOAT="clearcoat",T0.CLEARCOAT_ROUGHNESS="clearcoatRoughness",T0.CLEARCOAT_NORMAL="clearcoatNormal",T0.EMISSIVE="emissive",T0.ROTATION="rotation",T0.SHEEN="sheen",T0.SHEEN_ROUGHNESS="sheenRoughness",T0.ANISOTROPY="anisotropy",T0.IRIDESCENCE="iridescence",T0.IRIDESCENCE_IOR="iridescenceIOR",T0.IRIDESCENCE_THICKNESS="iridescenceThickness",T0.IOR="ior",T0.TRANSMISSION="transmission",T0.THICKNESS="thickness",T0.ATTENUATION_DISTANCE="attenuationDistance",T0.ATTENUATION_COLOR="attenuationColor",T0.LINE_SCALE="scale",T0.LINE_DASH_SIZE="dashSize",T0.LINE_GAP_SIZE="gapSize",T0.LINE_WIDTH="linewidth",T0.LINE_DASH_OFFSET="dashOffset",T0.POINT_SIZE="size",T0.DISPERSION="dispersion",T0.LIGHT_MAP="light",T0.AO="ao";let T1=vb(T0,T0.ALPHA_TEST),T2=vb(T0,T0.COLOR),T3=vb(T0,T0.SHININESS),T4=vb(T0,T0.EMISSIVE),T5=vb(T0,T0.OPACITY),T8=vb(T0,T0.SPECULAR),T6=vb(T0,T0.SPECULAR_INTENSITY),T7=vb(T0,T0.SPECULAR_COLOR),T9=vb(T0,T0.SPECULAR_STRENGTH),we=vb(T0,T0.REFLECTIVITY),wt=vb(T0,T0.ROUGHNESS),wr=vb(T0,T0.METALNESS),wi=vb(T0,T0.NORMAL),wn=vb(T0,T0.CLEARCOAT),wa=vb(T0,T0.CLEARCOAT_ROUGHNESS),ws=vb(T0,T0.CLEARCOAT_NORMAL),wo=vb(T0,T0.ROTATION),wl=vb(T0,T0.SHEEN),wu=vb(T0,T0.SHEEN_ROUGHNESS),wc=vb(T0,T0.ANISOTROPY),wh=vb(T0,T0.IRIDESCENCE),wd=vb(T0,T0.IRIDESCENCE_IOR),wA=vb(T0,T0.IRIDESCENCE_THICKNESS),wp=vb(T0,T0.TRANSMISSION),wf=vb(T0,T0.THICKNESS),wm=vb(T0,T0.IOR),wg=vb(T0,T0.ATTENUATION_DISTANCE),wy=vb(T0,T0.ATTENUATION_COLOR),wv=vb(T0,T0.LINE_SCALE),wx=vb(T0,T0.LINE_DASH_SIZE),w_=vb(T0,T0.LINE_GAP_SIZE),wb=vb(T0,T0.LINE_WIDTH),wS=vb(T0,T0.LINE_DASH_OFFSET),wT=vb(T0,T0.POINT_SIZE),ww=vb(T0,T0.DISPERSION),wM=vb(T0,T0.LIGHT_MAP),wE=vb(T0,T0.AO),wC=xE(new eX).onReference(function(e){return e.material}).onRenderUpdate(function({material:e}){this.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation))}),wR=vM(e=>e.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class wN extends yz{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){let t,r=this.getNodeType(e),i=this.scope;if(i===wN.VERTEX)t=e.getVertexIndex();else if(i===wN.INSTANCE)t=e.getInstanceIndex();else if(i===wN.DRAW)t=e.getDrawIndex();else if(i===wN.INVOCATION_LOCAL)t=e.getInvocationLocalIndex();else if(i===wN.INVOCATION_SUBGROUP)t=e.getInvocationSubgroupIndex();else if(i===wN.SUBGROUP)t=e.getSubgroupIndex();else throw Error("THREE.IndexNode: Unknown scope: "+i);return"vertex"===e.shaderStage||"compute"===e.shaderStage?t:bp(this).build(e,r)}}wN.VERTEX="vertex",wN.INSTANCE="instance",wN.SUBGROUP="subgroup",wN.INVOCATION_LOCAL="invocationLocal",wN.INVOCATION_SUBGROUP="invocationSubgroup",wN.DRAW="draw";let wP=vb(wN,wN.VERTEX),wI=vb(wN,wN.INSTANCE),wL=vb(wN,wN.SUBGROUP),wD=vb(wN,wN.INVOCATION_SUBGROUP),wB=vb(wN,wN.INVOCATION_LOCAL),wF=vb(wN,wN.DRAW);class wO extends yz{static get type(){return"InstanceNode"}constructor(e,t,r=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=r,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=yI.FRAME,this.buffer=null,this.bufferColor=null}setup(e){let{instanceMatrix:t,instanceColor:r}=this,{count:i}=t,{instanceMatrixNode:n,instanceColorNode:a}=this;if(null===n){if(i<=1e3)n=St(t.array,"mat4",Math.max(i,1)).element(wI);else{let e=new oQ(t.array,16,1);this.buffer=e;let r=35048===t.usage?bL:bI;n=vY(r(e,"vec4",16,0),r(e,"vec4",16,4),r(e,"vec4",16,8),r(e,"vec4",16,12))}this.instanceMatrixNode=n}if(r&&null===a){let e=new i1(r.array,3),t=35048===r.usage?bL:bI;this.bufferColor=e,a=vz(t(e,"vec3",3,0)),this.instanceColorNode=a}let s=n.mul(SQ).xyz;if(SQ.assign(s),e.hasGeometryAttribute("normal")){let e=Tt(S4,n);S4.assign(e)}null!==this.instanceColorNode&&v1("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){null!==this.buffer&&(this.buffer.clearUpdateRanges(),this.buffer.updateRanges.push(...this.instanceMatrix.updateRanges),35048!==this.instanceMatrix.usage&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version)),this.instanceColor&&null!==this.bufferColor&&(this.bufferColor.clearUpdateRanges(),this.bufferColor.updateRanges.push(...this.instanceColor.updateRanges),35048!==this.instanceColor.usage&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version))}}let wU=v_(wO).setParameterLength(2,3),wk=v_(class extends wO{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:r,instanceColor:i}=e;super(t,r,i),this.instancedMesh=e}}).setParameterLength(1),wz=v_(class extends yz{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){null===this.batchingIdNode&&(null===e.getDrawIndex()?this.batchingIdNode=wI:this.batchingIdNode=wF);let t=vM(([e])=>{let t=vL(b3(b9(this.batchMesh._indirectTexture),0).x),r=vL(e).mod(t),i=vL(e).div(t);return b9(this.batchMesh._indirectTexture,vO(r,i)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(vL(this.batchingIdNode)),r=this.batchMesh._matricesTexture,i=vL(b3(b9(r),0).x),n=vI(t).mul(4).toInt().toVar(),a=n.mod(i),s=n.div(i),o=vY(b9(r,vO(a,s)),b9(r,vO(a.add(1),s)),b9(r,vO(a.add(2),s)),b9(r,vO(a.add(3),s))),l=this.batchMesh._colorsTexture;if(null!==l){let e=vM(([e])=>{let t=vL(b3(b9(l),0).x);return b9(l,vO(e.mod(t),e.div(t))).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(t);v1("vec3","vBatchColor").assign(e)}let u=v$(o);SQ.assign(o.mul(SQ));let c=S4.div(vz(u[0].dot(u[0]),u[1].dot(u[1]),u[2].dot(u[2]))),h=u.mul(c).xyz;S4.assign(h),e.hasGeometryAttribute("tangent")&&TU.mulAssign(u)}}).setParameterLength(1),wV=v_(class extends yV{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){let r=this.storageBufferNode.structTypeNode;return r?r.getMemberType(e,t):"void"}setup(e){return!1===e.isAvailable("storageBuffer")&&!0===this.node.isPBO&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let r,i=e.context.assign;if(r=!1===e.isAvailable("storageBuffer")?!0===this.node.isPBO&&!0!==i&&(this.node.value.isInstancedBufferAttribute||"compute"!==e.shaderStage)?e.generatePBO(this):this.node.build(e):super.generate(e),!0!==i){let i=this.getNodeType(e);r=e.format(r,i,t)}return r}}).setParameterLength(2);class wq extends Se{static get type(){return"StorageBufferNode"}constructor(e,t=null,r=0){let i,n=null;if(t&&t.isStruct)i="struct",n=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(r=e.count);else if(null===t&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)){var a;a=e.itemSize,i=yb.get(a),r=e.count}else i=t;super(e,i,r),this.isStorageBufferNode=!0,this.structTypeNode=n,this.access=yL.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,!0!==e.isStorageBufferAttribute&&!0!==e.isStorageInstancedBufferAttribute&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(0===this.bufferCount){let t=e.globalCache.getData(this.value);return void 0===t&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return wV(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(yL.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return null===this._attribute&&(this._attribute=bN(this.value),this._varying=bp(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(null!==this.structTypeNode)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);let{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return null!==this.structTypeNode?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(null!==this.structTypeNode&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);let{attribute:t,varying:r}=this.getAttributeData(),i=r.build(e);return e.registerTransform(i,t),i}}let wG=(e,t=null,r=0)=>vg(new wq(e,t,r)),wH=new WeakMap;class wj extends yz{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=yI.OBJECT,this.skinIndexNode=b1("skinIndex","uvec4"),this.skinWeightNode=b1("skinWeight","vec4"),this.bindMatrixNode=Tx("bindMatrix","mat4"),this.bindMatrixInverseNode=Tx("bindMatrixInverse","mat4"),this.boneMatricesNode=T_("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=SQ,this.toPositionNode=SQ,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){let{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:n,bindMatrixInverseNode:a}=this,s=e.element(r.x),o=e.element(r.y),l=e.element(r.z),u=e.element(r.w),c=n.mul(t),h=xB(s.mul(i.x).mul(c),o.mul(i.y).mul(c),l.mul(i.z).mul(c),u.mul(i.w).mul(c));return a.mul(h).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=S4){let{skinIndexNode:r,skinWeightNode:i,bindMatrixNode:n,bindMatrixInverseNode:a}=this,s=e.element(r.x),o=e.element(r.y),l=e.element(r.z),u=e.element(r.w),c=xB(i.x.mul(s),i.y.mul(o),i.z.mul(l),i.w.mul(u));return(c=a.mul(c).mul(n)).transformDirection(t).xyz}getPreviousSkinnedPosition(e){let t=e.object;return null===this.previousBoneMatricesNode&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=T_("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,S$)}needsPreviousBoneMatrices(e){let t=e.renderer.getMRT();return t&&t.has("velocity")||!0===yC(e.object).useVelocity}setup(e){this.needsPreviousBoneMatrices(e)&&S$.assign(this.getPreviousSkinnedPosition(e));let t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){let t=this.getSkinnedNormal();S4.assign(t),e.hasGeometryAttribute("tangent")&&TU.assign(t)}return t}generate(e,t){if("void"!==t)return super.generate(e,t)}update(e){let t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;wH.get(t)!==e.frameId&&(wH.set(t,e.frameId),null!==this.previousBoneMatricesNode&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}let wW=e=>vg(new wj(e));class wX extends yz{static get type(){return"LoopNode"}constructor(e=[]){super("void"),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){let t=e.getNodeProperties(this);if(void 0!==t.stackNode)return t;let r={};for(let e=0,t=this.params.length-1;e<t;e++){let t=this.params[e],i=!0!==t.isNode&&t.name||this.getVarName(e),n=!0!==t.isNode&&t.type||"int";r[i]=bj(i,n)}let i=e.addStack(),n=this.params[this.params.length-1](r);t.returnsNode=n.context({nodeLoop:n}),t.stackNode=i;let a=this.params[0];if(!0!==a.isNode&&"function"==typeof a.update){let e=vM(this.params[0].update)(r);t.updateNode=e.context({nodeLoop:e})}return e.removeStack(),t}setup(e){this.getProperties(e),e.fnCall&&(e.getDataFromNode(e.fnCall.shaderNode).hasLoop=!0)}generate(e){let t=this.getProperties(e),r=this.params,i=t.stackNode;for(let i=0,n=r.length-1;i<n;i++){let n,a=r[i],s=!1,o=null,l=null,u=null,c=null,h=null,d=null;if(a.isNode?"bool"===a.getNodeType(e)?(s=!0,c="bool",l=a.build(e,c)):(c="int",u=this.getVarName(i),o="0",l=a.build(e,c),h="<"):(c=a.type||"int",u=a.name||this.getVarName(i),o=a.start,l=a.end,h=a.condition,d=a.update,"number"==typeof o?o=e.generateConst(c,o):o&&o.isNode&&(o=o.build(e,c)),"number"==typeof l?l=e.generateConst(c,l):l&&l.isNode&&(l=l.build(e,c)),void 0!==o&&void 0===l?(o+=" - 1",l="0",h=">="):void 0!==l&&void 0===o&&(o="0",h="<"),void 0===h&&(h=Number(o)>Number(l)?">=":"<")),s)n=`while ( ${l} )`;else{let r,i=o,a=l,s=()=>h.includes("<")?"+=":"-=";if(null!=d)switch(typeof d){case"function":r=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":r=u+" "+s()+" "+e.generateConst(c,d);break;case"string":r=u+" "+d;break;default:d.isNode?r=u+" "+s()+" "+d.build(e):(eL("TSL: 'Loop( { update: ... } )' is not a function, string or number."),r="break /* invalid update */")}else r=u+" "+(d="int"===c||"uint"===c?h.includes("<")?"++":"--":s()+" 1.");let A=e.getVar(c,u)+" = "+i,p=u+" "+h+" "+a;n=`for ( ${A}; ${p}; ${r} )`}e.addFlowCode((0===i?"\n":"")+e.tab+n+" {\n\n").addFlowTab()}let n=i.build(e,"void");t.returnsNode.build(e,"void"),e.removeFlowTab().addFlowCode("\n"+e.tab+n);for(let t=0,r=this.params.length-1;t<r;t++)e.addFlowCode((0===t?"":e.tab)+"}\n\n").removeFlowTab();e.addFlowTab()}}let wQ=(...e)=>new wX(vx(e,"int")).toStack(),w$=()=>bj("break").toStack(),wY=new WeakMap,wK=new tr,wZ=vM(({bufferMap:e,influence:t,stride:r,width:i,depth:n,offset:a})=>{let s=vL(wP).mul(r).add(a),o=s.div(i);return b9(e,vO(s.sub(o.mul(i)),o)).depth(n).xyz.mul(t)}),wJ=v_(class extends yz{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=xE(1),this.updateType=yI.OBJECT}setup(e){let{geometry:t}=e,r=void 0!==t.morphAttributes.position,i=t.hasAttribute("normal")&&void 0!==t.morphAttributes.normal,n=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,a=void 0!==n?n.length:0,{texture:s,stride:o,size:l}=function(e){let t=void 0!==e.morphAttributes.position,r=void 0!==e.morphAttributes.normal,i=void 0!==e.morphAttributes.color,n=e.morphAttributes.position||e.morphAttributes.normal||e.morphAttributes.color,a=void 0!==n?n.length:0,s=wY.get(e);if(void 0===s||s.count!==a){void 0!==s&&s.texture.dispose();let n=e.morphAttributes.position||[],o=e.morphAttributes.normal||[],l=e.morphAttributes.color||[],u=0;!0===t&&(u=1),!0===r&&(u=2),!0===i&&(u=3);let c=e.attributes.position.count*u,h=1;c>4096&&(h=Math.ceil(c/4096),c=4096);let d=new Float32Array(c*h*4*a),A=new ta(d,c,h,a);A.type=1015,A.needsUpdate=!0;let p=4*u;for(let e=0;e<a;e++){let a=n[e],s=o[e],u=l[e],A=c*h*4*e;for(let e=0;e<a.count;e++){let n=e*p;!0===t&&(wK.fromBufferAttribute(a,e),d[A+n+0]=wK.x,d[A+n+1]=wK.y,d[A+n+2]=wK.z,d[A+n+3]=0),!0===r&&(wK.fromBufferAttribute(s,e),d[A+n+4]=wK.x,d[A+n+5]=wK.y,d[A+n+6]=wK.z,d[A+n+7]=0),!0===i&&(wK.fromBufferAttribute(u,e),d[A+n+8]=wK.x,d[A+n+9]=wK.y,d[A+n+10]=wK.z,d[A+n+11]=4===u.itemSize?wK.w:1)}}s={count:a,texture:A,stride:u,size:new eX(c,h)},wY.set(e,s),e.addEventListener("dispose",function t(){A.dispose(),wY.delete(e),e.removeEventListener("dispose",t)})}return s}(t);!0===r&&SQ.mulAssign(this.morphBaseInfluence),!0===i&&S4.mulAssign(this.morphBaseInfluence);let u=vL(l.width);wQ(a,({i:e})=>{let t=vI(0).toVar();this.mesh.count>1&&null!==this.mesh.morphTexture&&void 0!==this.mesh.morphTexture?t.assign(b9(this.mesh.morphTexture,vO(vL(e).add(1),vL(wI))).r):t.assign(Tx("morphTargetInfluences","float").element(e).toVar()),vR(t.notEqual(0),()=>{!0===r&&SQ.addAssign(wZ({bufferMap:s,influence:t,stride:o,width:u,depth:e,offset:vL(0)})),!0===i&&S4.addAssign(wZ({bufferMap:s,influence:t,stride:o,width:u,depth:e,offset:vL(1)}))})})}update(){let e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((e,t)=>e+t,0)}}).setParameterLength(1);class w0 extends yz{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class w1 extends w0{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}let w2=v_(class extends br{static get type(){return"LightingContextNode"}constructor(e,t=null,r=null,i=null){super(e),this.lightingModel=t,this.backdropNode=r,this.backdropAlphaNode=i,this._value=null}getContext(){let{backdropNode:e,backdropAlphaNode:t}=this,r=vz().toVar("directDiffuse"),i=vz().toVar("directSpecular"),n=vz().toVar("indirectDiffuse"),a=vz().toVar("indirectSpecular");return{radiance:vz().toVar("radiance"),irradiance:vz().toVar("irradiance"),iblIrradiance:vz().toVar("iblIrradiance"),ambientOcclusion:vI(1).toVar("ambientOcclusion"),reflectedLight:{directDiffuse:r,directSpecular:i,indirectDiffuse:n,indirectSpecular:a},backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}});class w3 extends w0{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let w4=new eX;class w5 extends b8{static get type(){return"ViewportTextureNode"}constructor(e=Sl,t=null,r=null){let i=null;null===r?((i=new nK).minFilter=1008,r=i):i=r,super(r,e,t),this.generateMipmaps=!1,this.defaultFramebuffer=i,this.isOutputTextureNode=!0,this.updateBeforeType=yI.FRAME,this._cacheTextures=new WeakMap}getTextureForReference(e=null){let t,r;if(this.referenceNode?(t=this.referenceNode.defaultFramebuffer,r=this.referenceNode._cacheTextures):(t=this.defaultFramebuffer,r=this._cacheTextures),null===e)return t;if(!1===r.has(e)){let i=t.clone();r.set(e,i)}return r.get(e)}updateReference(e){let t=e.renderer.getRenderTarget();return this.value=this.getTextureForReference(t),this.value}updateBefore(e){let t=e.renderer,r=t.getRenderTarget();null===r?t.getDrawingBufferSize(w4):w4.set(r.width,r.height);let i=this.getTextureForReference(r);(i.image.width!==w4.width||i.image.height!==w4.height)&&(i.image.width=w4.width,i.image.height=w4.height,i.needsUpdate=!0);let n=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(i),i.generateMipmaps=n}clone(){let e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}let w8=v_(w5).setParameterLength(0,3),w6=v_(w5,null,null,{generateMipmaps:!0}).setParameterLength(0,3),w7=null,w9=v_(class extends w5{static get type(){return"ViewportDepthTextureNode"}constructor(e=Sl,t=null){null===w7&&(w7=new n2),super(e,t,w7)}getTextureForReference(){return w7}}).setParameterLength(0,2);class Me extends yz{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){let{scope:t}=this;return t===Me.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){let{scope:t}=this,r=this.valueNode,i=null;return t===Me.DEPTH_BASE?null!==r&&(i=Ma().assign(r)):t===Me.DEPTH?i=e.isPerspectiveCamera?Mr(SZ.z,Sg,Sy):Mt(SZ.z,Sg,Sy):t===Me.LINEAR_DEPTH&&(i=null!==r?e.isPerspectiveCamera?Mt(Mi(r,Sg,Sy),Sg,Sy):r:Mt(SZ.z,Sg,Sy)),i}}Me.DEPTH_BASE="depthBase",Me.DEPTH="depth",Me.LINEAR_DEPTH="linearDepth";let Mt=(e,t,r)=>e.add(t).div(t.sub(r)),Mr=(e,t,r)=>t.add(e).mul(r).div(r.sub(t).mul(e)),Mi=(e,t,r)=>t.mul(r).div(r.sub(t).mul(e).sub(r)),Mn=(e,t,r)=>{t=t.max(1e-6).toVar();let i=_h(e.negate().div(t)),n=_h(r.div(t));return i.div(n)},Ma=v_(Me,Me.DEPTH_BASE),Ms=vb(Me,Me.DEPTH),Mo=v_(Me,Me.LINEAR_DEPTH).setParameterLength(0,1),Ml=Mo(w9());Ms.assign=e=>Ma(e);class Mu extends yz{static get type(){return"ClippingNode"}constructor(e=Mu.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);let{intersectionPlanes:t,unionPlanes:r}=e.clippingContext;return(this.hardwareClipping=e.material.hardwareClipping,this.scope===Mu.ALPHA_TO_COVERAGE)?this.setupAlphaToCoverage(t,r):this.scope===Mu.HARDWARE?this.setupHardwareClipping(r,e):this.setupDefault(t,r)}setupAlphaToCoverage(e,t){return vM(()=>{let r=vI().toVar("distanceToPlane"),i=vI().toVar("distanceToGradient"),n=vI(1).toVar("clipOpacity"),a=t.length;if(!1===this.hardwareClipping&&a>0){let e=Sn(t).setGroup(xT);wQ(a,({i:t})=>{let a=e.element(t);r.assign(SZ.dot(a.xyz).negate().add(a.w)),i.assign(r.fwidth().div(2)),n.mulAssign(_4(i.negate(),i,r))})}let s=e.length;if(s>0){let t=Sn(e).setGroup(xT),a=vI(1).toVar("intersectionClipOpacity");wQ(s,({i:e})=>{let n=t.element(e);r.assign(SZ.dot(n.xyz).negate().add(n.w)),i.assign(r.fwidth().div(2)),a.mulAssign(_4(i.negate(),i,r).oneMinus())}),n.mulAssign(a.oneMinus())}v2.a.mulAssign(n),v2.a.equal(0).discard()})()}setupDefault(e,t){return vM(()=>{let r=t.length;if(!1===this.hardwareClipping&&r>0){let e=Sn(t).setGroup(xT);wQ(r,({i:t})=>{let r=e.element(t);SZ.dot(r.xyz).greaterThan(r.w).discard()})}let i=e.length;if(i>0){let t=Sn(e).setGroup(xT),r=vB(!0).toVar("clipped");wQ(i,({i:e})=>{let i=t.element(e);r.assign(SZ.dot(i.xyz).greaterThan(i.w).and(r))}),r.discard()}})()}setupHardwareClipping(e,t){let r=e.length;return t.enableHardwareClipping(r),vM(()=>{let i=Sn(e).setGroup(xT),n=Sa(t.getClipDistance());wQ(r,({i:e})=>{let t=i.element(e),r=SZ.dot(t.xyz).sub(t.w).negate();n.element(e).assign(r)})})()}}Mu.ALPHA_TO_COVERAGE="alphaToCoverage",Mu.DEFAULT="default",Mu.HARDWARE="hardware";let Mc=vM(([e])=>_g(xO(1e4,_y(xO(17,e.x).add(xO(.1,e.y)))).mul(xB(.1,_T(_y(xO(13,e.y).add(e.x))))))),Mh=vM(([e])=>Mc(vF(Mc(e.xy),e.z))),Md=vM(([e])=>{let t=_z(_M(_R(e.xyz)),_M(_N(e.xyz))),r=vI(1).div(vI(.05).mul(t)).toVar("pixScale"),i=vF(_u(_p(_h(r))),_u(_f(_h(r)))),n=vF(Mh(_p(i.x.mul(e.xyz))),Mh(_p(i.y.mul(e.xyz)))),a=_g(_h(r)),s=xB(xO(a.oneMinus(),n.x),xO(a,n.y)),o=_k(a,a.oneMinus()),l=vz(s.mul(s).div(xO(2,o).mul(xF(1,o))),s.sub(xO(.5,o)).div(xF(1,o)),xF(1,xF(1,s).mul(xF(1,s)).div(xO(2,o).mul(xF(1,o)))));return _1(s.lessThan(o.oneMinus()).select(s.lessThan(o).select(l.x,l.y),l.z),1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class MA extends b0{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){let e=this.index;return"color"+(e>0?e:"")}generate(e){let t=this.getAttributeName(e);return!0===e.hasGeometryAttribute(t)?super.generate(e):e.generateConst(this.nodeType,new tr(1,1,1,1))}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}let Mp=(e=0)=>vg(new MA(e)),Mf=vM(([e,t])=>_k(1,e.oneMinus().div(t)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Mm=vM(([e,t])=>_k(e.div(t.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Mg=vM(([e,t])=>e.oneMinus().mul(t.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),My=vM(([e,t])=>_0(e.mul(2).mul(t),e.oneMinus().mul(2).mul(t.oneMinus()).oneMinus(),_V(.5,e))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),Mv=vM(([e,t])=>{let r=t.a.add(e.a.mul(t.a.oneMinus()));return vH(t.rgb.mul(t.a).add(e.rgb.mul(e.a).mul(t.a.oneMinus())).div(r),r)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),Mx=vM(([e])=>vH(e.rgb.mul(e.a),e.a),{color:"vec4",return:"vec4"}),M_=vM(([e])=>(vR(e.a.equal(0),()=>vH(0)),vH(e.rgb.div(e.a),e.a)),{color:"vec4",return:"vec4"});class Mb extends r_{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{eI('NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}_getNodeChildren(){let e=[];for(let t of Object.getOwnPropertyNames(this)){if(!0===t.startsWith("_"))continue;let r=this[t];r&&!0===r.isNode&&e.push({property:t,childNode:r})}return e}customProgramCacheKey(){let e=[];for(let{property:t,childNode:r}of this._getNodeChildren())e.push(y_(t.slice(0,-4)),r.getCacheKey());return this.type+yx(e)}build(e){this.setup(e)}setupObserver(e){return new yv(e)}setup(e){let t;e.context.setupNormal=()=>bA(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);let r=e.renderer,i=r.getRenderTarget();e.addStack();let n=bA(this.setupVertex(e),"VERTEX"),a=this.vertexNode||n;e.stack.outputNode=a,this.setupHardwareClipping(e),null!==this.geometryNode&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let s=this.setupClipping(e);if((!0===this.depthWrite||!0===this.depthTest)&&(null!==i?!0===i.depthBuffer&&this.setupDepth(e):!0===r.depth&&this.setupDepth(e)),null===this.fragmentNode){this.setupDiffuseColor(e),this.setupVariants(e);let n=this.setupLighting(e);null!==s&&e.stack.addToStack(s);let a=vH(n,v2.a).max(0);t=this.setupOutput(e,a),xc.assign(t);let o=null!==this.outputNode;if(o&&(t=this.outputNode),null!==i){let e=r.getMRT(),i=this.mrtNode;null!==e?(o&&xc.assign(t),t=e,null!==i&&(t=e.merge(i))):null!==i&&(t=i)}}else{let r=this.fragmentNode;!0!==r.isOutputStructNode&&(r=vH(r)),t=this.setupOutput(e,r)}e.stack.outputNode=t,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(null===e.clippingContext)return null;let{unionPlanes:t,intersectionPlanes:r}=e.clippingContext,i=null;if(t.length>0||r.length>0){let t=e.renderer.currentSamples;this.alphaToCoverage&&t>1?i=vg(new Mu(Mu.ALPHA_TO_COVERAGE)):e.stack.addToStack(vg(new Mu))}return i}setupHardwareClipping(e){if(this.hardwareClipping=!1,null===e.clippingContext)return;let t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.addToStack(vg(new Mu(Mu.HARDWARE))),this.hardwareClipping=!0)}setupDepth(e){let{renderer:t,camera:r}=e,i=this.depthNode;if(null===i){let e=t.getMRT();e&&e.has("depth")?i=e.get("depth"):!0===t.logarithmicDepthBuffer&&(i=r.isPerspectiveCamera?Mn(SZ.z,Sg,Sy):Mt(SZ.z,Sg,Sy))}null!==i&&Ms.assign(i).toStack()}setupPositionView(){return SG.mul(SQ).xyz}setupModelViewProjection(){return Sv.mul(SZ)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),wR}setupPosition(e){let{object:t,geometry:r}=e;if((r.morphAttributes.position||r.morphAttributes.normal||r.morphAttributes.color)&&wJ(t).toStack(),!0===t.isSkinnedMesh&&wW(t).toStack(),this.displacementMap){let e=TS("displacementMap","texture"),t=TS("displacementScale","float"),r=TS("displacementBias","float");SQ.addAssign(S4.normalize().mul(e.x.mul(t).add(r)))}return t.isBatchedMesh&&wz(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&!0===t.instanceMatrix.isInstancedBufferAttribute&&wk(t).toStack(),null!==this.positionNode&&SQ.assign(bA(this.positionNode,"POSITION","vec3")),SQ}setupDiffuseColor(e){let{object:t,geometry:r}=e;null!==this.maskNode&&vB(this.maskNode).not().discard();let i=this.colorNode?vH(this.colorNode):T2;!0===this.vertexColors&&r.hasAttribute("color")&&(i=i.mul(Mp())),t.instanceColor&&(i=v1("vec3","vInstanceColor").mul(i)),t.isBatchedMesh&&t._colorsTexture&&(i=v1("vec3","vBatchColor").mul(i)),v2.assign(i);let n=this.opacityNode?vI(this.opacityNode):T5;v2.a.assign(v2.a.mul(n));let a=null;(null!==this.alphaTestNode||this.alphaTest>0)&&(a=null!==this.alphaTestNode?vI(this.alphaTestNode):T1,!0===this.alphaToCoverage?(v2.a=_4(a,a.add(_D(v2.a)),v2.a),v2.a.lessThanEqual(0).discard()):v2.a.lessThanEqual(a).discard()),!0===this.alphaHash&&v2.a.lessThan(Md(SQ)).discard(),e.isOpaque()&&v2.a.assign(1)}setupVariants(){}setupOutgoingLight(){return!0===this.lights?vz(0):v2.rgb}setupNormal(){return this.normalNode?vz(this.normalNode):wi}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?TS("envMap","cubeTexture"):TS("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new w3(wM)),t}setupLights(e){let t=[],r=this.setupEnvironment(e);r&&r.isLightingNode&&t.push(r);let i=this.setupLightMap(e);if(i&&i.isLightingNode&&t.push(i),null!==this.aoNode||e.material.aoMap){let e=null!==this.aoNode?this.aoNode:wE;t.push(new w1(e))}let n=this.lightsNode||e.lightsNode;return t.length>0&&(n=e.renderer.lighting.createNode([...n.getLights(),...t])),n}setupLightingModel(){}setupLighting(e){let{material:t}=e,{backdropNode:r,backdropAlphaNode:i,emissiveNode:n}=this,a=!0===this.lights||null!==this.lightsNode?this.setupLights(e):null,s=this.setupOutgoingLight(e);return a&&a.getScope().hasLights?s=w2(a,this.setupLightingModel(e)||null,r,i):null!==r&&(s=vz(null!==i?_0(s,r,i):r)),(n&&!0===n.isNode||t.emissive&&!0===t.emissive.isColor)&&(v3.assign(vz(n||T4)),s=s.add(v3)),s}setupFog(e,t){let r=e.fogNode;return r&&(xc.assign(t),t=vH(r.toVar())),t}setupPremultipliedAlpha(e,t){return Mx(t)}setupOutput(e,t){return!0===this.fog&&(t=this.setupFog(e,t)),!0===this.premultipliedAlpha&&(t=this.setupPremultipliedAlpha(e,t)),t}setDefaultValues(e){for(let t in e){let r=e[t];void 0===this[t]&&(this[t]=r,r&&r.clone&&(this[t]=r.clone()))}let t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(let e in t)void 0===Object.getOwnPropertyDescriptor(this.constructor.prototype,e)&&void 0!==t[e].get&&Object.defineProperty(this.constructor.prototype,e,t[e])}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{},nodes:{}});let r=r_.prototype.toJSON.call(this,e);for(let{property:t,childNode:i}of(r.inputNodes={},this._getNodeChildren()))r.inputNodes[t]=i.toJSON(e).uuid;function i(e){let t=[];for(let r in e){let i=e[r];delete i.metadata,t.push(i)}return t}if(t){let t=i(e.textures),n=i(e.images),a=i(e.nodes);t.length>0&&(r.textures=t),n.length>0&&(r.images=n),a.length>0&&(r.nodes=a)}return r}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.aoNode=e.aoNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}let MS=new nC;class MT extends Mb{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(MS),this.setValues(e)}}let Mw=new sh;class MM extends Mb{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(Mw),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){let e=this.offsetNode?vI(this.offsetNode):wS,t=this.dashScaleNode?vI(this.dashScaleNode):wv,r=this.dashSizeNode?vI(this.dashSizeNode):wx,i=this.gapSizeNode?vI(this.gapSizeNode):w_;xh.assign(r),xd.assign(i);let n=bp(b1("lineDistance").mul(t));(e?n.add(e):n).mod(xh.add(xd)).greaterThan(xh).discard()}}let ME=null,MC=v_(class extends w5{static get type(){return"ViewportSharedTextureNode"}constructor(e=Sl,t=null){null===ME&&(ME=new nK),super(e,t,ME)}getTextureForReference(){return ME}updateReference(){return this}}).setParameterLength(0,2),MR=e=>vg(e).mul(.5).add(.5),MN=new ss;class MP extends Mb{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(MN),this.setValues(e)}setupDiffuseColor(){let e=this.opacityNode?vI(this.opacityNode):T5;v2.assign(b_(vH(MR(S7),e),ep))}}let MI=vM(([e=SK])=>vF(e.z.atan(e.x).mul(1/(2*Math.PI)).add(.5),e.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5)));class ML extends ih{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){let r=t.minFilter,i=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n=new r6(5,5,5),a=MI(SK),s=new Mb;s.colorNode=b7(t,a,0),s.side=1,s.blending=0;let o=new r5(n,s),l=new iy;l.add(o),1008===t.minFilter&&(t.minFilter=1006);let u=new iu(1,10,this),c=e.getMRT();return e.setMRT(null),u.update(e,l),e.setMRT(c),t.minFilter=r,t.currentGenerateMipmaps=i,o.geometry.dispose(),o.material.dispose(),this}}let MD=new WeakMap;function MB(e){let t=e.target;t.removeEventListener("dispose",MB);let r=MD.get(t);void 0!==r&&(MD.delete(t),r.dispose())}function MF(e,t){303===t?e.mapping=301:304===t&&(e.mapping=302)}let MO=v_(class extends yG{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=Tg(null);const t=new ic;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=yI.RENDER}updateBefore(e){let{renderer:t,material:r}=e,i=this.envNode;if(i.isTextureNode||i.isMaterialReferenceNode){let e=i.isTextureNode?i.value:r[i.property];if(e&&e.isTexture){let r=e.mapping;if(303===r||304===r){if(MD.has(e)){let t=MD.get(e);MF(t,e.mapping),this._cubeTexture=t}else{var n;let r=e.image;if(null!=(n=r)&&n.height>0){let i=new ML(r.height);i.fromEquirectangularTexture(t,e),MF(i.texture,e.mapping),this._cubeTexture=i.texture,MD.set(e,i.texture),e.addEventListener("dispose",MB)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}).setParameterLength(1);class MU extends w0{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=MO(this.envNode)}}class Mk extends w0{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){let t=vI(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class Mz{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class MV extends Mz{constructor(){super()}indirect({context:e}){let t=e.ambientOcclusion,r=e.reflectedLight,i=e.irradianceLightMap;r.indirectDiffuse.assign(vH(0)),i?r.indirectDiffuse.addAssign(i):r.indirectDiffuse.addAssign(vH(1,1,1,0)),r.indirectDiffuse.mulAssign(t),r.indirectDiffuse.mulAssign(v2.rgb)}finish(e){let{material:t,context:r}=e,i=r.outgoingLight,n=e.context.environment;if(n)switch(t.combine){case 0:i.rgb.assign(_0(i.rgb,i.rgb.mul(n.rgb),T9.mul(we)));break;case 1:i.rgb.assign(_0(i.rgb,n.rgb,T9.mul(we)));break;case 2:i.rgb.addAssign(n.rgb.mul(T9.mul(we)));break;default:eI("BasicLightingModel: Unsupported .combine value:",t.combine)}}}let Mq=new rb;class MG extends Mb{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Mq),this.setValues(e)}setupNormal(){return S2(S8)}setupEnvironment(e){let t=super.setupEnvironment(e);return t?new MU(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new Mk(wM)),t}setupOutgoingLight(){return v2.rgb}setupLightingModel(){return new MV}}let MH=vM(({f0:e,f90:t,dotVH:r})=>{let i=r.mul(-5.55473).sub(6.98316).mul(r).exp2();return e.mul(i.oneMinus()).add(t.mul(i))}),Mj=vM(e=>e.diffuseColor.mul(1/Math.PI)),MW=vM(({dotNH:e})=>xu.mul(vI(.5)).add(1).mul(vI(1/Math.PI)).mul(e.pow(xu))),MX=vM(({lightDirection:e})=>{let t=e.add(SJ).normalize(),r=S7.dot(t).clamp(),i=MH({f0:xo,f90:1,dotVH:SJ.dot(t).clamp()}),n=vI(.25),a=MW({dotNH:r});return i.mul(n).mul(a)});class MQ extends MV{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:r}){let i=S7.dot(e).clamp().mul(t);r.directDiffuse.addAssign(i.mul(Mj({diffuseColor:v2.rgb}))),!0===this.specular&&r.directSpecular.addAssign(i.mul(MX({lightDirection:e})).mul(T9))}indirect(e){let{ambientOcclusion:t,irradiance:r,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(r.mul(Mj({diffuseColor:v2}))),i.indirectDiffuse.mulAssign(t)}}let M$=new so;class MY extends Mb{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(M$),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t?new MU(t):null}setupLightingModel(){return new MQ(!1)}}let MK=new sn;class MZ extends Mb{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(MK),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t?new MU(t):null}setupLightingModel(){return new MQ}setupVariants(){let e=(this.shininessNode?vI(this.shininessNode):T3).max(1e-4);xu.assign(e);let t=this.specularNode||T8;xo.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}let MJ=vM(e=>{if(!1===e.geometry.hasAttribute("normal"))return vI(0);let t=S8.dFdx().abs().max(S8.dFdy().abs());return t.x.max(t.y).max(t.z)}),M0=vM(e=>{let{roughness:t}=e,r=MJ(),i=t.max(.0525);return(i=i.add(r)).min(1)}),M1=vM(({alpha:e,dotNL:t,dotNV:r})=>{let i=e.pow2(),n=t.mul(i.add(i.oneMinus().mul(r.pow2())).sqrt()),a=r.mul(i.add(i.oneMinus().mul(t.pow2())).sqrt());return xU(.5,n.add(a).max(x7))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),M2=vM(({alphaT:e,alphaB:t,dotTV:r,dotBV:i,dotTL:n,dotBL:a,dotNV:s,dotNL:o})=>{let l=o.mul(vz(e.mul(r),t.mul(i),s).length()),u=s.mul(vz(e.mul(n),t.mul(a),o).length());return xU(.5,l.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),M3=vM(({alpha:e,dotNH:t})=>{let r=e.pow2(),i=t.pow2().mul(r.oneMinus()).oneMinus();return r.div(i.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),M4=vI(1/Math.PI),M5=vM(({alphaT:e,alphaB:t,dotNH:r,dotTH:i,dotBH:n})=>{let a=e.mul(t),s=vz(t.mul(i),e.mul(n),a.mul(r)),o=s.dot(s),l=a.div(o);return M4.mul(a.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),M8=vM(({lightDirection:e,f0:t,f90:r,roughness:i,f:n,normalView:a=S7,USE_IRIDESCENCE:s,USE_ANISOTROPY:o})=>{let l,u,c=i.pow2(),h=e.add(SJ).normalize(),d=a.dot(e).clamp(),A=a.dot(SJ).clamp(),p=a.dot(h).clamp(),f=MH({f0:t,f90:r,dotVH:SJ.dot(h).clamp()});if(vp(s)&&(f=xe.mix(f,n)),vp(o)){let t=xa.dot(e),r=xa.dot(SJ),i=xa.dot(h),n=xs.dot(e),a=xs.dot(SJ),s=xs.dot(h);l=M2({alphaT:xi,alphaB:c,dotTV:r,dotBV:a,dotTL:t,dotBL:n,dotNV:A,dotNL:d}),u=M5({alphaT:xi,alphaB:c,dotNH:p,dotTH:i,dotBH:s})}else l=M1({alpha:c,dotNL:d,dotNV:A}),u=M3({alpha:c,dotNH:p});return f.mul(l).mul(u)}),M6=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]),M7=null,M9=vM(({roughness:e,dotNV:t})=>{null===M7&&((M7=new iK(M6,32,32,1030,1016)).minFilter=1006,M7.magFilter=1006,M7.wrapS=1001,M7.wrapT=1001,M7.generateMipmaps=!1,M7.needsUpdate=!0);let r=vF(e,t);return b7(M7,r).rg}),Ee=vM(({lightDirection:e,f0:t,f90:r,roughness:i,f:n,USE_IRIDESCENCE:a,USE_ANISOTROPY:s})=>{let o=M8({lightDirection:e,f0:t,f90:r,roughness:i,f:n,USE_IRIDESCENCE:a,USE_ANISOTROPY:s}),l=S7.dot(e).clamp(),u=M9({roughness:i,dotNV:S7.dot(SJ).clamp()}),c=M9({roughness:i,dotNV:l}),h=t.mul(u.x).add(r.mul(u.y)),d=t.mul(c.x).add(r.mul(c.y)),A=u.x.add(u.y),p=c.x.add(c.y),f=vI(1).sub(A),m=vI(1).sub(p),g=t.add(t.oneMinus().mul(.047619)),y=h.mul(d).mul(g).div(vI(1).sub(f.mul(m).mul(g).mul(g)).add(x7)),v=f.mul(m),x=y.mul(v);return o.add(x)}),Et=vM(e=>{let{dotNV:t,specularColor:r,specularF90:i,roughness:n}=e,a=M9({dotNV:t,roughness:n});return r.mul(a.x).add(i.mul(a.y))}),Er=vM(({f:e,f90:t,dotVH:r})=>{let i=r.oneMinus().saturate(),n=i.mul(i),a=i.mul(n,n).clamp(0,.9999);return e.sub(vz(t).mul(a)).div(a.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),Ei=vM(({roughness:e,dotNH:t})=>{let r=e.pow2(),i=vI(1).div(r),n=t.pow2().oneMinus().max(.0078125);return vI(2).add(i).mul(n.pow(i.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),En=vM(({dotNV:e,dotNL:t})=>vI(1).div(vI(4).mul(t.add(e).sub(t.mul(e))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),Ea=vM(({lightDirection:e})=>{let t=e.add(SJ).normalize(),r=S7.dot(e).clamp(),i=S7.dot(SJ).clamp(),n=Ei({roughness:v9,dotNH:S7.dot(t).clamp()}),a=En({dotNV:i,dotNL:r});return v7.mul(n).mul(a)}),Es=vM(({N:e,V:t,roughness:r})=>{let i=vF(r,e.dot(t).saturate().oneMinus().sqrt());return i.assign(i.mul(.984375).add(.0078125)),i}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),Eo=vM(({f:e})=>{let t=e.length();return _z(t.mul(t).add(e.z).div(t.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),El=vM(({v1:e,v2:t})=>{let r=e.dot(t),i=r.abs().toVar(),n=i.mul(.0145206).add(.4965155).mul(i).add(.8543985).toVar(),a=i.add(4.1616724).mul(i).add(3.417594).toVar(),s=n.div(a),o=r.greaterThan(0).select(s,_z(r.mul(r).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(s));return e.cross(t).mul(o)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),Eu=vM(({N:e,V:t,P:r,mInv:i,p0:n,p1:a,p2:s,p3:o})=>{let l=a.sub(n).toVar(),u=o.sub(n).toVar(),c=l.cross(u),h=vz().toVar();return vR(c.dot(r.sub(n)).greaterThanEqual(0),()=>{let l=t.sub(e.mul(t.dot(e))).normalize(),u=e.cross(l).negate(),c=i.mul(v$(l,u,e).transpose()).toVar(),d=c.mul(n.sub(r)).normalize().toVar(),A=c.mul(a.sub(r)).normalize().toVar(),p=c.mul(s.sub(r)).normalize().toVar(),f=c.mul(o.sub(r)).normalize().toVar(),m=vz(0).toVar();m.addAssign(El({v1:d,v2:A})),m.addAssign(El({v1:A,v2:p})),m.addAssign(El({v1:p,v2:f})),m.addAssign(El({v1:f,v2:d})),h.assign(vz(Eo({f:m})))}),h}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),Ec=1/6,Eh=e=>xO(Ec,xO(e,xO(e,e.negate().add(3)).sub(3)).add(1)),Ed=e=>xO(Ec,xO(e,xO(e,xO(3,e).sub(6))).add(4)),EA=e=>xO(Ec,xO(e,xO(e,xO(-3,e).add(3)).add(3)).add(1)),Ep=e=>xO(Ec,_X(e,3)),Ef=e=>Eh(e).add(Ed(e)),Em=e=>EA(e).add(Ep(e)),Eg=e=>xB(-1,Ed(e).div(Eh(e).add(Ed(e)))),Ey=e=>xB(1,Ep(e).div(EA(e).add(Ep(e)))),Ev=(e,t,r)=>{let i=xO(e.uvNode,t.zw).add(.5),n=_p(i),a=_g(i),s=Ef(a.x),o=Em(a.x),l=Eg(a.x),u=Ey(a.x),c=Eg(a.y),h=Ey(a.y),d=vF(n.x.add(l),n.y.add(c)).sub(.5).mul(t.xy),A=vF(n.x.add(u),n.y.add(c)).sub(.5).mul(t.xy),p=vF(n.x.add(l),n.y.add(h)).sub(.5).mul(t.xy),f=vF(n.x.add(u),n.y.add(h)).sub(.5).mul(t.xy),m=Ef(a.y).mul(xB(s.mul(e.sample(d).level(r)),o.mul(e.sample(A).level(r)))),g=Em(a.y).mul(xB(s.mul(e.sample(p).level(r)),o.mul(e.sample(f).level(r))));return m.add(g)},Ex=vM(([e,t])=>{let r=vF(e.size(vL(t))),i=vF(e.size(vL(t.add(1)))),n=xU(1,r),a=xU(1,i),s=Ev(e,vH(n,r),_p(t)),o=Ev(e,vH(a,i),_f(t));return _g(t).mix(s,o)}),E_=vM(([e,t])=>{let r=t.mul(b4(e));return Ex(e,r)}),Eb=vM(([e,t,r,i,n])=>{let a=vz(_3(t.negate(),_m(e),xU(1,i))),s=vz(_M(n[0].xyz),_M(n[1].xyz),_M(n[2].xyz));return _m(a).mul(r.mul(s))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),ES=vM(([e,t])=>e.mul(_1(t.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),ET=w6(),Ew=w6(),EM=vM(([e,t,r],{material:i})=>Ex((1===i.side?ET:Ew).sample(e),_h(Su.x).mul(ES(t,r)))),EE=vM(([e,t,r])=>(vR(r.notEqual(0),()=>_l(_c(t).negate().div(r).negate().mul(e))),vz(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),EC=vM(([e,t,r,i,n,a,s,o,l,u,c,h,d,A,p])=>{let f,m;if(p){f=vH().toVar(),m=vz().toVar();let n=c.sub(1).mul(p.mul(.025)),a=vz(c.sub(n),c,c.add(n));wQ({start:0,end:3},({i:n})=>{let c=a.element(n),p=Eb(e,t,h,c,o),g=s.add(p),y=u.mul(l.mul(vH(g,1))),v=vF(y.xy.div(y.w)).toVar();v.addAssign(1),v.divAssign(2),v.assign(vF(v.x,v.y.oneMinus()));let x=EM(v,r,c);f.element(n).assign(x.element(n)),f.a.addAssign(x.a),m.element(n).assign(i.element(n).mul(EE(_M(p),d,A).element(n)))}),f.a.divAssign(3)}else{let n=Eb(e,t,h,c,o),a=s.add(n),p=u.mul(l.mul(vH(a,1))),g=vF(p.xy.div(p.w)).toVar();g.addAssign(1),g.divAssign(2),g.assign(vF(g.x,g.y.oneMinus())),f=EM(g,r,c),m=i.mul(EE(_M(n),d,A))}let g=m.rgb.mul(f.rgb),y=vz(Et({dotNV:e.dot(t).clamp(),specularColor:n,specularF90:a,roughness:r})),v=m.r.add(m.g,m.b).div(3);return vH(y.oneMinus().mul(g),f.a.oneMinus().mul(v).oneMinus())}),ER=v$(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),EN=(e,t)=>e.sub(t).div(e.add(t)).pow2(),EP=vM(({outsideIOR:e,eta2:t,cosTheta1:r,thinFilmThickness:i,baseF0:n})=>{let a,s=_0(e,t,_4(0,.03,i)),o=e.div(s).pow2().mul(r.pow2().oneMinus()).oneMinus();vR(o.lessThan(0),()=>vz(1));let l=o.sqrt(),u=MH({f0:EN(s,e),f90:1,dotVH:r}),c=u.oneMinus(),h=s.lessThan(e).select(Math.PI,0),d=vI(Math.PI).sub(h),A=(a=n.clamp(0,.9999).sqrt(),vz(1).add(a).div(vz(1).sub(a))),p=MH({f0:EN(A,s.toVec3()),f90:1,dotVH:l}),f=vz(A.x.lessThan(s).select(Math.PI,0),A.y.lessThan(s).select(Math.PI,0),A.z.lessThan(s).select(Math.PI,0)),m=s.mul(i,l,2),g=vz(d).add(f),y=u.mul(p).clamp(1e-5,.9999),v=y.sqrt(),x=c.pow2().mul(p).div(vz(1).sub(y)),_=u.add(x).toVar(),b=x.sub(c).toVar();return wQ({start:1,end:2,condition:"<=",name:"m"},({m:e})=>{var t,r;let i,n,a,s,o,l;b.mulAssign(v);let u=(t=vI(e).mul(m),r=vI(e).mul(g),i=t.mul(2*Math.PI*1e-9),n=vz(54856e-17,44201e-17,52481e-17),a=vz(1681e3,1795300,2208400),s=vz(43278e5,93046e5,66121e5),o=vI(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(i.mul(2239900).add(r.x).cos()).mul(i.pow2().mul(-45282e5).exp()),l=vz((l=n.mul(s.mul(2*Math.PI).sqrt()).mul(a.mul(i).add(r).cos()).mul(i.pow2().negate().mul(s).exp())).x.add(o),l.y,l.z).div(10685e-11),ER.mul(l)).mul(2);_.addAssign(b.mul(u))}),_.max(vz(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),EI=vM(({normal:e,viewDir:t,roughness:r})=>{let i=e.dot(t).saturate(),n=r.pow2(),a=bt(r.lessThan(.25),vI(-339.2).mul(n).add(vI(161.4).mul(r)).sub(25.9),vI(-8.48).mul(n).add(vI(14.3).mul(r)).sub(9.95)),s=bt(r.lessThan(.25),vI(44).mul(n).sub(vI(23.7).mul(r)).add(3.26),vI(1.97).mul(n).sub(vI(3.27).mul(r)).add(.72));return bt(r.lessThan(.25),0,vI(.1).mul(r).sub(.025)).add(a.mul(i).add(s).exp()).mul(1/Math.PI).saturate()}),EL=vz(.04),ED=vI(1);class EB extends Mz{constructor(e=!1,t=!1,r=!1,i=!1,n=!1,a=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=r,this.anisotropy=i,this.transmission=n,this.dispersion=a,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(!0===this.clearcoat&&(this.clearcoatRadiance=vz().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=vz().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=vz().toVar("clearcoatSpecularIndirect")),!0===this.sheen&&(this.sheenSpecularDirect=vz().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=vz().toVar("sheenSpecularIndirect")),!0===this.iridescence){let e=S7.dot(SJ).clamp();this.iridescenceFresnel=EP({outsideIOR:vI(1),eta2:xt,cosTheta1:e,thinFilmThickness:xr,baseF0:xo}),this.iridescenceF0=Er({f:this.iridescenceFresnel,f90:1,dotVH:e})}if(!0===this.transmission){let t=ST.sub(SY).normalize(),r=e.context;r.backdrop=EC(S9,t,v4,v2,xo,xl,SY,SF,S_,Sv,xp,xm,xy,xg,this.dispersion?xv:null),r.backdropAlpha=xf,v2.a.mulAssign(_0(1,r.backdrop.a,xf))}super.start(e)}computeMultiscattering(e,t,r){let i=M9({roughness:v4,dotNV:S7.dot(SJ).clamp()}),n=this.iridescenceF0?xe.mix(xo,this.iridescenceF0):xo,a=n.mul(i.x).add(r.mul(i.y)),s=i.x.add(i.y).oneMinus(),o=n.add(n.oneMinus().mul(.047619)),l=a.mul(o).div(s.mul(o).oneMinus());e.addAssign(a),t.addAssign(l.mul(s))}direct({lightDirection:e,lightColor:t,reflectedLight:r}){let i=S7.dot(e).clamp().mul(t);if(!0===this.sheen&&this.sheenSpecularDirect.addAssign(i.mul(Ea({lightDirection:e}))),!0===this.clearcoat){let r=Te.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(r.mul(M8({lightDirection:e,f0:EL,f90:ED,roughness:v6,normalView:Te})))}r.directDiffuse.addAssign(i.mul(Mj({diffuseColor:v2.rgb}))),r.directSpecular.addAssign(i.mul(Ee({lightDirection:e,f0:xo,f90:1,roughness:v4,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:r,halfHeight:i,reflectedLight:n,ltc_1:a,ltc_2:s}){let o=t.add(r).sub(i),l=t.sub(r).sub(i),u=t.sub(r).add(i),c=t.add(r).add(i),h=SZ.toVar(),d=Es({N:S7,V:SJ,roughness:v4}),A=a.sample(d).toVar(),p=s.sample(d).toVar(),f=v$(vz(A.x,0,A.y),vz(0,1,0),vz(A.z,0,A.w)).toVar(),m=xo.mul(p.x).add(xo.oneMinus().mul(p.y)).toVar();n.directSpecular.addAssign(e.mul(m).mul(Eu({N:S7,V:SJ,P:h,mInv:f,p0:o,p1:l,p2:u,p3:c}))),n.directDiffuse.addAssign(e.mul(v2).mul(Eu({N:S7,V:SJ,P:h,mInv:v$(1,0,0,0,1,0,0,0,1),p0:o,p1:l,p2:u,p3:c})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){let{irradiance:t,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(t.mul(Mj({diffuseColor:v2})))}indirectSpecular(e){let{radiance:t,iblIrradiance:r,reflectedLight:i}=e.context;if(!0===this.sheen&&this.sheenSpecularIndirect.addAssign(r.mul(v7,EI({normal:S7,viewDir:SJ,roughness:v9}))),!0===this.clearcoat){let e=Et({dotNV:Te.dot(SJ).clamp(),specularColor:EL,specularF90:ED,roughness:v6});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(e))}let n=vz().toVar("singleScattering"),a=vz().toVar("multiScattering"),s=r.mul(1/Math.PI);this.computeMultiscattering(n,a,xl);let o=n.add(a),l=v2.mul(o.r.max(o.g).max(o.b).oneMinus());i.indirectSpecular.addAssign(t.mul(n)),i.indirectSpecular.addAssign(a.mul(s)),i.indirectDiffuse.addAssign(l.mul(s))}ambientOcclusion(e){let{ambientOcclusion:t,reflectedLight:r}=e.context,i=S7.dot(SJ).clamp().add(t),n=v4.mul(-16).oneMinus().negate().exp2(),a=t.sub(i.pow(n).oneMinus()).clamp();!0===this.clearcoat&&this.clearcoatSpecularIndirect.mulAssign(t),!0===this.sheen&&this.sheenSpecularIndirect.mulAssign(t),r.indirectDiffuse.mulAssign(t),r.indirectSpecular.mulAssign(a)}finish({context:e}){let{outgoingLight:t}=e;if(!0===this.clearcoat){let e=MH({dotVH:Te.dot(SJ).clamp(),f0:EL,f90:ED}),r=t.mul(v8.mul(e).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(v8));t.assign(r)}if(!0===this.sheen){let e=v7.r.max(v7.g).max(v7.b).mul(.157).oneMinus(),r=t.mul(e).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}let EF=vI(1),EO=vI(-2),EU=vI(.8),Ek=vI(-1),Ez=vI(.4),EV=vI(2),Eq=vI(.305),EG=vI(3),EH=vI(.21),Ej=vI(4),EW=vI(4),EX=vI(16),EQ=vM(([e])=>{let t=vz(_T(e)).toVar(),r=vI(-1).toVar();return vR(t.x.greaterThan(t.z),()=>{vR(t.x.greaterThan(t.y),()=>{r.assign(bt(e.x.greaterThan(0),0,3))}).Else(()=>{r.assign(bt(e.y.greaterThan(0),1,4))})}).Else(()=>{vR(t.z.greaterThan(t.y),()=>{r.assign(bt(e.z.greaterThan(0),2,5))}).Else(()=>{r.assign(bt(e.y.greaterThan(0),1,4))})}),r}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),E$=vM(([e,t])=>{let r=vF().toVar();return vR(t.equal(0),()=>{r.assign(vF(e.z,e.y).div(_T(e.x)))}).ElseIf(t.equal(1),()=>{r.assign(vF(e.x.negate(),e.z.negate()).div(_T(e.y)))}).ElseIf(t.equal(2),()=>{r.assign(vF(e.x.negate(),e.y).div(_T(e.z)))}).ElseIf(t.equal(3),()=>{r.assign(vF(e.z.negate(),e.y).div(_T(e.x)))}).ElseIf(t.equal(4),()=>{r.assign(vF(e.x.negate(),e.z).div(_T(e.y)))}).Else(()=>{r.assign(vF(e.x,e.y).div(_T(e.z)))}),xO(.5,r.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),EY=vM(([e])=>{let t=vI(0).toVar();return vR(e.greaterThanEqual(EU),()=>{t.assign(EF.sub(e).mul(Ek.sub(EO)).div(EF.sub(EU)).add(EO))}).ElseIf(e.greaterThanEqual(Ez),()=>{t.assign(EU.sub(e).mul(EV.sub(Ek)).div(EU.sub(Ez)).add(Ek))}).ElseIf(e.greaterThanEqual(Eq),()=>{t.assign(Ez.sub(e).mul(EG.sub(EV)).div(Ez.sub(Eq)).add(EV))}).ElseIf(e.greaterThanEqual(EH),()=>{t.assign(Eq.sub(e).mul(Ej.sub(EG)).div(Eq.sub(EH)).add(EG))}).Else(()=>{t.assign(vI(-2).mul(_h(xO(1.16,e))))}),t}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),EK=vM(([e,t])=>{let r=e.toVar();r.assign(xO(2,r).sub(1));let i=vz(r,1).toVar();return vR(t.equal(0),()=>{i.assign(i.zyx)}).ElseIf(t.equal(1),()=>{i.assign(i.xzy),i.xz.mulAssign(-1)}).ElseIf(t.equal(2),()=>{i.x.mulAssign(-1)}).ElseIf(t.equal(3),()=>{i.assign(i.zyx),i.xz.mulAssign(-1)}).ElseIf(t.equal(4),()=>{i.assign(i.xzy),i.xy.mulAssign(-1)}).ElseIf(t.equal(5),()=>{i.z.mulAssign(-1)}),i}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),EZ=vM(([e,t,r,i,n,a])=>{let s=vI(r),o=vz(t),l=_1(EY(s),EO,a),u=_g(l),c=_p(l),h=vz(EJ(e,o,c,i,n,a)).toVar();return vR(u.notEqual(0),()=>{let t=vz(EJ(e,o,c.add(1),i,n,a)).toVar();h.assign(_0(h,t,u))}),h}),EJ=vM(([e,t,r,i,n,a])=>{let s=vI(r).toVar(),o=vz(t),l=vI(EQ(o)).toVar(),u=vI(_z(EW.sub(s),0)).toVar();s.assign(_z(s,EW));let c=vI(_u(s)).toVar(),h=vF(E$(o,l).mul(c.sub(2)).add(1)).toVar();return vR(l.greaterThan(2),()=>{h.y.addAssign(c),l.subAssign(3)}),h.x.addAssign(l.mul(c)),h.x.addAssign(u.mul(xO(3,EX))),h.y.addAssign(xO(4,_u(a).sub(c))),h.x.mulAssign(i),h.y.mulAssign(n),e.sample(h).grad(vF(),vF())}),E0=vM(({envMap:e,mipInt:t,outputDirection:r,theta:i,axis:n,CUBEUV_TEXEL_WIDTH:a,CUBEUV_TEXEL_HEIGHT:s,CUBEUV_MAX_MIP:o})=>{let l=_v(i);return EJ(e,r.mul(l).add(n.cross(r).mul(_y(i))).add(n.mul(n.dot(r).mul(l.oneMinus()))),t,a,s,o)}),E1=vM(({n:e,latitudinal:t,poleAxis:r,outputDirection:i,weights:n,samples:a,dTheta:s,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})=>{let d=vz(bt(t,r,_W(r,i))).toVar();vR(d.equal(vz(0)),()=>{d.assign(vz(i.z,0,i.x.negate()))}),d.assign(_m(d));let A=vz().toVar();return A.addAssign(n.element(0).mul(E0({theta:0,axis:d,outputDirection:i,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),wQ({start:vL(1),end:e},({i:e})=>{vR(e.greaterThanEqual(a),()=>{w$()});let t=vI(s.mul(vI(e))).toVar();A.addAssign(n.element(e).mul(E0({theta:t.mul(-1),axis:d,outputDirection:i,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),A.addAssign(n.element(e).mul(E0({theta:t,axis:d,outputDirection:i,mipInt:o,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})))}),vH(A,1)}),E2=vM(([e])=>{let t=vD(e).toVar();return t.assign(t.shiftLeft(vD(16)).bitOr(t.shiftRight(vD(16)))),t.assign(t.bitAnd(vD(0x55555555)).shiftLeft(vD(1)).bitOr(t.bitAnd(vD(0xaaaaaaaa)).shiftRight(vD(1)))),t.assign(t.bitAnd(vD(0x33333333)).shiftLeft(vD(2)).bitOr(t.bitAnd(vD(0xcccccccc)).shiftRight(vD(2)))),t.assign(t.bitAnd(vD(0xf0f0f0f)).shiftLeft(vD(4)).bitOr(t.bitAnd(vD(0xf0f0f0f0)).shiftRight(vD(4)))),t.assign(t.bitAnd(vD(0xff00ff)).shiftLeft(vD(8)).bitOr(t.bitAnd(vD(0xff00ff00)).shiftRight(vD(8)))),vI(t).mul(23283064365386963e-26)}),E3=vM(([e,t])=>vF(vI(e).div(vI(t)),E2(e))),E4=vM(([e,t,r])=>{let i=vz(t).toVar(),n=vI(r),a=n.mul(n).toVar(),s=_m(vz(a.mul(i.x),a.mul(i.y),i.z)).toVar(),o=s.x.mul(s.x).add(s.y.mul(s.y)),l=bt(o.greaterThan(0),vz(s.y.negate(),s.x,0).div(_d(o)),vz(1,0,0)).toVar(),u=_W(s,l).toVar(),c=_d(e.x),h=xO(2,3.14159265359).mul(e.y),d=c.mul(_v(h)).toVar(),A=c.mul(_y(h)).toVar(),p=xO(.5,s.z.add(1));A.assign(p.oneMinus().mul(_d(d.mul(d).oneMinus())).add(p.mul(A)));let f=l.mul(d).add(u.mul(A)).add(s.mul(_d(_z(0,d.mul(d).add(A.mul(A)).oneMinus()))));return _m(vz(a.mul(f.x),a.mul(f.y),_z(0,f.z)))}),E5=vM(({roughness:e,mipInt:t,envMap:r,N_immutable:i,GGX_SAMPLES:n,CUBEUV_TEXEL_WIDTH:a,CUBEUV_TEXEL_HEIGHT:s,CUBEUV_MAX_MIP:o})=>{let l=vz(i).toVar(),u=vz(0).toVar(),c=vI(0).toVar();return vR(e.lessThan(.001),()=>{u.assign(EJ(r,l,t,a,s,o))}).Else(()=>{let i=_m(_W(bt(_T(l.z).lessThan(.999),vz(0,0,1),vz(1,0,0)),l)).toVar(),h=_W(l,i).toVar();wQ({start:vD(0),end:n},({i:d})=>{let A=E4(E3(d,n),vz(0,0,1),e),p=_m(i.mul(A.x).add(h.mul(A.y)).add(l.mul(A.z))),f=_m(p.mul(_j(l,p).mul(2)).sub(l)),m=_z(_j(l,f),0);vR(m.greaterThan(0),()=>{let e=EJ(r,f,t,a,s,o);u.addAssign(e.mul(m)),c.addAssign(m)})}),vR(c.greaterThan(0),()=>{u.assign(u.div(c))})}),vH(u,1)}),E8=[.125,.215,.35,.446,.526,.582],E6=new s4(-1,1,1,-1,0,1),E7=new il(90,1),E9=new ry,Ce=null,Ct=0,Cr=0,Ci=new e$,Cn=new WeakMap,Ca=[3,1,5,0,4,2],Cs=EK(b2(),b1("faceIndex")).normalize(),Co=vz(Cs.x,Cs.y,Cs.z);class Cl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._ggxMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,r=.1,i=100,n={}){let{size:a=256,position:s=Ci,renderTarget:o=null}=n;if(this._setSize(a),!1===this._hasInitialized){eI('PMREMGenerator: ".fromScene()" called before the backend is initialized. Try using "await renderer.init()" instead.');let a=o||this._allocateTarget();return n.renderTarget=a,this.fromSceneAsync(e,t,r,i,n),a}Ce=this._renderer.getRenderTarget(),Ct=this._renderer.getActiveCubeFace(),Cr=this._renderer.getActiveMipmapLevel();let l=o||this._allocateTarget();return l.depthBuffer=!0,this._init(l),this._sceneToCubeUV(e,r,i,l,s),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}async fromSceneAsync(e,t=0,r=.1,i=100,n={}){return eD('PMREMGenerator: ".fromSceneAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this.fromScene(e,t,r,i,n)}fromEquirectangular(e,t=null){if(!1===this._hasInitialized){eI('PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using "await renderer.init()" instead.'),this._setSizeFromTexture(e);let r=t||this._allocateTarget();return this.fromEquirectangularAsync(e,r),r}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return eD('PMREMGenerator: ".fromEquirectangularAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(!1===this._hasInitialized){eI("PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);let r=t||this._allocateTarget();return this.fromCubemapAsync(e,t),r}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return eD('PMREMGenerator: ".fromCubemapAsync()" is deprecated. Use "await renderer.init()" instead.'),await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Cd(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=CA(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose(),null!==this._backgroundBox&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._ggxMaterial&&this._ggxMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(Ce,Ct,Cr),e.scissorTest=!1,Cc(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),Ce=this._renderer.getRenderTarget(),Ct=this._renderer.getActiveCubeFace(),Cr=this._renderer.getActiveMipmapLevel();let r=t||this._allocateTarget();return this._init(r),this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTarget(){return Cu(3*Math.max(this._cubeSize,112),4*this._cubeSize)}_init(e){if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){var t,r,i,n,a,s;let o,l,u,c,h,d,A,p,f,m,g,y,v,x,_;null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Cu(e.width,e.height);let{_lodMax:b}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=function(e){let t=[],r=[],i=[],n=e,a=e-4+1+E8.length;for(let s=0;s<a;s++){let a=Math.pow(2,n);t.push(a);let o=1/a;s>e-4?o=E8[s-e+4-1]:0===s&&(o=0),r.push(o);let l=1/(a-2),u=-l,c=1+l,h=[u,u,c,u,c,c,u,u,c,c,u,c],d=new Float32Array(108),A=new Float32Array(72),p=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,r=e>2?0:-1,i=[t,r,0,t+2/3,r,0,t+2/3,r+1,0,t,r,0,t+2/3,r+1,0,t,r+1,0],n=Ca[e];d.set(i,18*n),A.set(h,12*n);let a=[n,n,n,n,n,n];p.set(a,6*n)}let f=new rX;f.setAttribute("position",new rN(d,3)),f.setAttribute("uv",new rN(A,2)),f.setAttribute("faceIndex",new rN(p,1)),i.push(new r5(f,null)),n>4&&n--}return{lodMeshes:i,sizeLods:t,sigmas:r}}(b)),this._blurMaterial=(t=b,r=e.width,i=e.height,o=Sn(Array(20).fill(0)),l=xE(new e$(0,1,0)),u=xE(0),c=vI(20),h=xE(0),d=xE(1),A=b7(),p=xE(0),f={n:c,latitudinal:h,weights:o,poleAxis:l,outputDirection:Co,dTheta:u,samples:d,envMap:A,mipInt:p,CUBEUV_TEXEL_WIDTH:vI(1/r),CUBEUV_TEXEL_HEIGHT:vI(1/i),CUBEUV_MAX_MIP:vI(t)},(m=Ch("blur")).fragmentNode=E1({...f,latitudinal:h.equal(1)}),Cn.set(m,f),m),this._ggxMaterial=(n=b,a=e.width,s=e.height,g=b7(),y=xE(0),v=xE(0),x={envMap:g,roughness:y,mipInt:v,CUBEUV_TEXEL_WIDTH:vI(1/a),CUBEUV_TEXEL_HEIGHT:vI(1/s),CUBEUV_MAX_MIP:vI(n)},(_=Ch("ggx")).fragmentNode=E5({...x,N_immutable:Co,GGX_SAMPLES:vD(512)}),Cn.set(_,x),_)}}async _compileMaterial(e){let t=new r5(new rX,e);await this._renderer.compile(t,E6)}_sceneToCubeUV(e,t,r,i,n){E7.near=t,E7.far=r;let a=[1,1,1,1,-1,1],s=[1,-1,1,-1,1,-1],o=this._renderer,l=o.autoClear;o.getClearColor(E9),o.autoClear=!1,null===this._backgroundBox&&(this._backgroundBox=new r5(new r6,new rb({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1})));let u=this._backgroundBox,c=u.material,h=!1,d=e.background;d?d.isColor&&(c.color.copy(d),e.background=null,h=!0):(c.color.copy(E9),h=!0),o.setRenderTarget(i),o.clear(),h&&o.render(u,E7);for(let t=0;t<6;t++){let r=t%3;0===r?(E7.up.set(0,a[t],0),E7.position.set(n.x,n.y,n.z),E7.lookAt(n.x+s[t],n.y,n.z)):1===r?(E7.up.set(0,0,a[t]),E7.position.set(n.x,n.y,n.z),E7.lookAt(n.x,n.y+s[t],n.z)):(E7.up.set(0,a[t],0),E7.position.set(n.x,n.y,n.z),E7.lookAt(n.x,n.y,n.z+s[t]));let l=this._cubeSize;Cc(i,r*l,t>2?l:0,l,l),o.render(e,E7)}o.autoClear=l,e.background=d}_textureToCubeUV(e,t){let r=this._renderer,i=301===e.mapping||302===e.mapping;i?null===this._cubemapMaterial&&(this._cubemapMaterial=Cd(e)):null===this._equirectMaterial&&(this._equirectMaterial=CA(e));let n=i?this._cubemapMaterial:this._equirectMaterial;n.fragmentNode.value=e;let a=this._lodMeshes[0];a.material=n;let s=this._cubeSize;Cc(t,0,0,3*s,2*s),r.setRenderTarget(t),r.render(a,E6)}_applyPMREM(e){let t=this._renderer,r=t.autoClear;t.autoClear=!1;let i=this._lodMeshes.length;for(let t=1;t<i;t++)this._applyGGXFilter(e,t-1,t);t.autoClear=r}_applyGGXFilter(e,t,r){let i=this._renderer,n=this._pingPongRenderTarget,a=this._ggxMaterial,s=this._lodMeshes[r];s.material=a;let o=Cn.get(a),l=r/(this._lodMeshes.length-1),u=t/(this._lodMeshes.length-1),c=Math.sqrt(l*l-u*u),{_lodMax:h}=this,d=this._sizeLods[r],A=3*d*(r>h-4?r-h+4:0),p=4*(this._cubeSize-d);e.texture.frame=(e.texture.frame||0)+1,o.envMap.value=e.texture,o.roughness.value=c*(.05+.95*l),o.mipInt.value=h-t,Cc(n,A,p,3*d,2*d),i.setRenderTarget(n),i.render(s,E6),n.texture.frame=(n.texture.frame||0)+1,o.envMap.value=n.texture,o.roughness.value=0,o.mipInt.value=h-r,Cc(e,A,p,3*d,2*d),i.setRenderTarget(e),i.render(s,E6)}_blur(e,t,r,i,n){let a=this._pingPongRenderTarget;this._halfBlur(e,a,t,r,i,"latitudinal",n),this._halfBlur(a,e,r,r,i,"longitudinal",n)}_halfBlur(e,t,r,i,n,a,s){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&eL("blur direction must be either latitudinal or longitudinal!");let u=this._lodMeshes[i];u.material=l;let c=Cn.get(l),h=this._sizeLods[r]-1,d=isFinite(n)?Math.PI/(2*h):2*Math.PI/39,A=n/d,p=isFinite(n)?1+Math.floor(3*A):20;p>20&&eI(`sigmaRadians, ${n}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);let f=[],m=0;for(let e=0;e<20;++e){let t=e/A,r=Math.exp(-t*t/2);f.push(r),0===e?m+=r:e<p&&(m+=2*r)}for(let e=0;e<f.length;e++)f[e]=f[e]/m;e.texture.frame=(e.texture.frame||0)+1,c.envMap.value=e.texture,c.samples.value=p,c.weights.array=f,c.latitudinal.value=+("latitudinal"===a),s&&(c.poleAxis.value=s);let{_lodMax:g}=this;c.dTheta.value=d,c.mipInt.value=g-r;let y=this._sizeLods[i],v=4*(this._cubeSize-y);Cc(t,3*y*(i>g-4?i-g+4:0),v,3*y,2*y),o.setRenderTarget(t),o.render(u,E6)}}function Cu(e,t){let r=new ti(e,t,{magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:ef});return r.texture.mapping=306,r.texture.name="PMREM.cubeUv",r.texture.isPMREMTexture=!0,r.scissorTest=!0,r}function Cc(e,t,r,i,n){e.viewport.set(t,r,i,n),e.scissor.set(t,r,i,n)}function Ch(e){let t=new Mb;return t.depthTest=!1,t.depthWrite=!1,t.blending=0,t.name=`PMREM_${e}`,t}function Cd(e){let t=Ch("cubemap");return t.fragmentNode=Tg(e,Co),t}function CA(e){let t=Ch("equirect");return t.fragmentNode=b7(e,MI(Co),0),t}let Cp=new WeakMap,Cf=v_(class extends yG{static get type(){return"PMREMNode"}constructor(e,t=null,r=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=r,this._generator=null;const i=new tt;i.isRenderTargetTexture=!0,this._texture=b7(i),this._width=xE(0),this._height=xE(0),this._maxMip=xE(0),this.updateBeforeType=yI.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){var t;let r,i={texelWidth:1/(3*Math.max(Math.pow(2,r=Math.log2(t=e.image.height)-2),112)),texelHeight:1/t,maxMip:r};this._texture.value=e,this._width.value=i.texelWidth,this._height.value=i.texelHeight,this._maxMip.value=i.maxMip}updateBefore(e){let t=this._pmrem,r=t?t.pmremVersion:-1,i=this._value;r!==i.pmremVersion&&null!==(t=!0===i.isPMREMTexture?i:function(e,t,r){var i,n;let a,s=(i=t,void 0===(a=Cp.get(i))&&(a=new WeakMap,Cp.set(i,a)),a),o=s.get(e);if((void 0!==o?o.pmremVersion:-1)!==e.pmremVersion){let t=e.image;if(e.isCubeTexture)if(!function(e){if(null==e)return!1;let t=0;for(let r=0;r<6;r++)void 0!==e[r]&&t++;return 6===t}(t))return null;else o=r.fromCubemap(e,o);else{if(!(null!=(n=t)&&n.height>0))return null;o=r.fromEquirectangular(e,o)}o.pmremVersion=e.pmremVersion,s.set(e,o)}return o.texture}(i,e.renderer,this._generator))&&(this._pmrem=t,this.updateFromTexture(t))}setup(e){null===this._generator&&(this._generator=new Cl(e.renderer)),this.updateBefore(e);let t=this.uvNode;null===t&&e.context.getUV&&(t=e.context.getUV(this)),t=Tc.mul(vz(t.x,t.y.negate(),t.z));let r=this.levelNode;return null===r&&e.context.getTextureLevel&&(r=e.context.getTextureLevel(this)),EZ(this._texture,t,r,this._width,this._height,this._maxMip)}dispose(){super.dispose(),null!==this._generator&&this._generator.dispose()}}).setParameterLength(1,3),Cm=new WeakMap;class Cg extends w0{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){let{material:t}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){let e=r.isTextureNode?r.value:t[r.property],i=Cm.get(e);void 0===i&&(i=Cf(e),Cm.set(e,i)),r=i}let i=!0===t.useAnisotropy||t.anisotropy>0?TQ:S7,n=r.context(Cy(v4,i)).mul(Tu),a=r.context(Cv(S9)).mul(Math.PI).mul(Tu),s=bU(n),o=bU(a);e.context.radiance.addAssign(s),e.context.iblIrradiance.addAssign(o);let l=e.context.lightingModel.clearcoatRadiance;if(l){let e=bU(r.context(Cy(v6,Te)).mul(Tu));l.addAssign(e)}}}let Cy=(e,t)=>{let r=null;return{getUV:()=>(null===r&&(r=SJ.negate().reflect(t),r=(r=_Y(e).mix(r,t).normalize()).transformDirection(S_)),r),getTextureLevel:()=>e}},Cv=e=>({getUV:()=>e,getTextureLevel:()=>vI(1)}),Cx=new sr;class C_ extends Mb{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(Cx),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return null===t&&e.environmentNode&&(t=e.environmentNode),t?new Cg(t):null}setupLightingModel(){return new EB}setupSpecular(){let e=_0(vz(.04),v2.rgb,v5);xo.assign(e),xl.assign(1)}setupVariants(){let e=this.metalnessNode?vI(this.metalnessNode):wr;v5.assign(e);let t=this.roughnessNode?vI(this.roughnessNode):wt;t=M0({roughness:t}),v4.assign(t),this.setupSpecular(),v2.assign(vH(v2.rgb.mul(e.oneMinus()),v2.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}let Cb=new si;class CS extends C_{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(Cb),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||null!==this.clearcoatNode}get useIridescence(){return this.iridescence>0||null!==this.iridescenceNode}get useSheen(){return this.sheen>0||null!==this.sheenNode}get useAnisotropy(){return this.anisotropy>0||null!==this.anisotropyNode}get useTransmission(){return this.transmission>0||null!==this.transmissionNode}get useDispersion(){return this.dispersion>0||null!==this.dispersionNode}setupSpecular(){let e=this.iorNode?vI(this.iorNode):wm;xp.assign(e),xo.assign(_0(_k(_Q(xp.sub(1).div(xp.add(1))).mul(T7),vz(1)).mul(T6),v2.rgb,v5)),xl.assign(_0(T6,1,v5))}setupLightingModel(){return new EB(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){let e=this.clearcoatNode?vI(this.clearcoatNode):wn,t=this.clearcoatRoughnessNode?vI(this.clearcoatRoughnessNode):wa;v8.assign(e),v6.assign(M0({roughness:t}))}if(this.useSheen){let e=this.sheenNode?vz(this.sheenNode):wl,t=this.sheenRoughnessNode?vI(this.sheenRoughnessNode):wu;v7.assign(e),v9.assign(t)}if(this.useIridescence){let e=this.iridescenceNode?vI(this.iridescenceNode):wh,t=this.iridescenceIORNode?vI(this.iridescenceIORNode):wd,r=this.iridescenceThicknessNode?vI(this.iridescenceThicknessNode):wA;xe.assign(e),xt.assign(t),xr.assign(r)}if(this.useAnisotropy){let e=(this.anisotropyNode?vF(this.anisotropyNode):wc).toVar();xn.assign(e.length()),vR(xn.equal(0),()=>{e.assign(vF(1,0))}).Else(()=>{e.divAssign(vF(xn)),xn.assign(xn.saturate())}),xi.assign(xn.pow2().mix(v4.pow2(),1)),xa.assign(TW[0].mul(e.x).add(TW[1].mul(e.y))),xs.assign(TW[1].mul(e.x).sub(TW[0].mul(e.y)))}if(this.useTransmission){let e=this.transmissionNode?vI(this.transmissionNode):wp,t=this.thicknessNode?vI(this.thicknessNode):wf,r=this.attenuationDistanceNode?vI(this.attenuationDistanceNode):wg,i=this.attenuationColorNode?vz(this.attenuationColorNode):wy;if(xf.assign(e),xm.assign(t),xg.assign(r),xy.assign(i),this.useDispersion){let e=this.dispersionNode?vI(this.dispersionNode):ww;xv.assign(e)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?vz(this.clearcoatNormalNode):ws}setup(e){e.context.setupClearcoatNormal=()=>bA(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}let CT=vM(({normal:e,lightDirection:t,builder:r})=>{let i=vF(e.dot(t).mul(.5).add(.5),0);if(r.material.gradientMap)return vz(TS("gradientMap","texture").context({getUV:()=>i}).r);{let e=i.fwidth().mul(.5);return _0(vz(.7),vz(1),_4(vI(.7).sub(e.x),vI(.7).add(e.x),i.x))}});class Cw extends Mz{direct({lightDirection:e,lightColor:t,reflectedLight:r},i){let n=CT({normal:S3,lightDirection:e,builder:i}).mul(t);r.directDiffuse.addAssign(n.mul(Mj({diffuseColor:v2.rgb})))}indirect(e){let{ambientOcclusion:t,irradiance:r,reflectedLight:i}=e.context;i.indirectDiffuse.addAssign(r.mul(Mj({diffuseColor:v2}))),i.indirectDiffuse.mulAssign(t)}}let CM=new sa;class CE extends Mb{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(CM),this.setValues(e)}setupLightingModel(){return new Cw}}let CC=vM(()=>{let e=vz(SJ.z,0,SJ.x.negate()).normalize(),t=SJ.cross(e);return vF(e.dot(S7),t.dot(S7)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),CR=new sc;class CN extends Mb{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(CR),this.setValues(e)}setupVariants(e){let t;t=e.material.matcap?TS("matcap","texture").context({getUV:()=>CC}):vz(_0(.2,.8,CC.y)),v2.rgb.mulAssign(t.rgb)}}let CP=v_(class extends yG{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){let{rotationNode:t,positionNode:r}=this;if("vec2"===this.getNodeType(e)){let e=t.cos(),i=t.sin();return vQ(e,i,i.negate(),e).mul(r)}{let e=vY(vH(1,0,0,0),vH(0,_v(t.x),_y(t.x).negate(),0),vH(0,_y(t.x),_v(t.x),0),vH(0,0,0,1)),i=vY(vH(_v(t.y),0,_y(t.y),0),vH(0,1,0,0),vH(_y(t.y).negate(),0,_v(t.y),0),vH(0,0,0,1)),n=vY(vH(_v(t.z),_y(t.z).negate(),0,0),vH(_y(t.z),_v(t.z),0,0),vH(0,0,1,0),vH(0,0,0,1));return e.mul(i).mul(n).mul(vH(r,1)).xyz}}}).setParameterLength(2),CI=new ib;class CL extends Mb{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(CI),this.setValues(e)}setupPositionView(e){let{object:t,camera:r}=e,{positionNode:i,rotationNode:n,scaleNode:a,sizeAttenuation:s}=this,o=SG.mul(vz(i||0)),l=vF(SF[0].xyz.length(),SF[1].xyz.length());null!==a&&(l=l.mul(vF(a))),r.isPerspectiveCamera&&!1===s&&(l=l.mul(o.z.negate()));let u=SX.xy;if(t.center&&!0===t.center.isVector2){let e=vg(new bS("center","vec2",t));u=u.sub(e.sub(.5))}let c=CP(u=u.mul(l),vI(n||wo));return vH(o.xy.add(c),o.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}let CD=new nq,CB=new eX;class CF extends CL{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(CD),this.setValues(e)}setupPositionView(){let{positionNode:e}=this;return SG.mul(vz(e||SQ)).xyz}setupVertexSprite(e){let{material:t,camera:r}=e,{rotationNode:i,scaleNode:n,sizeNode:a,sizeAttenuation:s}=this,o=super.setupVertex(e);if(!0!==t.isNodeMaterial)return o;let l=null!==a?vF(a):wT;l=l.mul(So),r.isPerspectiveCamera&&!0===s&&(l=l.mul(CO.div(SZ.z.negate()))),n&&n.isNode&&(l=l.mul(vF(n)));let u=SX.xy;return i&&i.isNode&&(u=CP(u,vI(i))),u=(u=(u=u.mul(l)).div(Sd.div(2))).mul(o.w),o=o.add(vH(u,0,0))}setupVertex(e){return e.object.isPoints?super.setupVertex(e):this.setupVertexSprite(e)}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}let CO=xE(1).onFrameUpdate(function({renderer:e}){let t=e.getSize(CB);this.value=.5*t.y});class CU extends Mz{constructor(){super(),this.shadowNode=vI(1).toVar("shadowMask")}direct({lightNode:e}){null!==e.shadowNode&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){v2.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(v2.rgb)}}let Ck=new se;class Cz extends Mb{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(Ck),this.setValues(e)}setupLightingModel(){return new CU}}v0("vec3"),v0("vec3"),v0("vec3");class CV{constructor(e,t,r){this.renderer=e,this.nodes=t,this.info=r,this._context="undefined"!=typeof self?self:null,this._animationLoop=null,this._requestId=null}start(){let e=(t,r)=>{this._requestId=this._context.requestAnimationFrame(e),!0===this.info.autoReset&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this.renderer._inspector.begin(),null!==this._animationLoop&&this._animationLoop(t,r),this.renderer._inspector.finish()};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class Cq{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let r=0;r<e.length-1;r++)if(void 0===(t=t.get(e[r])))return;return t.get(e[e.length-1])}set(e,t){let r=this.weakMap;for(let t=0;t<e.length-1;t++){let i=e[t];!1===r.has(i)&&r.set(i,new WeakMap),r=r.get(i)}return r.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let r=0;r<e.length-1;r++)if(void 0===(t=t.get(e[r])))return!1;return t.delete(e[e.length-1])}}let CG=0;class CH{constructor(e,t,r,i,n,a,s,o,l,u){this.id=CG++,this._nodes=e,this._geometries=t,this.renderer=r,this.object=i,this.material=n,this.scene=a,this.camera=s,this.lightsNode=o,this.context=l,this.geometry=i.geometry,this.version=n.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=u,this.clippingContextCacheKey=null!==u?u.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return null!==this.clippingContext&&this.clippingContext.cacheKey!==this.clippingContextCacheKey&&(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return!0===this.material.hardwareClipping?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(let t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(null!==this.attributes)return this.attributes;let e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,r=[],i=new Set,n={};for(let a of e){let e;if(a.node&&a.node.attribute?e=a.node.attribute:(e=t.getAttribute(a.name),n[a.name]=e.version),void 0===e)continue;r.push(e);let s=e.isInterleavedBufferAttribute?e.data:e;i.add(s)}return this.attributes=r,this.attributesId=n,this.vertexBuffers=Array.from(i.values()),r}getVertexBuffers(){return null===this.vertexBuffers&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){let{object:e,material:t,geometry:r,group:i,drawRange:n}=this,a=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),s=this.getIndex(),o=null!==s,l=1;if(!0===r.isInstancedBufferGeometry?l=r.instanceCount:void 0!==e.count&&(l=Math.max(0,e.count)),0===l)return null;if(a.instanceCount=l,!0===e.isBatchedMesh)return a;let u=1;!0!==t.wireframe||e.isPoints||e.isLineSegments||e.isLine||e.isLineLoop||(u=2);let c=n.start*u,h=(n.start+n.count)*u;null!==i&&(c=Math.max(c,i.start*u),h=Math.min(h,(i.start+i.count)*u));let d=r.attributes.position,A=1/0;o?A=s.count:null!=d&&(A=d.count),c=Math.max(c,0);let p=(h=Math.min(h,A))-c;return p<0||p===1/0?null:(a.vertexCount=p,a.firstVertex=c,a)}getGeometryCacheKey(){let{geometry:e}=this,t="";for(let r of Object.keys(e.attributes).sort()){let i=e.attributes[r];t+=r+",",i.data&&(t+=i.data.stride+","),i.offset&&(t+=i.offset+","),i.itemSize&&(t+=i.itemSize+","),i.normalized&&(t+="n,")}for(let r of Object.keys(e.morphAttributes).sort()){let i=e.morphAttributes[r];t+="morph-"+r+",";for(let e=0,r=i.length;e<r;e++)t+=i[e].id+","}return e.index&&(t+="index,"),t}getMaterialCacheKey(){let{object:e,material:t,renderer:r}=this,i=t.customProgramCacheKey();for(let e of function(e){let t=Object.keys(e),r=Object.getPrototypeOf(e);for(;r;){let e=Object.getOwnPropertyDescriptors(r);for(let r in e)if(void 0!==e[r]){let i=e[r];i&&"function"==typeof i.get&&t.push(r)}r=Object.getPrototypeOf(r)}return t}(t)){let n;if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(e))continue;let a=t[e];if(null!==a){let e=typeof a;"number"===e?n=0!==a?"1":"0":"object"===e?(n="{",a.isTexture&&(n+=a.mapping,!0===r.backend.isWebGPUBackend&&(n+=a.magFilter,n+=a.minFilter,n+=a.wrapS,n+=a.wrapT,n+=a.wrapR)),n+="}"):n=String(a)}else n=String(a);i+=n+","}return i+=this.clippingContextCacheKey+",",e.geometry&&(i+=this.getGeometryCacheKey()),e.skeleton&&(i+=e.skeleton.bones.length+","),e.isBatchedMesh&&(i+=e._matricesTexture.uuid+",",null!==e._colorsTexture&&(i+=e._colorsTexture.uuid+",")),(e.isInstancedMesh||e.count>1||Array.isArray(e.morphTargetInfluences))&&(i+=e.uuid+","),y_(i+=e.receiveShadow+",")}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(null!==this.attributes){let e=this.attributesId;for(let t in e){let r=this.geometry.getAttribute(t);if(void 0===r||e[t]!==r.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return!0!==this.material.isShadowPassMaterial&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=((...e)=>yx(e))(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=((...e)=>yx(e))(e,1)),e=((...e)=>yx(e))(e,this.camera.id)}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}let Cj=[];class CW{constructor(e,t,r,i,n,a){this.renderer=e,this.nodes=t,this.geometries=r,this.pipelines=i,this.bindings=n,this.info=a,this.chainMaps={}}get(e,t,r,i,n,a,s,o){let l=this.getChainMap(o);Cj[0]=e,Cj[1]=t,Cj[2]=a,Cj[3]=n;let u=l.get(Cj);return void 0===u?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,r,i,n,a,s,o),l.set(Cj,u)):(u.updateClipping(s),u.needsGeometryUpdate&&u.setGeometry(e.geometry),(u.version!==t.version||u.needsUpdate)&&(u.initialCacheKey!==u.getCacheKey()?(u.dispose(),u=this.get(e,t,r,i,n,a,s,o)):u.version=t.version)),Cj.length=0,u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new Cq)}dispose(){this.chainMaps={}}createRenderObject(e,t,r,i,n,a,s,o,l,u,c){let h=this.getChainMap(c),d=new CH(e,t,r,i,n,a,s,o,l,u);return d.onDispose=()=>{this.pipelines.delete(d),this.bindings.deleteForRender(d),this.nodes.delete(d),h.delete(d.getChainArray())},d}}class CX{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return void 0===t&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}class CQ extends CX{constructor(e){super(),this.backend=e}delete(e){let t=super.delete(e);return null!==t&&this.backend.destroyAttribute(e),t}update(e,t){let r=this.get(e);if(void 0===r.version)1===t?this.backend.createAttribute(e):2===t?this.backend.createIndexAttribute(e):3===t?this.backend.createStorageAttribute(e):4===t&&this.backend.createIndirectStorageAttribute(e),r.version=this._getBufferAttribute(e).version;else{let t=this._getBufferAttribute(e);(r.version<t.version||35048===t.usage)&&(this.backend.updateAttribute(e),r.version=t.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function C$(e){return null!==e.index?e.index.version:e.attributes.position.version}function CY(e){let t=[],r=e.index,i=e.attributes.position;if(null!==r){let e=r.array;for(let r=0,i=e.length;r<i;r+=3){let i=e[r+0],n=e[r+1],a=e[r+2];t.push(i,n,n,a,a,i)}}else{let e=i.array;for(let r=0,i=e.length/3-1;r<i;r+=3){let e=r+0,i=r+1,n=r+2;t.push(e,i,i,n,n,e)}}let n=new(eb(t)?rO:rB)(t,1);return n.version=C$(e),n}class CK extends CX{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap,this._geometryDisposeListeners=new Map}has(e){let t=e.geometry;return super.has(t)&&!0===this.get(t).initialized}updateForRender(e){!1===this.has(e)&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){let t=e.geometry;this.get(t).initialized=!0,this.info.memory.geometries++;let r=()=>{this.info.memory.geometries--;let i=t.index,n=e.getAttributes();for(let e of(null!==i&&this.attributes.delete(i),n))this.attributes.delete(e);let a=this.wireframes.get(t);void 0!==a&&this.attributes.delete(a),t.removeEventListener("dispose",r),this._geometryDisposeListeners.delete(t)};t.addEventListener("dispose",r),this._geometryDisposeListeners.set(t,r)}updateAttributes(e){for(let t of e.getAttributes())t.isStorageBufferAttribute||t.isStorageInstancedBufferAttribute?this.updateAttribute(t,3):this.updateAttribute(t,1);let t=this.getIndex(e);null!==t&&this.updateAttribute(t,2);let r=e.geometry.indirect;null!==r&&this.updateAttribute(r,4)}updateAttribute(e,t){let r=this.info.render.calls;e.isInterleavedBufferAttribute?void 0===this.attributeCall.get(e)?(this.attributes.update(e,t),this.attributeCall.set(e,r)):this.attributeCall.get(e.data)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e.data,r),this.attributeCall.set(e,r)):this.attributeCall.get(e)!==r&&(this.attributes.update(e,t),this.attributeCall.set(e,r))}getIndirect(e){return e.geometry.indirect}getIndex(e){let{geometry:t,material:r}=e,i=t.index;if(!0===r.wireframe){let e=this.wireframes,r=e.get(t);void 0===r?(r=CY(t),e.set(t,r)):r.version!==C$(t)&&(this.attributes.delete(r),r=CY(t),e.set(t,r)),i=r}return i}dispose(){for(let[e,t]of this._geometryDisposeListeners.entries())e.removeEventListener("dispose",t);this._geometryDisposeListeners.clear()}}class CZ{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,r){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=t/3*r:e.isPoints?this.render.points+=r*t:e.isLineSegments?this.render.lines+=t/2*r:e.isLine?this.render.lines+=r*(t-1):eL("WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class CJ{constructor(e){this.cacheKey=e,this.usedTimes=0}}class C0 extends CJ{constructor(e,t,r){super(e),this.vertexProgram=t,this.fragmentProgram=r}}class C1 extends CJ{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let C2=0;class C3{constructor(e,t,r,i=null,n=null){this.id=C2++,this.code=e,this.stage=t,this.name=r,this.transforms=i,this.attributes=n,this.usedTimes=0}}class C4 extends CX{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){let{backend:r}=this,i=this.get(e);if(this._needsComputeUpdate(e)){let n=i.pipeline;n&&(n.usedTimes--,n.computeProgram.usedTimes--);let a=this.nodes.getForCompute(e),s=this.programs.compute.get(a.computeShader);void 0===s&&(n&&0===n.computeProgram.usedTimes&&this._releaseProgram(n.computeProgram),s=new C3(a.computeShader,"compute",e.name,a.transforms,a.nodeAttributes),this.programs.compute.set(a.computeShader,s),r.createProgram(s));let o=this._getComputeCacheKey(e,s),l=this.caches.get(o);void 0===l&&(n&&0===n.usedTimes&&this._releasePipeline(n),l=this._getComputePipeline(e,s,o,t)),l.usedTimes++,s.usedTimes++,i.version=e.version,i.pipeline=l}return i.pipeline}getForRender(e,t=null){let{backend:r}=this,i=this.get(e);if(this._needsRenderUpdate(e)){let n=i.pipeline;n&&(n.usedTimes--,n.vertexProgram.usedTimes--,n.fragmentProgram.usedTimes--);let a=e.getNodeBuilderState(),s=e.material?e.material.name:"",o=this.programs.vertex.get(a.vertexShader);void 0===o&&(n&&0===n.vertexProgram.usedTimes&&this._releaseProgram(n.vertexProgram),o=new C3(a.vertexShader,"vertex",s),this.programs.vertex.set(a.vertexShader,o),r.createProgram(o));let l=this.programs.fragment.get(a.fragmentShader);void 0===l&&(n&&0===n.fragmentProgram.usedTimes&&this._releaseProgram(n.fragmentProgram),l=new C3(a.fragmentShader,"fragment",s),this.programs.fragment.set(a.fragmentShader,l),r.createProgram(l));let u=this._getRenderCacheKey(e,o,l),c=this.caches.get(u);void 0===c?(n&&0===n.usedTimes&&this._releasePipeline(n),c=this._getRenderPipeline(e,o,l,u,t)):e.pipeline=c,c.usedTimes++,o.usedTimes++,l.usedTimes++,i.pipeline=c}return i.pipeline}delete(e){let t=this.get(e).pipeline;return t&&(t.usedTimes--,0===t.usedTimes&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,0===t.computeProgram.usedTimes&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,0===t.vertexProgram.usedTimes&&this._releaseProgram(t.vertexProgram),0===t.fragmentProgram.usedTimes&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,r,i){r=r||this._getComputeCacheKey(e,t);let n=this.caches.get(r);return void 0===n&&(n=new C1(r,t),this.caches.set(r,n),this.backend.createComputePipeline(n,i)),n}_getRenderPipeline(e,t,r,i,n){i=i||this._getRenderCacheKey(e,t,r);let a=this.caches.get(i);return void 0===a&&(a=new C0(i,t,r),this.caches.set(i,a),e.pipeline=a,this.backend.createRenderPipeline(e,n)),a}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,r){return t.id+","+r.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){let t=e.code,r=e.stage;this.programs[r].delete(t)}_needsComputeUpdate(e){let t=this.get(e);return void 0===t.pipeline||t.version!==e.version}_needsRenderUpdate(e){return void 0===this.get(e).pipeline||this.backend.needsRenderUpdate(e)}}class C5 extends CX{constructor(e,t,r,i,n,a){super(),this.backend=e,this.textures=r,this.pipelines=n,this.attributes=i,this.nodes=t,this.info=a,this.pipelines.bindings=this}getForRender(e){let t=e.getBindings();for(let e of t){let r=this.get(e);void 0===r.bindGroup&&(this._init(e),this.backend.createBindings(e,t,0),r.bindGroup=e)}return t}getForCompute(e){let t=this.nodes.getForCompute(e).bindings;for(let e of t){let r=this.get(e);void 0===r.bindGroup&&(this._init(e),this.backend.createBindings(e,t,0),r.bindGroup=e)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}deleteForCompute(e){for(let t of this.nodes.getForCompute(e).bindings)this.delete(t)}deleteForRender(e){for(let t of e.getBindings())this.delete(t)}_updateBindings(e){for(let t of e)this._update(t,e)}_init(e){for(let t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isSampler)this.textures.updateSampler(t.texture);else if(t.isStorageBuffer){let e=t.attribute,r=e.isIndirectStorageBufferAttribute?4:3;this.attributes.update(e,r)}}_update(e,t){let{backend:r}=this,i=!1,n=!0,a=0,s=0;for(let t of e.bindings)if(!t.isNodeUniformsGroup||!1!==this.nodes.updateGroup(t)){if(t.isStorageBuffer){let e=t.attribute,r=e.isIndirectStorageBufferAttribute?4:3;this.attributes.update(e,r)}if(t.isUniformBuffer)t.update()&&r.updateBinding(t);else if(t.isSampledTexture){let e=t.update(),o=t.texture,l=this.textures.get(o);if(e&&(this.textures.updateTexture(o),t.generation!==l.generation&&(t.generation=l.generation,i=!0,n=!1)),void 0!==r.get(o).externalTexture||l.isDefaultTexture?n=!1:(a=10*a+o.id,s+=o.version),!0===o.isStorageTexture&&!0===o.mipmapsAutoUpdate){let e=this.get(o);!0===t.store?e.needsMipmap=!0:this.textures.needsMipmaps(o)&&!0===e.needsMipmap&&(this.backend.generateMipmaps(o),e.needsMipmap=!1)}}else if(t.isSampler&&t.update()){let e=this.textures.updateSampler(t.texture);t.samplerKey!==e&&(t.samplerKey=e,i=!0,n=!1)}}!0===i&&this.backend.updateBindings(e,t,n?a:0,s)}}function C8(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?e.z-t.z:e.id-t.id}function C6(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function C7(e){return(e.transmission>0||e.transmissionNode&&e.transmissionNode.isNode)&&2===e.side&&!1===e.forceSinglePass}class C9{constructor(e,t,r){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,r),this.lightsArray=[],this.scene=t,this.camera=r,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,r,i,n,a,s){let o=this.renderItems[this.renderItemsIndex];return void 0===o?(o={id:e.id,object:e,geometry:t,material:r,groupOrder:i,renderOrder:e.renderOrder,z:n,group:a,clippingContext:s},this.renderItems[this.renderItemsIndex]=o):(o.id=e.id,o.object=e,o.geometry=t,o.material=r,o.groupOrder=i,o.renderOrder=e.renderOrder,o.z=n,o.group=a,o.clippingContext=s),this.renderItemsIndex++,o}push(e,t,r,i,n,a,s){let o=this.getNextRenderItem(e,t,r,i,n,a,s);!0===e.occlusionTest&&this.occlusionQueryCount++,!0===r.transparent||r.transmission>0||r.transmissionNode&&r.transmissionNode.isNode||r.backdropNode&&r.backdropNode.isNode?(C7(r)&&this.transparentDoublePass.push(o),this.transparent.push(o)):this.opaque.push(o)}unshift(e,t,r,i,n,a,s){let o=this.getNextRenderItem(e,t,r,i,n,a,s);!0===r.transparent||r.transmission>0||r.transmissionNode&&r.transmissionNode.isNode||r.backdropNode&&r.backdropNode.isNode?(C7(r)&&this.transparentDoublePass.unshift(o),this.transparent.unshift(o)):this.opaque.unshift(o)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||C8),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||C6),this.transparent.length>1&&this.transparent.sort(t||C6)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){let t=this.renderItems[e];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.groupOrder=null,t.renderOrder=null,t.z=null,t.group=null,t.clippingContext=null}}}let Re=[];class Rt{constructor(e){this.lighting=e,this.lists=new Cq}get(e,t){let r=this.lists;Re[0]=e,Re[1]=t;let i=r.get(Re);return void 0===i&&(i=new C9(this.lighting,e,t),r.set(Re,i)),Re.length=0,i}dispose(){this.lists=new Cq}}let Rr=0;class Ri{constructor(){this.id=Rr++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new tr,this.scissor=!1,this.scissorValue=new tr,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return Rn(this)}}function Rn(e){let{textures:t,activeCubeFace:r,activeMipmapLevel:i}=e,n=[r,i];for(let e of t)n.push(e.id);return yx(n)}let Ra=[],Rs=new iy,Ro=new ii;class Rl{constructor(){this.chainMaps={}}get(e,t,r=null){let i;if(Ra[0]=e,Ra[1]=t,null===r)i="default";else{let e=r.texture.format,t=r.textures.length;i=`${t}:${e}:${r.samples}:${r.depthBuffer}:${r.stencilBuffer}`}let n=this._getChainMap(i),a=n.get(Ra);return void 0===a&&(a=new Ri,n.set(Ra,a)),Ra.length=0,null!==r&&(a.sampleCount=0===r.samples?1:r.samples),a}getForClear(e=null){return this.get(Rs,Ro,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new Cq)}dispose(){this.chainMaps={}}}let Ru=new e$;class Rc extends CX{constructor(e,t,r){super(),this.renderer=e,this.backend=t,this.info=r}updateRenderTarget(e,t=0){let r=this.get(e),i=0===e.samples?1:e.samples,n=r.depthTextureMips||(r.depthTextureMips={}),a=e.textures,s=this.getSize(a[0]),o=s.width>>t,l=s.height>>t,u=e.depthTexture||n[t],c=!0===e.depthBuffer||!0===e.stencilBuffer,h=!1;void 0===u&&c&&((u=new n2).format=e.stencilBuffer?1027:1026,u.type=e.stencilBuffer?1020:1014,u.image.width=o,u.image.height=l,u.image.depth=s.depth,u.renderTarget=e,u.isArrayTexture=!0===e.multiview&&s.depth>1,n[t]=u),(r.width!==s.width||s.height!==r.height)&&(h=!0,u&&(u.needsUpdate=!0,u.image.width=o,u.image.height=l,u.image.depth=u.isArrayTexture?u.image.depth:1)),r.width=s.width,r.height=s.height,r.textures=a,r.depthTexture=u||null,r.depth=e.depthBuffer,r.stencil=e.stencilBuffer,r.renderTarget=e,r.sampleCount!==i&&(h=!0,u&&(u.needsUpdate=!0),r.sampleCount=i);let d={sampleCount:i};if(!0!==e.isXRRenderTarget){for(let e=0;e<a.length;e++){let t=a[e];h&&(t.needsUpdate=!0),this.updateTexture(t,d)}u&&this.updateTexture(u,d)}!0!==r.initialized&&(r.initialized=!0,r.onDispose=()=>{this._destroyRenderTarget(e)},e.addEventListener("dispose",r.onDispose))}updateTexture(e,t={}){let r=this.get(e);if(!0===r.initialized&&r.version===e.version)return;let i=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,n=this.backend;if(i&&!0===r.initialized&&n.destroyTexture(e),e.isFramebufferTexture){let t=this.renderer.getRenderTarget();t?e.type=t.texture.type:e.type=1009}let{width:a,height:s,depth:o}=this.getSize(e);if(t.width=a,t.height=s,t.depth=o,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,a,s):1,e.isCubeTexture&&e.mipmaps.length>0&&t.levels++,i||!0===e.isStorageTexture||!0===e.isExternalTexture)n.createTexture(e,t),r.generation=e.version;else if(e.version>0){let i=e.image;if(void 0===i)eI("Renderer: Texture marked for update but image is undefined.");else if(!1===i.complete)eI("Renderer: Texture marked for update but image is incomplete.");else{if(e.images){let r=[];for(let t of e.images)r.push(t);t.images=r}else t.image=i;(void 0===r.isDefaultTexture||!0===r.isDefaultTexture)&&(n.createTexture(e,t),r.isDefaultTexture=!1,r.generation=e.version),!0===e.source.dataReady&&n.updateTexture(e,t);let a=!0===e.isStorageTexture&&!1===e.mipmapsAutoUpdate;t.needsMipmaps&&0===e.mipmaps.length&&!a&&n.generateMipmaps(e),e.onUpdate&&e.onUpdate(e)}}else n.createDefaultTexture(e),r.isDefaultTexture=!0,r.generation=e.version;!0!==r.initialized&&(r.initialized=!0,r.generation=e.version,this.info.memory.textures++,e.isVideoTexture&&e2.getTransfer(e.colorSpace)!==eg&&eI("WebGPURenderer: Video textures must use a color space with a sRGB transfer function, e.g. SRGBColorSpace."),r.onDispose=()=>{this._destroyTexture(e)},e.addEventListener("dispose",r.onDispose)),r.version=e.version}updateSampler(e){return this.backend.updateSampler(e)}getSize(e,t=Ru){let r=e.images?e.images[0]:e.image;return r?(void 0!==r.image&&(r=r.image),"undefined"!=typeof HTMLVideoElement&&r instanceof HTMLVideoElement?(t.width=r.videoWidth||1,t.height=r.videoHeight||1,t.depth=1):"undefined"!=typeof VideoFrame&&r instanceof VideoFrame?(t.width=r.displayWidth||1,t.height=r.displayHeight||1,t.depth=1):(t.width=r.width||1,t.height=r.height||1,t.depth=e.isCubeTexture?6:r.depth||1)):t.width=t.height=t.depth=1,t}getMipLevels(e,t,r){return e.mipmaps.length>0?e.mipmaps.length:!0===e.isCompressedTexture?1:Math.floor(Math.log2(Math.max(t,r)))+1}needsMipmaps(e){return!0===e.generateMipmaps||e.mipmaps.length>0}_destroyRenderTarget(e){if(!0===this.has(e)){let t=this.get(e),r=t.textures,i=t.depthTexture;e.removeEventListener("dispose",t.onDispose);for(let e=0;e<r.length;e++)this._destroyTexture(r[e]);i&&this._destroyTexture(i),this.delete(e),this.backend.delete(e)}}_destroyTexture(e){if(!0===this.has(e)){let t=this.get(e);e.removeEventListener("dispose",t.onDispose);let r=t.isDefaultTexture;this.backend.destroyTexture(e,r),this.delete(e),this.info.memory.textures--}}}class Rh extends ry{constructor(e,t,r,i=1){super(e,t,r),this.a=i}set(e,t,r,i=1){return this.a=i,super.set(e,t,r)}copy(e){return void 0!==e.a&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class Rd extends vJ{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getMemberType(e,t){let r,i=this.getNodeType(e),n=e.getStructTypeNode(i);return null!==n?r=n.getMemberType(e,t):(eL(`TSL: Member "${t}" not found in struct "${i}".`),r="float"),r}getHash(){return this.uuid}generate(){return this.name}}let RA=v_(class extends yz{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getElementType(e){return this.hasOutput?this.outputNode.getElementType(e):"void"}getNodeType(e){return this.hasOutput?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.hasOutput?this.outputNode.getMemberType(e,t):"void"}addToStack(e){return!0!==e.isNode?eL("TSL: Invalid node added to stack."):this.nodes.push(e),this}If(e,t){let r=new vm(t);return this._currentCond=bt(e,r),this.addToStack(this._currentCond)}ElseIf(e,t){let r=bt(e,new vm(t));return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new vm(e),this}Switch(e){return this._expressionNode=vg(e),this}Case(...e){let t=[];if(e.length>=2)for(let r=0;r<e.length-1;r++)t.push(this._expressionNode.equal(vg(e[r])));else eL("TSL: Invalid parameter length. Case() requires at least two parameters.");let r=new vm(e[e.length-1]),i=t[0];for(let e=1;e<t.length;e++)i=i.or(t[e]);let n=bt(i,r);return null===this._currentCond?(this._currentCond=n,this.addToStack(this._currentCond)):(this._currentCond.elseNode=n,this._currentCond=n,this)}Default(e){return this.Else(e),this}setup(e){let t=e.getNodeProperties(this),r=0;for(let i of this.getChildren())i.isVarNode&&!0===i.intent&&!0!==i.isAssign(e)||(t["node"+r++]=i);return t.outputNode||null}get hasOutput(){return this.outputNode&&this.outputNode.isNode}build(e,...t){let r,i=vC();vE(this),e.setActiveStack(this);let n=e.buildStage;for(let t of this.nodes)if(!t.isVarNode||!0!==t.intent||!0===t.isAssign(e)){if("setup"===n)t.build(e);else if("analyze"===n)t.build(e,this);else if("generate"===n){let r=e.getDataFromNode(t,"any").stages,i=r&&r[e.shaderStage];if(t.isVarNode&&i&&1===i.length&&i[0]&&i[0].isStackNode)continue;t.build(e,"void")}}return r=this.hasOutput?this.outputNode.build(e,...t):super.build(e,...t),vE(i),e.removeActiveStack(this),r}}).setParameterLength(0,1);class Rp extends yz{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=Object.entries(e).map(([e,t])=>"string"==typeof t?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1}),this.name=t,this.isStructLayoutNode=!0}getLength(){let e=Float32Array.BYTES_PER_ELEMENT,t=0;for(let r of this.membersLayout){let i=r.type,n=(/float|int|uint/.test(i)?1:/vec2/.test(i)?2:/vec3/.test(i)?3:/vec4/.test(i)||/mat2/.test(i)?4:/mat3/.test(i)?12:/mat4/.test(i)?16:void eL("TSL: Unsupported type:",i))*e,a=/float|int|uint/.test(i)?4:/vec2/.test(i)?8:/vec3/.test(i)||/vec4/.test(i)?16:/mat2/.test(i)?8:/mat3/.test(i)?48:/mat4/.test(i)?64:void eL("TSL: Unsupported type:",i),s=t%8,o=s%a,l=s+o;t+=o,0!==l&&8-l<n&&(t+=8-l),t+=n}return 8*Math.ceil(t/8)/e}getMemberType(e,t){let r=this.membersLayout.find(e=>e.name===t);return r?r.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.getStructTypeFromNode(this,this.membersLayout,this.name),e.addInclude(this)}generate(e){return this.getNodeType(e)}}class Rf extends yz{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structTypeNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structTypeNode.getNodeType(e)}getMemberType(e,t){return this.structTypeNode.getMemberType(e,t)}generate(e){let t=e.getVarFromNode(this),r=t.type,i=e.getPropertyName(t);return e.addLineFlowCode(`${i} = ${e.generateStruct(r,this.structTypeNode.membersLayout,this.values)}`,this),t.name}}class Rm extends yz{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){let t=e.getNodeProperties(this);if(void 0===t.membersLayout){let r=this.members,i=[];for(let t=0;t<r.length;t++){let n="m"+t,a=r[t].getNodeType(e);i.push({name:n,type:a,index:t})}t.membersLayout=i,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){let t=e.getOutputStructName(),r=this.members,i=""!==t?t+".":"";for(let t=0;t<r.length;t++){let n=r[t].build(e);e.addLineFlowCode(`${i}m${t} = ${n}`,this)}return t}}let Rg=v_(Rm);function Ry(e,t){for(let r=0;r<e.length;r++)if(e[r].name===t)return r;return -1}let Rv=v_(class extends Rm{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return void 0!==this.outputNodes[e]}get(e){return this.outputNodes[e]}merge(e){return Rv({...this.outputNodes,...e.outputNodes})}setup(e){let t=this.outputNodes,r=e.renderer.getRenderTarget(),i=[],n=r.textures;for(let e in t)i[Ry(n,e)]=vH(t[e]);return this.members=i,super.setup(e)}});class Rx extends yG{static get type(){return"BitcastNode"}constructor(e,t,r=null){super(),this.valueNode=e,this.conversionType=t,this.inputType=r,this.isBitcastNode=!0}getNodeType(e){if(null!==this.inputType){let t=this.valueNode.getNodeType(e),r=e.getTypeLength(t);return e.getTypeFromLength(r,this.conversionType)}return this.conversionType}generate(e){let t=this.getNodeType(e),r="";if(null!==this.inputType){let t=this.valueNode.getNodeType(e);r=1===e.getTypeLength(t)?this.inputType:e.changeComponentType(t,this.inputType)}else r=this.valueNode.getNodeType(e);return`${e.getBitcastMethod(t,r)}( ${this.valueNode.build(e,r)} )`}}let R_=vS(Rx).setParameterLength(2),Rb=vM(([e])=>{let t=e.toUint().mul(0x2c9277b5).add(0xac564b05),r=t.shiftRight(t.shiftRight(28).add(4)).bitXor(t).mul(0x108ef2d9);return r.shiftRight(22).bitXor(r).toFloat().mul(1/0x100000000)}),RS=(e,t)=>_X(xO(4,e.mul(xF(1,e))),t),RT=vM(([e])=>e.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),Rw=vM(([e])=>vz(RT(e.z.add(RT(e.y.mul(1)))),RT(e.z.add(RT(e.x.mul(1)))),RT(e.y.add(RT(e.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),RM=vM(([e,t,r])=>{let i=vz(e).toVar(),n=vI(1.4).toVar(),a=vI(0).toVar(),s=vz(i).toVar();return wQ({start:vI(0),end:vI(3),type:"float",condition:"<="},()=>{let e=vz(Rw(s.mul(2))).toVar();i.addAssign(e.add(r.mul(vI(.1).mul(t)))),s.mulAssign(1.8),n.mulAssign(1.5),i.mulAssign(1.2);let o=vI(RT(i.z.add(RT(i.x.add(RT(i.y)))))).toVar();a.addAssign(o.div(n)),s.addAssign(.14)}),a}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]}),RE=v_(class extends yz{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFn=null,this.global=!0}getNodeType(e){return this.getCandidateFn(e).shaderNode.layout.type}getCandidateFn(e){let t=this.parametersNodes,r=this._candidateFn;if(null===r){let i=null,n=-1;for(let r of this.functionNodes){let a=r.shaderNode.layout;if(null===a)throw Error("FunctionOverloadingNode: FunctionNode must be a layout.");let s=a.inputs;if(t.length===s.length){let a=0;for(let r=0;r<t.length;r++){let i=t[r],n=s[r];i.getNodeType(e)===n.type&&a++}a>n&&(i=r,n=a)}}this._candidateFn=r=i}return r}setup(e){return this.getCandidateFn(e)(...this.parametersNodes)}}),RC=e=>(...t)=>RE(e,...t),RR=xE(0).setGroup(xT).onRenderUpdate(e=>e.time),RN=xE(0).setGroup(xT).onRenderUpdate(e=>e.deltaTime),RP=xE(0,"uint").setGroup(xT).onRenderUpdate(e=>e.frameId),RI=vM(([e,t,r=vF(.5)])=>CP(e.sub(r),t).add(r)),RL=vM(([e,t,r=vF(.5)])=>{let i=e.sub(r),n=i.dot(i),a=n.mul(n).mul(t);return e.add(i.mul(a))}),RD=vM(({position:e=null,horizontal:t=!0,vertical:r=!1})=>{let i;null!==e?((i=SF.toVar())[3][0]=e.x,i[3][1]=e.y,i[3][2]=e.z):i=SF;let n=S_.mul(i);return vp(t)&&(n[0][0]=SF[0].length(),n[0][1]=0,n[0][2]=0),vp(r)&&(n[1][0]=0,n[1][1]=SF[1].length(),n[1][2]=0),n[2][0]=0,n[2][1]=0,n[2][2]=1,Sv.mul(n).mul(SQ)}),RB=vM(([e=null])=>{let t=Mo();return Mo(w9(e)).sub(t).lessThan(0).select(Sl,e)}),RF=v_(class extends yz{static get type(){return"SpriteSheetUVNode"}constructor(e,t=b2(),r=vI(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=r}setup(){let{frameNode:e,uvNode:t,countNode:r}=this,{width:i,height:n}=r,a=e.mod(i.mul(n)).floor(),s=a.mod(i),o=n.sub(a.add(1).div(i).ceil()),l=r.reciprocal(),u=vF(s,o);return t.add(u).mul(l)}}).setParameterLength(3),RO=vM(([e,t=null,r=null,i=vI(1),n=SQ,a=S4])=>{let s=a.abs().normalize();s=s.div(s.dot(vz(1)));let o=n.yz.mul(i),l=n.zx.mul(i),u=n.xy.mul(i),c=e.value,h=null!==t?t.value:c,d=null!==r?r.value:c;return xB(b7(c,o).mul(s.x),b7(h,l).mul(s.y),b7(d,u).mul(s.z))}),RU=new ni,Rk=new e$,Rz=new e$,RV=new e$,Rq=new tF,RG=new e$(0,0,-1),RH=new tr,Rj=new e$,RW=new e$,RX=new tr,RQ=new eX,R$=new ti,RY=Sl.flipX();R$.depthTexture=new n2(1,1);let RK=!1;class RZ extends b8{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||R$.texture,RY),this._reflectorBaseNode=e.reflector||new RJ(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(null===this._depthNode){if(!0!==this._reflectorBaseNode.depth)throw Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=vg(new RZ({defaultTexture:R$.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){let e=new this.constructor(this.reflectorNode);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e._reflectorBaseNode=this._reflectorBaseNode,e}dispose(){super.dispose(),this._reflectorBaseNode.dispose()}}class RJ extends yz{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:r=new t9,resolutionScale:i=1,generateMipmaps:n=!1,bounces:a=!0,depth:s=!1,samples:o=0}=t;this.textureNode=e,this.target=r,this.resolutionScale=i,void 0!==t.resolution&&(eD('ReflectorNode: The "resolution" parameter has been renamed to "resolutionScale".'),this.resolutionScale=t.resolution),this.generateMipmaps=n,this.bounces=a,this.depth=s,this.samples=o,this.updateBeforeType=a?yI.RENDER:yI.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new Map,this.forceUpdate=!1,this.hasOutput=!1}_updateResolution(e,t){let r=this.resolutionScale;t.getDrawingBufferSize(RQ),e.setSize(Math.round(RQ.width*r),Math.round(RQ.height*r))}setup(e){return this._updateResolution(R$,e.renderer),super.setup(e)}dispose(){for(let e of(super.dispose(),this.renderTargets.values()))e.dispose()}getVirtualCamera(e){let t=this.virtualCameras.get(e);return void 0===t&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return void 0===t&&(t=new ti(0,0,{type:1016,samples:this.samples}),!0===this.generateMipmaps&&(t.texture.minFilter=1008,t.texture.generateMipmaps=!0),!0===this.depth&&(t.depthTexture=new n2),this.renderTargets.set(e,t)),t}updateBefore(e){if(!1===this.bounces&&RK)return!1;RK=!0;let{scene:t,camera:r,renderer:i,material:n}=e,{target:a}=this,s=this.getVirtualCamera(r),o=this.getRenderTarget(s);i.getDrawingBufferSize(RQ),this._updateResolution(o,i),Rz.setFromMatrixPosition(a.matrixWorld),RV.setFromMatrixPosition(r.matrixWorld),Rq.extractRotation(a.matrixWorld),Rk.set(0,0,1),Rk.applyMatrix4(Rq),Rj.subVectors(Rz,RV);let l=Rj.dot(Rk)>0,u=!1;if(!0===l&&!1===this.forceUpdate){if(!1===this.hasOutput){RK=!1;return}u=!0}Rj.reflect(Rk).negate(),Rj.add(Rz),Rq.extractRotation(r.matrixWorld),RG.set(0,0,-1),RG.applyMatrix4(Rq),RG.add(RV),RW.subVectors(Rz,RG),RW.reflect(Rk).negate(),RW.add(Rz),s.coordinateSystem=r.coordinateSystem,s.position.copy(Rj),s.up.set(0,1,0),s.up.applyMatrix4(Rq),s.up.reflect(Rk),s.lookAt(RW),s.near=r.near,s.far=r.far,s.updateMatrixWorld(),s.projectionMatrix.copy(r.projectionMatrix),RU.setFromNormalAndCoplanarPoint(Rk,Rz),RU.applyMatrix4(s.matrixWorldInverse),RH.set(RU.normal.x,RU.normal.y,RU.normal.z,RU.constant);let c=s.projectionMatrix;RX.x=(Math.sign(RH.x)+c.elements[8])/c.elements[0],RX.y=(Math.sign(RH.y)+c.elements[9])/c.elements[5],RX.z=-1,RX.w=(1+c.elements[10])/c.elements[14],RH.multiplyScalar(1/RH.dot(RX)),c.elements[2]=RH.x,c.elements[6]=RH.y,c.elements[10]=2001===i.coordinateSystem?RH.z-0:RH.z+1-0,c.elements[14]=RH.w,this.textureNode.value=o.texture,!0===this.depth&&(this.textureNode.getDepthNode().value=o.depthTexture),n.visible=!1;let h=i.getRenderTarget(),d=i.getMRT(),A=i.autoClear;i.setMRT(null),i.setRenderTarget(o),i.autoClear=!0;let p=t.name;t.name=(t.name||"Scene")+" [ Reflector ]",u?(i.clear(),this.hasOutput=!1):(i.render(t,s),this.hasOutput=!0),t.name=p,i.setMRT(d),i.setRenderTarget(h),i.autoClear=A,n.visible=!0,RK=!1,this.forceUpdate=!1}get resolution(){return eD('ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale}set resolution(e){eD('ReflectorNode: The "resolution" property has been renamed to "resolutionScale".'),this.resolutionScale=e}}let R0=new s4(-1,1,1,-1,0,1),R1=new class extends rX{constructor(e=!1){super(),this.setAttribute("position",new rk([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new rk(!1===e?[0,-1,0,1,2,1]:[0,2,0,0,2,0],2))}};class R2 extends r5{constructor(e=null){super(R1,e),this.camera=R0,this.isQuadMesh=!0}async renderAsync(e){eD('QuadMesh: "renderAsync()" has been deprecated. Use "render()" and "await renderer.init();" when creating the renderer.'),await e.init(),e.render(this,R0)}render(e){e.render(this,R0)}}let R3=new eX;class R4 extends b8{static get type(){return"RTTNode"}constructor(e,t=null,r=null,i={type:1016}){const n=new ti(t,r,i);super(n.texture,b2()),this.isRTTNode=!0,this.node=e,this.width=t,this.height=r,this.pixelRatio=1,this.renderTarget=n,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new R2(new Mb),this.updateBeforeType=yI.RENDER}get autoResize(){return null===this.width}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;let r=e*this.pixelRatio,i=t*this.pixelRatio;this.renderTarget.setSize(r,i),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(!1===this.textureNeedsUpdate&&!1===this.autoUpdate)return;if(this.textureNeedsUpdate=!1,!0===this.autoResize){let t=e.getPixelRatio(),r=e.getSize(R3),i=Math.floor(r.width*t),n=Math.floor(r.height*t);(i!==this.renderTarget.width||n!==this.renderTarget.height)&&(this.renderTarget.setSize(i,n),this.textureNeedsUpdate=!0)}let t="RTT";this.node.name&&(t=this.node.name+" [ "+t+" ]"),this._quadMesh.material.fragmentNode=this._rttNode,this._quadMesh.name=t;let r=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(r)}clone(){let e=new b8(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}let R5=(e,...t)=>vg(new R4(vg(e),...t)),R8=vM(([e,t,r],i)=>{let n;n=2001===i.renderer.coordinateSystem?vH(vz(e=vF(e.x,e.y.oneMinus()).mul(2).sub(1),t),1):vH(vz(e.x,e.y.oneMinus(),t).mul(2).sub(1),1);let a=vH(r.mul(n));return a.xyz.div(a.w)}),R6=vM(([e,t])=>{let r=t.mul(vH(e,1)),i=r.xy.div(r.w).mul(.5).add(.5).toVar();return vF(i.x,i.y.oneMinus())}),R7=vM(([e,t,r])=>{let i=b3(b9(t)),n=vO(e.mul(i)).toVar(),a=b9(t,n).toVar(),s=b9(t,n.sub(vO(2,0))).toVar(),o=b9(t,n.sub(vO(1,0))).toVar(),l=b9(t,n.add(vO(1,0))).toVar(),u=b9(t,n.add(vO(2,0))).toVar(),c=b9(t,n.add(vO(0,2))).toVar(),h=b9(t,n.add(vO(0,1))).toVar(),d=b9(t,n.sub(vO(0,1))).toVar(),A=b9(t,n.sub(vO(0,2))).toVar(),p=_T(xF(vI(2).mul(o).sub(s),a)).toVar(),f=_T(xF(vI(2).mul(l).sub(u),a)).toVar(),m=_T(xF(vI(2).mul(h).sub(c),a)).toVar(),g=_T(xF(vI(2).mul(d).sub(A),a)).toVar(),y=R8(e,a,r).toVar();return _m(_W(p.lessThan(f).select(y.sub(R8(e.sub(vF(vI(1).div(i.x),0)),o,r)),y.negate().add(R8(e.add(vF(vI(1).div(i.x),0)),l,r))),m.lessThan(g).select(y.sub(R8(e.add(vF(0,vI(1).div(i.y))),h,r)),y.negate().add(R8(e.sub(vF(0,vI(1).div(i.y))),d,r)))))}),R9=vM(([e])=>_g(vI(52.9829189).mul(_g(_j(e,vF(.06711056,.00583715)))))).setLayout({name:"interleavedGradientNoise",type:"float",inputs:[{name:"position",type:"vec2"}]});class Ne extends yz{static get type(){return"SampleNode"}constructor(e,t=null){super(),this.callback=e,this.uvNode=t,this.isSampleNode=!0}setup(){return this.sample(b2())}sample(e){return this.callback(e)}}class Nt extends yz{static get type(){return"EventNode"}constructor(e,t){super("void"),this.eventType=e,this.callback=t,e===Nt.OBJECT?this.updateType=yI.OBJECT:e===Nt.MATERIAL?this.updateType=yI.RENDER:e===Nt.BEFORE_OBJECT?this.updateBeforeType=yI.OBJECT:e===Nt.BEFORE_MATERIAL&&(this.updateBeforeType=yI.RENDER)}update(e){this.callback(e)}updateBefore(e){this.callback(e)}}Nt.OBJECT="object",Nt.MATERIAL="material",Nt.BEFORE_OBJECT="beforeObject",Nt.BEFORE_MATERIAL="beforeMaterial";let Nr=(e,t)=>vg(new Nt(e,t)).toStack();class Ni extends i1{constructor(e,t,r=Float32Array){super(ArrayBuffer.isView(e)?e:new r(e*t),t),this.isStorageInstancedBufferAttribute=!0}}class Nn extends rN{constructor(e,t,r=Float32Array){super(ArrayBuffer.isView(e)?e:new r(e*t),t),this.isStorageBufferAttribute=!0}}let Na=vb(class extends yz{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}),Ns=new tW,No=new tF;class Nl extends yz{static get type(){return"SceneNode"}constructor(e=Nl.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){let t,r=this.scope,i=null!==this.scene?this.scene:e.scene;return r===Nl.BACKGROUND_BLURRINESS?t=Tx("backgroundBlurriness","float",i):r===Nl.BACKGROUND_INTENSITY?t=Tx("backgroundIntensity","float",i):r===Nl.BACKGROUND_ROTATION?t=xE("mat4").setName("backgroundRotation").setGroup(xT).onRenderUpdate(()=>{let e=i.background;return null!==e&&e.isTexture&&300!==e.mapping?(Ns.copy(i.backgroundRotation),Ns.x*=-1,Ns.y*=-1,Ns.z*=-1,No.makeRotationFromEuler(Ns)):No.identity(),No}):eL("SceneNode: Unknown scope:",r),t}}Nl.BACKGROUND_BLURRINESS="backgroundBlurriness",Nl.BACKGROUND_INTENSITY="backgroundIntensity",Nl.BACKGROUND_ROTATION="backgroundRotation";let Nu=vb(Nl,Nl.BACKGROUND_BLURRINESS),Nc=vb(Nl,Nl.BACKGROUND_INTENSITY),Nh=vb(Nl,Nl.BACKGROUND_ROTATION),Nd=v_(class extends b8{static get type(){return"StorageTextureNode"}constructor(e,t,r=null){super(e,t),this.storeNode=r,this.mipLevel=0,this.isStorageTextureNode=!0,this.access=yL.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);let t=e.getNodeProperties(this);return t.storeNode=this.storeNode,t}setAccess(e){return this.access=e,this}setMipLevel(e){return this.mipLevel=e,this}generate(e,t){return null!==this.storeNode?this.generateStore(e):super.generate(e,t)}toReadWrite(){return this.setAccess(yL.READ_WRITE)}toReadOnly(){return this.setAccess(yL.READ_ONLY)}toWriteOnly(){return this.setAccess(yL.WRITE_ONLY)}generateStore(e){let{uvNode:t,storeNode:r,depthNode:i}=e.getNodeProperties(this),n=super.generate(e,"property"),a=t.build(e,!0===this.value.is3DTexture?"uvec3":"uvec2"),s=r.build(e,"vec4"),o=i?i.build(e,"int"):null,l=e.generateTextureStore(e,n,a,o,s);e.addLineFlowCode(l,this)}clone(){let e=super.clone();return e.storeNode=this.storeNode,e.mipLevel=this.mipLevel,e}}).setParameterLength(1,3),NA=vM(({texture:e,uv:t})=>{let r=vz().toVar();return vR(t.x.lessThan(1e-4),()=>{r.assign(vz(1,0,0))}).ElseIf(t.y.lessThan(1e-4),()=>{r.assign(vz(0,1,0))}).ElseIf(t.z.lessThan(1e-4),()=>{r.assign(vz(0,0,1))}).ElseIf(t.x.greaterThan(.9999),()=>{r.assign(vz(-1,0,0))}).ElseIf(t.y.greaterThan(.9999),()=>{r.assign(vz(0,-1,0))}).ElseIf(t.z.greaterThan(.9999),()=>{r.assign(vz(0,0,-1))}).Else(()=>{let i=e.sample(t.add(vz(-.01,0,0))).r.sub(e.sample(t.add(vz(.01,0,0))).r),n=e.sample(t.add(vz(0,-.01,0))).r.sub(e.sample(t.add(vz(0,.01,0))).r),a=e.sample(t.add(vz(0,0,-.01))).r.sub(e.sample(t.add(vz(0,0,.01))).r);r.assign(vz(i,n,a))}),r.normalize()}),Np=v_(class extends b8{static get type(){return"Texture3DNode"}constructor(e,t=null,r=null){super(e,t,r),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return vz(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){let r=this.value;return e.isFlipY()&&(!0===r.isRenderTargetTexture||!0===r.isFramebufferTexture)&&(t=this.sampler?t.flipY():t.setY(vL(b3(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,!0===this.sampler?"vec3":"ivec3")}generateOffset(e,t){return t.build(e,"ivec3")}normal(e){return NA({texture:this,uv:e})}}).setParameterLength(1,3);class Nf extends Tv{static get type(){return"UserDataNode"}constructor(e,t,r=null){super(e,t,r),this.userData=r}updateReference(e){return this.reference=null!==this.userData?this.userData:e.object.userData,this.reference}}let Nm=new WeakMap;function Ng(e){let t=Nm.get(e);return void 0===t&&(t={},Nm.set(e,t)),t}function Ny(e,t=0){let r=Ng(e),i=r[t];return void 0===i&&(r[t]=i=new tF,r[t].copy(e.matrixWorld)),i}let Nv=vb(class extends yG{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=yI.OBJECT,this.updateAfterType=yI.OBJECT,this.previousModelWorldMatrix=xE(new tF),this.previousProjectionMatrix=xE(new tF).setGroup(xT),this.previousCameraViewMatrix=xE(new tF)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:r}){let i=Ny(r);this.previousModelWorldMatrix.value.copy(i);let n=Ng(t);n.frameId!==e&&(n.frameId=e,void 0===n.previousProjectionMatrix?(n.previousProjectionMatrix=new tF,n.previousCameraViewMatrix=new tF,n.currentProjectionMatrix=new tF,n.currentCameraViewMatrix=new tF,n.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),n.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(n.previousProjectionMatrix.copy(n.currentProjectionMatrix),n.previousCameraViewMatrix.copy(n.currentCameraViewMatrix)),n.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),n.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(n.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(n.previousCameraViewMatrix))}updateAfter({object:e}){Ny(e).copy(e.matrixWorld)}setup(){let e=null===this.projectionMatrix?Sv:xE(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),r=e.mul(SG).mul(SQ),i=this.previousProjectionMatrix.mul(t).mul(S$);return xF(r.xy.div(r.w),i.xy.div(i.w))}}),Nx=vM(([e])=>NT(e.rgb)),N_=vM(([e,t=vI(1)])=>t.mix(NT(e.rgb),e.rgb)),Nb=vM(([e,t=vI(1)])=>{let r=xB(e.r,e.g,e.b).div(3),i=e.r.max(e.g.max(e.b)),n=i.sub(r).mul(t).mul(-3);return _0(e.rgb,i,n)}),NS=vM(([e,t=vI(1)])=>{let r=vz(.57735,.57735,.57735),i=t.cos();return vz(e.rgb.mul(i).add(r.cross(e.rgb).mul(t.sin()).add(r.mul(_j(r,e.rgb).mul(i.oneMinus())))))}),NT=(e,t=vz(e2.getLuminanceCoefficients(new e$)))=>_j(e,t),Nw=vM(([e,t=vz(1),r=vz(0),i=vz(1),n=vI(1),a=vz(e2.getLuminanceCoefficients(new e$,ef))])=>{let s=e.rgb.dot(vz(a)),o=_z(e.rgb.mul(t).add(r),0).toVar(),l=o.pow(i).toVar();return vR(o.r.greaterThan(0),()=>{o.r.assign(l.r)}),vR(o.g.greaterThan(0),()=>{o.g.assign(l.g)}),vR(o.b.greaterThan(0),()=>{o.b.assign(l.b)}),o.assign(s.add(o.sub(s).mul(n))),vH(o.rgb,e.a)}),NM=v_(class extends yG{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){let{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}).setParameterLength(2),NE=new eX;class NC extends b8{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class NR extends NC{static get type(){return"PassMultipleTextureNode"}constructor(e,t,r=!1){super(e,null),this.textureName=t,this.previousTexture=r}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){let e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.offsetNode=this.offsetNode,e}}class NN extends yG{static get type(){return"PassNode"}constructor(e,t,r,i={}){super("vec4"),this.scope=e,this.scene=t,this.camera=r,this.options=i,this._pixelRatio=1,this._width=1,this._height=1;const n=new n2;n.isRenderTargetTexture=!0,n.name="depth";const a=new ti(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:1016,...i});a.texture.name="output",a.depthTexture=n,this.renderTarget=a,this._textures={output:a.texture,depth:n},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=xE(0),this._cameraFar=xE(0),this._mrt=null,this._layers=null,this._resolutionScale=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=yI.FRAME,this.global=!0}setResolutionScale(e){return this._resolutionScale=e,this}getResolutionScale(){return this._resolutionScale}setResolution(e){return eI("PassNode: .setResolution() is deprecated. Use .setResolutionScale() instead."),this.setResolutionScale(e)}getResolution(){return eI("PassNode: .getResolution() is deprecated. Use .getResolutionScale() instead."),this.getResolutionScale()}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return void 0===t&&((t=this.renderTarget.texture.clone()).name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return void 0===t&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){let t=this._previousTextures[e];if(void 0!==t){let r=this._textures[e],i=this.renderTarget.textures.indexOf(r);this.renderTarget.textures[i]=t,this._textures[e]=t,this._previousTextures[e]=r,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return void 0===t&&((t=vg(new NR(this,e))).updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return void 0===t&&(void 0===this._textureNodes[e]&&this.getTextureNode(e),(t=vg(new NR(this,e,!0))).updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(void 0===t){let r=this._cameraNear,i=this._cameraFar;this._viewZNodes[e]=t=Mi(this.getTextureNode(e),r,i)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(void 0===t){let r=this._cameraNear,i=this._cameraFar,n=this.getViewZNode(e);this._linearDepthNodes[e]=t=Mt(n,r,i)}return t}async compileAsync(e){let t=e.getRenderTarget(),r=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(t),e.setMRT(r)}setup({renderer:e}){return this.renderTarget.samples=void 0===this.options.samples?e.samples:this.options.samples,this.renderTarget.texture.type=e.getColorBufferType(),this.scope===NN.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){let t,r,{renderer:i}=e,{scene:n}=this,a=i.getOutputRenderTarget();a&&!0===a.isXRRenderTarget?(r=1,t=i.xr.getCamera(),i.xr.updateCamera(t),NE.set(a.width,a.height)):(t=this.camera,r=i.getPixelRatio(),i.getSize(NE)),this._pixelRatio=r,this.setSize(NE.width,NE.height);let s=i.getRenderTarget(),o=i.getMRT(),l=i.autoClear,u=t.layers.mask;for(let e in this._cameraNear.value=t.near,this._cameraFar.value=t.far,null!==this._layers&&(t.layers.mask=this._layers.mask),this._previousTextures)this.toggleTexture(e);i.setRenderTarget(this.renderTarget),i.setMRT(this._mrt),i.autoClear=!0;let c=n.name;n.name=this.name?this.name:n.name,i.render(n,t),n.name=c,i.setRenderTarget(s),i.setMRT(o),i.autoClear=l,t.layers.mask=u}setSize(e,t){this._width=e,this._height=t;let r=Math.floor(this._width*this._pixelRatio*this._resolutionScale),i=Math.floor(this._height*this._pixelRatio*this._resolutionScale);this.renderTarget.setSize(r,i),null!==this._scissor&&this.renderTarget.scissor.copy(this._scissor),null!==this._viewport&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,t,r,i){null===e?this._scissor=null:(null===this._scissor&&(this._scissor=new tr),e.isVector4?this._scissor.copy(e):this._scissor.set(e,t,r,i),this._scissor.multiplyScalar(this._pixelRatio*this._resolutionScale).floor())}setViewport(e,t,r,i){null===e?this._viewport=null:(null===this._viewport&&(this._viewport=new tr),e.isVector4?this._viewport.copy(e):this._viewport.set(e,t,r,i),this._viewport.multiplyScalar(this._pixelRatio*this._resolutionScale).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}NN.COLOR="color",NN.DEPTH="depth";class NP extends NN{static get type(){return"ToonOutlinePassNode"}constructor(e,t,r,i,n){super(NN.COLOR,e,t),this.colorNode=r,this.thicknessNode=i,this.alphaNode=n,this._materialCache=new WeakMap,this.name="Outline Pass"}updateBefore(e){let{renderer:t}=e,r=t.getRenderObjectFunction();t.setRenderObjectFunction((e,r,i,n,a,s,o,l)=>{if((a.isMeshToonMaterial||a.isMeshToonNodeMaterial)&&!1===a.wireframe){let u=this._getOutlineMaterial(a);t.renderObject(e,r,i,n,u,s,o,l)}t.renderObject(e,r,i,n,a,s,o,l)}),super.updateBefore(e),t.setRenderObjectFunction(r)}_createMaterial(){let e=new Mb;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=1;let t=S4.negate(),r=Sv.mul(SG),i=vI(1),n=r.mul(vH(SQ,1)),a=r.mul(vH(SQ.add(t),1)),s=_m(n.sub(a));return e.vertexNode=n.add(s.mul(this.thicknessNode).mul(n.w).mul(i)),e.colorNode=vH(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return void 0===t&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}let NI=vM(([e,t])=>e.mul(t).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),NL=vM(([e,t])=>(e=e.mul(t)).div(e.add(1)).clamp()).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),ND=vM(([e,t])=>{let r=(e=(e=e.mul(t)).sub(.004).max(0)).mul(e.mul(6.2).add(.5)),i=e.mul(e.mul(6.2).add(1.7)).add(.06);return r.div(i).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),NB=vM(([e])=>{let t=e.mul(e.add(.0245786)).sub(90537e-9),r=e.mul(e.add(.432951).mul(.983729)).add(.238081);return t.div(r)}),NF=vM(([e,t])=>{let r=v$(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=v$(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return e=e.mul(t).div(.6),e=NB(e=r.mul(e)),(e=i.mul(e)).clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),NO=v$(vz(1.6605,-.1246,-.0182),vz(-.5876,1.1329,-.1006),vz(-.0728,-.0083,1.1187)),NU=v$(vz(.6274,.0691,.0164),vz(.3293,.9195,.088),vz(.0433,.0113,.8956)),Nk=vM(([e])=>{let t=vz(e).toVar(),r=vz(t.mul(t)).toVar(),i=vz(r.mul(r)).toVar();return vI(15.5).mul(i.mul(r)).sub(xO(40.14,i.mul(t))).add(xO(31.96,i).sub(xO(6.868,r.mul(t))).add(xO(.4298,r).add(xO(.1191,t).sub(.00232))))}),Nz=vM(([e,t])=>{let r=vz(e).toVar(),i=v$(vz(.856627153315983,.137318972929847,.11189821299995),vz(.0951212405381588,.761241990602591,.0767994186031903),vz(.0482516061458583,.101439036467562,.811302368396859)),n=v$(vz(1.1271005818144368,-.1413297634984383,-.14132976349843826),vz(-.11060664309660323,1.157823702216272,-.11060664309660294),vz(-.016493938717834573,-.016493938717834257,1.2519364065950405)),a=vI(-12.47393),s=vI(4.026069);return r.mulAssign(t),r.assign(NU.mul(r)),r.assign(i.mul(r)),r.assign(_z(r,1e-10)),r.assign(_h(r)),r.assign(r.sub(a).div(s.sub(a))),r.assign(_1(r,0,1)),r.assign(Nk(r)),r.assign(n.mul(r)),r.assign(_X(_z(vz(0),r),vz(2.2))),r.assign(NO.mul(r)),r.assign(_1(r,0,1)),r}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),NV=vM(([e,t])=>{let r=vI(.76),i=vI(.15),n=_k((e=e.mul(t)).r,_k(e.g,e.b)),a=bt(n.lessThan(.08),n.sub(xO(6.25,n.mul(n))),.04);e.subAssign(a);let s=_z(e.r,_z(e.g,e.b));vR(s.lessThan(r),()=>e);let o=xF(1,r),l=xF(1,o.mul(o).div(s.add(o.sub(r))));e.mulAssign(l.div(s));let u=xF(1,xU(1,i.mul(s.sub(l)).add(1)));return _0(e,vz(l),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class Nq extends yz{static get type(){return"CodeNode"}constructor(e="",t=[],r=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=r}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){for(let t of this.getIncludes(e))t.build(e);let t=e.getCodeFromNode(this,this.getNodeType(e));return t.code=this.code,t.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}let NG=v_(Nq).setParameterLength(1,3);class NH extends Nq{static get type(){return"FunctionNode"}constructor(e="",t=[],r=""){super(e,t,r)}getNodeType(e){return this.getNodeFunction(e).type}getMemberType(e,t){let r=this.getNodeType(e);return e.getStructTypeNode(r).getMemberType(e,t)}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){let t=e.getDataFromNode(this),r=t.nodeFunction;return void 0===r&&(t.nodeFunction=r=e.parser.parseFunction(this.code)),r}generate(e,t){super.generate(e);let r=this.getNodeFunction(e),i=r.name,n=r.type,a=e.getCodeFromNode(this,n);""!==i&&(a.name=i);let s=e.getPropertyName(a);return(a.code=this.getNodeFunction(e).getCode(s)+"\n","property"===t)?s:e.format(`${s}()`,n,t)}}let Nj=(e,t=[],r="")=>{for(let e=0;e<t.length;e++){let r=t[e];"function"==typeof r&&(t[e]=r.functionNode)}let i=vg(new NH(e,t,r)),n=(...e)=>i.call(...e);return n.functionNode=i,n},NW=v_(class extends yz{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new eB,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return null!==this.outputType}set value(e){this._value!==e&&(this._cache&&"URL"===this.inputType&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){let e=this.value;if(e&&null===this._cache&&"URL"===this.inputType&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&null!==e.value&&void 0!==e.value&&(("URL"===this.inputType||"String"===this.inputType)&&"string"==typeof e.value||"Number"===this.inputType&&"number"==typeof e.value||"Vector2"===this.inputType&&e.value.isVector2||"Vector3"===this.inputType&&e.value.isVector3||"Vector4"===this.inputType&&e.value.isVector4||"Color"===this.inputType&&e.value.isColor||"Matrix3"===this.inputType&&e.value.isMatrix3||"Matrix4"===this.inputType&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:vI()}serialize(e){super.serialize(e),null!==this.value?"ArrayBuffer"===this.inputType?e.value=yR(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;null!==e.value&&(t="ArrayBuffer"===e.inputType?yN(e.value):"Texture"===e.inputType?e.meta.textures[e.value]:e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}).setParameterLength(1);class NX extends Map{get(e,t=null,...r){if(this.has(e))return super.get(e);if(null!==t){let i=t(...r);return this.set(e,i),i}}}class NQ{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){let t=this.parameters[e];return t?t.getValue():null}}let N$=new NX,NY=v_(class extends yz{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new NX,this._output=NW(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(let t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(let t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){let r=this._outputs;return void 0===r[e]?r[e]=NW(t):r[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){let r=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),r[e]=t,r[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),r[e]=t,r[e].events.addEventListener("refresh",this.onRefresh)):void 0===r[e]?(r[e]=NW(t),r[e].events.addEventListener("refresh",this.onRefresh)):r[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(let e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){let r=this.getObject()[e];if("function"==typeof r)return r(...t)}async callAsync(e,...t){let r=this.getObject()[e];if("function"==typeof r)return"AsyncFunction"===r.constructor.name?await r(...t):r(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){null!==e?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),null!==this._object)return this._object;let e=()=>this.refresh(),t=(e,t)=>this.setOutput(e,t),r=new NQ(this),i=N$.get("THREE"),n=N$.get("TSL"),a=this.getMethod(),s=[r,this._local,N$,e,t,i,n];this._object=a(...s);let o=this._object.layout;if(o&&(!1===o.cache&&this._local.clear(),this._output.outputType=o.outputType||null,Array.isArray(o.elements)))for(let e of o.elements){let t=e.id||e.name;e.inputType&&(void 0===this.getParameter(t)&&this.setParameter(t,null),this.getParameter(t).inputType=e.inputType),e.outputType&&(void 0===this.getOutput(t)&&this.setOutput(t,null),this.getOutput(t).outputType=e.outputType)}return this._object}deserialize(e){for(let t in super.deserialize(e),this.parameters){let e=this.parameters[t];e.isScriptableNode&&(e=e.getDefaultOutput()),e.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){let e=this.getDefaultOutput().value;return e&&e.isNode?e:vI()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),null!==this._method)return this._method;let e="layout, init, main, dispose",t="var "+e+"; var output = {};\n"+this.codeNode.code+"\nreturn { ...output, "+e+" };";return this._method=Function("parameters","local","global","refresh","setOutput","THREE","TSL",t),this._method}dispose(){null!==this._method&&(this._object&&"function"==typeof this._object.dispose&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){let t=[y_(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(let r in this.parameters)t.push(this.parameters[r].getCacheKey(e));return yx(t)}set needsUpdate(e){!0===e&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return null===this.codeNode||(!0===this._needsOutputUpdate&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value),this}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}).setParameterLength(1,2);function NK(e){let t,r=e.context.getViewZ;return void 0!==r&&(t=r(this)),(t||SZ.z).negate()}let NZ=vM(([e,t],r)=>_4(e,t,NK(r))),NJ=vM(([e],t)=>{let r=NK(t);return e.mul(e,r,r).negate().exp().oneMinus()}),N0=vM(([e,t])=>vH(t.toFloat().mix(xc.rgb,e.toVec3()),xc.a)),N1=null,N2=null,N3=v_(class extends yz{static get type(){return"RangeNode"}constructor(e=vI(),t=vI()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){let t=this.getConstNode(this.minNode),r=this.getConstNode(this.maxNode),i=e.getTypeLength(yM(t.value)),n=e.getTypeLength(yM(r.value));return i>n?i:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}getConstNode(e){let t=null;if(e.traverse(e=>{!0===e.isConstNode&&(t=e)}),null===t)throw Error('THREE.TSL: No "ConstNode" found in node graph.');return t}setup(e){let t=e.object,r=null;if(t.count>1){let i=this.getConstNode(this.minNode),n=this.getConstNode(this.maxNode),a=i.value,s=n.value,o=e.getTypeLength(yM(a)),l=e.getTypeLength(yM(s));N1=N1||new tr,N2=N2||new tr,N1.setScalar(0),N2.setScalar(0),1===o?N1.setScalar(a):a.isColor?N1.set(a.r,a.g,a.b,1):N1.set(a.x,a.y,a.z||0,a.w||0),1===l?N2.setScalar(s):s.isColor?N2.set(s.r,s.g,s.b,1):N2.set(s.x,s.y,s.z||0,s.w||0);let u=4*t.count,c=new Float32Array(u);for(let e=0;e<u;e++){let t=e%4,r=N1.getComponent(t),i=N2.getComponent(t);c[e]=eW.lerp(r,i,Math.random())}let h=this.getNodeType(e);if(t.count<=4096)r=St(c,"vec4",t.count).element(wI).convert(h);else{let t=new i1(c,4);e.geometry.setAttribute("__range"+this.id,t),r=bI(t).convert(h)}}else r=vI(0);return r}}).setParameterLength(2);class N4 extends yz{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){let r=this.getBuiltinName(e),i=this.getNodeType(e);return"compute"===e.shaderStage?e.format(r,i,t):(eI(`ComputeBuiltinNode: Compute built-in value ${r} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(i))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}let N5=(e,t)=>vg(new N4(e,t)),N8=N5("numWorkgroups","uvec3"),N6=N5("workgroupId","uvec3"),N7=N5("globalId","uvec3"),N9=N5("localId","uvec3"),Pe=N5("subgroupSize","uint"),Pt=v_(class extends yz{constructor(e){super(),this.scope=e}generate(e){let{scope:t}=this,{renderer:r}=e;!0===r.backend.isWebGLBackend?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}});class Pr extends yV{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let r,i=e.context.assign;if(r=super.generate(e),!0!==i){let i=this.getNodeType(e);r=e.format(r,i,t)}return r}}class Pi extends yz{constructor(e,t,r=0){super(t),this.bufferType=t,this.bufferCount=r,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e,this.name=""}setName(e){return this.name=e,this}label(e){return eI('TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return vg(new Pr(this,e))}generate(e){let t=""!==this.name?this.name:`${this.scope}Array_${this.id}`;return e.getScopedArray(t,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}class Pn extends yz{static get type(){return"AtomicFunctionNode"}constructor(e,t,r){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=r,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){let t=e.getNodeProperties(this),r=t.parents,i=this.method,n=this.getNodeType(e),a=this.getInputType(e),s=this.pointerNode,o=this.valueNode,l=[];l.push(`&${s.build(e,a)}`),null!==o&&l.push(o.build(e,a));let u=`${e.getMethod(i,n)}( ${l.join(", ")} )`;if(!(r&&1===r.length&&!0===r[0].isStackNode))return void 0===t.constNode&&(t.constNode=bj(u,n).toConst()),t.constNode.build(e);e.addLineFlowCode(u,this)}}Pn.ATOMIC_LOAD="atomicLoad",Pn.ATOMIC_STORE="atomicStore",Pn.ATOMIC_ADD="atomicAdd",Pn.ATOMIC_SUB="atomicSub",Pn.ATOMIC_MAX="atomicMax",Pn.ATOMIC_MIN="atomicMin",Pn.ATOMIC_AND="atomicAnd",Pn.ATOMIC_OR="atomicOr",Pn.ATOMIC_XOR="atomicXor";let Pa=v_(Pn),Ps=(e,t,r)=>Pa(e,t,r).toStack();class Po extends yG{static get type(){return"SubgroupFunctionNode"}constructor(e,t=null,r=null){super(),this.method=e,this.aNode=t,this.bNode=r}getInputType(e){let t=this.aNode?this.aNode.getNodeType(e):null,r=this.bNode?this.bNode.getNodeType(e):null;return(e.isMatrix(t)?0:e.getTypeLength(t))>(e.isMatrix(r)?0:e.getTypeLength(r))?t:r}getNodeType(e){let t=this.method;return t===Po.SUBGROUP_ELECT?"bool":t===Po.SUBGROUP_BALLOT?"uvec4":this.getInputType(e)}generate(e,t){let r=this.method,i=this.getNodeType(e),n=this.getInputType(e),a=this.aNode,s=this.bNode,o=[];if(r===Po.SUBGROUP_BROADCAST||r===Po.SUBGROUP_SHUFFLE||r===Po.QUAD_BROADCAST){let t=s.getNodeType(e);o.push(a.build(e,i),s.build(e,"float"===t?"int":i))}else r===Po.SUBGROUP_SHUFFLE_XOR||r===Po.SUBGROUP_SHUFFLE_DOWN||r===Po.SUBGROUP_SHUFFLE_UP?o.push(a.build(e,i),s.build(e,"uint")):(null!==a&&o.push(a.build(e,n)),null!==s&&o.push(s.build(e,n)));let l=0===o.length?"()":`( ${o.join(", ")} )`;return e.format(`${e.getMethod(r,i)}${l}`,i,t)}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Po.SUBGROUP_ELECT="subgroupElect",Po.SUBGROUP_BALLOT="subgroupBallot",Po.SUBGROUP_ADD="subgroupAdd",Po.SUBGROUP_INCLUSIVE_ADD="subgroupInclusiveAdd",Po.SUBGROUP_EXCLUSIVE_AND="subgroupExclusiveAdd",Po.SUBGROUP_MUL="subgroupMul",Po.SUBGROUP_INCLUSIVE_MUL="subgroupInclusiveMul",Po.SUBGROUP_EXCLUSIVE_MUL="subgroupExclusiveMul",Po.SUBGROUP_AND="subgroupAnd",Po.SUBGROUP_OR="subgroupOr",Po.SUBGROUP_XOR="subgroupXor",Po.SUBGROUP_MIN="subgroupMin",Po.SUBGROUP_MAX="subgroupMax",Po.SUBGROUP_ALL="subgroupAll",Po.SUBGROUP_ANY="subgroupAny",Po.SUBGROUP_BROADCAST_FIRST="subgroupBroadcastFirst",Po.QUAD_SWAP_X="quadSwapX",Po.QUAD_SWAP_Y="quadSwapY",Po.QUAD_SWAP_DIAGONAL="quadSwapDiagonal",Po.SUBGROUP_BROADCAST="subgroupBroadcast",Po.SUBGROUP_SHUFFLE="subgroupShuffle",Po.SUBGROUP_SHUFFLE_XOR="subgroupShuffleXor",Po.SUBGROUP_SHUFFLE_UP="subgroupShuffleUp",Po.SUBGROUP_SHUFFLE_DOWN="subgroupShuffleDown",Po.QUAD_BROADCAST="quadBroadcast";let Pl=vS(Po,Po.SUBGROUP_ELECT).setParameterLength(0),Pu=vS(Po,Po.SUBGROUP_BALLOT).setParameterLength(1),Pc=vS(Po,Po.SUBGROUP_ADD).setParameterLength(1),Ph=vS(Po,Po.SUBGROUP_INCLUSIVE_ADD).setParameterLength(1),Pd=vS(Po,Po.SUBGROUP_EXCLUSIVE_AND).setParameterLength(1),PA=vS(Po,Po.SUBGROUP_MUL).setParameterLength(1),Pp=vS(Po,Po.SUBGROUP_INCLUSIVE_MUL).setParameterLength(1),Pf=vS(Po,Po.SUBGROUP_EXCLUSIVE_MUL).setParameterLength(1),Pm=vS(Po,Po.SUBGROUP_AND).setParameterLength(1),Pg=vS(Po,Po.SUBGROUP_OR).setParameterLength(1),Py=vS(Po,Po.SUBGROUP_XOR).setParameterLength(1),Pv=vS(Po,Po.SUBGROUP_MIN).setParameterLength(1),Px=vS(Po,Po.SUBGROUP_MAX).setParameterLength(1),P_=vS(Po,Po.SUBGROUP_ALL).setParameterLength(0),Pb=vS(Po,Po.SUBGROUP_ANY).setParameterLength(0),PS=vS(Po,Po.SUBGROUP_BROADCAST_FIRST).setParameterLength(2),PT=vS(Po,Po.QUAD_SWAP_X).setParameterLength(1),Pw=vS(Po,Po.QUAD_SWAP_Y).setParameterLength(1),PM=vS(Po,Po.QUAD_SWAP_DIAGONAL).setParameterLength(1),PE=vS(Po,Po.SUBGROUP_BROADCAST).setParameterLength(2),PC=vS(Po,Po.SUBGROUP_SHUFFLE).setParameterLength(2),PR=vS(Po,Po.SUBGROUP_SHUFFLE_XOR).setParameterLength(2),PN=vS(Po,Po.SUBGROUP_SHUFFLE_UP).setParameterLength(2),PP=vS(Po,Po.SUBGROUP_SHUFFLE_DOWN).setParameterLength(2),PI=vS(Po,Po.QUAD_BROADCAST).setParameterLength(1);function PL(e){let t=(l=l||new WeakMap).get(e);return void 0===t&&l.set(e,t={}),t}function PD(e){let t=PL(e);return t.shadowMatrix||(t.shadowMatrix=xE("mat4").setGroup(xT).onRenderUpdate(t=>((!0!==e.castShadow||!1===t.renderer.shadowMap.enabled)&&(e.shadow.camera.coordinateSystem!==t.camera.coordinateSystem&&(e.shadow.camera.coordinateSystem=t.camera.coordinateSystem,e.shadow.camera.updateProjectionMatrix()),e.shadow.updateMatrices(e)),e.shadow.matrix)))}function PB(e,t=SY){let r=PD(e).mul(t);return r.xyz.div(r.w)}function PF(e){let t=PL(e);return t.position||(t.position=xE(new e$).setGroup(xT).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(e.matrixWorld)))}function PO(e){let t=PL(e);return t.targetPosition||(t.targetPosition=xE(new e$).setGroup(xT).onRenderUpdate((t,r)=>r.value.setFromMatrixPosition(e.target.matrixWorld)))}function PU(e){let t=PL(e);return t.viewPosition||(t.viewPosition=xE(new e$).setGroup(xT).onRenderUpdate(({camera:t},r)=>{r.value=r.value||new e$,r.value.setFromMatrixPosition(e.matrixWorld),r.value.applyMatrix4(t.matrixWorldInverse)}))}let Pk=e=>S_.transformDirection(PF(e).sub(PO(e))),Pz=(e,t)=>{for(let r of t)if(r.isAnalyticLightNode&&r.light.id===e)return r;return null},PV=new WeakMap,Pq=[];class PG extends yz{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=v0("vec3","totalDiffuse"),this.totalSpecularNode=v0("vec3","totalSpecular"),this.outgoingLightNode=v0("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){let e=this._lights;for(let t=0;t<e.length;t++){let r=e[t];if(Pq.push(r.id),Pq.push(+!!r.castShadow),!0===r.isSpotLight){let e=null!==r.map?r.map.id:-1,t=r.colorNode?r.colorNode.getCacheKey():-1;Pq.push(e,t)}}let t=yx(Pq);return Pq.length=0,t}getHash(e){if(null===this._lightNodesHash){null===this._lightNodes&&this.setupLightsNode(e);let t=[];for(let e of this._lightNodes)t.push(e.getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){let t=e.getNodeProperties(this);for(let r of t.nodes)r.build(e);t.outputNode.build(e)}setupLightsNode(e){let t=[],r=this._lightNodes,i=this._lights.sort((e,t)=>e.id-t.id),n=e.renderer.library;for(let e of i)if(e.isNode)t.push(vg(e));else{let i=null;if(null!==r&&(i=Pz(e.id,r)),null===i){let r=n.getLightNodeClass(e.constructor);if(null===r){eI(`LightsNode.setupNodeLights: Light node not found for ${e.constructor.name}`);continue}let i=null;PV.has(e)?i=PV.get(e):(i=vg(new r(e)),PV.set(e,i)),t.push(i)}}this._lightNodes=t}setupDirectLight(e,t,r){let{lightingModel:i,reflectedLight:n}=e.context;i.direct({...r,lightNode:t,reflectedLight:n},e)}setupDirectRectAreaLight(e,t,r){let{lightingModel:i,reflectedLight:n}=e.context;i.directRectArea({...r,lightNode:t,reflectedLight:n},e)}setupLights(e,t){for(let r of t)r.build(e)}getLightNodes(e){return null===this._lightNodes&&this.setupLightsNode(e),this._lightNodes}setup(e){let t=e.lightsNode;e.lightsNode=this;let r=this.outgoingLightNode,i=e.context,n=i.lightingModel,a=e.getNodeProperties(this);if(n){let{totalDiffuseNode:t,totalSpecularNode:s}=this;i.outgoingLight=r,a.nodes=e.addStack().nodes,n.start(e);let{backdrop:o,backdropAlpha:l}=i,{directDiffuse:u,directSpecular:c,indirectDiffuse:h,indirectSpecular:d}=i.reflectedLight,A=u.add(h);null!==o&&(A=null!==l?vz(l.mix(A,o)):vz(o)),t.assign(A),s.assign(c.add(d)),r.assign(t.add(s)),n.finish(e),r=r.bypass(e.removeStack())}else a.nodes=[];return e.lightsNode=t,r}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}class PH extends yz{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=yI.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){Pj.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||SY)}}let Pj=v0("vec3","shadowPositionWorld"),PW=new WeakMap,PX=vM(({depthTexture:e,shadowCoord:t,depthLayer:r})=>{let i=b7(e,t.xy).setName("t_basic");return e.isArrayTexture&&(i=i.depth(r)),i.compare(t.z)}),PQ=vM(({depthTexture:e,shadowCoord:t,shadow:r,depthLayer:i})=>{let n=(t,r)=>{let n=b7(e,t);return e.isArrayTexture&&(n=n.depth(i)),n.compare(r)},a=Tx("mapSize","vec2",r).setGroup(xT),s=Tx("radius","float",r).setGroup(xT),o=vF(1).div(a),l=o.x.negate().mul(s),u=o.y.negate().mul(s),c=o.x.mul(s),h=o.y.mul(s),d=l.div(2),A=u.div(2),p=c.div(2),f=h.div(2);return xB(n(t.xy.add(vF(l,u)),t.z),n(t.xy.add(vF(0,u)),t.z),n(t.xy.add(vF(c,u)),t.z),n(t.xy.add(vF(d,A)),t.z),n(t.xy.add(vF(0,A)),t.z),n(t.xy.add(vF(p,A)),t.z),n(t.xy.add(vF(l,0)),t.z),n(t.xy.add(vF(d,0)),t.z),n(t.xy,t.z),n(t.xy.add(vF(p,0)),t.z),n(t.xy.add(vF(c,0)),t.z),n(t.xy.add(vF(d,f)),t.z),n(t.xy.add(vF(0,f)),t.z),n(t.xy.add(vF(p,f)),t.z),n(t.xy.add(vF(l,h)),t.z),n(t.xy.add(vF(0,h)),t.z),n(t.xy.add(vF(c,h)),t.z)).mul(1/17)}),P$=vM(({depthTexture:e,shadowCoord:t,shadow:r,depthLayer:i})=>{let n=(t,r)=>{let n=b7(e,t);return e.isArrayTexture&&(n=n.depth(i)),n.compare(r)},a=Tx("mapSize","vec2",r).setGroup(xT),s=vF(1).div(a),o=s.x,l=s.y,u=t.xy,c=_g(u.mul(a).add(.5));return u.subAssign(c.mul(s)),xB(n(u,t.z),n(u.add(vF(o,0)),t.z),n(u.add(vF(0,l)),t.z),n(u.add(s),t.z),_0(n(u.add(vF(o.negate(),0)),t.z),n(u.add(vF(o.mul(2),0)),t.z),c.x),_0(n(u.add(vF(o.negate(),l)),t.z),n(u.add(vF(o.mul(2),l)),t.z),c.x),_0(n(u.add(vF(0,l.negate())),t.z),n(u.add(vF(0,l.mul(2))),t.z),c.y),_0(n(u.add(vF(o,l.negate())),t.z),n(u.add(vF(o,l.mul(2))),t.z),c.y),_0(_0(n(u.add(vF(o.negate(),l.negate())),t.z),n(u.add(vF(o.mul(2),l.negate())),t.z),c.x),_0(n(u.add(vF(o.negate(),l.mul(2))),t.z),n(u.add(vF(o.mul(2),l.mul(2))),t.z),c.x),c.y)).mul(1/9)}),PY=vM(({depthTexture:e,shadowCoord:t,depthLayer:r})=>{let i=vI(1).toVar(),n=b7(e).sample(t.xy);e.isArrayTexture&&(n=n.depth(r)),n=n.rg;let a=_V(t.z,n.x);return vR(a.notEqual(vI(1)),()=>{let e=t.z.sub(n.x),r=_z(0,n.y.mul(n.y)),s=r.div(r.add(e.mul(e)));s=_1(xF(s,.3).div(.95-.3)),i.assign(_1(_z(a,s)))}),i}),PK=vM(([e,t,r])=>{let i=SY.sub(e).length();return(i=i.sub(t).div(r.sub(t))).saturate()}),PZ=e=>{let t=PW.get(e);if(void 0===t){let r,i,n,a=e.isPointLight?(i=Tx("near","float",r=e.shadow.camera).setGroup(xT),n=Tx("far","float",r).setGroup(xT),PK(SN(e),i,n)):null;(t=new Mb).colorNode=vH(0,0,0,1),t.depthNode=a,t.isShadowPassMaterial=!0,t.name="ShadowMaterial",t.fog=!1,PW.set(e,t)}return t},PJ=new Cq,P0=[],P1=(e,t,r,i)=>{P0[0]=e,P0[1]=t;let n=PJ.get(P0);return(void 0===n||n.shadowType!==r||n.useVelocity!==i)&&((n=(n,a,s,o,l,u,...c)=>{(!0===n.castShadow||n.receiveShadow&&3===r)&&(i&&(yC(n).useVelocity=!0),n.onBeforeShadow(e,n,s,t.camera,o,a.overrideMaterial,u),e.renderObject(n,a,s,o,l,u,...c),n.onAfterShadow(e,n,s,t.camera,o,a.overrideMaterial,u))}).shadowType=r,n.useVelocity=i,PJ.set(P0,n)),P0[0]=null,P0[1]=null,n},P2=vM(({samples:e,radius:t,size:r,shadowPass:i,depthLayer:n})=>{let a=vI(0).toVar("meanVertical"),s=vI(0).toVar("squareMeanVertical"),o=e.lessThanEqual(vI(1)).select(vI(0),vI(2).div(e.sub(1))),l=e.lessThanEqual(vI(1)).select(vI(0),vI(-1));wQ({start:vL(0),end:vL(e),type:"int",condition:"<"},({i:e})=>{let u=l.add(vI(e).mul(o)),c=i.sample(xB(Sc.xy,vF(0,u).mul(t)).div(r));i.value.isArrayTexture&&(c=c.depth(n)),c=c.x,a.addAssign(c),s.addAssign(c.mul(c))}),a.divAssign(e),s.divAssign(e);let u=_d(s.sub(a.mul(a)));return vF(a,u)}),P3=vM(({samples:e,radius:t,size:r,shadowPass:i,depthLayer:n})=>{let a=vI(0).toVar("meanHorizontal"),s=vI(0).toVar("squareMeanHorizontal"),o=e.lessThanEqual(vI(1)).select(vI(0),vI(2).div(e.sub(1))),l=e.lessThanEqual(vI(1)).select(vI(0),vI(-1));wQ({start:vL(0),end:vL(e),type:"int",condition:"<"},({i:e})=>{let u=l.add(vI(e).mul(o)),c=i.sample(xB(Sc.xy,vF(u,0).mul(t)).div(r));i.value.isArrayTexture&&(c=c.depth(n)),a.addAssign(c.x),s.addAssign(xB(c.y.mul(c.y),c.x.mul(c.x)))}),a.divAssign(e),s.divAssign(e);let u=_d(s.sub(a.mul(a)));return vF(a,u)}),P4=[PX,PQ,P$,PY],P5=new R2;class P8 extends PH{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._currentShadowType=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:r,shadowCoord:i,shadow:n,depthLayer:a}){let s=i.x.greaterThanEqual(0).and(i.x.lessThanEqual(1)).and(i.y.greaterThanEqual(0)).and(i.y.lessThanEqual(1)).and(i.z.lessThanEqual(1)),o=t({depthTexture:r,shadowCoord:i,shadow:n,depthLayer:a});return s.select(o,vI(1))}setupShadowCoord(e,t){let r,{shadow:i}=this,{renderer:n}=e,a=Tx("bias","float",i).setGroup(xT),s=t;if(i.camera.isOrthographicCamera||!0!==n.logarithmicDepthBuffer)r=(s=s.xyz.div(s.w)).z,2001===n.coordinateSystem&&(r=r.mul(2).sub(1));else{let e=s.w;s=s.xy.div(e);let t=Tx("near","float",i.camera).setGroup(xT),n=Tx("far","float",i.camera).setGroup(xT);r=Mn(e.negate(),t,n)}return vz(s.x,s.y.oneMinus(),r.add(a))}getShadowFilterFn(e){return P4[e]}setupRenderTarget(e,t){let r=new n2(e.mapSize.width,e.mapSize.height);r.name="ShadowDepthTexture",r.compareFunction=513;let i=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return i.texture.name="ShadowMap",i.texture.type=e.mapType,i.depthTexture=r,{shadowMap:i,depthTexture:r}}setupShadow(e){let{renderer:t,camera:r}=e,{light:i,shadow:n}=this,a=t.shadowMap.type,{depthTexture:s,shadowMap:o}=this.setupRenderTarget(n,e);if(n.camera.coordinateSystem=r.coordinateSystem,n.camera.updateProjectionMatrix(),3===a&&!0!==n.isPointLightShadow){s.compareFunction=null,o.depth>1?(o._vsmShadowMapVertical||(o._vsmShadowMapVertical=e.createRenderTarget(n.mapSize.width,n.mapSize.height,{format:1030,type:1016,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=o._vsmShadowMapVertical,o._vsmShadowMapHorizontal||(o._vsmShadowMapHorizontal=e.createRenderTarget(n.mapSize.width,n.mapSize.height,{format:1030,type:1016,depth:o.depth,depthBuffer:!1}),o._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=o._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(n.mapSize.width,n.mapSize.height,{format:1030,type:1016,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(n.mapSize.width,n.mapSize.height,{format:1030,type:1016,depthBuffer:!1}));let t=b7(s);s.isArrayTexture&&(t=t.depth(this.depthLayer));let r=b7(this.vsmShadowMapVertical.texture);s.isArrayTexture&&(r=r.depth(this.depthLayer));let i=Tx("blurSamples","float",n).setGroup(xT),a=Tx("radius","float",n).setGroup(xT),l=Tx("mapSize","vec2",n).setGroup(xT),u=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Mb);u.fragmentNode=P2({samples:i,radius:a,size:l,shadowPass:t,depthLayer:this.depthLayer}).context(e.getSharedContext()),u.name="VSMVertical",(u=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Mb)).fragmentNode=P3({samples:i,radius:a,size:l,shadowPass:r,depthLayer:this.depthLayer}).context(e.getSharedContext()),u.name="VSMHorizontal"}let l=Tx("intensity","float",n).setGroup(xT),u=Tx("normalBias","float",n).setGroup(xT),c=PD(i).mul(Pj.add(S9.mul(u))),h=this.setupShadowCoord(e,c),d=n.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(null===d)throw Error("THREE.WebGPURenderer: Shadow map type not supported yet.");let A=3===a&&!0!==n.isPointLightShadow?this.vsmShadowMapHorizontal.texture:s,p=this.setupShadowFilter(e,{filterFn:d,shadowTexture:o.texture,depthTexture:A,shadowCoord:h,shadow:n,depthLayer:this.depthLayer}),f=b7(o.texture,h);s.isArrayTexture&&(f=f.depth(this.depthLayer));let m=_0(1,p.rgb.mix(f,1),l.mul(f.a)).toVar();this.shadowMap=o,this.shadow.map=o;let g=`${this.light.type} Shadow [ ${this.light.name||"ID: "+this.light.id} ]`;return m.toInspector(`${g} / Color`,()=>b7(this.shadowMap.texture)).toInspector(`${g} / Depth`,()=>b9(this.shadowMap.depthTexture,b2().mul(b3(b7(this.shadowMap.depthTexture)))).x.oneMinus())}setup(e){if(!1!==e.renderer.shadowMap.enabled)return vM(()=>{let t=e.renderer.shadowMap.type;this._currentShadowType!==t&&(this._reset(),this._node=null);let r=this._node;return this.setupShadowPosition(e),null===r&&(this._node=r=this.setupShadow(e),this._currentShadowType=t),e.material.shadowNode&&eI('NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(r=e.material.receivedShadowNode(r)),r})()}renderShadow(e){let{shadow:t,shadowMap:r,light:i}=this,{renderer:n,scene:a}=e;t.updateMatrices(i),r.setSize(t.mapSize.width,t.mapSize.height,r.depth);let s=a.name;a.name=`Shadow Map [ ${i.name||"ID: "+i.id} ]`,n.render(a,t.camera),a.name=s}updateShadow(e){var t,r,i;let{shadowMap:n,light:a,shadow:s}=this,{renderer:o,scene:l,camera:c}=e,h=o.shadowMap.type,d=n.depthTexture.version;this._depthVersionCached=d;let A=s.camera.layers.mask;(0xfffffffe&s.camera.layers.mask)==0&&(s.camera.layers.mask=c.layers.mask);let p=o.getRenderObjectFunction(),f=o.getMRT(),m=!!f&&f.has("velocity");t=function(e,t={}){return t.toneMapping=e.toneMapping,t.toneMappingExposure=e.toneMappingExposure,t.outputColorSpace=e.outputColorSpace,t.renderTarget=e.getRenderTarget(),t.activeCubeFace=e.getActiveCubeFace(),t.activeMipmapLevel=e.getActiveMipmapLevel(),t.renderObjectFunction=e.getRenderObjectFunction(),t.pixelRatio=e.getPixelRatio(),t.mrt=e.getMRT(),t.clearColor=e.getClearColor(t.clearColor||new ry),t.clearAlpha=e.getClearAlpha(),t.autoClear=e.autoClear,t.scissorTest=e.getScissorTest(),t}(o,t=u),o.setMRT(null),o.setRenderObjectFunction(null),o.setClearColor(0,1),o.autoClear=!0,r=function(e,t={}){return t.background=e.background,t.backgroundNode=e.backgroundNode,t.overrideMaterial=e.overrideMaterial,t}(l,r=t),l.background=null,l.backgroundNode=null,l.overrideMaterial=null,u=r,l.overrideMaterial=PZ(a),o.setRenderObjectFunction(P1(o,s,h,m)),o.setClearColor(0,0),o.setRenderTarget(n),this.renderShadow(e),o.setRenderObjectFunction(p),3===h&&!0!==s.isPointLightShadow&&this.vsmPass(o),s.camera.layers.mask=A,o.toneMapping=(i=u).toneMapping,o.toneMappingExposure=i.toneMappingExposure,o.outputColorSpace=i.outputColorSpace,o.setRenderTarget(i.renderTarget,i.activeCubeFace,i.activeMipmapLevel),o.setRenderObjectFunction(i.renderObjectFunction),o.setPixelRatio(i.pixelRatio),o.setMRT(i.mrt),o.setClearColor(i.clearColor,i.clearAlpha),o.autoClear=i.autoClear,o.setScissorTest(i.scissorTest),l.background=i.background,l.backgroundNode=i.backgroundNode,l.overrideMaterial=i.overrideMaterial}vsmPass(e){let{shadow:t}=this,r=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,r),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,r),e.setRenderTarget(this.vsmShadowMapVertical),P5.material=this.vsmMaterialVertical,P5.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),P5.material=this.vsmMaterialHorizontal,P5.render(e)}dispose(){this._reset(),super.dispose()}_reset(){this._currentShadowType=null,this.shadowMap&&(this.shadowMap.dispose(),this.shadowMap=null),null!==this.vsmShadowMapVertical&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),null!==this.vsmShadowMapHorizontal&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null)}updateBefore(e){let{shadow:t}=this,r=t.needsUpdate||t.autoUpdate;r&&(this._cameraFrameId[e.camera]===e.frameId&&(r=!1),this._cameraFrameId[e.camera]=e.frameId),r&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}let P6=(e,t)=>vg(new P8(e,t)),P7=new ry,P9=vM(([e,t])=>{let r=e.toVar(),i=_T(r),n=xU(1,_z(i.x,_z(i.y,i.z)));i.mulAssign(n),r.mulAssign(n.mul(t.mul(2).oneMinus()));let a=vF(r.xy).toVar(),s=t.mul(1.5).oneMinus();return vR(i.z.greaterThanEqual(s),()=>{vR(r.z.greaterThan(0),()=>{a.x.assign(xF(4,r.x))})}).ElseIf(i.x.greaterThanEqual(s),()=>{let e=_w(r.x);a.x.assign(r.z.mul(e).add(e.mul(2)))}).ElseIf(i.y.greaterThanEqual(s),()=>{let e=_w(r.y);a.x.assign(r.x.add(e.mul(2)).add(2)),a.y.assign(r.z.mul(e).sub(2))}),vF(.125,.25).mul(a).add(vF(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),Ie=vM(({depthTexture:e,bd3D:t,dp:r,texelSize:i})=>b7(e,P9(t,i.y)).compare(r)),It=vM(({depthTexture:e,bd3D:t,dp:r,texelSize:i,shadow:n})=>{let a=Tx("radius","float",n).setGroup(xT),s=vF(-1,1).mul(a).mul(i.y);return b7(e,P9(t.add(s.xyy),i.y)).compare(r).add(b7(e,P9(t.add(s.yyy),i.y)).compare(r)).add(b7(e,P9(t.add(s.xyx),i.y)).compare(r)).add(b7(e,P9(t.add(s.yyx),i.y)).compare(r)).add(b7(e,P9(t,i.y)).compare(r)).add(b7(e,P9(t.add(s.xxy),i.y)).compare(r)).add(b7(e,P9(t.add(s.yxy),i.y)).compare(r)).add(b7(e,P9(t.add(s.xxx),i.y)).compare(r)).add(b7(e,P9(t.add(s.yxx),i.y)).compare(r)).mul(1/9)}),Ir=vM(({filterFn:e,depthTexture:t,shadowCoord:r,shadow:i})=>{let n=r.xyz.toVar(),a=n.length(),s=xE("float").setGroup(xT).onRenderUpdate(()=>i.camera.near),o=xE("float").setGroup(xT).onRenderUpdate(()=>i.camera.far),l=Tx("bias","float",i).setGroup(xT),u=xE(i.mapSize).setGroup(xT),c=vI(1).toVar();return vR(a.sub(o).lessThanEqual(0).and(a.sub(s).greaterThanEqual(0)),()=>{let r=a.sub(s).div(o.sub(s)).toVar();r.addAssign(l);let h=n.normalize(),d=vF(1).div(u.mul(vF(4,2)));c.assign(e({depthTexture:t,bd3D:h,dp:r,texelSize:d,shadow:i}))}),c}),Ii=new tr,In=new eX,Ia=new eX;class Is extends P8{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return 0===e?Ie:It}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:r,depthTexture:i,shadowCoord:n,shadow:a}){return Ir({filterFn:t,shadowTexture:r,depthTexture:i,shadowCoord:n,shadow:a})}renderShadow(e){let{shadow:t,shadowMap:r,light:i}=this,{renderer:n,scene:a}=e,s=t.getFrameExtents();Ia.copy(t.mapSize),Ia.multiply(s),r.setSize(Ia.width,Ia.height),In.copy(t.mapSize);let o=n.autoClear,l=n.getClearColor(P7),u=n.getClearAlpha();n.autoClear=!1,n.setClearColor(t.clearColor,t.clearAlpha),n.clear();let c=t.getViewportCount();for(let e=0;e<c;e++){let s=t.getViewport(e),o=In.x*s.x,l=Ia.y-In.y-In.y*s.y;Ii.set(o,l,In.x*s.z,In.y*s.w),r.viewport.copy(Ii),t.updateMatrices(i,e);let u=a.name;a.name=`Point Light Shadow [ ${i.name||"ID: "+i.id} ] - Face ${e+1}`,n.render(a,t.camera),a.name=u}n.autoClear=o,n.setClearColor(l,u)}}let Io=(e,t)=>vg(new Is(e,t));class Il extends w0{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new ry,this.colorNode=e&&e.colorNode||xE(this.color).setGroup(xT),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=yI.FRAME}getHash(){return this.light.uuid}getLightVector(e){return PU(this.light).sub(e.context.positionView||SZ)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return P6(this.light)}setupShadow(e){let{renderer:t}=e;if(!1===t.shadowMap.enabled)return;let r=this.shadowColorNode;if(null===r){let e,t=this.light.shadow.shadowNode;e=void 0!==t?vg(t):this.setupShadowNode(),this.shadowNode=e,this.shadowColorNode=r=this.colorNode.mul(e),this.baseColorNode=this.colorNode}this.colorNode=r}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):null!==this.shadowNode&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);let t=this.setupDirect(e),r=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),r&&e.lightsNode.setupDirectRectAreaLight(e,this,r)}update(){let{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}let Iu=vM(({lightDistance:e,cutoffDistance:t,decayExponent:r})=>{let i=e.pow(r).max(.01).reciprocal();return t.greaterThan(0).select(i.mul(e.div(t).pow4().oneMinus().clamp().pow2()),i)}),Ic=({color:e,lightVector:t,cutoffDistance:r,decayExponent:i})=>{let n=t.normalize(),a=Iu({lightDistance:t.length(),cutoffDistance:r,decayExponent:i});return{lightDirection:n,lightColor:e.mul(a)}};class Ih extends Il{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=xE(0).setGroup(xT),this.decayExponentNode=xE(2).setGroup(xT)}update(e){let{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return Io(this.light)}setupDirect(e){return Ic({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}let Id=vM(([e=b2()])=>{let t=e.mul(2),r=t.x.floor(),i=t.y.floor();return r.add(i).mod(2).sign()}),IA=vM(([e=b2()],{renderer:t,material:r})=>{let i,n=_J(e.mul(2).sub(1));if(r.alphaToCoverage&&t.currentSamples>0){let e=vI(n.fwidth()).toVar();i=_4(e.oneMinus(),e.add(1),n).oneMinus()}else i=bt(n.greaterThan(1),0,1);return i}),Ip=vM(([e,t,r])=>{let i=vI(r).toVar(),n=vI(t).toVar();return bt(vB(e).toVar(),n,i)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),If=vM(([e,t])=>{let r=vB(t).toVar(),i=vI(e).toVar();return bt(r,i.negate(),i)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),Im=vM(([e])=>vL(_p(vI(e).toVar()))).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),Ig=vM(([e,t])=>{let r=vI(e).toVar();return t.assign(Im(r)),r.sub(vI(t))}),Iy=RC([vM(([e,t,r,i,n,a])=>{let s=vI(a).toVar(),o=vI(n).toVar(),l=vI(i).toVar(),u=vI(r).toVar(),c=vI(t).toVar(),h=vI(e).toVar(),d=vI(xF(1,o)).toVar();return xF(1,s).mul(h.mul(d).add(c.mul(o))).add(s.mul(u.mul(d).add(l.mul(o))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),vM(([e,t,r,i,n,a])=>{let s=vI(a).toVar(),o=vI(n).toVar(),l=vz(i).toVar(),u=vz(r).toVar(),c=vz(t).toVar(),h=vz(e).toVar(),d=vI(xF(1,o)).toVar();return xF(1,s).mul(h.mul(d).add(c.mul(o))).add(s.mul(u.mul(d).add(l.mul(o))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]})]),Iv=RC([vM(([e,t,r,i,n,a,s,o,l,u,c])=>{let h=vI(c).toVar(),d=vI(u).toVar(),A=vI(l).toVar(),p=vI(o).toVar(),f=vI(s).toVar(),m=vI(a).toVar(),g=vI(n).toVar(),y=vI(i).toVar(),v=vI(r).toVar(),x=vI(t).toVar(),_=vI(e).toVar(),b=vI(xF(1,A)).toVar(),S=vI(xF(1,d)).toVar();return vI(xF(1,h)).toVar().mul(S.mul(_.mul(b).add(x.mul(A))).add(d.mul(v.mul(b).add(y.mul(A))))).add(h.mul(S.mul(g.mul(b).add(m.mul(A))).add(d.mul(f.mul(b).add(p.mul(A))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),vM(([e,t,r,i,n,a,s,o,l,u,c])=>{let h=vI(c).toVar(),d=vI(u).toVar(),A=vI(l).toVar(),p=vz(o).toVar(),f=vz(s).toVar(),m=vz(a).toVar(),g=vz(n).toVar(),y=vz(i).toVar(),v=vz(r).toVar(),x=vz(t).toVar(),_=vz(e).toVar(),b=vI(xF(1,A)).toVar(),S=vI(xF(1,d)).toVar();return vI(xF(1,h)).toVar().mul(S.mul(_.mul(b).add(x.mul(A))).add(d.mul(v.mul(b).add(y.mul(A))))).add(h.mul(S.mul(g.mul(b).add(m.mul(A))).add(d.mul(f.mul(b).add(p.mul(A))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]})]),Ix=RC([vM(([e,t,r])=>{let i=vI(r).toVar(),n=vI(t).toVar(),a=vD(e).toVar(),s=vD(a.bitAnd(vD(7))).toVar(),o=vI(Ip(s.lessThan(vD(4)),n,i)).toVar(),l=vI(xO(2,Ip(s.lessThan(vD(4)),i,n))).toVar();return If(o,vB(s.bitAnd(vD(1)))).add(If(l,vB(s.bitAnd(vD(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),vM(([e,t,r,i])=>{let n=vI(i).toVar(),a=vI(r).toVar(),s=vI(t).toVar(),o=vD(e).toVar(),l=vD(o.bitAnd(vD(15))).toVar(),u=vI(Ip(l.lessThan(vD(8)),s,a)).toVar(),c=vI(Ip(l.lessThan(vD(4)),a,Ip(l.equal(vD(12)).or(l.equal(vD(14))),s,n))).toVar();return If(u,vB(l.bitAnd(vD(1)))).add(If(c,vB(l.bitAnd(vD(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]})]),I_=RC([vM(([e,t,r])=>{let i=vI(r).toVar(),n=vI(t).toVar(),a=vq(e).toVar();return vz(Ix(a.x,n,i),Ix(a.y,n,i),Ix(a.z,n,i))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),vM(([e,t,r,i])=>{let n=vI(i).toVar(),a=vI(r).toVar(),s=vI(t).toVar(),o=vq(e).toVar();return vz(Ix(o.x,s,a,n),Ix(o.y,s,a,n),Ix(o.z,s,a,n))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]})]),Ib=vM(([e])=>xO(.6616,vI(e).toVar())).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),IS=vM(([e])=>xO(.982,vI(e).toVar())).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),IT=RC([Ib,vM(([e])=>xO(.6616,vz(e).toVar())).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]})]),Iw=RC([IS,vM(([e])=>xO(.982,vz(e).toVar())).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]})]),IM=vM(([e,t])=>{let r=vL(t).toVar(),i=vD(e).toVar();return i.shiftLeft(r).bitOr(i.shiftRight(vL(32).sub(r)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),IE=vM(([e,t,r])=>{e.subAssign(r),e.bitXorAssign(IM(r,vL(4))),r.addAssign(t),t.subAssign(e),t.bitXorAssign(IM(e,vL(6))),e.addAssign(r),r.subAssign(t),r.bitXorAssign(IM(t,vL(8))),t.addAssign(e),e.subAssign(r),e.bitXorAssign(IM(r,vL(16))),r.addAssign(t),t.subAssign(e),t.bitXorAssign(IM(e,vL(19))),e.addAssign(r),r.subAssign(t),r.bitXorAssign(IM(t,vL(4))),t.addAssign(e)}),IC=vM(([e,t,r])=>{let i=vD(r).toVar(),n=vD(t).toVar(),a=vD(e).toVar();return i.bitXorAssign(n),i.subAssign(IM(n,vL(14))),a.bitXorAssign(i),a.subAssign(IM(i,vL(11))),n.bitXorAssign(a),n.subAssign(IM(a,vL(25))),i.bitXorAssign(n),i.subAssign(IM(n,vL(16))),a.bitXorAssign(i),a.subAssign(IM(i,vL(4))),n.bitXorAssign(a),n.subAssign(IM(a,vL(14))),i.bitXorAssign(n),i.subAssign(IM(n,vL(24))),i}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),IR=vM(([e])=>vI(vD(e).toVar()).div(vI(vD(vL(0xffffffff))))).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),IN=vM(([e])=>{let t=vI(e).toVar();return t.mul(t).mul(t).mul(t.mul(t.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),IP=RC([vM(([e])=>{let t=vL(e).toVar(),r=vD(vD(1)).toVar(),i=vD(vD(vL(0xdeadbeef)).add(r.shiftLeft(vD(2))).add(vD(13))).toVar();return IC(i.add(vD(t)),i,i)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),vM(([e,t])=>{let r=vL(t).toVar(),i=vL(e).toVar(),n=vD(vD(2)).toVar(),a=vD().toVar(),s=vD().toVar(),o=vD().toVar();return a.assign(s.assign(o.assign(vD(vL(0xdeadbeef)).add(n.shiftLeft(vD(2))).add(vD(13))))),a.addAssign(vD(i)),s.addAssign(vD(r)),IC(a,s,o)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),vM(([e,t,r])=>{let i=vL(r).toVar(),n=vL(t).toVar(),a=vL(e).toVar(),s=vD(vD(3)).toVar(),o=vD().toVar(),l=vD().toVar(),u=vD().toVar();return o.assign(l.assign(u.assign(vD(vL(0xdeadbeef)).add(s.shiftLeft(vD(2))).add(vD(13))))),o.addAssign(vD(a)),l.addAssign(vD(n)),u.addAssign(vD(i)),IC(o,l,u)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),vM(([e,t,r,i])=>{let n=vL(i).toVar(),a=vL(r).toVar(),s=vL(t).toVar(),o=vL(e).toVar(),l=vD(vD(4)).toVar(),u=vD().toVar(),c=vD().toVar(),h=vD().toVar();return u.assign(c.assign(h.assign(vD(vL(0xdeadbeef)).add(l.shiftLeft(vD(2))).add(vD(13))))),u.addAssign(vD(o)),c.addAssign(vD(s)),h.addAssign(vD(a)),IE(u,c,h),u.addAssign(vD(n)),IC(u,c,h)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),vM(([e,t,r,i,n])=>{let a=vL(n).toVar(),s=vL(i).toVar(),o=vL(r).toVar(),l=vL(t).toVar(),u=vL(e).toVar(),c=vD(vD(5)).toVar(),h=vD().toVar(),d=vD().toVar(),A=vD().toVar();return h.assign(d.assign(A.assign(vD(vL(0xdeadbeef)).add(c.shiftLeft(vD(2))).add(vD(13))))),h.addAssign(vD(u)),d.addAssign(vD(l)),A.addAssign(vD(o)),IE(h,d,A),h.addAssign(vD(s)),d.addAssign(vD(a)),IC(h,d,A)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]})]),II=RC([vM(([e,t])=>{let r=vL(t).toVar(),i=vD(IP(vL(e).toVar(),r)).toVar(),n=vq().toVar();return n.x.assign(i.bitAnd(vL(255))),n.y.assign(i.shiftRight(vL(8)).bitAnd(vL(255))),n.z.assign(i.shiftRight(vL(16)).bitAnd(vL(255))),n}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),vM(([e,t,r])=>{let i=vL(r).toVar(),n=vL(t).toVar(),a=vD(IP(vL(e).toVar(),n,i)).toVar(),s=vq().toVar();return s.x.assign(a.bitAnd(vL(255))),s.y.assign(a.shiftRight(vL(8)).bitAnd(vL(255))),s.z.assign(a.shiftRight(vL(16)).bitAnd(vL(255))),s}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]})]),IL=RC([vM(([e])=>{let t=vF(e).toVar(),r=vL().toVar(),i=vL().toVar(),n=vI(Ig(t.x,r)).toVar(),a=vI(Ig(t.y,i)).toVar(),s=vI(IN(n)).toVar(),o=vI(IN(a)).toVar();return IT(vI(Iy(Ix(IP(r,i),n,a),Ix(IP(r.add(vL(1)),i),n.sub(1),a),Ix(IP(r,i.add(vL(1))),n,a.sub(1)),Ix(IP(r.add(vL(1)),i.add(vL(1))),n.sub(1),a.sub(1)),s,o)).toVar())}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),vM(([e])=>{let t=vz(e).toVar(),r=vL().toVar(),i=vL().toVar(),n=vL().toVar(),a=vI(Ig(t.x,r)).toVar(),s=vI(Ig(t.y,i)).toVar(),o=vI(Ig(t.z,n)).toVar(),l=vI(IN(a)).toVar(),u=vI(IN(s)).toVar(),c=vI(IN(o)).toVar();return Iw(vI(Iv(Ix(IP(r,i,n),a,s,o),Ix(IP(r.add(vL(1)),i,n),a.sub(1),s,o),Ix(IP(r,i.add(vL(1)),n),a,s.sub(1),o),Ix(IP(r.add(vL(1)),i.add(vL(1)),n),a.sub(1),s.sub(1),o),Ix(IP(r,i,n.add(vL(1))),a,s,o.sub(1)),Ix(IP(r.add(vL(1)),i,n.add(vL(1))),a.sub(1),s,o.sub(1)),Ix(IP(r,i.add(vL(1)),n.add(vL(1))),a,s.sub(1),o.sub(1)),Ix(IP(r.add(vL(1)),i.add(vL(1)),n.add(vL(1))),a.sub(1),s.sub(1),o.sub(1)),l,u,c)).toVar())}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]})]),ID=RC([vM(([e])=>{let t=vF(e).toVar(),r=vL().toVar(),i=vL().toVar(),n=vI(Ig(t.x,r)).toVar(),a=vI(Ig(t.y,i)).toVar(),s=vI(IN(n)).toVar(),o=vI(IN(a)).toVar();return IT(vz(Iy(I_(II(r,i),n,a),I_(II(r.add(vL(1)),i),n.sub(1),a),I_(II(r,i.add(vL(1))),n,a.sub(1)),I_(II(r.add(vL(1)),i.add(vL(1))),n.sub(1),a.sub(1)),s,o)).toVar())}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),vM(([e])=>{let t=vz(e).toVar(),r=vL().toVar(),i=vL().toVar(),n=vL().toVar(),a=vI(Ig(t.x,r)).toVar(),s=vI(Ig(t.y,i)).toVar(),o=vI(Ig(t.z,n)).toVar(),l=vI(IN(a)).toVar(),u=vI(IN(s)).toVar(),c=vI(IN(o)).toVar();return Iw(vz(Iv(I_(II(r,i,n),a,s,o),I_(II(r.add(vL(1)),i,n),a.sub(1),s,o),I_(II(r,i.add(vL(1)),n),a,s.sub(1),o),I_(II(r.add(vL(1)),i.add(vL(1)),n),a.sub(1),s.sub(1),o),I_(II(r,i,n.add(vL(1))),a,s,o.sub(1)),I_(II(r.add(vL(1)),i,n.add(vL(1))),a.sub(1),s,o.sub(1)),I_(II(r,i.add(vL(1)),n.add(vL(1))),a,s.sub(1),o.sub(1)),I_(II(r.add(vL(1)),i.add(vL(1)),n.add(vL(1))),a.sub(1),s.sub(1),o.sub(1)),l,u,c)).toVar())}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]})]),IB=RC([vM(([e])=>IR(IP(vL(Im(vI(e).toVar())).toVar()))).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),vM(([e])=>{let t=vF(e).toVar();return IR(IP(vL(Im(t.x)).toVar(),vL(Im(t.y)).toVar()))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),vM(([e])=>{let t=vz(e).toVar();return IR(IP(vL(Im(t.x)).toVar(),vL(Im(t.y)).toVar(),vL(Im(t.z)).toVar()))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),vM(([e])=>{let t=vH(e).toVar();return IR(IP(vL(Im(t.x)).toVar(),vL(Im(t.y)).toVar(),vL(Im(t.z)).toVar(),vL(Im(t.w)).toVar()))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]})]),IF=RC([vM(([e])=>{let t=vL(Im(vI(e).toVar())).toVar();return vz(IR(IP(t,vL(0))),IR(IP(t,vL(1))),IR(IP(t,vL(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),vM(([e])=>{let t=vF(e).toVar(),r=vL(Im(t.x)).toVar(),i=vL(Im(t.y)).toVar();return vz(IR(IP(r,i,vL(0))),IR(IP(r,i,vL(1))),IR(IP(r,i,vL(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),vM(([e])=>{let t=vz(e).toVar(),r=vL(Im(t.x)).toVar(),i=vL(Im(t.y)).toVar(),n=vL(Im(t.z)).toVar();return vz(IR(IP(r,i,n,vL(0))),IR(IP(r,i,n,vL(1))),IR(IP(r,i,n,vL(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),vM(([e])=>{let t=vH(e).toVar(),r=vL(Im(t.x)).toVar(),i=vL(Im(t.y)).toVar(),n=vL(Im(t.z)).toVar(),a=vL(Im(t.w)).toVar();return vz(IR(IP(r,i,n,a,vL(0))),IR(IP(r,i,n,a,vL(1))),IR(IP(r,i,n,a,vL(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]})]),IO=vM(([e,t,r,i])=>{let n=vI(i).toVar(),a=vI(r).toVar(),s=vL(t).toVar(),o=vz(e).toVar(),l=vI(0).toVar(),u=vI(1).toVar();return wQ(s,()=>{l.addAssign(u.mul(IL(o))),u.mulAssign(n),o.mulAssign(a)}),l}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),IU=vM(([e,t,r,i])=>{let n=vI(i).toVar(),a=vI(r).toVar(),s=vL(t).toVar(),o=vz(e).toVar(),l=vz(0).toVar(),u=vI(1).toVar();return wQ(s,()=>{l.addAssign(u.mul(ID(o))),u.mulAssign(n),o.mulAssign(a)}),l}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Ik=vM(([e,t,r,i])=>{let n=vI(i).toVar(),a=vI(r).toVar(),s=vL(t).toVar(),o=vz(e).toVar();return vF(IO(o,s,a,n),IO(o.add(vz(vL(19),vL(193),vL(17))),s,a,n))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Iz=vM(([e,t,r,i])=>{let n=vI(i).toVar(),a=vI(r).toVar(),s=vL(t).toVar(),o=vz(e).toVar();return vH(vz(IU(o,s,a,n)).toVar(),vI(IO(o.add(vz(vL(19),vL(193),vL(17))),s,a,n)).toVar())}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),IV=RC([vM(([e,t,r,i,n,a,s])=>{let o=vL(s).toVar(),l=vI(a).toVar(),u=vL(n).toVar(),c=vL(i).toVar(),h=vL(r).toVar(),d=vL(t).toVar(),A=vF(e).toVar(),p=vz(IF(vF(d.add(c),h.add(u)))).toVar(),f=vF(p.x,p.y).toVar();f.subAssign(.5),f.mulAssign(l),f.addAssign(.5);let m=vF(vF(vI(d),vI(h)).add(f)).toVar(),g=vF(m.sub(A)).toVar();return vR(o.equal(vL(2)),()=>_T(g.x).add(_T(g.y))),vR(o.equal(vL(3)),()=>_z(_T(g.x),_T(g.y))),_j(g,g)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),vM(([e,t,r,i,n,a,s,o,l])=>{let u=vL(l).toVar(),c=vI(o).toVar(),h=vL(s).toVar(),d=vL(a).toVar(),A=vL(n).toVar(),p=vL(i).toVar(),f=vL(r).toVar(),m=vL(t).toVar(),g=vz(e).toVar(),y=vz(IF(vz(m.add(A),f.add(d),p.add(h)))).toVar();y.subAssign(.5),y.mulAssign(c),y.addAssign(.5);let v=vz(vz(vI(m),vI(f),vI(p)).add(y)).toVar(),x=vz(v.sub(g)).toVar();return vR(u.equal(vL(2)),()=>_T(x.x).add(_T(x.y)).add(_T(x.z))),vR(u.equal(vL(3)),()=>_z(_T(x.x),_T(x.y),_T(x.z))),_j(x,x)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]})]),Iq=vM(([e,t,r])=>{let i=vL(r).toVar(),n=vI(t).toVar(),a=vF(e).toVar(),s=vL().toVar(),o=vL().toVar(),l=vF(Ig(a.x,s),Ig(a.y,o)).toVar(),u=vI(1e6).toVar();return wQ({start:-1,end:vL(1),name:"x",condition:"<="},({x:e})=>{wQ({start:-1,end:vL(1),name:"y",condition:"<="},({y:t})=>{let r=vI(IV(l,e,t,s,o,n,i)).toVar();u.assign(_k(u,r))})}),vR(i.equal(vL(0)),()=>{u.assign(_d(u))}),u}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),IG=vM(([e,t,r])=>{let i=vL(r).toVar(),n=vI(t).toVar(),a=vF(e).toVar(),s=vL().toVar(),o=vL().toVar(),l=vF(Ig(a.x,s),Ig(a.y,o)).toVar(),u=vF(1e6,1e6).toVar();return wQ({start:-1,end:vL(1),name:"x",condition:"<="},({x:e})=>{wQ({start:-1,end:vL(1),name:"y",condition:"<="},({y:t})=>{let r=vI(IV(l,e,t,s,o,n,i)).toVar();vR(r.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(r)}).ElseIf(r.lessThan(u.y),()=>{u.y.assign(r)})})}),vR(i.equal(vL(0)),()=>{u.assign(_d(u))}),u}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),IH=vM(([e,t,r])=>{let i=vL(r).toVar(),n=vI(t).toVar(),a=vF(e).toVar(),s=vL().toVar(),o=vL().toVar(),l=vF(Ig(a.x,s),Ig(a.y,o)).toVar(),u=vz(1e6,1e6,1e6).toVar();return wQ({start:-1,end:vL(1),name:"x",condition:"<="},({x:e})=>{wQ({start:-1,end:vL(1),name:"y",condition:"<="},({y:t})=>{let r=vI(IV(l,e,t,s,o,n,i)).toVar();vR(r.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(r)}).ElseIf(r.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(r)}).ElseIf(r.lessThan(u.z),()=>{u.z.assign(r)})})}),vR(i.equal(vL(0)),()=>{u.assign(_d(u))}),u}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Ij=RC([Iq,vM(([e,t,r])=>{let i=vL(r).toVar(),n=vI(t).toVar(),a=vz(e).toVar(),s=vL().toVar(),o=vL().toVar(),l=vL().toVar(),u=vz(Ig(a.x,s),Ig(a.y,o),Ig(a.z,l)).toVar(),c=vI(1e6).toVar();return wQ({start:-1,end:vL(1),name:"x",condition:"<="},({x:e})=>{wQ({start:-1,end:vL(1),name:"y",condition:"<="},({y:t})=>{wQ({start:-1,end:vL(1),name:"z",condition:"<="},({z:r})=>{let a=vI(IV(u,e,t,r,s,o,l,n,i)).toVar();c.assign(_k(c,a))})})}),vR(i.equal(vL(0)),()=>{c.assign(_d(c))}),c}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]})]),IW=RC([IG,vM(([e,t,r])=>{let i=vL(r).toVar(),n=vI(t).toVar(),a=vz(e).toVar(),s=vL().toVar(),o=vL().toVar(),l=vL().toVar(),u=vz(Ig(a.x,s),Ig(a.y,o),Ig(a.z,l)).toVar(),c=vF(1e6,1e6).toVar();return wQ({start:-1,end:vL(1),name:"x",condition:"<="},({x:e})=>{wQ({start:-1,end:vL(1),name:"y",condition:"<="},({y:t})=>{wQ({start:-1,end:vL(1),name:"z",condition:"<="},({z:r})=>{let a=vI(IV(u,e,t,r,s,o,l,n,i)).toVar();vR(a.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(a)}).ElseIf(a.lessThan(c.y),()=>{c.y.assign(a)})})})}),vR(i.equal(vL(0)),()=>{c.assign(_d(c))}),c}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]})]),IX=RC([IH,vM(([e,t,r])=>{let i=vL(r).toVar(),n=vI(t).toVar(),a=vz(e).toVar(),s=vL().toVar(),o=vL().toVar(),l=vL().toVar(),u=vz(Ig(a.x,s),Ig(a.y,o),Ig(a.z,l)).toVar(),c=vz(1e6,1e6,1e6).toVar();return wQ({start:-1,end:vL(1),name:"x",condition:"<="},({x:e})=>{wQ({start:-1,end:vL(1),name:"y",condition:"<="},({y:t})=>{wQ({start:-1,end:vL(1),name:"z",condition:"<="},({z:r})=>{let a=vI(IV(u,e,t,r,s,o,l,n,i)).toVar();vR(a.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(a)}).ElseIf(a.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(a)}).ElseIf(a.lessThan(c.z),()=>{c.z.assign(a)})})})}),vR(i.equal(vL(0)),()=>{c.assign(_d(c))}),c}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]})]),IQ=vM(([e,t,r,i,n,a,s,o,l,u,c])=>{let h=vL(e).toVar(),d=vF(t).toVar(),A=vF(r).toVar(),p=vF(i).toVar(),f=vI(n).toVar(),m=vI(a).toVar(),g=vI(s).toVar(),y=vB(o).toVar(),v=vL(l).toVar(),x=vI(u).toVar(),_=vI(c).toVar(),b=d.mul(A).add(p),S=vI(0).toVar();return vR(h.equal(vL(0)),()=>{S.assign(ID(b))}),vR(h.equal(vL(1)),()=>{S.assign(IF(b))}),vR(h.equal(vL(2)),()=>{S.assign(IX(b,f,vL(0)))}),vR(h.equal(vL(3)),()=>{S.assign(IU(vz(b,0),v,x,_))}),S.assign(S.mul(g.sub(m)).add(m)),vR(y,()=>{S.assign(_1(S,m,g))}),S}).setLayout({name:"mx_unifiednoise2d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"texcoord",type:"vec2"},{name:"freq",type:"vec2"},{name:"offset",type:"vec2"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),I$=vM(([e,t,r,i,n,a,s,o,l,u,c])=>{let h=vL(e).toVar(),d=vz(t).toVar(),A=vz(r).toVar(),p=vz(i).toVar(),f=vI(n).toVar(),m=vI(a).toVar(),g=vI(s).toVar(),y=vB(o).toVar(),v=vL(l).toVar(),x=vI(u).toVar(),_=vI(c).toVar(),b=d.mul(A).add(p),S=vI(0).toVar();return vR(h.equal(vL(0)),()=>{S.assign(ID(b))}),vR(h.equal(vL(1)),()=>{S.assign(IF(b))}),vR(h.equal(vL(2)),()=>{S.assign(IX(b,f,vL(0)))}),vR(h.equal(vL(3)),()=>{S.assign(IU(b,v,x,_))}),S.assign(S.mul(g.sub(m)).add(m)),vR(y,()=>{S.assign(_1(S,m,g))}),S}).setLayout({name:"mx_unifiednoise3d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"position",type:"vec3"},{name:"freq",type:"vec3"},{name:"offset",type:"vec3"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),IY=vM(([e])=>{let t=e.y,r=e.z,i=vz().toVar();return vR(t.lessThan(1e-4),()=>{i.assign(vz(r,r,r))}).Else(()=>{let n=e.x,a=vL(_L(n=n.sub(_p(n)).mul(6).toVar())),s=n.sub(vI(a)),o=r.mul(t.oneMinus()),l=r.mul(t.mul(s).oneMinus()),u=r.mul(t.mul(s.oneMinus()).oneMinus());vR(a.equal(vL(0)),()=>{i.assign(vz(r,u,o))}).ElseIf(a.equal(vL(1)),()=>{i.assign(vz(l,r,o))}).ElseIf(a.equal(vL(2)),()=>{i.assign(vz(o,r,u))}).ElseIf(a.equal(vL(3)),()=>{i.assign(vz(o,l,r))}).ElseIf(a.equal(vL(4)),()=>{i.assign(vz(u,o,r))}).Else(()=>{i.assign(vz(r,o,l))})}),i}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),IK=vM(([e])=>{let t=vz(e).toVar(),r=vI(t.x).toVar(),i=vI(t.y).toVar(),n=vI(t.z).toVar(),a=vI(_k(r,_k(i,n))).toVar(),s=vI(_z(r,_z(i,n))).toVar(),o=vI(s.sub(a)).toVar(),l=vI().toVar(),u=vI().toVar(),c=vI().toVar();return c.assign(s),vR(s.greaterThan(0),()=>{u.assign(o.div(s))}).Else(()=>{u.assign(0)}),vR(u.lessThanEqual(0),()=>{l.assign(0)}).Else(()=>{vR(r.greaterThanEqual(s),()=>{l.assign(i.sub(n).div(o))}).ElseIf(i.greaterThanEqual(s),()=>{l.assign(xB(2,n.sub(r).div(o)))}).Else(()=>{l.assign(xB(4,r.sub(i).div(o)))}),l.mulAssign(1/6),vR(l.lessThan(0),()=>{l.addAssign(1)})}),vz(l,u,c)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),IZ=vM(([e])=>{let t=vz(e).toVar(),r=vG(xG(t,vz(.04045))).toVar();return _0(vz(t.div(12.92)).toVar(),vz(_X(_z(t.add(vz(.055)),vz(0)).div(1.055),vz(2.4))).toVar(),r)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),IJ=(e,t)=>{e=vI(e);let r=vF((t=vI(t)).dFdx(),t.dFdy()).length().mul(.7071067811865476);return _4(e.sub(r),e.add(r),t)},I0=(e,t,r,i)=>_0(e,t,r[i].clamp()),I1=(e,t,r,i,n)=>_0(e,t,IJ(r,i[n])),I2=vM(([e,t,r])=>{let i=_m(e).toVar(),n=xF(vI(.5).mul(t.sub(r)),SY).div(i).toVar(),a=xF(vI(-.5).mul(t.sub(r)),SY).div(i).toVar(),s=vz().toVar();s.x=i.x.greaterThan(vI(0)).select(n.x,a.x),s.y=i.y.greaterThan(vI(0)).select(n.y,a.y),s.z=i.z.greaterThan(vI(0)).select(n.z,a.z);let o=_k(s.x,s.y,s.z).toVar();return SY.add(i.mul(o)).toVar().sub(r)}),I3=vM(([e,t])=>{let r=e.x,i=e.y,n=e.z,a=t.element(0).mul(.886227);return(a=(a=(a=(a=(a=(a=(a=a.add(t.element(1).mul(1.023328).mul(i))).add(t.element(2).mul(1.023328).mul(n))).add(t.element(3).mul(1.023328).mul(r))).add(t.element(4).mul(.858086).mul(r).mul(i))).add(t.element(5).mul(.858086).mul(i).mul(n))).add(t.element(6).mul(n.mul(n).mul(.743125).sub(.247708)))).add(t.element(7).mul(.858086).mul(r).mul(n))).add(t.element(8).mul(.429043).mul(xO(r,r).sub(xO(i,i))))});var I4=Object.freeze({__proto__:null,BRDF_GGX:M8,BRDF_Lambert:Mj,BasicPointShadowFilter:Ie,BasicShadowFilter:PX,Break:w$,Const:bc,Continue:()=>bj("continue").toStack(),DFGApprox:M9,D_GGX:M3,Discard:bW,EPSILON:x7,F_Schlick:MH,Fn:vM,HALF_PI:_i,INFINITY:x9,If:vR,Loop:wQ,NodeAccess:yL,NodeShaderStage:yP,NodeType:{BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},NodeUpdateType:yI,OnBeforeMaterialUpdate:e=>Nr(Nt.BEFORE_MATERIAL,e),OnBeforeObjectUpdate:e=>Nr(Nt.BEFORE_OBJECT,e),OnMaterialUpdate:e=>Nr(Nt.MATERIAL,e),OnObjectUpdate:e=>Nr(Nt.OBJECT,e),PCFShadowFilter:PQ,PCFSoftShadowFilter:P$,PI:_e,PI2:_t,PointShadowFilter:It,Return:()=>bj("return").toStack(),Schlick_to_F0:Er,ScriptableNodeResources:N$,ShaderNode:vm,Stack:vN,Switch:(...e)=>yJ.Switch(...e),TBNViewMatrix:TW,TWO_PI:_r,VSMShadowFilter:PY,V_GGX_SmithCorrelated:M1,Var:bu,VarIntent:bh,abs:_T,acesFilmicToneMapping:NF,acos:_b,add:xB,addMethodChaining:y1,addNodeElement:function(e){eI("TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",e)},agxToneMapping:Nz,all:_n,alphaT:xi,and:xW,anisotropy:xn,anisotropyB:xs,anisotropyT:xa,any:_a,append:e=>(eI("TSL: append() has been renamed to Stack()."),vN(e)),array:xR,arrayBuffer:e=>vg(new yK(e,"ArrayBuffer")),asin:__,assign:xN,atan:_S,atan2:be,atomicAdd:(e,t)=>Ps(Pn.ATOMIC_ADD,e,t),atomicAnd:(e,t)=>Ps(Pn.ATOMIC_AND,e,t),atomicFunc:Ps,atomicLoad:e=>Ps(Pn.ATOMIC_LOAD,e,null),atomicMax:(e,t)=>Ps(Pn.ATOMIC_MAX,e,t),atomicMin:(e,t)=>Ps(Pn.ATOMIC_MIN,e,t),atomicOr:(e,t)=>Ps(Pn.ATOMIC_OR,e,t),atomicStore:(e,t)=>Ps(Pn.ATOMIC_STORE,e,t),atomicSub:(e,t)=>Ps(Pn.ATOMIC_SUB,e,t),atomicXor:(e,t)=>Ps(Pn.ATOMIC_XOR,e,t),attenuationColor:xy,attenuationDistance:xg,attribute:b1,attributeArray:(e,t="float")=>{let r,i;return!0===t.isStruct?(r=t.layout.getLength(),i=yT("float")):(r=yw(t),i=yT(t)),wG(new Nn(e,r,i),t,e)},backgroundBlurriness:Nu,backgroundIntensity:Nc,backgroundRotation:Nh,batch:wz,bentNormalView:TQ,billboarding:RD,bitAnd:xY,bitNot:xK,bitOr:xZ,bitXor:xJ,bitangentGeometry:Tq,bitangentLocal:TG,bitangentView:TH,bitangentWorld:Tj,bitcast:R_,blendBurn:Mf,blendColor:Mv,blendDodge:Mm,blendOverlay:My,blendScreen:Mg,blur:E1,bool:vB,buffer:St,bufferAttribute:bN,builtin:Sa,bumpMap:TZ,burn:(...e)=>(eI('TSL: "burn" has been renamed. Use "blendBurn" instead.'),Mf(e)),bvec2:vk,bvec3:vG,bvec4:vX,bypass:bz,cache:bk,call:xI,cameraFar:Sy,cameraIndex:Sm,cameraNear:Sg,cameraNormalMatrix:SS,cameraPosition:ST,cameraProjectionMatrix:Sv,cameraProjectionMatrixInverse:Sx,cameraViewMatrix:S_,cameraViewport:Sw,cameraWorldMatrix:Sb,cbrt:_Z,cdl:Nw,ceil:_f,checker:Id,cineonToneMapping:ND,clamp:_1,clearcoat:v8,clearcoatNormalView:Te,clearcoatRoughness:v6,code:NG,color:vP,colorSpaceToWorking:b_,colorToDirection:e=>vg(e).mul(2).sub(1),compute:bF,computeKernel:bB,computeSkinning:(e,t=null)=>{let r=new wj(e);return r.positionNode=wG(new i1(e.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(wI).toVar(),r.skinIndexNode=wG(new i1(new Uint32Array(e.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(wI).toVar(),r.skinWeightNode=wG(new i1(e.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(wI).toVar(),r.bindMatrixNode=xE(e.bindMatrix,"mat4"),r.bindMatrixInverseNode=xE(e.bindMatrixInverse,"mat4"),r.boneMatricesNode=St(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length),r.toPositionNode=t,vg(r)},context:bi,convert:vZ,convertColorSpace:(e,t,r)=>vg(new bv(vg(e),t,r)),convertToTexture:(e,...t)=>e.isSampleNode||e.isTextureNode?e:e.isPassNode?e.getTextureNode():R5(e,...t),cos:_v,cross:_W,cubeTexture:Tg,cubeTextureBase:Tm,cubeToUV:P9,dFdx:_R,dFdy:_N,dashSize:xh,debug:bY,decrement:x5,decrementBefore:x3,defaultBuildStages:yB,defaultShaderStages:yD,defined:vp,degrees:_o,deltaTime:RN,densityFog:function(e,t){return eI('TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),N0(e,NJ(t))},densityFogFactor:NJ,depth:Ms,depthPass:(e,t,r)=>vg(new NN(NN.DEPTH,e,t,r)),determinant:_F,difference:_H,diffuseColor:v2,directPointLight:Ic,directionToColor:MR,directionToFaceDirection:S2,dispersion:xv,distance:_G,div:xU,dodge:(...e)=>(eI('TSL: "dodge" has been renamed. Use "blendDodge" instead.'),Mm(e)),dot:_j,drawIndex:wF,dynamicBufferAttribute:bP,element:vK,emissive:v3,equal:xz,equals:_U,equirectUV:MI,exp:_l,exp2:_u,expression:bj,faceDirection:S1,faceForward:_5,faceforward:_5,float:vI,floatBitsToInt:e=>new Rx(e,"int","float"),floatBitsToUint:e=>new Rx(e,"uint","float"),floor:_p,fog:N0,fract:_g,frameGroup:xS,frameId:RP,frontFacing:S0,fwidth:_D,gain:(e,t)=>e.lessThan(.5)?RS(e.mul(2),t).div(2):xF(1,RS(xO(xF(1,e),2),t).div(2)),gapSize:xd,getConstNodeType:vf,getCurrentStack:vC,getDirection:EK,getDistanceAttenuation:Iu,getGeometryRoughness:MJ,getNormalFromDepth:R7,getParallaxCorrectNormal:I2,getRoughness:M0,getScreenPosition:R6,getShIrradianceAt:I3,getShadowMaterial:PZ,getShadowRenderObjectFunction:P1,getTextureIndex:Ry,getViewPosition:R8,ggxConvolution:E5,globalId:N7,glsl:(e,t)=>NG(e,t,"glsl"),glslFn:(e,t)=>Nj(e,t,"glsl"),grayscale:Nx,greaterThan:xG,greaterThanEqual:xj,hash:Rb,highpModelNormalViewMatrix:SW,highpModelViewMatrix:Sj,hue:NS,increment:x4,incrementBefore:x2,inspector:bJ,instance:wU,instanceIndex:wI,instancedArray:(e,t="float")=>{let r,i;return!0===t.isStruct?(r=t.layout.getLength(),i=yT("float")):(r=yw(t),i=yT(t)),wG(new Ni(e,r,i),t,e)},instancedBufferAttribute:bI,instancedDynamicBufferAttribute:bL,instancedMesh:wk,int:vL,intBitsToFloat:e=>new Rx(e,"float","int"),interleavedGradientNoise:R9,inverse:_O,inverseSqrt:_A,inversesqrt:_A,invocationLocalIndex:wB,invocationSubgroupIndex:wD,ior:xp,iridescence:xe,iridescenceIOR:xt,iridescenceThickness:xr,isolate:bU,ivec2:vO,ivec3:vV,ivec4:vj,js:(e,t)=>NG(e,t,"js"),label:bs,length:_M,lengthSq:_J,lessThan:xq,lessThanEqual:xH,lightPosition:PF,lightProjectionUV:PB,lightShadowMatrix:PD,lightTargetDirection:Pk,lightTargetPosition:PO,lightViewPosition:PU,lightingContext:w2,lights:(e=[])=>vg(new PG).setLights(e),linearDepth:Mo,linearToneMapping:NI,localId:N9,log:_c,log2:_h,logarithmicDepthToViewZ:(e,t,r)=>{let i=e.mul(_c(r.div(t)));return vI(Math.E).pow(i).mul(t).negate()},luminance:NT,mat2:vQ,mat3:v$,mat4:vY,matcapUV:CC,materialAO:wE,materialAlphaTest:T1,materialAnisotropy:wc,materialAnisotropyVector:wC,materialAttenuationColor:wy,materialAttenuationDistance:wg,materialClearcoat:wn,materialClearcoatNormal:ws,materialClearcoatRoughness:wa,materialColor:T2,materialDispersion:ww,materialEmissive:T4,materialEnvIntensity:Tu,materialEnvRotation:Tc,materialIOR:wm,materialIridescence:wh,materialIridescenceIOR:wd,materialIridescenceThickness:wA,materialLightMap:wM,materialLineDashOffset:wS,materialLineDashSize:wx,materialLineGapSize:w_,materialLineScale:wv,materialLineWidth:wb,materialMetalness:wr,materialNormal:wi,materialOpacity:T5,materialPointSize:wT,materialReference:TS,materialReflectivity:we,materialRefractionRatio:Tl,materialRotation:wo,materialRoughness:wt,materialSheen:wl,materialSheenRoughness:wu,materialShininess:T3,materialSpecular:T8,materialSpecularColor:T7,materialSpecularIntensity:T6,materialSpecularStrength:T9,materialThickness:wf,materialTransmission:wp,max:_z,maxMipLevel:b4,mediumpModelViewMatrix:SH,metalness:v5,min:_k,mix:_0,mixElement:_6,mod:xk,modInt:x8,modelDirection:SB,modelNormalMatrix:SV,modelPosition:SO,modelRadius:Sz,modelScale:SU,modelViewMatrix:SG,modelViewPosition:Sk,modelViewProjection:wR,modelWorldMatrix:SF,modelWorldMatrixInverse:Sq,morphReference:wJ,mrt:Rv,mul:xO,mx_aastep:IJ,mx_add:(e,t=vI(0))=>xB(e,t),mx_atan2:(e=vI(0),t=vI(1))=>_S(e,t),mx_cell_noise_float:(e=b2())=>IB(e.convert("vec2|vec3")),mx_contrast:(e,t=1,r=.5)=>vI(e).sub(r).mul(t).add(r),mx_divide:(e,t=vI(1))=>xU(e,t),mx_fractal_noise_float:(e=b2(),t=3,r=2,i=.5,n=1)=>IO(e,vL(t),r,i).mul(n),mx_fractal_noise_vec2:(e=b2(),t=3,r=2,i=.5,n=1)=>Ik(e,vL(t),r,i).mul(n),mx_fractal_noise_vec3:(e=b2(),t=3,r=2,i=.5,n=1)=>IU(e,vL(t),r,i).mul(n),mx_fractal_noise_vec4:(e=b2(),t=3,r=2,i=.5,n=1)=>Iz(e,vL(t),r,i).mul(n),mx_frame:()=>RP,mx_heighttonormal:(e,t)=>TZ(e=vz(e),t=vI(t)),mx_hsvtorgb:IY,mx_ifequal:(e,t,r,i)=>e.equal(t).mix(r,i),mx_ifgreater:(e,t,r,i)=>e.greaterThan(t).mix(r,i),mx_ifgreatereq:(e,t,r,i)=>e.greaterThanEqual(t).mix(r,i),mx_invert:(e,t=vI(1))=>xF(t,e),mx_modulo:(e,t=vI(1))=>xk(e,t),mx_multiply:(e,t=vI(1))=>xO(e,t),mx_noise_float:(e=b2(),t=1,r=0)=>IL(e.convert("vec2|vec3")).mul(t).add(r),mx_noise_vec3:(e=b2(),t=1,r=0)=>ID(e.convert("vec2|vec3")).mul(t).add(r),mx_noise_vec4:(e=b2(),t=1,r=0)=>vH(ID(e=e.convert("vec2|vec3")),IL(e.add(vF(19,73)))).mul(t).add(r),mx_place2d:(e,t=vF(.5,.5),r=vF(1,1),i=vI(0),n=vF(0,0))=>{let a=e;if(t&&(a=a.sub(t)),r&&(a=a.mul(r)),i){let e=i.mul(Math.PI/180),t=e.cos(),r=e.sin();a=vF(a.x.mul(t).sub(a.y.mul(r)),a.x.mul(r).add(a.y.mul(t)))}return t&&(a=a.add(t)),n&&(a=a.add(n)),a},mx_power:(e,t=vI(1))=>_X(e,t),mx_ramp4:(e,t,r,i,n=b2())=>{let a=n.x.clamp(),s=n.y.clamp(),o=_0(e,t,a),l=_0(r,i,a);return _0(o,l,s)},mx_ramplr:(e,t,r=b2())=>I0(e,t,r,"x"),mx_ramptb:(e,t,r=b2())=>I0(e,t,r,"y"),mx_rgbtohsv:IK,mx_rotate2d:(e,t)=>CP(e=vF(e),(t=vI(t)).mul(Math.PI/180)),mx_rotate3d:(e,t,r)=>{e=vz(e),t=vI(t),r=vz(r);let i=t.mul(Math.PI/180),n=r.normalize(),a=i.cos(),s=i.sin(),o=vI(1).sub(a);return e.mul(a).add(n.cross(e).mul(s)).add(n.mul(n.dot(e)).mul(o))},mx_safepower:(e,t=1)=>(e=vI(e)).abs().pow(t).mul(e.sign()),mx_separate:(e,t=null)=>{if("string"==typeof t){let r={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},i=t.replace(/^out/,"").toLowerCase();if(void 0!==r[i])return e.element(r[i])}if("number"==typeof t)return e.element(t);if("string"==typeof t&&1===t.length){let r={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3};if(void 0!==r[t])return e.element(r[t])}return e},mx_splitlr:(e,t,r,i=b2())=>I1(e,t,r,i,"x"),mx_splittb:(e,t,r,i=b2())=>I1(e,t,r,i,"y"),mx_srgb_texture_to_lin_rec709:IZ,mx_subtract:(e,t=vI(0))=>xF(e,t),mx_timer:()=>RR,mx_transform_uv:(e=1,t=0,r=b2())=>r.mul(e).add(t),mx_unifiednoise2d:(e,t=b2(),r=vF(1,1),i=vF(0,0),n=1,a=0,s=1,o=!1,l=1,u=2,c=.5)=>IQ(e,t.convert("vec2|vec3"),r,i,n,a,s,o,l,u,c),mx_unifiednoise3d:(e,t=b2(),r=vF(1,1),i=vF(0,0),n=1,a=0,s=1,o=!1,l=1,u=2,c=.5)=>I$(e,t.convert("vec2|vec3"),r,i,n,a,s,o,l,u,c),mx_worley_noise_float:(e=b2(),t=1)=>Ij(e.convert("vec2|vec3"),t,vL(1)),mx_worley_noise_vec2:(e=b2(),t=1)=>IW(e.convert("vec2|vec3"),t,vL(1)),mx_worley_noise_vec3:(e=b2(),t=1)=>IX(e.convert("vec2|vec3"),t,vL(1)),negate:_E,neutralToneMapping:NV,nodeArray:vx,nodeImmutable:vb,nodeObject:vg,nodeObjectIntent:vy,nodeObjects:vv,nodeProxy:v_,nodeProxyIntent:vS,normalFlat:S5,normalGeometry:S3,normalLocal:S4,normalMap:T$,normalView:S7,normalViewGeometry:S8,normalWorld:S9,normalWorldGeometry:S6,normalize:_m,not:xQ,notEqual:xV,numWorkgroups:N8,objectDirection:SC,objectGroup:xw,objectPosition:SN,objectRadius:SL,objectScale:SP,objectViewPosition:SI,objectWorldMatrix:SR,oneMinus:_C,or:xX,orthographicDepthToViewZ:(e,t,r)=>t.sub(r).mul(e).sub(t),oscSawtooth:(e=RR)=>e.fract(),oscSine:(e=RR)=>e.add(.75).mul(2*Math.PI).sin().mul(.5).add(.5),oscSquare:(e=RR)=>e.fract().round(),oscTriangle:(e=RR)=>e.add(.5).fract().mul(2).sub(1).abs(),output:xc,outputStruct:Rg,overlay:(...e)=>(eI('TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),My(e)),overloadingFn:RC,parabola:RS,parallaxDirection:TX,parallaxUV:(e,t)=>e.sub(TX.mul(t)),parameter:(e,t)=>vg(new Rd(e,t)),pass:(e,t,r)=>vg(new NN(NN.COLOR,e,t,r)),passTexture:(e,t)=>vg(new NC(e,t)),pcurve:(e,t,r)=>_X(xU(_X(e,t),xB(_X(e,t),_X(xF(1,e),r))),1/t),perspectiveDepthToViewZ:Mi,pmremTexture:Cf,pointShadow:Io,pointUV:Na,pointWidth:xA,positionGeometry:SX,positionLocal:SQ,positionPrevious:S$,positionView:SZ,positionViewDirection:SJ,positionWorld:SY,positionWorldDirection:SK,posterize:NM,pow:_X,pow2:_Q,pow3:_$,pow4:_Y,premultiplyAlpha:Mx,property:v0,quadBroadcast:PI,quadSwapDiagonal:PM,quadSwapX:PT,quadSwapY:Pw,radians:_s,rand:_8,range:N3,rangeFog:function(e,t,r){return eI('TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),N0(e,NZ(t,r))},rangeFogFactor:NZ,reciprocal:_I,reference:Tx,referenceBuffer:T_,reflect:_q,reflectVector:TA,reflectView:Th,reflector:e=>vg(new RZ(e)),refract:_3,refractVector:Tp,refractView:Td,reinhardToneMapping:NL,remap:bq,remapClamp:bG,renderGroup:xT,renderOutput:bQ,rendererReference:bw,rotate:CP,rotateUV:RI,roughness:v4,round:_P,rtt:R5,sRGBTransferEOTF:bm,sRGBTransferOETF:bg,sample:(e,t=null)=>vg(new Ne(e,vg(t))),sampler:e=>(!0===e.isNode?e:b7(e)).convert("sampler"),samplerComparison:e=>(!0===e.isNode?e:b7(e)).convert("samplerComparison"),saturate:_2,saturation:N_,screen:(...e)=>(eI('TSL: "screen" has been renamed. Use "blendScreen" instead.'),Mg(e)),screenCoordinate:Sc,screenDPR:So,screenSize:Su,screenUV:Sl,scriptable:NY,scriptableValue:NW,select:bt,setCurrentStack:vE,setName:ba,shaderStages:yF,shadow:P6,shadowPositionWorld:Pj,shapeCircle:IA,sharedUniformGroup:xb,sheen:v7,sheenRoughness:v9,shiftLeft:x0,shiftRight:x1,shininess:xu,sign:_w,sin:_y,sinc:(e,t)=>_y(_e.mul(t.mul(e).sub(1))).div(_e.mul(t.mul(e).sub(1))),skinning:wW,smoothstep:_4,smoothstepElement:_7,specularColor:xo,specularF90:xl,spherizeUV:RL,split:(e,t)=>vg(new yW(vg(e),t)),spritesheetUV:RF,sqrt:_d,stack:RA,step:_V,stepElement:_9,storage:wG,storageBarrier:()=>Pt("storage").toStack(),storageObject:(e,t,r)=>(eI('TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),wG(e,t,r).setPBO(!0)),storageTexture:Nd,string:(e="")=>vg(new yK(e,"string")),struct:(e,t=null)=>{let r=new Rp(e,t),i=(...t)=>{let i=null;if(t.length>0)if(t[0].isNode){i={};let r=Object.keys(e);for(let e=0;e<t.length;e++)i[r[e]]=t[e]}else i=t[0];return vg(new Rf(r,i))};return i.layout=r,i.isStruct=!0,i},sub:xF,subBuild:bA,subgroupAdd:Pc,subgroupAll:P_,subgroupAnd:Pm,subgroupAny:Pb,subgroupBallot:Pu,subgroupBroadcast:PE,subgroupBroadcastFirst:PS,subgroupElect:Pl,subgroupExclusiveAdd:Pd,subgroupExclusiveMul:Pf,subgroupInclusiveAdd:Ph,subgroupInclusiveMul:Pp,subgroupIndex:wL,subgroupMax:Px,subgroupMin:Pv,subgroupMul:PA,subgroupOr:Pg,subgroupShuffle:PC,subgroupShuffleDown:PP,subgroupShuffleUp:PN,subgroupShuffleXor:PR,subgroupSize:Pe,subgroupXor:Py,tan:_x,tangentGeometry:TO,tangentLocal:TU,tangentView:Tk,tangentWorld:Tz,texture:b7,texture3D:Np,textureBarrier:()=>Pt("texture").toStack(),textureBicubic:E_,textureBicubicLevel:Ex,textureCubeUV:EZ,textureLevel:(e,t,r)=>b7(e,t).level(r),textureLoad:b9,textureSize:b3,textureStore:(e,t,r)=>{let i=Nd(e,t,r);return null!==r&&i.toStack(),i},thickness:xm,time:RR,toneMapping:bE,toneMappingExposure:bC,toonOutlinePass:(e,t,r=new ry(0,0,0),i=.003,n=1)=>vg(new NP(e,t,vg(r),vg(i),vg(n))),transformDirection:_K,transformNormal:Tt,transformNormalToView:Tr,transformedClearcoatNormalView:Ta,transformedNormalView:Ti,transformedNormalWorld:Tn,transmission:xf,transpose:_B,triNoise3D:RM,triplanarTexture:(...e)=>RO(...e),triplanarTextures:RO,trunc:_L,uint:vD,uintBitsToFloat:e=>new Rx(e,"float","uint"),uniform:xE,uniformArray:Sn,uniformCubeTexture:(e=Tf)=>Tm(e),uniformFlow:bn,uniformGroup:x_,uniformTexture:(e=b5)=>b7(e),unpremultiplyAlpha:M_,userData:(e,t,r)=>vg(new Nf(e,t,r)),uv:b2,uvec2:vU,uvec3:vq,uvec4:vW,varying:bp,varyingProperty:v1,vec2:vF,vec3:vz,vec4:vH,vectorComponents:yO,velocity:Nv,vertexColor:Mp,vertexIndex:wP,vertexStage:bf,vibrance:Nb,viewZToLogarithmicDepth:Mn,viewZToOrthographicDepth:Mt,viewZToPerspectiveDepth:Mr,viewport:Sh,viewportCoordinate:SA,viewportDepthTexture:w9,viewportLinearDepth:Ml,viewportMipTexture:w6,viewportResolution:Sf,viewportSafeUV:RB,viewportSharedTexture:MC,viewportSize:Sd,viewportTexture:w8,viewportUV:Sp,wgsl:(e,t)=>NG(e,t,"wgsl"),wgslFn:(e,t)=>Nj(e,t,"wgsl"),workgroupArray:(e,t)=>vg(new Pi("Workgroup",e,t)),workgroupBarrier:()=>Pt("workgroup").toStack(),workgroupId:N6,workingToColorSpace:bx,xor:x$});let I5=new Rh;class I8 extends CX{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,r){let i=this.renderer,n=this.nodes.getBackgroundNode(e)||e.background,a=!1;if(null===n)i._clearColor.getRGB(I5),I5.a=i._clearColor.a;else if(!0===n.isColor)n.getRGB(I5),I5.a=1,a=!0;else if(!0===n.isNode){let r=this.get(e);I5.copy(i._clearColor);let a=r.backgroundMesh;if(void 0===a){let e=bi(vH(n).mul(Nc),{getUV:()=>Nh.mul(S6),getTextureLevel:()=>Nu}),t=wR;t=t.setZ(t.w);let i=new Mb;i.name="Background.material",i.side=1,i.depthTest=!1,i.depthWrite=!1,i.allowOverride=!1,i.fog=!1,i.lights=!1,i.vertexNode=t,i.colorNode=e,r.backgroundMeshNode=e,r.backgroundMesh=a=new r5(new a2(1,32,32),i),a.frustumCulled=!1,a.name="Background.mesh",a.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},n.addEventListener("dispose",function e(){n.removeEventListener("dispose",e),a.material.dispose(),a.geometry.dispose()})}let s=n.getCacheKey();r.backgroundCacheKey!==s&&(r.backgroundMeshNode.node=vH(n).mul(Nc),r.backgroundMeshNode.needsUpdate=!0,a.material.needsUpdate=!0,r.backgroundCacheKey=s),t.unshift(a,a.geometry,a.material,0,0,null,null)}else eL("Renderer: Unsupported background configuration.",n);let s=i.xr.getEnvironmentBlendMode();if("additive"===s?I5.set(0,0,0,1):"alpha-blend"===s&&I5.set(0,0,0,0),!0===i.autoClear||!0===a){let e=r.clearColorValue;e.r=I5.r,e.g=I5.g,e.b=I5.b,e.a=I5.a,(!0===i.backend.isWebGLBackend||!0===i.alpha)&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),r.depthClearValue=i._clearDepth,r.stencilClearValue=i._clearStencil,r.clearColor=!0===i.autoClearColor,r.clearDepth=!0===i.autoClearDepth,r.clearStencil=!0===i.autoClearStencil}else r.clearColor=!1,r.clearDepth=!1,r.clearStencil=!1}}let I6=0;class I7{constructor(e="",t=[],r=0,i=[]){this.name=e,this.bindings=t,this.index=r,this.bindingsReference=i,this.id=I6++}}class I9{constructor(e,t,r,i,n,a,s,o,l,u=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=r,this.transforms=u,this.nodeAttributes=i,this.bindings=n,this.updateNodes=a,this.updateBeforeNodes=s,this.updateAfterNodes=o,this.observer=l,this.usedTimes=0}createBindings(){let e=[];for(let t of this.bindings)if(!0!==t.bindings[0].groupNode.shared){let r=new I7(t.name,[],t.index,t.bindingsReference);for(let i of(e.push(r),t.bindings))r.bindings.push(i.clone())}else e.push(t);return e}}class Le{constructor(e,t,r=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=r}}class Lt{constructor(e,t,r){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=r}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class Lr{constructor(e,t,r=!1,i=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=r,this.count=i}}class Li extends Lr{constructor(e,t,r=null,i=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=r,this.interpolationSampling=i}}class Ln{constructor(e,t,r=""){this.name=e,this.type=t,this.code=r,Object.defineProperty(this,"isNodeCode",{value:!0})}}let La=0;class Ls{constructor(e=null){this.id=La++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return void 0===t&&null!==this.parent&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class Lo{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class Ll{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class Lu extends Ll{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class Lc extends Ll{constructor(e,t=new eX){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class Lh extends Ll{constructor(e,t=new e$){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class Ld extends Ll{constructor(e,t=new tr){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class LA extends Ll{constructor(e,t=new ry){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class Lp extends Ll{constructor(e,t=new o4){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class Lf extends Ll{constructor(e,t=new eZ){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class Lm extends Ll{constructor(e,t=new tF){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class Lg extends Lu{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Ly extends Lc{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Lv extends Lh{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Lx extends Ld{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class L_ extends LA{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Lb extends Lp{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class LS extends Lf{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class LT extends Lm{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}let Lw=0,LM=new WeakMap,LE=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),LC=e=>/e/g.test(e)?String(e).replace(/\+/g,""):(e=Number(e))+(e%1?"":".0");class LR{constructor(e,t,r){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=r,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.types={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=RA(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new Ls,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.activeStacks=[],this.subBuildFn=null,this.fnCall=null,Object.defineProperty(this,"id",{value:Lw++})}isOpaque(){let e=this.material;return!1===e.transparent&&1===e.blending&&!1===e.alphaToCoverage}getBindGroupsCache(){let e=LM.get(this.renderer);return void 0===e&&(e=new Cq,LM.set(this.renderer,e)),e}createRenderTarget(e,t,r){return new ti(e,t,r)}createCubeRenderTarget(e,t){return new ML(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){let r,i=this.getBindGroupsCache(),n=[],a=!0;for(let e of t)n.push(e),a=a&&!0!==e.groupNode.shared;return a?void 0===(r=i.get(n))&&(r=new I7(e,n,this.bindingsIndexes[e].group,n),i.set(n,r)):r=new I7(e,n,this.bindingsIndexes[e].group,n),r}getBindGroupArray(e,t){let r=this.bindings[t],i=r[e];return void 0===i&&(void 0===this.bindingsIndexes[e]&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),r[e]=i=[]),i}getBindings(){let e=this.bindGroups;if(null===e){let t={},r=this.bindings;for(let e of yF)for(let i in r[e]){let n=r[e][i];(t[i]||(t[i]=[])).push(...n)}for(let r in e=[],t){let i=t[r],n=this._getBindGroup(r,i);e.push(n)}this.bindGroups=e}return e}sortBindingGroups(){let e=this.getBindings();e.sort((e,t)=>e.bindings[0].groupNode.order-t.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){let r=e[t];this.bindingsIndexes[r.name].group=t,r.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){!1===this.nodes.includes(e)&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){!1===this.sequentialNodes.includes(e)&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(let e of this.nodes)e.getUpdateType()!==yI.NONE&&this.updateNodes.push(e);for(let e of this.sequentialNodes){let t=e.getUpdateBeforeType(),r=e.getUpdateAfterType();t!==yI.NONE&&this.updateBeforeNodes.push(e),r!==yI.NONE&&this.updateAfterNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return 1006===e.magFilter||1007===e.magFilter||1005===e.magFilter||1008===e.magFilter||1006===e.minFilter||1007===e.minFilter||1005===e.minFilter||1008===e.minFilter}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getTernary(){return null}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}addContext(e){let t=this.getContext();return this.setContext({...this.context,...e}),t}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){let r=this.getDataFromNode(e);return void 0===r.cache&&(r.cache=new Ls(t?this.getCache():null)),r.cache}isAvailable(){return!1}getVertexIndex(){eI("Abstract function.")}getInstanceIndex(){eI("Abstract function.")}getDrawIndex(){eI("Abstract function.")}getFrontFacing(){eI("Abstract function.")}getFragCoord(){eI("Abstract function.")}isFlipY(){return!1}increaseUsage(e){let t=this.getDataFromNode(e);return t.usageCount=void 0===t.usageCount?1:t.usageCount+1,t.usageCount}generateTexture(){eI("Abstract function.")}generateTextureLod(){eI("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,r=null){let i=this.generateArrayDeclaration(e,t)+"( ";for(let n=0;n<t;n++){let a=r?r[n]:null;null!==a?i+=a.build(this,e):i+=this.generateConst(e),n<t-1&&(i+=", ")}return i+" )"}generateStruct(e,t,r=null){let i=[];for(let e of t){let{name:t,type:n}=e;r&&r[t]&&r[t].isNode?i.push(r[t].build(this,n)):i.push(this.generateConst(n))}return e+"( "+i.join(", ")+" )"}generateConst(e,t=null){if(null===t&&("float"===e||"int"===e||"uint"===e?t=0:"bool"===e?t=!1:"color"===e?t=new ry:"vec2"===e?t=new eX:"vec3"===e?t=new e$:"vec4"===e&&(t=new tr)),"float"===e)return LC(t);if("int"===e)return`${Math.round(t)}`;if("uint"===e)return t>=0?`${Math.round(t)}u`:"0u";if("bool"===e)return t?"true":"false";if("color"===e)return`${this.getType("vec3")}( ${LC(t.r)}, ${LC(t.g)}, ${LC(t.b)} )`;let r=this.getTypeLength(e),i=this.getComponentType(e),n=e=>this.generateConst(i,e);if(2===r)return`${this.getType(e)}( ${n(t.x)}, ${n(t.y)} )`;if(3===r)return`${this.getType(e)}( ${n(t.x)}, ${n(t.y)}, ${n(t.z)} )`;if(4===r&&"mat2"!==e)return`${this.getType(e)}( ${n(t.x)}, ${n(t.y)}, ${n(t.z)}, ${n(t.w)} )`;if(r>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(n).join(", ")} )`;if(r>4)return`${this.getType(e)}()`;throw Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return"color"===e?"vec3":e}hasGeometryAttribute(e){return this.geometry&&void 0!==this.geometry.getAttribute(e)}getAttribute(e,t){let r=this.attributes;for(let t of r)if(t.name===e)return t;let i=new Le(e,t);return this.registerDeclaration(i),r.push(i),i}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return"void"===e||"property"===e||"sampler"===e||"samplerComparison"===e||"texture"===e||"cubeTexture"===e||"storageTexture"===e||"depthTexture"===e||"texture3D"===e}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){let t=e.type;if(e.isDataTexture){if(1013===t)return"int";if(1014===t)return"uint"}return"float"}getElementType(e){return"mat2"===e?"vec2":"mat3"===e?"vec3":"mat4"===e?"vec4":this.getComponentType(e)}getComponentType(e){if("float"===(e=this.getVectorType(e))||"bool"===e||"int"===e||"uint"===e)return e;let t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return null===t?null:"b"===t[1]?"bool":"i"===t[1]?"int":"u"===t[1]?"uint":"float"}getVectorType(e){return"color"===e?"vec3":"texture"===e||"cubeTexture"===e||"storageTexture"===e||"texture3D"===e?"vec4":e}getTypeFromLength(e,t="float"){if(1===e)return t;let r=yb.get(e),i="float"===t?"":t[0];return!0===/mat2/.test(t)&&(r=r.replace("vec","mat")),i+r}getTypeFromArray(e){return LE.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t,r=e;e.isInterleavedBufferAttribute&&(r=e.data);let i=r.array,n=e.itemSize,a=e.normalized;return e instanceof rU||!0===a||(t=this.getTypeFromArray(i)),this.getTypeFromLength(n,t)}getTypeLength(e){let t=this.getVectorType(e),r=/vec([2-4])/.exec(t);return null!==r?Number(r[1]):"float"===t||"bool"===t||"int"===t||"uint"===t?1:!0===/mat2/.test(e)?4:!0===/mat3/.test(e)?9:16*(!0===/mat4/.test(e))}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){let t=this.getComponentType(e);return"int"===t||"uint"===t?e:this.changeComponentType(e,"int")}setActiveStack(e){this.activeStacks.push(e)}removeActiveStack(e){if(this.activeStacks[this.activeStacks.length-1]===e)this.activeStacks.pop();else throw Error("NodeBuilder: Invalid active stack removal.")}getActiveStack(){return this.activeStacks[this.activeStacks.length-1]}getBaseStack(){return this.activeStacks[0]}addStack(){this.stack=RA(this.stack);let e=vC();return this.stacks.push(e),vE(this.stack),this.stack}removeStack(){let e=this.stack;for(let t of e.nodes)this.getDataFromNode(t).stack=e;return this.stack=e.parent,vE(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,r=null){let i=(r=null===r?e.isGlobal(this)?this.globalCache:this.cache:r).getData(e);void 0===i&&(i={},r.setData(e,i)),void 0===i[t]&&(i[t]={});let n=i[t],a=i.any?i.any.subBuilds:null,s=this.getClosestSubBuild(a);return s&&(void 0===n.subBuildsCache&&(n.subBuildsCache={}),(n=n.subBuildsCache[s]||(n.subBuildsCache[s]={})).subBuilds=a),n}getNodeProperties(e,t="any"){let r=this.getDataFromNode(e,t);return r.properties||(r.properties={outputNode:null})}getBufferAttributeFromNode(e,t){let r=this.getDataFromNode(e),i=r.bufferAttribute;return void 0===i&&(i=new Le("nodeAttribute"+this.uniforms.index++,t,e),this.bufferAttributes.push(i),r.bufferAttribute=i),i}getStructTypeNode(e,t=this.shaderStage){return this.types[t][e]||null}getStructTypeFromNode(e,t,r=null,i=this.shaderStage){let n=this.getDataFromNode(e,i,this.globalCache),a=n.structType;if(void 0===a){let s=this.structs.index++;null===r&&(r="StructType"+s),a=new Lo(r,t),this.structs[i].push(a),this.types[i][r]=e,n.structType=a}return a}getOutputStructTypeFromNode(e,t){let r=this.getStructTypeFromNode(e,t,"OutputType","fragment");return r.output=!0,r}getUniformFromNode(e,t,r=this.shaderStage,i=null){let n=this.getDataFromNode(e,r,this.globalCache),a=n.uniform;if(void 0===a){let s=this.uniforms.index++;a=new Lt(i||"nodeUniform"+s,t,e),this.uniforms[r].push(a),this.registerDeclaration(a),n.uniform=a}return a}getVarFromNode(e,t=null,r=e.getNodeType(this),i=this.shaderStage,n=!1){let a=this.getDataFromNode(e,i),s=this.getSubBuildProperty("variable",a.subBuilds),o=a[s];if(void 0===o){let l=n?"_const":"_var",u=this.vars[i]||(this.vars[i]=[]),c=this.vars[l]||(this.vars[l]=0);null===t&&(t=(n?"nodeConst":"nodeVar")+c,this.vars[l]++),"variable"!==s&&(t=this.getSubBuildProperty(t,a.subBuilds));let h=e.getArrayCount(this);o=new Lr(t,r,n,h),n||u.push(o),this.registerDeclaration(o),a[s]=o}return o}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(!e.bNode||this.isDeterministic(e.bNode))&&(!e.cNode||this.isDeterministic(e.cNode));if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(!e.bNode||this.isDeterministic(e.bNode));if(e.isArrayNode){if(null!==e.values){for(let t of e.values)if(!this.isDeterministic(t))return!1}return!0}return!!e.isConstNode||!1}getVaryingFromNode(e,t=null,r=e.getNodeType(this),i=null,n=null){let a=this.getDataFromNode(e,"any"),s=this.getSubBuildProperty("varying",a.subBuilds),o=a[s];if(void 0===o){let e=this.varyings,l=e.length;null===t&&(t="nodeVarying"+l),"varying"!==s&&(t=this.getSubBuildProperty(t,a.subBuilds)),o=new Li(t,r,i,n),e.push(o),this.registerDeclaration(o),a[s]=o}return o}registerDeclaration(e){let t=this.shaderStage,r=this.declarations[t]||(this.declarations[t]={}),i=this.getPropertyName(e),n=1,a=i;for(;void 0!==r[a];)a=i+"_"+n++;n>1&&(e.name=a,eI(`TSL: Declaration name '${i}' of '${e.type}' already in use. Renamed to '${a}'.`)),r[a]=e}getCodeFromNode(e,t,r=this.shaderStage){let i=this.getDataFromNode(e),n=i.code;if(void 0===n){let e=this.codes[r]||(this.codes[r]=[]);n=new Ln("nodeCode"+e.length,t),e.push(n),i.code=n}return n}addFlowCodeHierarchy(e,t){let{flowCodes:r,flowCodeBlock:i}=this.getDataFromNode(e),n=!0,a=t;for(;a;){if(!0===i.get(a)){n=!1;break}a=this.getDataFromNode(a).parentNodeBlock}if(n)for(let e of r)this.addLineFlowCode(e)}addLineFlowCodeBlock(e,t,r){let i=this.getDataFromNode(e),n=i.flowCodes||(i.flowCodes=[]),a=i.flowCodeBlock||(i.flowCodeBlock=new WeakMap);n.push(t),a.set(r,!0)}addLineFlowCode(e,t=null){return""===e||(null!==t&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e+=";\n"),this.flow.code+=e),this}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){let t=e.getNodeType(this),r=this.flowChildNode(e,t);return this.flowsData.set(e,r),r}addInclude(e){null!==this.currentFunctionNode&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){let t=new NH,r=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=r,t}flowShaderNode(e){let t=e.layout,r={[Symbol.iterator](){let e=0,t=Object.values(this);return{next:()=>({value:t[e],done:e++>=t.length})}}};for(let e of t.inputs)r[e.name]=new Rd(e.type,e.name);e.layout=null;let i=e.call(r),n=this.flowStagesNode(i,t.type);return e.layout=t,n}flowBuildStage(e,t,r=null){let i=this.getBuildStage();this.setBuildStage(t);let n=e.build(this,r);return this.setBuildStage(i),n}flowStagesNode(e,t=null){let r=this.flow,i=this.vars,n=this.declarations,a=this.cache,s=this.buildStage,o=this.stack,l={code:""};for(let r of(this.flow=l,this.vars={},this.declarations={},this.cache=new Ls,this.stack=RA(),yB))this.setBuildStage(r),l.result=e.build(this,t);return l.vars=this.getVars(this.shaderStage),this.flow=r,this.vars=i,this.declarations=n,this.cache=a,this.stack=o,this.setBuildStage(s),l}getFunctionOperator(){return null}buildFunctionCode(){eI("Abstract function.")}flowChildNode(e,t=null){let r=this.flow,i={code:""};return this.flow=i,i.result=e.build(this,t),this.flow=r,i}flowNodeFromShaderStage(e,t,r=null,i=null){let n=this.tab,a=this.cache,s=this.shaderStage,o=this.context;this.setShaderStage(e);let l={...this.context};delete l.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=l;let u=null;if("generate"===this.buildStage){let n=this.flowChildNode(t,r);null!==i&&(n.code+=`${this.tab+i} = ${n.result};
`),this.flowCode[e]=this.flowCode[e]+n.code,u=n}else u=t.build(this);return this.setShaderStage(s),this.cache=a,this.tab=n,this.context=o,u}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){eI("Abstract function.")}getVaryings(){eI("Abstract function.")}getVar(e,t,r=null){return`${null!==r?this.generateArrayDeclaration(e,r):this.getType(e)} ${t}`}getVars(e){let t="",r=this.vars[e];if(void 0!==r)for(let e of r)t+=`${this.getVar(e.type,e.name)}; `;return t}getUniforms(){eI("Abstract function.")}getCodes(e){let t=this.codes[e],r="";if(void 0!==t)for(let e of t)r+=e.code+"\n";return r}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){eI("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let t;if(!(t=e&&e.isNode?e.isShaderCallNodeInternal?e.shaderNode.subBuilds:e.isStackNode?[e.subBuild]:this.getDataFromNode(e,"any").subBuilds:e instanceof Set?[...e]:e))return null;let r=this.subBuildLayers;for(let e=t.length-1;e>=0;e--){let i=t[e];if(r.includes(i))return i}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",t=null){let r;return(r=null!==t?this.getClosestSubBuild(t):this.subBuildFn)?e?r+"_"+e:r:e}build(){let{object:e,material:t,renderer:r}=this;if(null!==t){let e=r.library.fromMaterial(t);null===e&&(eL(`NodeMaterial: Material "${t.type}" is not compatible.`),e=new Mb),e.build(this)}else this.addFlow("compute",e);for(let e of yB)for(let t of(this.setBuildStage(e),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex),yF))for(let r of(this.setShaderStage(t),this.flowNodes[t]))"generate"===e?this.flowNode(r):r.build(this);return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if("float"===t||"int"===t||"uint"===t)return new Lg(e);if("vec2"===t||"ivec2"===t||"uvec2"===t)return new Ly(e);if("vec3"===t||"ivec3"===t||"uvec3"===t)return new Lv(e);if("vec4"===t||"ivec4"===t||"uvec4"===t)return new Lx(e);if("color"===t)return new L_(e);if("mat2"===t)return new Lb(e);if("mat3"===t)return new LS(e);if("mat4"===t)return new LT(e);throw Error(`Uniform "${t}" not declared.`)}format(e,t,r){if(t=this.getVectorType(t),r=this.getVectorType(r),t===r||null===r||this.isReference(r))return e;let i=this.getTypeLength(t),n=this.getTypeLength(r);return 16===i&&9===n?`${this.getType(r)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:9===i&&4===n?`${this.getType(r)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:i>4||n>4||0===n?e:i===n?`${this.getType(r)}( ${e} )`:i>n?(e="bool"===r?`all( ${e} )`:`${e}.${"xyz".slice(0,n)}`,this.format(e,this.getTypeFromLength(n,this.getComponentType(t)),r)):4===n&&i>1?`${this.getType(r)}( ${this.format(e,t,"vec3")}, 1.0 )`:2===i?`${this.getType(r)}( ${this.format(e,t,"vec2")}, 0.0 )`:(1===i&&n>1&&t!==this.getComponentType(r)&&(e=`${this.getType(this.getComponentType(r))}( ${e} )`),`${this.getType(r)}( ${e} )`)}getSignature(){return`// Three.js r181 - Node System
`}}class LN{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let r=e.get(t);return void 0===r&&(r={renderId:0,frameId:0},e.set(t,r)),r}updateBeforeNode(e){let t=e.getUpdateBeforeType(),r=e.updateReference(this);if(t===yI.FRAME){let t=this._getMaps(this.updateBeforeMap,r);t.frameId!==this.frameId&&!1!==e.updateBefore(this)&&(t.frameId=this.frameId)}else if(t===yI.RENDER){let t=this._getMaps(this.updateBeforeMap,r);t.renderId!==this.renderId&&!1!==e.updateBefore(this)&&(t.renderId=this.renderId)}else t===yI.OBJECT&&e.updateBefore(this)}updateAfterNode(e){let t=e.getUpdateAfterType(),r=e.updateReference(this);if(t===yI.FRAME){let t=this._getMaps(this.updateAfterMap,r);t.frameId!==this.frameId&&!1!==e.updateAfter(this)&&(t.frameId=this.frameId)}else if(t===yI.RENDER){let t=this._getMaps(this.updateAfterMap,r);t.renderId!==this.renderId&&!1!==e.updateAfter(this)&&(t.renderId=this.renderId)}else t===yI.OBJECT&&e.updateAfter(this)}updateNode(e){let t=e.getUpdateType(),r=e.updateReference(this);if(t===yI.FRAME){let t=this._getMaps(this.updateMap,r);t.frameId!==this.frameId&&!1!==e.update(this)&&(t.frameId=this.frameId)}else if(t===yI.RENDER){let t=this._getMaps(this.updateMap,r);t.renderId!==this.renderId&&!1!==e.update(this)&&(t.renderId=this.renderId)}else t===yI.OBJECT&&e.update(this)}update(){this.frameId++,void 0===this.lastTime&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class LP{constructor(e,t,r=null,i="",n=!1){this.type=e,this.name=t,this.count=r,this.qualifier=i,this.isConst=n}}LP.isNodeFunctionInput=!0;class LI extends Il{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){let e=this.colorNode;return{lightDirection:Pk(this.light),lightColor:e}}}let LL=new tF,LD=new tF,LB=null;class LF extends Il{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=xE(new e$).setGroup(xT),this.halfWidth=xE(new e$).setGroup(xT),this.updateType=yI.RENDER}update(e){super.update(e);let{light:t}=this,r=e.camera.matrixWorldInverse;LD.identity(),LL.copy(t.matrixWorld),LL.premultiply(r),LD.extractRotation(LL),this.halfWidth.value.set(.5*t.width,0,0),this.halfHeight.value.set(0,.5*t.height,0),this.halfWidth.value.applyMatrix4(LD),this.halfHeight.value.applyMatrix4(LD)}setupDirectRectArea(e){let t,r;e.isAvailable("float32Filterable")?(t=b7(LB.LTC_FLOAT_1),r=b7(LB.LTC_FLOAT_2)):(t=b7(LB.LTC_HALF_1),r=b7(LB.LTC_HALF_2));let{colorNode:i,light:n}=this;return{lightColor:i,lightPosition:PU(n),halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:r}}static setLTC(e){LB=e}}class LO extends Il{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=xE(0).setGroup(xT),this.penumbraCosNode=xE(0).setGroup(xT),this.cutoffDistanceNode=xE(0).setGroup(xT),this.decayExponentNode=xE(0).setGroup(xT),this.colorNode=xE(this.color).setGroup(xT)}update(e){super.update(e);let{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){let{coneCosNode:r,penumbraCosNode:i}=this;return _4(r,i,t)}getLightCoord(e){let t=e.getNodeProperties(this),r=t.projectionUV;return void 0===r&&(t.projectionUV=r=PB(this.light,e.context.positionWorld)),r}setupDirect(e){let t,r,{colorNode:i,cutoffDistanceNode:n,decayExponentNode:a,light:s}=this,o=this.getLightVector(e),l=o.normalize(),u=l.dot(Pk(s)),c=this.getSpotAttenuation(e,u),h=Iu({lightDistance:o.length(),cutoffDistance:n,decayExponent:a}),d=i.mul(c).mul(h);return s.colorNode?(r=this.getLightCoord(e),t=s.colorNode(r)):s.map&&(r=this.getLightCoord(e),t=b7(s.map,r.xy).onRenderUpdate(()=>s.map)),t&&(d=r.mul(2).sub(1).abs().lessThan(1).all().select(d.mul(t),d)),{lightColor:d,lightDirection:l}}}class LU extends LO{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){let r=this.light.iesMap;return r&&!0===r.isTexture?b7(r,vF(t.acos().mul(1/Math.PI),0),0).r:super.getSpotAttenuation(t)}}let Lk=vM(([e,t])=>{let r=e.abs().sub(t);return _M(_z(r,0)).add(_k(_z(r.x,r.y),0))});class Lz extends LO{static get type(){return"ProjectorLightNode"}update(e){super.update(e);let t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),null===t.aspect){let e=1;null!==t.map&&(e=t.map.width/t.map.height),t.shadow.aspect=e}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){let t=vI(0),r=this.penumbraCosNode,i=PD(this.light).mul(e.context.positionWorld||SY);return vR(i.w.greaterThan(0),()=>{let e=Lk(i.xyz.div(i.w).xy.sub(vF(.5)),vF(.5)),n=xU(-1,xF(1,_b(r)).sub(1));t.assign(_2(e.mul(-2).mul(n)))}),t}}class LV extends Il{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class Lq extends Il{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=PF(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=xE(new ry).setGroup(xT)}update(e){let{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){let{colorNode:t,groundColorNode:r,lightDirectionNode:i}=this,n=_0(r,t,S9.dot(i).mul(.5).add(.5));e.context.irradiance.addAssign(n)}}class LG extends Il{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let e=0;e<9;e++)t.push(new e$);this.lightProbe=Sn(t)}update(e){let{light:t}=this;super.update(e);for(let e=0;e<9;e++)this.lightProbe.array[e].copy(t.sh.coefficients[e]).multiplyScalar(t.intensity)}setup(e){let t=I3(S9,this.lightProbe);e.context.irradiance.addAssign(t)}}class LH{parseFunction(){eI("Abstract function.")}}class Lj{constructor(e,t,r="",i=""){this.type=e,this.inputs=t,this.name=r,this.precision=i}getCode(){eI("Abstract function.")}}Lj.isNodeFunction=!0;let LW=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,LX=/[a-z_0-9]+/ig,LQ="#pragma main";class L$ extends Lj{constructor(e){const{type:t,inputs:r,name:i,precision:n,inputsCode:a,blockCode:s,headerCode:o}=(e=>{let t=(e=e.trim()).indexOf(LQ),r=-1!==t?e.slice(t+LQ.length):e,i=r.match(LW);if(null!==i&&5===i.length){let n=i[4],a=[],s=null;for(;null!==(s=LX.exec(n));)a.push(s);let o=[],l=0;for(;l<a.length;){let e="const"===a[l][0];!0===e&&l++;let t=a[l][0];"in"===t||"out"===t||"inout"===t?l++:t="";let r=a[l++][0],i=Number.parseInt(a[l][0]);!1===Number.isNaN(i)?l++:i=null;let n=a[l++][0];o.push(new LP(r,n,i,t,e))}let u=r.substring(i[0].length),c=void 0!==i[3]?i[3]:"",h=i[2];return{type:h,inputs:o,name:c,precision:void 0!==i[1]?i[1]:"",inputsCode:n,blockCode:u,headerCode:-1!==t?e.slice(0,t):""}}throw Error("FunctionNode: Function is not a GLSL code.")})(e);super(t,r,i,n),this.inputsCode=a,this.blockCode=s,this.headerCode=o}getCode(e=this.name){let t,r=this.blockCode;if(""!==r){let{type:i,inputsCode:n,headerCode:a,precision:s}=this,o=`${i} ${e} ( ${n.trim()} )`;""!==s&&(o=`${s} ${o}`),t=a+o+r}else t="";return t}}class LY extends LH{parseFunction(e){return new L$(e)}}let LK=new WeakMap,LZ=[],LJ=[];class L0 extends CX{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new LN,this.nodeBuilderCache=new Map,this.callHashCache=new Cq,this.groupsData=new Cq,this.cacheLib={}}updateGroup(e){let t=e.groupNode,r=t.name;if(r===xw.name)return!0;if(r===xT.name){let t=this.get(e),r=this.nodeFrame.renderId;return t.renderId!==r&&(t.renderId=r,!0)}if(r===xS.name){let t=this.get(e),r=this.nodeFrame.frameId;return t.frameId!==r&&(t.frameId=r,!0)}LZ[0]=t,LZ[1]=e;let i=this.groupsData.get(LZ);return void 0===i&&this.groupsData.set(LZ,i={}),LZ.length=0,i.version!==t.version&&(i.version=t.version,!0)}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){let t=this.get(e),r=t.nodeBuilderState;if(void 0===r){let{nodeBuilderCache:i}=this,n=this.getForRenderCacheKey(e);if(void 0===(r=i.get(n))){let t=t=>{let r=this.backend.createNodeBuilder(e.object,this.renderer);return r.scene=e.scene,r.material=t,r.camera=e.camera,r.context.material=t,r.lightsNode=e.lightsNode,r.environmentNode=this.getEnvironmentNode(e.scene),r.fogNode=this.getFogNode(e.scene),r.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&r.enableMultiview(),r},a=t(e.material);try{a.build()}catch(e){(a=t(new Mb)).build(),eL("TSL: "+e)}r=this._createNodeBuilderState(a),i.set(n,r)}r.usedTimes++,t.nodeBuilderState=r}return r}delete(e){if(e.isRenderObject){let t=this.get(e).nodeBuilderState;t.usedTimes--,0===t.usedTimes&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){let t=this.get(e),r=t.nodeBuilderState;if(void 0===r){let i=this.backend.createNodeBuilder(e,this.renderer);i.build(),t.nodeBuilderState=r=this._createNodeBuilderState(i)}return r}_createNodeBuilderState(e){return new I9(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{let r=this.get(e);r.environmentNode&&(t=r.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{let r=this.get(e);r.backgroundNode&&(t=r.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){LZ[0]=e,LZ[1]=t;let r=this.renderer.info.calls,i=this.callHashCache.get(LZ)||{};if(i.callId!==r){let n=this.getEnvironmentNode(e),a=this.getFogNode(e);t&&LJ.push(t.getCacheKey(!0)),n&&LJ.push(n.getCacheKey()),a&&LJ.push(a.getCacheKey()),LJ.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),LJ.push(+!!this.renderer.shadowMap.enabled),LJ.push(this.renderer.shadowMap.type),i.callId=r,i.cacheKey=yx(LJ),this.callHashCache.set(LZ,i),LJ.length=0}return LZ.length=0,i.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){let t=this.get(e),r=e.background;if(r){let i=0===e.backgroundBlurriness&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&0===t.backgroundBlurriness;(t.background!==r||i)&&(t.backgroundNode=this.getCacheNode("background",r,()=>{if(!0===r.isCubeTexture||303===r.mapping||304===r.mapping||306===r.mapping)if(e.backgroundBlurriness>0||306===r.mapping)return Cf(r);else return MO(!0===r.isCubeTexture?Tg(r):b7(r));if(!0===r.isTexture)return b7(r,Sl.flipY()).setUpdateMatrix(!0);!0!==r.isColor&&eL("WebGPUNodes: Unsupported background configuration.",r)},i),t.background=r,t.backgroundBlurriness=e.backgroundBlurriness)}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,r,i=!1){let n=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap),a=n.get(t);return(void 0===a||i)&&(a=r(),n.set(t,a)),a}updateFog(e){let t=this.get(e),r=e.fog;r?t.fog!==r&&(t.fogNode=this.getCacheNode("fog",r,()=>r.isFogExp2?N0(Tx("color","color",r).setGroup(xT),NJ(Tx("density","float",r).setGroup(xT))):r.isFog?N0(Tx("color","color",r).setGroup(xT),NZ(Tx("near","float",r).setGroup(xT),Tx("far","float",r).setGroup(xT))):void eL("Renderer: Unsupported fog configuration.",r)),t.fog=r):(delete t.fogNode,delete t.fog)}updateEnvironment(e){let t=this.get(e),r=e.environment;r?t.environment!==r&&(t.environmentNode=this.getCacheNode("environment",r,()=>!0===r.isCubeTexture?Tg(r):!0===r.isTexture?b7(r):void eL("Nodes: Unsupported environment configuration.",r)),t.environment=r):t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,r=null,i=null,n=null){let a=this.nodeFrame;return a.renderer=e,a.scene=t,a.object=r,a.camera=i,a.material=n,a}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){let e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return LK.get(e)!==this.getOutputCacheKey()}getOutputNode(e){let t=this.renderer,r=this.getOutputCacheKey(),i=e.isArrayTexture?Np(e,vz(Sl,Sa("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):b7(e,Sl).renderOutput(t.toneMapping,t.currentColorSpace);return LK.set(e,r),i}updateBefore(e){for(let t of e.getNodeBuilderState().updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(t)}updateAfter(e){for(let t of e.getNodeBuilderState().updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(t)}updateForCompute(e){let t=this.getNodeFrame();for(let r of this.getForCompute(e).updateNodes)t.updateNode(r)}updateForRender(e){let t=this.getNodeFrameForRender(e);for(let r of e.getNodeBuilderState().updateNodes)t.updateNode(r)}needsRefresh(e){let t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new LN,this.nodeBuilderCache=new Map,this.cacheLib={}}}let L1=new ni;class L2{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new eZ,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,null!==e&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,r){let i=e.length;for(let n=0;n<i;n++){L1.copy(e[n]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);let i=t[r+n],a=L1.normal;i.x=-a.x,i.y=-a.y,i.z=-a.z,i.w=L1.constant}}updateGlobal(e,t){this.shadowPass=null!==e.overrideMaterial&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let r,i,n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);let a=t.clippingPlanes,s=a.length;if(this.clipIntersection?(r=this.intersectionPlanes,i=e.intersectionPlanes.length):(r=this.unionPlanes,i=e.unionPlanes.length),r.length!==i+s){r.length=i+s;for(let e=0;e<s;e++)r[i+e]=new tr;n=!0}this.projectPlanes(a,r,i),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return void 0===t&&(t=new L2(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class L3{constructor(e,t){this.bundleGroup=e,this.camera=t}}let L4=[];class L5{constructor(){this.bundles=new Cq}get(e,t){let r=this.bundles;L4[0]=e,L4[1]=t;let i=r.get(L4);return void 0===i&&(i=new L3(e,t),r.set(L4,i)),L4.length=0,i}dispose(){this.bundles=new Cq}}class L8{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null,r=this.getMaterialNodeClass(e.type);if(null!==r)for(let i in t=new r,e)t[i]=e[i];return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,r){if(r.has(t))return void eI(`Redefinition of node ${t}`);if("function"!=typeof e)throw Error(`Node class ${e.name} is not a class.`);if("function"==typeof t||"object"==typeof t)throw Error(`Base class ${t} is not a class.`);r.set(t,e)}addClass(e,t,r){if(r.has(t))return void eI(`Redefinition of node ${t.name}`);if("function"!=typeof e)throw Error(`Node class ${e.name} is not a class.`);if("function"!=typeof t)throw Error(`Base class ${t.name} is not a class.`);r.set(t,e)}}let L6=new PG,L7=[];class L9 extends Cq{constructor(){super()}createNode(e=[]){return new PG().setLights(e)}getNode(e,t){if(e.isQuadMesh)return L6;L7[0]=e,L7[1]=t;let r=this.get(L7);return void 0===r&&(r=this.createNode(),this.set(L7,r)),L7.length=0,r}}class De extends ti{constructor(e=1,t=1,r={}){super(e,t,r),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}let Dt=new e$,Dr=new e$;class Di extends eB{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new il,this._cameraL.viewport=new tr,this._cameraR=new il,this._cameraR.viewport=new tr,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new og,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._sessionUsesLayers=!1,this._supportsGlBinding="undefined"!=typeof XRWebGLBinding,this._frameBufferTargets=null,this._createXRLayer=Dl.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new eX,this._onSessionEvent=Da.bind(this),this._onSessionEnd=Ds.bind(this),this._onInputSourcesChange=Do.bind(this),this._onAnimationFrame=Du.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._supportsLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(null!==this._glProjLayer||null!==this._glBaseLayer)return this._foveation}setFoveation(e){this._foveation=e,null!==this._glProjLayer&&(this._glProjLayer.fixedFoveation=e),null!==this._glBaseLayer&&void 0!==this._glBaseLayer.fixedFoveation&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,!0===this.isPresenting&&eI("XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,!0===this.isPresenting&&eI("XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(null!==this._session)return this._session.environmentBlendMode}getBinding(){return null===this._glBinding&&this._supportsGlBinding&&(this._glBinding=new XRWebGLBinding(this._session,this._gl)),this._glBinding}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,r,i,n,a,s,o={}){let l=new aJ(e,t),u=new De(n,a,{format:1023,type:1009,depthTexture:new n2(n,a,o.stencil?1020:1014,void 0,void 0,void 0,void 0,void 0,void 0,o.stencil?1027:1026),stencilBuffer:o.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});u._autoAllocateDepthBuffer=!0;let c=new rb({color:0xffffff,side:0});c.map=u.texture,c.map.offset.y=1,c.map.repeat.y=-1;let h=new r5(l,c);h.position.copy(r),h.quaternion.copy(i);let d={type:"quad",width:e,height:t,translation:r,quaternion:i,pixelwidth:n,pixelheight:a,plane:h,material:c,rendercall:s,renderTarget:u};if(this._layers.push(d),null!==this._session){d.plane.material=new rb({color:0xffffff,side:0}),d.plane.material.blending=5,d.plane.material.blendEquation=100,d.plane.material.blendSrc=200,d.plane.material.blendDst=200,d.xrlayer=this._createXRLayer(d);let e=this._session.renderState.layers;e.unshift(d.xrlayer),this._session.updateRenderState({layers:e})}else u.isXRRenderTarget=!1;return h}createCylinderLayer(e,t,r,i,n,a,s,o,l={}){let u=new n8(e,e,e*t/r,64,64,!0,Math.PI-t/2,t),c=new De(a,s,{format:1023,type:1009,depthTexture:new n2(a,s,l.stencil?1020:1014,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?1027:1026),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});c._autoAllocateDepthBuffer=!0;let h=new rb({color:0xffffff,side:1});h.map=c.texture,h.map.offset.y=1,h.map.repeat.y=-1;let d=new r5(u,h);d.position.copy(i),d.quaternion.copy(n);let A={type:"cylinder",radius:e,centralAngle:t,aspectratio:r,translation:i,quaternion:n,pixelwidth:a,pixelheight:s,plane:d,material:h,rendercall:o,renderTarget:c};if(this._layers.push(A),null!==this._session){A.plane.material=new rb({color:0xffffff,side:1}),A.plane.material.blending=5,A.plane.material.blendEquation=100,A.plane.material.blendSrc=200,A.plane.material.blendDst=200,A.xrlayer=this._createXRLayer(A);let e=this._session.renderState.layers;e.unshift(A.xrlayer),this._session.updateRenderState({layers:e})}else c.isXRRenderTarget=!1;return d}renderLayers(){let e=new e$,t=new eQ,r=this._renderer,i=this.isPresenting,n=r.getOutputRenderTarget(),a=r._frameBufferTarget;this.isPresenting=!1;let s=new eX;r.getSize(s);let o=r._quad;for(let i of this._layers)if(i.renderTarget.isXRRenderTarget=null!==this._session,i.renderTarget._hasExternalTextures=i.renderTarget.isXRRenderTarget,i.renderTarget.isXRRenderTarget&&this._sessionUsesLayers){i.xrlayer.transform=new XRRigidTransform(i.plane.getWorldPosition(e),i.plane.getWorldQuaternion(t));let n=this._glBinding.getSubImage(i.xrlayer,this._xrFrame);r.backend.setXRRenderTargetTextures(i.renderTarget,n.colorTexture,void 0),r._setXRLayerSize(i.renderTarget.width,i.renderTarget.height),r.setOutputRenderTarget(i.renderTarget),r.setRenderTarget(null),r._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);let{frameBufferTarget:a,quad:s}=this._frameBufferTargets.get(i.renderTarget)||{frameBufferTarget:null,quad:null};a?(r._frameBufferTarget=a,r._quad=s):(r._quad=new R2(new Mb),this._frameBufferTargets.set(i.renderTarget,{frameBufferTarget:r._getFrameBufferTarget(),quad:r._quad})),i.rendercall(),r._frameBufferTarget=null}else r.setRenderTarget(i.renderTarget),i.rendercall();r.setRenderTarget(null),r.setOutputRenderTarget(n),r._frameBufferTarget=a,r._setXRLayerSize(s.x,s.y),r._quad=o,this.isPresenting=i}getSession(){return this._session}async setSession(e){let t=this._renderer,r=t.backend;this._gl=t.getContext();let i=this._gl,n=i.getContextAttributes();if(this._session=e,null!==e){if(!0===r.isWebGPUBackend)throw Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await r.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),!0===this._supportsLayers){let r=null,a=null,s=null;t.depth&&(s=t.stencil?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24,r=t.stencil?1027:1026,a=t.stencil?1020:1014);let o={colorFormat:i.RGBA8,depthFormat:s,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(o.textureType="texture-array",this._useMultiview=!0),this._glBinding=this.getBinding();let l=this._glBinding.createProjectionLayer(o),u=[l];this._glProjLayer=l,t.setPixelRatio(1),t._setXRLayerSize(l.textureWidth,l.textureHeight);let c=this._useMultiview?2:1,h=new n2(l.textureWidth,l.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,r,c);if(this._xrRenderTarget=new De(l.textureWidth,l.textureHeight,{format:1023,type:1009,colorSpace:t.outputColorSpace,depthTexture:h,stencilBuffer:t.stencil,samples:4*!!n.antialias,resolveDepthBuffer:!1===l.ignoreDepthValues,resolveStencilBuffer:!1===l.ignoreDepthValues,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._sessionUsesLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._sessionUsesLayers)for(let e of this._layers)e.plane.material=new rb({color:0xffffff,side:+("cylinder"===e.type)}),e.plane.material.blending=5,e.plane.material.blendEquation=100,e.plane.material.blendSrc=200,e.plane.material.blendDst=200,e.xrlayer=this._createXRLayer(e),u.unshift(e.xrlayer);e.updateRenderState({layers:u})}else{let r=new XRWebGLLayer(e,i,{antialias:t.currentSamples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()});this._glBaseLayer=r,e.updateRenderState({baseLayer:r}),t.setPixelRatio(1),t._setXRLayerSize(r.framebufferWidth,r.framebufferHeight),this._xrRenderTarget=new De(r.framebufferWidth,r.framebufferHeight,{format:1023,type:1009,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:!1===r.ignoreDepthValues,resolveStencilBuffer:!1===r.ignoreDepthValues}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){var t,r,i;let n=this._session;if(null===n)return;let a=e.near,s=e.far,o=this._cameraXR,l=this._cameraL,u=this._cameraR;o.near=u.near=l.near=a,o.far=u.far=l.far=s,o.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==o.near||this._currentDepthFar!==o.far)&&(n.updateRenderState({depthNear:o.near,depthFar:o.far}),this._currentDepthNear=o.near,this._currentDepthFar=o.far),o.layers.mask=6|e.layers.mask,l.layers.mask=3&o.layers.mask,u.layers.mask=5&o.layers.mask;let c=e.parent,h=o.cameras;Dn(o,c);for(let e=0;e<h.length;e++)Dn(h[e],c);2===h.length?function(e,t,r){Dt.setFromMatrixPosition(t.matrixWorld),Dr.setFromMatrixPosition(r.matrixWorld);let i=Dt.distanceTo(Dr),n=t.projectionMatrix.elements,a=r.projectionMatrix.elements,s=n[14]/(n[10]-1),o=n[14]/(n[10]+1),l=(n[9]+1)/n[5],u=(n[9]-1)/n[5],c=(n[8]-1)/n[0],h=(a[8]+1)/a[0],d=i/(-c+h),A=-(d*c);if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(A),e.translateZ(d),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===n[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{let t=s+d,r=o+d;e.projectionMatrix.makePerspective(s*c-A,s*h+(i-A),l*o/r*t,u*o/r*t,t,r),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(o,l,u):o.projectionMatrix.copy(l.projectionMatrix),t=e,r=o,null===(i=c)?t.matrix.copy(r.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(r.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(r.projectionMatrix),t.projectionMatrixInverse.copy(r.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*ek*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}_getController(e){let t=this._controllers[e];return void 0===t&&(t=new ip,this._controllers[e]=t),t}}function Dn(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}function Da(e){let t=this._controllerInputSources.indexOf(e.inputSource);if(-1===t)return;let r=this._controllers[t];if(void 0!==r){let t=this.getReferenceSpace();r.update(e.inputSource,e.frame,t),r.dispatchEvent({type:e.type,data:e.inputSource})}}function Ds(){let e=this._session,t=this._renderer;e.removeEventListener("select",this._onSessionEvent),e.removeEventListener("selectstart",this._onSessionEvent),e.removeEventListener("selectend",this._onSessionEvent),e.removeEventListener("squeeze",this._onSessionEvent),e.removeEventListener("squeezestart",this._onSessionEvent),e.removeEventListener("squeezeend",this._onSessionEvent),e.removeEventListener("end",this._onSessionEnd),e.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let e=0;e<this._controllers.length;e++){let t=this._controllerInputSources[e];null!==t&&(this._controllerInputSources[e]=null,this._controllers[e].disconnect(t))}if(this._currentDepthNear=null,this._currentDepthFar=null,t._resetXRState(),this._session=null,this._xrRenderTarget=null,this._glBinding=null,this._glBaseLayer=null,this._glProjLayer=null,!0===this._sessionUsesLayers)for(let e of this._layers)e.renderTarget=new De(e.pixelwidth,e.pixelheight,{format:1023,type:1009,depthTexture:new n2(e.pixelwidth,e.pixelheight,e.stencilBuffer?1020:1014,void 0,void 0,void 0,void 0,void 0,void 0,e.stencilBuffer?1027:1026),stencilBuffer:e.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),e.renderTarget.isXRRenderTarget=!1,e.plane.material=e.material,e.material.map=e.renderTarget.texture,e.material.map.offset.y=1,e.material.map.repeat.y=-1,delete e.xrlayer;this.isPresenting=!1,this._useMultiview=!1,t._animation.stop(),t._animation.setAnimationLoop(this._currentAnimationLoop),t._animation.setContext(this._currentAnimationContext),t._animation.start(),t.setPixelRatio(this._currentPixelRatio),t.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function Do(e){let t=this._controllers,r=this._controllerInputSources;for(let i=0;i<e.removed.length;i++){let n=e.removed[i],a=r.indexOf(n);a>=0&&(r[a]=null,t[a].disconnect(n))}for(let i=0;i<e.added.length;i++){let n=e.added[i],a=r.indexOf(n);if(-1===a){for(let e=0;e<t.length;e++)if(e>=r.length){r.push(n),a=e;break}else if(null===r[e]){r[e]=n,a=e;break}if(-1===a)break}let s=t[a];s&&s.connect(n)}}function Dl(e){return"quad"===e.type?this._glBinding.createQuadLayer({transform:new XRRigidTransform(e.translation,e.quaternion),width:e.width/2,height:e.height/2,space:this._referenceSpace,viewPixelWidth:e.pixelwidth,viewPixelHeight:e.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(e.translation,e.quaternion),radius:e.radius,centralAngle:e.centralAngle,aspectRatio:e.aspectRatio,space:this._referenceSpace,viewPixelWidth:e.pixelwidth,viewPixelHeight:e.pixelheight,clearOnAccess:!1})}function Du(e,t){if(void 0===t)return;let r=this._cameraXR,i=this._renderer,n=i.backend,a=this._glBaseLayer,s=this.getReferenceSpace(),o=t.getViewerPose(s);if(this._xrFrame=t,null!==o){let e=o.views;null!==this._glBaseLayer&&n.setXRTarget(a.framebuffer);let t=!1;e.length!==r.cameras.length&&(r.cameras.length=0,t=!0);for(let i=0;i<e.length;i++){let s,o=e[i];if(!0===this._supportsLayers){let e=this._glBinding.getViewSubImage(this._glProjLayer,o);s=e.viewport,0===i&&n.setXRRenderTargetTextures(this._xrRenderTarget,e.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:e.depthStencilTexture)}else s=a.getViewport(o);let l=this._cameras[i];void 0===l&&((l=new il).layers.enable(i),l.viewport=new tr,this._cameras[i]=l),l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.quaternion,l.scale),l.projectionMatrix.fromArray(o.projectionMatrix),l.projectionMatrixInverse.copy(l.projectionMatrix).invert(),l.viewport.set(s.x,s.y,s.width,s.height),0===i&&(r.matrix.copy(l.matrix),r.matrix.decompose(r.position,r.quaternion,r.scale)),!0===t&&r.cameras.push(l)}i.setOutputRenderTarget(this._xrRenderTarget)}for(let e=0;e<this._controllers.length;e++){let r=this._controllerInputSources[e],i=this._controllers[e];null!==r&&void 0!==i&&i.update(r,t,s)}this._currentAnimationLoop&&this._currentAnimationLoop(e,t),t.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:t}),this._xrFrame=null}class Dc extends eB{constructor(e){super(),this.domElement=e,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new tr(0,0,this._width,this._height),this._scissor=new tr(0,0,this._width,this._height),this._scissorTest=!1,this.colorTexture=new nK,this.depthTexture=new n2}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,r){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=r,this.domElement.width=Math.floor(e*r),this.domElement.height=Math.floor(t*r),this.setViewport(0,0,e,t),this._dispatchResize())}setSize(e,t,r=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),!0===r&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._dispatchResize())}getScissor(e){let t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,r,i){let n=this._scissor;e.isVector4?n.copy(e):n.set(e,t,r,i)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,r,i,n=0,a=1){let s=this._viewport;e.isVector4?s.copy(e):s.set(e,t,r,i),s.minDepth=n,s.maxDepth=a}_dispatchResize(){this.dispatchEvent({type:"resize"})}dispose(){this.dispatchEvent({type:"dispose"})}}let Dh=new iy,Dd=new eX,DA=new tr,Dp=new no,Df=new nc,Dm=new tF,Dg=new tr;class Dy{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:r=!1,alpha:i=!0,depth:n=!0,stencil:a=!1,antialias:s=!1,samples:o=0,getFallback:l=null,colorBufferType:u=1016,multiview:c=!1}=t;this.backend=e,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=i,this.logarithmicDepthBuffer=r,this.outputColorSpace=ep,this.toneMapping=0,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=n,this.stencil=a,this.info=new CZ,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new L8,this.lighting=new L9,this._samples=o||!0===s?4:0,this._onCanvasTargetResize=this._onCanvasTargetResize.bind(this),this._canvasTarget=new Dc(e.getDomElement()),this._canvasTarget.addEventListener("resize",this._onCanvasTargetResize),this._canvasTarget.isDefaultCanvasTarget=!0,this._inspector=new bK,this._inspector.setRenderer(this),this._getFallback=l,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new R2(new Mb),this._quad.name="Output Color Transform",this._quad.material.name="outputColorTransform",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const h=+(!0!==this.alpha);this._clearColor=new Rh(0,0,0,h),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=u,this._cacheShadowNodes=new WeakMap,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:1},this.xr=new Di(this,c),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(e,t,r)=>{await this.compileAsync(e,t);let i=this._renderLists.get(e,t),n=this._renderContexts.get(e,t,this._renderTarget),a=e.overrideMaterial||r.material,{fragmentShader:s,vertexShader:o}=this._objects.get(r,a,e,t,i.lightsNode,n,n.clippingContext).getNodeBuilderState();return{fragmentShader:s,vertexShader:o}}}}async init(){return null!==this._initPromise||(this._initPromise=new Promise(async(e,t)=>{let r=this.backend;try{await r.init(this)}catch(e){if(null===this._getFallback)return void t(e);try{this.backend=r=this._getFallback(e),await r.init(this)}catch(e){t(e);return}}this._nodes=new L0(this,r),this._animation=new CV(this,this._nodes,this.info),this._attributes=new CQ(r),this._background=new I8(this,this._nodes),this._geometries=new CK(this._attributes,this.info),this._textures=new Rc(this,r,this.info),this._pipelines=new C4(r,this._nodes),this._bindings=new C5(r,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new CW(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Rt(this.lighting),this._bundles=new L5,this._renderContexts=new Rl,this._animation.start(),this._initialized=!0,this._inspector.init(),e(this)})),this._initPromise}get domElement(){return this._canvasTarget.domElement}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,r=null){if(!0===this._isDeviceLost)return;!1===this._initialized&&await this.init();let i=this._nodes.nodeFrame,n=i.renderId,a=this._currentRenderContext,s=this._currentRenderObjectFunction,o=this._compilationPromises,l=!0===e.isScene?e:Dh;null===r&&(r=e);let u=this._renderTarget,c=this._renderContexts.get(r,t,u),h=this._activeMipmapLevel,d=[];this._currentRenderContext=c,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=d,i.renderId++,i.update(),c.depth=this.depth,c.stencil=this.stencil,c.clippingContext||(c.clippingContext=new L2),c.clippingContext.updateGlobal(l,t),l.onBeforeRender(this,e,t,u);let A=this._renderLists.get(e,t);if(A.begin(),this._projectObject(e,t,0,A,c.clippingContext),r!==e&&r.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&A.pushLight(e)}),A.finish(),null!==u){this._textures.updateRenderTarget(u,h);let e=this._textures.get(u);c.textures=e.textures,c.depthTexture=e.depthTexture}else c.textures=null,c.depthTexture=null;this._background.update(l,A,c);let p=A.opaque,f=A.transparent,m=A.transparentDoublePass,g=A.lightsNode;!0===this.opaque&&p.length>0&&this._renderObjects(p,t,l,g),!0===this.transparent&&f.length>0&&this._renderTransparents(f,m,t,l,g),i.renderId=n,this._currentRenderContext=a,this._currentRenderObjectFunction=s,this._compilationPromises=o,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(d)}async renderAsync(e,t){eD('Renderer: "renderAsync()" has been deprecated. Use "render()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.render(e,t)}async waitForGPU(){eL("Renderer: waitForGPU() has been removed. Read https://github.com/mrdoob/three.js/issues/32012 for more information.")}set inspector(e){null!==this._inspector&&this._inspector.setRenderer(null),this._inspector=e,this._inspector.setRenderer(this)}get inspector(){return this._inspector}set highPrecision(e){!0===e?(this.overrideNodes.modelViewMatrix=Sj,this.overrideNodes.modelNormalViewMatrix=SW):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===Sj&&this.overrideNodes.modelNormalViewMatrix===SW}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),eL(t),this._isDeviceLost=!0}_renderBundle(e,t,r){let{bundleGroup:i,camera:n,renderList:a}=e,s=this._currentRenderContext,o=this._bundles.get(i,n),l=this.backend.get(o);void 0===l.renderContexts&&(l.renderContexts=new Set);let u=i.version!==l.version,c=!1===l.renderContexts.has(s)||u;if(l.renderContexts.add(s),c){this.backend.beginBundle(s),(void 0===l.renderObjects||u)&&(l.renderObjects=[]),this._currentRenderBundle=o;let{transparentDoublePass:e,transparent:c,opaque:h}=a;!0===this.opaque&&h.length>0&&this._renderObjects(h,n,t,r),!0===this.transparent&&c.length>0&&this._renderTransparents(c,e,n,t,r),this._currentRenderBundle=null,this.backend.finishBundle(s,o),l.version=i.version}else{let{renderObjects:e}=l;for(let t=0,r=e.length;t<r;t++){let r=e[t];this._nodes.needsRefresh(r)&&(this._nodes.updateBefore(r),this._nodes.updateForRender(r),this._bindings.updateForRender(r),this._nodes.updateAfter(r))}}this.backend.addBundle(s,o)}render(e,t){if(!1===this._initialized)throw Error('Renderer: .render() called before the backend is initialized. Use "await renderer.init();" before rendering.');this._renderScene(e,t)}get initialized(){return this._initialized}_getFrameBufferTarget(){let{currentToneMapping:e,currentColorSpace:t}=this,r=t!==e2.workingColorSpace;if(!1==(0!==e)&&!1===r)return null;let{width:i,height:n}=this.getDrawingBufferSize(Dd),{depth:a,stencil:s}=this,o=this._frameBufferTarget;null===o&&((o=new ti(i,n,{depthBuffer:a,stencilBuffer:s,type:this._colorBufferType,format:1023,colorSpace:e2.workingColorSpace,generateMipmaps:!1,minFilter:1006,magFilter:1006,samples:this.samples})).isPostProcessingRenderTarget=!0,this._frameBufferTarget=o);let l=this.getOutputRenderTarget();o.depthBuffer=a,o.stencilBuffer=s,null!==l?o.setSize(l.width,l.height,l.depth):o.setSize(i,n,1);let u=this._canvasTarget;return o.viewport.copy(u._viewport),o.scissor.copy(u._scissor),o.viewport.multiplyScalar(u._pixelRatio),o.scissor.multiplyScalar(u._pixelRatio),o.scissorTest=u._scissorTest,o.multiview=null!==l&&l.multiview,o.resolveDepthBuffer=null===l||l.resolveDepthBuffer,o._autoAllocateDepthBuffer=null!==l&&l._autoAllocateDepthBuffer,o}_renderScene(e,t,r=!0){let i;if(!0===this._isDeviceLost)return;let n=r?this._getFrameBufferTarget():null,a=this._nodes.nodeFrame,s=a.renderId,o=this._currentRenderContext,l=this._currentRenderObjectFunction,u=!0===e.isScene?e:Dh,c=this._renderTarget||this._outputRenderTarget,h=this._activeCubeFace,d=this._activeMipmapLevel;null!==n?(i=n,this.setRenderTarget(i)):i=c;let A=this._renderContexts.get(e,t,i);this._currentRenderContext=A,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,a.renderId=this.info.calls,this.backend.updateTimeStampUID(A),this.inspector.beginRender(this.backend.getTimestampUID(A),e,t,i);let p=this.coordinateSystem,f=this.xr;if(t.coordinateSystem!==p&&!1===f.isPresenting&&(t.coordinateSystem=p,t.updateProjectionMatrix(),t.isArrayCamera))for(let e of t.cameras)e.coordinateSystem=p,e.updateProjectionMatrix();!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===f.enabled&&!0===f.isPresenting&&(!0===f.cameraAutoUpdate&&f.updateCamera(t),t=f.getCamera());let m=this._canvasTarget,g=m._viewport,y=m._scissor,v=m._pixelRatio;null!==i&&(g=i.viewport,y=i.scissor,v=1),this.getDrawingBufferSize(Dd),DA.set(0,0,Dd.width,Dd.height);let x=void 0===g.minDepth?0:g.minDepth,_=void 0===g.maxDepth?1:g.maxDepth;A.viewportValue.copy(g).multiplyScalar(v).floor(),A.viewportValue.width>>=d,A.viewportValue.height>>=d,A.viewportValue.minDepth=x,A.viewportValue.maxDepth=_,A.viewport=!1===A.viewportValue.equals(DA),A.scissorValue.copy(y).multiplyScalar(v).floor(),A.scissor=m._scissorTest&&!1===A.scissorValue.equals(DA),A.scissorValue.width>>=d,A.scissorValue.height>>=d,A.clippingContext||(A.clippingContext=new L2),A.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,i);let b=t.isArrayCamera?Df:Dp;t.isArrayCamera||(Dm.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),b.setFromProjectionMatrix(Dm,t.coordinateSystem,t.reversedDepth));let S=this._renderLists.get(e,t);if(S.begin(),this._projectObject(e,t,0,S,A.clippingContext),S.finish(),!0===this.sortObjects&&S.sort(this._opaqueSort,this._transparentSort),null!==i){this._textures.updateRenderTarget(i,d);let e=this._textures.get(i);A.textures=e.textures,A.depthTexture=e.depthTexture,A.width=e.width,A.height=e.height,A.renderTarget=i,A.depth=i.depthBuffer,A.stencil=i.stencilBuffer}else A.textures=null,A.depthTexture=null,A.width=Dd.width,A.height=Dd.height,A.depth=this.depth,A.stencil=this.stencil;A.width>>=d,A.height>>=d,A.activeCubeFace=h,A.activeMipmapLevel=d,A.occlusionQueryCount=S.occlusionQueryCount,A.scissorValue.max(Dg.set(0,0,0,0)),A.scissorValue.x+A.scissorValue.width>A.width&&(A.scissorValue.width=Math.max(A.width-A.scissorValue.x,0)),A.scissorValue.y+A.scissorValue.height>A.height&&(A.scissorValue.height=Math.max(A.height-A.scissorValue.y,0)),this._background.update(u,S,A),A.camera=t,this.backend.beginRender(A);let{bundles:T,lightsNode:w,transparentDoublePass:M,transparent:E,opaque:C}=S;return T.length>0&&this._renderBundles(T,u,w),!0===this.opaque&&C.length>0&&this._renderObjects(C,t,u,w),!0===this.transparent&&E.length>0&&this._renderTransparents(E,M,t,u,w),this.backend.finishRender(A),a.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=l,null!==n&&(this.setRenderTarget(c,h,d),this._renderOutput(i)),u.onAfterRender(this,e,t,i),this.inspector.finishRender(this.backend.getTimestampUID(A)),A}_setXRLayerSize(e,t){this._canvasTarget._width=e,this._canvasTarget._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){let t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);let r=this.autoClear,i=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=r,this.xr.enabled=i}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){!1===this._initialized&&await this.init(),this._animation.setAnimationLoop(e)}getAnimationLoop(){return this._animation.getAnimationLoop()}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._canvasTarget.getPixelRatio()}getDrawingBufferSize(e){return this._canvasTarget.getDrawingBufferSize(e)}getSize(e){return this._canvasTarget.getSize(e)}setPixelRatio(e=1){this._canvasTarget.setPixelRatio(e)}setDrawingBufferSize(e,t,r){this.xr&&this.xr.isPresenting||this._canvasTarget.setDrawingBufferSize(e,t,r)}setSize(e,t,r=!0){this.xr&&this.xr.isPresenting||this._canvasTarget.setSize(e,t,r)}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){return this._canvasTarget.getScissor(e)}setScissor(e,t,r,i){this._canvasTarget.setScissor(e,t,r,i)}getScissorTest(){return this._canvasTarget.getScissorTest()}setScissorTest(e){this._canvasTarget.setScissorTest(e),this.backend.setScissorTest(e)}getViewport(e){return this._canvasTarget.getViewport(e)}setViewport(e,t,r,i,n=0,a=1){this._canvasTarget.setViewport(e,t,r,i,n,a)}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){let t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,r=!0){if(!1===this._initialized)throw Error('Renderer: .clear() called before the backend is initialized. Use "await renderer.init();" before before using this method.');let i=this._renderTarget||this._getFrameBufferTarget(),n=null;if(null!==i){this._textures.updateRenderTarget(i);let e=this._textures.get(i);(n=this._renderContexts.getForClear(i)).textures=e.textures,n.depthTexture=e.depthTexture,n.width=e.width,n.height=e.height,n.renderTarget=i,n.depth=i.depthBuffer,n.stencil=i.stencilBuffer,n.clearColorValue=this.backend.getClearColor(),n.activeCubeFace=this.getActiveCubeFace(),n.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,r,n),null!==i&&null===this._renderTarget&&this._renderOutput(i)}clearColor(){this.clear(!0,!1,!1)}clearDepth(){this.clear(!1,!0,!1)}clearStencil(){this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,r=!0){eD('Renderer: "clearAsync()" has been deprecated. Use "clear()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.clear(e,t,r)}async clearColorAsync(){eD('Renderer: "clearColorAsync()" has been deprecated. Use "clearColor()" and "await renderer.init();" when creating the renderer.'),this.clear(!0,!1,!1)}async clearDepthAsync(){eD('Renderer: "clearDepthAsync()" has been deprecated. Use "clearDepth()" and "await renderer.init();" when creating the renderer.'),this.clear(!1,!0,!1)}async clearStencilAsync(){eD('Renderer: "clearStencilAsync()" has been deprecated. Use "clearStencil()" and "await renderer.init();" when creating the renderer.'),this.clear(!1,!1,!0)}get needsFrameBufferTarget(){let e=0!==this.currentToneMapping,t=this.currentColorSpace!==e2.workingColorSpace;return e||t}get samples(){return this._samples}get currentSamples(){let e=this._samples;return null!==this._renderTarget?e=this._renderTarget.samples:this.needsFrameBufferTarget&&(e=0),e}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:0}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:e2.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||null===this._renderTarget}dispose(){!0===this._initialized&&(this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._geometries.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),null!==this._frameBufferTarget&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{null!==e&&e.dispose()})),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,r=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=r}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}setCanvasTarget(e){this._canvasTarget.removeEventListener("resize",this._onCanvasTargetResize),this._canvasTarget=e,this._canvasTarget.addEventListener("resize",this._onCanvasTargetResize)}getCanvasTarget(){return this._canvasTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,t=null){if(!0===this._isDeviceLost)return;if(!1===this._initialized)return eI("Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e,t);let r=this._nodes.nodeFrame,i=r.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,r.renderId=this.info.calls,this.backend.updateTimeStampUID(e),this.inspector.beginCompute(this.backend.getTimestampUID(e),e);let n=this.backend,a=this._pipelines,s=this._bindings,o=this._nodes,l=Array.isArray(e)?e:[e];if(void 0===l[0]||!0!==l[0].isComputeNode)throw Error("THREE.Renderer: .compute() expects a ComputeNode.");for(let r of(n.beginCompute(e),l)){if(!1===a.has(r)){let e=()=>{r.removeEventListener("dispose",e),a.delete(r),s.deleteForCompute(r),o.delete(r)};r.addEventListener("dispose",e);let t=r.onInitFunction;null!==t&&t.call(r,{renderer:this})}o.updateForCompute(r),s.updateForCompute(r);let i=s.getForCompute(r),l=a.getForCompute(r,i);n.compute(e,r,i,l,t)}n.finishCompute(e),r.renderId=i,this.inspector.finishCompute(this.backend.getTimestampUID(e))}async computeAsync(e,t=null){!1===this._initialized&&await this.init(),this.compute(e,t)}async hasFeatureAsync(e){return eD('Renderer: "hasFeatureAsync()" has been deprecated. Use "hasFeature()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.hasFeature(e)}async resolveTimestampsAsync(e="render"){return!1===this._initialized&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){if(!1===this._initialized)throw Error('Renderer: .hasFeature() called before the backend is initialized. Use "await renderer.init();" before before using this method.');return this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){eD('Renderer: "initTextureAsync()" has been deprecated. Use "initTexture()" and "await renderer.init();" when creating the renderer.'),await this.init(),this.initTexture(e)}initTexture(e){if(!1===this._initialized)throw Error('Renderer: .initTexture() called before the backend is initialized. Use "await renderer.init();" before before using this method.');this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){let r;if(null!==t)if(t.isVector2)t=Dg.set(t.x,t.y,e.image.width,e.image.height).floor();else{if(!t.isVector4)return void eL("Renderer.copyFramebufferToTexture: Invalid rectangle.");t=Dg.copy(t).floor()}else t=Dg.set(0,0,e.image.width,e.image.height);let i=this._currentRenderContext;null!==i?r=i.renderTarget:null!==(r=this._renderTarget||this._getFrameBufferTarget())&&(this._textures.updateRenderTarget(r),i=this._textures.get(r)),this._textures.updateTexture(e,{renderTarget:r}),this.backend.copyFramebufferToTexture(e,i,t),this._inspector.copyFramebufferToTexture(e)}copyTextureToTexture(e,t,r=null,i=null,n=0,a=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,r,i,n,a),this._inspector.copyTextureToTexture(e,t)}async readRenderTargetPixelsAsync(e,t,r,i,n,a=0,s=0){return this.backend.copyTextureToBuffer(e.textures[a],t,r,i,n,s)}_projectObject(e,t,r,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)r=e.renderOrder,e.isClippingGroup&&e.enabled&&(n=n.getGroupContext(e));else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)i.pushLight(e);else if(e.isSprite){let a=t.isArrayCamera?Df:Dp;if(!e.frustumCulled||a.intersectsSprite(e,t)){!0===this.sortObjects&&Dg.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Dm);let{geometry:t,material:a}=e;a.visible&&i.push(e,t,a,r,Dg.z,null,n)}}else if(e.isLineLoop)eL("Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){let a=t.isArrayCamera?Df:Dp;if(!e.frustumCulled||a.intersectsObject(e,t)){let{geometry:t,material:a}=e;if(!0===this.sortObjects&&(null===t.boundingSphere&&t.computeBoundingSphere(),Dg.copy(t.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Dm)),Array.isArray(a)){let s=t.groups;for(let o=0,l=s.length;o<l;o++){let l=s[o],u=a[l.materialIndex];u&&u.visible&&i.push(e,t,u,r,Dg.z,l,n)}}else a.visible&&i.push(e,t,a,r,Dg.z,null,n)}}}if(!0===e.isBundleGroup&&void 0!==this.backend.beginBundle){let r=i;(i=this._renderLists.get(e,t)).begin(),r.pushBundle({bundleGroup:e,camera:t,renderList:i}),i.finish()}let a=e.children;for(let e=0,s=a.length;e<s;e++)this._projectObject(a[e],t,r,i,n)}_renderBundles(e,t,r){for(let i of e)this._renderBundle(i,t,r)}_renderTransparents(e,t,r,i,n){if(t.length>0){for(let{material:e}of t)e.side=1;for(let{material:e}of(this._renderObjects(t,r,i,n,"backSide"),t))e.side=0;for(let{material:a}of(this._renderObjects(e,r,i,n),t))a.side=2}else this._renderObjects(e,r,i,n)}_renderObjects(e,t,r,i,n=null){for(let a=0,s=e.length;a<s;a++){let{object:s,geometry:o,material:l,group:u,clippingContext:c}=e[a];this._currentRenderObjectFunction(s,r,t,o,l,u,i,c,n)}}_getShadowNodes(e){let t=e.version,r=this._cacheShadowNodes.get(e);if(void 0===r||r.version!==t){let i=null!==e.map,n=e.colorNode&&e.colorNode.isNode,a=e.castShadowNode&&e.castShadowNode.isNode,s=null,o=null,l=null;if(i||n||a){let t,r;a?(t=e.castShadowNode.rgb,r=e.castShadowNode.a):(t=vz(0),r=vI(1)),i&&(r=r.mul(Tx("map","texture",e).a)),n&&(r=r.mul(e.colorNode.a)),o=vH(t,r)}e.depthNode&&e.depthNode.isNode&&(l=e.depthNode),e.castShadowPositionNode&&e.castShadowPositionNode.isNode?s=e.castShadowPositionNode:e.positionNode&&e.positionNode.isNode&&(s=e.positionNode),r={version:t,colorNode:o,depthNode:l,positionNode:s},this._cacheShadowNodes.set(e,r)}return r}renderObject(e,t,r,i,n,a,s,o=null,l=null){let u,c,h,d,A=!1;if(e.onBeforeRender(this,t,r,i,n,a),!0===n.allowOverride&&null!==t.overrideMaterial){let e=t.overrideMaterial;if(A=!0,u=t.overrideMaterial.colorNode,c=t.overrideMaterial.depthNode,h=t.overrideMaterial.positionNode,d=t.overrideMaterial.side,n.positionNode&&n.positionNode.isNode&&(e.positionNode=n.positionNode),e.alphaTest=n.alphaTest,e.alphaMap=n.alphaMap,e.transparent=n.transparent||n.transmission>0||n.transmissionNode&&n.transmissionNode.isNode||n.backdropNode&&n.backdropNode.isNode,e.isShadowPassMaterial){let{colorNode:t,depthNode:r,positionNode:i}=this._getShadowNodes(n);e.side=null===n.shadowSide?n.side:n.shadowSide,null!==t&&(e.colorNode=t),null!==r&&(e.depthNode=r),null!==i&&(e.positionNode=i)}n=e}!0===n.transparent&&2===n.side&&!1===n.forceSinglePass?(n.side=1,this._handleObjectFunction(e,n,t,r,s,a,o,"backSide"),n.side=0,this._handleObjectFunction(e,n,t,r,s,a,o,l),n.side=2):this._handleObjectFunction(e,n,t,r,s,a,o,l),A&&(t.overrideMaterial.colorNode=u,t.overrideMaterial.depthNode=c,t.overrideMaterial.positionNode=h,t.overrideMaterial.side=d),e.onAfterRender(this,t,r,i,n,a)}_renderObjectDirect(e,t,r,i,n,a,s,o){let l=this._objects.get(e,t,r,i,n,this._currentRenderContext,s,o);l.drawRange=e.geometry.drawRange,l.group=a;let u=this._nodes.needsRefresh(l);u&&(this._nodes.updateBefore(l),this._geometries.updateForRender(l),this._nodes.updateForRender(l),this._bindings.updateForRender(l)),this._pipelines.updateForRender(l),null!==this._currentRenderBundle&&(this.backend.get(this._currentRenderBundle).renderObjects.push(l),l.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(l,this.info),u&&this._nodes.updateAfter(l)}_createObjectPipeline(e,t,r,i,n,a,s,o){let l=this._objects.get(e,t,r,i,n,this._currentRenderContext,s,o);l.drawRange=e.geometry.drawRange,l.group=a,this._nodes.updateBefore(l),this._geometries.updateForRender(l),this._nodes.updateForRender(l),this._bindings.updateForRender(l),this._pipelines.getForRender(l,this._compilationPromises),this._nodes.updateAfter(l)}_onCanvasTargetResize(){this._initialized&&this.backend.updateSize()}get compile(){return this.compileAsync}}class Dv{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}class Dx extends Dv{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){var e;return(e=this._buffer.byteLength)+(16-e%16)%16}get buffer(){return this._buffer}update(){return!0}}class D_ extends Dx{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let Db=0;class DS extends D_{constructor(e,t){super("UniformBuffer_"+Db++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class DT extends D_{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){let t=this.uniforms.indexOf(e);return -1!==t&&this.uniforms.splice(t,1),this}get values(){return null===this._values&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;return null===e&&(e=new Float32Array(new ArrayBuffer(this.byteLength)),this._buffer=e),e}get byteLength(){let e=this.bytesPerElement,t=0;for(let r=0,i=this.uniforms.length;r<i;r++){let i=this.uniforms[r],n=i.boundary,a=i.itemSize*e,s=t%16,o=s%n,l=s+o;t+=o,0!==l&&16-l<a&&(t+=16-l),i.offset=t/e,t+=a}return 16*Math.ceil(t/16)}update(){let e=!1;for(let t of this.uniforms)!0===this.updateByType(t)&&(e=!0);return e}updateByType(e){return e.isNumberUniform?this.updateNumber(e):e.isVector2Uniform?this.updateVector2(e):e.isVector3Uniform?this.updateVector3(e):e.isVector4Uniform?this.updateVector4(e):e.isColorUniform?this.updateColor(e):e.isMatrix3Uniform?this.updateMatrix3(e):e.isMatrix4Uniform?this.updateMatrix4(e):void eL("WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1,r=this.values,i=e.getValue(),n=e.offset,a=e.getType();return r[n]!==i&&(this._getBufferForType(a)[n]=r[n]=i,t=!0),t}updateVector2(e){let t=!1,r=this.values,i=e.getValue(),n=e.offset,a=e.getType();if(r[n+0]!==i.x||r[n+1]!==i.y){let e=this._getBufferForType(a);e[n+0]=r[n+0]=i.x,e[n+1]=r[n+1]=i.y,t=!0}return t}updateVector3(e){let t=!1,r=this.values,i=e.getValue(),n=e.offset,a=e.getType();if(r[n+0]!==i.x||r[n+1]!==i.y||r[n+2]!==i.z){let e=this._getBufferForType(a);e[n+0]=r[n+0]=i.x,e[n+1]=r[n+1]=i.y,e[n+2]=r[n+2]=i.z,t=!0}return t}updateVector4(e){let t=!1,r=this.values,i=e.getValue(),n=e.offset,a=e.getType();if(r[n+0]!==i.x||r[n+1]!==i.y||r[n+2]!==i.z||r[n+4]!==i.w){let e=this._getBufferForType(a);e[n+0]=r[n+0]=i.x,e[n+1]=r[n+1]=i.y,e[n+2]=r[n+2]=i.z,e[n+3]=r[n+3]=i.w,t=!0}return t}updateColor(e){let t=!1,r=this.values,i=e.getValue(),n=e.offset;if(r[n+0]!==i.r||r[n+1]!==i.g||r[n+2]!==i.b){let e=this.buffer;e[n+0]=r[n+0]=i.r,e[n+1]=r[n+1]=i.g,e[n+2]=r[n+2]=i.b,t=!0}return t}updateMatrix3(e){let t=!1,r=this.values,i=e.getValue().elements,n=e.offset;if(r[n+0]!==i[0]||r[n+1]!==i[1]||r[n+2]!==i[2]||r[n+4]!==i[3]||r[n+5]!==i[4]||r[n+6]!==i[5]||r[n+8]!==i[6]||r[n+9]!==i[7]||r[n+10]!==i[8]){let e=this.buffer;e[n+0]=r[n+0]=i[0],e[n+1]=r[n+1]=i[1],e[n+2]=r[n+2]=i[2],e[n+4]=r[n+4]=i[3],e[n+5]=r[n+5]=i[4],e[n+6]=r[n+6]=i[5],e[n+8]=r[n+8]=i[6],e[n+9]=r[n+9]=i[7],e[n+10]=r[n+10]=i[8],t=!0}return t}updateMatrix4(e){let t=!1,r=this.values,i=e.getValue().elements,n=e.offset;return!1===function(e,t,r){for(let i=0,n=t.length;i<n;i++)if(e[r+i]!==t[i])return!1;return!0}(r,i,n)&&(this.buffer.set(i,n),function(e,t,r){for(let i=0,n=t.length;i<n;i++)e[r+i]=t[i]}(r,i,n),t=!0),t}_getBufferForType(e){return"int"===e||"ivec2"===e||"ivec3"===e||"ivec4"===e?new Int32Array(this.buffer.buffer):"uint"===e||"uvec2"===e||"uvec3"===e||"uvec4"===e?new Uint32Array(this.buffer.buffer):this.buffer}}let Dw=0;class DM extends DT{constructor(e,t){super(e),this.id=Dw++,this.groupNode=t,this.isNodeUniformsGroup=!0}}class DE extends Dv{constructor(e,t){super(e),this._texture=null,this._onTextureDispose=()=>{this.generation=null,this.version=0},this.texture=t,this.version=t?t.version:0,this.generation=null,this.samplerKey="",this.isSampler=!0}set texture(e){this._texture!==e&&(this._texture&&this._texture.removeEventListener("dispose",this._onTextureDispose),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",this._onTextureDispose))}get texture(){return this._texture}update(){let{texture:e,version:t}=this;return t!==e.version&&(this.version=e.version,!0)}clone(){let e=super.clone();return e._texture=null,e._onTextureDispose=()=>{e.generation=null,e.version=0},e.texture=this.texture,e}}let DC=0;class DR extends DE{constructor(e,t){super(e,t),this.id=DC++,this.store=!1,this.mipLevel=0,this.isSampledTexture=!0}}class DN extends DR{constructor(e,t,r,i=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r,this.access=i}update(){let{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class DP extends DN{constructor(e,t,r,i=null){super(e,t,r,i),this.isSampledCubeTexture=!0}}class DI extends DN{constructor(e,t,r,i=null){super(e,t,r,i),this.isSampledTexture3D=!0}}let DL={bitcast_int_uint:new Nq("uint tsl_bitcast_uint_to_int ( int x ) { return floatBitsToInt( uintBitsToFloat( x ) ); }"),bitcast_uint_int:new Nq("uint tsl_bitcast_int_to_uint ( int x ) { return floatBitsToUint( intBitsToFloat ( x ) ); }")},DD={textureDimensions:"textureSize",equals:"equal",bitcast_float_int:"floatBitsToInt",bitcast_int_float:"intBitsToFloat",bitcast_uint_float:"uintBitsToFloat",bitcast_float_uint:"floatBitsToUint",bitcast_uint_int:"tsl_bitcast_uint_to_int",bitcast_int_uint:"tsl_bitcast_int_to_uint"},DB={low:"lowp",medium:"mediump",high:"highp"},DF={swizzleAssign:!0,storageBuffer:!1},DO={perspective:"smooth",linear:"noperspective"},DU={centroid:"centroid"},Dk=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class Dz extends LR{constructor(e,t){super(e,t,new LY),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return!0===e.isVideoTexture&&""!==e.colorSpace}_include(e){let t=DL[e];return t.build(this),this.addInclude(t),t}getMethod(e){return void 0!==DL[e]&&this._include(e),DD[e]||e}getBitcastMethod(e,t){return this.getMethod(`bitcast_${t}_${e}`)}getTernary(e,t,r){return`${e} ? ${t} : ${r}`}getOutputStructName(){return""}buildFunctionCode(e){let t=e.layout,r=this.flowShaderNode(e),i=[];for(let e of t.inputs)i.push(this.getType(e.type)+" "+e.name);return`${this.getType(t.type)} ${t.name}( ${i.join(", ")} ) {

	${r.vars}

${r.code}
	return ${r.result};

}`}setupPBO(e){let t=e.value;if(void 0===t.pbo){let e=t.array,r=t.count*t.itemSize,{itemSize:i}=t,n=t.array.constructor.name.toLowerCase().includes("int"),a=n?1029:1028;2===i?a=n?1031:1030:3===i?a=n?1032:1022:4===i&&(a=n?1033:1023);let s=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/i)))),o=Math.ceil(r/i/s);s*o*i<r&&o++;let l=s*o*i,u=new e.constructor(l);u.set(e,0),t.array=u;let c=new iK(t.array,s,o,a,{Float32Array:1015,Uint8Array:1009,Uint16Array:1012,Uint32Array:1014,Int8Array:1010,Int16Array:1011,Int32Array:1013,Uint8ClampedArray:1009}[t.array.constructor.name]||1015);c.needsUpdate=!0,c.isPBOTexture=!0;let h=new b8(c,null,null);h.setPrecision("high"),t.pboNode=h,t.pbo=h.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&!0!==e.node.isTextureNode&&!0!==e.node.isBufferNode?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){let{node:t,indexNode:r}=e,i=t.value;this.renderer.backend.has(i)&&(this.renderer.backend.get(i).pbo=i.pbo);let n=this.getUniformFromNode(i.pboNode,"texture",this.shaderStage,this.context.nodeName),a=this.getPropertyName(n);this.increaseUsage(r);let s=r.build(this,"uint"),o=this.getDataFromNode(e),l=o.propertyName;if(void 0===l){let r=this.getVarFromNode(e);l=this.getPropertyName(r);let n=this.getDataFromNode(t),u=n.propertySizeName;void 0===u&&(u=l+"Size",this.getVarFromNode(t,u,"uint"),this.addLineFlowCode(`${u} = uint( textureSize( ${a}, 0 ).x )`,e),n.propertySizeName=u);let{itemSize:c}=i,h="."+yO.join("").slice(0,c),d=`ivec2(${s} % ${u}, ${s} / ${u})`,A=this.generateTextureLoad(null,a,d,"0",null,null),p="vec4";1014===i.pbo.type?p="uvec4":1013===i.pbo.type&&(p="ivec4"),this.addLineFlowCode(`${l} = ${p}(${A})${h}`,e),o.propertyName=l}return l}generateTextureLoad(e,t,r,i,n,a){let s;return null===i&&(i="0"),s=n?a?`texelFetchOffset( ${t}, ivec3( ${r}, ${n} ), ${i}, ${a} )`:`texelFetch( ${t}, ivec3( ${r}, ${n} ), ${i} )`:a?`texelFetchOffset( ${t}, ${r}, ${i}, ${a} )`:`texelFetch( ${t}, ${r}, ${i} )`,null!==e&&e.isDepthTexture&&(s+=".x"),s}generateTexture(e,t,r,i,n){return(i&&(r=`vec3( ${r}, ${i} )`),e.isDepthTexture)?n?`textureOffset( ${t}, ${r}, ${n} ).x`:`texture( ${t}, ${r} ).x`:n?`textureOffset( ${t}, ${r}, ${n} )`:`texture( ${t}, ${r} )`}generateTextureLevel(e,t,r,i,n){return n?`textureLodOffset( ${t}, ${r}, ${i}, ${n} )`:`textureLod( ${t}, ${r}, ${i} )`}generateTextureBias(e,t,r,i,n){return n?`textureOffset( ${t}, ${r}, ${n}, ${i} )`:`texture( ${t}, ${r}, ${i} )`}generateTextureGrad(e,t,r,i,n){return n?`textureGradOffset( ${t}, ${r}, ${i[0]}, ${i[1]}, ${n} )`:`textureGrad( ${t}, ${r}, ${i[0]}, ${i[1]} )`}generateTextureCompare(e,t,r,i,n,a,s=this.shaderStage){if("fragment"===s)return n?a?`textureOffset( ${t}, vec4( ${r}, ${n}, ${i} ), ${a} )`:`texture( ${t}, vec4( ${r}, ${n}, ${i} ) )`:a?`textureOffset( ${t}, vec3( ${r}, ${i} ), ${a} )`:`texture( ${t}, vec3( ${r}, ${i} ) )`;eL(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${s} shader.`)}getVars(e){let t=[],r=this.vars[e];if(void 0!==r)for(let e of r)t.push(`${this.getVar(e.type,e.name,e.count)};`);return t.join("\n	")}getUniforms(e){let t=this.uniforms[e],r=[],i={};for(let n of t){let t=null,a=!1;if("texture"===n.type||"texture3D"===n.type){let e=n.node.value,r="";(!0===e.isDataTexture||!0===e.isData3DTexture)&&(1014===e.type?r="u":1013===e.type&&(r="i")),t="texture3D"===n.type&&!1===e.isArrayTexture?`${r}sampler3D ${n.name};`:e.compareFunction?!0===e.isArrayTexture?`sampler2DArrayShadow ${n.name};`:`sampler2DShadow ${n.name};`:!0===e.isArrayTexture||!0===e.isDataArrayTexture||!0===e.isCompressedArrayTexture?`${r}sampler2DArray ${n.name};`:`${r}sampler2D ${n.name};`}else if("cubeTexture"===n.type)t=`samplerCube ${n.name};`;else if("buffer"===n.type){let e=n.node,r=this.getType(e.bufferType),i=e.bufferCount,a=i>0?i:"";t=`${e.name} {
	${r} ${n.name}[${a}];
};
`}else{let r=this.getVectorType(n.type);t=`${r} ${this.getPropertyName(n,e)};`,a=!0}let s=n.node.precision;if(null!==s&&(t=DB[s]+" "+t),a){t="	"+t;let e=n.groupNode.name;(i[e]||(i[e]=[])).push(t)}else t="uniform "+t,r.push(t)}let n="";for(let t in i){let r=i[t];n+=this._getGLSLUniformStruct(e+"_"+t,r.join("\n"))+"\n"}return n+r.join("\n")}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&1013!==e.gpuType){let r=e;e.isInterleavedBufferAttribute&&(r=e.data);let i=r.array;!1==(i instanceof Uint32Array||i instanceof Int32Array)&&(t=t.slice(1))}return t}getAttributes(e){let t="";if("vertex"===e||"compute"===e){let e=this.getAttributesArray(),r=0;for(let i of e)t+=`layout( location = ${r++} ) in ${i.type} ${i.name};
`}return t}getStructMembers(e){let t=[];for(let r of e.members)t.push(`	${r.type} ${r.name};`);return t.join("\n")}getStructs(e){let t=[],r=this.structs[e],i=[];for(let e of r)if(e.output)for(let t of e.members)i.push(`layout( location = ${t.index} ) out ${t.type} ${t.name};`);else{let r="struct "+e.name+" {\n";r+=this.getStructMembers(e),r+="\n};\n",t.push(r)}return 0===i.length&&i.push("layout( location = 0 ) out vec4 fragColor;"),"\n"+i.join("\n")+"\n\n"+t.join("\n")}getVaryings(e){let t="",r=this.varyings;if("vertex"===e||"compute"===e)for(let i of r){"compute"===e&&(i.needsInterpolation=!0);let r=this.getType(i.type);if(i.needsInterpolation)if(i.interpolationType){let e=DO[i.interpolationType]||i.interpolationType,n=DU[i.interpolationSampling]||"";t+=`${e} ${n} out ${r} ${i.name};
`}else{let e=r.includes("int")||r.includes("uv")||r.includes("iv")?"flat ":"";t+=`${e}out ${r} ${i.name};
`}else t+=`${r} ${i.name};
`}else if("fragment"===e){for(let e of r)if(e.needsInterpolation){let r=this.getType(e.type);if(e.interpolationType){let i=DO[e.interpolationType]||e.interpolationType,n=DU[e.interpolationSampling]||"";t+=`${i} ${n} in ${r} ${e.name};
`}else{let i=r.includes("int")||r.includes("uv")||r.includes("iv")?"flat ":"";t+=`${i}in ${r} ${e.name};
`}}}for(let r of this.builtins[e])t+=`${r};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){let e=this.object.workgroupSize.reduce((e,t)=>e*t,1);return`uint( gl_InstanceID ) % ${e}u`}getSubgroupSize(){eL("GLSLNodeBuilder: WebGLBackend does not support the subgroupSize node")}getInvocationSubgroupIndex(){eL("GLSLNodeBuilder: WebGLBackend does not support the invocationSubgroupIndex node")}getSubgroupIndex(){eL("GLSLNodeBuilder: WebGLBackend does not support the subgroupIndex node")}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,r=this.shaderStage){let i=this.extensions[r]||(this.extensions[r]=new Map);!1===i.has(e)&&i.set(e,{name:e,behavior:t})}getExtensions(e){let t=[];if("vertex"===e){let t=this.renderer.backend.extensions;this.object.isBatchedMesh&&t.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}let r=this.extensions[e];if(void 0!==r)for(let{name:e,behavior:i}of r.values())t.push(`#extension ${e} : ${i}`);return t.join("\n")}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=DF[e];if(void 0===t){let r;switch(t=!1,e){case"float32Filterable":r="OES_texture_float_linear";break;case"clipDistance":r="WEBGL_clip_cull_distance"}if(void 0!==r){let e=this.renderer.backend.extensions;e.has(r)&&(e.get(r),t=!0)}DF[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){let e=this.transforms,t="";for(let r=0;r<e.length;r++){let i=e[r],n=this.getPropertyName(i.attributeNode);n&&(t+=`${i.varyingName} = ${n};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${Dk}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${Dk}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){let e=null!==this.material?{fragment:{},vertex:{}}:{compute:{}};for(let t in this.sortBindingGroups(),e){let r="// code\n\n";r+=this.flowCode[t];let i=this.flowNodes[t],n=i[i.length-1];for(let e of i){let i=this.getFlowData(e),a=e.name;a&&(r.length>0&&(r+="\n"),r+=`	// flow -> ${a}
	`),r+=`${i.code}
	`,e===n&&"compute"!==t&&(r+="// result\n	","vertex"===t?(r+="gl_Position = ",r+=`${i.result};`):"fragment"!==t||e.outputNode.isOutputStructNode||(r+="fragColor = ",r+=`${i.result};`))}let a=e[t];a.extensions=this.getExtensions(t),a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.vars=this.getVars(t),a.structs=this.getStructs(t),a.codes=this.getCodes(t),a.transforms=this.getTransforms(t),a.flow=r}null!==this.material?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,r,i=null){let n=super.getUniformFromNode(e,t,r,i),a=this.getDataFromNode(e,r,this.globalCache),s=a.uniformGPU;if(void 0===s){let i=e.groupNode,o=i.name,l=this.getBindGroupArray(o,r);if("texture"===t)s=new DN(n.name,n.node,i),l.push(s);else if("cubeTexture"===t)s=new DP(n.name,n.node,i),l.push(s);else if("texture3D"===t)s=new DI(n.name,n.node,i),l.push(s);else if("buffer"===t){e.name=`NodeBuffer_${e.id}`,n.name=`buffer${e.id}`;let t=new DS(e,i);t.name=e.name,l.push(t),s=t}else{let e=this.uniformGroups[r]||(this.uniformGroups[r]={}),a=e[o];void 0===a&&(a=new DM(r+"_"+o,i),e[o]=a,l.push(a)),s=this.getNodeUniform(n,t),a.addUniform(s)}a.uniformGPU=s}return n}}let DV=null,Dq=null;class DG{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={[ev.RENDER]:null,[ev.COMPUTE]:null},this.trackTimestamp=!0===e.trackTimestamp}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}updateSampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}updateTimeStampUID(e){let t=this.get(e),r=this.renderer.info.frame;t.timestampUID=(!0===e.isComputeNode?"c:"+this.renderer.info.compute.frameCalls:"r:"+this.renderer.info.render.frameCalls)+":"+e.id+":f"+r}getTimestampUID(e){return this.get(e).timestampUID}getTimestampFrames(e){let t=this.timestampQueryPool[e];return t?t.getTimestampFrames():[]}_getQueryPool(e){let t=e.startsWith("c:")?ev.COMPUTE:ev.RENDER;return this.timestampQueryPool[t]}getTimestamp(e){return this._getQueryPool(e).getTimestamp(e)}hasTimestamp(e){return this._getQueryPool(e).hasTimestamp(e)}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp)return void eD("WebGPURenderer: Timestamp tracking is disabled.");let t=this.timestampQueryPool[e];if(!t)return;let r=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=r,r}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return DV=DV||new eX,this.renderer.getDrawingBufferSize(DV)}setScissorTest(){}getClearColor(){let e=this.renderer;return Dq=Dq||new Rh,e.getClearColor(Dq),Dq.getRGB(Dq),Dq}getDomElement(){let e=this.domElement;return null===e&&("setAttribute"in(e=void 0!==this.parameters.canvas?this.parameters.canvas:eM())&&e.setAttribute("data-engine","three.js r181 webgpu"),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return void 0===t&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let DH=0;class Dj{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[1^this.activeBufferIndex]}switchBuffers(){this.activeBufferIndex^=1}}class DW{constructor(e){this.backend=e}createAttribute(e,t){let r,i=this.backend,{gl:n}=i,a=e.array,s=e.usage||n.STATIC_DRAW,o=e.isInterleavedBufferAttribute?e.data:e,l=i.get(o),u=l.bufferGPU;if(void 0===u&&(l.bufferGPU=u=this._createBuffer(n,t,a,s),l.bufferType=t,l.version=o.version),a instanceof Float32Array)r=n.FLOAT;else if("undefined"!=typeof Float16Array&&a instanceof Float16Array)r=n.HALF_FLOAT;else if(a instanceof Uint16Array)r=e.isFloat16BufferAttribute?n.HALF_FLOAT:n.UNSIGNED_SHORT;else if(a instanceof Int16Array)r=n.SHORT;else if(a instanceof Uint32Array)r=n.UNSIGNED_INT;else if(a instanceof Int32Array)r=n.INT;else if(a instanceof Int8Array)r=n.BYTE;else if(a instanceof Uint8Array)r=n.UNSIGNED_BYTE;else if(a instanceof Uint8ClampedArray)r=n.UNSIGNED_BYTE;else throw Error("THREE.WebGLBackend: Unsupported buffer data format: "+a);let c={bufferGPU:u,bufferType:t,type:r,byteLength:a.byteLength,bytesPerElement:a.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:r===n.INT||r===n.UNSIGNED_INT||1013===e.gpuType,id:DH++};(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(c=new Dj(c,this._createBuffer(n,t,a,s))),i.set(e,c)}updateAttribute(e){let t=this.backend,{gl:r}=t,i=e.array,n=e.isInterleavedBufferAttribute?e.data:e,a=t.get(n),s=a.bufferType,o=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(r.bindBuffer(s,a.bufferGPU),0===o.length)r.bufferSubData(s,0,i);else{for(let e=0,t=o.length;e<t;e++){let t=o[e];r.bufferSubData(s,t.start*i.BYTES_PER_ELEMENT,i,t.start,t.count)}n.clearUpdateRanges()}r.bindBuffer(s,null),a.version=n.version}destroyAttribute(e){let t=this.backend,{gl:r}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);let i=t.get(e);r.deleteBuffer(i.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){let t=this.backend,{gl:r}=t,i=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:n}=t.get(i),a=e.array,s=a.byteLength;r.bindBuffer(r.COPY_READ_BUFFER,n);let o=r.createBuffer();r.bindBuffer(r.COPY_WRITE_BUFFER,o),r.bufferData(r.COPY_WRITE_BUFFER,s,r.STREAM_READ),r.copyBufferSubData(r.COPY_READ_BUFFER,r.COPY_WRITE_BUFFER,0,0,s),await t.utils._clientWaitAsync();let l=new e.array.constructor(a.length);return r.bindBuffer(r.COPY_WRITE_BUFFER,o),r.getBufferSubData(r.COPY_WRITE_BUFFER,0,l),r.deleteBuffer(o),r.bindBuffer(r.COPY_READ_BUFFER,null),r.bindBuffer(r.COPY_WRITE_BUFFER,null),l.buffer}_createBuffer(e,t,r,i){let n=e.createBuffer();return e.bindBuffer(t,n),e.bufferData(t,r,i),e.bindBuffer(t,null),n}}class DX{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){let e=this.gl;c={100:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT},h={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA};let t=e.getParameter(e.SCISSOR_BOX),r=e.getParameter(e.VIEWPORT);this.currentScissor=new tr().fromArray(t),this.currentViewport=new tr().fromArray(r),this._tempVec4=new tr}enable(e){let{enabled:t}=this;!0!==t[e]&&(this.gl.enable(e),t[e]=!0)}disable(e){let{enabled:t}=this;!1!==t[e]&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){let{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){let{gl:t}=this;0!==e?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(1===e?t.cullFace(t.BACK):2===e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){let{currentLineWidth:t,gl:r}=this;e!==t&&(r.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,r,i,n,a,s,o){let{gl:l}=this;if(0===e){!0===this.currentBlendingEnabled&&(this.disable(l.BLEND),this.currentBlendingEnabled=!1);return}if(!1===this.currentBlendingEnabled&&(this.enable(l.BLEND),this.currentBlendingEnabled=!0),5!==e){if(e!==this.currentBlending||o!==this.currentPremultipledAlpha){if((100!==this.currentBlendEquation||100!==this.currentBlendEquationAlpha)&&(l.blendEquation(l.FUNC_ADD),this.currentBlendEquation=100,this.currentBlendEquationAlpha=100),o)switch(e){case 1:l.blendFuncSeparate(l.ONE,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA);break;case 2:l.blendFunc(l.ONE,l.ONE);break;case 3:l.blendFuncSeparate(l.ZERO,l.ONE_MINUS_SRC_COLOR,l.ZERO,l.ONE);break;case 4:l.blendFuncSeparate(l.DST_COLOR,l.ONE_MINUS_SRC_ALPHA,l.ZERO,l.ONE);break;default:eL("WebGLState: Invalid blending: ",e)}else switch(e){case 1:l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA);break;case 2:l.blendFuncSeparate(l.SRC_ALPHA,l.ONE,l.ONE,l.ONE);break;case 3:eL("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case 4:eL("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:eL("WebGLState: Invalid blending: ",e)}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=o}return}n=n||t,a=a||r,s=s||i,(t!==this.currentBlendEquation||n!==this.currentBlendEquationAlpha)&&(l.blendEquationSeparate(c[t],c[n]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=n),(r!==this.currentBlendSrc||i!==this.currentBlendDst||a!==this.currentBlendSrcAlpha||s!==this.currentBlendDstAlpha)&&(l.blendFuncSeparate(h[r],h[i],h[a],h[s]),this.currentBlendSrc=r,this.currentBlendDst=i,this.currentBlendSrcAlpha=a,this.currentBlendDstAlpha=s),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){let{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){let{gl:t}=this;switch(e){case 0:t.depthFunc(t.NEVER);break;case 1:t.depthFunc(t.ALWAYS);break;case 2:t.depthFunc(t.LESS);break;case 3:default:t.depthFunc(t.LEQUAL);break;case 4:t.depthFunc(t.EQUAL);break;case 5:t.depthFunc(t.GEQUAL);break;case 6:t.depthFunc(t.GREATER);break;case 7:t.depthFunc(t.NOTEQUAL)}this.currentDepthFunc=e}}scissor(e,t,r,i){let n=this._tempVec4.set(e,t,r,i);if(!1===this.currentScissor.equals(n)){let{gl:e}=this;e.scissor(n.x,n.y,n.z,n.w),this.currentScissor.copy(n)}}viewport(e,t,r,i){let n=this._tempVec4.set(e,t,r,i);if(!1===this.currentViewport.equals(n)){let{gl:e}=this;e.viewport(n.x,n.y,n.z,n.w),this.currentViewport.copy(n)}}setScissorTest(e){let t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){let{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,r){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==r)&&(this.gl.stencilFunc(e,t,r),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=r)}setStencilOp(e,t,r){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==r)&&(this.gl.stencilOp(e,t,r),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=r)}setMaterial(e,t,r){let{gl:i}=this;2===e.side?this.disable(i.CULL_FACE):this.enable(i.CULL_FACE);let n=1===e.side;t&&(n=!n),this.setFlipSided(n),1===e.blending&&!1===e.transparent?this.setBlending(0):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);let a=e.stencilWrite;if(this.setStencilTest(a),a&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage&&this.backend.renderer.currentSamples>0?this.enable(i.SAMPLE_ALPHA_TO_COVERAGE):this.disable(i.SAMPLE_ALPHA_TO_COVERAGE),r>0&&this.currentClippingPlanes!==r)for(let e=0;e<8;e++)e<r?this.enable(12288+e):this.disable(12288+e)}setPolygonOffset(e,t,r){let{gl:i}=this;e?(this.enable(i.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==r)&&(i.polygonOffset(t,r),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=r)):this.disable(i.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e&&(this.gl.useProgram(e),this.currentProgram=e,!0)}setVertexState(e,t=null){let r=this.gl;return(this.currentVAO!==e||this.currentIndex!==t)&&(r.bindVertexArray(e),null!==t&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0)}resetVertexState(){let e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){let{gl:r,currentBoundFramebuffers:i}=this;return i[e]!==t&&(r.bindFramebuffer(e,t),i[e]=t,e===r.DRAW_FRAMEBUFFER&&(i[r.FRAMEBUFFER]=t),e===r.FRAMEBUFFER&&(i[r.DRAW_FRAMEBUFFER]=t),!0)}drawBuffers(e,t){let{gl:r}=this,i=[],n=!1;if(null!==e.textures){void 0===(i=this.currentDrawbuffers.get(t))&&(i=[],this.currentDrawbuffers.set(t,i));let a=e.textures;if(i.length!==a.length||i[0]!==r.COLOR_ATTACHMENT0){for(let e=0,t=a.length;e<t;e++)i[e]=r.COLOR_ATTACHMENT0+e;i.length=a.length,n=!0}}else i[0]!==r.BACK&&(i[0]=r.BACK,n=!0);n&&r.drawBuffers(i)}activeTexture(e){let{gl:t,currentTextureSlot:r,maxTextures:i}=this;void 0===e&&(e=t.TEXTURE0+i-1),r!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,r){let{gl:i,currentTextureSlot:n,currentBoundTextures:a,maxTextures:s}=this;void 0===r&&(r=null===n?i.TEXTURE0+s-1:n);let o=a[r];void 0===o&&(o={type:void 0,texture:void 0},a[r]=o),(o.type!==e||o.texture!==t)&&(n!==r&&(i.activeTexture(r),this.currentTextureSlot=r),i.bindTexture(e,t),o.type=e,o.texture=t)}bindBufferBase(e,t,r){let{gl:i}=this,n=`${e}-${t}`;return this.currentBoundBufferBases[n]!==r&&(i.bindBufferBase(e,t,r),this.currentBoundBufferBases[n]=r,!0)}unbindTexture(){let{gl:e,currentTextureSlot:t,currentBoundTextures:r}=this,i=r[t];void 0!==i&&void 0!==i.type&&(e.bindTexture(i.type,null),i.type=void 0,i.texture=void 0)}}class DQ{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=""){let r,{gl:i,extensions:n}=this,a=e2.getTransfer(t);if(1009===e)return i.UNSIGNED_BYTE;if(1017===e)return i.UNSIGNED_SHORT_4_4_4_4;if(1018===e)return i.UNSIGNED_SHORT_5_5_5_1;if(35902===e)return i.UNSIGNED_INT_5_9_9_9_REV;if(35899===e)return i.UNSIGNED_INT_10F_11F_11F_REV;if(1010===e)return i.BYTE;if(1011===e)return i.SHORT;if(1012===e)return i.UNSIGNED_SHORT;if(1013===e)return i.INT;if(1014===e)return i.UNSIGNED_INT;if(1015===e)return i.FLOAT;if(1016===e)return i.HALF_FLOAT;if(1021===e)return i.ALPHA;if(1022===e)return i.RGB;if(1023===e)return i.RGBA;if(1026===e)return i.DEPTH_COMPONENT;if(1027===e)return i.DEPTH_STENCIL;if(1028===e)return i.RED;if(1029===e)return i.RED_INTEGER;if(1030===e)return i.RG;if(1031===e)return i.RG_INTEGER;if(1033===e)return i.RGBA_INTEGER;if(33776===e||33777===e||33778===e||33779===e)if(a===eg){if(null===(r=n.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===e)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===e)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===e)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===e)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=n.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(r=n.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e||37492===e||37496===e){if(null===(r=n.get("WEBGL_compressed_texture_etc")))return null;if(36196===e||37492===e)return a===eg?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(37496===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e){if(null===(r=n.get("WEBGL_compressed_texture_astc")))return null;if(37808===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===e)return a===eg?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===e){if(null===(r=n.get("EXT_texture_compression_bptc")))return null;if(36492===e)return a===eg?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===e||36284===e||36285===e||36286===e){if(null===(r=n.get("EXT_texture_compression_rgtc")))return null;if(36283===e)return r.COMPRESSED_RED_RGTC1_EXT;if(36284===e)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===e)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===e)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===e?i.UNSIGNED_INT_24_8:void 0!==i[e]?i[e]:null}_clientWaitAsync(){let{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((r,i)=>{!function n(){let a=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(a===e.WAIT_FAILED){e.deleteSync(t),i();return}a===e.TIMEOUT_EXPIRED?requestAnimationFrame(n):(e.deleteSync(t),r())}()})}}let D$=!1,DY,DK,DZ;class DJ{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},this._srcFramebuffer=null,this._dstFramebuffer=null,!1===D$&&(this._init(),D$=!0)}_init(){let e=this.gl;DY={1e3:e.REPEAT,1001:e.CLAMP_TO_EDGE,1002:e.MIRRORED_REPEAT},DK={1003:e.NEAREST,1004:e.NEAREST_MIPMAP_NEAREST,1005:e.NEAREST_MIPMAP_LINEAR,1006:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,1008:e.LINEAR_MIPMAP_LINEAR},DZ={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL}}getGLTextureType(e){let{gl:t}=this;return!0===e.isCubeTexture?t.TEXTURE_CUBE_MAP:!0===e.isArrayTexture||!0===e.isDataArrayTexture||!0===e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:!0===e.isData3DTexture?t.TEXTURE_3D:t.TEXTURE_2D}getInternalFormat(e,t,r,i,n=!1){let{gl:a,extensions:s}=this;if(null!==e){if(void 0!==a[e])return a[e];eI("WebGLBackend: Attempt to use non-existing WebGL internal format '"+e+"'")}let o=t;if(t===a.RED&&(r===a.FLOAT&&(o=a.R32F),r===a.HALF_FLOAT&&(o=a.R16F),r===a.UNSIGNED_BYTE&&(o=a.R8),r===a.UNSIGNED_SHORT&&(o=a.R16),r===a.UNSIGNED_INT&&(o=a.R32UI),r===a.BYTE&&(o=a.R8I),r===a.SHORT&&(o=a.R16I),r===a.INT&&(o=a.R32I)),t===a.RED_INTEGER&&(r===a.UNSIGNED_BYTE&&(o=a.R8UI),r===a.UNSIGNED_SHORT&&(o=a.R16UI),r===a.UNSIGNED_INT&&(o=a.R32UI),r===a.BYTE&&(o=a.R8I),r===a.SHORT&&(o=a.R16I),r===a.INT&&(o=a.R32I)),t===a.RG&&(r===a.FLOAT&&(o=a.RG32F),r===a.HALF_FLOAT&&(o=a.RG16F),r===a.UNSIGNED_BYTE&&(o=a.RG8),r===a.UNSIGNED_SHORT&&(o=a.RG16),r===a.UNSIGNED_INT&&(o=a.RG32UI),r===a.BYTE&&(o=a.RG8I),r===a.SHORT&&(o=a.RG16I),r===a.INT&&(o=a.RG32I)),t===a.RG_INTEGER&&(r===a.UNSIGNED_BYTE&&(o=a.RG8UI),r===a.UNSIGNED_SHORT&&(o=a.RG16UI),r===a.UNSIGNED_INT&&(o=a.RG32UI),r===a.BYTE&&(o=a.RG8I),r===a.SHORT&&(o=a.RG16I),r===a.INT&&(o=a.RG32I)),t===a.RGB){let e=n?em:e2.getTransfer(i);r===a.FLOAT&&(o=a.RGB32F),r===a.HALF_FLOAT&&(o=a.RGB16F),r===a.UNSIGNED_BYTE&&(o=a.RGB8),r===a.UNSIGNED_SHORT&&(o=a.RGB16),r===a.UNSIGNED_INT&&(o=a.RGB32UI),r===a.BYTE&&(o=a.RGB8I),r===a.SHORT&&(o=a.RGB16I),r===a.INT&&(o=a.RGB32I),r===a.UNSIGNED_BYTE&&(o=e===eg?a.SRGB8:a.RGB8),r===a.UNSIGNED_SHORT_5_6_5&&(o=a.RGB565),r===a.UNSIGNED_SHORT_5_5_5_1&&(o=a.RGB5_A1),r===a.UNSIGNED_SHORT_4_4_4_4&&(o=a.RGB4),r===a.UNSIGNED_INT_5_9_9_9_REV&&(o=a.RGB9_E5),r===a.UNSIGNED_INT_10F_11F_11F_REV&&(o=a.R11F_G11F_B10F)}if(t===a.RGB_INTEGER&&(r===a.UNSIGNED_BYTE&&(o=a.RGB8UI),r===a.UNSIGNED_SHORT&&(o=a.RGB16UI),r===a.UNSIGNED_INT&&(o=a.RGB32UI),r===a.BYTE&&(o=a.RGB8I),r===a.SHORT&&(o=a.RGB16I),r===a.INT&&(o=a.RGB32I)),t===a.RGBA){let e=n?em:e2.getTransfer(i);r===a.FLOAT&&(o=a.RGBA32F),r===a.HALF_FLOAT&&(o=a.RGBA16F),r===a.UNSIGNED_BYTE&&(o=a.RGBA8),r===a.UNSIGNED_SHORT&&(o=a.RGBA16),r===a.UNSIGNED_INT&&(o=a.RGBA32UI),r===a.BYTE&&(o=a.RGBA8I),r===a.SHORT&&(o=a.RGBA16I),r===a.INT&&(o=a.RGBA32I),r===a.UNSIGNED_BYTE&&(o=e===eg?a.SRGB8_ALPHA8:a.RGBA8),r===a.UNSIGNED_SHORT_4_4_4_4&&(o=a.RGBA4),r===a.UNSIGNED_SHORT_5_5_5_1&&(o=a.RGB5_A1)}return t===a.RGBA_INTEGER&&(r===a.UNSIGNED_BYTE&&(o=a.RGBA8UI),r===a.UNSIGNED_SHORT&&(o=a.RGBA16UI),r===a.UNSIGNED_INT&&(o=a.RGBA32UI),r===a.BYTE&&(o=a.RGBA8I),r===a.SHORT&&(o=a.RGBA16I),r===a.INT&&(o=a.RGBA32I)),t===a.DEPTH_COMPONENT&&(r===a.UNSIGNED_SHORT&&(o=a.DEPTH_COMPONENT16),r===a.UNSIGNED_INT&&(o=a.DEPTH_COMPONENT24),r===a.FLOAT&&(o=a.DEPTH_COMPONENT32F)),t===a.DEPTH_STENCIL&&r===a.UNSIGNED_INT_24_8&&(o=a.DEPTH24_STENCIL8),(o===a.R16F||o===a.R32F||o===a.RG16F||o===a.RG32F||o===a.RGBA16F||o===a.RGBA32F)&&s.get("EXT_color_buffer_float"),o}setTextureParameters(e,t){let{gl:r,extensions:i,backend:n}=this,a=e2.getPrimaries(e2.workingColorSpace),s=""===t.colorSpace?null:e2.getPrimaries(t.colorSpace),o=""===t.colorSpace||a===s?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,t.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,t.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,o),r.texParameteri(e,r.TEXTURE_WRAP_S,DY[t.wrapS]),r.texParameteri(e,r.TEXTURE_WRAP_T,DY[t.wrapT]),e!==r.TEXTURE_3D&&e!==r.TEXTURE_2D_ARRAY||t.isArrayTexture||r.texParameteri(e,r.TEXTURE_WRAP_R,DY[t.wrapR]),r.texParameteri(e,r.TEXTURE_MAG_FILTER,DK[t.magFilter]);let l=void 0!==t.mipmaps&&t.mipmaps.length>0,u=1006===t.minFilter&&l?1008:t.minFilter;if(r.texParameteri(e,r.TEXTURE_MIN_FILTER,DK[u]),t.compareFunction&&(r.texParameteri(e,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(e,r.TEXTURE_COMPARE_FUNC,DZ[t.compareFunction])),!0===i.has("EXT_texture_filter_anisotropic")){if(1003===t.magFilter||1005!==t.minFilter&&1008!==t.minFilter||1015===t.type&&!1===i.has("OES_texture_float_linear"))return;if(t.anisotropy>1){let a=i.get("EXT_texture_filter_anisotropic");r.texParameterf(e,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,n.getMaxAnisotropy()))}}}createDefaultTexture(e){let{gl:t,backend:r,defaultTextures:i}=this,n=this.getGLTextureType(e),a=i[n];void 0===a&&(a=t.createTexture(),r.state.bindTexture(n,a),t.texParameteri(n,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(n,t.TEXTURE_MAG_FILTER,t.NEAREST),i[n]=a),r.set(e,{textureGPU:a,glTextureType:n})}createTexture(e,t){let{gl:r,backend:i}=this,{levels:n,width:a,height:s,depth:o}=t,l=i.utils.convert(e.format,e.colorSpace),u=i.utils.convert(e.type),c=this.getInternalFormat(e.internalFormat,l,u,e.colorSpace,e.isVideoTexture),h=r.createTexture(),d=this.getGLTextureType(e);i.state.bindTexture(d,h),this.setTextureParameters(d,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?r.texStorage3D(r.TEXTURE_2D_ARRAY,n,c,a,s,o):e.isData3DTexture?r.texStorage3D(r.TEXTURE_3D,n,c,a,s,o):e.isVideoTexture||r.texStorage2D(d,n,c,a,s),i.set(e,{textureGPU:h,glTextureType:d,glFormat:l,glType:u,glInternalFormat:c})}copyBufferToTexture(e,t){let{gl:r,backend:i}=this,{textureGPU:n,glTextureType:a,glFormat:s,glType:o}=i.get(t),{width:l,height:u}=t.source.data;r.bindBuffer(r.PIXEL_UNPACK_BUFFER,e),i.state.bindTexture(a,n),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.texSubImage2D(a,0,0,0,l,u,s,o,0),r.bindBuffer(r.PIXEL_UNPACK_BUFFER,null),i.state.unbindTexture()}updateTexture(e,t){let{gl:r}=this,{width:i,height:n}=t,{textureGPU:a,glTextureType:s,glFormat:o,glType:l,glInternalFormat:u}=this.backend.get(e);if(!e.isRenderTargetTexture&&void 0!==a)if(this.backend.state.bindTexture(s,a),this.setTextureParameters(s,e),e.isCompressedTexture){let i=e.mipmaps,n=t.image;for(let t=0;t<i.length;t++){let a=i[t];e.isCompressedArrayTexture?e.format!==r.RGBA?null!==o?r.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,t,0,0,0,a.width,a.height,n.depth,o,a.data):eI("WebGLBackend: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texSubImage3D(r.TEXTURE_2D_ARRAY,t,0,0,0,a.width,a.height,n.depth,o,l,a.data):null!==o?r.compressedTexSubImage2D(r.TEXTURE_2D,t,0,0,a.width,a.height,o,a.data):eI("WebGLBackend: Unsupported compressed texture format")}}else if(e.isCubeTexture){let a=t.images,s=e.mipmaps;for(let e=0;e<6;e++){let t=D0(a[e]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,i,n,o,l,t);for(let t=0;t<s.length;t++){let i=D0(s[t].images[e]);r.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+e,t+1,0,0,i.width,i.height,o,l,i)}}}else if(e.isDataArrayTexture||e.isArrayTexture){let i=t.image;if(e.layerUpdates.size>0){let t=lB(i.width,i.height,e.format,e.type);for(let n of e.layerUpdates){let e=i.data.subarray(n*t/i.data.BYTES_PER_ELEMENT,(n+1)*t/i.data.BYTES_PER_ELEMENT);r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,n,i.width,i.height,1,o,l,e)}e.clearLayerUpdates()}else r.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,i.width,i.height,i.depth,o,l,i.data)}else if(e.isData3DTexture){let e=t.image;r.texSubImage3D(r.TEXTURE_3D,0,0,0,0,e.width,e.height,e.depth,o,l,e.data)}else if(e.isVideoTexture)e.update(),r.texImage2D(s,0,u,o,l,t.image);else{let a=e.mipmaps;if(a.length>0)for(let e=0,t=a.length;e<t;e++){let t=a[e],i=D0(t);r.texSubImage2D(s,e,0,0,t.width,t.height,o,l,i)}else{let e=D0(t.image);r.texSubImage2D(s,0,0,0,i,n,o,l,e)}}}generateMipmaps(e){let{gl:t,backend:r}=this,{textureGPU:i,glTextureType:n}=r.get(e);r.state.bindTexture(n,i),t.generateMipmap(n)}deallocateRenderBuffers(e){let{gl:t,backend:r}=this;if(e){let i=r.get(e);if(i.renderBufferStorageSetup=void 0,i.framebuffers){for(let e in i.framebuffers)t.deleteFramebuffer(i.framebuffers[e]);delete i.framebuffers}if(i.depthRenderbuffer&&(t.deleteRenderbuffer(i.depthRenderbuffer),delete i.depthRenderbuffer),i.stencilRenderbuffer&&(t.deleteRenderbuffer(i.stencilRenderbuffer),delete i.stencilRenderbuffer),i.msaaFrameBuffer&&(t.deleteFramebuffer(i.msaaFrameBuffer),delete i.msaaFrameBuffer),i.msaaRenderbuffers){for(let e=0;e<i.msaaRenderbuffers.length;e++)t.deleteRenderbuffer(i.msaaRenderbuffers[e]);delete i.msaaRenderbuffers}}}destroyTexture(e,t=!1){let{gl:r,backend:i}=this,{textureGPU:n,renderTarget:a}=i.get(e);this.deallocateRenderBuffers(a),!1===t&&r.deleteTexture(n),i.delete(e)}copyTextureToTexture(e,t,r=null,i=null,n=0,a=0){let s,o,l,u,c,h,d,A,p,{gl:f,backend:m}=this,{state:g}=this.backend,{textureGPU:y,glTextureType:v,glType:x,glFormat:_}=m.get(t);g.bindTexture(v,y);let b=e.isCompressedTexture?e.mipmaps[a]:e.image;if(null!==r)s=r.max.x-r.min.x,o=r.max.y-r.min.y,l=r.isBox3?r.max.z-r.min.z:1,u=r.min.x,c=r.min.y,h=r.isBox3?r.min.z:0;else{let t=Math.pow(2,-n);s=Math.floor(b.width*t),o=Math.floor(b.height*t),l=e.isDataArrayTexture||e.isArrayTexture?b.depth:e.isData3DTexture?Math.floor(b.depth*t):1,u=0,c=0,h=0}null!==i?(d=i.x,A=i.y,p=i.z):(d=0,A=0,p=0),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,t.flipY),f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),f.pixelStorei(f.UNPACK_ALIGNMENT,t.unpackAlignment);let S=f.getParameter(f.UNPACK_ROW_LENGTH),T=f.getParameter(f.UNPACK_IMAGE_HEIGHT),w=f.getParameter(f.UNPACK_SKIP_PIXELS),M=f.getParameter(f.UNPACK_SKIP_ROWS),E=f.getParameter(f.UNPACK_SKIP_IMAGES);f.pixelStorei(f.UNPACK_ROW_LENGTH,b.width),f.pixelStorei(f.UNPACK_IMAGE_HEIGHT,b.height),f.pixelStorei(f.UNPACK_SKIP_PIXELS,u),f.pixelStorei(f.UNPACK_SKIP_ROWS,c),f.pixelStorei(f.UNPACK_SKIP_IMAGES,h);let C=e.isDataArrayTexture||e.isData3DTexture||t.isArrayTexture,R=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isDepthTexture){let r=m.get(e),i=m.get(t),v=m.get(r.renderTarget),x=m.get(i.renderTarget),_=v.framebuffers[r.cacheKey],b=x.framebuffers[i.cacheKey];g.bindFramebuffer(f.READ_FRAMEBUFFER,_),g.bindFramebuffer(f.DRAW_FRAMEBUFFER,b);for(let e=0;e<l;e++)C&&(f.framebufferTextureLayer(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,r.textureGPU,n,h+e),f.framebufferTextureLayer(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,y,a,p+e)),f.blitFramebuffer(u,c,s,o,d,A,s,o,f.DEPTH_BUFFER_BIT,f.NEAREST);g.bindFramebuffer(f.READ_FRAMEBUFFER,null),g.bindFramebuffer(f.DRAW_FRAMEBUFFER,null)}else if(0!==n||e.isRenderTargetTexture||m.has(e)){let t=m.get(e);null===this._srcFramebuffer&&(this._srcFramebuffer=f.createFramebuffer()),null===this._dstFramebuffer&&(this._dstFramebuffer=f.createFramebuffer()),g.bindFramebuffer(f.READ_FRAMEBUFFER,this._srcFramebuffer),g.bindFramebuffer(f.DRAW_FRAMEBUFFER,this._dstFramebuffer);for(let e=0;e<l;e++)C?f.framebufferTextureLayer(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,t.textureGPU,n,h+e):f.framebufferTexture2D(f.READ_FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,t.textureGPU,n),R?f.framebufferTextureLayer(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,y,a,p+e):f.framebufferTexture2D(f.DRAW_FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,y,a),0!==n?f.blitFramebuffer(u,c,s,o,d,A,s,o,f.COLOR_BUFFER_BIT,f.NEAREST):R?f.copyTexSubImage3D(v,a,d,A,p+e,u,c,s,o):f.copyTexSubImage2D(v,a,d,A,u,c,s,o);g.bindFramebuffer(f.READ_FRAMEBUFFER,null),g.bindFramebuffer(f.DRAW_FRAMEBUFFER,null)}else R?e.isDataTexture||e.isData3DTexture?f.texSubImage3D(v,a,d,A,p,s,o,l,_,x,b.data):t.isCompressedArrayTexture?f.compressedTexSubImage3D(v,a,d,A,p,s,o,l,_,b.data):f.texSubImage3D(v,a,d,A,p,s,o,l,_,x,b):e.isDataTexture?f.texSubImage2D(f.TEXTURE_2D,a,d,A,s,o,_,x,b.data):e.isCompressedTexture?f.compressedTexSubImage2D(f.TEXTURE_2D,a,d,A,b.width,b.height,_,b.data):f.texSubImage2D(f.TEXTURE_2D,a,d,A,s,o,_,x,b);f.pixelStorei(f.UNPACK_ROW_LENGTH,S),f.pixelStorei(f.UNPACK_IMAGE_HEIGHT,T),f.pixelStorei(f.UNPACK_SKIP_PIXELS,w),f.pixelStorei(f.UNPACK_SKIP_ROWS,M),f.pixelStorei(f.UNPACK_SKIP_IMAGES,E),0===a&&t.generateMipmaps&&f.generateMipmap(v),g.unbindTexture()}copyFramebufferToTexture(e,t,r){let{gl:i}=this,{state:n}=this.backend,{textureGPU:a}=this.backend.get(e),{x:s,y:o,z:l,w:u}=r,c=!0===e.isDepthTexture||t.renderTarget&&t.renderTarget.samples>0,h=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(c){let r,c,d=0!==s||0!==o;if(!0===e.isDepthTexture?(r=i.DEPTH_BUFFER_BIT,c=i.DEPTH_ATTACHMENT,t.stencil&&(r|=i.STENCIL_BUFFER_BIT)):(r=i.COLOR_BUFFER_BIT,c=i.COLOR_ATTACHMENT0),d){let e=this.backend.get(t.renderTarget),c=e.framebuffers[t.getCacheKey()],d=e.msaaFrameBuffer;n.bindFramebuffer(i.DRAW_FRAMEBUFFER,c),n.bindFramebuffer(i.READ_FRAMEBUFFER,d);let A=h-o-u;i.blitFramebuffer(s,A,s+l,A+u,s,A,s+l,A+u,r,i.NEAREST),n.bindFramebuffer(i.READ_FRAMEBUFFER,c),n.bindTexture(i.TEXTURE_2D,a),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,s,A,l,u),n.unbindTexture()}else{let e=i.createFramebuffer();n.bindFramebuffer(i.DRAW_FRAMEBUFFER,e),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,c,i.TEXTURE_2D,a,0),i.blitFramebuffer(0,0,l,u,0,0,l,u,r,i.NEAREST),i.deleteFramebuffer(e)}}else n.bindTexture(i.TEXTURE_2D,a),i.copyTexSubImage2D(i.TEXTURE_2D,0,0,0,s,h-u-o,l,u),n.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,r,i=!1){let{gl:n}=this,a=t.renderTarget,{depthTexture:s,depthBuffer:o,stencilBuffer:l,width:u,height:c}=a;if(n.bindRenderbuffer(n.RENDERBUFFER,e),o&&!l){let t=n.DEPTH_COMPONENT24;!0===i?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(n.RENDERBUFFER,a.samples,t,u,c):r>0?(s&&s.isDepthTexture&&s.type===n.FLOAT&&(t=n.DEPTH_COMPONENT32F),n.renderbufferStorageMultisample(n.RENDERBUFFER,r,t,u,c)):n.renderbufferStorage(n.RENDERBUFFER,t,u,c),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,e)}else o&&l&&(r>0?n.renderbufferStorageMultisample(n.RENDERBUFFER,r,n.DEPTH24_STENCIL8,u,c):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,u,c),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,e));n.bindRenderbuffer(n.RENDERBUFFER,null)}async copyTextureToBuffer(e,t,r,i,n,a){let{backend:s,gl:o}=this,{textureGPU:l,glFormat:u,glType:c}=this.backend.get(e),h=o.createFramebuffer();o.bindFramebuffer(o.READ_FRAMEBUFFER,h);let d=e.isCubeTexture?o.TEXTURE_CUBE_MAP_POSITIVE_X+a:o.TEXTURE_2D;o.framebufferTexture2D(o.READ_FRAMEBUFFER,o.COLOR_ATTACHMENT0,d,l,0);let A=this._getTypedArrayType(c),p=i*n*this._getBytesPerTexel(c,u),f=o.createBuffer();o.bindBuffer(o.PIXEL_PACK_BUFFER,f),o.bufferData(o.PIXEL_PACK_BUFFER,p,o.STREAM_READ),o.readPixels(t,r,i,n,u,c,0),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),await s.utils._clientWaitAsync();let m=new A(p/A.BYTES_PER_ELEMENT);return o.bindBuffer(o.PIXEL_PACK_BUFFER,f),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,m),o.bindBuffer(o.PIXEL_PACK_BUFFER,null),o.deleteFramebuffer(h),m}_getTypedArrayType(e){let{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){let{gl:r}=this,i=0;return(e===r.UNSIGNED_BYTE&&(i=1),(e===r.UNSIGNED_SHORT_4_4_4_4||e===r.UNSIGNED_SHORT_5_5_5_1||e===r.UNSIGNED_SHORT_5_6_5||e===r.UNSIGNED_SHORT||e===r.HALF_FLOAT)&&(i=2),(e===r.UNSIGNED_INT||e===r.FLOAT)&&(i=4),t===r.RGBA)?4*i:t===r.RGB?3*i:t===r.ALPHA?i:void 0}dispose(){let{gl:e}=this;null!==this._srcFramebuffer&&e.deleteFramebuffer(this._srcFramebuffer),null!==this._dstFramebuffer&&e.deleteFramebuffer(this._dstFramebuffer)}}function D0(e){return e.isDataTexture?e.image.data:"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?e:e.data}class D1{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return void 0===t&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class D2{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(null!==this.maxAnisotropy)return this.maxAnisotropy;let e=this.backend.gl,t=this.backend.extensions;if(!0===t.has("EXT_texture_filter_anisotropic")){let r=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}let D3={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-s3tc",EXT_texture_compression_bptc:"texture-compression-bc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class D4{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){let{gl:r,mode:i,object:n,type:a,info:s,index:o}=this;0!==o?r.drawElements(i,t,a,e):r.drawArrays(i,e,t),s.update(n,t,1)}renderInstances(e,t,r){let{gl:i,mode:n,type:a,index:s,object:o,info:l}=this;0!==r&&(0!==s?i.drawElementsInstanced(n,t,a,e,r):i.drawArraysInstanced(n,e,t,r),l.update(o,t,r))}renderMultiDraw(e,t,r){let{extensions:i,mode:n,object:a,info:s}=this;if(0===r)return;let o=i.get("WEBGL_multi_draw");if(null===o)for(let i=0;i<r;i++)this.render(e[i],t[i]);else{0!==this.index?o.multiDrawElementsWEBGL(n,t,0,this.type,e,0,r):o.multiDrawArraysWEBGL(n,e,0,t,0,r);let i=0;for(let e=0;e<r;e++)i+=t[e];s.update(a,i,1)}}renderMultiDrawInstances(e,t,r,i){let{extensions:n,mode:a,object:s,info:o}=this;if(0===r)return;let l=n.get("WEBGL_multi_draw");if(null===l)for(let n=0;n<r;n++)this.renderInstances(e[n],t[n],i[n]);else{0!==this.index?l.multiDrawElementsInstancedWEBGL(a,t,0,this.type,e,0,i,0,r):l.multiDrawArraysInstancedWEBGL(a,e,0,t,0,i,0,r);let n=0;for(let e=0;e<r;e++)n+=t[e]*i[e];o.update(s,n,1)}}}class D5{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.frames=[],this.pendingResolve=!1,this.timestamps=new Map}getTimestampFrames(){return this.frames}getTimestamp(e){let t=this.timestamps.get(e);return void 0===t&&(eI(`TimestampQueryPool: No timestamp available for uid ${e}.`),t=0),t}hasTimestamp(e){return this.timestamps.has(e)}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class D8 extends D5{constructor(e,t,r=2048){if(super(r),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){eI("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let t=0;t<this.maxQueries;t++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return eD(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;let t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;let t=this.queryOffsets.get(e);if(null==t||null!==this.activeQuery)return;let r=this.queries[t];if(r)try{"inactive"===this.queryStates.get(t)&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,r),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(e){e("Error in beginQuery:",e),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;let t=this.queryOffsets.get(e);if(null!=t&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(e){e("Error in endQuery:",e),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{let e=new Map;for(let[t,r]of this.queryOffsets){let i=this.queryStates.get(r);if("ended"===i){let i=this.queries[r];e.set(t,this.resolveQuery(i))}}if(0===e.size)return this.lastValue;let t={},r=[];for(let[i,n]of e){let e=i.match(/^(.*):f(\d+)$/),a=parseInt(e[2]);!1===r.includes(a)&&r.push(a),void 0===t[a]&&(t[a]=0);let s=await n;this.timestamps.set(i,s),t[a]+=s}let i=t[r[r.length-1]];return this.lastValue=i,this.frames=r,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,i}catch(e){return e("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{let r;if(this.isDisposed)return void t(this.lastValue);let i=!1,n=e=>{i||(i=!0,r&&(clearTimeout(r),r=null),t(e))},a=()=>{if(this.isDisposed)return void n(this.lastValue);try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT))return void n(this.lastValue);if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){r=setTimeout(a,1);return}let i=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(i)/1e6)}catch(e){e("Error checking query:",e),t(this.lastValue)}};a()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,this.trackTimestamp)){for(let e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class D6 extends DG{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);let t=this.parameters,r={antialias:e.currentSamples>0,alpha:!0,depth:e.depth,stencil:e.stencil},i=void 0!==t.context?t.context:e.domElement.getContext("webgl2",r);function n(t){t.preventDefault();let r={api:"WebGL",message:t.statusMessage||"Unknown reason",reason:null,originalEvent:t};e.onDeviceLost(r)}this._onContextLost=n,e.domElement.addEventListener("webglcontextlost",n,!1),this.gl=i,this.extensions=new D1(this),this.capabilities=new D2(this),this.attributeUtils=new DW(this),this.textureUtils=new DJ(this),this.bufferRenderer=new D4(this),this.state=new DX(this),this.utils=new DQ(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return 2e3}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async makeXRCompatible(){!0!==this.gl.getContextAttributes().xrCompatible&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,r=null){let i=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:i.RGBA8}),null!==r){let t=e.stencilBuffer?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:r,glInternalFormat:t}),!0===this.extensions.has("WEBGL_multisampled_render_to_texture")&&!0===e._autoAllocateDepthBuffer&&!1===e.multiview&&eI("WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e,t){if(!this.disjoint||!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new D8(this.gl,e,2048));let r=this.timestampQueryPool[e];null!==r.allocateQueriesForContext(t)&&r.beginQuery(t)}prepareTimestampBuffer(e,t){this.disjoint&&this.trackTimestamp&&this.timestampQueryPool[e].endQuery(t)}getContext(){return this.gl}beginRender(e){let{state:t}=this,r=this.get(e);if(e.viewport)this.updateViewport(e);else{let{width:e,height:r}=this.getDrawingBufferSize();t.viewport(0,0,e,r)}if(e.scissor){let{x:r,y:i,width:n,height:a}=e.scissorValue;t.scissor(r,e.height-a-i,n,a)}this.initTimestampQuery(ev.RENDER,this.getTimestampUID(e)),r.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);let i=e.occlusionQueryCount;i>0&&(r.currentOcclusionQueries=r.occlusionQueries,r.currentOcclusionQueryObjects=r.occlusionQueryObjects,r.lastOcclusionObject=null,r.occlusionQueries=Array(i),r.occlusionQueryObjects=Array(i),r.occlusionQueryIndex=0)}finishRender(e){let{gl:t,state:r}=this,i=this.get(e),n=i.previousContext;r.resetVertexState();let a=e.occlusionQueryCount;a>0&&(a>i.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));let s=e.textures;if(null!==s)for(let e=0;e<s.length;e++){let t=s[e];t.generateMipmaps&&this.generateMipmaps(t)}if(this._currentContext=n,this._resolveRenderTarget(e),null!==n)if(this._setFramebuffer(n),n.viewport)this.updateViewport(n);else{let{width:e,height:t}=this.getDrawingBufferSize();r.viewport(0,0,e,t)}this.prepareTimestampBuffer(ev.RENDER,this.getTimestampUID(e))}resolveOccludedAsync(e){let t=this.get(e),{currentOcclusionQueries:r,currentOcclusionQueryObjects:i}=t;if(r&&i){let e=new WeakSet,{gl:n}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;let a=()=>{let s=0;for(let t=0;t<r.length;t++){let a=r[t];null!==a&&n.getQueryParameter(a,n.QUERY_RESULT_AVAILABLE)&&(0===n.getQueryParameter(a,n.QUERY_RESULT)&&e.add(i[t]),r[t]=null,n.deleteQuery(a),s++)}s<r.length?requestAnimationFrame(a):t.occluded=e};a()}}isOccluded(e,t){let r=this.get(e);return r.occluded&&r.occluded.has(t)}updateViewport(e){let{state:t}=this,{x:r,y:i,width:n,height:a}=e.viewportValue;t.viewport(r,e.height-a-i,n,a)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){let e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,r,i=null,n=!0,a=!0){let{gl:s,renderer:o}=this;null===i&&(i={textures:null,clearColorValue:this.getClearColor()});let l=0;if(e&&(l|=s.COLOR_BUFFER_BIT),t&&(l|=s.DEPTH_BUFFER_BIT),r&&(l|=s.STENCIL_BUFFER_BIT),0!==l){let u;u=i.clearColorValue?i.clearColorValue:this.getClearColor();let c=o.getClearDepth(),h=o.getClearStencil();if(t&&this.state.setDepthMask(!0),null===i.textures)s.clearColor(u.r,u.g,u.b,u.a),s.clear(l);else{if(n&&this._setFramebuffer(i),e)for(let e=0;e<i.textures.length;e++)0===e?s.clearBufferfv(s.COLOR,e,[u.r,u.g,u.b,u.a]):s.clearBufferfv(s.COLOR,e,[0,0,0,1]);t&&r?s.clearBufferfi(s.DEPTH_STENCIL,0,c,h):t?s.clearBufferfv(s.DEPTH,0,[c]):r&&s.clearBufferiv(s.STENCIL,0,[h]),n&&a&&this._resolveRenderTarget(i)}}}beginCompute(e){let{state:t,gl:r}=this;t.bindFramebuffer(r.FRAMEBUFFER,null),this.initTimestampQuery(ev.COMPUTE,this.getTimestampUID(e))}compute(e,t,r,i,n=null){let{state:a,gl:s}=this;!1===this.discard&&(s.enable(s.RASTERIZER_DISCARD),this.discard=!0);let{programGPU:o,transformBuffers:l,attributes:u}=this.get(i),c=this._getVaoKey(u),h=this.vaoCache[c];void 0===h?this.vaoCache[c]=this._createVao(u):a.setVertexState(h),a.useProgram(o),this._bindUniforms(r);let d=this._getTransformFeedback(l);s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,d),s.beginTransformFeedback(s.POINTS),Array.isArray(n=null!==n?n:t.count)?(eD("WebGLBackend.compute(): The count parameter must be a single number, not an array."),n=n[0]):n&&"object"==typeof n&&n.isIndirectStorageBufferAttribute&&(eD("WebGLBackend.compute(): The count parameter must be a single number, not IndirectStorageBufferAttribute"),n=t.count),u[0].isStorageInstancedBufferAttribute?s.drawArraysInstanced(s.POINTS,0,1,n):s.drawArrays(s.POINTS,0,n),s.endTransformFeedback(),s.bindTransformFeedback(s.TRANSFORM_FEEDBACK,null);for(let e=0;e<l.length;e++){let t=l[e];t.pbo&&this.has(t.pbo)&&this.textureUtils.copyBufferToTexture(t.transformBuffer,t.pbo),t.switchBuffers()}}finishCompute(e){let t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(ev.COMPUTE,this.getTimestampUID(e)),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){let{object:t,pipeline:r,material:i,context:n,hardwareClippingPlanes:a}=e,{programGPU:s}=this.get(r),{gl:o,state:l}=this,u=this.get(n),c=e.getDrawParameters();if(null===c)return;this._bindUniforms(e.getBindings());let h=t.isMesh&&0>t.matrixWorld.determinant();l.setMaterial(i,h,a),l.useProgram(s);let d=e.getAttributes(),A=this.get(d),p=A.vaoGPU;if(void 0===p){let e=this._getVaoKey(d);void 0===(p=this.vaoCache[e])&&(p=this._createVao(d),this.vaoCache[e]=p,A.vaoGPU=p)}let f=e.getIndex(),m=null!==f?this.get(f).bufferGPU:null;l.setVertexState(p,m);let g=u.lastOcclusionObject;if(g!==t&&void 0!==g){if(null!==g&&!0===g.occlusionTest&&(o.endQuery(o.ANY_SAMPLES_PASSED),u.occlusionQueryIndex++),!0===t.occlusionTest){let e=o.createQuery();o.beginQuery(o.ANY_SAMPLES_PASSED,e),u.occlusionQueries[u.occlusionQueryIndex]=e,u.occlusionQueryObjects[u.occlusionQueryIndex]=t}u.lastOcclusionObject=t}let y=this.bufferRenderer;t.isPoints?y.mode=o.POINTS:t.isLineSegments?y.mode=o.LINES:t.isLine?y.mode=o.LINE_STRIP:t.isLineLoop?y.mode=o.LINE_LOOP:!0===i.wireframe?(l.setLineWidth(i.wireframeLinewidth*this.renderer.getPixelRatio()),y.mode=o.LINES):y.mode=o.TRIANGLES;let{vertexCount:v,instanceCount:x}=c,{firstVertex:_}=c;if(y.object=t,null!==f){_*=f.array.BYTES_PER_ELEMENT;let e=this.get(f);y.index=f.count,y.type=e.type}else y.index=0;let b=()=>{t.isBatchedMesh?null!==t._multiDrawInstances?(eD("WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),y.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?y.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):eD("WebGLBackend: WEBGL_multi_draw not supported."):x>1?y.renderInstances(_,v,x):y.render(_,v)};if(!0===e.camera.isArrayCamera&&e.camera.cameras.length>0&&!1===e.camera.isMultiViewCamera){let r=this.get(e.camera),i=e.camera.cameras,n=e.getBindingGroup("cameraIndex").bindings[0];if(void 0===r.indexesGPU||r.indexesGPU.length!==i.length){let e=new Uint32Array([0,0,0,0]),t=[];for(let r=0,n=i.length;r<n;r++){let i=o.createBuffer();e[0]=r,o.bindBuffer(o.UNIFORM_BUFFER,i),o.bufferData(o.UNIFORM_BUFFER,e,o.STATIC_DRAW),t.push(i)}r.indexesGPU=t}let a=this.get(n),s=this.renderer.getPixelRatio(),u=this._currentContext.renderTarget,c=this._isRenderCameraDepthArray(this._currentContext),h=this._currentContext.activeCubeFace;if(c){let e=this.get(u.depthTexture);if(e.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){e.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;let{stencilBuffer:t}=u;for(let e=0,r=i.length;e<r;e++)this.renderer._activeCubeFace=e,this._currentContext.activeCubeFace=e,this._setFramebuffer(this._currentContext),this.clear(!1,!0,t,this._currentContext,!1,!1);this.renderer._activeCubeFace=h,this._currentContext.activeCubeFace=h}}for(let n=0,u=i.length;n<u;n++){let u=i[n];if(t.layers.test(u.layers)){c&&(this.renderer._activeCubeFace=n,this._currentContext.activeCubeFace=n,this._setFramebuffer(this._currentContext));let t=u.viewport;if(void 0!==t){let r=t.x*s,i=t.y*s,n=t.width*s,a=t.height*s;l.viewport(Math.floor(r),Math.floor(e.context.height-a-i),Math.floor(n),Math.floor(a))}l.bindBufferBase(o.UNIFORM_BUFFER,a.index,r.indexesGPU[n]),b()}this._currentContext.activeCubeFace=h,this.renderer._activeCubeFace=h}}else b()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e,t=!1){this.textureUtils.destroyTexture(e,t)}async copyTextureToBuffer(e,t,r,i,n,a){return this.textureUtils.copyTextureToBuffer(e,t,r,i,n,a)}updateSampler(){return""}createNodeBuilder(e,t){return new Dz(e,t)}createProgram(e){let t=this.gl,{stage:r,code:i}=e,n="fragment"===r?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(n,i),t.compileShader(n),this.set(e,{shaderGPU:n})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){let r=this.gl,i=e.pipeline,{fragmentProgram:n,vertexProgram:a}=i,s=r.createProgram(),o=this.get(n).shaderGPU,l=this.get(a).shaderGPU;if(r.attachShader(s,o),r.attachShader(s,l),r.linkProgram(s),this.set(i,{programGPU:s,fragmentShader:o,vertexShader:l}),null!==t&&this.parallel){let n=new Promise(t=>{let n=this.parallel,a=()=>{r.getProgramParameter(s,n.COMPLETION_STATUS_KHR)?(this._completeCompile(e,i),t()):requestAnimationFrame(a)};a()});t.push(n);return}this._completeCompile(e,i)}_handleSource(e,t){let r=e.split("\n"),i=[],n=Math.max(t-6,0),a=Math.min(t+6,r.length);for(let e=n;e<a;e++){let n=e+1;i.push(`${n===t?">":" "} ${n}: ${r[e]}`)}return i.join("\n")}_getShaderErrors(e,t,r){let i=e.getShaderParameter(t,e.COMPILE_STATUS),n=(e.getShaderInfoLog(t)||"").trim();if(i&&""===n)return"";let a=/ERROR: 0:(\d+)/.exec(n);if(!a)return n;{let i=parseInt(a[1]);return r.toUpperCase()+"\n\n"+n+"\n\n"+this._handleSource(e.getShaderSource(t),i)}}_logProgramError(e,t,r){if(this.renderer.debug.checkShaderErrors){let i=this.gl,n=(i.getProgramInfoLog(e)||"").trim();if(!1===i.getProgramParameter(e,i.LINK_STATUS))if("function"==typeof this.renderer.debug.onShaderError)this.renderer.debug.onShaderError(i,e,r,t);else{let a=this._getShaderErrors(i,r,"vertex"),s=this._getShaderErrors(i,t,"fragment");eL("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(e,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+n+"\n"+a+"\n"+s)}else""!==n&&eI("WebGLProgram: Program Info Log:",n)}}_completeCompile(e,t){let{state:r,gl:i}=this,{programGPU:n,fragmentShader:a,vertexShader:s}=this.get(t);!1===i.getProgramParameter(n,i.LINK_STATUS)&&this._logProgramError(n,a,s),r.useProgram(n);let o=e.getBindings();this._setupBindings(o,n),this.set(t,{programGPU:n})}createComputePipeline(e,t){let{state:r,gl:i}=this,n={stage:"fragment",code:"#version 300 es\nprecision highp float;\nvoid main() {}"};this.createProgram(n);let{computeProgram:a}=e,s=i.createProgram(),o=this.get(n).shaderGPU,l=this.get(a).shaderGPU,u=a.transforms,c=[],h=[];for(let e=0;e<u.length;e++){let t=u[e];c.push(t.varyingName),h.push(t.attributeNode)}i.attachShader(s,o),i.attachShader(s,l),i.transformFeedbackVaryings(s,c,i.SEPARATE_ATTRIBS),i.linkProgram(s),!1===i.getProgramParameter(s,i.LINK_STATUS)&&this._logProgramError(s,o,l),r.useProgram(s),this._setupBindings(t,s);let d=a.attributes,A=[],p=[];for(let e=0;e<d.length;e++){let t=d[e].node.attribute;A.push(t),this.has(t)||this.attributeUtils.createAttribute(t,i.ARRAY_BUFFER)}for(let e=0;e<h.length;e++){let t=h[e].attribute;this.has(t)||this.attributeUtils.createAttribute(t,i.ARRAY_BUFFER);let r=this.get(t);p.push(r)}this.set(e,{programGPU:s,transformBuffers:p,attributes:A})}createBindings(e,t){if(!1===this._knownBindings.has(t)){this._knownBindings.add(t);let e=0,r=0;for(let i of t)for(let t of(this.set(i,{textures:r,uniformBuffers:e}),i.bindings))t.isUniformBuffer&&e++,t.isSampledTexture&&r++}this.updateBindings(e,t)}updateBindings(e){let{gl:t}=this,r=this.get(e),i=r.uniformBuffers,n=r.textures;for(let r of e.bindings){let e=this.get(r);if(r.isUniformsGroup||r.isUniformBuffer){let n=r.buffer,{bufferGPU:a}=this.get(n);void 0===a?(a=t.createBuffer(),t.bindBuffer(t.UNIFORM_BUFFER,a),t.bufferData(t.UNIFORM_BUFFER,n,t.DYNAMIC_DRAW),this.set(n,{bufferGPU:a})):(t.bindBuffer(t.UNIFORM_BUFFER,a),t.bufferSubData(t.UNIFORM_BUFFER,0,n)),e.index=i++,e.bufferGPU=a,this.set(r,e)}else if(r.isSampledTexture){let{textureGPU:t,glTextureType:i}=this.get(r.texture);e.index=n++,e.textureGPU=t,e.glTextureType=i,this.set(r,e)}}}updateBinding(e){let t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){let r=this.get(e).bufferGPU,i=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,i,t.DYNAMIC_DRAW)}}createIndexAttribute(e){let t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;let t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;let t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){let t=Object.keys(D3).filter(t=>D3[t]===e),r=this.extensions;for(let e=0;e<t.length;e++)if(r.has(t[e]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,r=null,i=null,n=0,a=0){this.textureUtils.copyTextureToTexture(e,t,r,i,n,a)}copyFramebufferToTexture(e,t,r){this.textureUtils.copyFramebufferToTexture(e,t,r)}_setFramebuffer(e){let{gl:t,state:r}=this,i=null;if(null!==e.textures){let n,a=e.renderTarget,s=this.get(a),{samples:o,depthBuffer:l,stencilBuffer:u}=a,c=!0===a.isWebGLCubeRenderTarget,h=!0===a.isRenderTarget3D,d=a.depth>1,A=!0===a.isXRRenderTarget,p=!0===A&&!0===a._hasExternalTextures,f=s.msaaFrameBuffer,m=s.depthRenderbuffer,g=this.extensions.get("WEBGL_multisampled_render_to_texture"),y=this.extensions.get("OVR_multiview2"),v=this._useMultisampledExtension(a),x=Rn(e);if(c?(s.cubeFramebuffers||(s.cubeFramebuffers={}),n=s.cubeFramebuffers[x]):A&&!1===p?n=this._xrFramebuffer:(s.framebuffers||(s.framebuffers={}),n=s.framebuffers[x]),void 0===n){n=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,n);let i=e.textures,l=[];if(c){s.cubeFramebuffers[x]=n;let{textureGPU:e}=this.get(i[0]),r=this.renderer._activeCubeFace,a=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+r,e,a)}else{s.framebuffers[x]=n;for(let r=0;r<i.length;r++){let n=i[r],s=this.get(n);s.renderTarget=e.renderTarget,s.cacheKey=x;let l=t.COLOR_ATTACHMENT0+r;if(a.multiview)y.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,l,s.textureGPU,0,o,0,2);else if(h||d){let e=this.renderer._activeCubeFace,r=this.renderer._activeMipmapLevel;t.framebufferTextureLayer(t.FRAMEBUFFER,l,s.textureGPU,r,e)}else if(v)g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,l,t.TEXTURE_2D,s.textureGPU,0,o);else{let e=this.renderer._activeMipmapLevel;t.framebufferTexture2D(t.FRAMEBUFFER,l,t.TEXTURE_2D,s.textureGPU,e)}}}let A=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(!0===a._autoAllocateDepthBuffer){let r=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(r,e,0,v),s.xrDepthRenderbuffer=r,l.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,A,t.RENDERBUFFER,r)}else if(null!==e.depthTexture){l.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);let r=this.get(e.depthTexture);if(r.renderTarget=e.renderTarget,r.cacheKey=x,a.multiview)y.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,A,r.textureGPU,0,o,0,2);else if(p&&v)g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,A,t.TEXTURE_2D,r.textureGPU,0,o);else if(e.depthTexture.isArrayTexture){let e=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,A,r.textureGPU,0,e)}else t.framebufferTexture2D(t.FRAMEBUFFER,A,t.TEXTURE_2D,r.textureGPU,0)}s.depthInvalidationArray=l}else{if(this._isRenderCameraDepthArray(e)){r.bindFramebuffer(t.FRAMEBUFFER,n);let i=this.renderer._activeCubeFace,a=this.get(e.depthTexture),s=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,s,a.textureGPU,0,i)}if((A||v||a.multiview)&&!0!==a._isOpaqueFramebuffer){r.bindFramebuffer(t.FRAMEBUFFER,n);let i=this.get(e.textures[0]);a.multiview?y.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,i.textureGPU,0,o,0,2):v?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i.textureGPU,0);let l=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(!0===a._autoAllocateDepthBuffer){let e=s.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,e),t.framebufferRenderbuffer(t.FRAMEBUFFER,l,t.RENDERBUFFER,e)}else{let r=this.get(e.depthTexture);a.multiview?y.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,l,r.textureGPU,0,o,0,2):v?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,l,t.TEXTURE_2D,r.textureGPU,0,o):t.framebufferTexture2D(t.FRAMEBUFFER,l,t.TEXTURE_2D,r.textureGPU,0)}}}if(o>0&&!1===v&&!a.multiview){if(void 0===f){let i=[];f=t.createFramebuffer(),r.bindFramebuffer(t.FRAMEBUFFER,f);let n=[],a=e.textures;for(let r=0;r<a.length;r++){n[r]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n[r]),i.push(t.COLOR_ATTACHMENT0+r);let a=e.textures[r],s=this.get(a);t.renderbufferStorageMultisample(t.RENDERBUFFER,o,s.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.RENDERBUFFER,n[r])}if(t.bindRenderbuffer(t.RENDERBUFFER,null),s.msaaFrameBuffer=f,s.msaaRenderbuffers=n,l&&void 0===m){m=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(m,e,o),s.depthRenderbuffer=m;let r=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;i.push(r)}s.invalidationArray=i}i=s.msaaFrameBuffer}else i=n;r.drawBuffers(e,n)}r.bindFramebuffer(t.FRAMEBUFFER,i)}_getVaoKey(e){let t="";for(let r=0;r<e.length;r++)t+=":"+this.get(e[r]).id;return t}_createVao(e){let{gl:t}=this,r=t.createVertexArray();t.bindVertexArray(r);for(let r=0;r<e.length;r++){let i,n,a=e[r],s=this.get(a);t.bindBuffer(t.ARRAY_BUFFER,s.bufferGPU),t.enableVertexAttribArray(r),!0===a.isInterleavedBufferAttribute?(i=a.data.stride*s.bytesPerElement,n=a.offset*s.bytesPerElement):(i=0,n=0),s.isInteger?t.vertexAttribIPointer(r,a.itemSize,s.type,i,n):t.vertexAttribPointer(r,a.itemSize,s.type,a.normalized,i,n),a.isInstancedBufferAttribute&&!a.isInterleavedBufferAttribute?t.vertexAttribDivisor(r,a.meshPerAttribute):a.isInterleavedBufferAttribute&&a.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(r,a.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),r}_getTransformFeedback(e){let t="";for(let r=0;r<e.length;r++)t+=":"+e[r].id;let r=this.transformFeedbackCache[t];if(void 0!==r)return r;let{gl:i}=this;r=i.createTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r);for(let t=0;t<e.length;t++){let r=e[t];i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,t,r.transformBuffer)}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=r,r}_setupBindings(e,t){let r=this.gl;for(let i of e)for(let e of i.bindings){let i=this.get(e).index;if(e.isUniformsGroup||e.isUniformBuffer){let n=r.getUniformBlockIndex(t,e.name);r.uniformBlockBinding(t,n,i)}else if(e.isSampledTexture){let n=r.getUniformLocation(t,e.name);r.uniform1i(n,i)}}}_bindUniforms(e){let{gl:t,state:r}=this;for(let i of e)for(let e of i.bindings){let i=this.get(e),n=i.index;e.isUniformsGroup||e.isUniformBuffer?r.bindBufferBase(t.UNIFORM_BUFFER,n,i.bufferGPU):e.isSampledTexture&&r.bindTexture(i.glTextureType,i.textureGPU,t.TEXTURE0+n)}}_resolveRenderTarget(e){let{gl:t,state:r}=this,i=e.renderTarget;if(null!==e.textures&&i){let n=this.get(i);if(i.samples>0&&!1===this._useMultisampledExtension(i)){let a=n.framebuffers[e.getCacheKey()],s=t.COLOR_BUFFER_BIT;i.resolveDepthBuffer&&(i.depthBuffer&&(s|=t.DEPTH_BUFFER_BIT),i.stencilBuffer&&i.resolveStencilBuffer&&(s|=t.STENCIL_BUFFER_BIT));let o=n.msaaFrameBuffer,l=n.msaaRenderbuffers,u=e.textures,c=u.length>1;if(r.bindFramebuffer(t.READ_FRAMEBUFFER,o),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,a),c)for(let e=0;e<u.length;e++)t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);for(let r=0;r<u.length;r++){if(c){let{textureGPU:e}=this.get(u[r]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,l[r]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}if(e.scissor){let{x:r,y:i,width:n,height:a}=e.scissorValue,o=e.height-a-i;t.blitFramebuffer(r,o,r+n,o+a,r,o,r+n,o+a,s,t.NEAREST)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,s,t.NEAREST)}if(c)for(let e=0;e<u.length;e++){let{textureGPU:r}=this.get(u[e]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,l[e]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,r,0)}!0===this._supportsInvalidateFramebuffer&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,n.invalidationArray)}else if(!1===i.resolveDepthBuffer&&n.framebuffers){let i=n.framebuffers[e.getCacheKey()];r.bindFramebuffer(t.DRAW_FRAMEBUFFER,i),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,n.depthInvalidationArray)}}}_useMultisampledExtension(e){return!0===e.multiview||e.samples>0&&!0===this.extensions.has("WEBGL_multisampled_render_to_texture")&&!1!==e._autoAllocateDepthBuffer}dispose(){null!==this.textureUtils&&this.textureUtils.dispose();let e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}let D7="triangle-strip",D9="never",Be="less",Bt="equal",Br="less-equal",Bi="greater",Bn="not-equal",Ba="greater-equal",Bs="always",Bo="store",Bl="load",Bu="clear",Bc="uint16",Bh="uint32",Bd="r8unorm",BA="r8snorm",Bp="r8uint",Bf="r8sint",Bm="r16uint",Bg="r16sint",By="r16float",Bv="rg8unorm",Bx="rg8snorm",B_="rg8uint",Bb="rg8sint",BS="r32uint",BT="r32sint",Bw="r32float",BM="rg16uint",BE="rg16sint",BC="rg16float",BR="rgba8unorm",BN="rgba8unorm-srgb",BP="rgba8snorm",BI="rgba8uint",BL="rgba8sint",BD="bgra8unorm",BB="bgra8unorm-srgb",BF="rgb9e5ufloat",BO="rgb10a2unorm",BU="rg11b10ufloat",Bk="rg32uint",Bz="rg32sint",BV="rg32float",Bq="rgba16uint",BG="rgba16sint",BH="rgba16float",Bj="rgba32uint",BW="rgba32sint",BX="rgba32float",BQ="depth24plus",B$="depth24plus-stencil8",BY="depth32float",BK="depth32float-stencil8",BZ="bc1-rgba-unorm",BJ="bc1-rgba-unorm-srgb",B0="bc2-rgba-unorm",B1="bc2-rgba-unorm-srgb",B2="bc3-rgba-unorm",B3="bc3-rgba-unorm-srgb",B4="bc4-r-unorm",B5="bc4-r-snorm",B8="bc5-rg-unorm",B6="bc5-rg-snorm",B7="bc7-rgba-unorm",B9="bc7-rgba-unorm-srgb",Fe="etc2-rgb8unorm",Ft="etc2-rgb8unorm-srgb",Fr="etc2-rgba8unorm",Fi="etc2-rgba8unorm-srgb",Fn="astc-4x4-unorm",Fa="astc-4x4-unorm-srgb",Fs="astc-5x4-unorm",Fo="astc-5x4-unorm-srgb",Fl="astc-5x5-unorm",Fu="astc-5x5-unorm-srgb",Fc="astc-6x5-unorm",Fh="astc-6x5-unorm-srgb",Fd="astc-6x6-unorm",FA="astc-6x6-unorm-srgb",Fp="astc-8x5-unorm",Ff="astc-8x5-unorm-srgb",Fm="astc-8x6-unorm",Fg="astc-8x6-unorm-srgb",Fy="astc-8x8-unorm",Fv="astc-8x8-unorm-srgb",Fx="astc-10x5-unorm",F_="astc-10x5-unorm-srgb",Fb="astc-10x6-unorm",FS="astc-10x6-unorm-srgb",FT="astc-10x8-unorm",Fw="astc-10x8-unorm-srgb",FM="astc-10x10-unorm",FE="astc-10x10-unorm-srgb",FC="astc-12x10-unorm",FR="astc-12x10-unorm-srgb",FN="astc-12x12-unorm",FP="astc-12x12-unorm-srgb",FI="linear",FL="nearest",FD="zero",FB="one-minus-src",FF="src-alpha",FO="one-minus-src-alpha",FU="unfilterable-float",Fk="2d-array",Fz="cube",FV="vertex",Fq="instance",FG={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"},FH={"texture-compression-s3tc":"texture-compression-bc","texture-compression-etc1":"texture-compression-etc2"};class Fj extends DE{constructor(e,t,r){super(e,t?t.value:null),this.textureNode=t,this.groupNode=r}update(){let{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class FW extends Dx{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let FX=0;class FQ extends FW{constructor(e,t){super("StorageBuffer_"+FX++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:yL.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class F$ extends CX{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:FI}),this.flipYSampler=e.createSampler({minFilter:FL}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:r}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:i})}getTransferPipeline(e){let t=this.transferPipelines[e];return void 0===t&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:D7,stripIndexFormat:Bh},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return void 0===t&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:D7,stripIndexFormat:Bh},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,r=0){let i=t.format,{width:n,height:a}=t.size,s=this.getTransferPipeline(i),o=this.getFlipYPipeline(i),l=this.device.createTexture({size:{width:n,height:a,depthOrArrayLayers:1},format:i,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:r}),c=l.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:0}),h=this.device.createCommandEncoder({}),d=(e,t,r)=>{let i=e.getBindGroupLayout(0),n=this.device.createBindGroup({layout:i,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:t}]}),a=h.beginRenderPass({colorAttachments:[{view:r,loadOp:Bu,storeOp:Bo,clearValue:[0,0,0,0]}]});a.setPipeline(e),a.setBindGroup(0,n),a.draw(4,1,0,0),a.end()};d(s,u,c),d(o,c,u),this.device.queue.submit([h.finish()]),l.destroy()}generateMipmaps(e,t,r=0,i=null){let n=this.get(e);void 0===n.layers&&(n.layers=[]);let a=n.layers[r]||this._mipmapCreateBundles(e,t,r),s=i||this.device.createCommandEncoder({label:"mipmapEncoder"});this._mipmapRunBundles(s,a),null===i&&this.device.queue.submit([s.finish()]),n.layers[r]=a}_mipmapCreateBundles(e,t,r){let i=this.getTransferPipeline(t.format),n=i.getBindGroupLayout(0),a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:r}),s=[];for(let o=1;o<t.mipLevelCount;o++){let l=this.device.createBindGroup({layout:n,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),u=e.createView({baseMipLevel:o,mipLevelCount:1,dimension:"2d",baseArrayLayer:r}),c={colorAttachments:[{view:u,loadOp:Bu,storeOp:Bo,clearValue:[0,0,0,0]}]},h=this.device.createRenderBundleEncoder({colorFormats:[t.format]});h.setPipeline(i),h.setBindGroup(0,l),h.draw(4,1,0,0),s.push({renderBundles:[h.finish()],passDescriptor:c}),a=u}return s}_mipmapRunBundles(e,t){let r=t.length;for(let i=0;i<r;i++){let r=t[i],n=e.beginRenderPass(r.passDescriptor);n.executeBundles(r.renderBundles),n.end()}}}let FY={512:"never",513:"less",514:"equal",515:"less-equal",516:"greater",518:"greater-equal",519:"always",517:"not-equal"},FK=[0,1,3,2,4,5];class FZ{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this._samplerCache=new Map}updateSampler(e){let t=this.backend,r=e.minFilter+"-"+e.magFilter+"-"+e.wrapS+"-"+e.wrapT+"-"+(e.wrapR||"0")+"-"+e.anisotropy+"-"+(e.compareFunction||0),i=this._samplerCache.get(r);if(void 0===i){let n={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};n.magFilter===FI&&n.minFilter===FI&&n.mipmapFilter===FI&&(n.maxAnisotropy=e.anisotropy),e.isDepthTexture&&null!==e.compareFunction&&(n.compare=FY[e.compareFunction]),i={sampler:t.device.createSampler(n),usedTimes:0},this._samplerCache.set(r,i)}let n=t.get(e);if(n.sampler!==i.sampler){if(void 0!==n.sampler){let e=this._samplerCache.get(n.samplerKey);e.usedTimes--,0===e.usedTimes&&this._samplerCache.delete(n.samplerKey)}n.samplerKey=r,n.sampler=i.sampler,i.usedTimes++}return r}createDefaultTexture(e){let t,r=FJ(e);t=e.isCubeTexture?this._getDefaultCubeTextureGPU(r):this._getDefaultTextureGPU(r),this.backend.get(e).texture=t}createTexture(e,t={}){let r=this.backend,i=r.get(e);if(i.initialized)throw Error("WebGPUTextureUtils: Texture already initialized.");if(e.isExternalTexture){i.texture=e.sourceTexture,i.initialized=!0;return}void 0===t.needsMipmaps&&(t.needsMipmaps=!1),void 0===t.levels&&(t.levels=1),void 0===t.depth&&(t.depth=1);let{width:n,height:a,depth:s,levels:o}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());let l=this._getDimension(e),u=e.internalFormat||t.format||FJ(e,r.device);i.format=u;let{samples:c,primarySamples:h,isMSAA:d}=r.utils.getTextureSampleData(e),A=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;!0===e.isStorageTexture&&(A|=GPUTextureUsage.STORAGE_BINDING),!0!==e.isCompressedTexture&&!0!==e.isCompressedArrayTexture&&u!==BF&&(A|=GPUTextureUsage.RENDER_ATTACHMENT);let p={label:e.name,size:{width:n,height:a,depthOrArrayLayers:s},mipLevelCount:o,sampleCount:h,dimension:l,format:u,usage:A};if(void 0===u){eI("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(p.textureBindingViewDimension=Fz),i.texture=r.device.createTexture(p),d){let e=Object.assign({},p);e.label=e.label+"-msaa",e.sampleCount=c,e.mipLevelCount=1,i.msaaTexture=r.device.createTexture(e)}i.initialized=!0,i.textureDescriptorGPU=p}destroyTexture(e,t=!1){let r=this.backend,i=r.get(e);void 0!==i.texture&&!1===t&&i.texture.destroy(),void 0!==i.msaaTexture&&i.msaaTexture.destroy(),r.delete(e)}generateMipmaps(e,t=null){let r=this.backend.get(e);if(e.isCubeTexture)for(let e=0;e<6;e++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,e,t);else{let i=e.image.depth||1;for(let e=0;e<i;e++)this._generateMipmaps(r.texture,r.textureDescriptorGPU,e,t)}}getColorBuffer(){let e=this.backend,t=e.renderer.getCanvasTarget(),{width:r,height:i}=e.getDrawingBufferSize(),n=e.renderer.currentSamples,a=t.colorTexture,s=e.get(a);if(a.width===r&&a.height===i&&a.samples===n)return s.texture;let o=s.texture;return o&&o.destroy(),o=e.device.createTexture({label:"colorBuffer",size:{width:r,height:i,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.currentSamples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),a.source.width=r,a.source.height=i,a.samples=n,s.texture=o,o}getDepthBuffer(e=!0,t=!1){let r,i,n=this.backend,a=n.renderer.getCanvasTarget(),{width:s,height:o}=n.getDrawingBufferSize(),l=n.renderer.currentSamples,u=a.depthTexture;if(u.width===s&&u.height===o&&u.samples===l&&u.depth===e&&u.stencil===t)return n.get(u).texture;let c=n.get(u).texture;if(t?(r=1027,i=1020):e&&(r=1026,i=1014),void 0!==c){if(u.image.width===s&&u.image.height===o&&u.format===r&&u.type===i&&u.samples===l)return c;this.destroyTexture(u)}return u.name="depthBuffer",u.format=r,u.type=i,u.image.width=s,u.image.height=o,u.samples=l,this.createTexture(u,{width:s,height:o}),n.get(u).texture}updateTexture(e,t){let r=this.backend.get(e),i=e.mipmaps,{textureDescriptorGPU:n}=r;if(!e.isRenderTargetTexture&&void 0!==n){if(e.isDataTexture)if(i.length>0)for(let t=0,a=i.length;t<a;t++){let a=i[t];this._copyBufferToTexture(a,r.texture,n,0,e.flipY,0,t)}else this._copyBufferToTexture(t.image,r.texture,n,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let i=0;i<t.image.depth;i++)this._copyBufferToTexture(t.image,r.texture,n,i,e.flipY,i);else if(e.isCompressedTexture||e.isCompressedArrayTexture)this._copyCompressedBufferToTexture(e.mipmaps,r.texture,n);else if(e.isCubeTexture)this._copyCubeMapToTexture(e,r.texture,n);else if(i.length>0)for(let t=0,a=i.length;t<a;t++){let a=i[t];this._copyImageToTexture(a,r.texture,n,0,e.flipY,e.premultiplyAlpha,t)}else this._copyImageToTexture(t.image,r.texture,n,0,e.flipY,e.premultiplyAlpha);r.version=e.version}}async copyTextureToBuffer(e,t,r,i,n,a){let s=this.backend.device,o=this.backend.get(e),l=o.texture,u=o.textureDescriptorGPU.format,c=this._getBytesPerTexel(u),h=i*c;h=256*Math.ceil(h/256);let d=s.createBuffer({size:(n-1)*h+i*c,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),A=s.createCommandEncoder();A.copyTextureToBuffer({texture:l,origin:{x:t,y:r,z:a}},{buffer:d,bytesPerRow:h},{width:i,height:n});let p=this._getTypedArrayType(u);return s.queue.submit([A.finish()]),await d.mapAsync(GPUMapMode.READ),new p(d.getMappedRange())}dispose(){this._samplerCache.clear()}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(void 0===t){let r=new tt;r.minFilter=1003,r.magFilter=1003,this.createTexture(r,{width:1,height:1,format:e}),this.defaultTexture[e]=t=r}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(void 0===t){let r=new ic;r.minFilter=1003,r.magFilter=1003,this.createTexture(r,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=r}return this.backend.get(t).texture}_copyCubeMapToTexture(e,t,r){let i=e.images,n=e.mipmaps;for(let a=0;a<6;a++){let s=i[a],o=!0===e.flipY?FK[a]:a;s.isDataTexture?this._copyBufferToTexture(s.image,t,r,o,e.flipY):this._copyImageToTexture(s,t,r,o,e.flipY,e.premultiplyAlpha);for(let i=0;i<n.length;i++){let s=n[i].images[a];s.isDataTexture?this._copyBufferToTexture(s.image,t,r,o,e.flipY,0,i+1):this._copyImageToTexture(s,t,r,o,e.flipY,e.premultiplyAlpha,i+1)}}}_copyImageToTexture(e,t,r,i,n,a,s=0){let o=this.backend.device,l=s>0?e.width:r.size.width,u=s>0?e.height:r.size.height;o.queue.copyExternalImageToTexture({source:e,flipY:n},{texture:t,mipLevel:s,origin:{x:0,y:0,z:i},premultipliedAlpha:a},{width:l,height:u,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return null===e&&(this._passUtils=e=new F$(this.backend.device)),e}_generateMipmaps(e,t,r=0,i=null){this._getPassUtils().generateMipmaps(e,t,r,i)}_flipY(e,t,r=0){this._getPassUtils().flipY(e,t,r)}_copyBufferToTexture(e,t,r,i,n,a=0,s=0){let o=this.backend.device,l=e.data,u=this._getBytesPerTexel(r.format),c=e.width*u;o.queue.writeTexture({texture:t,mipLevel:s,origin:{x:0,y:0,z:i}},l,{offset:e.width*e.height*u*a,bytesPerRow:c},{width:e.width,height:e.height,depthOrArrayLayers:1}),!0===n&&this._flipY(t,r,i)}_copyCompressedBufferToTexture(e,t,r){let i=this.backend.device,n=this._getBlockData(r.format),a=r.size.depthOrArrayLayers>1;for(let s=0;s<e.length;s++){let o=e[s],l=o.width,u=o.height,c=a?r.size.depthOrArrayLayers:1,h=Math.ceil(l/n.width)*n.byteLength,d=h*Math.ceil(u/n.height);for(let e=0;e<c;e++)i.queue.writeTexture({texture:t,mipLevel:s,origin:{x:0,y:0,z:e}},o.data,{offset:e*d,bytesPerRow:h,rowsPerImage:Math.ceil(u/n.height)},{width:Math.ceil(l/n.width)*n.width,height:Math.ceil(u/n.height)*n.height,depthOrArrayLayers:1})}}_getBlockData(e){return e===BZ||e===BJ?{byteLength:8,width:4,height:4}:e===B0||e===B1||e===B2||e===B3?{byteLength:16,width:4,height:4}:e===B4||e===B5?{byteLength:8,width:4,height:4}:e===B8||e===B6||"bc6h-rgb-ufloat"===e||"bc6h-rgb-float"===e||e===B7||e===B9?{byteLength:16,width:4,height:4}:e===Fe||e===Ft||"etc2-rgb8a1unorm"===e||"etc2-rgb8a1unorm-srgb"===e?{byteLength:8,width:4,height:4}:e===Fr||e===Fi?{byteLength:16,width:4,height:4}:"eac-r11unorm"===e||"eac-r11snorm"===e?{byteLength:8,width:4,height:4}:"eac-rg11unorm"===e||"eac-rg11snorm"===e||e===Fn||e===Fa?{byteLength:16,width:4,height:4}:e===Fs||e===Fo?{byteLength:16,width:5,height:4}:e===Fl||e===Fu?{byteLength:16,width:5,height:5}:e===Fc||e===Fh?{byteLength:16,width:6,height:5}:e===Fd||e===FA?{byteLength:16,width:6,height:6}:e===Fp||e===Ff?{byteLength:16,width:8,height:5}:e===Fm||e===Fg?{byteLength:16,width:8,height:6}:e===Fy||e===Fv?{byteLength:16,width:8,height:8}:e===Fx||e===F_?{byteLength:16,width:10,height:5}:e===Fb||e===FS?{byteLength:16,width:10,height:6}:e===FT||e===Fw?{byteLength:16,width:10,height:8}:e===FM||e===FE?{byteLength:16,width:10,height:10}:e===FC||e===FR?{byteLength:16,width:12,height:10}:e===FN||e===FP?{byteLength:16,width:12,height:12}:void 0}_convertAddressMode(e){let t="clamp-to-edge";return 1e3===e?t="repeat":1002===e&&(t="mirror-repeat"),t}_convertFilterMode(e){let t=FI;return(1003===e||1004===e||1005===e)&&(t=FL),t}_getBytesPerTexel(e){return e===Bd||e===BA||e===Bp||e===Bf?1:e===Bm||e===Bg||e===By||e===Bv||e===Bx||e===B_||e===Bb?2:e===BS||e===BT||e===Bw||e===BM||e===BE||e===BC||e===BR||e===BN||e===BP||e===BI||e===BL||e===BD||e===BB||e===BF||e===BO||e===BU||e===BY||e===BQ||e===B$||e===BK?4:e===Bk||e===Bz||e===BV||e===Bq||e===BG||e===BH?8:e===Bj||e===BW||e===BX?16:void 0}_getTypedArrayType(e){return e===Bp?Uint8Array:e===Bf?Int8Array:e===Bd?Uint8Array:e===BA?Int8Array:e===B_?Uint8Array:e===Bb?Int8Array:e===Bv?Uint8Array:e===Bx?Int8Array:e===BI?Uint8Array:e===BL?Int8Array:e===BR||e===BN?Uint8Array:e===BP?Int8Array:e===Bm?Uint16Array:e===Bg?Int16Array:e===BM?Uint16Array:e===BE?Int16Array:e===Bq?Uint16Array:e===BG?Int16Array:e===By||e===BC||e===BH?Uint16Array:e===BS?Uint32Array:e===BT?Int32Array:e===Bw?Float32Array:e===Bk?Uint32Array:e===Bz?Int32Array:e===BV?Float32Array:e===Bj?Uint32Array:e===BW?Int32Array:e===BX?Float32Array:e===BD||e===BB?Uint8Array:e===BO||e===BF||e===BU?Uint32Array:e===BY?Float32Array:e===BQ||e===B$?Uint32Array:e===BK?Float32Array:void 0}_getDimension(e){return e.is3DTexture||e.isData3DTexture?"3d":"2d"}}function FJ(e,t=null){let r,i=e.format,n=e.type,a=e.colorSpace,s=e2.getTransfer(a);if(!0===e.isCompressedTexture||!0===e.isCompressedArrayTexture)switch(i){case 33776:case 33777:r=s===eg?BJ:BZ;break;case 33778:r=s===eg?B1:B0;break;case 33779:r=s===eg?B3:B2;break;case 36283:r=B4;break;case 36284:r=B5;break;case 36285:r=B8;break;case 36286:r=B6;break;case 36492:r=s===eg?B9:B7;break;case 37492:case 36196:r=s===eg?Ft:Fe;break;case 37496:r=s===eg?Fi:Fr;break;case 37808:r=s===eg?Fa:Fn;break;case 37809:r=s===eg?Fo:Fs;break;case 37810:r=s===eg?Fu:Fl;break;case 37811:r=s===eg?Fh:Fc;break;case 37812:r=s===eg?FA:Fd;break;case 37813:r=s===eg?Ff:Fp;break;case 37814:r=s===eg?Fg:Fm;break;case 37815:r=s===eg?Fv:Fy;break;case 37816:r=s===eg?F_:Fx;break;case 37817:r=s===eg?FS:Fb;break;case 37818:r=s===eg?Fw:FT;break;case 37819:r=s===eg?FE:FM;break;case 37820:r=s===eg?FR:FC;break;case 37821:r=s===eg?FP:FN;break;case 1023:r=s===eg?BN:BR;break;default:eL("WebGPURenderer: Unsupported texture format.",i)}else switch(i){case 1023:switch(n){case 1010:r=BP;break;case 1011:r=BG;break;case 1012:r=Bq;break;case 1014:r=Bj;break;case 1013:r=BW;break;case 1009:r=s===eg?BN:BR;break;case 1016:r=BH;break;case 1015:r=BX;break;default:eL("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case 1022:switch(n){case 35902:r=BF;break;case 35899:r=BU;break;default:eL("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case 1028:switch(n){case 1010:r=BA;break;case 1011:r=Bg;break;case 1012:r=Bm;break;case 1014:r=BS;break;case 1013:r=BT;break;case 1009:r=Bd;break;case 1016:r=By;break;case 1015:r=Bw;break;default:eL("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case 1030:switch(n){case 1010:r=Bx;break;case 1011:r=BE;break;case 1012:r=BM;break;case 1014:r=Bk;break;case 1013:r=Bz;break;case 1009:r=Bv;break;case 1016:r=BC;break;case 1015:r=BV;break;default:eL("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case 1026:switch(n){case 1012:r="depth16unorm";break;case 1014:r=BQ;break;case 1015:r=BY;break;default:eL("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case 1027:switch(n){case 1020:r=B$;break;case 1015:t&&!1===t.features.has(FG.Depth32FloatStencil8)&&eL('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),r=BK;break;default:eL("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case 1029:switch(n){case 1013:r=BT;break;case 1014:r=BS;break;default:eL("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case 1031:switch(n){case 1013:r=Bz;break;case 1014:r=Bk;break;default:eL("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case 1033:switch(n){case 1013:r=BW;break;case 1014:r=Bj;break;default:eL("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:eL("WebGPURenderer: Unsupported texture format.",i)}return r}let F0=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,F1=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,F2={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"};class F3 extends Lj{constructor(e){const{type:t,inputs:r,name:i,inputsCode:n,blockCode:a,outputType:s}=(e=>{let t=(e=e.trim()).match(F0);if(null!==t&&4===t.length){let r=t[2],i=[],n=null;for(;null!==(n=F1.exec(r));)i.push({name:n[1],type:n[2]});let a=[];for(let e=0;e<i.length;e++){let{name:t,type:r}=i[e],n=r;n.startsWith("ptr")?n="pointer":(n.startsWith("texture")&&(n=r.split("<")[0]),n=F2[n]),a.push(new LP(n,t))}let s=e.substring(t[0].length),o=t[3]||"void",l=void 0!==t[1]?t[1]:"";return{type:F2[o]||o,inputs:a,name:l,inputsCode:r,blockCode:s,outputType:o}}throw Error("FunctionNode: Function is not a WGSL code.")})(e);super(t,r,i),this.inputsCode=n,this.blockCode=a,this.outputType=s}getCode(e=this.name){let t="void"!==this.outputType?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class F4 extends LH{parseFunction(e){return new F3(e)}}let F5="undefined"!=typeof self?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},F8={[yL.READ_ONLY]:"read",[yL.WRITE_ONLY]:"write",[yL.READ_WRITE]:"read_write"},F6={1e3:"repeat",1001:"clamp",1002:"mirror"},F7={vertex:F5?F5.VERTEX:1,fragment:F5?F5.FRAGMENT:2,compute:F5?F5.COMPUTE:4},F9={instance:!0,swizzleAssign:!1,storageBuffer:!0},Oe={"^^":"tsl_xor"},Ot={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},Or={},Oi={tsl_xor:new Nq("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new Nq("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new Nq("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new Nq("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new Nq("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new Nq("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new Nq("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new Nq("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new Nq("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new Nq("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new Nq("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new Nq("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new Nq(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},On={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"},Oa="";!0!==("undefined"!=typeof navigator&&/Firefox|Deno/g.test(navigator.userAgent))&&(Oa+="diagnostic( off, derivative_uniformity );\n");class Os extends LR{constructor(e,t){super(e,t,new F4),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,t,r,i,n,a=this.shaderStage){return"fragment"!==a?this.generateTextureSampleLevel(e,t,r,"0",i):i?n?`textureSample( ${t}, ${t}_sampler, ${r}, ${i}, ${n} )`:`textureSample( ${t}, ${t}_sampler, ${r}, ${i} )`:n?`textureSample( ${t}, ${t}_sampler, ${r}, ${n} )`:`textureSample( ${t}, ${t}_sampler, ${r} )`}generateTextureSampleLevel(e,t,r,i,n,a){return!1===this.isUnfilterable(e)?a?`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r,a,i):this.generateTextureLod(e,t,r,n,a,i)}generateWrapFunction(e){let t=`tsl_coord_${F6[e.wrapS]}S_${F6[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`,r=Or[t];if(void 0===r){let i=[],n=e.isData3DTexture?"vec3f":"vec2f",a=`fn ${t}( coord : ${n} ) -> ${n} {

	return ${n}(
`,s=(e,t)=>{1e3===e?(i.push(Oi.repeatWrapping_float),a+=`		tsl_repeatWrapping_float( coord.${t} )`):1001===e?(i.push(Oi.clampWrapping_float),a+=`		tsl_clampWrapping_float( coord.${t} )`):1002===e?(i.push(Oi.mirrorWrapping_float),a+=`		tsl_mirrorWrapping_float( coord.${t} )`):(a+=`		coord.${t}`,eI(`WebGPURenderer: Unsupported texture wrap type "${e}" for vertex shader.`))};s(e.wrapS,"x"),a+=",\n",s(e.wrapT,"y"),e.isData3DTexture&&(a+=",\n",s(e.wrapR,"z")),a+="\n	);\n\n}\n",Or[t]=r=new Nq(a,i)}return r.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,r){let i=this.getDataFromNode(e,this.shaderStage,this.globalCache);void 0===i.dimensionsSnippet&&(i.dimensionsSnippet={});let n=i.dimensionsSnippet[r];if(void 0===i.dimensionsSnippet[r]){let a,s,{primarySamples:o}=this.renderer.backend.utils.getTextureSampleData(e);s=e.isData3DTexture?"vec3<u32>":"vec2<u32>",a=o>1||e.isStorageTexture?t:`${t}${r?`, u32( ${r} )`:""}`,n=new bo(new bH(`textureDimensions( ${a} )`,s)),i.dimensionsSnippet[r]=n,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(i.arrayLayerCount=new bo(new bH(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(i.cubeFaceCount=new bo(new bH("6u","u32")))}return n.build(this)}generateFilteredTexture(e,t,r,i,n="0u"){this._include("biquadraticTexture");let a=this.generateWrapFunction(e),s=this.generateTextureDimension(e,t,n);return i&&(r=`${r} + vec2<f32>(${i}) / ${s}`),`tsl_biquadraticTexture( ${t}, ${a}( ${r} ), ${s}, u32( ${n} ) )`}generateTextureLod(e,t,r,i,n,a="0u"){let s=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,a),l=e.isData3DTexture?"vec3":"vec2";n&&(r=`${r} + ${l}<f32>(${n}) / ${l}<f32>( ${o} )`);let u=`${l}<u32>( ${s}( ${r} ) * ${l}<f32>( ${o} ) )`;return this.generateTextureLoad(e,t,u,a,i,null)}generateTextureLoad(e,t,r,i,n,a){let s;return null===i&&(i="0u"),a&&(r=`${r} + ${a}`),n?s=`textureLoad( ${t}, ${r}, ${n}, u32( ${i} ) )`:(s=`textureLoad( ${t}, ${r}, u32( ${i} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(s+=".x")),s}generateTextureStore(e,t,r,i,n){return i?`textureStore( ${t}, ${r}, ${i}, ${n} )`:`textureStore( ${t}, ${r}, ${n} )`}isSampleCompare(e){return!0===e.isDepthTexture&&null!==e.compareFunction}isUnfilterable(e){return"float"!==this.getComponentTypeFromTexture(e)||!this.isAvailable("float32Filterable")&&!0===e.isDataTexture&&1015===e.type||!1===this.isSampleCompare(e)&&1003===e.minFilter&&1003===e.magFilter||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,r,i,n,a=this.shaderStage){return this.isUnfilterable(e)?this.generateTextureLod(e,t,r,i,n,"0",a):this._generateTextureSample(e,t,r,i,n,a)}generateTextureGrad(e,t,r,i,n,a,s=this.shaderStage){if("fragment"===s)return a?`textureSampleGrad( ${t}, ${t}_sampler, ${r},  ${i[0]}, ${i[1]}, ${a} )`:`textureSampleGrad( ${t}, ${t}_sampler, ${r},  ${i[0]}, ${i[1]} )`;eL(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${s} shader.`)}generateTextureCompare(e,t,r,i,n,a,s=this.shaderStage){if("fragment"===s)return!0===e.isDepthTexture&&!0===e.isArrayTexture?a?`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${n}, ${i}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${n}, ${i} )`:a?`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${r}, ${i} )`;eL(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${s} shader.`)}generateTextureLevel(e,t,r,i,n,a){return!1===this.isUnfilterable(e)?a?`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleLevel( ${t}, ${t}_sampler, ${r}, ${i} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,r,a,i):this.generateTextureLod(e,t,r,n,a,i)}generateTextureBias(e,t,r,i,n,a,s=this.shaderStage){if("fragment"===s)return a?`textureSampleBias( ${t}, ${t}_sampler, ${r}, ${i}, ${a} )`:`textureSampleBias( ${t}, ${t}_sampler, ${r}, ${i} )`;eL(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${s} shader.`)}getPropertyName(e,t=this.shaderStage){if(!0===e.isNodeVarying&&!0===e.needsInterpolation){if("vertex"===t)return`varyings.${e.name}`}else if(!0===e.isNodeUniform){let t=e.name,r=e.type;return"texture"===r||"cubeTexture"===r||"storageTexture"===r||"texture3D"===r?t:"buffer"!==r&&"storageBuffer"!==r&&"indirectStorageBuffer"!==r?e.groupNode.name+"."+t:this.isCustomStruct(e)?t:t+".value"}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){let t=Oe[e];return void 0!==t?(this._include(t),t):null}getNodeAccess(e,t){return"compute"!==t?!0===e.isAtomic?(eI("WebGPURenderer: Atomic operations are only supported in compute shaders."),yL.READ_WRITE):yL.READ_ONLY:e.access}getStorageAccess(e,t){return F8[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,r,i=null){let n=super.getUniformFromNode(e,t,r,i),a=this.getDataFromNode(e,r,this.globalCache);if(void 0===a.uniformGPU){let s,o=e.groupNode,l=o.name,u=this.getBindGroupArray(l,r);if("texture"===t||"cubeTexture"===t||"storageTexture"===t||"texture3D"===t){let i=null,a=this.getNodeAccess(e,r);if("texture"===t||"storageTexture"===t?i=!0===e.value.is3DTexture?new DI(n.name,n.node,o,a):new DN(n.name,n.node,o,a):"cubeTexture"===t?i=new DP(n.name,n.node,o,a):"texture3D"===t&&(i=new DI(n.name,n.node,o,a)),i.store=!0===e.isStorageTextureNode,i.mipLevel=i.store?e.mipLevel:0,i.setVisibility(F7[r]),!1===this.isUnfilterable(e.value)&&!1===i.store){let e=new Fj(`${n.name}_sampler`,n.node,o);e.setVisibility(F7[r]),u.push(e,i),s=[e,i]}else u.push(i),s=[i]}else if("buffer"===t||"storageBuffer"===t||"indirectStorageBuffer"===t){let a=new("buffer"===t?DS:FQ)(e,o);a.setVisibility(F7[r]),u.push(a),s=a,n.name=i||"NodeBuffer_"+n.id}else{let e=this.uniformGroups[r]||(this.uniformGroups[r]={}),i=e[l];void 0===i&&((i=new DM(l,o)).setVisibility(F7[r]),e[l]=i,u.push(i)),s=this.getNodeUniform(n,t),i.addUniform(s)}a.uniformGPU=s}return n}getBuiltin(e,t,r,i=this.shaderStage){let n=this.builtins[i]||(this.builtins[i]=new Map);return!1===n.has(e)&&n.set(e,{name:e,property:t,type:r}),t}hasBuiltin(e,t=this.shaderStage){return void 0!==this.builtins[t]&&this.builtins[t].has(e)}getVertexIndex(){return"vertex"===this.shaderStage?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){let t=e.layout,r=this.flowShaderNode(e),i=[];for(let e of t.inputs)i.push(e.name+" : "+this.getType(e.type));let n=`fn ${t.name}( ${i.join(", ")} ) -> ${this.getType(t.type)} {
${r.vars}
${r.code}
`;return r.result&&(n+=`	return ${r.result};
`),n+="\n}\n"}getInstanceIndex(){return"vertex"===this.shaderStage?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){let t=[],r=this.directives[e];if(void 0!==r)for(let e of r)t.push(`enable ${e};`);return t.join("\n")}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){let t=[],r=this.builtins[e];if(void 0!==r)for(let{name:e,property:i,type:n}of r.values())t.push(`@builtin( ${e} ) ${i} : ${n}`);return t.join(",\n	")}getScopedArray(e,t,r,i){return!1===this.scopedArrays.has(e)&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:r,bufferCount:i}),e}getScopedArrays(e){if("compute"!==e)return;let t=[];for(let{name:e,scope:r,bufferType:i,bufferCount:n}of this.scopedArrays.values()){let a=this.getType(i);t.push(`var<${r}> ${e}: array< ${a}, ${n} >;`)}return t.join("\n")}getAttributes(e){let t=[];if("compute"===e&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),"vertex"===e||"compute"===e){let e=this.getBuiltins("attribute");e&&t.push(e);let r=this.getAttributesArray();for(let e=0,i=r.length;e<i;e++){let i=r[e],n=i.name,a=this.getType(i.type);t.push(`@location( ${e} ) ${n} : ${a}`)}}return t.join(",\n	")}getStructMembers(e){let t=[];for(let r of e.members){let i=e.output?"@location( "+r.index+" ) ":"",n=this.getType(r.type);r.atomic&&(n="atomic< "+n+" >"),t.push(`	${i+r.name} : ${n}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(",\n")}getStructs(e){let t="",r=this.structs[e];if(r.length>0){let e=[];for(let t of r){let r=`struct ${t.name} {
`;r+=this.getStructMembers(t),r+="\n};",e.push(r)}t="\n"+e.join("\n\n")+"\n"}return t}getVar(e,t,r=null){let i=`var ${t} : `;return null!==r?i+=this.generateArrayDeclaration(e,r):i+=this.getType(e),i}getVars(e){let t=[],r=this.vars[e];if(void 0!==r)for(let e of r)t.push(`	${this.getVar(e.type,e.name,e.count)};`);return`
${t.join("\n")}
`}getVaryings(e){let t=[];if("vertex"===e&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),"vertex"===e||"fragment"===e){let r=this.varyings,i=this.vars[e];for(let n=0;n<r.length;n++){let a=r[n];if(a.needsInterpolation){let e=`@location( ${n} )`;if(a.interpolationType){let t=null!==a.interpolationSampling?`, ${a.interpolationSampling} )`:" )";e+=` @interpolate( ${a.interpolationType}${t}`}else/^(int|uint|ivec|uvec)/.test(a.type)&&(e+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${e} ${a.name} : ${this.getType(a.type)}`)}else"vertex"===e&&!1===i.includes(a)&&i.push(a)}}let r=this.getBuiltins(e);r&&t.push(r);let i=t.join(",\n	");return"vertex"===e?this._getWGSLStruct("VaryingsStruct","	"+i):i}isCustomStruct(e){let t=e.value,r=e.node,i=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&null!==r.structTypeNode,n=r.value&&r.value.array&&"number"==typeof r.value.itemSize&&r.value.array.length>r.value.itemSize;return i&&!n}getUniforms(e){let t=this.uniforms[e],r=[],i=[],n=[],a={};for(let n of t){let t=n.groupNode.name,s=this.bindingsIndexes[t];if("texture"===n.type||"cubeTexture"===n.type||"storageTexture"===n.type||"texture3D"===n.type){let t,i=n.node.value;!1===this.isUnfilterable(i)&&!0!==n.node.isStorageTextureNode&&(this.isSampleCompare(i)?r.push(`@binding( ${s.binding++} ) @group( ${s.group} ) var ${n.name}_sampler : sampler_comparison;`):r.push(`@binding( ${s.binding++} ) @group( ${s.group} ) var ${n.name}_sampler : sampler;`));let a="",{primarySamples:o}=this.renderer.backend.utils.getTextureSampleData(i);if(o>1&&(a="_multisampled"),!0===i.isCubeTexture)t="texture_cube<f32>";else if(!0===i.isDepthTexture)t=this.renderer.backend.compatibilityMode&&null===i.compareFunction?`texture${a}_2d<f32>`:`texture_depth${a}_2d${!0===i.isArrayTexture?"_array":""}`;else if(!0===n.node.isStorageTextureNode){let r=FJ(i),a=this.getStorageAccess(n.node,e),s=n.node.value.is3DTexture,o=n.node.value.isArrayTexture,l=s?"3d":`2d${o?"_array":""}`;t=`texture_storage_${l}<${r}, ${a}>`}else if(!0===i.isArrayTexture||!0===i.isDataArrayTexture||!0===i.isCompressedArrayTexture)t="texture_2d_array<f32>";else if(!0===i.is3DTexture||!0===i.isData3DTexture)t="texture_3d<f32>";else{let e=this.getComponentTypeFromTexture(i).charAt(0);t=`texture${a}_2d<${e}32>`}r.push(`@binding( ${s.binding++} ) @group( ${s.group} ) var ${n.name} : ${t};`)}else if("buffer"===n.type||"storageBuffer"===n.type||"indirectStorageBuffer"===n.type){let t=n.node,r=this.getType(t.getNodeType(this)),a=t.bufferCount,o=a>0&&"buffer"===n.type?", "+a:"",l=t.isStorageBufferNode?`storage, ${this.getStorageAccess(t,e)}`:"uniform";if(this.isCustomStruct(n))i.push(`@binding( ${s.binding++} ) @group( ${s.group} ) var<${l}> ${n.name} : ${r};`);else{let e=t.isAtomic?`atomic<${r}>`:`${r}`,a=`	value : array< ${e}${o} >`;i.push(this._getWGSLStructBinding(n.name,a,l,s.binding++,s.group))}}else{let e=this.getType(this.getVectorType(n.type)),t=n.groupNode.name;(a[t]||(a[t]={index:s.binding++,id:s.group,snippets:[]})).snippets.push(`	${n.name} : ${e}`)}}for(let e in a){let t=a[e];n.push(this._getWGSLStructBinding(e,t.snippets.join(",\n"),"uniform",t.index,t.id))}let s=r.join("\n");return s+=i.join("\n"),s+=n.join("\n")}buildCode(){let e=null!==this.material?{fragment:{},vertex:{}}:{compute:{}};for(let t in this.sortBindingGroups(),e){this.shaderStage=t;let r=e[t];r.uniforms=this.getUniforms(t),r.attributes=this.getAttributes(t),r.varyings=this.getVaryings(t),r.structs=this.getStructs(t),r.vars=this.getVars(t),r.codes=this.getCodes(t),r.directives=this.getDirectives(t),r.scopedArrays=this.getScopedArrays(t);let i="// code\n\n";i+=this.flowCode[t];let n=this.flowNodes[t],a=n[n.length-1],s=a.outputNode,o=void 0!==s&&!0===s.isOutputStructNode;for(let e of n){let n=this.getFlowData(e),l=e.name;if(l&&(i.length>0&&(i+="\n"),i+=`	// flow -> ${l}
`),i+=`${n.code}
	`,e===a&&"compute"!==t){if(i+="// result\n\n	","vertex"===t)i+=`varyings.Vertex = ${n.result};`;else if("fragment"===t)if(o)r.returnType=s.getNodeType(this),r.structs+="var<private> output : "+r.returnType+";",i+=`return ${n.result};`;else{let e="	@location(0) color: vec4<f32>",t=this.getBuiltins("output");t&&(e+=",\n	"+t),r.returnType="OutputStruct",r.structs+=this._getWGSLStruct("OutputStruct",e),r.structs+="\nvar<private> output : OutputStruct;",i+=`output.color = ${n.result};

	return output;`}}}r.flow=i}if(this.shaderStage=null,null!==this.material)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{let t=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,t)}}getMethod(e,t=null){let r;return null!==t&&(r=this._getWGSLMethod(e+"_"+t)),void 0===r&&(r=this._getWGSLMethod(e)),r||e}getBitcastMethod(e){let t=this.getType(e);return`bitcast<${t}>`}getTernary(e,t,r){return`select( ${r}, ${t}, ${e} )`}getType(e){return Ot[e]||e}isAvailable(e){let t=F9[e];return void 0===t&&("float32Filterable"===e?t=this.renderer.hasFeature("float32-filterable"):"clipDistance"===e&&(t=this.renderer.hasFeature("clip-distances")),F9[e]=t),t}_getWGSLMethod(e){return void 0!==Oi[e]&&this._include(e),On[e]}_include(e){let t=Oi[e];return t.build(this),this.addInclude(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${Oa}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){let[r,i,n]=t;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${r}, ${i}, ${n} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${r} * numWorkgroups.x )
		+ globalId.z * ( ${r} * numWorkgroups.x ) * ( ${i} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,r,i=0,n=0){let a=e+"Struct",s=this._getWGSLStruct(a,t);return`${s}
@binding( ${i} ) @group( ${n} )
var<${r}> ${e} : ${a};`}}class Oo{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return null!==e.depthTexture?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=B$:e.depth&&(t=BQ),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){let e=this.backend.renderer,r=e.getRenderTarget();t=r?r.samples:e.currentSamples}else e.renderTarget&&(t=e.renderTarget.samples);let r=(t=t||1)>1&&null!==e.renderTarget&&!0!==e.isDepthTexture&&!0!==e.isFramebufferTexture,i=r?1:t;return{samples:t,primarySamples:i,isMSAA:r}}getCurrentColorFormat(e){return null!==e.textures?this.getTextureFormatGPU(e.textures[0]):this.getPreferredCanvasFormat()}getCurrentColorFormats(e){return null!==e.textures?e.textures.map(e=>this.getTextureFormatGPU(e)):[this.getPreferredCanvasFormat()]}getCurrentColorSpace(e){return null!==e.textures?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){return e.isPoints?"point-list":e.isLineSegments||e.isMesh&&!0===t.wireframe?"line-list":e.isLine?"line-strip":e.isMesh?"triangle-list":void 0}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return null!==e.textures?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.currentSamples)}getPreferredCanvasFormat(){let e=this.backend.parameters.outputType;if(void 0===e)return navigator.gpu.getPreferredCanvasFormat();if(1009===e)return BD;if(1016===e)return BH;throw Error("Unsupported outputType")}}let Ol=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);"undefined"!=typeof Float16Array&&Ol.set(Float16Array,["float16"]);let Ou=new Map([[rU,["float16"]]]),Oc=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class Oh{constructor(e){this.backend=e}createAttribute(e,t){let r=this._getBufferAttribute(e),i=this.backend,n=i.get(r),a=n.buffer;if(void 0===a){let s=i.device,o=r.array;if(!1===e.normalized){if(o.constructor===Int16Array||o.constructor===Int8Array)o=new Int32Array(o);else if((o.constructor===Uint16Array||o.constructor===Uint8Array)&&(o=new Uint32Array(o),t&GPUBufferUsage.INDEX))for(let e=0;e<o.length;e++)65535===o[e]&&(o[e]=0xffffffff)}if(r.array=o,(r.isStorageBufferAttribute||r.isStorageInstancedBufferAttribute)&&3===r.itemSize){o=new o.constructor(4*r.count);for(let e=0;e<r.count;e++)o.set(r.array.subarray(3*e,3*e+3),4*e);r.itemSize=4,r.array=o,n._force3to4BytesAlignment=!0}let l=o.byteLength;a=s.createBuffer({label:r.name,size:l+(4-l%4)%4,usage:t,mappedAtCreation:!0}),new o.constructor(a.getMappedRange()).set(o),a.unmap(),n.buffer=a}}updateAttribute(e){let t=this._getBufferAttribute(e),r=this.backend,i=r.device,n=r.get(t),a=r.get(t).buffer,s=t.array;if(!0===n._force3to4BytesAlignment){s=new s.constructor(4*t.count);for(let e=0;e<t.count;e++)s.set(t.array.subarray(3*e,3*e+3),4*e);t.array=s}let o=this._isTypedArray(s),l=t.updateRanges;if(0===l.length)i.queue.writeBuffer(a,0,s,0);else{let e=o?1:s.BYTES_PER_ELEMENT;for(let t=0,r=l.length;t<r;t++){let r,u,c=l[t];if(!0===n._force3to4BytesAlignment){let t=Math.floor(c.start/3),i=Math.ceil(c.count/3);r=4*t*e,u=4*i*e}else r=c.start*e,u=c.count*e;let h=r*(o?s.BYTES_PER_ELEMENT:1);i.queue.writeBuffer(a,h,s,r,u)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){let t=e.getAttributes(),r=new Map;for(let e=0;e<t.length;e++){let i=t[e],n=i.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(i),s=r.get(a);if(void 0===s){let e,t;!0===i.isInterleavedBufferAttribute?(e=i.data.stride*n,t=i.data.isInstancedInterleavedBuffer?Fq:FV):(e=i.itemSize*n,t=i.isInstancedBufferAttribute?Fq:FV),!1===i.normalized&&(i.array.constructor===Int16Array||i.array.constructor===Uint16Array)&&(e=4),s={arrayStride:e,attributes:[],stepMode:t},r.set(a,s)}let o=this._getVertexFormat(i),l=!0===i.isInterleavedBufferAttribute?i.offset*n:0;s.attributes.push({shaderLocation:e,offset:l,format:o})}return Array.from(r.values())}destroyAttribute(e){let t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){let t=this.backend,r=t.device,i=t.get(this._getBufferAttribute(e)).buffer,n=i.size,a=r.createBuffer({label:`${e.name}_readback`,size:n,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),s=r.createCommandEncoder({label:`readback_encoder_${e.name}`});s.copyBufferToBuffer(i,0,a,0,n);let o=s.finish();r.queue.submit([o]),await a.mapAsync(GPUMapMode.READ);let l=a.getMappedRange(),u=new e.array.constructor(l.slice(0));return a.unmap(),u.buffer}_getVertexFormat(e){let t,{itemSize:r,normalized:i}=e,n=e.array.constructor,a=e.constructor;if(1===r)t=Oc.get(n);else{let e=(Ou.get(a)||Ol.get(n))[+!!i];if(e){let i=4*Math.floor((n.BYTES_PER_ELEMENT*r+3)/4)/n.BYTES_PER_ELEMENT;if(i%1)throw Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");t=`${e}x${i}`}}return t||eL("WebGPUAttributeUtils: Vertex format not supported yet."),t}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class Od{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){let t=this.backend,r=t.device,i=[],n=0;for(let r of e.bindings){let e={binding:n++,visibility:r.visibility};if(r.isUniformBuffer||r.isStorageBuffer){let t={};r.isStorageBuffer&&(4&r.visibility&&(r.access===yL.READ_WRITE||r.access===yL.WRITE_ONLY)?t.type="storage":t.type="read-only-storage"),e.buffer=t}else if(r.isSampledTexture&&r.store){let t={};t.format=this.backend.get(r.texture).texture.format;let i=r.access;i===yL.READ_WRITE?t.access="read-write":i===yL.WRITE_ONLY?t.access="write-only":t.access="read-only",r.texture.isArrayTexture?t.viewDimension=Fk:r.texture.is3DTexture&&(t.viewDimension="3d"),e.storageTexture=t}else if(r.isSampledTexture){let i={},{primarySamples:n}=t.utils.getTextureSampleData(r.texture);if(n>1&&(i.multisampled=!0,r.texture.isDepthTexture||(i.sampleType=FU)),r.texture.isDepthTexture)t.compatibilityMode&&null===r.texture.compareFunction?i.sampleType=FU:i.sampleType="depth";else if(r.texture.isDataTexture||r.texture.isDataArrayTexture||r.texture.isData3DTexture){let e=r.texture.type;1013===e?i.sampleType="sint":1014===e?i.sampleType="uint":1015===e&&(this.backend.hasFeature("float32-filterable")?i.sampleType="float":i.sampleType=FU)}r.isSampledCubeTexture?i.viewDimension=Fz:r.texture.isArrayTexture||r.texture.isDataArrayTexture||r.texture.isCompressedArrayTexture?i.viewDimension=Fk:r.isSampledTexture3D&&(i.viewDimension="3d"),e.texture=i}else if(r.isSampler){let i={};r.texture.isDepthTexture&&(null!==r.texture.compareFunction?i.type="comparison":t.compatibilityMode&&(i.type="non-filtering")),e.sampler=i}else eL(`WebGPUBindingUtils: Unsupported binding "${r}".`);i.push(e)}return r.createBindGroupLayout({entries:i})}createBindings(e,t,r,i=0){let n,{backend:a,bindGroupLayoutCache:s}=this,o=a.get(e),l=s.get(e.bindingsReference);void 0===l&&(l=this.createBindingsLayout(e),s.set(e.bindingsReference,l)),r>0&&(void 0===o.groups&&(o.groups=[],o.versions=[]),o.versions[r]===i&&(n=o.groups[r])),void 0===n&&(n=this.createBindGroup(e,l),r>0&&(o.groups[r]=n,o.versions[r]=i)),o.group=n,o.layout=l}updateBinding(e){let t=this.backend,r=t.device,i=e.buffer,n=t.get(e).buffer;r.queue.writeBuffer(n,0,i,0)}createBindGroupIndex(e,t){let r=this.backend.device,i=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,n=e[0],a=r.createBuffer({label:"bindingCameraIndex_"+n,size:16,usage:i});r.queue.writeBuffer(a,0,e,0);let s=[{binding:0,resource:{buffer:a}}];return r.createBindGroup({label:"bindGroupCameraIndex_"+n,layout:t,entries:s})}createBindGroup(e,t){let r=this.backend,i=r.device,n=0,a=[];for(let t of e.bindings){if(t.isUniformBuffer){let e=r.get(t);if(void 0===e.buffer){let r=t.byteLength,n=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST;e.buffer=i.createBuffer({label:"bindingBuffer_"+t.name,size:r,usage:n})}a.push({binding:n,resource:{buffer:e.buffer}})}else if(t.isStorageBuffer){let e=r.get(t);if(void 0===e.buffer){let i=t.attribute;e.buffer=r.get(i).buffer}a.push({binding:n,resource:{buffer:e.buffer}})}else if(t.isSampledTexture){let e,s=r.get(t.texture);if(void 0!==s.externalTexture)e=i.importExternalTexture({source:s.externalTexture});else{let r=t.store?1:s.texture.mipLevelCount,i=t.store?t.mipLevel:0,n=`view-${s.texture.width}-${s.texture.height}`;if(s.texture.depthOrArrayLayers>1&&(n+=`-${s.texture.depthOrArrayLayers}`),n+=`-${r}-${i}`,void 0===(e=s[n])){let a;a=t.isSampledCubeTexture?Fz:t.isSampledTexture3D?"3d":t.texture.isArrayTexture||t.texture.isDataArrayTexture||t.texture.isCompressedArrayTexture?Fk:"2d",e=s[n]=s.texture.createView({aspect:"all",dimension:a,mipLevelCount:r,baseMipLevel:i})}}a.push({binding:n,resource:e})}else if(t.isSampler){let e=r.get(t.texture);a.push({binding:n,resource:e.sampler})}n++}return i.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:a})}}class OA{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){let r,{object:i,material:n,geometry:a,pipeline:s}=e,{vertexProgram:o,fragmentProgram:l}=s,u=this.backend,c=u.device,h=u.utils,d=u.get(s),A=[];for(let t of e.getBindings()){let e=u.get(t);A.push(e.layout)}let p=u.attributeUtils.createShaderVertexBuffers(e);0!==n.blending&&(1!==n.blending||!1!==n.transparent)&&(r=this._getBlending(n));let f={};!0===n.stencilWrite&&(f={compare:this._getStencilCompare(n),failOp:this._getStencilOperation(n.stencilFail),depthFailOp:this._getStencilOperation(n.stencilZFail),passOp:this._getStencilOperation(n.stencilZPass)});let m=this._getColorWriteMask(n),g=[];if(null!==e.context.textures){let t=e.context.textures;for(let e=0;e<t.length;e++){let i=h.getTextureFormatGPU(t[e]);g.push({format:i,blend:r,writeMask:m})}}else{let t=h.getCurrentColorFormat(e.context);g.push({format:t,blend:r,writeMask:m})}let y=u.get(o).module,v=u.get(l).module,x=this._getPrimitiveState(i,a,n),_=this._getDepthCompare(n),b=h.getCurrentDepthStencilFormat(e.context),S=this._getSampleCount(e.context),T={label:`renderPipeline_${n.name||n.type}_${n.id}`,vertex:Object.assign({},y,{buffers:p}),fragment:Object.assign({},v,{targets:g}),primitive:x,multisample:{count:S,alphaToCoverageEnabled:n.alphaToCoverage&&S>1},layout:c.createPipelineLayout({bindGroupLayouts:A})},w={},M=e.context.depth,E=e.context.stencil;if((!0===M||!0===E)&&(!0===M&&(w.format=b,w.depthWriteEnabled=n.depthWrite,w.depthCompare=_),!0===E&&(w.stencilFront=f,w.stencilBack={},w.stencilReadMask=n.stencilFuncMask,w.stencilWriteMask=n.stencilWriteMask),!0===n.polygonOffset&&(w.depthBias=n.polygonOffsetUnits,w.depthBiasSlopeScale=n.polygonOffsetFactor,w.depthBiasClamp=0),T.depthStencil=w),c.pushErrorScope("validation"),null===t)d.pipeline=c.createRenderPipeline(T),c.popErrorScope().then(e=>{null!==e&&(d.error=!0,eL(e.message))});else{let e=new Promise(async e=>{try{d.pipeline=await c.createRenderPipelineAsync(T)}catch(e){}let t=await c.popErrorScope();null!==t&&(d.error=!0,eL(t.message)),e()});t.push(e)}}createBundleEncoder(e,t="renderBundleEncoder"){let{utils:r,device:i}=this.backend,n=r.getCurrentDepthStencilFormat(e),a=r.getCurrentColorFormats(e),s=this._getSampleCount(e);return i.createRenderBundleEncoder({label:t,colorFormats:a,depthStencilFormat:n,sampleCount:s})}createComputePipeline(e,t){let r=this.backend,i=r.device,n=r.get(e.computeProgram).module,a=r.get(e),s=[];for(let e of t){let t=r.get(e);s.push(t.layout)}a.pipeline=i.createComputePipeline({compute:n,layout:i.createPipelineLayout({bindGroupLayouts:s})})}_getBlending(e){let t,r,i=e.blending,n=e.blendSrc,a=e.blendDst,s=e.blendEquation;if(5===i){let i=null!==e.blendSrcAlpha?e.blendSrcAlpha:n,o=null!==e.blendDstAlpha?e.blendDstAlpha:a,l=null!==e.blendEquationAlpha?e.blendEquationAlpha:s;t={srcFactor:this._getBlendFactor(n),dstFactor:this._getBlendFactor(a),operation:this._getBlendOperation(s)},r={srcFactor:this._getBlendFactor(i),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(l)}}else{let n=e.premultipliedAlpha,a=(e,i,n,a)=>{t={srcFactor:e,dstFactor:i,operation:"add"},r={srcFactor:n,dstFactor:a,operation:"add"}};if(n)switch(i){case 1:a("one",FO,"one",FO);break;case 2:a("one","one","one","one");break;case 3:a(FD,FB,FD,"one");break;case 4:a("dst",FO,FD,"one")}else switch(i){case 1:a(FF,FO,"one",FO);break;case 2:a(FF,"one","one","one");break;case 3:eL("WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case 4:eL("WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true")}}if(void 0!==t&&void 0!==r)return{color:t,alpha:r};eL("WebGPURenderer: Invalid blending: ",i)}_getBlendFactor(e){let t;switch(e){case 200:t=FD;break;case 201:t="one";break;case 202:t="src";break;case 203:t=FB;break;case 204:t=FF;break;case 205:t=FO;break;case 208:t="dst";break;case 209:t="one-minus-dst";break;case 206:t="dst-alpha";break;case 207:t="one-minus-dst-alpha";break;case 210:t="src-alpha-saturated";break;case 211:t="constant";break;case 212:t="one-minus-constant";break;default:eL("WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t,r=e.stencilFunc;switch(r){case 512:t=D9;break;case 519:t=Bs;break;case 513:t=Be;break;case 515:t=Br;break;case 514:t=Bt;break;case 518:t=Ba;break;case 516:t=Bi;break;case 517:t=Bn;break;default:eL("WebGPURenderer: Invalid stencil function.",r)}return t}_getStencilOperation(e){let t;switch(e){case 7680:t="keep";break;case 0:t="zero";break;case 7681:t="replace";break;case 5386:t="invert";break;case 7682:t="increment-clamp";break;case 7683:t="decrement-clamp";break;case 34055:t="increment-wrap";break;case 34056:t="decrement-wrap";break;default:eL("WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case 100:t="add";break;case 101:t="subtract";break;case 102:t="reverse-subtract";break;case 103:t="min";break;case 104:t="max";break;default:eL("WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,r){let i={};i.topology=this.backend.utils.getPrimitiveTopology(e,r),null!==t.index&&!0===e.isLine&&!0!==e.isLineSegments&&(i.stripIndexFormat=t.index.array instanceof Uint16Array?Bc:Bh);let n=1===r.side;return e.isMesh&&0>e.matrixWorld.determinant()&&(n=!n),i.frontFace=!0===n?"cw":"ccw",i.cullMode=2===r.side?"none":"back",i}_getColorWriteMask(e){return 15*(!0===e.colorWrite)}_getDepthCompare(e){let t;if(!1===e.depthTest)t=Bs;else{let r=e.depthFunc;switch(r){case 0:t=D9;break;case 1:t=Bs;break;case 2:t=Be;break;case 3:t=Br;break;case 4:t=Bt;break;case 5:t=Ba;break;case 6:t=Bi;break;case 7:t=Bn;break;default:eL("WebGPUPipelineUtils: Invalid depth function.",r)}}return t}}class Op extends D5{constructor(e,t,r=2048){super(r),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const i=8*this.maxQueries;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return eD(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;let t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||0===this.currentQueryIndex||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if("unmapped"!==this.resultBuffer.mapState)return this.lastValue;let e=new Map(this.queryOffsets),t=this.currentQueryIndex,r=8*t;this.currentQueryIndex=0,this.queryOffsets.clear();let i=this.device.createCommandEncoder();i.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),i.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,r);let n=i.finish();if(this.device.queue.submit([n]),"unmapped"!==this.resultBuffer.mapState)return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,r),this.isDisposed)return"mapped"===this.resultBuffer.mapState&&this.resultBuffer.unmap(),this.lastValue;let a=new BigUint64Array(this.resultBuffer.getMappedRange(0,r)),s={},o=[];for(let[t,r]of e){let e=t.match(/^(.*):f(\d+)$/),i=parseInt(e[2]);!1===o.includes(i)&&o.push(i),void 0===s[i]&&(s[i]=0);let n=a[r],l=a[r+1],u=Number(l-n)/1e6;this.timestamps.set(t,u),s[i]+=u}let l=s[o[o.length-1]];return this.resultBuffer.unmap(),this.lastValue=l,this.frames=o,l}catch(e){return e("Error resolving queries:",e),"mapped"===this.resultBuffer.mapState&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){e("Error waiting for pending resolve:",e)}if(this.resultBuffer&&"mapped"===this.resultBuffer.mapState)try{this.resultBuffer.unmap()}catch(e){e("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class Of extends DG{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=void 0===e.alpha||e.alpha,this.parameters.compatibilityMode=void 0!==e.compatibilityMode&&e.compatibilityMode,this.parameters.requiredLimits=void 0===e.requiredLimits?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.defaultRenderPassdescriptor=null,this.utils=new Oo(this),this.attributeUtils=new Oh(this),this.bindingUtils=new Od(this),this.pipelineUtils=new OA(this),this.textureUtils=new FZ(this),this.occludedResolveCache=new Map}async init(e){let t;await super.init(e);let r=this.parameters;if(void 0===r.device){let e={powerPreference:r.powerPreference,featureLevel:r.compatibilityMode?"compatibility":void 0},i="undefined"!=typeof navigator?await navigator.gpu.requestAdapter(e):null;if(null===i)throw Error("WebGPUBackend: Unable to create WebGPU adapter.");let n=Object.values(FG),a=[];for(let e of n)i.features.has(e)&&a.push(e);let s={requiredFeatures:a,requiredLimits:r.requiredLimits};t=await i.requestDevice(s)}else t=r.device;t.lost.then(t=>{let r={api:"WebGPU",message:t.message||"Unknown reason",reason:t.reason||null,originalEvent:t};e.onDeviceLost(r)}),this.device=t,this.trackTimestamp=this.trackTimestamp&&this.hasFeature(FG.TimestampQuery),this.updateSize()}get context(){let e=this.renderer.getCanvasTarget(),t=this.get(e),r=t.context;if(void 0===r){let i=this.parameters;r=!0===e.isDefaultCanvasTarget&&void 0!==i.context?i.context:e.domElement.getContext("webgpu"),"setAttribute"in e.domElement&&e.domElement.setAttribute("data-engine","three.js r181 webgpu");let n=i.alpha?"premultiplied":"opaque",a=1016===i.outputType?"extended":"standard";r.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:n,toneMapping:{mode:a}}),t.context=r}return r}get coordinateSystem(){return 2001}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.renderer,t=e.getCanvasTarget(),r=this.get(t),i=e.currentSamples,n=r.descriptor;if(void 0===n||r.samples!==i){n={colorAttachments:[{view:null}]},(!0===e.depth||!0===e.stencil)&&(n.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(e.depth,e.stencil).createView()});let t=n.colorAttachments[0];i>0?t.view=this.textureUtils.getColorBuffer().createView():t.resolveTarget=void 0,r.descriptor=n,r.samples=i}let a=n.colorAttachments[0];return i>0?a.resolveTarget=this.context.getCurrentTexture().createView():a.view=this.context.getCurrentTexture().createView(),n}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){let r=e.renderTarget,i=this.get(r),n=i.descriptors;(void 0===n||i.width!==r.width||i.height!==r.height||i.samples!==r.samples)&&(i.descriptors=n={});let a=e.getCacheKey(),s=n[a];if(void 0===s){let t,o=e.textures,l=[],u=this._isRenderCameraDepthArray(e);for(let i=0;i<o.length;i++){let n=this.get(o[i]),a={label:`colorAttachment_${i}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:"2d"};if(r.isRenderTarget3D)t=e.activeCubeFace,a.baseArrayLayer=0,a.dimension="3d",a.depthOrArrayLayers=o[i].image.depth;else if(r.isRenderTarget&&o[i].image.depth>1)if(!0===u){let t=e.camera.cameras;for(let e=0;e<t.length;e++){let t={...a,baseArrayLayer:e,arrayLayerCount:1,dimension:"2d"},r=n.texture.createView(t);l.push({view:r,resolveTarget:void 0,depthSlice:void 0})}}else a.dimension=Fk,a.depthOrArrayLayers=o[i].image.depth;if(!0!==u){let e,r,i=n.texture.createView(a);void 0!==n.msaaTexture?(e=n.msaaTexture.createView(),r=i):(e=i,r=void 0),l.push({view:e,resolveTarget:r,depthSlice:t})}}if(s={textureViews:l},e.depth){let t=this.get(e.depthTexture),r={};e.depthTexture.isArrayTexture&&(r.dimension="2d",r.arrayLayerCount=1,r.baseArrayLayer=e.activeCubeFace),s.depthStencilView=t.texture.createView(r)}n[a]=s,i.width=r.width,i.height=r.height,i.samples=r.samples,i.activeMipmapLevel=e.activeMipmapLevel,i.activeCubeFace=e.activeCubeFace}let o={colorAttachments:[]};for(let e=0;e<s.textureViews.length;e++){let r=s.textureViews[e],i={r:0,g:0,b:0,a:1};0===e&&t.clearValue&&(i=t.clearValue),o.colorAttachments.push({view:r.view,depthSlice:r.depthSlice,resolveTarget:r.resolveTarget,loadOp:t.loadOp||Bl,storeOp:t.storeOp||Bo,clearValue:i})}return s.depthStencilView&&(o.depthStencilAttachment={view:s.depthStencilView}),o}beginRender(e){let t,r,i=this.get(e),n=this.device,a=e.occlusionQueryCount;a>0&&(i.currentOcclusionQuerySet&&i.currentOcclusionQuerySet.destroy(),i.currentOcclusionQueryBuffer&&i.currentOcclusionQueryBuffer.destroy(),i.currentOcclusionQuerySet=i.occlusionQuerySet,i.currentOcclusionQueryBuffer=i.occlusionQueryBuffer,i.currentOcclusionQueryObjects=i.occlusionQueryObjects,i.occlusionQuerySet=t=n.createQuerySet({type:"occlusion",count:a,label:`occlusionQuerySet_${e.id}`}),i.occlusionQueryIndex=0,i.occlusionQueryObjects=Array(a),i.lastOcclusionObject=null),r=null===e.textures?this._getDefaultRenderPassDescriptor():this._getRenderPassDescriptor(e,{loadOp:Bl}),this.initTimestampQuery(ev.RENDER,this.getTimestampUID(e),r),r.occlusionQuerySet=t;let s=r.depthStencilAttachment;if(null!==e.textures){let t=r.colorAttachments;for(let r=0;r<t.length;r++){let i=t[r];e.clearColor?(i.clearValue=0===r?e.clearColorValue:{r:0,g:0,b:0,a:1},i.loadOp=Bu):i.loadOp=Bl,i.storeOp=Bo}}else{let t=r.colorAttachments[0];e.clearColor?(t.clearValue=e.clearColorValue,t.loadOp=Bu):t.loadOp=Bl,t.storeOp=Bo}e.depth&&(e.clearDepth?(s.depthClearValue=e.clearDepthValue,s.depthLoadOp=Bu):s.depthLoadOp=Bl,s.depthStoreOp=Bo),e.stencil&&(e.clearStencil?(s.stencilClearValue=e.clearStencilValue,s.stencilLoadOp=Bu):s.stencilLoadOp=Bl,s.stencilStoreOp=Bo);let o=n.createCommandEncoder({label:"renderContext_"+e.id});if(!0===this._isRenderCameraDepthArray(e)){let t=e.camera.cameras;i.layerDescriptors&&i.layerDescriptors.length===t.length?this._updateDepthLayerDescriptors(e,i,t):this._createDepthLayerDescriptors(e,i,r,t),i.bundleEncoders=[],i.bundleSets=[];for(let r=0;r<t.length;r++){let t=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+r),n={attributes:{},bindingGroups:[],pipeline:null,index:null};i.bundleEncoders.push(t),i.bundleSets.push(n)}i.currentPass=null}else i.currentPass=o.beginRenderPass(r),e.viewport&&this.updateViewport(e),e.scissor&&this.updateScissor(e);i.descriptor=r,i.encoder=o,i.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},i.renderBundles=[]}_createDepthLayerDescriptors(e,t,r,i){let n=r.depthStencilAttachment;t.layerDescriptors=[];let a=this.get(e.depthTexture);a.viewCache||(a.viewCache=[]);for(let s=0;s<i.length;s++){let i={...r,colorAttachments:[{...r.colorAttachments[0],view:r.colorAttachments[s].view}]};if(r.depthStencilAttachment){let t=s;a.viewCache[t]||(a.viewCache[t]=a.texture.createView({dimension:"2d",baseArrayLayer:s,arrayLayerCount:1})),i.depthStencilAttachment={view:a.viewCache[t],depthLoadOp:n.depthLoadOp||Bu,depthStoreOp:n.depthStoreOp||Bo,depthClearValue:n.depthClearValue||1},e.stencil&&(i.depthStencilAttachment.stencilLoadOp=n.stencilLoadOp,i.depthStencilAttachment.stencilStoreOp=n.stencilStoreOp,i.depthStencilAttachment.stencilClearValue=n.stencilClearValue)}else i.depthStencilAttachment={...n};t.layerDescriptors.push(i)}}_updateDepthLayerDescriptors(e,t,r){for(let i=0;i<r.length;i++){let r=t.layerDescriptors[i];if(r.depthStencilAttachment){let t=r.depthStencilAttachment;e.depth&&(e.clearDepth?(t.depthClearValue=e.clearDepthValue,t.depthLoadOp=Bu):t.depthLoadOp=Bl),e.stencil&&(e.clearStencil?(t.stencilClearValue=e.clearStencilValue,t.stencilLoadOp=Bu):t.stencilLoadOp=Bl)}}}finishRender(e){let t=this.get(e),r=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),r>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();let i=t.encoder;if(!0===this._isRenderCameraDepthArray(e)){let r=[];for(let e=0;e<t.bundleEncoders.length;e++){let i=t.bundleEncoders[e];r.push(i.finish())}for(let n=0;n<t.layerDescriptors.length;n++)if(n<r.length){let a=t.layerDescriptors[n],s=i.beginRenderPass(a);if(e.viewport){let{x:t,y:r,width:i,height:n,minDepth:a,maxDepth:o}=e.viewportValue;s.setViewport(t,r,i,n,a,o)}if(e.scissor){let{x:t,y:r,width:i,height:n}=e.scissorValue;s.setScissorRect(t,r,i,n)}s.executeBundles([r[n]]),s.end()}}else t.currentPass&&t.currentPass.end();if(r>0){let i=8*r,n=this.occludedResolveCache.get(i);void 0===n&&(n=this.device.createBuffer({size:i,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(i,n));let a=this.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,r,n,0),t.encoder.copyBufferToBuffer(n,0,a,0,i),t.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),null!==e.textures){let t=e.textures;for(let e=0;e<t.length;e++){let r=t[e];!0===r.generateMipmaps&&this.textureUtils.generateMipmaps(r)}}}isOccluded(e,t){let r=this.get(e);return r.occluded&&r.occluded.has(t)}async resolveOccludedAsync(e){let t=this.get(e),{currentOcclusionQueryBuffer:r,currentOcclusionQueryObjects:i}=t;if(r&&i){let e=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await r.mapAsync(GPUMapMode.READ);let n=new BigUint64Array(r.getMappedRange());for(let t=0;t<i.length;t++)n[t]===BigInt(0)&&e.add(i[t]);r.destroy(),t.occluded=e}}updateViewport(e){let{currentPass:t}=this.get(e),{x:r,y:i,width:n,height:a,minDepth:s,maxDepth:o}=e.viewportValue;t.setViewport(r,i,n,a,s,o)}updateScissor(e){let{currentPass:t}=this.get(e),{x:r,y:i,width:n,height:a}=e.scissorValue;t.setScissorRect(r,i,n,a)}getClearColor(){let e=super.getClearColor();return!0===this.renderer.alpha&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,r,i=null){let n,a,s,o,l=this.device,u=this.renderer,c=[];if(e){let e=this.getClearColor();a={r:e.r,g:e.g,b:e.b,a:e.a}}if(null===i){s=u.depth,o=u.stencil;let t=this._getDefaultRenderPassDescriptor();if(e){let e=(c=t.colorAttachments)[0];e.clearValue=a,e.loadOp=Bu,e.storeOp=Bo}(s||o)&&(n=t.depthStencilAttachment)}else{s=i.depth,o=i.stencil;let l={loadOp:e?Bu:Bl,clearValue:e?a:void 0};s&&(l.depthLoadOp=t?Bu:Bl,l.depthClearValue=t?u.getClearDepth():void 0,l.depthStoreOp=Bo),o&&(l.stencilLoadOp=r?Bu:Bl,l.stencilClearValue=r?u.getClearStencil():void 0,l.stencilStoreOp=Bo);let h=this._getRenderPassDescriptor(i,l);c=h.colorAttachments,n=h.depthStencilAttachment}s&&n&&(t?(n.depthLoadOp=Bu,n.depthClearValue=u.getClearDepth()):n.depthLoadOp=Bl,n.depthStoreOp=Bo),o&&n&&(r?(n.stencilLoadOp=Bu,n.stencilClearValue=u.getClearStencil()):n.stencilLoadOp=Bl,n.stencilStoreOp=Bo);let h=l.createCommandEncoder({label:"clear"});h.beginRenderPass({colorAttachments:c,depthStencilAttachment:n}).end(),l.queue.submit([h.finish()])}beginCompute(e){let t=this.get(e),r={label:"computeGroup_"+e.id};this.initTimestampQuery(ev.COMPUTE,this.getTimestampUID(e),r),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(r)}compute(e,t,r,i,n=null){let a=this.get(t),{passEncoderGPU:s}=this.get(e),o=this.get(i).pipeline;this.pipelineUtils.setPipeline(s,o);for(let e=0,t=r.length;e<t;e++){let t=r[e],i=this.get(t);s.setBindGroup(e,i.group)}if(null===n&&(n=t.count),n&&"object"==typeof n&&n.isIndirectStorageBufferAttribute){let e=this.get(n).buffer;s.dispatchWorkgroupsIndirect(e,0);return}if("number"==typeof n){let e=n;if(void 0===a.dispatchSize||a.count!==e){a.dispatchSize=[0,1,1],a.count=e;let r=t.workgroupSize,i=r[0];for(let e=1;e<r.length;e++)i*=r[e];let s=Math.ceil(e/i),o=this.device.limits.maxComputeWorkgroupsPerDimension;n=[s,1,1],s>o&&(n[0]=Math.min(s,o),n[1]=Math.ceil(s/o)),a.dispatchSize=n}n=a.dispatchSize}s.dispatchWorkgroups(n[0],n[1]||1,n[2]||1)}finishCompute(e){let t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){let{object:r,material:i,context:n,pipeline:a}=e,s=e.getBindings(),o=this.get(n),l=this.get(a),u=l.pipeline;if(!0===l.error)return;let c=e.getIndex(),h=null!==c,d=e.getDrawParameters();if(null===d)return;let A=(t,r)=>{this.pipelineUtils.setPipeline(t,u),r.pipeline=u;let a=r.bindingGroups;for(let e=0,r=s.length;e<r;e++){let r=s[e],i=this.get(r);a[r.index]!==r.id&&(t.setBindGroup(r.index,i.group),a[r.index]=r.id)}if(!0===h&&r.index!==c){let e=this.get(c).buffer,i=c.array instanceof Uint16Array?Bc:Bh;t.setIndexBuffer(e,i),r.index=c}let l=e.getVertexBuffers();for(let e=0,i=l.length;e<i;e++){let i=l[e];if(r.attributes[e]!==i){let n=this.get(i).buffer;t.setVertexBuffer(e,n),r.attributes[e]=i}}!0===n.stencil&&!0===i.stencilWrite&&o.currentStencilRef!==i.stencilRef&&(t.setStencilReference(i.stencilRef),o.currentStencilRef=i.stencilRef)},p=(i,n)=>{if(A(i,n),!0===r.isBatchedMesh){let e=r._multiDrawStarts,n=r._multiDrawCounts,a=r._multiDrawCount,s=r._multiDrawInstances;null!==s&&eD("WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let o=0;o<a;o++){let a=s?s[o]:1,l=a>1?0:o;!0===h?i.drawIndexed(n[o],a,e[o]/c.array.BYTES_PER_ELEMENT,0,l):i.draw(n[o],a,e[o],l),t.update(r,n[o],a)}}else if(!0===h){let{vertexCount:n,instanceCount:a,firstVertex:s}=d,o=e.getIndirect();if(null!==o){let e=this.get(o).buffer;i.drawIndexedIndirect(e,0)}else i.drawIndexed(n,a,s,0,0);t.update(r,n,a)}else{let{vertexCount:n,instanceCount:a,firstVertex:s}=d,o=e.getIndirect();if(null!==o){let e=this.get(o).buffer;i.drawIndirect(e,0)}else i.draw(n,a,s,0);t.update(r,n,a)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){let t=this.get(e.camera),i=e.camera.cameras,a=e.getBindingGroup("cameraIndex");if(void 0===t.indexesGPU||t.indexesGPU.length!==i.length){let e=this.get(a),r=[],n=new Uint32Array([0,0,0,0]);for(let t=0,a=i.length;t<a;t++){n[0]=t;let i=this.bindingUtils.createBindGroupIndex(n,e.layout);r.push(i)}t.indexesGPU=r}let s=this.renderer.getPixelRatio();for(let e=0,l=i.length;e<l;e++){let l=i[e];if(r.layers.test(l.layers)){let r=l.viewport,i=o.currentPass,u=o.currentSets;if(o.bundleEncoders){let t=o.bundleEncoders[e],r=o.bundleSets[e];i=t,u=r}r&&i.setViewport(Math.floor(r.x*s),Math.floor(r.y*s),Math.floor(r.width*s),Math.floor(r.height*s),n.viewportValue.minDepth,n.viewportValue.maxDepth),a&&t.indexesGPU&&(i.setBindGroup(a.index,t.indexesGPU[e]),u.bindingGroups[a.index]=a.id),p(i,u)}}}else if(o.currentPass){if(void 0!==o.occlusionQuerySet){let e=o.lastOcclusionObject;e!==r&&(null!==e&&!0===e.occlusionTest&&(o.currentPass.endOcclusionQuery(),o.occlusionQueryIndex++),!0===r.occlusionTest&&(o.currentPass.beginOcclusionQuery(o.occlusionQueryIndex),o.occlusionQueryObjects[o.occlusionQueryIndex]=r),o.lastOcclusionObject=r)}p(o.currentPass,o.currentSets)}}needsRenderUpdate(e){let t=this.get(e),{object:r,material:i}=e,n=this.utils,a=n.getSampleCountRenderContext(e.context),s=n.getCurrentColorSpace(e.context),o=n.getCurrentColorFormat(e.context),l=n.getCurrentDepthStencilFormat(e.context),u=n.getPrimitiveTopology(r,i),c=!1;return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage||t.sampleCount!==a||t.colorSpace!==s||t.colorFormat!==o||t.depthStencilFormat!==l||t.primitiveTopology!==u||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,t.sampleCount=a,t.colorSpace=s,t.colorFormat=o,t.depthStencilFormat=l,t.primitiveTopology=u,t.clippingContextCacheKey=e.clippingContextCacheKey,c=!0),c}getRenderCacheKey(e){let{object:t,material:r}=e,i=this.utils,n=e.context,a=t.isMesh&&0>t.matrixWorld.determinant();return[r.transparent,r.blending,r.premultipliedAlpha,r.blendSrc,r.blendDst,r.blendEquation,r.blendSrcAlpha,r.blendDstAlpha,r.blendEquationAlpha,r.colorWrite,r.depthWrite,r.depthTest,r.depthFunc,r.stencilWrite,r.stencilFunc,r.stencilFail,r.stencilZFail,r.stencilZPass,r.stencilFuncMask,r.stencilWriteMask,r.side,a,i.getSampleCountRenderContext(n),i.getCurrentColorSpace(n),i.getCurrentColorFormat(n),i.getCurrentDepthStencilFormat(n),i.getPrimitiveTopology(t,r),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}updateSampler(e){return this.textureUtils.updateSampler(e)}createDefaultTexture(e){return this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e,t=!1){this.textureUtils.destroyTexture(e,t)}async copyTextureToBuffer(e,t,r,i,n,a){return this.textureUtils.copyTextureToBuffer(e,t,r,i,n,a)}initTimestampQuery(e,t,r){if(!this.trackTimestamp)return;this.timestampQueryPool[e]||(this.timestampQueryPool[e]=new Op(this.device,e,2048));let i=this.timestampQueryPool[e],n=i.allocateQueriesForContext(t);r.timestampWrites={querySet:i.querySet,beginningOfPassWriteIndex:n,endOfPassWriteIndex:n+1}}createNodeBuilder(e,t){return new Os(e,t)}createProgram(e){this.get(e).module={module:this.device.createShaderModule({code:e.code,label:e.stage+(""!==e.name?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){let t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){let r=this.get(e),i=r.currentPass.finish();this.get(t).bundleGPU=i,r.currentSets=r._currentSets,r.currentPass=r._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,r,i){this.bindingUtils.createBindings(e,t,r,i)}updateBindings(e,t,r,i){this.bindingUtils.createBindings(e,t,r,i)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){let t=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(t|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,t)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.delete(this.renderer.getCanvasTarget())}getMaxAnisotropy(){return 16}hasFeature(e){return void 0!==FH[e]&&(e=FH[e]),this.device.features.has(e)}copyTextureToTexture(e,t,r=null,i=null,n=0,a=0){let s=0,o=0,l=0,u=0,c=0,h=0,d=e.image.width,A=e.image.height,p=1;null!==r&&(!0===r.isBox3?(u=r.min.x,c=r.min.y,h=r.min.z,d=r.max.x-r.min.x,A=r.max.y-r.min.y,p=r.max.z-r.min.z):(u=r.min.x,c=r.min.y,d=r.max.x-r.min.x,A=r.max.y-r.min.y,p=1)),null!==i&&(s=i.x,o=i.y,l=i.z||0);let f=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),m=this.get(e).texture,g=this.get(t).texture;f.copyTextureToTexture({texture:m,mipLevel:n,origin:{x:u,y:c,z:h}},{texture:g,mipLevel:a,origin:{x:s,y:o,z:l}},[d,A,p]),this.device.queue.submit([f.finish()]),0===a&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,r){let i,n=this.get(t),a=null;a=t.renderTarget?e.isDepthTexture?this.get(t.depthTexture).texture:this.get(t.textures[0]).texture:e.isDepthTexture?this.textureUtils.getDepthBuffer(t.depth,t.stencil):this.context.getCurrentTexture();let s=this.get(e).texture;if(a.format!==s.format)return void eL("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",a.format,s.format);if(n.currentPass?(n.currentPass.end(),i=n.encoder):i=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),i.copyTextureToTexture({texture:a,origin:[r.x,r.y,0]},{texture:s},[r.z,r.w]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e,i),n.currentPass){let{descriptor:e}=n;for(let t=0;t<e.colorAttachments.length;t++)e.colorAttachments[t].loadOp=Bl;t.depth&&(e.depthStencilAttachment.depthLoadOp=Bl),t.stencil&&(e.depthStencilAttachment.stencilLoadOp=Bl),n.currentPass=i.beginRenderPass(e),n.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor&&this.updateScissor(t)}else this.device.queue.submit([i.finish()])}dispose(){this.textureUtils.dispose()}}class Om extends sZ{constructor(e,t,r,i,n,a){super(e,t,r,i,n,a),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class Og extends sZ{constructor(e,t,r,i,n,a){super(e,t,r,i,n,a),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class Oy extends L8{constructor(){super(),this.addMaterial(MZ,"MeshPhongMaterial"),this.addMaterial(C_,"MeshStandardMaterial"),this.addMaterial(CS,"MeshPhysicalMaterial"),this.addMaterial(CE,"MeshToonMaterial"),this.addMaterial(MG,"MeshBasicMaterial"),this.addMaterial(MY,"MeshLambertMaterial"),this.addMaterial(MP,"MeshNormalMaterial"),this.addMaterial(CN,"MeshMatcapMaterial"),this.addMaterial(MT,"LineBasicMaterial"),this.addMaterial(MM,"LineDashedMaterial"),this.addMaterial(CF,"PointsMaterial"),this.addMaterial(CL,"SpriteMaterial"),this.addMaterial(Cz,"ShadowMaterial"),this.addLight(Ih,s3),this.addLight(LI,s8),this.addLight(LF,s7),this.addLight(LO,sZ),this.addLight(LV,s6),this.addLight(Lq,sW),this.addLight(LG,oe),this.addLight(LU,Om),this.addLight(Lz,Og),this.addToneMapping(NI,1),this.addToneMapping(NL,2),this.addToneMapping(ND,3),this.addToneMapping(NF,4),this.addToneMapping(Nz,6),this.addToneMapping(NV,7)}}class Ov extends Dy{constructor(e={}){let t;e.forceWebGL?t=D6:(t=Of,e.getFallback=()=>(eI("WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new D6(e))),super(new t(e),e),this.library=new Oy,this.isWebGPURenderer=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}let Ox=I4.BRDF_GGX,O_=I4.BRDF_Lambert,Ob=I4.BasicPointShadowFilter,OS=I4.BasicShadowFilter,OT=I4.Break,Ow=I4.Const,OM=I4.Continue,OE=I4.DFGApprox,OC=I4.D_GGX,OR=I4.Discard,ON=I4.EPSILON,OP=I4.F_Schlick,OI=I4.Fn,OL=I4.INFINITY,OD=I4.If,OB=I4.Loop,OF=I4.NodeAccess,OO=I4.NodeShaderStage,OU=I4.NodeType,Ok=I4.NodeUpdateType,Oz=I4.PCFShadowFilter,OV=I4.PCFSoftShadowFilter,Oq=I4.PI,OG=I4.PI2,OH=I4.TWO_PI,Oj=I4.HALF_PI,OW=I4.PointShadowFilter,OX=I4.Return,OQ=I4.Schlick_to_F0,O$=I4.ScriptableNodeResources,OY=I4.ShaderNode,OK=I4.Stack,OZ=I4.Switch,OJ=I4.TBNViewMatrix,O0=I4.VSMShadowFilter,O1=I4.V_GGX_SmithCorrelated,O2=I4.Var,O3=I4.VarIntent,O4=I4.abs,O5=I4.acesFilmicToneMapping,O8=I4.acos,O6=I4.add,O7=I4.addMethodChaining,O9=I4.addNodeElement,Ue=I4.agxToneMapping,Ut=I4.all,Ur=I4.alphaT,Ui=I4.and,Un=I4.anisotropy,Ua=I4.anisotropyB,Us=I4.anisotropyT,Uo=I4.any,Ul=I4.append,Uu=I4.array,Uc=I4.arrayBuffer,Uh=I4.asin,Ud=I4.assign,UA=I4.atan,Up=I4.atan2,Uf=I4.atomicAdd,Um=I4.atomicAnd,Ug=I4.atomicFunc,Uy=I4.atomicLoad,Uv=I4.atomicMax,Ux=I4.atomicMin,U_=I4.atomicOr,Ub=I4.atomicStore,US=I4.atomicSub,UT=I4.atomicXor,Uw=I4.attenuationColor,UM=I4.attenuationDistance,UE=I4.attribute,UC=I4.attributeArray,UR=I4.backgroundBlurriness,UN=I4.backgroundIntensity,UP=I4.backgroundRotation,UI=I4.batch,UL=I4.bentNormalView,UD=I4.billboarding,UB=I4.bitAnd,UF=I4.bitNot,UO=I4.bitOr,UU=I4.bitXor,Uk=I4.bitangentGeometry,Uz=I4.bitangentLocal,UV=I4.bitangentView,Uq=I4.bitangentWorld,UG=I4.bitcast,UH=I4.blendBurn,Uj=I4.blendColor,UW=I4.blendDodge,UX=I4.blendOverlay,UQ=I4.blendScreen,U$=I4.blur,UY=I4.bool,UK=I4.buffer,UZ=I4.bufferAttribute,UJ=I4.bumpMap,U0=I4.burn,U1=I4.builtin,U2=I4.bvec2,U3=I4.bvec3,U4=I4.bvec4,U5=I4.bypass,U8=I4.cache,U6=I4.call,U7=I4.cameraFar,U9=I4.cameraIndex,ke=I4.cameraNear,kt=I4.cameraNormalMatrix,kr=I4.cameraPosition,ki=I4.cameraProjectionMatrix,kn=I4.cameraProjectionMatrixInverse,ka=I4.cameraViewMatrix,ks=I4.cameraViewport,ko=I4.cameraWorldMatrix,kl=I4.cbrt,ku=I4.cdl,kc=I4.ceil,kh=I4.checker,kd=I4.cineonToneMapping,kA=I4.clamp,kp=I4.clearcoat,kf=I4.clearcoatNormalView,km=I4.clearcoatRoughness,kg=I4.code,ky=I4.color,kv=I4.colorSpaceToWorking,kx=I4.colorToDirection,k_=I4.compute,kb=I4.computeKernel,kS=I4.computeSkinning,kT=I4.context,kw=I4.convert,kM=I4.convertColorSpace,kE=I4.convertToTexture,kC=I4.cos,kR=I4.cross,kN=I4.cubeTexture,kP=I4.cubeTextureBase,kI=I4.cubeToUV,kL=I4.dFdx,kD=I4.dFdy,kB=I4.dashSize,kF=I4.debug,kO=I4.decrement,kU=I4.decrementBefore,kk=I4.defaultBuildStages,kz=I4.defaultShaderStages,kV=I4.defined,kq=I4.degrees,kG=I4.deltaTime,kH=I4.densityFog,kj=I4.densityFogFactor,kW=I4.depth,kX=I4.depthPass,kQ=I4.determinant,k$=I4.difference,kY=I4.diffuseColor,kK=I4.directPointLight,kZ=I4.directionToColor,kJ=I4.directionToFaceDirection,k0=I4.dispersion,k1=I4.distance,k2=I4.div,k3=I4.dodge,k4=I4.dot,k5=I4.drawIndex,k8=I4.dynamicBufferAttribute,k6=I4.element,k7=I4.emissive,k9=I4.equal,ze=I4.equals,zt=I4.equirectUV,zr=I4.exp,zi=I4.exp2,zn=I4.expression,za=I4.faceDirection,zs=I4.faceForward,zo=I4.faceforward,zl=I4.float,zu=I4.floatBitsToInt,zc=I4.floatBitsToUint,zh=I4.floor,zd=I4.fog,zA=I4.fract,zp=I4.frameGroup,zf=I4.frameId,zm=I4.frontFacing,zg=I4.fwidth,zy=I4.gain,zv=I4.gapSize,zx=I4.getConstNodeType,z_=I4.getCurrentStack,zb=I4.getDirection,zS=I4.getDistanceAttenuation,zT=I4.getGeometryRoughness,zw=I4.getNormalFromDepth,zM=I4.interleavedGradientNoise,zE=I4.getParallaxCorrectNormal,zC=I4.getRoughness,zR=I4.getScreenPosition,zN=I4.getShIrradianceAt,zP=I4.getShadowMaterial,zI=I4.getShadowRenderObjectFunction,zL=I4.getTextureIndex,zD=I4.getViewPosition,zB=I4.globalId,zF=I4.glsl,zO=I4.glslFn,zU=I4.grayscale,zk=I4.greaterThan,zz=I4.greaterThanEqual,zV=I4.hash,zq=I4.highpModelNormalViewMatrix,zG=I4.highpModelViewMatrix,zH=I4.hue,zj=I4.increment,zW=I4.incrementBefore,zX=I4.instance,zQ=I4.instanceIndex,z$=I4.instancedArray,zY=I4.instancedBufferAttribute,zK=I4.instancedDynamicBufferAttribute,zZ=I4.instancedMesh,zJ=I4.int,z0=I4.intBitsToFloat,z1=I4.inverse,z2=I4.inverseSqrt,z3=I4.inversesqrt,z4=I4.invocationLocalIndex,z5=I4.invocationSubgroupIndex,z8=I4.ior,z6=I4.iridescence,z7=I4.iridescenceIOR,z9=I4.iridescenceThickness,Ve=I4.ivec2,Vt=I4.ivec3,Vr=I4.ivec4,Vi=I4.js,Vn=I4.label,Va=I4.length,Vs=I4.lengthSq,Vo=I4.lessThan,Vl=I4.lessThanEqual,Vu=I4.lightPosition,Vc=I4.lightProjectionUV,Vh=I4.lightShadowMatrix,Vd=I4.lightTargetDirection,VA=I4.lightTargetPosition,Vp=I4.lightViewPosition,Vf=I4.lightingContext,Vm=I4.lights,Vg=I4.linearDepth,Vy=I4.linearToneMapping,Vv=I4.localId,Vx=I4.log,V_=I4.log2,Vb=I4.logarithmicDepthToViewZ,VS=I4.luminance,VT=I4.mat2,Vw=I4.mat3,VM=I4.mat4,VE=I4.matcapUV,VC=I4.materialAO,VR=I4.materialAlphaTest,VN=I4.materialAnisotropy,VP=I4.materialAnisotropyVector,VI=I4.materialAttenuationColor,VL=I4.materialAttenuationDistance,VD=I4.materialClearcoat,VB=I4.materialClearcoatNormal,VF=I4.materialClearcoatRoughness,VO=I4.materialColor,VU=I4.materialDispersion,Vk=I4.materialEmissive,Vz=I4.materialEnvIntensity,VV=I4.materialEnvRotation,Vq=I4.materialIOR,VG=I4.materialIridescence,VH=I4.materialIridescenceIOR,Vj=I4.materialIridescenceThickness,VW=I4.materialLightMap,VX=I4.materialLineDashOffset,VQ=I4.materialLineDashSize,V$=I4.materialLineGapSize,VY=I4.materialLineScale,VK=I4.materialLineWidth,VZ=I4.materialMetalness,VJ=I4.materialNormal,V0=I4.materialOpacity,V1=I4.materialPointSize,V2=I4.materialReference,V3=I4.materialReflectivity,V4=I4.materialRefractionRatio,V5=I4.materialRotation,V8=I4.materialRoughness,V6=I4.materialSheen,V7=I4.materialSheenRoughness,V9=I4.materialShininess,qe=I4.materialSpecular,qt=I4.materialSpecularColor,qr=I4.materialSpecularIntensity,qi=I4.materialSpecularStrength,qn=I4.materialThickness,qa=I4.materialTransmission,qs=I4.max,qo=I4.maxMipLevel,ql=I4.mediumpModelViewMatrix,qu=I4.metalness,qc=I4.min,qh=I4.mix,qd=I4.mixElement,qA=I4.mod,qp=I4.modInt,qf=I4.modelDirection,qm=I4.modelNormalMatrix,qg=I4.modelPosition,qy=I4.modelRadius,qv=I4.modelScale,qx=I4.modelViewMatrix,q_=I4.modelViewPosition,qb=I4.modelViewProjection,qS=I4.modelWorldMatrix,qT=I4.modelWorldMatrixInverse,qw=I4.morphReference,qM=I4.mrt,qE=I4.mul,qC=I4.mx_aastep,qR=I4.mx_add,qN=I4.mx_atan2,qP=I4.mx_cell_noise_float,qI=I4.mx_contrast,qL=I4.mx_divide,qD=I4.mx_fractal_noise_float,qB=I4.mx_fractal_noise_vec2,qF=I4.mx_fractal_noise_vec3,qO=I4.mx_fractal_noise_vec4,qU=I4.mx_frame,qk=I4.mx_heighttonormal,qz=I4.mx_hsvtorgb,qV=I4.mx_ifequal,qq=I4.mx_ifgreater,qG=I4.mx_ifgreatereq,qH=I4.mx_invert,qj=I4.mx_modulo,qW=I4.mx_multiply,qX=I4.mx_noise_float,qQ=I4.mx_noise_vec3,q$=I4.mx_noise_vec4,qY=I4.mx_place2d,qK=I4.mx_power,qZ=I4.mx_ramp4,qJ=I4.mx_ramplr,q0=I4.mx_ramptb,q1=I4.mx_rgbtohsv,q2=I4.mx_rotate2d,q3=I4.mx_rotate3d,q4=I4.mx_safepower,q5=I4.mx_separate,q8=I4.mx_splitlr,q6=I4.mx_splittb,q7=I4.mx_srgb_texture_to_lin_rec709,q9=I4.mx_subtract,Ge=I4.mx_timer,Gt=I4.mx_transform_uv,Gr=I4.mx_unifiednoise2d,Gi=I4.mx_unifiednoise3d,Gn=I4.mx_worley_noise_float,Ga=I4.mx_worley_noise_vec2,Gs=I4.mx_worley_noise_vec3,Go=I4.negate,Gl=I4.neutralToneMapping,Gu=I4.nodeArray,Gc=I4.nodeImmutable,Gh=I4.nodeObject,Gd=I4.nodeObjectIntent,GA=I4.nodeObjects,Gp=I4.nodeProxy,Gf=I4.nodeProxyIntent,Gm=I4.normalFlat,Gg=I4.normalGeometry,Gy=I4.normalLocal,Gv=I4.normalMap,Gx=I4.normalView,G_=I4.normalViewGeometry,Gb=I4.normalWorld,GS=I4.normalWorldGeometry,GT=I4.normalize,Gw=I4.not,GM=I4.notEqual,GE=I4.numWorkgroups,GC=I4.objectDirection,GR=I4.objectGroup,GN=I4.objectPosition,GP=I4.objectRadius,GI=I4.objectScale,GL=I4.objectViewPosition,GD=I4.objectWorldMatrix,GB=I4.OnBeforeObjectUpdate,GF=I4.OnBeforeMaterialUpdate,GO=I4.OnObjectUpdate,GU=I4.OnMaterialUpdate,Gk=I4.oneMinus,Gz=I4.or,GV=I4.orthographicDepthToViewZ,Gq=I4.oscSawtooth,GG=I4.oscSine,GH=I4.oscSquare,Gj=I4.oscTriangle,GW=I4.output,GX=I4.outputStruct,GQ=I4.overlay,G$=I4.overloadingFn,GY=I4.parabola,GK=I4.parallaxDirection,GZ=I4.parallaxUV,GJ=I4.parameter,G0=I4.pass,G1=I4.passTexture,G2=I4.pcurve,G3=I4.perspectiveDepthToViewZ,G4=I4.pmremTexture,G5=I4.pointShadow,G8=I4.pointUV,G6=I4.pointWidth,G7=I4.positionGeometry,G9=I4.positionLocal,He=I4.positionPrevious,Ht=I4.positionView,Hr=I4.positionViewDirection,Hi=I4.positionWorld,Hn=I4.positionWorldDirection,Ha=I4.posterize,Hs=I4.pow,Ho=I4.pow2,Hl=I4.pow3,Hu=I4.pow4,Hc=I4.premultiplyAlpha,Hh=I4.property,Hd=I4.radians,HA=I4.rand,Hp=I4.range,Hf=I4.rangeFog,Hm=I4.rangeFogFactor,Hg=I4.reciprocal,Hy=I4.reference,Hv=I4.referenceBuffer,Hx=I4.reflect,H_=I4.reflectVector,Hb=I4.reflectView,HS=I4.reflector,HT=I4.refract,Hw=I4.refractVector,HM=I4.refractView,HE=I4.reinhardToneMapping,HC=I4.remap,HR=I4.remapClamp,HN=I4.renderGroup,HP=I4.renderOutput,HI=I4.rendererReference,HL=I4.rotate,HD=I4.rotateUV,HB=I4.roughness,HF=I4.round,HO=I4.rtt,HU=I4.sRGBTransferEOTF,Hk=I4.sRGBTransferOETF,Hz=I4.sample,HV=I4.sampler,Hq=I4.samplerComparison,HG=I4.saturate,HH=I4.saturation,Hj=I4.screen,HW=I4.screenCoordinate,HX=I4.screenDPR,HQ=I4.screenSize,H$=I4.screenUV,HY=I4.scriptable,HK=I4.scriptableValue,HZ=I4.select,HJ=I4.setCurrentStack,H0=I4.setName,H1=I4.shaderStages,H2=I4.shadow,H3=I4.shadowPositionWorld,H4=I4.shapeCircle,H5=I4.sharedUniformGroup,H8=I4.sheen,H6=I4.sheenRoughness,H7=I4.shiftLeft,H9=I4.shiftRight,je=I4.shininess,jt=I4.sign,jr=I4.sin,ji=I4.sinc,jn=I4.skinning,ja=I4.smoothstep,js=I4.smoothstepElement,jo=I4.specularColor,jl=I4.specularF90,ju=I4.spherizeUV,jc=I4.split,jh=I4.spritesheetUV,jd=I4.sqrt,jA=I4.stack,jp=I4.step,jf=I4.stepElement,jm=I4.storage,jg=I4.storageBarrier,jy=I4.storageObject,jv=I4.storageTexture,jx=I4.string,j_=I4.struct,jb=I4.sub,jS=I4.subgroupAdd,jT=I4.subgroupAll,jw=I4.subgroupAnd,jM=I4.subgroupAny,jE=I4.subgroupBallot,jC=I4.subgroupBroadcast,jR=I4.subgroupBroadcastFirst,jN=I4.subBuild,jP=I4.subgroupElect,jI=I4.subgroupExclusiveAdd,jL=I4.subgroupExclusiveMul,jD=I4.subgroupInclusiveAdd,jB=I4.subgroupInclusiveMul,jF=I4.subgroupIndex,jO=I4.subgroupMax,jU=I4.subgroupMin,jk=I4.subgroupMul,jz=I4.subgroupOr,jV=I4.subgroupShuffle,jq=I4.subgroupShuffleDown,jG=I4.subgroupShuffleUp,jH=I4.subgroupShuffleXor,jj=I4.subgroupSize,jW=I4.subgroupXor,jX=I4.tan,jQ=I4.tangentGeometry,j$=I4.tangentLocal,jY=I4.tangentView,jK=I4.tangentWorld,jZ=I4.texture,jJ=I4.texture3D,j0=I4.textureBarrier,j1=I4.textureBicubic,j2=I4.textureBicubicLevel,j3=I4.textureCubeUV,j4=I4.textureLoad,j5=I4.textureSize,j8=I4.textureLevel,j6=I4.textureStore,j7=I4.thickness,j9=I4.time,We=I4.toneMapping,Wt=I4.toneMappingExposure,Wr=I4.toonOutlinePass,Wi=I4.transformDirection,Wn=I4.transformNormal,Wa=I4.transformNormalToView,Ws=I4.transformedClearcoatNormalView,Wo=I4.transformedNormalView,Wl=I4.transformedNormalWorld,Wu=I4.transmission,Wc=I4.transpose,Wh=I4.triNoise3D,Wd=I4.triplanarTexture,WA=I4.triplanarTextures,Wp=I4.trunc,Wf=I4.uint,Wm=I4.uintBitsToFloat,Wg=I4.uniform,Wy=I4.uniformArray,Wv=I4.uniformCubeTexture,Wx=I4.uniformGroup,W_=I4.uniformFlow,Wb=I4.uniformTexture,WS=I4.unpremultiplyAlpha,WT=I4.userData,Ww=I4.uv,WM=I4.uvec2,WE=I4.uvec3,WC=I4.uvec4,WR=I4.varying,WN=I4.varyingProperty,WP=I4.vec2,WI=I4.vec3,WL=I4.vec4,WD=I4.vectorComponents,WB=I4.velocity,WF=I4.vertexColor,WO=I4.vertexIndex,WU=I4.vertexStage,Wk=I4.vibrance,Wz=I4.viewZToLogarithmicDepth,WV=I4.viewZToOrthographicDepth,Wq=I4.viewZToPerspectiveDepth,WG=I4.viewport,WH=I4.viewportCoordinate,Wj=I4.viewportDepthTexture,WW=I4.viewportLinearDepth,WX=I4.viewportMipTexture,WQ=I4.viewportResolution,W$=I4.viewportSafeUV,WY=I4.viewportSharedTexture,WK=I4.viewportSize,WZ=I4.viewportTexture,WJ=I4.viewportUV,W0=I4.wgsl,W1=I4.wgslFn,W2=I4.workgroupArray,W3=I4.workgroupBarrier,W4=I4.workgroupId,W5=I4.workingToColorSpace,W8=I4.xor;e.s(["BRDF_GGX",()=>Ox,"BRDF_Lambert",()=>O_,"BasicPointShadowFilter",()=>Ob,"BasicShadowFilter",()=>OS,"Break",()=>OT,"Const",()=>Ow,"Continue",()=>OM,"DFGApprox",()=>OE,"D_GGX",()=>OC,"Discard",()=>OR,"EPSILON",()=>ON,"F_Schlick",()=>OP,"Fn",()=>OI,"HALF_PI",()=>Oj,"INFINITY",()=>OL,"If",()=>OD,"Loop",()=>OB,"NodeAccess",()=>OF,"NodeShaderStage",()=>OO,"NodeType",()=>OU,"NodeUpdateType",()=>Ok,"OnBeforeMaterialUpdate",()=>GF,"OnBeforeObjectUpdate",()=>GB,"OnMaterialUpdate",()=>GU,"OnObjectUpdate",()=>GO,"PCFShadowFilter",()=>Oz,"PCFSoftShadowFilter",()=>OV,"PI",()=>Oq,"PI2",()=>OG,"PointShadowFilter",()=>OW,"Return",()=>OX,"Schlick_to_F0",()=>OQ,"ScriptableNodeResources",()=>O$,"ShaderNode",()=>OY,"Stack",()=>OK,"Switch",()=>OZ,"TBNViewMatrix",()=>OJ,"TWO_PI",()=>OH,"VSMShadowFilter",()=>O0,"V_GGX_SmithCorrelated",()=>O1,"Var",()=>O2,"VarIntent",()=>O3,"abs",()=>O4,"acesFilmicToneMapping",()=>O5,"acos",()=>O8,"add",()=>O6,"addMethodChaining",()=>O7,"addNodeElement",()=>O9,"agxToneMapping",()=>Ue,"all",()=>Ut,"alphaT",()=>Ur,"and",()=>Ui,"anisotropy",()=>Un,"anisotropyB",()=>Ua,"anisotropyT",()=>Us,"any",()=>Uo,"append",()=>Ul,"array",()=>Uu,"arrayBuffer",()=>Uc,"asin",()=>Uh,"assign",()=>Ud,"atan",()=>UA,"atan2",()=>Up,"atomicAdd",()=>Uf,"atomicAnd",()=>Um,"atomicFunc",()=>Ug,"atomicLoad",()=>Uy,"atomicMax",()=>Uv,"atomicMin",()=>Ux,"atomicOr",()=>U_,"atomicStore",()=>Ub,"atomicSub",()=>US,"atomicXor",()=>UT,"attenuationColor",()=>Uw,"attenuationDistance",()=>UM,"attribute",()=>UE,"attributeArray",()=>UC,"backgroundBlurriness",()=>UR,"backgroundIntensity",()=>UN,"backgroundRotation",()=>UP,"batch",()=>UI,"bentNormalView",()=>UL,"billboarding",()=>UD,"bitAnd",()=>UB,"bitNot",()=>UF,"bitOr",()=>UO,"bitXor",()=>UU,"bitangentGeometry",()=>Uk,"bitangentLocal",()=>Uz,"bitangentView",()=>UV,"bitangentWorld",()=>Uq,"bitcast",()=>UG,"blendBurn",()=>UH,"blendColor",()=>Uj,"blendDodge",()=>UW,"blendOverlay",()=>UX,"blendScreen",()=>UQ,"blur",()=>U$,"bool",()=>UY,"buffer",()=>UK,"bufferAttribute",()=>UZ,"builtin",()=>U1,"bumpMap",()=>UJ,"burn",()=>U0,"bvec2",()=>U2,"bvec3",()=>U3,"bvec4",()=>U4,"bypass",()=>U5,"cache",()=>U8,"call",()=>U6,"cameraFar",()=>U7,"cameraIndex",()=>U9,"cameraNear",()=>ke,"cameraNormalMatrix",()=>kt,"cameraPosition",()=>kr,"cameraProjectionMatrix",()=>ki,"cameraProjectionMatrixInverse",()=>kn,"cameraViewMatrix",()=>ka,"cameraViewport",()=>ks,"cameraWorldMatrix",()=>ko,"cbrt",()=>kl,"cdl",()=>ku,"ceil",()=>kc,"checker",()=>kh,"cineonToneMapping",()=>kd,"clamp",()=>kA,"clearcoat",()=>kp,"clearcoatNormalView",()=>kf,"clearcoatRoughness",()=>km,"code",()=>kg,"color",()=>ky,"colorSpaceToWorking",()=>kv,"colorToDirection",()=>kx,"compute",()=>k_,"computeKernel",()=>kb,"computeSkinning",()=>kS,"context",()=>kT,"convert",()=>kw,"convertColorSpace",()=>kM,"convertToTexture",()=>kE,"cos",()=>kC,"cross",()=>kR,"cubeTexture",()=>kN,"cubeTextureBase",()=>kP,"cubeToUV",()=>kI,"dFdx",()=>kL,"dFdy",()=>kD,"dashSize",()=>kB,"debug",()=>kF,"decrement",()=>kO,"decrementBefore",()=>kU,"defaultBuildStages",()=>kk,"defaultShaderStages",()=>kz,"defined",()=>kV,"degrees",()=>kq,"deltaTime",()=>kG,"densityFog",()=>kH,"densityFogFactor",()=>kj,"depth",()=>kW,"depthPass",()=>kX,"determinant",()=>kQ,"difference",()=>k$,"diffuseColor",()=>kY,"directPointLight",()=>kK,"directionToColor",()=>kZ,"directionToFaceDirection",()=>kJ,"dispersion",()=>k0,"distance",()=>k1,"div",()=>k2,"dodge",()=>k3,"dot",()=>k4,"drawIndex",()=>k5,"dynamicBufferAttribute",()=>k8,"element",()=>k6,"emissive",()=>k7,"equal",()=>k9,"equals",()=>ze,"equirectUV",()=>zt,"exp",()=>zr,"exp2",()=>zi,"expression",()=>zn,"faceDirection",()=>za,"faceForward",()=>zs,"faceforward",()=>zo,"float",()=>zl,"floatBitsToInt",()=>zu,"floatBitsToUint",()=>zc,"floor",()=>zh,"fog",()=>zd,"fract",()=>zA,"frameGroup",()=>zp,"frameId",()=>zf,"frontFacing",()=>zm,"fwidth",()=>zg,"gain",()=>zy,"gapSize",()=>zv,"getConstNodeType",()=>zx,"getCurrentStack",()=>z_,"getDirection",()=>zb,"getDistanceAttenuation",()=>zS,"getGeometryRoughness",()=>zT,"getNormalFromDepth",()=>zw,"getParallaxCorrectNormal",()=>zE,"getRoughness",()=>zC,"getScreenPosition",()=>zR,"getShIrradianceAt",()=>zN,"getShadowMaterial",()=>zP,"getShadowRenderObjectFunction",()=>zI,"getTextureIndex",()=>zL,"getViewPosition",()=>zD,"globalId",()=>zB,"glsl",()=>zF,"glslFn",()=>zO,"grayscale",()=>zU,"greaterThan",()=>zk,"greaterThanEqual",()=>zz,"hash",()=>zV,"highpModelNormalViewMatrix",()=>zq,"highpModelViewMatrix",()=>zG,"hue",()=>zH,"increment",()=>zj,"incrementBefore",()=>zW,"instance",()=>zX,"instanceIndex",()=>zQ,"instancedArray",()=>z$,"instancedBufferAttribute",()=>zY,"instancedDynamicBufferAttribute",()=>zK,"instancedMesh",()=>zZ,"int",()=>zJ,"intBitsToFloat",()=>z0,"interleavedGradientNoise",()=>zM,"inverse",()=>z1,"inverseSqrt",()=>z2,"inversesqrt",()=>z3,"invocationLocalIndex",()=>z4,"invocationSubgroupIndex",()=>z5,"ior",()=>z8,"iridescence",()=>z6,"iridescenceIOR",()=>z7,"iridescenceThickness",()=>z9,"ivec2",()=>Ve,"ivec3",()=>Vt,"ivec4",()=>Vr,"js",()=>Vi,"label",()=>Vn,"length",()=>Va,"lengthSq",()=>Vs,"lessThan",()=>Vo,"lessThanEqual",()=>Vl,"lightPosition",()=>Vu,"lightProjectionUV",()=>Vc,"lightShadowMatrix",()=>Vh,"lightTargetDirection",()=>Vd,"lightTargetPosition",()=>VA,"lightViewPosition",()=>Vp,"lightingContext",()=>Vf,"lights",()=>Vm,"linearDepth",()=>Vg,"linearToneMapping",()=>Vy,"localId",()=>Vv,"log",()=>Vx,"log2",()=>V_,"logarithmicDepthToViewZ",()=>Vb,"luminance",()=>VS,"mat2",()=>VT,"mat3",()=>Vw,"mat4",()=>VM,"matcapUV",()=>VE,"materialAO",()=>VC,"materialAlphaTest",()=>VR,"materialAnisotropy",()=>VN,"materialAnisotropyVector",()=>VP,"materialAttenuationColor",()=>VI,"materialAttenuationDistance",()=>VL,"materialClearcoat",()=>VD,"materialClearcoatNormal",()=>VB,"materialClearcoatRoughness",()=>VF,"materialColor",()=>VO,"materialDispersion",()=>VU,"materialEmissive",()=>Vk,"materialEnvIntensity",()=>Vz,"materialEnvRotation",()=>VV,"materialIOR",()=>Vq,"materialIridescence",()=>VG,"materialIridescenceIOR",()=>VH,"materialIridescenceThickness",()=>Vj,"materialLightMap",()=>VW,"materialLineDashOffset",()=>VX,"materialLineDashSize",()=>VQ,"materialLineGapSize",()=>V$,"materialLineScale",()=>VY,"materialLineWidth",()=>VK,"materialMetalness",()=>VZ,"materialNormal",()=>VJ,"materialOpacity",()=>V0,"materialPointSize",()=>V1,"materialReference",()=>V2,"materialReflectivity",()=>V3,"materialRefractionRatio",()=>V4,"materialRotation",()=>V5,"materialRoughness",()=>V8,"materialSheen",()=>V6,"materialSheenRoughness",()=>V7,"materialShininess",()=>V9,"materialSpecular",()=>qe,"materialSpecularColor",()=>qt,"materialSpecularIntensity",()=>qr,"materialSpecularStrength",()=>qi,"materialThickness",()=>qn,"materialTransmission",()=>qa,"max",()=>qs,"maxMipLevel",()=>qo,"mediumpModelViewMatrix",()=>ql,"metalness",()=>qu,"min",()=>qc,"mix",()=>qh,"mixElement",()=>qd,"mod",()=>qA,"modInt",()=>qp,"modelDirection",()=>qf,"modelNormalMatrix",()=>qm,"modelPosition",()=>qg,"modelRadius",()=>qy,"modelScale",()=>qv,"modelViewMatrix",()=>qx,"modelViewPosition",()=>q_,"modelViewProjection",()=>qb,"modelWorldMatrix",()=>qS,"modelWorldMatrixInverse",()=>qT,"morphReference",()=>qw,"mrt",()=>qM,"mul",()=>qE,"mx_aastep",()=>qC,"mx_add",()=>qR,"mx_atan2",()=>qN,"mx_cell_noise_float",()=>qP,"mx_contrast",()=>qI,"mx_divide",()=>qL,"mx_fractal_noise_float",()=>qD,"mx_fractal_noise_vec2",()=>qB,"mx_fractal_noise_vec3",()=>qF,"mx_fractal_noise_vec4",()=>qO,"mx_frame",()=>qU,"mx_heighttonormal",()=>qk,"mx_hsvtorgb",()=>qz,"mx_ifequal",()=>qV,"mx_ifgreater",()=>qq,"mx_ifgreatereq",()=>qG,"mx_invert",()=>qH,"mx_modulo",()=>qj,"mx_multiply",()=>qW,"mx_noise_float",()=>qX,"mx_noise_vec3",()=>qQ,"mx_noise_vec4",()=>q$,"mx_place2d",()=>qY,"mx_power",()=>qK,"mx_ramp4",()=>qZ,"mx_ramplr",()=>qJ,"mx_ramptb",()=>q0,"mx_rgbtohsv",()=>q1,"mx_rotate2d",()=>q2,"mx_rotate3d",()=>q3,"mx_safepower",()=>q4,"mx_separate",()=>q5,"mx_splitlr",()=>q8,"mx_splittb",()=>q6,"mx_srgb_texture_to_lin_rec709",()=>q7,"mx_subtract",()=>q9,"mx_timer",()=>Ge,"mx_transform_uv",()=>Gt,"mx_unifiednoise2d",()=>Gr,"mx_unifiednoise3d",()=>Gi,"mx_worley_noise_float",()=>Gn,"mx_worley_noise_vec2",()=>Ga,"mx_worley_noise_vec3",()=>Gs,"negate",()=>Go,"neutralToneMapping",()=>Gl,"nodeArray",()=>Gu,"nodeImmutable",()=>Gc,"nodeObject",()=>Gh,"nodeObjectIntent",()=>Gd,"nodeObjects",()=>GA,"nodeProxy",()=>Gp,"nodeProxyIntent",()=>Gf,"normalFlat",()=>Gm,"normalGeometry",()=>Gg,"normalLocal",()=>Gy,"normalMap",()=>Gv,"normalView",()=>Gx,"normalViewGeometry",()=>G_,"normalWorld",()=>Gb,"normalWorldGeometry",()=>GS,"normalize",()=>GT,"not",()=>Gw,"notEqual",()=>GM,"numWorkgroups",()=>GE,"objectDirection",()=>GC,"objectGroup",()=>GR,"objectPosition",()=>GN,"objectRadius",()=>GP,"objectScale",()=>GI,"objectViewPosition",()=>GL,"objectWorldMatrix",()=>GD,"oneMinus",()=>Gk,"or",()=>Gz,"orthographicDepthToViewZ",()=>GV,"oscSawtooth",()=>Gq,"oscSine",()=>GG,"oscSquare",()=>GH,"oscTriangle",()=>Gj,"output",()=>GW,"outputStruct",()=>GX,"overlay",()=>GQ,"overloadingFn",()=>G$,"parabola",()=>GY,"parallaxDirection",()=>GK,"parallaxUV",()=>GZ,"parameter",()=>GJ,"pass",()=>G0,"passTexture",()=>G1,"pcurve",()=>G2,"perspectiveDepthToViewZ",()=>G3,"pmremTexture",()=>G4,"pointShadow",()=>G5,"pointUV",()=>G8,"pointWidth",()=>G6,"positionGeometry",()=>G7,"positionLocal",()=>G9,"positionPrevious",()=>He,"positionView",()=>Ht,"positionViewDirection",()=>Hr,"positionWorld",()=>Hi,"positionWorldDirection",()=>Hn,"posterize",()=>Ha,"pow",()=>Hs,"pow2",()=>Ho,"pow3",()=>Hl,"pow4",()=>Hu,"premultiplyAlpha",()=>Hc,"property",()=>Hh,"radians",()=>Hd,"rand",()=>HA,"range",()=>Hp,"rangeFog",()=>Hf,"rangeFogFactor",()=>Hm,"reciprocal",()=>Hg,"reference",()=>Hy,"referenceBuffer",()=>Hv,"reflect",()=>Hx,"reflectVector",()=>H_,"reflectView",()=>Hb,"reflector",()=>HS,"refract",()=>HT,"refractVector",()=>Hw,"refractView",()=>HM,"reinhardToneMapping",()=>HE,"remap",()=>HC,"remapClamp",()=>HR,"renderGroup",()=>HN,"renderOutput",()=>HP,"rendererReference",()=>HI,"rotate",()=>HL,"rotateUV",()=>HD,"roughness",()=>HB,"round",()=>HF,"rtt",()=>HO,"sRGBTransferEOTF",()=>HU,"sRGBTransferOETF",()=>Hk,"sample",()=>Hz,"sampler",()=>HV,"samplerComparison",()=>Hq,"saturate",()=>HG,"saturation",()=>HH,"screen",()=>Hj,"screenCoordinate",()=>HW,"screenDPR",()=>HX,"screenSize",()=>HQ,"screenUV",()=>H$,"scriptable",()=>HY,"scriptableValue",()=>HK,"select",()=>HZ,"setCurrentStack",()=>HJ,"setName",()=>H0,"shaderStages",()=>H1,"shadow",()=>H2,"shadowPositionWorld",()=>H3,"shapeCircle",()=>H4,"sharedUniformGroup",()=>H5,"sheen",()=>H8,"sheenRoughness",()=>H6,"shiftLeft",()=>H7,"shiftRight",()=>H9,"shininess",()=>je,"sign",()=>jt,"sin",()=>jr,"sinc",()=>ji,"skinning",()=>jn,"smoothstep",()=>ja,"smoothstepElement",()=>js,"specularColor",()=>jo,"specularF90",()=>jl,"spherizeUV",()=>ju,"split",()=>jc,"spritesheetUV",()=>jh,"sqrt",()=>jd,"stack",()=>jA,"step",()=>jp,"stepElement",()=>jf,"storage",()=>jm,"storageBarrier",()=>jg,"storageObject",()=>jy,"storageTexture",()=>jv,"string",()=>jx,"struct",()=>j_,"sub",()=>jb,"subBuild",()=>jN,"subgroupAdd",()=>jS,"subgroupAll",()=>jT,"subgroupAnd",()=>jw,"subgroupAny",()=>jM,"subgroupBallot",()=>jE,"subgroupBroadcast",()=>jC,"subgroupBroadcastFirst",()=>jR,"subgroupElect",()=>jP,"subgroupExclusiveAdd",()=>jI,"subgroupExclusiveMul",()=>jL,"subgroupInclusiveAdd",()=>jD,"subgroupInclusiveMul",()=>jB,"subgroupIndex",()=>jF,"subgroupMax",()=>jO,"subgroupMin",()=>jU,"subgroupMul",()=>jk,"subgroupOr",()=>jz,"subgroupShuffle",()=>jV,"subgroupShuffleDown",()=>jq,"subgroupShuffleUp",()=>jG,"subgroupShuffleXor",()=>jH,"subgroupSize",()=>jj,"subgroupXor",()=>jW,"tan",()=>jX,"tangentGeometry",()=>jQ,"tangentLocal",()=>j$,"tangentView",()=>jY,"tangentWorld",()=>jK,"texture",()=>jZ,"texture3D",()=>jJ,"textureBarrier",()=>j0,"textureBicubic",()=>j1,"textureBicubicLevel",()=>j2,"textureCubeUV",()=>j3,"textureLevel",()=>j8,"textureLoad",()=>j4,"textureSize",()=>j5,"textureStore",()=>j6,"thickness",()=>j7,"time",()=>j9,"toneMapping",()=>We,"toneMappingExposure",()=>Wt,"toonOutlinePass",()=>Wr,"transformDirection",()=>Wi,"transformNormal",()=>Wn,"transformNormalToView",()=>Wa,"transformedClearcoatNormalView",()=>Ws,"transformedNormalView",()=>Wo,"transformedNormalWorld",()=>Wl,"transmission",()=>Wu,"transpose",()=>Wc,"triNoise3D",()=>Wh,"triplanarTexture",()=>Wd,"triplanarTextures",()=>WA,"trunc",()=>Wp,"uint",()=>Wf,"uintBitsToFloat",()=>Wm,"uniform",()=>Wg,"uniformArray",()=>Wy,"uniformCubeTexture",()=>Wv,"uniformFlow",()=>W_,"uniformGroup",()=>Wx,"uniformTexture",()=>Wb,"unpremultiplyAlpha",()=>WS,"userData",()=>WT,"uv",()=>Ww,"uvec2",()=>WM,"uvec3",()=>WE,"uvec4",()=>WC,"varying",()=>WR,"varyingProperty",()=>WN,"vec2",()=>WP,"vec3",()=>WI,"vec4",()=>WL,"vectorComponents",()=>WD,"velocity",()=>WB,"vertexColor",()=>WF,"vertexIndex",()=>WO,"vertexStage",()=>WU,"vibrance",()=>Wk,"viewZToLogarithmicDepth",()=>Wz,"viewZToOrthographicDepth",()=>WV,"viewZToPerspectiveDepth",()=>Wq,"viewport",()=>WG,"viewportCoordinate",()=>WH,"viewportDepthTexture",()=>Wj,"viewportLinearDepth",()=>WW,"viewportMipTexture",()=>WX,"viewportResolution",()=>WQ,"viewportSafeUV",()=>W$,"viewportSharedTexture",()=>WY,"viewportSize",()=>WK,"viewportTexture",()=>WZ,"viewportUV",()=>WJ,"wgsl",()=>W0,"wgslFn",()=>W1,"workgroupArray",()=>W2,"workgroupBarrier",()=>W3,"workgroupId",()=>W4,"workingToColorSpace",()=>W5,"xor",()=>W8],95372);var W6=e.i(95372);let W7=new tu,W9=new e$;class Xe extends oi{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry",this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new rk([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new rk([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){let t=this.attributes.instanceStart,r=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),r.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));let r=new oQ(t,6,1);return this.setAttribute("instanceStart",new i_(r,3,0)),this.setAttribute("instanceEnd",new i_(r,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));let r=new oQ(t,6,1);return this.setAttribute("instanceColorStart",new i_(r,3,0)),this.setAttribute("instanceColorEnd",new i_(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new a6(e.geometry)),this}fromLineSegments(e){let t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new tu);let e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),W7.setFromBufferAttribute(t),this.boundingBox.union(W7))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new tE),null===this.boundingBox&&this.computeBoundingBox();let e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){let r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let n=0,a=e.count;n<a;n++)W9.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(W9)),W9.fromBufferAttribute(t,n),i=Math.max(i,r.distanceToSquared(W9));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}lz.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new eX(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},lV.line={uniforms:it.merge([lz.common,lz.fog,lz.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Xt extends ir{constructor(e){super({type:"LineMaterial",uniforms:it.clone(lV.line.uniforms),vertexShader:lV.line.vertexShader,fragmentShader:lV.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){!0===e!==this.dashed&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(!0===e!==this.alphaToCoverage&&(this.needsUpdate=!0),!0===e?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}let Xr=new tr,Xi=new e$,Xn=new e$,Xa=new tr,Xs=new tr,Xo=new tr,Xl=new e$,Xu=new tF,Xc=new ln,Xh=new e$,Xd=new tu,XA=new tE,Xp=new tr;function Xf(e,t,r){return Xp.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),Xp.multiplyScalar(1/Xp.w),Xp.x=A/r.width,Xp.y=A/r.height,Xp.applyMatrix4(e.projectionMatrixInverse),Xp.multiplyScalar(1/Xp.w),Math.abs(Math.max(Xp.x,Xp.y))}class Xm extends r5{constructor(e=new Xe,t=new Xt({color:0xffffff*Math.random()})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){let e=this.geometry,t=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let e=0,n=0,a=t.count;e<a;e++,n+=2)Xi.fromBufferAttribute(t,e),Xn.fromBufferAttribute(r,e),i[n]=0===n?0:i[n-1],i[n+1]=i[n]+Xi.distanceTo(Xn);let n=new oQ(i,2,1);return e.setAttribute("instanceDistanceStart",new i_(n,1,0)),e.setAttribute("instanceDistanceEnd",new i_(n,1,1)),this}raycast(e,t){let r,i,n=this.material.worldUnits,a=e.camera;null!==a||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');let s=void 0!==e.params.Line2&&e.params.Line2.threshold||0;d=e.ray;let o=this.matrixWorld,l=this.geometry,u=this.material;if(A=u.linewidth+s,null===l.boundingSphere&&l.computeBoundingSphere(),XA.copy(l.boundingSphere).applyMatrix4(o),n)r=.5*A;else{let e=Math.max(a.near,XA.distanceToPoint(d.origin));r=Xf(a,e,u.resolution)}if(XA.radius+=r,!1!==d.intersectsSphere(XA)){if(null===l.boundingBox&&l.computeBoundingBox(),Xd.copy(l.boundingBox).applyMatrix4(o),n)i=.5*A;else{let e=Math.max(a.near,Xd.distanceToPoint(d.origin));i=Xf(a,e,u.resolution)}Xd.expandByScalar(i),!1!==d.intersectsBox(Xd)&&(n?function(e,t){let r=e.matrixWorld,i=e.geometry,n=i.attributes.instanceStart,a=i.attributes.instanceEnd,s=Math.min(i.instanceCount,n.count);for(let i=0;i<s;i++){Xc.start.fromBufferAttribute(n,i),Xc.end.fromBufferAttribute(a,i),Xc.applyMatrix4(r);let s=new e$,o=new e$;d.distanceSqToSegment(Xc.start,Xc.end,o,s),o.distanceTo(s)<.5*A&&t.push({point:o,pointOnLine:s,distance:d.origin.distanceTo(o),object:e,face:null,faceIndex:i,uv:null,uv1:null})}}(this,t):function(e,t,r){let i=t.projectionMatrix,n=e.material.resolution,a=e.matrixWorld,s=e.geometry,o=s.attributes.instanceStart,l=s.attributes.instanceEnd,u=Math.min(s.instanceCount,o.count),c=-t.near;d.at(1,Xo),Xo.w=1,Xo.applyMatrix4(t.matrixWorldInverse),Xo.applyMatrix4(i),Xo.multiplyScalar(1/Xo.w),Xo.x*=n.x/2,Xo.y*=n.y/2,Xo.z=0,Xl.copy(Xo),Xu.multiplyMatrices(t.matrixWorldInverse,a);for(let t=0;t<u;t++){if(Xa.fromBufferAttribute(o,t),Xs.fromBufferAttribute(l,t),Xa.w=1,Xs.w=1,Xa.applyMatrix4(Xu),Xs.applyMatrix4(Xu),Xa.z>c&&Xs.z>c)continue;if(Xa.z>c){let e=Xa.z-Xs.z,t=(Xa.z-c)/e;Xa.lerp(Xs,t)}else if(Xs.z>c){let e=Xs.z-Xa.z,t=(Xs.z-c)/e;Xs.lerp(Xa,t)}Xa.applyMatrix4(i),Xs.applyMatrix4(i),Xa.multiplyScalar(1/Xa.w),Xs.multiplyScalar(1/Xs.w),Xa.x*=n.x/2,Xa.y*=n.y/2,Xs.x*=n.x/2,Xs.y*=n.y/2,Xc.start.copy(Xa),Xc.start.z=0,Xc.end.copy(Xs),Xc.end.z=0;let s=Xc.closestPointToPointParameter(Xl,!0);Xc.at(s,Xh);let u=eW.lerp(Xa.z,Xs.z,s),h=u>=-1&&u<=1,p=Xl.distanceTo(Xh)<.5*A;if(h&&p){Xc.start.fromBufferAttribute(o,t),Xc.end.fromBufferAttribute(l,t),Xc.start.applyMatrix4(a),Xc.end.applyMatrix4(a);let i=new e$,n=new e$;d.distanceSqToSegment(Xc.start,Xc.end,n,i),r.push({point:n,pointOnLine:i,distance:d.origin.distanceTo(n),object:e,face:null,faceIndex:t,uv:null,uv1:null})}}}(this,a,t))}}onBeforeRender(e){let t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Xr),this.material.uniforms.resolution.value.set(Xr.z,Xr.w))}}class Xg extends Xe{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){let t=e.length-3,r=new Float32Array(2*t);for(let i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){let t=e.length-3,r=new Float32Array(2*t);for(let i=0;i<t;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}setFromPoints(e){let t=e.length-1,r=new Float32Array(6*t);for(let i=0;i<t;i++)r[6*i]=e[i].x,r[6*i+1]=e[i].y,r[6*i+2]=e[i].z||0,r[6*i+3]=e[i+1].x,r[6*i+4]=e[i+1].y,r[6*i+5]=e[i+1].z||0;return super.setPositions(r),this}fromLine(e){let t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Xy extends Xm{constructor(e=new Xg,t=new Xt({color:0xffffff*Math.random()})){super(e,t),this.isLine2=!0,this.type="Line2"}}class Xv extends aQ{constructor(e,t={}){const r=t.font;if(void 0===r)super();else{const i=r.generateShapes(e,t.size,t.direction);void 0===t.depth&&(t.depth=50),void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(i,t)}this.type="TextGeometry"}}function Xx(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function X_(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}function Xb(e,t,r,i,n,a,s){try{var o=e[a](s),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(i,n)}function XS(e,t,r){return t=XI(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e,XD()?Reflect.construct(t,r||[],XI(e).constructor):t.apply(e,r))}function XT(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function Xw(e,t){return e.get(X_(e,t))}function XM(e,t,r){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function XE(e,t,r){return e.set(X_(e,t),r),r}function XC(e,t,r){if(XD())return Reflect.construct.apply(null,arguments);var i=[null];return i.push.apply(i,t),new(e.bind.apply(e,i))}function XR(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,XG(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XN(e,t,r){return(t=XG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XP(){return(XP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var i=function(e,t){for(;!({}).hasOwnProperty.call(e,t)&&null!==(e=XI(e)););return e}(e,t);if(i){var n=Object.getOwnPropertyDescriptor(i,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(null,arguments)}function XI(e){return(XI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function XL(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xk(e,t)}function XD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(XD=function(){return!!e})()}function XB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function XF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XB(Object(r),!0).forEach(function(t){XN(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function XO(){var e,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",n=r.toStringTag||"@@toStringTag";function a(r,i,n,a){var l=Object.create((i&&i.prototype instanceof o?i:o).prototype);return XU(l,"_invoke",function(r,i,n){var a,o,l,u=0,c=n||[],h=!1,d={p:0,n:0,v:e,a:A,f:A.bind(e,4),d:function(t,r){return a=t,o=0,l=e,d.n=r,s}};function A(r,i){for(o=r,l=i,t=0;!h&&u&&!n&&t<c.length;t++){var n,a=c[t],A=d.p,p=a[2];r>3?(n=p===i)&&(l=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=e):a[0]<=A&&((n=r<2&&A<a[1])?(o=0,d.v=i,d.n=a[1]):A<p&&(n=r<3||a[0]>i||i>p)&&(a[4]=r,a[5]=i,d.n=p,o=0))}if(n||r>1)return s;throw h=!0,i}return function(n,c,p){if(u>1)throw TypeError("Generator is already running");for(h&&1===c&&A(c,p),o=c,l=p;(t=o<2?e:l)||!h;){a||(o?o<3?(o>1&&(d.n=-1),A(o,l)):d.n=l:d.v=l);try{if(u=2,a){if(o||(n="next"),t=a[n]){if(!(t=t.call(a,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,o<2&&(o=0)}else 1===o&&(t=a.return)&&t.call(a),o<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),o=1);a=e}else if((t=(h=d.n<0)?l:r.call(i,d))!==s)break}catch(t){a=e,o=1,l=t}finally{u=1}}return{value:t,done:h}}}(r,n,a),!0),l}var s={};function o(){}function l(){}function u(){}t=Object.getPrototypeOf;var c=u.prototype=o.prototype=Object.create([][i]?t(t([][i]())):(XU(t={},i,function(){return this}),t));function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,XU(e,n,"GeneratorFunction")),e.prototype=Object.create(c),e}return l.prototype=u,XU(c,"constructor",u),XU(u,"constructor",l),l.displayName="GeneratorFunction",XU(u,n,"GeneratorFunction"),XU(c),XU(c,n,"Generator"),XU(c,i,function(){return this}),XU(c,"toString",function(){return"[object Generator]"}),(XO=function(){return{w:a,m:h}})()}function XU(e,t,r,i){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}(XU=function(e,t,r,i){function a(t,r){XU(e,t,function(e){return this._invoke(t,r,e)})}t?n?n(e,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):e[t]=r:(a("next",0),a("throw",1),a("return",2))})(e,t,r,i)}function Xk(e,t){return(Xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Xz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,s,o=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw n}}return o}}(e,t)||XH(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XV(e,t,r,i){var n=XP(XI(e.prototype),t,r);return"function"==typeof n?function(e){return n.apply(r,e)}:n}function Xq(e){return function(e){if(Array.isArray(e))return Xx(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||XH(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XG(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function XH(e,t){if(e){if("string"==typeof e)return Xx(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xx(e,t):void 0}}new e$,new tF,new tF,new e$,new e$;var Xj=function(e){e instanceof Array?e.forEach(Xj):(e.map&&e.map.dispose(),e.dispose())},XW=function(e){e.geometry&&e.geometry.dispose(),e.material&&Xj(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(XW)},XX=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),XW(t)}};function XQ(e,t){var r=new t;return{linkProp:function(t){return{default:r[t](),onChange:function(r,i){i[e][t](r)},triggerUpdate:!1}},linkMethod:function(t){return function(r){for(var i=r[e],n=arguments.length,a=Array(n>1?n-1:0),s=1;s<n;s++)a[s-1]=arguments[s];var o=i[t].apply(i,a);return o===i?this:o}}}}function X$(){return 100}function XY(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=(90-e)*Math.PI/180,n=(90-t)*Math.PI/180,a=100*(1+r),s=Math.sin(i);return{x:a*s*Math.cos(n),y:a*Math.cos(i),z:a*s*Math.sin(n)}}function XK(e){var t=e.x,r=e.y,i=e.z,n=Math.sqrt(t*t+r*r+i*i),a=Math.atan2(i,t);return{lat:90-180*Math.acos(r/n)/Math.PI,lng:90-180*a/Math.PI-360*(a<-Math.PI/2),altitude:n/100-1}}function XZ(e){return e*Math.PI/180}var XJ=window.THREE?window.THREE:{BackSide:1,BufferAttribute:rN,Color:ry,Mesh:r5,ShaderMaterial:ir},X0=function(e){function t(e){var r,i,n,a,s,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=o.color,u=o.size,c=o.coefficient,h=o.power,d=o.hollowRadius,A=o.backside;XT(this,t),s=XS(this,t);var p=function(e,t){for(var r=e.clone(),i=new Float32Array(3*e.attributes.position.count),n=0,a=i.length;n<a;n++){var s=e.attributes.normal.array[n],o=e.attributes.position.array[n];i[n]=o+s*t}return r.setAttribute("position",new XJ.BufferAttribute(i,3)),r}(e,void 0===u?2:u),f=(r=void 0===c?.5:c,i=void 0===l?"gold":l,n=void 0===h?1:h,a=void 0===d?0:d,new XJ.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:"\nuniform float hollowRadius;\n\nvarying vec3 vVertexWorldPosition;\nvarying vec3 vVertexNormal;\nvarying float vCameraDistanceToObjCenter;\nvarying float vVertexAngularDistanceToHollowRadius;\n\nvoid main() {    \n  vVertexNormal	= normalize(normalMatrix * normal);\n  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\n  \n  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);\n  vCameraDistanceToObjCenter = length(objCenterViewPosition);\n  \n  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);\n  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));\n  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;\n\n  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"\nuniform vec3 color;\nuniform float coefficient;\nuniform float power;\nuniform float hollowRadius;\n\nvarying vec3 vVertexNormal;\nvarying vec3 vVertexWorldPosition;\nvarying float vCameraDistanceToObjCenter;\nvarying float vVertexAngularDistanceToHollowRadius;\n\nvoid main() {\n  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius\n  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius\n\n  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;\n  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;\n  viewCameraToVertex = normalize(viewCameraToVertex);\n  float intensity	= pow(\n    coefficient + dot(vVertexNormal, viewCameraToVertex),\n    power\n  );\n  gl_FragColor = vec4(color, intensity);\n}",uniforms:{coefficient:{value:r},color:{value:new XJ.Color(i)},power:{value:n},hollowRadius:{value:a}}}));return(void 0===A||A)&&(f.side=XJ.BackSide),s.geometry=p,s.material=f,s}return XL(t,e),XR(t)}(XJ.Mesh),X1=window.THREE?window.THREE:{Color:ry,Group:id,LineBasicMaterial:nC,LineSegments:nz,Mesh:r5,MeshPhongMaterial:sn,SphereGeometry:a2,SRGBColorSpace:ep,TextureLoader:sH},X2=hf({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeCurvatureResolution:{default:4},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return void 0!==t?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},globeTileEngineClearCache:function(e){e.tileEngine.clearTiles()},_destructor:function(e){XX(e.globeObj),XX(e.tileEngine),XX(e.graticulesObj)}},stateInit:function(){var e=new X1.MeshPhongMaterial({color:0}),t=new X1.Mesh(void 0,e);t.rotation.y=-Math.PI/2;var r=new px(100),i=new X1.Group;return i.__globeObjType="globe",i.add(t),i.add(r),{globeGroup:i,globeObj:t,graticulesObj:new X1.LineSegments(new p3((function(){var e,t,r,i,n,a,s,o,l,u,c,h,d=10,A=10,p=90,f=360,m=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return p6(d2(i/p)*p,r,p).map(c).concat(p6(d2(o/f)*f,s,f).map(h)).concat(p6(d2(t/d)*d,e,d).filter(function(e){return dZ(e%p)>1e-6}).map(l)).concat(p6(d2(a/A)*A,n,A).filter(function(e){return dZ(e%f)>1e-6}).map(u))}return g.lines=function(){return y().map(function(e){return{type:"LineString",coordinates:e}})},g.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(h(s).slice(1),c(r).reverse().slice(1),h(o).reverse().slice(1))]}},g.extent=function(e){return arguments.length?g.extentMajor(e).extentMinor(e):g.extentMinor()},g.extentMajor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],o=+e[0][1],s=+e[1][1],i>r&&(e=i,i=r,r=e),o>s&&(e=o,o=s,s=e),g.precision(m)):[[i,o],[r,s]]},g.extentMinor=function(r){return arguments.length?(t=+r[0][0],e=+r[1][0],a=+r[0][1],n=+r[1][1],t>e&&(r=t,t=e,e=r),a>n&&(r=a,a=n,n=r),g.precision(m)):[[t,a],[e,n]]},g.step=function(e){return arguments.length?g.stepMajor(e).stepMinor(e):g.stepMinor()},g.stepMajor=function(e){return arguments.length?(p=+e[0],f=+e[1],g):[p,f]},g.stepMinor=function(e){return arguments.length?(d=+e[0],A=+e[1],g):[d,A]},g.precision=function(d){return arguments.length?(m=+d,l=p7(a,n,90),u=p9(t,e,m),c=p7(o,s,90),h=p9(i,r,m),g):m},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])})()(),100,2),new X1.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1})),defaultGlobeMaterial:e,tileEngine:r}},init:function(e,t){XX(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var r=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeCurvatureResolution")){null==(i=e.globeObj.geometry)||i.dispose();var i,n=Math.max(4,Math.round(360/e.globeCurvatureResolution));e.globeObj.geometry=new X1.SphereGeometry(100,n,n/2),e.tileEngine.curvatureResolution=e.globeCurvatureResolution}if(t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new X1.TextureLoader().load(e.globeImageUrl,function(t){t.colorSpace=X1.SRGBColorSpace,r.map=t,r.color=null,r.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):r.color||(r.color=new X1.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new X1.TextureLoader().load(e.bumpImageUrl,function(e){r.bumpMap=e,r.needsUpdate=!0}):(r.bumpMap=null,r.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),XX(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var a=e.atmosphereObj=new X0(e.globeObj.geometry,{color:e.atmosphereColor,size:100*e.atmosphereAltitude,hollowRadius:100,coefficient:.1,power:3.5});a.visible=!!e.showAtmosphere,a.__globeObjType="atmosphere",e.scene.add(a)}e.ready||e.globeImageUrl&&!e.globeTileEngineUrl||(e.ready=!0,e.onReady())}}),X3=function(e){return isNaN(e)?parseInt(fy(e).toHex(),16):e},X4=function(e){return e&&isNaN(e)?h8(e).opacity:1},X5=function(e){var t,r=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1,a=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(a){var s=Xz(a.slice(1),4),o=s[0],l=s[1],u=s[2],c=s[3];t=new ry("rgb(".concat(+o,",").concat(+l,",").concat(+u,")")),n=Math.min(+c,1)}else t=new ry(e);i&&t.convertLinearToSRGB();var h=t.toArray();return r?[].concat(Xq(h),[n]):h},X8=window.THREE?window.THREE:{BufferAttribute:rN};function X6(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float32Array;if(1===t)return new X8.BufferAttribute(new r(e),t);for(var i=new X8.BufferAttribute(new r(e.length*t),t),n=0,a=e.length;n<a;n++)i.set(e[n],n*t);return i}var X7=new WeakMap,X9=new WeakMap,Qe=new WeakMap,Qt=function(e){function t(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.dataBindAttr,a=i.objBindAttr,s=i.removeDelay;return XT(this,t),XN(r=XS(this,t),"scene",void 0),XM(r,X7,void 0),XM(r,X9,void 0),XM(r,Qe,void 0),r.scene=e,XE(X7,r,void 0===n?"__data":n),XE(X9,r,void 0===a?"__threeObj":a),XE(Qe,r,void 0===s?0:s),r.onRemoveObj(function(){}),r}return XL(t,e),XR(t,[{key:"onCreateObj",value:function(e){var r=this;return XV(t,"onCreateObj",this)([function(t){var i=e(t);return t[Xw(X9,r)]=i,i[Xw(X7,r)]=t,r.scene.add(i),i}]),this}},{key:"onRemoveObj",value:function(e){var r=this;return XV(t,"onRemoveObj",this)([function(i,n){var a=XV(t,"getData",r)([i]);e(i,n);var s=function(){r.scene.remove(i),XX(i),delete a[Xw(X9,r)]};Xw(Qe,r)?setTimeout(s,Xw(Qe,r)):s()}]),this}}])}(f4),Qr=window.THREE?window.THREE:{BufferGeometry:rX,CylinderGeometry:n8,Matrix4:tF,Mesh:r5,MeshLambertMaterial:so,Object3D:t9,Vector3:e$},Qi=Object.assign({},fA),Qn=Qi.BufferGeometryUtils||Qi,Qa=hf({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var r=fp(e.pointLat),i=fp(e.pointLng),n=fp(e.pointAltitude),a=fp(e.pointRadius),s=fp(e.pointColor),o=new Qr.CylinderGeometry(1,1,1,e.pointResolution);o.applyMatrix4(new Qr.Matrix4().makeRotationX(Math.PI/2)),o.applyMatrix4(new Qr.Matrix4().makeTranslation(0,0,-.5));var l=2*Math.PI*100/360,u={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&XX(e.scene),e.dataMapper.scene=e.pointsMerge?new Qr.Object3D:e.scene,e.dataMapper.onCreateObj(function(){var e=new Qr.Mesh(o);return e.__globeObjType="point",e}).onUpdateObj(function(t,o){var c=function(r){var i=t.__currentTargetD=r,n=i.r,a=i.alt,s=i.lat,o=i.lng;Object.assign(t.position,XY(s,o));var u=e.pointsMerge?new Qr.Vector3(0,0,0):e.scene.localToWorld(new Qr.Vector3(0,0,0));t.lookAt(u),t.scale.x=t.scale.y=Math.min(30,n)*l,t.scale.z=Math.max(100*a,.1)},h={alt:+n(o),r:+a(o),lat:+r(o),lng:+i(o)},d=t.__currentTargetD||Object.assign({},h,{alt:-.001});if(Object.keys(h).some(function(e){return d[e]!==h[e]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?c(h):e.tweenGroup.add(new hb(d).to(h,e.pointsTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(c).start())),!e.pointsMerge){var A=s(o),p=A?X4(A):0,f=!!p;t.visible=f,f&&(u.hasOwnProperty(A)||(u[A]=new Qr.MeshLambertMaterial({color:X3(A),transparent:p<1,opacity:p})),t.material=u[A])}}).digest(e.pointsData),e.pointsMerge){var c=e.pointsData.length?(Qn.mergeGeometries||Qn.mergeBufferGeometries)(e.pointsData.map(function(t){var r=e.dataMapper.getObj(t),i=r.geometry.clone();r.updateMatrix(),i.applyMatrix4(r.matrix);var n=X5(s(t));return i.setAttribute("color",X6(Array(i.getAttribute("position").count).fill(n),4)),i})):new Qr.BufferGeometry,h=new Qr.Mesh(c,new Qr.MeshLambertMaterial({color:0xffffff,transparent:!0,vertexColors:!0}));h.__globeObjType="points",h.__data=e.pointsData,e.dataMapper.clear(),XX(e.scene),e.scene.add(h)}}}),Qs=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:"\n    ".concat(lk.common,"\n    ").concat(lk.logdepthbuf_pars_vertex,"\n  \n    uniform float dashTranslate; \n\n    attribute vec4 color;\n    varying vec4 vColor;\n    \n    attribute float relDistance;\n    varying float vRelDistance;\n\n    void main() {\n      // pass through colors and distances\n      vColor = color;\n      vRelDistance = relDistance + dashTranslate;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  \n      ").concat(lk.logdepthbuf_vertex,"\n    }\n  "),fragmentShader:"\n    ".concat(lk.logdepthbuf_pars_fragment,"\n\n    uniform float dashOffset; \n    uniform float dashSize;\n    uniform float gapSize; \n    \n    varying vec4 vColor;\n    varying float vRelDistance;\n    \n    void main() {\n      // ignore pixels in the gap\n      if (vRelDistance < dashOffset) discard;\n      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;\n    \n      // set px color: [r, g, b, a], interpolated between vertices \n      gl_FragColor = vColor; \n  \n      ").concat(lk.logdepthbuf_fragment,"\n    }\n  ")}},Qo=function(e){return e.uniforms.uSurfaceRadius={type:"float",value:0},e.vertexShader=("attribute float surfaceRadius;\nvarying float vSurfaceRadius;\nvarying vec3 vPos;\n"+e.vertexShader).replace("void main() {","void main() {\nvSurfaceRadius = surfaceRadius;\nvPos = position;"),e.fragmentShader=("uniform float uSurfaceRadius;\nvarying float vSurfaceRadius;\nvarying vec3 vPos;\n"+e.fragmentShader).replace("void main() {","void main() {\nif (length(vPos) < max(uSurfaceRadius, vSurfaceRadius)) discard;"),e},Ql=function(e){return e.vertexShader="\n    attribute float r;\n    \n    const float PI = 3.1415926535897932384626433832795;\n    float toRad(in float a) {\n      return a * PI / 180.0;\n    }\n    \n    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]\n      float phi = toRad(90.0 - c.x);\n      float theta = toRad(90.0 - c.y);\n      float r = c.z;\n      return vec3( // x,y,z\n        r * sin(phi) * cos(theta),\n        r * cos(phi),\n        r * sin(phi) * sin(theta)\n      );\n    }\n    \n    vec2 Cartesian2Polar(in vec3 p) {\n      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);\n      float phi = acos(p.y / r);\n      float theta = atan(p.z, p.x);\n      return vec2( // lat,lng\n        90.0 - phi * 180.0 / PI,\n        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)\n      );\n    }\n    ".concat(e.vertexShader.replace("}","                  \n        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n      }\n    "),"\n  "),e},Qu=function(e,t){return e.onBeforeCompile=function(r){e.userData.shader=t(r)},e},Qc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};if(e.userData.shader)t(e.userData.shader.uniforms);else{var r=e.onBeforeCompile;e.onBeforeCompile=function(e){r(e),t(e.uniforms)}}},Qh=["stroke"],Qd=window.THREE?window.THREE:{BufferGeometry:rX,CubicBezierCurve3:ay,Curve:aa,Group:id,Line:nF,Mesh:r5,NormalBlending:1,ShaderMaterial:ir,TubeGeometry:a8,Vector3:e$},QA=f5.default.default||f5.default,Qp=hf({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcStartAltitude:{default:0},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcEndAltitude:{default:0},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;null==(t=e.ticker)||t.pause()},resumeAnimation:function(e){var t;null==(t=e.ticker)||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),null==(t=e.ticker)||t.dispose()}},stateInit:function(e){return{tweenGroup:e.tweenGroup,ticker:new QA,sharedMaterial:new Qd.ShaderMaterial(XF(XF({},Qs()),{},{transparent:!0,blending:Qd.NormalBlending}))}},init:function(e,t){XX(e),t.scene=e,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var e=new Qd.Group;return e.__globeObjType="arc",e}),t.ticker.onTick.add(function(e,r){t.dataMapper.entries().map(function(e){return Xz(e,2)[1]}).filter(function(e){return e.children.length&&e.children[0].material&&e.children[0].__dashAnimateStep}).forEach(function(e){var t=e.children[0],i=t.__dashAnimateStep*r,n=t.material.uniforms.dashTranslate.value%1e9;t.material.uniforms.dashTranslate.value=n+i})})},update:function(e){var t=fp(e.arcStartLat),r=fp(e.arcStartLng),i=fp(e.arcStartAltitude),n=fp(e.arcEndLat),a=fp(e.arcEndLng),s=fp(e.arcEndAltitude),o=fp(e.arcAltitude),l=fp(e.arcAltitudeAutoScale),u=fp(e.arcStroke),c=fp(e.arcColor),h=fp(e.arcDashLength),d=fp(e.arcDashGap),A=fp(e.arcDashInitialGap),p=fp(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(f,m){var g=u(m),y=null!=g;if(!f.children.length||y!==("Mesh"===f.children[0].type)){XX(f);var v=y?new Qd.Mesh:new Qd.Line(new Qd.BufferGeometry);v.material=e.sharedMaterial.clone(),f.add(v)}var x=f.children[0];Object.assign(x.material.uniforms,{dashSize:{value:h(m)},gapSize:{value:d(m)},dashOffset:{value:A(m)}});var _=p(m);x.__dashAnimateStep=_>0?1e3/_:0;var b=function(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(e instanceof Array||e instanceof Function){var n=e instanceof Array?dj().domain(e.map(function(t,r){return r/(e.length-1)})).range(e):e;r=function(e){return X5(n(e),!0,!0)}}else{var a=X5(e,!0,!0);r=function(){return a}}for(var s=[],o=0,l=t+1;o<l;o++)for(var u=r(o/(l-1)),c=0;c<i;c++)s.push(u);return X6(s,4)}(c(m),e.arcCurveResolution,y?e.arcCircularResolution+1:1),S=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],n=0,a=e+1;n<a;n++)for(var s=n/(a-1),o=0;o<t;o++)i.push(s);return r&&i.reverse(),X6(i,1)}(e.arcCurveResolution,y?e.arcCircularResolution+1:1,!0);x.geometry.setAttribute("color",b),x.geometry.setAttribute("relDistance",S);var T=function(t){var r=f.__currentTargetD=t,i=r.stroke,n=function(e){var t=e.alt,r=e.altAutoScale,i=e.startLat,n=e.startLng,a=e.startAlt,s=e.endLat,o=e.endLng,l=e.endAlt,u=function(e){var t=Xz(e,3),r=t[0],i=XY(t[1],r,t[2]),n=i.x,a=i.y,s=i.z;return new Qd.Vector3(n,a,s)},c=[n,i],h=[o,s],d=t;if(null==d&&(d=pW(c,h)/2*r+Math.max(a,l)),!d&&!a&&!l)return(function(e,t){var r=e.angleTo(t),i=0===r?function(){return e.clone()}:function(i){return new Qd.Vector3().addVectors(e.clone().multiplyScalar(Math.sin((1-i)*r)),t.clone().multiplyScalar(Math.sin(i*r))).divideScalar(Math.sin(r))},n=new Qd.Curve;return n.getPoint=i,n}).apply(void 0,Xq([[].concat(c,[.001]),[].concat(h,[.001])].map(u)));var A=pX(c,h),p=Xz([.25,.75].map(function(e){var t,r;return[].concat(Xq(A(e)),[(t=e<.5?a:l,(r=d)+(r-t)*(t<r?.5:.25))])}),2),f=p[0],m=p[1];return XC(Qd.CubicBezierCurve3,Xq([[].concat(c,[a]),f,m,[].concat(h,[l])].map(u)))}(function(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(r,Qh));y?(x.geometry&&x.geometry.dispose(),x.geometry=new Qd.TubeGeometry(n,e.arcCurveResolution,i/2,e.arcCircularResolution),x.geometry.setAttribute("color",b),x.geometry.setAttribute("relDistance",S)):x.geometry.setFromPoints(n.getPoints(e.arcCurveResolution))},w={stroke:g,alt:o(m),altAutoScale:+l(m),startLat:+t(m),startLng:+r(m),startAlt:+i(m),endLat:+n(m),endLng:+a(m),endAlt:+s(m)},M=f.__currentTargetD||Object.assign({},w,{altAutoScale:-.001});Object.keys(w).some(function(e){return M[e]!==w[e]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?T(w):e.tweenGroup.add(new hb(M).to(w,e.arcsTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(T).start()))}).digest(e.arcsData)}}),Qf=window.THREE?window.THREE:{BufferGeometry:rX,DoubleSide:2,Mesh:r5,MeshLambertMaterial:so,Object3D:t9},Qm=Object.assign({},fA),Qg=Qm.BufferGeometryUtils||Qm,Qy=hf({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){return .01*e.sumWeight}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var r=fp(e.hexBinPointLat),i=fp(e.hexBinPointLng),n=fp(e.hexBinPointWeight),a=fp(e.hexAltitude),s=fp(e.hexTopColor),o=fp(e.hexSideColor),l=fp(e.hexMargin),u=Object.entries(gJ(e.hexBinPointsData.map(function(t){return XF(XF({},t),{},{h3Idx:function(e,t,r){var i=g0._malloc(ye);g0.HEAPF64.set([e,t].map(ym),i/8);var n=g0._malloc(g9);try{g6(g7.latLngToCell(i,r,n));var a=yu(n);if(!a)throw g8(1002);return a}finally{g0._free(n),g0._free(i)}}(r(t),i(t),e.hexBinResolution)})}),"h3Idx")).map(function(e){var t=Xz(e,2),r=t[0],i=t[1];return{h3Idx:r,points:i,sumWeight:i.reduce(function(e,t){return e+ +n(t)},0)}}),c={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&XX(e.scene),e.dataMapper.scene=e.hexBinMerge?new Qf.Object3D:e.scene,e.dataMapper.id(function(e){return e.h3Idx}).onCreateObj(function(e){var t=new Qf.Mesh;t.__hexCenter=yA(e.h3Idx),t.__hexGeoJson=yp(e.h3Idx,!0).reverse();var r=t.__hexCenter[1];return t.__hexGeoJson.forEach(function(e){var t=e[0];Math.abs(r-t)>170&&(e[0]+=r>t?360:-360)}),t.__globeObjType="hexbin",t}).onUpdateObj(function(t,r){var i=Math.max(0,Math.min(1,+l(r))),n=Xz(t.__hexCenter,2),u=n[0],h=n[1],d=0===i?t.__hexGeoJson:t.__hexGeoJson.map(function(e){var t=Xz(e,2);return[[t[0],h],[t[1],u]].map(function(e){var t=Xz(e,2),r=t[0];return r-(r-t[1])*i})}),A=e.hexTopCurvatureResolution;t.geometry&&t.geometry.dispose(),t.geometry=new g$([d],0,100,!1,!0,!0,A);var p={alt:+a(r)},f=function(e){var r=(t.__currentTargetD=e).alt;t.scale.x=t.scale.y=t.scale.z=1+r,t.geometry.setAttribute("surfaceRadius",X6(Array(t.geometry.getAttribute("position").count).fill(100/(r+1)),1))},m=t.__currentTargetD||Object.assign({},p,{alt:-.001});if(Object.keys(p).some(function(e){return m[e]!==p[e]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?f(p):e.tweenGroup.add(new hb(m).to(p,e.hexTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(f).start())),!e.hexBinMerge){var g=o(r),y=s(r);[g,y].forEach(function(e){if(!c.hasOwnProperty(e)){var t=X4(e);c[e]=Qu(new Qf.MeshLambertMaterial({color:X3(e),transparent:t<1,opacity:t,side:Qf.DoubleSide}),Qo)}}),t.material=[g,y].map(function(e){return c[e]})}}).digest(u),e.hexBinMerge){var h=u.length?(Qg.mergeGeometries||Qg.mergeBufferGeometries)(u.map(function(t){var r=e.dataMapper.getObj(t),i=r.geometry.toNonIndexed();r.updateMatrix(),i.applyMatrix4(r.matrix);var n=X5(s(t)),a=X5(o(t)),l=i.getAttribute("position").count,u=i.groups[0].count;return i.setAttribute("color",X6(Xq(Array(l)).map(function(e,t){return t>=u?n:a}),4)),i})):new Qf.BufferGeometry,d=new Qf.MeshLambertMaterial({color:0xffffff,transparent:!0,vertexColors:!0,side:Qf.DoubleSide});d.onBeforeCompile=function(e){d.userData.shader=Qo(e)};var A=new Qf.Mesh(h,d);A.__globeObjType="hexBinPoints",A.__data=u,e.dataMapper.clear(),XX(e.scene),e.scene.add(A)}}}),Qv=function(e){return e*e},Qx=function(e){return e*Math.PI/180},Q_=Math.sqrt(2*Math.PI),Qb=function(e){var t=Xz(e,2),r=t[0],i=t[1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=a.lngAccessor,o=void 0===s?function(e){return e[0]}:s,l=a.latAccessor,u=void 0===l?function(e){return e[1]}:l,c=a.weightAccessor,h=void 0===c?function(){return 1}:c,d=a.bandwidth,A=[r,i],p=d*Math.PI/180;return function(e,t){let r=0;for(let t of e)(t*=1)&&(r+=t);return r}(n.map(function(e){var t,r,i,n,a,s,l,c,d=h(e);if(!d)return 0;var f=(t=[o(e),u(e)],r=Math.sqrt,i=Math.cos,n=function(e){return Qv(Math.sin(e/2))},a=Qx(A[1]),s=Qx(t[1]),l=Qx(A[0]),c=Qx(t[0]),2*Math.asin(r(n(s-a)+i(a)*i(s)*n(c-l))));return Math.exp(-Qv(f/p)/2)/(p*Q_)*d}))},QS=(E=XO().m(function e(t){var r,i,n,a,s,o,l,u,c,h,d,A,p,f,m,g,y,v,x,_,b,S,T,w,M,E,C,R,N,P,I,L,D,B,F,O,U,k,z,V=arguments;return XO().w(function(e){for(;;)switch(e.n){case 0:if(i=V.length>1&&void 0!==V[1]?V[1]:[],s=void 0===(a=(n=V.length>2&&void 0!==V[2]?V[2]:{}).lngAccessor)?function(e){return e[0]}:a,l=void 0===(o=n.latAccessor)?function(e){return e[1]}:o,c=void 0===(u=n.weightAccessor)?function(){return 1}:u,h=n.bandwidth,null!=(r=navigator)&&r.gpu){e.n=1;break}return console.warn("WebGPU not enabled in browser. Please consider enabling it to improve performance."),e.a(2,t.map(function(e){return Qb(e,i,{lngAccessor:s,latAccessor:l,weightAccessor:c,bandwidth:h})}));case 1:return d=W6.Fn,A=W6.If,p=W6.uniform,f=W6.storage,m=W6.float,g=W6.instanceIndex,y=W6.Loop,v=W6.sqrt,x=W6.sin,_=W6.cos,b=W6.asin,S=W6.exp,T=W6.negate,w=f(new Ni(new Float32Array(t.flat().map(Qx)),2),"vec2",t.length),M=f(new Ni(new Float32Array(i.map(function(e){return[Qx(s(e)),Qx(l(e)),c(e)]}).flat()),3),"vec3",i.length),C=f(E=new Ni(t.length,1),"float",t.length),R=v(m(Math.PI).mul(2)),N=function(e){return e.mul(e)},P=function(e){return N(x(e.div(2)))},I=function(e,t){var r=m(e[1]),i=m(t[1]),n=m(e[0]),a=m(t[0]);return m(2).mul(b(v(P(i.sub(r)).add(_(r).mul(_(i)).mul(P(a.sub(n)))))))},L=p(Qx(h)),D=p(Qx(4*h)),B=p(i.length),F=d(function(){var e=w.element(g),t=C.element(g);t.assign(0),y(B,function(r){var i=r.i,n=M.element(i),a=n.z;A(a,function(){var r=I(n.xy,e.xy);A(r&&r.lessThan(D),function(){t.addAssign(S(T(N(r.div(L)).div(2))).div(L.mul(R)).mul(a))})})})})().compute(t.length),O=new Ov,e.n=2,O.computeAsync(F);case 2:return U=Array,k=Float32Array,e.n=3,O.getArrayBufferAsync(E);case 3:return z=e.v,e.a(2,U.from.call(U,new k(z)))}},e)}),C=function(){var e=this,t=arguments;return new Promise(function(r,i){var n=E.apply(e,t);function a(e){Xb(n,r,i,a,s,"next",e)}function s(e){Xb(n,r,i,a,s,"throw",e)}a(void 0)})},function(e){return C.apply(this,arguments)}),QT=window.THREE?window.THREE:{Mesh:r5,MeshLambertMaterial:so,SphereGeometry:a2},Qw=function(e){var t,r=h8("rgb("+Math.max(0,Math.min(255,Math.round(34.61+(t=Math.max(0,Math.min(1,t=e)))*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")");return r.opacity=Math.cbrt(e),r.formatRgb()},QM=hf({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return Qw}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var e=new QT.Mesh(new QT.SphereGeometry(100),Qu(new QT.MeshLambertMaterial({vertexColors:!0,transparent:!0}),Ql));return e.__globeObjType="heatmap",e})},update:function(e){var t=fp(e.heatmapPoints),r=fp(e.heatmapPointLat),i=fp(e.heatmapPointLng),n=fp(e.heatmapPointWeight),a=fp(e.heatmapBandwidth),s=fp(e.heatmapColorFn),o=fp(e.heatmapColorSaturation),l=fp(e.heatmapBaseAltitude),u=fp(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(c,h){var d=a(h),A=s(h),p=o(h),f=l(h),m=u(h),g=t(h).map(function(e){var t=r(e),a=i(e),s=XY(t,a);return{x:s.x,y:s.y,z:s.z,lat:t,lng:a,weight:n(e)}}),y=Math.ceil(360/(Math.max(.1,d/3.5)||-1));c.geometry.parameters.widthSegments!==y&&(c.geometry.dispose(),c.geometry=new QT.SphereGeometry(100,y,y/2)),QS((function(e){for(var t=e.itemSize,r=[],i=0;i<e.count;i++)r.push(e.array.slice(i*t,(i+1)*t));return r})(c.geometry.getAttribute("position")).map(function(e){var t=Xz(e,3),r=XK({x:t[0],y:t[1],z:t[2]});return[r.lng,r.lat]}),g,{latAccessor:function(e){return e.lat},lngAccessor:function(e){return e.lng},weightAccessor:function(e){return e.weight},bandwidth:d}).then(function(t){var r=Xq(Array(100)).map(function(e,t){return X5(A(t/99))}),i=function(e){var t=c.__currentTargetD=e,i=t.kdeVals,n=t.topAlt,a=t.saturation,s=function(e,t){let r;for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);return r}(i.map(Math.abs))||1e-15,o=function e(){var t,r=0,i=1,n=1,a=[.5],s=[0,1];function o(e){return null!=e&&e<=e?s[hG(a,e,0,n)]:t}function l(){var e=-1;for(a=Array(n);++e<n;)a[e]=((e+1)*i-(e-n)*r)/(n+1);return o}return o.domain=function(e){return arguments.length?([r,i]=e,r*=1,i*=1,l()):[r,i]},o.range=function(e){return arguments.length?(n=(s=Array.from(e)).length-1,l()):s.slice()},o.invertExtent=function(e){var t=s.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,a[0]]:t>=n?[a[n-1],i]:[a[t-1],a[t]]},o.unknown=function(e){return arguments.length&&(t=e),o},o.thresholds=function(){return a.slice()},o.copy=function(){return e().domain([r,i]).range(s).unknown(t)},dL.apply(dH(o),arguments)}([0,s/a],r);c.geometry.setAttribute("color",X6(i.map(function(e){return o(Math.abs(e))}),4));var l=dj([0,s],[100*(1+f),100*(1+(n||f))]);c.geometry.setAttribute("r",X6(i.map(l)))},n={kdeVals:t,topAlt:m,saturation:p},a=c.__currentTargetD||Object.assign({},n,{kdeVals:t.map(function(){return 0}),topAlt:m?f:m,saturation:.5});a.kdeVals.length!==t.length&&(a.kdeVals=t.slice()),Object.keys(n).some(function(e){return a[e]!==n[e]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?i(n):e.tweenGroup.add(new hb(a).to(n,e.heatmapsTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(i).start()))})}).digest(e.heatmapsData)}}),QE=window.THREE?window.THREE:{DoubleSide:2,Group:id,LineBasicMaterial:nC,LineSegments:nz,Mesh:r5,MeshBasicMaterial:rb},QC=hf({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjPolygon"}).id(function(e){return e.id}).onCreateObj(function(){var e=new QE.Group;return e.__defaultSideMaterial=Qu(new QE.MeshBasicMaterial({side:QE.DoubleSide,depthWrite:!0}),Qo),e.__defaultCapMaterial=new QE.MeshBasicMaterial({side:QE.DoubleSide,depthWrite:!0}),e.add(new QE.Mesh(void 0,[e.__defaultSideMaterial,e.__defaultCapMaterial])),e.add(new QE.LineSegments(void 0,new QE.LineBasicMaterial)),e.__globeObjType="polygon",e})},update:function(e){var t=fp(e.polygonGeoJsonGeometry),r=fp(e.polygonAltitude),i=fp(e.polygonCapCurvatureResolution),n=fp(e.polygonCapColor),a=fp(e.polygonCapMaterial),s=fp(e.polygonSideColor),o=fp(e.polygonSideMaterial),l=fp(e.polygonStrokeColor),u=[];e.polygonsData.forEach(function(e){var c={data:e,capColor:n(e),capMaterial:a(e),sideColor:s(e),sideMaterial:o(e),strokeColor:l(e),altitude:+r(e),capCurvatureResolution:+i(e)},h=t(e),d=e.__id||"".concat(Math.round(1e9*Math.random()));e.__id=d,"Polygon"===h.type?u.push(XF({id:"".concat(d,"_0"),coords:h.coordinates},c)):"MultiPolygon"===h.type?u.push.apply(u,Xq(h.coordinates.map(function(e,t){return XF({id:"".concat(d,"_").concat(t),coords:e},c)}))):console.warn("Unsupported GeoJson geometry type: ".concat(h.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(t,r){var i=r.coords,n=r.capColor,a=r.capMaterial,s=r.sideColor,o=r.sideMaterial,l=r.strokeColor,u=r.altitude,c=r.capCurvatureResolution,h=Xz(t.children,2),d=h[0],A=h[1],p=!!l;A.visible=p;var f=!!(n||a),m=!!(s||o);!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return function(e,t){return e===t}};return Object.entries(t).every(function(t){var i=Xz(t,2),n=i[0],a=i[1];return e.hasOwnProperty(n)&&r(n)(e[n],a)})}(d.geometry.parameters||{},{polygonGeoJson:i,curvatureResolution:c,closedTop:f,includeSides:m})&&(d.geometry&&d.geometry.dispose(),d.geometry=new g$(i,0,100,!1,f,m,c)),p&&(!A.geometry.parameters||A.geometry.parameters.geoJson.coordinates!==i||A.geometry.parameters.resolution!==c)&&(A.geometry&&A.geometry.dispose(),A.geometry=new p3({type:"Polygon",coordinates:i},100,c));var g=m?0:-1,y=f?+!!m:-1;if(g>=0&&(d.material[g]=o||t.__defaultSideMaterial),y>=0&&(d.material[y]=a||t.__defaultCapMaterial),[[!o&&s,g],[!a&&n,y]].forEach(function(e){var t=Xz(e,2),r=t[0],i=t[1];if(r&&!(i<0)){var n=d.material[i],a=X4(r);n.color.set(X3(r)),n.transparent=a<1,n.opacity=a}}),p){var v=A.material,x=X4(l);v.color.set(X3(l)),v.transparent=x<1,v.opacity=x}var _={alt:u},b=function(e){var r=(t.__currentTargetD=e).alt;d.scale.x=d.scale.y=d.scale.z=1+r,p&&(A.scale.x=A.scale.y=A.scale.z=1+r+1e-4),Qc(t.__defaultSideMaterial,function(e){return e.uSurfaceRadius.value=100/(r+1)})},S=t.__currentTargetD||Object.assign({},_,{alt:-.001});Object.keys(_).some(function(e){return S[e]!==_[e]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||S.alt===_.alt?b(_):e.tweenGroup.add(new hb(S).to(_,e.polygonsTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(b).start()))}).digest(u)}}),QR=window.THREE?window.THREE:{BufferGeometry:rX,DoubleSide:2,Mesh:r5,MeshLambertMaterial:so,Vector3:e$},QN=Object.assign({},fA),QP=QN.BufferGeometryUtils||QN,QI=hf({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var e=new QR.Mesh(void 0,new QR.MeshLambertMaterial({side:QR.DoubleSide}));return e.__globeObjType="hexPolygon",e})},update:function(e){var t=fp(e.hexPolygonGeoJsonGeometry),r=fp(e.hexPolygonColor),i=fp(e.hexPolygonAltitude),n=fp(e.hexPolygonResolution),a=fp(e.hexPolygonMargin),s=fp(e.hexPolygonUseDots),o=fp(e.hexPolygonCurvatureResolution),l=fp(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(u,c){var h=t(c),d=n(c),A=i(c),p=Math.max(0,Math.min(1,+a(c))),f=s(c),m=o(c),g=l(c),y=r(c),v=X4(y);u.material.color.set(X3(y)),u.material.transparent=v<1,u.material.opacity=v;var x={alt:A,margin:p,curvatureResolution:m},_={geoJson:h,h3Res:d},b=u.__currentTargetD||Object.assign({},x,{alt:-.001}),S=u.__currentMemD||_;if(Object.keys(x).some(function(e){return b[e]!==x[e]})||Object.keys(_).some(function(e){return S[e]!==_[e]})){u.__currentMemD=_;var T=[];"Polygon"===h.type?yf(h.coordinates,d,!0).forEach(function(e){return T.push(e)}):"MultiPolygon"===h.type?h.coordinates.forEach(function(e){return yf(e,d,!0).forEach(function(e){return T.push(e)})}):console.warn("Unsupported GeoJson geometry type: ".concat(h.type,". Skipping geometry..."));var w=T.map(function(e){var t=yA(e),r=yp(e,!0).reverse(),i=t[1];return r.forEach(function(e){var t=e[0];Math.abs(i-t)>170&&(e[0]+=i>t?360:-360)}),{h3Idx:e,hexCenter:t,hexGeoJson:r}}),M=function(e){var t=u.__currentTargetD=e,r=t.alt,i=t.margin,n=t.curvatureResolution;u.geometry&&u.geometry.dispose(),u.geometry=w.length?(QP.mergeGeometries||QP.mergeBufferGeometries)(w.map(function(e){var t=Xz(e.hexCenter,2),a=t[0],s=t[1];if(!f)return new g$([0===i?e.hexGeoJson:e.hexGeoJson.map(function(e){var t=Xz(e,2);return[[t[0],s],[t[1],a]].map(function(e){var t=Xz(e,2),r=t[0];return r-(r-t[1])*i})})],100,100*(1+r),!1,!0,!1,n);var o=XY(a,s,r),l=XY(e.hexGeoJson[0][1],e.hexGeoJson[0][0],r),u=new n5(.85*(1-i)*new QR.Vector3(o.x,o.y,o.z).distanceTo(new QR.Vector3(l.x,l.y,l.z)),g);return u.rotateX(XZ(-a)),u.rotateY(XZ(s)),u.translate(o.x,o.y,o.z),u})):new QR.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?M(x):e.tweenGroup.add(new hb(b).to(x,e.hexPolygonsTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(M).start())}}).digest(e.hexPolygonsData)}}),QL=window.THREE?window.THREE:{Vector3:e$},QD=window.THREE?window.THREE:{BufferGeometry:rX,Color:ry,Group:id,Line:nF,NormalBlending:1,ShaderMaterial:ir,Vector3:e$},QB=f5.default.default||f5.default,QF=hf({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;null==(t=e.ticker)||t.pause()},resumeAnimation:function(e){var t;null==(t=e.ticker)||t.resume()},_destructor:function(e){var t;null==(t=e.ticker)||t.dispose()}},stateInit:function(e){return{tweenGroup:e.tweenGroup,ticker:new QB,sharedMaterial:new QD.ShaderMaterial(XF(XF({},Qs()),{},{transparent:!0,blending:QD.NormalBlending}))}},init:function(e,t){XX(e),t.scene=e,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var e=new QD.Group;return e.__globeObjType="path",e}),t.ticker.onTick.add(function(e,r){t.dataMapper.entries().map(function(e){return Xz(e,2)[1]}).filter(function(e){return e.children.length&&e.children[0].material&&e.children[0].__dashAnimateStep}).forEach(function(e){var t=e.children[0],i=t.__dashAnimateStep*r;if("Line"===t.type){var n=t.material.uniforms.dashTranslate.value%1e9;t.material.uniforms.dashTranslate.value=n+i}else if("Line2"===t.type){for(var a=t.material.dashOffset-i,s=t.material.dashSize+t.material.gapSize;a<=-s;)a+=s;t.material.dashOffset=a}})})},update:function(e){var t=fp(e.pathPoints),r=fp(e.pathPointLat),i=fp(e.pathPointLng),n=fp(e.pathPointAlt),a=fp(e.pathStroke),s=fp(e.pathColor),o=fp(e.pathDashLength),l=fp(e.pathDashGap),u=fp(e.pathDashInitialGap),c=fp(e.pathDashAnimateTime);function h(e,t){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(e instanceof Array||e instanceof Function){var a=e instanceof Array?dj().domain(e.map(function(t,r){return r/(e.length-1)})).range(e):e;r=function(e){return X5(a(e),n,!0)}}else{var s=X5(e,n,!0);r=function(){return s}}for(var o=[],l=0,u=t+1;l<u;l++)for(var c=r(l/(u-1)),h=0;h<i;h++)o.push(c);return X6(o,n?4:3)}e.dataMapper.onUpdateObj(function(d,A){var p,f,m,g,y=a(A),v=null!=y;if(!d.children.length||v===("Line"===d.children[0].type)){XX(d);var x=v?new Xy(new Xg,new Xt):new QD.Line(new QD.BufferGeometry,e.sharedMaterial.clone());d.add(x)}var _=d.children[0],b=(T=t(A),w=r,M=i,E=n,C=e.pathResolution,R=function(e,t,r){for(var i=[],n=1;n<=r;n++)i.push(e+(t-e)*n/(r+1));return i},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=[],i=null;return e.forEach(function(e){if(i){for(;Math.abs(i[1]-e[1])>180;)i[1]+=360*(i[1]<e[1]?1:-1);var n=Math.sqrt(Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2));if(n>t)for(var a=Math.floor(n/t),s=R(i[0],e[0],a),o=R(i[1],e[1],a),l=R(i[2],e[2],a),u=0,c=s.length;u<c;u++)r.push([s[u],o[u],l[u]])}r.push(i=e)}),r})(T.map(function(e){return[w(e),M(e),E(e)]}),C).map(function(e){var t=Xz(e,3),r=XY(t[0],t[1],t[2]),i=r.x,n=r.y,a=r.z;return new QD.Vector3(i,n,a)})),S=c(A);if(_.__dashAnimateStep=S>0?1e3/S:0,v){_.material.resolution=e.rendererSize;var T,w,M,E,C,R,N,P,I=o(A),L=l(A),D=u(A);_.material.dashed=L>0,_.material.dashed?_.material.defines.USE_DASH="":delete _.material.defines.USE_DASH,_.material.dashed&&(_.material.dashScale=1/(P=0,b.forEach(function(e){N&&(P+=N.distanceTo(e)),N=e}),P),_.material.dashSize=I,_.material.gapSize=L,_.material.dashOffset=-D);var B=s(A);if(B instanceof Array){var F=h(s(A),b.length-1,1,!1);_.geometry.setColors(F.array),_.material.vertexColors=!0}else{var O=X4(B);_.material.color=new QD.Color(X3(B)),_.material.transparent=O<1,_.material.opacity=O,_.material.vertexColors=!1}_.material.needsUpdate=!0}else{Object.assign(_.material.uniforms,{dashSize:{value:o(A)},gapSize:{value:l(A)},dashOffset:{value:u(A)}});var U=h(s(A),b.length),k=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[],n=0,a=e+1;n<a;n++)for(var s=n/(a-1),o=0;o<t;o++)i.push(s);return r&&i.reverse(),X6(i,1)}(b.length,1,!0);_.geometry.setAttribute("color",U),_.geometry.setAttribute("relDistance",k)}var z=(p=d.__currentTargetD&&d.__currentTargetD.points||[b[0]],f=function(e,t){var r=e[e.length-1];return[].concat(Xq(e),Xq(Array(t-e.length).fill(r)))},m=Math.max(p.length,b.length),g=dx.apply(void 0,Xq([p,b].map(function(e){return e.map(function(e){return[e.x,e.y,e.z]})}).map(function(e){return f(e,m)}))),function(e){return 0===e?p:1===e?b:g(e).map(function(e){var t=Xz(e,3),r=t[0],i=t[1],n=t[2];return new QL.Vector3(r,i,n)})}),V=function(e){var t,r=d.__currentTargetD=e,i=r.stroke,n=r.interpolK,a=d.__currentTargetD.points=z(n);v?(_.geometry.setPositions((t=[]).concat.apply(t,Xq(a.map(function(e){return[e.x,e.y,e.z]})))),_.material.linewidth=i,_.material.dashed&&_.computeLineDistances()):(_.geometry.setFromPoints(a),_.geometry.computeBoundingSphere())},q={stroke:y,interpolK:1},G=Object.assign({},d.__currentTargetD||q,{interpolK:0});Object.keys(q).some(function(e){return G[e]!==q[e]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?V(q):e.tweenGroup.add(new hb(G).to(q,e.pathTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(V).start()))}).digest(e.pathsData)}}),QO=window.THREE?window.THREE:{Euler:tW,Mesh:r5,MeshLambertMaterial:so,SphereGeometry:a2},QU=hf({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new QO.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var e=new QO.Mesh;return e.__globeObjType="tile",e})},update:function(e){var t=fp(e.tileLat),r=fp(e.tileLng),i=fp(e.tileAltitude),n=fp(e.tileWidth),a=fp(e.tileHeight),s=fp(e.tileUseGlobeProjection),o=fp(e.tileMaterial),l=fp(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(u,c){u.material=o(c);var h=s(c),d=l(c),A=function(e){var t=u.__currentTargetD=e,r=t.lat,i=t.lng,n=t.alt,a=t.width,s=t.height,o=Qk(i),l=Qk(-r);u.geometry&&u.geometry.dispose(),u.geometry=new QO.SphereGeometry(100*(1+n),Math.ceil(a/(d||-1)),Math.ceil(s/(d||-1)),Qk(90-a/2)+(h?o:0),Qk(a),Qk(90-s/2)+(h?l:0),Qk(s)),h||u.setRotationFromEuler(new QO.Euler(l,o,0,"YXZ"))},p={lat:+t(c),lng:+r(c),alt:+i(c),width:+n(c),height:+a(c)},f=u.__currentTargetD||Object.assign({},p,{width:0,height:0});Object.keys(p).some(function(e){return f[e]!==p[e]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?A(p):e.tweenGroup.add(new hb(f).to(p,e.tilesTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(A).start()))}).digest(e.tilesData)}}),Qk=function(e){return e*Math.PI/180},Qz=window.THREE?window.THREE:{BufferGeometry:rX,Color:ry,Points:nX,PointsMaterial:nq},QV=hf({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){XX(e),t.scene=e,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var e=new Qz.Points(new Qz.BufferGeometry,new Qz.PointsMaterial);return e.__globeObjType="particles",e}).onUpdateObj(function(e,r){var i=fp(t.particlesList),n=fp(t.particleLat),a=fp(t.particleLng),s=fp(t.particleAltitude);e.geometry.setAttribute("position",X6(i(r).map(function(e){return Object.values(XY(n(e),a(e),s(e)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(e){return t.hasOwnProperty(e)})&&e.dataMapper.digest(e.particlesData);var r=fp(e.particlesColor),i=fp(e.particlesSize),n=fp(e.particlesSizeAttenuation),a=fp(e.particlesTexture);e.dataMapper.entries().forEach(function(t){var s=Xz(t,2),o=s[0],l=s[1];if(l.material.size=i(o),l.material.sizeAttenuation=n(o),e.particlesTexture)l.material.color=new Qz.Color(0xffffff),l.material.transparent=!1,l.material.alphaTest=.5,l.material.map=a(o);else{var u=r(o),c=X4(u);l.material.color=new Qz.Color(X3(u)),l.material.transparent=c<1,l.material.opacity=c,l.material.alphaTest=0}})}}),Qq=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;XT(this,t),(e=XS(this,t)).type="CircleLineGeometry",e.parameters={radius:r,segmentCount:i};for(var n=[],a=0;a<=i;a++){var s=(a/i-.25)*Math.PI*2;n.push({x:Math.cos(s)*r,y:Math.sin(s)*r,z:0})}return e.setFromPoints(n),e}return XL(t,e),XR(t)}((window.THREE?window.THREE:{BufferGeometry:rX}).BufferGeometry),QG=window.THREE?window.THREE:{Color:ry,Group:id,Line:nF,LineBasicMaterial:nC,Vector3:e$},QH=f5.default.default||f5.default,Qj=hf({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;null==(t=e.ticker)||t.pause()},resumeAnimation:function(e){var t;null==(t=e.ticker)||t.resume()},_destructor:function(e){var t;null==(t=e.ticker)||t.dispose()}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var e=new QG.Group;return e.__globeObjType="ring",e}),t.ticker=new QH,t.ticker.onTick.add(function(e){if(t.ringsData.length){var r=fp(t.ringColor),i=fp(t.ringAltitude),n=fp(t.ringMaxRadius),a=fp(t.ringPropagationSpeed),s=fp(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(e){return Xz(e,2)[1]}).forEach(function(o){var l=Xz(o,2),u=l[0],c=l[1];if((c.__nextRingTime||0)<=e){var h,d,A,p=s(u)/1e3;c.__nextRingTime=e+(p<=0?1/0:p);var f=new QG.Line(new Qq(1,t.ringResolution),new QG.LineBasicMaterial),m=r(u),g=m instanceof Array||m instanceof Function;g?m instanceof Array?(A=dj().domain(m.map(function(e,t){return t/(m.length-1)})).range(m),f.material.transparent=m.some(function(e){return 1>X4(e)})):(A=m,f.material.transparent=!0):(f.material.color=new QG.Color(X3(m)),(h=f.material).opacity=d=X4(m),h.transparent=d<1,h.depthWrite=d>=1);var y=100*(1+i(u)),v=n(u),x=v*Math.PI/180,_=a(u),b=_<=0,S=function(e){var t=e.t,r=(b?1-t:t)*x;if(f.scale.x=f.scale.y=y*Math.sin(r),f.position.z=y*(1-Math.cos(r)),g){var i=A(t);f.material.color=new QG.Color(X3(i)),f.material.transparent&&(f.material.opacity=X4(i))}};if(0===_)S({t:0}),c.add(f);else{var T=1e3*Math.abs(v/_);t.tweenGroup.add(new hb({t:0}).to({t:1},T).onUpdate(S).onStart(function(){return c.add(f)}).onComplete(function(){c.remove(f),XW(f)}).start())}}})}})},update:function(e){var t=fp(e.ringLat),r=fp(e.ringLng),i=fp(e.ringAltitude),n=e.scene.localToWorld(new QG.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(e,a){var s=t(a),o=r(a),l=i(a);Object.assign(e.position,XY(s,o,l)),e.lookAt(n)}).digest(e.ringsData)}}),QW=XF(XF({},window.THREE?window.THREE:{BoxGeometry:r6,CircleGeometry:n5,DoubleSide:2,Group:id,Mesh:r5,MeshLambertMaterial:so,TextGeometry:Xv,Vector3:e$}),{},{Font:class{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100,r="ltr"){let i=[],n=function(e,t,r,i){let n=Array.from(e),a=t/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*a,o=[],l=0,u=0;("rtl"==i||"tb"==i)&&n.reverse();for(let e=0;e<n.length;e++){let t=n[e];if("\n"===t)l=0,u-=s;else{let e=function(e,t,r,i,n){let a,s,o,l,u,c,h,d,A=n.glyphs[e]||n.glyphs["?"];if(!A)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+n.familyName+".");let p=new lL;if(A.o){let e=A._cachedOutline||(A._cachedOutline=A.o.split(" "));for(let n=0,A=e.length;n<A;)switch(e[n++]){case"m":a=e[n++]*t+r,s=e[n++]*t+i,p.moveTo(a,s);break;case"l":a=e[n++]*t+r,s=e[n++]*t+i,p.lineTo(a,s);break;case"q":o=e[n++]*t+r,l=e[n++]*t+i,u=e[n++]*t+r,c=e[n++]*t+i,p.quadraticCurveTo(u,c,o,l);break;case"b":o=e[n++]*t+r,l=e[n++]*t+i,u=e[n++]*t+r,c=e[n++]*t+i,h=e[n++]*t+r,d=e[n++]*t+i,p.bezierCurveTo(u,c,h,d,o,l)}}return{offsetX:A.ha*t,path:p}}(t,a,l,u,r);"tb"==i?(l=0,u+=r.ascender*a):l+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data,r);for(let e=0,t=n.length;e<t;e++)i.push(...n[e].toShapes());return i}},TextGeometry:Xv}),QX=hf({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:.002},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:{glyphs:{0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"":{x_min:0,x_max:0,ha:853},:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:{yMin:-334,xMin:-111,yMax:1189,xMax:1672},resolution:1e3,original_font_information:{postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) agenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"agenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:'Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r\n\r\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r\n\r\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r\n\r\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r\n\r\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r\n\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.',manufacturer_name:"agenta ltd",font_sub_family_name:"Regular"},descender:-334,familyName:"Helvetiker",lineHeight:1522,underlineThickness:50},onChange:function(e,t){t.font=new QW.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i;var n=new QW.CircleGeometry(1,32);t.dataMapper=new Qt(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var e=new QW.MeshLambertMaterial;e.side=2;var t=new QW.Group;t.add(new QW.Mesh(n,e));var r=new QW.Mesh(void 0,e);t.add(r);var i=new QW.Mesh;return i.visible=!1,r.add(i),t.__globeObjType="label",t})},update:function(e){var t=fp(e.labelLat),r=fp(e.labelLng),i=fp(e.labelAltitude),n=fp(e.labelText),a=fp(e.labelSize),s=fp(e.labelRotation),o=fp(e.labelColor),l=fp(e.labelIncludeDot),u=fp(e.labelDotRadius),c=fp(e.labelDotOrientation),h=new Set(["right","top","bottom"]),d=2*Math.PI*100/360;e.dataMapper.onUpdateObj(function(A,p){var f=Xz(A.children,2),m=f[0],g=f[1],y=Xz(g.children,1)[0],v=o(p),x=X4(v);g.material.color.set(X3(v)),g.material.transparent=x<1,g.material.opacity=x;var _=l(p),b=c(p);!_||h.has(b)||(b="bottom");var S=_?u(p)*d:1e-12;m.scale.x=m.scale.y=S;var T=a(p)*d;if(g.geometry&&g.geometry.dispose(),g.geometry=new QW.TextGeometry(n(p),{font:e.font,size:T,depth:0,bevelEnabled:!0,bevelThickness:0,bevelSize:0,curveSegments:e.labelResolution}),y.geometry&&y.geometry.dispose(),g.geometry.computeBoundingBox(),y.geometry=XC(QW.BoxGeometry,Xq(new QW.Vector3().subVectors(g.geometry.boundingBox.max,g.geometry.boundingBox.min).clampScalar(0,1/0).toArray())),"right"!==b&&g.geometry.center(),_){var w=S+T/2;"right"===b&&(g.position.x=w),g.position.y=({right:-T/2,top:w+T/2,bottom:-w-T/2})[b]}var M=function(t){var r=A.__currentTargetD=t,i=r.lat,n=r.lng,a=r.alt,s=r.rot,o=r.scale;Object.assign(A.position,XY(i,n,a)),A.lookAt(e.scene.localToWorld(new QW.Vector3(0,0,0))),A.rotateY(Math.PI),A.rotateZ(-s*Math.PI/180),A.scale.x=A.scale.y=A.scale.z=o},E={lat:+t(p),lng:+r(p),alt:+i(p),rot:+s(p),scale:1},C=A.__currentTargetD||Object.assign({},E,{scale:1e-12});Object.keys(E).some(function(e){return C[e]!==E[e]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?M(E):e.tweenGroup.add(new hb(C).to(E,e.labelsTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(M).start()))}).digest(e.labelsData)}}),QQ=XF(XF({},window.THREE?window.THREE:{}),{},{CSS2DObject:class extends t9{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new eX(.5,.5),this.addEventListener("removed",function(){this.traverse(function(e){e.element&&e.element instanceof e.element.ownerDocument.defaultView.Element&&null!==e.element.parentNode&&e.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}}),Q$=hf({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlElementVisibilityModifier:{triggerUpdate:!1},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){e.dataMapper&&(t?[t]:e.dataMapper.entries().map(function(e){return Xz(e,2)[1]}).filter(function(e){return e})).forEach(function(t){var r=!e.isBehindGlobe||!e.isBehindGlobe(t.position);e.htmlElementVisibilityModifier?(t.visible=!0,e.htmlElementVisibilityModifier(t.element,r)):t.visible=r})}},init:function(e,t,r){var i=r.tweenGroup;XX(e),t.scene=e,t.tweenGroup=i,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(e){var r=fp(t.htmlElement)(e),i=new QQ.CSS2DObject(r);return i.__globeObjType="html",i})},update:function(e,t){var r=this,i=fp(e.htmlLat),n=fp(e.htmlLng),a=fp(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(t,s){var o=function(e){var i=t.__currentTargetD=e,n=i.alt,a=i.lat,s=i.lng;Object.assign(t.position,XY(a,s,n)),r.updateObjVisibility(t)},l={lat:+i(s),lng:+n(s),alt:+a(s)};e.htmlTransitionDuration&&!(e.htmlTransitionDuration<0)&&t.__currentTargetD?e.tweenGroup.add(new hb(t.__currentTargetD).to(l,e.htmlTransitionDuration).easing(hm.Quadratic.InOut).onUpdate(o).start()):o(l)}).digest(e.htmlElementsData)}}),QY=window.THREE?window.THREE:{Group:id,Mesh:r5,MeshLambertMaterial:so,SphereGeometry:a2},QK=hf({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new QY.Mesh(new QY.SphereGeometry(1,16,8),new QY.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){XX(e),t.scene=e,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(e){var r=fp(t.objectThreeObject)(e);t.objectThreeObject===r&&(r=r.clone());var i=new QY.Group;return i.add(r),i.__globeObjType="object",i})},update:function(e,t){var r=fp(e.objectLat),i=fp(e.objectLng),n=fp(e.objectAltitude),a=fp(e.objectFacesSurface),s=fp(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(e,t){var o=+r(t),l=+i(t),u=+n(t);Object.assign(e.position,XY(o,l,u)),a(t)?e.setRotationFromEuler(new tW(XZ(-o),XZ(l),0,"YXZ")):e.rotation.set(0,0,0);var c=e.children[0],h=s(t);h&&c.setRotationFromEuler(new tW(XZ(h.x||0),XZ(h.y||0),XZ(h.z||0)))}).digest(e.objectsData)}}),QZ=hf({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){XX(e),t.scene=e,t.dataMapper=new Qt(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(e){var r=fp(t.customThreeObject)(e,100);return r&&(t.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r})},update:function(e,t){e.customThreeObjectUpdate||XX(e.scene);var r=fp(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(e,t){return r(e,t,100)}).digest(e.customLayerData)}}),QJ=window.THREE?window.THREE:{Camera:ii,Group:id,Vector2:eX,Vector3:e$},Q0=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],Q1=XQ("globeLayer",X2),Q2=Object.assign.apply(Object,Xq(["globeImageUrl","bumpImageUrl","globeCurvatureResolution","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(e){return XN({},e,Q1.linkProp(e))}))),Q3=Object.assign.apply(Object,Xq(["globeMaterial","globeTileEngineClearCache"].map(function(e){return XN({},e,Q1.linkMethod(e))}))),Q4=XQ("pointsLayer",Qa),Q5=Object.assign.apply(Object,Xq(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(e){return XN({},e,Q4.linkProp(e))}))),Q8=XQ("arcsLayer",Qp),Q6=Object.assign.apply(Object,Xq(["arcsData","arcStartLat","arcStartLng","arcStartAltitude","arcEndLat","arcEndLng","arcEndAltitude","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(e){return XN({},e,Q8.linkProp(e))}))),Q7=XQ("hexBinLayer",Qy),Q9=Object.assign.apply(Object,Xq(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(e){return XN({},e,Q7.linkProp(e))}))),$e=XQ("heatmapsLayer",QM),$t=Object.assign.apply(Object,Xq(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(e){return XN({},e,$e.linkProp(e))}))),$r=XQ("hexedPolygonsLayer",QI),$i=Object.assign.apply(Object,Xq(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(e){return XN({},e,$r.linkProp(e))}))),$n=XQ("polygonsLayer",QC),$a=Object.assign.apply(Object,Xq(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(e){return XN({},e,$n.linkProp(e))}))),$s=XQ("pathsLayer",QF),$o=Object.assign.apply(Object,Xq(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(e){return XN({},e,$s.linkProp(e))}))),$l=XQ("tilesLayer",QU),$u=Object.assign.apply(Object,Xq(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(e){return XN({},e,$l.linkProp(e))}))),$c=XQ("particlesLayer",QV),$h=Object.assign.apply(Object,Xq(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(e){return XN({},e,$c.linkProp(e))}))),$d=XQ("ringsLayer",Qj),$A=Object.assign.apply(Object,Xq(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(e){return XN({},e,$d.linkProp(e))}))),$p=XQ("labelsLayer",QX),$f=Object.assign.apply(Object,Xq(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(e){return XN({},e,$p.linkProp(e))}))),$m=XQ("htmlElementsLayer",Q$),$g=Object.assign.apply(Object,Xq(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration"].map(function(e){return XN({},e,$m.linkProp(e))}))),$y=XQ("objectsLayer",QK),$v=Object.assign.apply(Object,Xq(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(e){return XN({},e,$y.linkProp(e))}))),$x=XQ("customLayer",QZ),$_=Object.assign.apply(Object,Xq(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(e){return XN({},e,$x.linkProp(e))}))),$b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(t){function i(){var t;XT(this,i);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return(t=XS(this,i,[].concat(a))).__kapsuleInstance=XC(e,[].concat(Xq(r?[t]:[]),a)),t}return XL(i,t),XR(i)}(t);return Object.keys(e()).forEach(function(e){return i.prototype[e]=function(){var t,r=(t=this.__kapsuleInstance)[e].apply(t,arguments);return r===this.__kapsuleInstance?this:r}}),i}(hf({props:XF(XF(XF(XF(XF(XF(XF(XF(XF(XF(XF(XF(XF(XF(XF({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new QJ.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},Q2),Q5),Q6),Q9),$t),$a),$i),$o),$u),$h),$A),$f),$g),$v),$_),methods:XF({getGlobeRadius:X$,getCoords:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return XY.apply(void 0,r)},toGeoCoords:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return XK.apply(void 0,r)},setPointOfView:function(e,t){var r,i,n,a,s=t instanceof QJ.Camera?t.position:t,o=X$(),l=void 0;e.scene&&s&&(l=function(t){void 0===r&&(r=s.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),void 0===i&&(i=r.length()),void 0===n&&(n=Math.sqrt(Math.pow(i,2)-Math.pow(o,2))),void 0===a&&(a=Math.acos(n/i));var l=r.distanceTo(t);if(l<n)return!1;var u=t.length();return Math.acos((Math.pow(i,2)+Math.pow(l,2)-Math.pow(u,2))/(2*i*l))<a}),e.layersThatNeedUpdatePov.forEach(function(e){return e.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(e){return e.isBehindGlobe(l)})},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(e){var t;return null==(t=e.pauseAnimation)?void 0:t.call(e)}),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),e.pausableLayers.forEach(function(e){var t;return null==(t=e.resumeAnimation)?void 0:t.call(e)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(e){return e._destructor()})}},Q3),stateInit:function(){var e=new hy,t={tweenGroup:e},r={globeLayer:X2(t),pointsLayer:Qa(t),arcsLayer:Qp(t),hexBinLayer:Qy(t),heatmapsLayer:QM(t),polygonsLayer:QC(t),hexedPolygonsLayer:QI(t),pathsLayer:QF(t),tilesLayer:QU(t),particlesLayer:QV(t),ringsLayer:Qj(t),labelsLayer:QX(t),htmlElementsLayer:Q$(t),objectsLayer:QK(t),customLayer:QZ(t)};return XF(XF({tweenGroup:e},r),{},{layersThatNeedUpdatePov:Object.values(r).filter(function(e){return e.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(r).filter(function(e){return e.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(r).filter(function(e){return e.hasOwnProperty("_destructor")}),pausableLayers:Object.values(r).filter(function(e){return e.hasOwnProperty("pauseAnimation")})})},init:function(e,t,r){var i=r.animateIn,n=void 0===i||i,a=r.waitForGlobeReady;XX(e),t.scene=e,t.scene.visible=!1,Q0.forEach(function(e){var r=new QJ.Group;t.scene.add(r),t[e](r)});var s=function(){if(n){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new hb({k:1e-6}).to({k:1},600).easing(hm.Quadratic.Out).onUpdate(function(e){var r=e.k;return t.scene.scale.set(r,r,r)}).start());var e=new QJ.Vector3(0,1,0);t.tweenGroup.add(new hb({rot:2*Math.PI}).to({rot:0},1200).easing(hm.Quintic.Out).onUpdate(function(r){var i=r.rot;return t.scene.setRotationFromAxisAngle(e,i)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};void 0===a||a?t.globeLayer.onReady(s):s(),this._animationCycle()},update:function(e){}}),(window.THREE?window.THREE:{Group:id}).Group,!0),$S=e.i(47167),$T=eu,$w=e.i(30224);let $M=e=>{let t,r=new Set,i=(e,i)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=i?i:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,a={setState:i,getState:n,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(i,n,a);return a},{useSyncExternalStoreWithSelector:$E}=$w.default,$C=(e,t)=>{let r=e?$M(e):$M,i=(e,i=t)=>(function(e,t=e=>e,r){let i=$E(e.subscribe,e.getState,e.getInitialState,t,r);return eu.default.useDebugValue(i),i})(r,e,i);return Object.assign(i,r),i},$R=[];function $N(e,t,r=(e,t)=>e===t){if(e===t)return!0;if(!e||!t)return!1;let i=e.length;if(t.length!==i)return!1;for(let n=0;n<i;n++)if(!r(e[n],t[n]))return!1;return!0}function $P(e,t=null,r=!1,i={}){for(let n of(null===t&&(t=[e]),$R))if($N(t,n.keys,n.equal)){if(r)return;if(Object.prototype.hasOwnProperty.call(n,"error"))throw n.error;if(Object.prototype.hasOwnProperty.call(n,"response"))return i.lifespan&&i.lifespan>0&&(n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(n.remove,i.lifespan)),n.response;if(!r)throw n.promise}let n={keys:t,equal:i.equal,remove:()=>{let e=$R.indexOf(n);-1!==e&&$R.splice(e,1)},promise:("object"==typeof e&&"function"==typeof e.then?e:e(...t)).then(e=>{n.response=e,i.lifespan&&i.lifespan>0&&(n.timeout=setTimeout(n.remove,i.lifespan))}).catch(e=>n.error=e)};if($R.push(n),!r)throw n.promise}var $I=e.i(89499),$L=eu;function $D(e,t,r){if(!e)return;if(!0===r(e))return e;let i=t?e.return:e.child;for(;i;){let e=$D(i,t,r);if(e)return e;i=t?null:i.sibling}}function $B(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}"undefined"!=typeof window&&((null==(R=window.document)?void 0:R.createElement)||(null==(N=window.navigator)?void 0:N.product)==="ReactNative")?$L.useLayoutEffect:$L.useEffect;let $F=$B($L.createContext(null));class $O extends $L.Component{render(){return $L.createElement($F.Provider,{value:this._reactInternals},this.props.children)}}function $U(){let e=$L.useContext($F);if(null===e)throw Error("its-fine: useFiber must be called within a <FiberProvider />!");let t=$L.useId();return $L.useMemo(()=>{for(let r of[e,null==e?void 0:e.alternate]){if(!r)continue;let e=$D(r,!1,e=>{let r=e.memoizedState;for(;r;){if(r.memoizedState===t)return!0;r=r.next}});if(e)return e}},[e,t])}let $k=Symbol.for("react.context"),$z=e=>null!==e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===$k;function $V(e){let t=e.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}$T.act;let $q=e=>null!=e&&("string"==typeof e||"number"==typeof e||e.isColor),$G="undefined"!=typeof window&&((null==(S=window.document)?void 0:S.createElement)||(null==(T=window.navigator)?void 0:T.product)==="ReactNative")?$T.useLayoutEffect:$T.useEffect;function $H(e){let t=$T.useRef(e);return $G(()=>void(t.current=e),[e]),t}function $j({set:e}){return $G(()=>(e(new Promise(()=>null)),()=>e(!1)),[e]),null}let $W=((w=class extends $T.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}).getDerivedStateFromError=()=>({error:!0}),w);function $X(e){var t;let r="undefined"!=typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],r),e[1]):e}function $Q(e){var t;return null==(t=e.__r3f)?void 0:t.root.getState()}let $$={obj:e=>e===Object(e)&&!$$.arr(e)&&"function"!=typeof e,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,boo:e=>"boolean"==typeof e,und:e=>void 0===e,nul:e=>null===e,arr:e=>Array.isArray(e),equ(e,t,{arrays:r="shallow",objects:i="reference",strict:n=!0}={}){let a;if(typeof e!=typeof t||!!e!=!!t)return!1;if($$.str(e)||$$.num(e)||$$.boo(e))return e===t;let s=$$.obj(e);if(s&&"reference"===i)return e===t;let o=$$.arr(e);if(o&&"reference"===r)return e===t;if((o||s)&&e===t)return!0;for(a in e)if(!(a in t))return!1;if(s&&"shallow"===r&&"shallow"===i){for(a in n?t:e)if(!$$.equ(e[a],t[a],{strict:n,objects:"reference"}))return!1}else for(a in n?t:e)if(e[a]!==t[a])return!1;if($$.und(a)){if(o&&0===e.length&&0===t.length||s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}},$Y=["children","key","ref"];function $K(e,t,r,i){let n=null==e?void 0:e.__r3f;return!n&&(n={root:t,type:r,parent:null,children:[],props:function(e){let t={};for(let r in e)$Y.includes(r)||(t[r]=e[r]);return t}(i),object:e,eventCount:0,handlers:{},isHidden:!1},e&&(e.__r3f=n)),n}function $Z(e,t){if(!t.includes("-")||t in e)return{root:e,key:t,target:e[t]};let r=e,i=t.split("-");for(let n of i){if("object"!=typeof r||null===r){if(void 0!==r)return{root:r,key:i.slice(i.indexOf(n)).join("-"),target:void 0};return{root:e,key:t,target:void 0}}t=n,e=r,r=r[t]}return{root:e,key:t,target:r}}let $J=/-\d+$/;function $0(e,t){if($$.str(t.props.attach)){if($J.test(t.props.attach)){let r=t.props.attach.replace($J,""),{root:i,key:n}=$Z(e.object,r);Array.isArray(i[n])||(i[n]=[])}let{root:r,key:i}=$Z(e.object,t.props.attach);t.previousAttach=r[i],r[i]=t.object}else $$.fun(t.props.attach)&&(t.previousAttach=t.props.attach(e.object,t.object))}function $1(e,t){if($$.str(t.props.attach)){let{root:r,key:i}=$Z(e.object,t.props.attach),n=t.previousAttach;void 0===n?delete r[i]:r[i]=n}else null==t.previousAttach||t.previousAttach(e.object,t.object);delete t.previousAttach}let $2=[...$Y,"args","dispose","attach","object","onUpdate","dispose"],$3=new Map,$4=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],$5=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function $8(e,t){var r,i;let n=e.__r3f,a=n&&$V(n).getState(),s=null==n?void 0:n.eventCount;for(let r in t){let s=t[r];if($2.includes(r))continue;if(n&&$5.test(r)){"function"==typeof s?n.handlers[r]=s:delete n.handlers[r],n.eventCount=Object.keys(n.handlers).length;continue}if(void 0===s)continue;let{root:o,key:l,target:u}=$Z(e,r);if(void 0===u&&("object"!=typeof o||null===o))throw Error(`R3F: Cannot set "${r}". Ensure it is an object before setting "${l}".`);u instanceof tX&&s instanceof tX?u.mask=s.mask:u instanceof ry&&$q(s)?u.set(s):null!==u&&"object"==typeof u&&"function"==typeof u.set&&"function"==typeof u.copy&&null!=s&&s.constructor&&u.constructor===s.constructor?u.copy(s):null!==u&&"object"==typeof u&&"function"==typeof u.set&&Array.isArray(s)?"function"==typeof u.fromArray?u.fromArray(s):u.set(...s):null!==u&&"object"==typeof u&&"function"==typeof u.set&&"number"==typeof s?"function"==typeof u.setScalar?u.setScalar(s):u.set(s):(o[l]=s,a&&!a.linear&&$4.includes(l)&&null!=(i=o[l])&&i.isTexture&&1023===o[l].format&&1009===o[l].type&&(o[l].colorSpace=ep))}if(null!=n&&n.parent&&null!=a&&a.internal&&null!=(r=n.object)&&r.isObject3D&&s!==n.eventCount){let e=n.object,t=a.internal.interaction.indexOf(e);t>-1&&a.internal.interaction.splice(t,1),n.eventCount&&null!==e.raycast&&a.internal.interaction.push(e)}return n&&void 0===n.props.attach&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&$6(n),e}function $6(e){var t;if(!e.parent)return;null==e.props.onUpdate||e.props.onUpdate(e.object);let r=null==(t=e.root)||null==t.getState?void 0:t.getState();r&&0===r.internal.frames&&r.invalidate()}let $7=e=>null==e?void 0:e.isObject3D;function $9(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Ye(e,t,r,i){let n=r.get(t);n&&(r.delete(t),0===r.size&&(e.delete(i),n.target.releasePointerCapture(i)))}let Yt=e=>!!(null!=e&&e.render),Yr=$T.createContext(null);function Yi(){let e=$T.useContext(Yr);if(!e)throw Error("R3F: Hooks can only be used within the Canvas component!");return e}function Yn(e=e=>e,t){return Yi()(e,t)}let Ya=new WeakMap;function Ys(e,t){return function(r,...i){var n;let a;return"function"==typeof r&&(null==r||null==(n=r.prototype)?void 0:n.constructor)===r?(a=Ya.get(r))||(a=new r,Ya.set(r,a)):a=r,e&&e(a),Promise.all(i.map(e=>new Promise((r,i)=>a.load(e,e=>{var t;let i;$7(null==e?void 0:e.scene)&&Object.assign(e,(t=e.scene,i={nodes:{},materials:{},meshes:{}},t&&t.traverse(e=>{e.name&&(i.nodes[e.name]=e),e.material&&!i.materials[e.material.name]&&(i.materials[e.material.name]=e.material),e.isMesh&&!i.meshes[e.name]&&(i.meshes[e.name]=e)}),i)),r(e)},t,t=>i(Error(`Could not load ${e}: ${null==t?void 0:t.message}`))))))}}function Yo(e,t,r,i){let n=Array.isArray(t)?t:[t],a=$P(Ys(r,i),[e,...n],!1,{equal:$$.equ});return Array.isArray(t)?a:a[0]}Yo.preload=function(e,t,r){let i,n=Array.isArray(t)?t:[t];$P(Ys(r),[e,...n],!0,i)},Yo.clear=function(e,t){var r=[e,...Array.isArray(t)?t:[t]];if(void 0===r||0===r.length)$R.splice(0,$R.length);else{let e=$R.find(e=>$N(r,e.keys,e.equal));e&&e.remove()}};var Yl={exports:{}},Yu={exports:{}};Yu.exports;let Yc=(eo||(eo=1,es||(es=1,Yu.exports=function(e){function t(e,t,r,i){return new iQ(e,t,r,i)}function r(){}function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do(4098&(t=e).flags)!=0&&(r=t.return),e=t.return;while(e)}return 3===t.tag?r:null}function a(e){if(n(e)!==e)throw Error(i(188))}function s(e){var t=e.alternate;if(!t){if(null===(t=n(e)))throw Error(i(188));return t!==e?null:e}for(var r=e,s=t;;){var o=r.return;if(null===o)break;var l=o.alternate;if(null===l){if(null!==(s=o.return)){r=s;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===r)return a(o),e;if(l===s)return a(o),t;l=l.sibling}throw Error(i(188))}if(r.return!==s.return)r=o,s=l;else{for(var u=!1,c=o.child;c;){if(c===r){u=!0,r=o,s=l;break}if(c===s){u=!0,s=o,r=l;break}c=c.sibling}if(!u){for(c=l.child;c;){if(c===r){u=!0,r=l,s=o;break}if(c===s){u=!0,s=l,r=o;break}c=c.sibling}if(!u)throw Error(i(189))}}if(r.alternate!==s)throw Error(i(190))}if(3!==r.tag)throw Error(i(188));return r.stateNode.current===r?e:t}function o(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=ny&&e[ny]||e["@@iterator"])?e:null}function l(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===nv?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ns:return"Fragment";case nl:return"Profiler";case no:return"StrictMode";case nd:return"Suspense";case nA:return"SuspenseList";case nm:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case na:return"Portal";case nc:return e.displayName||"Context";case nu:return(e._context.displayName||"Context")+".Consumer";case nh:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case np:return null!==(t=e.displayName||null)?t:l(e.type)||"Memo";case nf:t=e._payload,e=e._init;try{return l(e(t))}catch{}}return null}function u(e){return{current:e}}function c(e){0>sb||(e.current=s_[sb],s_[sb]=null,sb--)}function h(e,t){s_[++sb]=e.current,e.current=t}function d(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 0x1000000:case 0x2000000:return 0x3c00000&e;case 0x4000000:return 0x4000000;case 0x8000000:return 0x8000000;case 0x10000000:return 0x10000000;case 0x20000000:return 0x20000000;case 0x40000000:return 0;default:return e}}function A(e,t,r){var i=e.pendingLanes;if(0===i)return 0;var n=0,a=e.suspendedLanes,s=e.pingedLanes;e=e.warmLanes;var o=0x7ffffff&i;return 0!==o?0!=(i=o&~a)?n=d(i):0!=(s&=o)?n=d(s):r||0!=(r=o&~e)&&(n=d(r)):0!=(o=i&~a)?n=d(o):0!==s?n=d(s):r||0!=(r=i&~e)&&(n=d(r)),0===n?0:0!==t&&t!==n&&(t&a)==0&&((a=n&-n)>=(r=t&-t)||32===a&&(4194048&r)!=0)?t:n}function p(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)==0}function f(){var e=sR;return(0x3c00000&(sR<<=1))==0&&(sR=4194304),e}function m(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function g(e,t){e.pendingLanes|=t,0x10000000!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function y(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-sT(t);e.entangledLanes|=t,e.entanglements[i]=0x40000000|e.entanglements[i]|261930&r}function v(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-sT(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}function x(e,t){var r=t&-t;return((r=(42&r)!=0?1:_(r))&(e.suspendedLanes|t))!=0?0:r}function _(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 0x1000000:case 0x2000000:e=128;break;case 0x10000000:e=0x8000000;break;default:e=0}return e}function b(e){return 2<(e&=-e)?8<e?(0x7ffffff&e)!=0?32:0x10000000:8:2}function S(e){if("function"==typeof sk&&sz(e),sq&&"function"==typeof sq.setStrictMode)try{sq.setStrictMode(sV,e)}catch{}}function T(e){if(void 0===a6)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);a6=t&&t[1]||"",a7=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+a6+e+a7}function w(e,t){if(!e||sW)return"";sW=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(e){var i=e}Reflect.construct(e,[],r)}else{try{r.call()}catch(e){i=e}e.call(r.prototype)}}else{try{throw Error()}catch(e){i=e}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(e){if(e&&i&&"string"==typeof e.stack)return[e.stack,i.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),s=a[0],o=a[1];if(s&&o){var l=s.split(`
`),u=o.split(`
`);for(n=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;n<u.length&&!u[n].includes("DetermineComponentFrameRoot");)n++;if(i===l.length||n===u.length)for(i=l.length-1,n=u.length-1;1<=i&&0<=n&&l[i]!==u[n];)n--;for(;1<=i&&0<=n;i--,n--)if(l[i]!==u[n]){if(1!==i||1!==n)do if(i--,n--,0>n||l[i]!==u[n]){var c=`
`+l[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=n)break}}}finally{sW=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?T(r):""}function M(e){try{var t="",r=null;do t+=function(e,t){switch(e.tag){case 26:case 27:case 5:return T(e.type);case 16:return T("Lazy");case 13:return e.child!==t&&null!==t?T("Suspense Fallback"):T("Suspense");case 19:return T("SuspenseList");case 0:case 15:return w(e.type,!1);case 11:return w(e.type.render,!1);case 1:return w(e.type,!0);case 31:return T("Activity");default:return""}}(e,r),r=e,e=e.return;while(e)return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function E(e,t){if("object"==typeof e&&null!==e){var r=sX.get(e);return void 0!==r?r:(t={value:e,source:t,stack:M(t)},sX.set(e,t),t)}return{value:e,source:t,stack:M(t)}}function C(e,t){sQ[s$++]=sK,sQ[s$++]=sY,sY=e,sK=t}function R(e,t,r){sZ[sJ++]=s1,sZ[sJ++]=s2,sZ[sJ++]=s0,s0=e;var i=s1;e=s2;var n=32-sT(i)-1;i&=~(1<<n),r+=1;var a=32-sT(t)+n;if(30<a){var s=n-n%5;a=(i&(1<<s)-1).toString(32),i>>=s,n-=s,s1=1<<32-sT(t)+n|r<<n|i,s2=a+e}else s1=1<<a|r<<n|i,s2=e}function N(e){null!==e.return&&(C(e,1),R(e,1,0))}function P(e){for(;e===sY;)sY=sQ[--s$],sQ[s$]=null,sK=sQ[--s$],sQ[s$]=null;for(;e===s0;)s0=sZ[--sJ],sZ[sJ]=null,s2=sZ[--sJ],sZ[sJ]=null,s1=sZ[--sJ],sZ[sJ]=null}function I(e,t){sZ[sJ++]=s1,sZ[sJ++]=s2,sZ[sJ++]=s0,s1=t.id,s2=t.overflow,s0=e}function L(e,t){h(s5,t),h(s4,e),h(s3,null),e=nM(t),c(s3),h(s3,e)}function D(){c(s3),c(s4),c(s5)}function B(e){null!==e.memoizedState&&h(s8,e);var t=s3.current,r=nE(t,e.type);t!==r&&(h(s4,e),h(s3,r))}function F(e){s4.current===e&&(c(s3),c(s4)),s8.current===e&&(c(s8),nU?n3._currentValue=n2:n3._currentValue2=n2)}function O(e){var t=Error(i(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML",""));throw G(E(t,e)),or}function U(e,t){if(!nV)throw Error(i(175));aH(e.stateNode,e.type,e.memoizedProps,t,e)||O(e,!0)}function k(e){for(s6=e.return;s6;)switch(s6.tag){case 5:case 31:case 13:ot=!1;return;case 27:case 3:ot=!0;return;default:s6=s6.return}}function z(e){if(!nV||e!==s6)return!1;if(!s9)return k(e),s9=!0,!1;var t=e.tag;if(sf?3!==t&&27!==t&&(5!==t||a8(e.type)&&!nL(e.type,e.memoizedProps))&&s7&&O(e):3!==t&&(5!==t||a8(e.type)&&!nL(e.type,e.memoizedProps))&&s7&&O(e),k(e),13===t){if(!nV)throw Error(i(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));s7=a$(e)}else if(31===t){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));s7=aQ(e)}else s7=sf&&27===t?aD(e.type,s7):s6?aL(e.stateNode):null;return!0}function V(){nV&&(s7=s6=null,s9=!1)}function q(){var e=oe;return null!==e&&(null===lN?lN=e:lN.push.apply(lN,e),oe=null),e}function G(e){null===oe?oe=[e]:oe.push(e)}function H(e,t,r){nU?(h(oi,t._currentValue),t._currentValue=r):(h(oi,t._currentValue2),t._currentValue2=r)}function j(e){var t=oi.current;nU?e._currentValue=t:e._currentValue2=t,c(oi)}function W(e,t,r){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function X(e,t,r,n){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var s=a.dependencies;if(null!==s){var o=a.child;s=s.firstContext;h:for(;null!==s;){var l=s;s=a;for(var u=0;u<t.length;u++)if(l.context===t[u]){s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),W(s.return,r,e),n||(o=null);break h}s=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(i(341));o.lanes|=r,null!==(s=o.alternate)&&(s.lanes|=r),W(o,r,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Q(e,t,r,n){e=null;for(var a=t,s=!1;null!==a;){if(!s){if((524288&a.flags)!=0)s=!0;else if((262144&a.flags)!=0)break}if(10===a.tag){var o=a.alternate;if(null===o)throw Error(i(387));if(null!==(o=o.memoizedProps)){var l=a.type;sG(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===s8.current){if(null===(o=a.alternate))throw Error(i(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(n3):e=[n3])}a=a.return}null!==e&&X(t,e,r,n),t.flags|=262144}function $(e){for(e=e.firstContext;null!==e;){var t=e.context;if(!sG(nU?t._currentValue:t._currentValue2,e.memoizedValue))return!0;e=e.next}return!1}function Y(e){on=e,oa=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function K(e){return J(on,e)}function Z(e,t){return null===on&&Y(e),J(e,t)}function J(e,t){var r=nU?t._currentValue:t._currentValue2;if(t={context:t,memoizedValue:r,next:null},null===oa){if(null===e)throw Error(i(308));oa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else oa=oa.next=t;return r}function ee(){return{controller:new os,data:new Map,refCount:0}}function et(e){e.refCount--,0===e.refCount&&oo(ol,function(){e.controller.abort()})}function er(){}function ei(e){e!==oh&&null===e.next&&(null===oh?oc=oh=e:oh=oh.next=e),oA=!0,od||(od=!0,n5?n8(function(){(6&lA)!=0?sN(sB,ea):es()}):sN(sB,ea))}function en(e,t){if(!op&&oA){op=!0;do for(var r=!1,i=oc;null!==i;){if(!t)if(0!==e){var n=i.pendingLanes;if(0===n)var a=0;else{var s=i.suspendedLanes,o=i.pingedLanes;a=0xc000095&(a=(1<<31-sT(42|e)+1)-1&(n&~(s&~o)))?0xc000095&a|1:a?2|a:0}0!==a&&(r=!0,eu(i,a))}else a=lm,(3&(a=A(i,i===lp?a:0,null!==i.cancelPendingCommit||i.timeoutHandle!==nO)))==0||p(i,a)||(r=!0,eu(i,a));i=i.next}while(r)op=!1}}function ea(){es()}function es(){oA=od=!1;var e=0;0!==of&&nX()&&(e=of);for(var t=sD(),r=null,i=oc;null!==i;){var n=i.next,a=eo(i,t);0===a?(i.next=null,null===r?oc=n:r.next=n,null===n&&(oh=r)):(r=i,(0!==e||(3&a)!=0)&&(oA=!0)),i=n}0!==lO&&5!==lO||en(e,!1),0!==of&&(of=0)}function eo(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,a=-0x3c00001&e.pendingLanes;0<a;){var s=31-sT(a),o=1<<s,l=n[s];-1===l?((o&r)==0||(o&i)!=0)&&(n[s]=function(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(t=lp,r=lm,r=A(e,e===t?r:0,null!==e.cancelPendingCommit||e.timeoutHandle!==nO),i=e.callbackNode,0===r||e===t&&(2===lg||9===lg)||null!==e.cancelPendingCommit)return null!==i&&null!==i&&sP(i),e.callbackNode=null,e.callbackPriority=0;if((3&r)==0||p(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==i&&sP(i),b(r)){case 2:case 8:r=sF;break;case 32:default:r=sO;break;case 0x10000000:r=sU}return r=sN(r,i=el.bind(null,e)),e.callbackPriority=t,e.callbackNode=r,t}return null!==i&&null!==i&&sP(i),e.callbackPriority=2,e.callbackNode=null,2}function el(e,t){if(0!==lO&&5!==lO)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(ik()&&e.callbackNode!==r)return null;var i=lm;return 0===(i=A(e,e===lp?i:0,null!==e.cancelPendingCommit||e.timeoutHandle!==nO))?null:(ig(e,i,t),eo(e,sD()),null!=e.callbackNode&&e.callbackNode===r?el.bind(null,e):null)}function eu(e,t){if(ik())return null;ig(e,t,!0)}function ec(){if(0===of){var e=oy;0===e&&(e=sE,(261888&(sE<<=1))==0&&(sE=256)),of=e}return of}function eh(){if(0==--og&&null!==om){null!==ov&&(ov.status="fulfilled");var e=om;om=null,oy=0,ov=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function ed(){var e=o_.current;return null!==e?e:lp.pooledCache}function eA(e,t){null===t?h(o_,o_.current):h(o_,t.pool)}function ep(){var e=ed();return null===e?null:{parent:nU?ou._currentValue:ou._currentValue2,pool:e}}function ef(e,t){if(sG(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!sj.call(t,n)||!sG(e[n],t[n]))return!1}return!0}function em(e){return"fulfilled"===(e=e.status)||"rejected"===e}function eg(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(er,er),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw ex(e=t.reason),e;default:if("string"==typeof t.status)t.then(er,er);else{if(null!==(e=lp)&&100<e.shellSuspendCounter)throw Error(i(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ex(e=t.reason),e}throw oM=t,ob}}function ey(e){try{return(0,e._init)(e._payload)}catch(e){throw null!==e&&"object"==typeof e&&"function"==typeof e.then?(oM=e,ob):e}}function ev(){if(null===oM)throw Error(i(459));var e=oM;return oM=null,e}function ex(e){if(e===ob||e===oT)throw Error(i(483))}function e_(e){var t=oC;return oC+=1,null===oE&&(oE=[]),eg(oE,e,t)}function eb(e,t){e.ref=void 0!==(t=t.props.ref)?t:null}function eS(e,t){throw t.$$typeof===ni?Error(i(525)):Error(i(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eT(e){function r(t,r){if(e){var i=t.deletions;null===i?(t.deletions=[r],t.flags|=16):i.push(r)}}function n(t,i){if(!e)return null;for(;null!==i;)r(t,i),i=i.sibling;return null}function a(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=iY(e,t)).index=0,e.sibling=null,e}function l(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.flags|=0x4000002,r):i:(t.flags|=0x4000002,r):(t.flags|=1048576,r)}function u(t){return e&&null===t.alternate&&(t.flags|=0x4000002),t}function c(e,t,r,i){return null===t||6!==t.tag?(t=i0(r,e.mode,i)).return=e:(t=s(t,r)).return=e,t}function h(e,t,r,i){var n=r.type;return n===ns?A(e,t,r.props.children,i,r.key):(null!==t&&(t.elementType===n||"object"==typeof n&&null!==n&&n.$$typeof===nf&&ey(n)===t.type)?eb(t=s(t,r.props),r):eb(t=iZ(r.type,r.key,r.props,null,e.mode,i),r),t.return=e,t)}function d(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?(t=i2(r,e.mode,i)).return=e:(t=s(t,r.children||[])).return=e,t}function A(e,t,r,i,n){return null===t||7!==t.tag?(t=iJ(r,e.mode,i,n)).return=e:(t=s(t,r)).return=e,t}function p(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=i0(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case nn:return eb(r=iZ(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case na:return(t=i2(t,e.mode,r)).return=e,t;case nf:return p(e,t=ey(t),r)}if(nx(t)||o(t))return(t=iJ(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return p(e,e_(t),r);if(t.$$typeof===nc)return p(e,Z(e,t),r);eS(e,t)}return null}function f(e,t,r,i){var n=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==n?null:c(e,t,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case nn:return r.key===n?h(e,t,r,i):null;case na:return r.key===n?d(e,t,r,i):null;case nf:return f(e,t,r=ey(r),i)}if(nx(r)||o(r))return null!==n?null:A(e,t,r,i,null);if("function"==typeof r.then)return f(e,t,e_(r),i);if(r.$$typeof===nc)return f(e,t,Z(e,r),i);eS(e,r)}return null}function m(e,t,r,i,n){if("string"==typeof i&&""!==i||"number"==typeof i||"bigint"==typeof i)return c(t,e=e.get(r)||null,""+i,n);if("object"==typeof i&&null!==i){switch(i.$$typeof){case nn:return h(t,e=e.get(null===i.key?r:i.key)||null,i,n);case na:return d(t,e=e.get(null===i.key?r:i.key)||null,i,n);case nf:return m(e,t,r,i=ey(i),n)}if(nx(i)||o(i))return A(t,e=e.get(r)||null,i,n,null);if("function"==typeof i.then)return m(e,t,r,e_(i),n);if(i.$$typeof===nc)return m(e,t,r,Z(t,i),n);eS(t,i)}return null}return function(c,h,d,A){try{oC=0;var g=function t(c,h,d,A){if("object"==typeof d&&null!==d&&d.type===ns&&null===d.key&&(d=d.props.children),"object"==typeof d&&null!==d){switch(d.$$typeof){case nn:h:{for(var g=d.key;null!==h;){if(h.key===g){if((g=d.type)===ns){if(7===h.tag){n(c,h.sibling),(A=s(h,d.props.children)).return=c,c=A;break h}}else if(h.elementType===g||"object"==typeof g&&null!==g&&g.$$typeof===nf&&ey(g)===h.type){n(c,h.sibling),eb(A=s(h,d.props),d),A.return=c,c=A;break h}n(c,h);break}r(c,h),h=h.sibling}d.type===ns?(A=iJ(d.props.children,c.mode,A,d.key)).return=c:(eb(A=iZ(d.type,d.key,d.props,null,c.mode,A),d),A.return=c),c=A}return u(c);case na:h:{for(g=d.key;null!==h;){if(h.key===g)if(4===h.tag&&h.stateNode.containerInfo===d.containerInfo&&h.stateNode.implementation===d.implementation){n(c,h.sibling),(A=s(h,d.children||[])).return=c,c=A;break h}else{n(c,h);break}r(c,h),h=h.sibling}(A=i2(d,c.mode,A)).return=c,c=A}return u(c);case nf:return t(c,h,d=ey(d),A)}if(nx(d))return function(t,i,s,o){for(var u=null,c=null,h=i,d=i=0,A=null;null!==h&&d<s.length;d++){h.index>d?(A=h,h=null):A=h.sibling;var g=f(t,h,s[d],o);if(null===g){null===h&&(h=A);break}e&&h&&null===g.alternate&&r(t,h),i=l(g,i,d),null===c?u=g:c.sibling=g,c=g,h=A}if(d===s.length)return n(t,h),s9&&C(t,d),u;if(null===h){for(;d<s.length;d++)null!==(h=p(t,s[d],o))&&(i=l(h,i,d),null===c?u=h:c.sibling=h,c=h);return s9&&C(t,d),u}for(h=a(h);d<s.length;d++)null!==(A=m(h,t,d,s[d],o))&&(e&&null!==A.alternate&&h.delete(null===A.key?d:A.key),i=l(A,i,d),null===c?u=A:c.sibling=A,c=A);return e&&h.forEach(function(e){return r(t,e)}),s9&&C(t,d),u}(c,h,d,A);if(o(d)){if("function"!=typeof(g=o(d)))throw Error(i(150));return function(t,s,o,u){if(null==o)throw Error(i(151));for(var c=null,h=null,d=s,A=s=0,g=null,y=o.next();null!==d&&!y.done;A++,y=o.next()){d.index>A?(g=d,d=null):g=d.sibling;var v=f(t,d,y.value,u);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&r(t,d),s=l(v,s,A),null===h?c=v:h.sibling=v,h=v,d=g}if(y.done)return n(t,d),s9&&C(t,A),c;if(null===d){for(;!y.done;A++,y=o.next())null!==(y=p(t,y.value,u))&&(s=l(y,s,A),null===h?c=y:h.sibling=y,h=y);return s9&&C(t,A),c}for(d=a(d);!y.done;A++,y=o.next())null!==(y=m(d,t,A,y.value,u))&&(e&&null!==y.alternate&&d.delete(null===y.key?A:y.key),s=l(y,s,A),null===h?c=y:h.sibling=y,h=y);return e&&d.forEach(function(e){return r(t,e)}),s9&&C(t,A),c}(c,h,d=g.call(d),A)}if("function"==typeof d.then)return t(c,h,e_(d),A);if(d.$$typeof===nc)return t(c,h,Z(c,d),A);eS(c,d)}return"string"==typeof d&&""!==d||"number"==typeof d||"bigint"==typeof d?(d=""+d,null!==h&&6===h.tag?(n(c,h.sibling),(A=s(h,d)).return=c):(n(c,h),(A=i0(d,c.mode,A)).return=c),u(c=A)):n(c,h)}(c,h,d,A);return oE=null,g}catch(e){if(e===ob||e===oT)throw e;var y=t(29,e,null,c.mode);return y.lanes=A,y.return=c,y}finally{}}}function ew(){for(var e=oI,t=oL=oI=0;t<e;){var r=oP[t];oP[t++]=null;var i=oP[t];oP[t++]=null;var n=oP[t];oP[t++]=null;var a=oP[t];if(oP[t++]=null,null!==i&&null!==n){var s=i.pending;null===s?n.next=n:(n.next=s.next,s.next=n),i.pending=n}0!==a&&eR(r,n,a)}}function eM(e,t,r,i){oP[oI++]=e,oP[oI++]=t,oP[oI++]=r,oP[oI++]=i,oL|=i,e.lanes|=i,null!==(e=e.alternate)&&(e.lanes|=i)}function eE(e,t,r,i){return eM(e,t,r,i),eN(e)}function eC(e,t){return eM(e,null,null,t),eN(e)}function eR(e,t,r){e.lanes|=r;var i=e.alternate;null!==i&&(i.lanes|=r);for(var n=!1,a=e.return;null!==a;)a.childLanes|=r,null!==(i=a.alternate)&&(i.childLanes|=r),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(n=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,n&&null!==t&&(n=31-sT(r),null===(i=(e=a.hiddenUpdates)[n])?e[n]=[t]:i.push(t),t.lane=0x20000000|r),a):null}function eN(e){if(50<lH)throw lH=0,lj=null,Error(i(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}function eP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function eI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function eL(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function eD(e,t,r){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,(2&lA)!=0){var n=i.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),i.pending=t,t=eN(e),eR(e,null,r),t}return eM(e,i,t,r),eN(e)}function eB(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,(4194048&r)!=0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,v(e,r)}}function eF(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===a?n=a=s:a=a.next=s,r=r.next}while(null!==r)null===a?n=a=t:a=a.next=t}else n=a=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},e.updateQueue=r;return}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function eO(){if(oB){var e=ov;if(null!==e)throw e}}function eU(e,t,r,i){oB=!1;var n=e.updateQueue;oD=!1;var a=n.firstBaseUpdate,s=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,u=l.next;l.next=null,null===s?a=u:s.next=u,s=l;var c=e.alternate;null!==c&&(o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l)}if(null!==a){var h=n.baseState;for(s=0,c=u=l=null,o=a;;){var d=-0x20000001&o.lane,A=d!==o.lane;if(A?(lm&d)===d:(i&d)===d){0!==d&&d===oy&&(oB=!0),null!==c&&(c=c.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});h:{var p=e,f=o;switch(d=t,f.tag){case 1:if("function"==typeof(p=f.payload)){h=p.call(r,h,d);break h}h=p;break h;case 3:p.flags=-65537&p.flags|128;case 0:if(null==(d="function"==typeof(p=f.payload)?p.call(r,h,d):p))break h;h=nr({},h,d);break h;case 2:oD=!0}}null!==(d=o.callback)&&(e.flags|=64,A&&(e.flags|=8192),null===(A=n.callbacks)?n.callbacks=[d]:A.push(d))}else A={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(u=c=A,l=h):c=c.next=A,s|=d;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(A=o).next,A.next=null,n.lastBaseUpdate=A,n.shared.pending=null}}null===c&&(l=h),n.baseState=l,n.firstBaseUpdate=u,n.lastBaseUpdate=c,null===a&&(n.shared.lanes=0),lT|=s,e.lanes=s,e.memoizedState=h}}function ek(e,t){if("function"!=typeof e)throw Error(i(191,e));e.call(t)}function ez(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)ek(r[e],t)}function eV(e,t){h(oO,e=lb),h(oF,t),lb=e|t.baseLanes}function eq(){h(oO,lb),h(oF,oF.current)}function eG(){lb=oO.current,c(oF),c(oO)}function eH(e){var t=e.alternate;h(oz,1&oz.current),h(oU,e),null===ok&&(null===t||null!==oF.current||null!==t.memoizedState)&&(ok=e)}function ej(e){h(oz,oz.current),h(oU,e),null===ok&&(ok=e)}function eW(e){22===e.tag?(h(oz,oz.current),h(oU,e),null===ok&&(ok=e)):eX()}function eX(){h(oz,oz.current),h(oU,oU.current)}function eQ(e){c(oU),ok===e&&(ok=null),c(oz)}function e$(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||aE(r)||aC(r)))return t}else if(19===t.tag&&("forwards"===t.memoizedProps.revealOrder||"backwards"===t.memoizedProps.revealOrder||"unstable_legacy-backwards"===t.memoizedProps.revealOrder||"together"===t.memoizedProps.revealOrder)){if((128&t.flags)!=0)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function eY(){throw Error(i(321))}function eK(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sG(e[r],t[r]))return!1;return!0}function eZ(e,t,r,i,n,a){return oV=a,oq=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,n_.H=null===e||null===e.memoizedState?oJ:o0,oX=!1,a=r(i,n),oX=!1,oW&&(a=e0(t,r,i,n)),eJ(e),a}function eJ(e){n_.H=oZ;var t=null!==oG&&null!==oG.next;if(oV=0,oH=oG=oq=null,oj=!1,o$=0,oY=null,t)throw Error(i(300));null===e||o4||null!==(e=e.dependencies)&&$(e)&&(o4=!0)}function e0(e,t,r,n){oq=e;var a=0;do{if(oW&&(oY=null),o$=0,oW=!1,25<=a)throw Error(i(301));if(a+=1,oH=oG=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}n_.H=o1,s=t(r,n)}while(oW)return s}function e1(){var e=n_.H,t=e.useState()[0];return t="function"==typeof t.then?e7(t):t,e=e.useState()[0],(null!==oG?oG.memoizedState:null)!==e&&(oq.flags|=1024),t}function e2(){var e=0!==oQ;return oQ=0,e}function e3(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function e4(e){if(oj){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}oj=!1}oV=0,oH=oG=oq=null,oW=!1,o$=oQ=0,oY=null}function e5(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oH?oq.memoizedState=oH=e:oH=oH.next=e,oH}function e8(){if(null===oG){var e=oq.alternate;e=null!==e?e.memoizedState:null}else e=oG.next;var t=null===oH?oq.memoizedState:oH.next;if(null!==t)oH=t,oG=e;else{if(null===e)throw null===oq.alternate?Error(i(467)):Error(i(310));e={memoizedState:(oG=e).memoizedState,baseState:oG.baseState,baseQueue:oG.baseQueue,queue:oG.queue,next:null},null===oH?oq.memoizedState=oH=e:oH=oH.next=e}return oH}function e6(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function e7(e){var t=o$;return o$+=1,null===oY&&(oY=[]),e=eg(oY,e,t),t=oq,(null===oH?t.memoizedState:oH.next)===null&&(n_.H=null===(t=t.alternate)||null===t.memoizedState?oJ:o0),e}function e9(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return e7(e);if(e.$$typeof===nc)return K(e)}throw Error(i(438,String(e)))}function te(e){var t=null,r=oq.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var i=oq.alternate;null!==i&&null!==(i=i.updateQueue)&&null!=(i=i.memoCache)&&(t={data:i.data.map(function(e){return e.slice()}),index:0})}if(null==t&&(t={data:[],index:0}),null===r&&(r=e6(),oq.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),i=0;i<e;i++)r[i]=ng;return t.index++,r}function tt(e,t){return"function"==typeof t?t(e):t}function tr(e){return ti(e8(),oG,e)}function ti(e,t,r){var n=e.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=r;var a=e.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}t.baseQueue=a=s,n.pending=null}if(s=e.baseState,null===a)e.memoizedState=s;else{t=a.next;var l=o=null,u=null,c=t,h=!1;do{var d=-0x20000001&c.lane;if(d!==c.lane?(lm&d)===d:(oV&d)===d){var A=c.revertLane;if(0===A)null!==u&&(u=u.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),d===oy&&(h=!0);else if((oV&A)===A){c=c.next,A===oy&&(h=!0);continue}else d={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=d,o=s):u=u.next=d,oq.lanes|=A,lT|=A;d=c.action,oX&&r(s,d),s=c.hasEagerState?c.eagerState:r(s,d)}else A={lane:d,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=A,o=s):u=u.next=A,oq.lanes|=d,lT|=d;c=c.next}while(null!==c&&c!==t)if(null===u?o=s:u.next=l,!sG(s,e.memoizedState)&&(o4=!0,h&&null!==(r=ov)))throw r;e.memoizedState=s,e.baseState=o,e.baseQueue=u,n.lastRenderedState=s}return null===a&&(n.lanes=0),[e.memoizedState,n.dispatch]}function tn(e){var t=e8(),r=t.queue;if(null===r)throw Error(i(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,s=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do s=e(s,o.action),o=o.next;while(o!==a)sG(s,t.memoizedState)||(o4=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function ta(e,t,r){var n=oq,a=e8(),s=s9;if(s){if(void 0===r)throw Error(i(407));r=r()}else r=t();var o=!sG((oG||a).memoizedState,r);if(o&&(a.memoizedState=r,o4=!0),a=a.queue,tN(tl.bind(null,n,a,e),[e]),a.getSnapshot!==t||o||null!==oH&&1&oH.memoizedState.tag){if(n.flags|=2048,tw(9,{destroy:void 0},to.bind(null,n,a,r,t),null),null===lp)throw Error(i(349));s||(127&oV)!=0||ts(n,t,r)}return r}function ts(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=oq.updateQueue)?(t=e6(),oq.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function to(e,t,r,i){t.value=r,t.getSnapshot=i,tu(t)&&tc(e)}function tl(e,t,r){return r(function(){tu(t)&&tc(e)})}function tu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sG(e,r)}catch{return!0}}function tc(e){var t=eC(e,2);null!==t&&im(t,e,2)}function th(e){var t=e5();if("function"==typeof e){var r=e;if(e=r(),oX){S(!0);try{r()}finally{S(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:e},t}function td(e,t,r,i){return e.baseState=r,ti(e,oG,"function"==typeof i?i:tt)}function tA(e,t,r,n,a){if(tK(e))throw Error(i(485));if(null!==(e=t.action)){var s={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==n_.T?r(!0):s.isTransition=!1,n(s),null===(r=t.pending)?(s.next=t.pending=s,tp(t,s)):(s.next=r.next,t.pending=r.next=s)}}function tp(e,t){var r=t.action,i=t.payload,n=e.state;if(t.isTransition){var a=n_.T,s={};n_.T=s;try{var o=r(n,i),l=n_.S;null!==l&&l(s,o),tf(e,t,o)}catch(r){tg(e,t,r)}finally{null!==a&&null!==s.types&&(a.types=s.types),n_.T=a}}else try{a=r(n,i),tf(e,t,a)}catch(r){tg(e,t,r)}}function tf(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){tm(e,t,r)},function(r){return tg(e,t,r)}):tm(e,t,r)}function tm(e,t,r){t.status="fulfilled",t.value=r,ty(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,tp(e,r)))}function tg(e,t,r){var i=e.pending;if(e.pending=null,null!==i){i=i.next;do t.status="rejected",t.reason=r,ty(t),t=t.next;while(t!==i)}e.action=null}function ty(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function tv(e,t){return t}function tx(e,t){if(s9){var r=lp.formState;if(null!==r){h:{var i=oq;if(s9){if(s7){var n=aP(s7,ot);if(n){s7=aL(n),i=aI(n);break h}}O(i)}i=!1}i&&(t=r[0])}}(r=e5()).memoizedState=r.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tv,lastRenderedState:t},r.queue=i,r=tQ.bind(null,oq,i),i.dispatch=r,i=th(!1);var a=tY.bind(null,oq,!1,i.queue);return i=e5(),n={state:t,dispatch:null,action:e,pending:null},i.queue=n,r=tA.bind(null,oq,n,a,r),n.dispatch=r,i.memoizedState=e,[t,r,!1]}function t_(e){return tb(e8(),oG,e)}function tb(e,t,r){if(t=ti(e,t,tv)[0],e=tr(tt)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var i=e7(t)}catch(e){throw e===ob?oT:e}else i=t;var n=(t=e8()).queue,a=n.dispatch;return r!==t.memoizedState&&(oq.flags|=2048,tw(9,{destroy:void 0},tS.bind(null,n,r),null)),[i,a,e]}function tS(e,t){e.action=t}function tT(e){var t=e8(),r=oG;if(null!==r)return tb(t,r,e);e8(),t=t.memoizedState;var i=(r=e8()).queue.dispatch;return r.memoizedState=e,[t,i,!1]}function tw(e,t,r,i){return e={tag:e,create:r,deps:i,inst:t,next:null},null===(t=oq.updateQueue)&&(t=e6(),oq.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function tM(){return e8().memoizedState}function tE(e,t,r,i){var n=e5();oq.flags|=e,n.memoizedState=tw(1|t,{destroy:void 0},r,void 0===i?null:i)}function tC(e,t,r,i){var n=e8();i=void 0===i?null:i;var a=n.memoizedState.inst;null!==oG&&null!==i&&eK(i,oG.memoizedState.deps)?n.memoizedState=tw(t,a,r,i):(oq.flags|=e,n.memoizedState=tw(1|t,a,r,i))}function tR(e,t){tE(8390656,8,e,t)}function tN(e,t){tC(2048,8,e,t)}function tP(e){var t=e8().memoizedState;return function(e){oq.flags|=4;var t=oq.updateQueue;if(null===t)t=e6(),oq.updateQueue=t,t.events=[e];else{var r=t.events;null===r?t.events=[e]:r.push(e)}}({ref:t,nextImpl:e}),function(){if((2&lA)!=0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function tI(e,t){return tC(4,2,e,t)}function tL(e,t){return tC(4,4,e,t)}function tD(e,t){if("function"==typeof t){var r=t(e=e());return function(){"function"==typeof r?r():t(null)}}if(null!=t)return t.current=e=e(),function(){t.current=null}}function tB(e,t,r){r=null!=r?r.concat([e]):null,tC(4,4,tD.bind(null,t,e),r)}function tF(){}function tO(e,t){var r=e8();t=void 0===t?null:t;var i=r.memoizedState;return null!==t&&eK(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function tU(e,t){var r=e8();t=void 0===t?null:t;var i=r.memoizedState;if(null!==t&&eK(t,i[1]))return i[0];if(i=e(),oX){S(!0);try{e()}finally{S(!1)}}return r.memoizedState=[i,t],i}function tk(e,t,r){return void 0===r||(0x40000000&oV)!=0&&(261930&lm)==0?e.memoizedState=t:(e.memoizedState=r,e=ip(),oq.lanes|=e,lT|=e,r)}function tz(e,t,r,i){return sG(r,t)?r:null!==oF.current?(sG(e=tk(e,r,i),t)||(o4=!0),e):(42&oV)==0||(0x40000000&oV)!=0&&(261930&lm)==0?(o4=!0,e.memoizedState=r):(e=ip(),oq.lanes|=e,lT|=e,t)}function tV(e,t,r,i,n){var a=nj();nH(0!==a&&8>a?a:8);var s=n_.T,o={};n_.T=o,tY(e,!1,t,r);try{var l=n(),u=n_.S;if(null!==u&&u(o,l),null!==l&&"object"==typeof l&&"function"==typeof l.then){var c,h,d=(c=[],h={status:"pending",value:null,reason:null,then:function(e){c.push(e)}},l.then(function(){h.status="fulfilled",h.value=i;for(var e=0;e<c.length;e++)(0,c[e])(i)},function(e){for(h.status="rejected",h.reason=e,e=0;e<c.length;e++)(0,c[e])(void 0)}),h);t$(e,t,d,iA(e))}else t$(e,t,i,iA(e))}catch(r){t$(e,t,{then:function(){},status:"rejected",reason:r},iA())}finally{nH(a),null!==s&&null!==o.types&&(s.types=o.types),n_.T=s}}function tq(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:n2,baseState:n2,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:n2},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:tt,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function tG(){return K(n3)}function tH(){return e8().memoizedState}function tj(){return e8().memoizedState}function tW(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=iA(),i=eD(t,e=eL(r),r);null!==i&&(im(i,t,r),eB(i,t,r)),t={cache:ee()},e.payload=t;return}t=t.return}}function tX(e,t,r){var i=iA();r={lane:i,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},tK(e)?tZ(t,r):null!==(r=eE(e,t,r,i))&&(im(r,e,i),tJ(r,t,i))}function tQ(e,t,r){t$(e,t,r,iA())}function t$(e,t,r,i){var n={lane:i,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(tK(e))tZ(t,n);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=a(s,r);if(n.hasEagerState=!0,n.eagerState=o,sG(o,s))return eM(e,t,n,0),null===lp&&ew(),!1}catch{}finally{}if(null!==(r=eE(e,t,n,i)))return im(r,e,i),tJ(r,t,i),!0}return!1}function tY(e,t,r,n){if(n={lane:2,revertLane:ec(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},tK(e)){if(t)throw Error(i(479))}else null!==(t=eE(e,r,n,2))&&im(t,e,2)}function tK(e){var t=e.alternate;return e===oq||null!==t&&t===oq}function tZ(e,t){oW=oj=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function tJ(e,t,r){if((4194048&r)!=0){var i=t.lanes;i&=e.pendingLanes,t.lanes=r|=i,v(e,r)}}function t0(e,t,r,i){r=null==(r=r(i,t=e.memoizedState))?t:nr({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}function t1(e,t,r,i,n,a,s){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||!ef(r,i)||!ef(n,a)}function t2(e,t,r,i){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&o2.enqueueReplaceState(t,t.state,null)}function t3(e,t){var r=t;if("ref"in t)for(var i in r={},t)"ref"!==i&&(r[i]=t[i]);if(e=e.defaultProps)for(var n in r===t&&(r=nr({},r)),e)void 0===r[n]&&(r[n]=e[n]);return r}function t4(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(e){setTimeout(function(){throw e})}}function t5(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(e){setTimeout(function(){throw e})}}function t8(e,t,r){return(r=eL(r)).tag=3,r.payload={element:null},r.callback=function(){t4(e,t)},r}function t6(e){return(e=eL(e)).tag=3,e}function t7(e,t,r,i){var n=r.type.getDerivedStateFromError;if("function"==typeof n){var a=i.value;e.payload=function(){return n(a)},e.callback=function(){t5(t,r,i)}}var s=r.stateNode;null!==s&&"function"==typeof s.componentDidCatch&&(e.callback=function(){t5(t,r,i),"function"!=typeof n&&(null===lF?lF=new Set([this]):lF.add(this));var e=i.stack;this.componentDidCatch(i.value,{componentStack:null!==e?e:""})})}function t9(e,t,r,i){t.child=null===e?oN(t,null,r,i):oR(t,e.child,r,i)}function re(e,t,r,i,n){r=r.render;var a=t.ref;if("ref"in i){var s={};for(var o in i)"ref"!==o&&(s[o]=i[o])}else s=i;return Y(t),i=eZ(e,t,r,s,a,n),o=e2(),null===e||o4?(s9&&o&&N(t),t.flags|=1,t9(e,t,i,n),t.child):(e3(e,t,n),rb(e,t,n))}function rt(e,t,r,i,n){if(null===e){var a=r.type;return"function"!=typeof a||i$(a)||void 0!==a.defaultProps||null!==r.compare?((e=iZ(r.type,null,i,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,rr(e,t,a,i,n))}if(a=e.child,!rS(e,n)){var s=a.memoizedProps;if((r=null!==(r=r.compare)?r:ef)(s,i)&&e.ref===t.ref)return rb(e,t,n)}return t.flags|=1,(e=iY(a,i)).ref=t.ref,e.return=t,t.child=e}function rr(e,t,r,i,n){if(null!==e){var a=e.memoizedProps;if(ef(a,i)&&e.ref===t.ref)if(o4=!1,t.pendingProps=i=a,!rS(e,n))return t.lanes=e.lanes,rb(e,t,n);else(131072&e.flags)!=0&&(o4=!0)}return ru(e,t,r,i,n)}function ri(e,t,r,i){var n=i.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===i.mode){if((128&t.flags)!=0){if(a=null!==a?a.baseLanes|r:r,null!==e){for(i=t.child=e.child,n=0;null!==i;)n=n|i.lanes|i.childLanes,i=i.sibling;i=n&~a}else i=0,t.child=null;return ra(e,t,a,r,i)}if((0x20000000&r)==0)return i=t.lanes=0x20000000,ra(e,t,null!==a?a.baseLanes|r:r,r,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&eA(t,null!==a?a.cachePool:null),null!==a?eV(t,a):eq(),eW(t)}else null!==a?(eA(t,a.cachePool),eV(t,a),eX(),t.memoizedState=null):(null!==e&&eA(t,null),eq(),eX());return t9(e,t,n,r),t.child}function rn(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ra(e,t,r,i,n){var a=ed();return t.memoizedState={baseLanes:r,cachePool:a=null===a?null:{parent:nU?ou._currentValue:ou._currentValue2,pool:a}},null!==e&&eA(t,null),eq(),eW(t),null!==e&&Q(e,t,i,!0),t.childLanes=n,null}function rs(e,t){return(t=rg({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function ro(e,t,r){return oR(t,e.child,null,r),e=rs(t,t.pendingProps),e.flags|=2,eQ(t),t.memoizedState=null,e}function rl(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(i(284));(null===e||e.ref!==r)&&(t.flags|=4194816)}}function ru(e,t,r,i,n){return Y(t),r=eZ(e,t,r,i,void 0,n),i=e2(),null===e||o4?(s9&&i&&N(t),t.flags|=1,t9(e,t,r,n),t.child):(e3(e,t,n),rb(e,t,n))}function rc(e,t,r,i,n,a){return Y(t),t.updateQueue=null,r=e0(t,i,r,n),eJ(e),i=e2(),null===e||o4?(s9&&i&&N(t),t.flags|=1,t9(e,t,r,a),t.child):(e3(e,t,a),rb(e,t,a))}function rh(e,t,r,i,n){if(Y(t),null===t.stateNode){var a=sS,s=r.contextType;"object"==typeof s&&null!==s&&(a=K(s)),t.memoizedState=null!==(a=new r(i,a)).state&&void 0!==a.state?a.state:null,a.updater=o2,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=i,a.state=t.memoizedState,a.refs={},eP(t),s=r.contextType,a.context="object"==typeof s&&null!==s?K(s):sS,a.state=t.memoizedState,"function"==typeof(s=r.getDerivedStateFromProps)&&(t0(t,r,s,i),a.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(s=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),s!==a.state&&o2.enqueueReplaceState(a,a.state,null),eU(t,i,a,n),eO(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),i=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=t3(r,o);a.props=l;var u=a.context,c=r.contextType;s=sS,"object"==typeof c&&null!==c&&(s=K(c));var h=r.getDerivedStateFromProps;c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,c||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||u!==s)&&t2(t,a,i,s),oD=!1;var d=t.memoizedState;a.state=d,eU(t,i,a,n),eO(),u=t.memoizedState,o||d!==u||oD?("function"==typeof h&&(t0(t,r,h,i),u=t.memoizedState),(l=oD||t1(t,r,l,i,d,u,s))?(c||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),a.props=i,a.state=u,a.context=s,i=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,eI(e,t),c=t3(r,s=t.memoizedProps),a.props=c,h=t.pendingProps,d=a.context,u=r.contextType,l=sS,"object"==typeof u&&null!==u&&(l=K(u)),(u="function"==typeof(o=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==h||d!==l)&&t2(t,a,i,l),oD=!1,d=t.memoizedState,a.state=d,eU(t,i,a,n),eO();var A=t.memoizedState;s!==h||d!==A||oD||null!==e&&null!==e.dependencies&&$(e.dependencies)?("function"==typeof o&&(t0(t,r,o,i),A=t.memoizedState),(c=oD||t1(t,r,c,i,d,A,l)||null!==e&&null!==e.dependencies&&$(e.dependencies))?(u||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(i,A,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,A,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=A),a.props=i,a.state=A,a.context=l,i=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,rl(e,t),i=(128&t.flags)!=0,a||i?(a=t.stateNode,r=i&&"function"!=typeof r.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&i?(t.child=oR(t,e.child,null,n),t.child=oR(t,null,r,n)):t9(e,t,r,n),t.memoizedState=a.state,e=t.child):e=rb(e,t,n),e}function rd(e,t,r,i){return V(),t.flags|=256,t9(e,t,r,i),t.child}function rA(e){return{baseLanes:e,cachePool:ep()}}function rp(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=lE),e}function rf(e,t,r){var n,a=t.pendingProps,s=!1,o=(128&t.flags)!=0;if((n=o)||(n=(null===e||null!==e.memoizedState)&&(2&oz.current)!=0),n&&(s=!0,t.flags&=-129),n=(32&t.flags)!=0,t.flags&=-33,null===e){if(s9){if(s?eH(t):eX(),(e=s7)?null!==(e=aG(e,ot))&&(t.memoizedState={dehydrated:e,treeContext:null!==s0?{id:s1,overflow:s2}:null,retryLane:0x20000000,hydrationErrors:null},(r=i1(e)).return=t,t.child=r,s6=t,s7=null):e=null,null===e)throw O(t);return aC(e)?t.lanes=32:t.lanes=0x20000000,null}var l=a.children;return a=a.fallback,s?(eX(),l=rg({mode:"hidden",children:l},s=t.mode),a=iJ(a,s,r,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=rA(r),a.childLanes=rp(e,n,r),t.memoizedState=o5,rn(null,a)):(eH(t),rm(t,l))}var u=e.memoizedState;if(null!==u&&null!==(l=u.dehydrated)){if(o)256&t.flags?(eH(t),t.flags&=-257,t=ry(e,t,r)):null!==t.memoizedState?(eX(),t.child=e.child,t.flags|=128,t=null):(eX(),l=a.fallback,s=t.mode,a=rg({mode:"visible",children:a.children},s),l=iJ(l,s,r,null),l.flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,oR(t,e.child,null,r),(a=t.child).memoizedState=rA(r),a.childLanes=rp(e,n,r),t.memoizedState=o5,t=rn(null,a));else if(eH(t),aC(l))n=aR(l).digest,(a=Error(i(419))).stack="",a.digest=n,G({value:a,source:null,stack:null}),t=ry(e,t,r);else if(o4||Q(e,t,r,!1),n=(r&e.childLanes)!=0,o4||n){if(null!==(n=lp)&&0!==(a=x(n,r))&&a!==u.retryLane)throw u.retryLane=a,eC(e,a),im(n,e,a),o3;aE(l)||iE(),t=ry(e,t,r)}else aE(l)?(t.flags|=192,t.child=e.child,t=null):(e=u.treeContext,nV&&(s7=aU(l),s6=t,s9=!0,oe=null,ot=!1,null!==e&&I(t,e)),t=rm(t,a.children),t.flags|=4096);return t}return s?(eX(),l=a.fallback,s=t.mode,o=(u=e.child).sibling,(a=iY(u,{mode:"hidden",children:a.children})).subtreeFlags=0x3e00000&u.subtreeFlags,null!==o?l=iY(o,l):(l=iJ(l,s,r,null),l.flags|=2),l.return=t,a.return=t,a.sibling=l,t.child=a,rn(null,a),a=t.child,null===(l=e.child.memoizedState)?l=rA(r):(null!==(s=l.cachePool)?(u=nU?ou._currentValue:ou._currentValue2,s=s.parent!==u?{parent:u,pool:u}:s):s=ep(),l={baseLanes:l.baseLanes|r,cachePool:s}),a.memoizedState=l,a.childLanes=rp(e,n,r),t.memoizedState=o5,rn(e.child,a)):(eH(t),e=(r=e.child).sibling,(r=iY(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r)}function rm(e,t){return(t=rg({mode:"visible",children:t},e.mode)).return=e,e.child=t}function rg(e,r){return(e=t(22,e,null,r)).lanes=0,e}function ry(e,t,r){return oR(t,e.child,null,r),e=rm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rv(e,t,r){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),W(e.return,t,r)}function rx(e,t,r,i,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n,treeForkCount:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n,s.treeForkCount=a)}function r_(e,t,r){var i=t.pendingProps,n=i.revealOrder,a=i.tail;i=i.children;var s=oz.current,o=(2&s)!=0;if(o?(s=1&s|2,t.flags|=128):s&=1,h(oz,s),t9(e,t,i,r),i=s9?sK:0,!o&&null!==e&&(128&e.flags)!=0)h:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&rv(e,r,t);else if(19===e.tag)rv(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break h;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===e$(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),rx(t,!1,n,r,a,i);break;case"backwards":case"unstable_legacy-backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===e$(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}rx(t,!0,r,null,a,i);break;case"together":rx(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function rb(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),lT|=t.lanes,(r&t.childLanes)==0){if(null===e)return null;else if(Q(e,t,r,!1),(r&t.childLanes)==0)return null}if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(r=iY(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=iY(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function rS(e,t){return(e.lanes&t)!=0||!!(null!==(e=e.dependencies)&&$(e))}function rT(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)o4=!0;else{if(!rS(e,r)&&(128&t.flags)==0)return o4=!1,function(e,t,r){switch(t.tag){case 3:L(t,t.stateNode.containerInfo),H(t,ou,e.memoizedState.cache),V();break;case 27:case 5:B(t);break;case 4:L(t,t.stateNode.containerInfo);break;case 10:H(t,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,ej(t),null;break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(eH(t),t.flags|=128,null):(r&t.child.childLanes)!=0?rf(e,t,r):(eH(t),null!==(e=rb(e,t,r))?e.sibling:null);eH(t);break;case 19:var n=(128&e.flags)!=0;if((i=(r&t.childLanes)!=0)||(Q(e,t,r,!1),i=(r&t.childLanes)!=0),n){if(i)return r_(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),h(oz,oz.current),i)break;return null;case 22:return t.lanes=0,ri(e,t,r,t.pendingProps);case 24:H(t,ou,e.memoizedState.cache)}return rb(e,t,r)}(e,t,r);o4=(131072&e.flags)!=0}else o4=!1,s9&&(1048576&t.flags)!=0&&R(t,sK,t.index);switch(t.lanes=0,t.tag){case 16:h:{var n=t.pendingProps;if(e=ey(t.elementType),t.type=e,"function"==typeof e)i$(e)?(n=t3(e,n),t.tag=1,t=rh(null,t,e,n,r)):(t.tag=0,t=ru(null,t,e,n,r));else{if(null!=e){var a=e.$$typeof;if(a===nh){t.tag=11,t=re(null,t,e,n,r);break h}if(a===np){t.tag=14,t=rt(null,t,e,n,r);break h}}throw Error(i(306,t=l(e)||e,""))}}return t;case 0:return ru(e,t,t.type,t.pendingProps,r);case 1:return a=t3(n=t.type,t.pendingProps),rh(e,t,n,a,r);case 3:h:{if(L(t,t.stateNode.containerInfo),null===e)throw Error(i(387));var s=t.pendingProps;n=(a=t.memoizedState).element,eI(e,t),eU(t,s,null,r);var o=t.memoizedState;if(H(t,ou,s=o.cache),s!==a.cache&&X(t,[ou],r,!0),eO(),s=o.element,nV&&a.isDehydrated)if(a={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=rd(e,t,s,r);break h}else if(s!==n){G(n=E(Error(i(424)),t)),t=rd(e,t,s,r);break h}else for(nV&&(s7=aF(t.stateNode.containerInfo),s6=t,s9=!0,oe=null,ot=!0),r=oN(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling;else{if(V(),s===n){t=rb(e,t,r);break h}t9(e,t,s,r)}t=t.child}return t;case 26:if(st)return rl(e,t),null===e?(r=sn(t.type,null,t.pendingProps,null))?t.memoizedState=r:s9||(t.stateNode=sc(t.type,t.pendingProps,s5.current,t)):t.memoizedState=sn(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:if(sf)return B(t),null===e&&sf&&s9&&(n=t.stateNode=sm(t.type,t.pendingProps,s5.current,s3.current,!1),s6=t,ot=!0,s7=ak(t.type,n,s7)),t9(e,t,t.pendingProps.children,r),rl(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&s9&&(a9(t.type,t.pendingProps,s3.current),(a=n=s7)&&(null!==(n=az(n,t.type,t.pendingProps,ot))?(t.stateNode=n,s6=t,s7=aB(n),ot=!1,a=!0):a=!1),a||O(t)),B(t),a=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,n=s.children,nL(a,s)?n=null:null!==o&&nL(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=eZ(e,t,e1,null,null,r),nU?n3._currentValue=a:n3._currentValue2=a),rl(e,t),t9(e,t,n,r),t.child;case 6:return null===e&&s9&&(se(t.pendingProps,s3.current),(e=r=s7)&&(null!==(r=aV(r,t.pendingProps,ot))?(t.stateNode=r,s6=t,s7=null,e=!0):e=!1),e||O(t)),null;case 13:return rf(e,t,r);case 4:return L(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=oR(t,null,n,r):t9(e,t,n,r),t.child;case 11:return re(e,t,t.type,t.pendingProps,r);case 7:return t9(e,t,t.pendingProps,r),t.child;case 8:case 12:return t9(e,t,t.pendingProps.children,r),t.child;case 10:return n=t.pendingProps,H(t,t.type,n.value),t9(e,t,n.children,r),t.child;case 9:return a=t.type._context,n=t.pendingProps.children,Y(t),n=n(a=K(a)),t.flags|=1,t9(e,t,n,r),t.child;case 14:return rt(e,t,t.type,t.pendingProps,r);case 15:return rr(e,t,t.type,t.pendingProps,r);case 19:return r_(e,t,r);case 31:var u=e,c=t,d=r,A=c.pendingProps,p=(128&c.flags)!=0;if(c.flags&=-129,null===u){if(s9){if("hidden"===A.mode)return u=rs(c,A),c.lanes=0x20000000,rn(null,u);if(ej(c),(u=s7)?null!==(u=aq(u,ot))&&(c.memoizedState={dehydrated:u,treeContext:null!==s0?{id:s1,overflow:s2}:null,retryLane:0x20000000,hydrationErrors:null},(d=i1(u)).return=c,c.child=d,s6=c,s7=null):u=null,null===u)throw O(c);return c.lanes=0x20000000,null}return rs(c,A)}var f=u.memoizedState;if(null!==f){var m=f.dehydrated;if(ej(c),p)if(256&c.flags)c.flags&=-257,c=ro(u,c,d);else if(null!==c.memoizedState)c.child=u.child,c.flags|=128,c=null;else throw Error(i(558));else if(o4||Q(u,c,d,!1),p=(d&u.childLanes)!=0,o4||p){if(null!==(A=lp)&&0!==(m=x(A,d))&&m!==f.retryLane)throw f.retryLane=m,eC(u,m),im(A,u,m),o3;iE(),c=ro(u,c,d)}else u=f.treeContext,nV&&(s7=aO(m),s6=c,s9=!0,oe=null,ot=!1,null!==u&&I(c,u)),c=rs(c,A),c.flags|=4096;return c}return(u=iY(u.child,{mode:A.mode,children:A.children})).ref=c.ref,c.child=u,u.return=c,u;case 22:return ri(e,t,r,t.pendingProps);case 24:return Y(t),n=K(ou),null===e?(null===(a=ed())&&(a=lp,s=ee(),a.pooledCache=s,s.refCount++,null!==s&&(a.pooledCacheLanes|=r),a=s),t.memoizedState={parent:n,cache:a},eP(t),H(t,ou,a)):((e.lanes&r)!=0&&(eI(e,t),eU(t,null,null,r),eO()),a=e.memoizedState,s=t.memoizedState,a.parent!==n?(a={parent:n,cache:n},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),H(t,ou,n)):(H(t,ou,n=s.cache),n!==a.cache&&X(t,[ou],r,!0))),t9(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function rw(e){e.flags|=4}function rM(e){nz&&(e.flags|=8)}function rE(e,t){if(null!==e&&e.child===t.child)return!1;if((16&t.flags)!=0)return!0;for(e=t.child;null!==e;){if((8218&e.flags)!=0||(8218&e.subtreeFlags)!=0)return!0;e=e.sibling}return!1}function rC(e,t,r,i){if(nk)for(r=t.child;null!==r;){if(5===r.tag||6===r.tag)nP(e,r.stateNode);else if(!(4===r.tag||sf&&27===r.tag)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else if(nz)for(var n=t.child;null!==n;){if(5===n.tag){var a=n.stateNode;r&&i&&(a=aw(a,n.type,n.memoizedProps)),nP(e,a)}else if(6===n.tag)a=n.stateNode,r&&i&&(a=aM(a,n.memoizedProps)),nP(e,a);else if(4!==n.tag){if(22===n.tag&&null!==n.memoizedState)null!==(a=n.child)&&(a.return=n),rC(e,n,!0,!0);else if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function rR(e,t){if(nz&&rE(e,t)){var r=(e=t.stateNode).containerInfo,i=a_();(function e(t,r,i,n){var a=!1;if(nz)for(var s=r.child;null!==s;){if(5===s.tag){var o=s.stateNode;i&&n&&(o=aw(o,s.type,s.memoizedProps)),ab(t,o)}else if(6===s.tag)o=s.stateNode,i&&n&&(o=aM(o,s.memoizedProps)),ab(t,o);else if(4!==s.tag){if(22===s.tag&&null!==s.memoizedState)null!==(a=s.child)&&(a.return=s),e(t,s,!0,!0),a=!0;else if(null!==s.child){s.child.return=s,s=s.child;continue}}if(s===r)break;for(;null===s.sibling;){if(null===s.return||s.return===r)return a;s=s.return}s.sibling.return=s.return,s=s.sibling}return a})(i,t,!1,!1),e.pendingChildren=i,rw(t),aS(r,i)}}function rN(e,t,r,i){if(nk)e.memoizedProps!==i&&rw(t);else if(nz){var n=e.stateNode,a=e.memoizedProps;if((e=rE(e,t))||a!==i){var s=s3.current;(a=ax(n,r,a,i,!e,null))===n?t.stateNode=n:(rM(t),nI(a,r,i,s)&&rw(t),t.stateNode=a,e&&rC(a,t,!1,!1))}else t.stateNode=n}}function rP(e,t,r,i,n){if((32&e.mode)!=0&&(null===r?n$(t,i):nY(t,r,i))){if(e.flags|=0x1000000,(0x13ffff40&n)===n||nK(t,i))if(nZ(e.stateNode,t,i))e.flags|=8192;else if(iT())e.flags|=8192;else throw oM=ow,oS}else e.flags&=-0x1000001}function rI(e,t){if(sd(t)){if(e.flags|=0x1000000,!sA(t))if(iT())e.flags|=8192;else throw oM=ow,oS}else e.flags&=-0x1000001}function rL(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?f():0x20000000,e.lanes|=t,lC|=t)}function rD(e,t){if(!s9)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function rB(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,i|=0x3e00000&n.subtreeFlags,i|=0x3e00000&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function rF(e,t){switch(P(t),t.tag){case 3:j(ou),D();break;case 26:case 27:case 5:F(t);break;case 4:D();break;case 31:null!==t.memoizedState&&eQ(t);break;case 13:eQ(t);break;case 19:c(oz);break;case 10:j(t.type);break;case 22:case 23:eQ(t),eG(),null!==e&&c(o_);break;case 24:j(ou)}}function rO(e,t){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var n=i.next;r=n;do{if((r.tag&e)===e){i=void 0;var a=r.create;r.inst.destroy=i=a()}r=r.next}while(r!==n)}}catch(e){iq(t,t.return,e)}}function rU(e,t,r){try{var i=t.updateQueue,n=null!==i?i.lastEffect:null;if(null!==n){var a=n.next;i=a;do{if((i.tag&e)===e){var s=i.inst,o=s.destroy;if(void 0!==o){s.destroy=void 0,n=t;try{o()}catch(e){iq(n,r,e)}}}i=i.next}while(i!==a)}}catch(e){iq(t,t.return,e)}}function rk(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{ez(t,r)}catch(t){iq(e,e.return,t)}}}function rz(e,t,r){r.props=t3(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(r){iq(e,t,r)}}function rV(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var i=nw(e.stateNode);break;default:i=e.stateNode}"function"==typeof r?e.refCleanup=r(i):r.current=i}}catch(r){iq(e,t,r)}}function rq(e,t){var r=e.ref,i=e.refCleanup;if(null!==r)if("function"==typeof i)try{i()}catch(r){iq(e,t,r)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(r){iq(e,t,r)}else r.current=null}function rG(e){var t=e.type,r=e.memoizedProps,i=e.stateNode;try{al(i,t,r,e)}catch(t){iq(e,e.return,t)}}function rH(e,t,r){try{au(e.stateNode,e.type,r,t,e)}catch(t){iq(e,e.return,t)}}function rj(e){return 5===e.tag||3===e.tag||!!st&&26===e.tag||!!sf&&27===e.tag&&sx(e.type)||4===e.tag}function rW(e){h:for(;;){for(;null===e.sibling;){if(null===e.return||rj(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(sf&&27===e.tag&&sx(e.type)||2&e.flags||null===e.child||4===e.tag)continue h;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function rX(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ac(r,e,t):aa(r,e);else if(4!==i&&(sf&&27===i&&sx(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(rX(e,t,r),e=e.sibling;null!==e;)rX(e,t,r),e=e.sibling}function rQ(e,t,r){e=e.containerInfo;try{aT(e,r)}catch(e){iq(t,t.return,e)}}function r$(e){var t=e.stateNode,r=e.memoizedProps;try{sg(e.type,r,t,e)}catch(t){iq(e,e.return,t)}}function rY(e,t,r){var i=r.flags;switch(r.tag){case 0:case 11:case 15:r5(e,r),4&i&&rO(5,r);break;case 1:if(r5(e,r),4&i)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(e){iq(r,r.return,e)}else{var n=t3(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(e){iq(r,r.return,e)}}64&i&&rk(r),512&i&&rV(r,r.return);break;case 3:if(r5(e,r),64&i&&null!==(i=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 27:case 5:e=nw(r.child.stateNode);break;case 1:e=r.child.stateNode}try{ez(i,e)}catch(e){iq(r,r.return,e)}}break;case 27:sf&&null===t&&4&i&&r$(r);case 26:case 5:if(r5(e,r),null===t){if(4&i)rG(r);else if(64&i){e=r.type,t=r.memoizedProps,n=r.stateNode;try{aY(n,e,t,r)}catch(e){iq(r,r.return,e)}}}512&i&&rV(r,r.return);break;case 12:default:r5(e,r);break;case 31:r5(e,r),4&i&&rJ(e,r);break;case 13:r5(e,r),4&i&&r0(e,r),64&i&&null!==(i=r.memoizedState)&&null!==(i=i.dehydrated)&&aN(i,r=iW.bind(null,r));break;case 22:if(!(i=null!==r.memoizedState||o8)){t=null!==t&&null!==t.memoizedState||o6,n=o8;var a=o6;o8=i,(o6=t)&&!a?function e(t,r,i){for(i=i&&(8772&r.subtreeFlags)!=0,r=r.child;null!==r;){var n=r.alternate,a=t,s=r,o=s.flags;switch(s.tag){case 0:case 11:case 15:e(a,s,i),rO(4,s);break;case 1:if(e(a,s,i),"function"==typeof(a=(n=s).stateNode).componentDidMount)try{a.componentDidMount()}catch(e){iq(n,n.return,e)}if(null!==(a=(n=s).updateQueue)){var l=n.stateNode;try{var u=a.shared.hiddenCallbacks;if(null!==u)for(a.shared.hiddenCallbacks=null,a=0;a<u.length;a++)ek(u[a],l)}catch(e){iq(n,n.return,e)}}i&&64&o&&rk(s),rV(s,s.return);break;case 27:sf&&r$(s);case 26:case 5:e(a,s,i),i&&null===n&&4&o&&rG(s),rV(s,s.return);break;case 12:default:e(a,s,i);break;case 31:e(a,s,i),i&&4&o&&rJ(a,s);break;case 13:e(a,s,i),i&&4&o&&r0(a,s);break;case 22:null===s.memoizedState&&e(a,s,i),rV(s,s.return);case 30:}r=r.sibling}}(e,r,(8772&r.subtreeFlags)!=0):r5(e,r),o8=n,o6=a}case 30:}}function rK(e,t,r){for(r=r.child;null!==r;)rZ(e,t,r),r=r.sibling}function rZ(e,t,r){if(sq&&"function"==typeof sq.onCommitFiberUnmount)try{sq.onCommitFiberUnmount(sV,r)}catch{}switch(r.tag){case 26:if(st){o6||rq(r,t),rK(e,t,r),r.memoizedState?ss(r.memoizedState):r.stateNode&&su(r.stateNode);break}case 27:if(sf){o6||rq(r,t);var i=lt,n=lr;sx(r.type)&&(lt=r.stateNode,lr=!1),rK(e,t,r),sy(r.stateNode),lt=i,lr=n;break}case 5:o6||rq(r,t);case 6:if(nk){if(i=lt,n=lr,lt=null,rK(e,t,r),lt=i,lr=n,null!==lt)if(lr)try{aA(lt,r.stateNode)}catch(e){iq(r,t,e)}else try{ad(lt,r.stateNode)}catch(e){iq(r,t,e)}}else rK(e,t,r);break;case 18:nk&&null!==lt&&(lr?a3(lt,r.stateNode):a2(lt,r.stateNode));break;case 4:nk?(i=lt,n=lr,lt=r.stateNode.containerInfo,lr=!0,rK(e,t,r),lt=i,lr=n):(nz&&rQ(r.stateNode,r,a_()),rK(e,t,r));break;case 0:case 11:case 14:case 15:rU(2,r,t),o6||rU(4,r,t),rK(e,t,r);break;case 1:o6||(rq(r,t),"function"==typeof(i=r.stateNode).componentWillUnmount&&rz(r,t,i)),rK(e,t,r);break;case 21:default:rK(e,t,r);break;case 22:o6=(i=o6)||null!==r.memoizedState,rK(e,t,r),o6=i}}function rJ(e,t){if(nV&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)){e=e.dehydrated;try{aZ(e)}catch(e){iq(t,t.return,e)}}}function r0(e,t){if(nV&&null===t.memoizedState&&null!==(e=t.alternate)&&null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))try{aJ(e)}catch(e){iq(t,t.return,e)}}function r1(e,t){var r=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new o9),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new o9),t;default:throw Error(i(435,e.tag))}}(e);t.forEach(function(t){if(!r.has(t)){r.add(t);var i=iX.bind(null,e,t);t.then(i,i)}})}function r2(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var a=r[n],s=e,o=t;if(nk){var l=o;h:for(;null!==l;){switch(l.tag){case 27:if(sf){if(sx(l.type)){lt=l.stateNode,lr=!1;break h}break}case 5:lt=l.stateNode,lr=!1;break h;case 3:case 4:lt=l.stateNode.containerInfo,lr=!0;break h}l=l.return}if(null===lt)throw Error(i(160));rZ(s,o,a),lt=null,lr=!1}else rZ(s,o,a);null!==(s=a.alternate)&&(s.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)r3(t,e),t=t.sibling}function r3(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:r2(t,e),r4(e),4&n&&(rU(3,e,e.return),rO(3,e),rU(5,e,e.return));break;case 1:r2(t,e),r4(e),512&n&&(o6||null===r||rq(r,r.return)),64&n&&o8&&null!==(e=e.updateQueue)&&null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n));break;case 26:if(st){var a=li;if(r2(t,e),r4(e),512&n&&(o6||null===r||rq(r,r.return)),4&n){n=null!==r?r.memoizedState:null;var s=e.memoizedState;null===r?null===s?null===e.stateNode?e.stateNode=so(a,e.type,e.memoizedProps,e):sl(a,e.type,e.stateNode):e.stateNode=sa(a,s,e.memoizedProps):n!==s?(null===n?null!==r.stateNode&&su(r.stateNode):ss(n),null===s?sl(a,e.type,e.stateNode):sa(a,s,e.memoizedProps)):null===s&&null!==e.stateNode&&rH(e,e.memoizedProps,r.memoizedProps)}break}case 27:if(sf){r2(t,e),r4(e),512&n&&(o6||null===r||rq(r,r.return)),null!==r&&4&n&&rH(e,e.memoizedProps,r.memoizedProps);break}case 5:if(r2(t,e),r4(e),512&n&&(o6||null===r||rq(r,r.return)),nk){if(32&e.flags){a=e.stateNode;try{ap(a)}catch(t){iq(e,e.return,t)}}4&n&&null!=e.stateNode&&(a=e.memoizedProps,rH(e,a,null!==r?r.memoizedProps:a)),1024&n&&(o7=!0)}else nz&&null!==e.alternate&&(e.alternate.stateNode=e.stateNode);break;case 6:if(r2(t,e),r4(e),4&n&&nk){if(null===e.stateNode)throw Error(i(162));n=e.memoizedProps,r=null!==r?r.memoizedProps:n,a=e.stateNode;try{ao(a,r,n)}catch(t){iq(e,e.return,t)}}break;case 3:if(st?(sh(),a=li,li=si(t.containerInfo),r2(t,e),li=a):r2(t,e),r4(e),4&n){if(nk&&nV&&null!==r&&r.memoizedState.isDehydrated)try{aK(t.containerInfo)}catch(t){iq(e,e.return,t)}if(nz){n=t.containerInfo,r=t.pendingChildren;try{aT(n,r)}catch(t){iq(e,e.return,t)}}}o7&&(o7=!1,function e(t){if(1024&t.subtreeFlags)for(t=t.child;null!==t;){var r=t;e(r),5===r.tag&&1024&r.flags&&n4(r.stateNode),t=t.sibling}}(e));break;case 4:st?(r=li,li=si(e.stateNode.containerInfo),r2(t,e),r4(e),li=r):(r2(t,e),r4(e)),4&n&&nz&&rQ(e.stateNode,e,e.stateNode.pendingChildren);break;case 12:default:r2(t,e),r4(e);break;case 31:case 19:r2(t,e),r4(e),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,r1(e,n));break;case 13:r2(t,e),r4(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&(lI=sD()),4&n&&null!==(n=e.updateQueue)&&(e.updateQueue=null,r1(e,n));break;case 22:a=null!==e.memoizedState;var o=null!==r&&null!==r.memoizedState,l=o8,u=o6;if(o8=l||a,o6=u||o,r2(t,e),o6=u,o8=l,r4(e),8192&n&&((t=e.stateNode)._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||o||o8||o6||function e(t){for(t=t.child;null!==t;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:rU(4,r,r.return),e(r);break;case 1:rq(r,r.return);var i=r.stateNode;"function"==typeof i.componentWillUnmount&&rz(r,r.return,i),e(r);break;case 27:sf&&sy(r.stateNode);case 26:case 5:rq(r,r.return),e(r);break;case 22:null===r.memoizedState&&e(r);break;default:e(r)}t=t.sibling}}(e)),nk)){h:if(r=null,nk)for(t=e;;){if(5===t.tag||st&&26===t.tag){if(null===r){o=r=t;try{s=o.stateNode,a?af(s):ag(o.stateNode,o.memoizedProps)}catch(e){iq(o,o.return,e)}}}else if(6===t.tag){if(null===r){o=t;try{var c=o.stateNode;a?am(c):ay(c,o.memoizedProps)}catch(e){iq(o,o.return,e)}}}else if(18===t.tag){if(null===r){o=t;try{var h=o.stateNode;a?a4(h):a5(o.stateNode)}catch(e){iq(o,o.return,e)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break h;for(;null===t.sibling;){if(null===t.return||t.return===e)break h;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}}4&n&&null!==(n=e.updateQueue)&&null!==(r=n.retryQueue)&&(n.retryQueue=null,r1(e,r));case 30:case 21:}}function r4(e){var t=e.flags;if(2&t){try{for(var r,n=e.return;null!==n;){if(rj(n)){r=n;break}n=n.return}if(nk){if(null==r)throw Error(i(160));switch(r.tag){case 27:if(sf){var a=r.stateNode,s=rW(e);rX(e,s,a);break}case 5:var o=r.stateNode;32&r.flags&&(ap(o),r.flags&=-33);var l=rW(e);rX(e,l,o);break;case 3:case 4:var u=r.stateNode.containerInfo,c=rW(e);!function e(t,r,i){var n=t.tag;if(5===n||6===n)t=t.stateNode,r?ah(i,t,r):as(i,t);else if(4!==n&&(sf&&27===n&&sx(t.type)&&(i=t.stateNode,r=null),null!==(t=t.child)))for(e(t,r,i),t=t.sibling;null!==t;)e(t,r,i),t=t.sibling}(e,c,u);break;default:throw Error(i(161))}}}catch(t){iq(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function r5(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)rY(e,t.alternate,t),t=t.sibling}function r8(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&et(r))}function r6(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&et(e))}function r7(e,t,r,i){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)r9(e,t,r,i),t=t.sibling}function r9(e,t,r,i){var n=t.flags;switch(t.tag){case 0:case 11:case 15:r7(e,t,r,i),2048&n&&rO(9,t);break;case 1:case 31:case 13:default:r7(e,t,r,i);break;case 3:r7(e,t,r,i),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&et(e)));break;case 12:if(2048&n){r7(e,t,r,i),e=t.stateNode;try{var a=t.memoizedProps,s=a.id,o=a.onPostCommit;"function"==typeof o&&o(s,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(e){iq(t,t.return,e)}}else r7(e,t,r,i);break;case 23:break;case 22:a=t.stateNode,s=t.alternate,null!==t.memoizedState?2&a._visibility?r7(e,t,r,i):ie(e,t):2&a._visibility?r7(e,t,r,i):(a._visibility|=2,function e(t,r,i,n,a){for(a=a&&(10256&r.subtreeFlags)!=0,r=r.child;null!==r;){var s=r,o=s.flags;switch(s.tag){case 0:case 11:case 15:e(t,s,i,n,a),rO(8,s);break;case 23:break;case 22:var l=s.stateNode;null!==s.memoizedState?2&l._visibility?e(t,s,i,n,a):ie(t,s):(l._visibility|=2,e(t,s,i,n,a)),a&&2048&o&&r8(s.alternate,s);break;case 24:e(t,s,i,n,a),a&&2048&o&&r6(s.alternate,s);break;default:e(t,s,i,n,a)}r=r.sibling}}(e,t,r,i,(10256&t.subtreeFlags)!=0)),2048&n&&r8(s,t);break;case 24:r7(e,t,r,i),2048&n&&r6(t.alternate,t)}}function ie(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=t,i=r.flags;switch(r.tag){case 22:ie(e,r),2048&i&&r8(r.alternate,r);break;case 24:ie(e,r),2048&i&&r6(r.alternate,r);break;default:ie(e,r)}t=t.sibling}}function it(e,t,r){if(e.subtreeFlags&ln)for(e=e.child;null!==e;)ir(e,t,r),e=e.sibling}function ir(e,t,r){switch(e.tag){case 26:if(it(e,t,r),e.flags&ln)if(null!==e.memoizedState)sp(r,li,e.memoizedState,e.memoizedProps);else{var i=e.stateNode,n=e.type;e=e.memoizedProps,((0x13ffff40&t)===t||nK(n,e))&&n0(r,i,n,e)}break;case 5:it(e,t,r),e.flags&ln&&(i=e.stateNode,n=e.type,e=e.memoizedProps,((0x13ffff40&t)===t||nK(n,e))&&n0(r,i,n,e));break;case 3:case 4:st?(i=li,li=si(e.stateNode.containerInfo),it(e,t,r),li=i):it(e,t,r);break;case 22:null===e.memoizedState&&(null!==(i=e.alternate)&&null!==i.memoizedState?(i=ln,ln=0x1000000,it(e,t,r),ln=i):it(e,t,r));break;default:it(e,t,r)}}function ii(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(null!==e)}}function ia(e){var t=e.deletions;if((16&e.flags)!=0){if(null!==t)for(var r=0;r<t.length;r++){var i=t[r];le=i,io(i,e)}ii(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)is(e),e=e.sibling}function is(e){switch(e.tag){case 0:case 11:case 15:ia(e),2048&e.flags&&rU(9,e,e.return);break;case 3:case 12:default:ia(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,function e(t){var r=t.deletions;if((16&t.flags)!=0){if(null!==r)for(var i=0;i<r.length;i++){var n=r[i];le=n,io(n,t)}ii(t)}for(t=t.child;null!==t;){switch((r=t).tag){case 0:case 11:case 15:rU(8,r,r.return),e(r);break;case 22:2&(i=r.stateNode)._visibility&&(i._visibility&=-3,e(r));break;default:e(r)}t=t.sibling}}(e)):ia(e)}}function io(e,t){for(;null!==le;){var r=le;switch(r.tag){case 0:case 11:case 15:rU(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var i=r.memoizedState.cachePool.pool;null!=i&&i.refCount++}break;case 24:et(r.memoizedState.cache)}if(null!==(i=r.child))i.return=r,le=i;else for(r=e;null!==le;){var n=(i=le).sibling,a=i.return;if(function e(t){var r=t.alternate;null!==r&&(t.alternate=null,e(r)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(r=t.stateNode)&&nQ(r),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(i),i===r){le=null;break}if(null!==n){n.return=a,le=n;break}le=a}}}function il(e){var t=nq(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(i(364));return t}if(null===(e=n7(e)))throw Error(i(362));return e.stateNode.current}function iu(e,t){var r=e.tag;switch(t.$$typeof){case ls:if(e.type===t.value)return!0;break;case lo:h:{for(t=t.value,e=[e,0],r=0;r<e.length;){var n=e[r++],a=n.tag,s=e[r++],o=t[s];if(5!==a&&26!==a&&27!==a||!at(n)){for(;null!=o&&iu(n,o);)o=t[++s];if(s===t.length){t=!0;break h}for(n=n.child;null!==n;)e.push(n,s),n=n.sibling}}t=!1}return t;case ll:if((5===r||26===r||27===r)&&ar(e.stateNode,t.value))return!0;break;case lc:if((5===r||6===r||26===r||27===r)&&null!==(e=ae(e))&&0<=e.indexOf(t.value))return!0;break;case lu:if((5===r||26===r||27===r)&&"string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase())return!0;break;default:throw Error(i(365))}return!1}function ic(e){switch(e.$$typeof){case ls:return"<"+(l(e.value)||"Unknown")+">";case lo:return":has("+(ic(e)||"")+")";case ll:return'[role="'+e.value+'"]';case lc:return'"'+e.value+'"';case lu:return'[data-testname="'+e.value+'"]';default:throw Error(i(365))}}function ih(e,t){var r=[];e=[e,0];for(var i=0;i<e.length;){var n=e[i++],a=n.tag,s=e[i++],o=t[s];if(5!==a&&26!==a&&27!==a||!at(n)){for(;null!=o&&iu(n,o);)o=t[++s];if(s===t.length)r.push(n);else for(n=n.child;null!==n;)e.push(n,s),n=n.sibling}}return r}function id(e,t){if(!n6)throw Error(i(363));e=ih(e=il(e),t),t=[],e=Array.from(e);for(var r=0;r<e.length;){var n=e[r++],a=n.tag;if(5===a||26===a||27===a)at(n)||t.push(n.stateNode);else for(n=n.child;null!==n;)e.push(n),n=n.sibling}return t}function iA(){return(2&lA)!=0&&0!==lm?lm&-lm:null!==n_.T?ec():nW()}function ip(){if(0===lE)if((0x20000000&lm)==0||s9){var e=sC;(3932160&(sC<<=1))==0&&(sC=262144),lE=e}else lE=0x20000000;return null!==(e=oU.current)&&(e.flags|=32),lE}function im(e,t,r){(e===lp&&(2===lg||9===lg)||null!==e.cancelPendingCommit)&&(ib(e,0),iv(e,lm,lE,!1)),g(e,r),((2&lA)==0||e!==lp)&&(e===lp&&((2&lA)==0&&(lw|=r),4===lS&&iv(e,lm,lE,!1)),ei(e))}function ig(e,t,r){if((6&lA)!=0)throw Error(i(327));for(var n=!r&&(127&t)==0&&(t&e.expiredLanes)==0||p(e,t),a=n?function(e,t){var r=lA;lA|=2;var n=iw(),a=iM();lp!==e||lm!==t?(lB=null,lD=sD()+500,ib(e,t)):lx=p(e,t);h:for(;;)try{if(0!==lg&&null!==lf){t=lf;var s=ly;g:switch(lg){case 1:lg=0,ly=null,iP(e,t,s,1);break;case 2:case 9:if(em(s)){lg=0,ly=null,iN(t);break}t=function(){2!==lg&&9!==lg||lp!==e||(lg=7),ei(e)},s.then(t,t);break h;case 3:lg=7;break h;case 4:lg=5;break h;case 7:em(s)?(lg=0,ly=null,iN(t)):(lg=0,ly=null,iP(e,t,s,7));break;case 5:var o=null;switch(lf.tag){case 26:o=lf.memoizedState;case 5:case 27:var l=lf,u=l.type,c=l.pendingProps;if(o?sA(o):nZ(l.stateNode,u,c)){lg=0,ly=null;var h=l.sibling;if(null!==h)lf=h;else{var d=l.return;null!==d?(lf=d,iI(d)):lf=null}break g}}lg=0,ly=null,iP(e,t,s,5);break;case 6:lg=0,ly=null,iP(e,t,s,6);break;case 8:i_(),lS=6;break h;default:throw Error(i(462))}}for(;null!==lf&&!sI();)iR(lf);break}catch(t){iS(e,t)}return oa=on=null,n_.H=n,n_.A=a,lA=r,null!==lf?0:(lp=null,lm=0,ew(),lS)}(e,t):iC(e,t,!0),s=n;;){if(0===a)lx&&!n&&iv(e,t,0,!1);else{if(r=e.current.alternate,s&&!function(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&null!==(r=t.updateQueue)&&null!==(r=r.stores))for(var i=0;i<r.length;i++){var n=r[i],a=n.getSnapshot;n=n.value;try{if(!sG(a(),n))return!1}catch{return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)){a=iC(e,t,!1),s=!1;continue}if(2===a){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!=(o=-0x20000001&e.pendingLanes)?o:0x20000000&o?0x20000000:0;if(0!==o){t=o;h:{a=lR;var l=nV&&e.current.memoizedState.isDehydrated;if(l&&(ib(e,o).flags|=256),2!==(o=iC(e,o,!1))){if(l_&&!l){e.errorRecoveryDisabledLanes|=s,lw|=s,a=4;break h}s=lN,lN=a,null!==s&&(null===lN?lN=s:lN.push.apply(lN,s))}a=o}if(s=!1,2!==a)continue}}if(1===a){ib(e,0),iv(e,t,0,!0);break}h:{switch(n=e,s=a){case 0:case 1:throw Error(i(345));case 4:if((4194048&t)!==t)break;case 6:iv(n,t,lE,!lv);break h;case 2:lN=null;break;case 3:case 5:break;default:throw Error(i(329))}if((0x3c00000&t)===t&&10<(a=lI+300-sD())){if(iv(n,t,lE,!lv),0!==A(n,0,!0))break h;lz=t,n.timeoutHandle=nB(iy.bind(null,n,r,lN,lB,lP,t,lE,lw,lC,lv,s,"Throttled",-0,0),a);break h}iy(n,r,lN,lB,lP,t,lE,lw,lC,lv,s,null,-0,0)}}break}ei(e)}function iy(e,t,r,i,n,a,s,o,l,u,c,h,d,A){if(e.timeoutHandle=nO,8192&(h=t.subtreeFlags)||(0x1002000&h)==0x1002000){ir(t,a,h=nJ());var p=(0x3c00000&a)===a?lI-sD():(4194048&a)===a?lL-sD():0;if(null!==(p=n1(h,p))){lz=a,e.cancelPendingCommit=p(iD.bind(null,e,t,a,r,i,n,s,o,l,c,h,null,d,A)),iv(e,a,s,!u);return}}iD(e,t,a,r,i,n,s,o,l)}function iv(e,t,r,i){t&=~lM,t&=~lw,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var n=t;0<n;){var a=31-sT(n),s=1<<a;i[a]=-1,n&=~s}0!==r&&y(e,r,t)}function ix(){return(6&lA)!=0||(en(0,!1),!1)}function i_(){if(null!==lf){if(0===lg)var e=lf.return;else e=lf,oa=on=null,e4(e),oE=null,oC=0,e=lf;for(;null!==e;)rF(e.alternate,e),e=e.return;lf=null}}function ib(e,t){var r=e.timeoutHandle;r!==nO&&(e.timeoutHandle=nO,nF(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),lz=0,i_(),lp=e,lf=r=iY(e.current,null),lm=t,lg=0,ly=null,lv=!1,lx=p(e,t),l_=!1,lC=lE=lM=lw=lT=lS=0,lN=lR=null,lP=!1,(8&t)!=0&&(t|=32&t);var i=e.entangledLanes;if(0!==i)for(e=e.entanglements,i&=t;0<i;){var n=31-sT(i),a=1<<n;t|=e[n],i&=~a}return lb=t,ew(),r}function iS(e,t){oq=null,n_.H=oZ,t===ob||t===oT?(t=ev(),lg=3):t===oS?(t=ev(),lg=4):lg=t===o3?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,ly=t,null===lf&&(lS=1,t4(e,E(t,e.current)))}function iT(){var e=oU.current;return null===e||((4194048&lm)===lm?null===ok:((0x3c00000&lm)===lm||(0x20000000&lm)!=0)&&e===ok)}function iw(){var e=n_.H;return n_.H=oZ,null===e?oZ:e}function iM(){var e=n_.A;return n_.A=la,e}function iE(){lS=4,lv||(4194048&lm)!==lm&&null!==oU.current||(lx=!0),(0x7ffffff&lT)==0&&(0x7ffffff&lw)==0||null===lp||iv(lp,lm,lE,!1)}function iC(e,t,r){var i=lA;lA|=2;var n=iw(),a=iM();(lp!==e||lm!==t)&&(lB=null,ib(e,t)),t=!1;var s=lS;h:for(;;)try{if(0!==lg&&null!==lf){var o=lf,l=ly;switch(lg){case 8:i_(),s=6;break h;case 3:case 2:case 9:case 6:null===oU.current&&(t=!0);var u=lg;if(lg=0,ly=null,iP(e,o,l,u),r&&lx){s=0;break h}break;default:u=lg,lg=0,ly=null,iP(e,o,l,u)}}(function(){for(;null!==lf;)iR(lf)})(),s=lS;break}catch(t){iS(e,t)}return t&&e.shellSuspendCounter++,oa=on=null,lA=i,n_.H=n,n_.A=a,null===lf&&(lp=null,lm=0,ew()),s}function iR(e){var t=rT(e.alternate,e,lb);e.memoizedProps=e.pendingProps,null===t?iI(e):lf=t}function iN(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=rc(r,t,t.pendingProps,t.type,void 0,lm);break;case 11:t=rc(r,t,t.pendingProps,t.type.render,t.ref,lm);break;case 5:e4(t);default:rF(r,t),t=rT(r,t=lf=iK(t,lb),lb)}e.memoizedProps=e.pendingProps,null===t?iI(e):lf=t}function iP(e,t,r,n){oa=on=null,e4(t),oE=null,oC=0;var a=t.return;try{if(function(e,t,r,n,a){if(r.flags|=32768,null!==n&&"object"==typeof n&&"function"==typeof n.then){if(null!==(t=r.alternate)&&Q(t,r,a,!0),null!==(r=oU.current)){switch(r.tag){case 31:case 13:return null===ok?iE():null===r.alternate&&0===lS&&(lS=3),r.flags&=-257,r.flags|=65536,r.lanes=a,n===ow?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([n]):t.add(n),iG(e,n,a)),!1;case 22:return r.flags|=65536,n===ow?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([n]):r.add(n),iG(e,n,a)),!1}throw Error(i(435,r.tag))}return iG(e,n,a),iE(),!1}if(s9)return null!==(t=oU.current)?((65536&t.flags)==0&&(t.flags|=256),t.flags|=65536,t.lanes=a,n!==or&&G(E(e=Error(i(422),{cause:n}),r))):(n!==or&&G(E(t=Error(i(423),{cause:n}),r)),e=e.current.alternate,e.flags|=65536,a&=-a,e.lanes|=a,n=E(n,r),a=t8(e.stateNode,n,a),eF(e,a),4!==lS&&(lS=2)),!1;var s=Error(i(520),{cause:n});if(s=E(s,r),null===lR?lR=[s]:lR.push(s),4!==lS&&(lS=2),null===t)return!0;n=E(n,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,e=t8(r.stateNode,n,e),eF(r,e),!1;case 1:if(t=r.type,s=r.stateNode,(128&r.flags)==0&&("function"==typeof t.getDerivedStateFromError||null!==s&&"function"==typeof s.componentDidCatch&&(null===lF||!lF.has(s))))return r.flags|=65536,a&=-a,r.lanes|=a,t7(a=t6(a),e,r,n),eF(r,a),!1}r=r.return}while(null!==r)return!1}(e,a,t,r,lm)){lS=1,t4(e,E(r,e.current)),lf=null;return}}catch(t){if(null!==a)throw lf=a,t;lS=1,t4(e,E(r,e.current)),lf=null;return}32768&t.flags?(s9||1===n?e=!0:lx||(0x20000000&lm)!=0?e=!1:(lv=e=!0,(2===n||9===n||3===n||6===n)&&null!==(n=oU.current)&&13===n.tag&&(n.flags|=16384)),iL(t,e)):iI(t)}function iI(e){var t=e;do{if((32768&t.flags)!=0)return void iL(t,lv);e=t.return;var r=function(e,t,r){var n=t.pendingProps;switch(P(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rB(t),null;case 3:return r=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),j(ou),D(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(z(t)?rw(t):null===e||e.memoizedState.isDehydrated&&(256&t.flags)==0||(t.flags|=1024,q())),rR(e,t),rB(t),null;case 26:if(st){var a=t.type,s=t.memoizedState;return null===e?(rw(t),null!==s?(rB(t),rI(t,s)):(rB(t),rP(t,a,null,n,r))):s?s!==e.memoizedState?(rw(t),rB(t),rI(t,s)):(rB(t),t.flags&=-0x1000001):(s=e.memoizedProps,nk?s!==n&&rw(t):rN(e,t,a,n),rB(t),rP(t,a,s,n,r)),null}case 27:if(sf){if(F(t),r=s5.current,a=t.type,null!==e&&null!=t.stateNode)nk?e.memoizedProps!==n&&rw(t):rN(e,t,a,n);else{if(!n){if(null===t.stateNode)throw Error(i(166));return rB(t),null}e=s3.current,z(t)?U(t,e):(t.stateNode=e=sm(a,n,r,e,!0),rw(t))}return rB(t),null}case 5:if(F(t),a=t.type,null!==e&&null!=t.stateNode)rN(e,t,a,n);else{if(!n){if(null===t.stateNode)throw Error(i(166));return rB(t),null}if(s=s3.current,z(t))U(t,s),a0(t.stateNode,a,n,s)&&(t.flags|=64);else{var o=nN(a,n,s5.current,s,t);rM(t),rC(o,t,!1,!1),t.stateNode=o,nI(o,a,n,s)&&rw(t)}}return rB(t),rP(t,t.type,null===e?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&null!=t.stateNode)r=e.memoizedProps,nk?r!==n&&rw(t):nz&&(r!==n?(e=s5.current,r=s3.current,rM(t),t.stateNode=nD(n,e,r,t)):t.stateNode=e.stateNode);else{if("string"!=typeof n&&null===t.stateNode)throw Error(i(166));if(e=s5.current,r=s3.current,z(t)){if(!nV)throw Error(i(176));if(e=t.stateNode,r=t.memoizedProps,n=null,null!==(a=s6))switch(a.tag){case 27:case 5:n=a.memoizedProps}aj(e,r,t,n)||O(t,!0)}else rM(t),t.stateNode=nD(n,e,r,t)}return rB(t),null;case 31:if(r=t.memoizedState,null===e||null!==e.memoizedState){if(n=z(t),null!==r){if(null===e){if(!n)throw Error(i(318));if(!nV)throw Error(i(556));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(i(557));aW(e,t)}else V(),(128&t.flags)==0&&(t.memoizedState=null),t.flags|=4;rB(t),e=!1}else r=q(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return 256&t.flags?(eQ(t),t):(eQ(t),null);if((128&t.flags)!=0)throw Error(i(558))}return rB(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=z(t),null!==n&&null!==n.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!nV)throw Error(i(344));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));aX(a,t)}else V(),(128&t.flags)==0&&(t.memoizedState=null),t.flags|=4;rB(t),a=!1}else a=q(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(eQ(t),t):(eQ(t),null)}return eQ(t),(128&t.flags)!=0?(t.lanes=r,t):(r=null!==n,e=null!==e&&null!==e.memoizedState,r&&(n=t.child,a=null,null!==n.alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(a=n.alternate.memoizedState.cachePool.pool),s=null,null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(s=n.memoizedState.cachePool.pool),s!==a&&(n.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),rL(t,t.updateQueue),rB(t),null);case 4:return D(),rR(e,t),null===e&&nG(t.stateNode.containerInfo),rB(t),null;case 10:return j(t.type),rB(t),null;case 19:if(c(oz),null===(n=t.memoizedState))return rB(t),null;if(a=(128&t.flags)!=0,null===(s=n.rendering))if(a)rD(n,!1);else{if(0!==lS||null!==e&&(128&e.flags)!=0)for(e=t.child;null!==e;){if(null!==(s=e$(e))){for(t.flags|=128,rD(n,!1),t.updateQueue=e=s.updateQueue,rL(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)iK(r,e),r=r.sibling;return h(oz,1&oz.current|2),s9&&C(t,n.treeForkCount),t.child}e=e.sibling}null!==n.tail&&sD()>lD&&(t.flags|=128,a=!0,rD(n,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=e$(s))){if(t.flags|=128,a=!0,t.updateQueue=e=e.updateQueue,rL(t,e),rD(n,!0),null===n.tail&&"hidden"===n.tailMode&&!s.alternate&&!s9)return rB(t),null}else 2*sD()-n.renderingStartTime>lD&&0x20000000!==r&&(t.flags|=128,a=!0,rD(n,!1),t.lanes=4194304);n.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=n.last)?e.sibling=s:t.child=s,n.last=s)}return null!==n.tail?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=sD(),e.sibling=null,r=oz.current,h(oz,a?1&r|2:1&r),s9&&C(t,n.treeForkCount),e):(rB(t),null);case 22:case 23:return eQ(t),eG(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(0x20000000&r)!=0&&(128&t.flags)==0&&(rB(t),6&t.subtreeFlags&&(t.flags|=8192)):rB(t),null!==(r=t.updateQueue)&&rL(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==r&&(t.flags|=2048),null!==e&&c(o_),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),j(ou),rB(t),null;case 25:case 30:return null}throw Error(i(156,t.tag))}(t.alternate,t,lb);if(null!==r){lf=r;return}if(null!==(t=t.sibling)){lf=t;return}lf=t=e}while(null!==t)0===lS&&(lS=5)}function iL(e,t){do{var r=function(e,t){switch(P(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return j(ou),D(),(65536&(e=t.flags))!=0&&(128&e)==0?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return F(t),null;case 31:if(null!==t.memoizedState){if(eQ(t),null===t.alternate)throw Error(i(340));V()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(eQ(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));V()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return c(oz),null;case 4:return D(),null;case 10:return j(t.type),null;case 22:case 23:return eQ(t),eG(),null!==e&&c(o_),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return j(ou),null;default:return null}}(e.alternate,e);if(null!==r){r.flags&=32767,lf=r;return}if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling)){lf=e;return}lf=e=r}while(null!==e)lS=6,lf=null}function iD(e,t,r,n,a,s,o,l,u){e.cancelPendingCommit=null;do ik();while(0!==lO)if((6&lA)!=0)throw Error(i(327));if(null!==t){if(t===e.current)throw Error(i(177));if(function(e,t,r,i,n,a){var s=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(r=s&~r;0<r;){var c=31-sT(r),h=1<<c;o[c]=0,l[c]=-1;var d=u[c];if(null!==d)for(u[c]=null,c=0;c<d.length;c++){var A=d[c];null!==A&&(A.lane&=-0x20000001)}r&=~h}0!==i&&y(e,i,0),0!==a&&0===n&&0!==e.tag&&(e.suspendedLanes|=a&~(s&~t))}(e,r,s=t.lanes|t.childLanes|oL,o,l,u),e===lp&&(lf=lp=null,lm=0),lk=t,lU=e,lz=r,lV=s,lq=a,lG=n,(10256&t.subtreeFlags)!=0||(10256&t.flags)!=0?(e.callbackNode=null,e.callbackPriority=0,sN(sO,function(){return iz(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(13878&t.flags)!=0,(13878&t.subtreeFlags)!=0||n){n=n_.T,n_.T=null,a=nj(),nH(2),o=lA,lA|=4;try{!function(e,t){for(nC(e.containerInfo),le=t;null!==le;)if(t=(e=le).child,(1028&e.subtreeFlags)!=0&&null!==t)t.return=e,le=t;else for(;null!==le;){var r=(e=le).alternate;switch(t=e.flags,e.tag){case 0:if((4&t)!=0&&null!==(t=null!==(t=e.updateQueue)?t.events:null))for(var n=0;n<t.length;n++){var a=t[n];a.ref.impl=a.nextImpl}break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if((1024&t)!=0&&null!==r){t=void 0,n=e,a=r.memoizedProps,r=r.memoizedState;var s=n.stateNode;try{var o=t3(n.type,a);t=s.getSnapshotBeforeUpdate(o,r),s.__reactInternalSnapshotBeforeUpdate=t}catch(e){iq(n,n.return,e)}}break;case 3:(1024&t)!=0&&nk&&av(e.stateNode.containerInfo);break;default:if((1024&t)!=0)throw Error(i(163))}if(null!==(t=e.sibling)){t.return=e.return,le=t;break}le=e.return}}(e,t,r)}finally{lA=o,nH(a),n_.T=n}}lO=1,iB(),iF(),iO()}}function iB(){if(1===lO){lO=0;var e=lU,t=lk,r=(13878&t.flags)!=0;if((13878&t.subtreeFlags)!=0||r){r=n_.T,n_.T=null;var i=nj();nH(2);var n=lA;lA|=4;try{r3(t,e),nR(e.containerInfo)}finally{lA=n,nH(i),n_.T=r}}e.current=t,lO=2}}function iF(){if(2===lO){lO=0;var e=lU,t=lk,r=(8772&t.flags)!=0;if((8772&t.subtreeFlags)!=0||r){r=n_.T,n_.T=null;var i=nj();nH(2);var n=lA;lA|=4;try{rY(e,t.alternate,t)}finally{lA=n,nH(i),n_.T=r}}lO=3}}function iO(){if(4===lO||3===lO){lO=0,sL();var e=lU,t=lk,r=lz,i=lG;(10256&t.subtreeFlags)!=0||(10256&t.flags)!=0?lO=5:(lO=0,lk=lU=null,iU(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(lF=null),b(r),t=t.stateNode,sq&&"function"==typeof sq.onCommitFiberRoot)try{sq.onCommitFiberRoot(sV,t,void 0,(128&t.current.flags)==128)}catch{}if(null!==i){t=n_.T,n=nj(),nH(2),n_.T=null;try{for(var a=e.onRecoverableError,s=0;s<i.length;s++){var o=i[s];a(o.value,{componentStack:o.stack})}}finally{n_.T=t,nH(n)}}(3&lz)!=0&&ik(),ei(e),n=e.pendingLanes,(261930&r)!=0&&(42&n)!=0?e===lj?lH++:(lH=0,lj=e):lH=0,nV&&a1(),en(0,!1)}}function iU(e,t){0==(e.pooledCacheLanes&=t)&&null!=(t=e.pooledCache)&&(e.pooledCache=null,et(t))}function ik(){return iB(),iF(),iO(),iz()}function iz(){if(5!==lO)return!1;var e=lU,t=lV;lV=0;var r=b(lz),n=32>r?32:r;r=n_.T;var a=nj();try{nH(n),n_.T=null,n=lq,lq=null;var s=lU,o=lz;if(lO=0,lk=lU=null,lz=0,(6&lA)!=0)throw Error(i(331));var l=lA;if(lA|=4,is(s.current),r9(s,s.current,o,n),lA=l,en(0,!1),sq&&"function"==typeof sq.onPostCommitFiberRoot)try{sq.onPostCommitFiberRoot(sV,s)}catch{}return!0}finally{nH(a),n_.T=r,iU(e,t)}}function iV(e,t,r){t=E(r,t),t=t8(e.stateNode,t,2),null!==(e=eD(e,t,2))&&(g(e,2),ei(e))}function iq(e,t,r){if(3===e.tag)iV(e,e,r);else for(;null!==t;){if(3===t.tag){iV(t,e,r);break}if(1===t.tag){var i=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof i.componentDidCatch&&(null===lF||!lF.has(i))){e=E(r,e),null!==(i=eD(t,r=t6(2),2))&&(t7(r,i,t,e),g(i,2),ei(i));break}}t=t.return}}function iG(e,t,r){var i=e.pingCache;if(null===i){i=e.pingCache=new ld;var n=new Set;i.set(t,n)}else void 0===(n=i.get(t))&&(n=new Set,i.set(t,n));n.has(r)||(l_=!0,n.add(r),e=iH.bind(null,e,t,r),t.then(e,e))}function iH(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,lp===e&&(lm&r)===r&&(4===lS||3===lS&&(0x3c00000&lm)===lm&&300>sD()-lI?(2&lA)==0&&ib(e,0):lM|=r,lC===lm&&(lC=0)),ei(e)}function ij(e,t){0===t&&(t=f()),null!==(e=eC(e,t))&&(g(e,t),ei(e))}function iW(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),ij(e,r)}function iX(e,t){var r=0;switch(e.tag){case 31:case 13:var n=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(i(314))}null!==n&&n.delete(t),ij(e,r)}function iQ(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function i$(e){return!(!(e=e.prototype)||!e.isReactComponent)}function iY(e,r){var i=e.alternate;return null===i?((i=t(e.tag,r,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=r,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=0x3e00000&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,r=e.dependencies,i.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function iK(e,t){e.flags&=0x3e00002;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,e.dependencies=null===(t=r.dependencies)?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function iZ(e,r,n,a,s,o){var l=0;if(a=e,"function"==typeof e)i$(e)&&(l=1);else if("string"==typeof e)l=st&&sf?sr(e,n,s3.current)?26:sv(e)?27:5:st?sr(e,n,s3.current)?26:5:sf&&sv(e)?27:5;else h:switch(e){case nm:return(e=t(31,n,r,s)).elementType=nm,e.lanes=o,e;case ns:return iJ(n.children,s,o,r);case no:l=8,s|=24;break;case nl:return(e=t(12,n,r,2|s)).elementType=nl,e.lanes=o,e;case nd:return(e=t(13,n,r,s)).elementType=nd,e.lanes=o,e;case nA:return(e=t(19,n,r,s)).elementType=nA,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case nc:l=10;break h;case nu:l=9;break h;case nh:l=11;break h;case np:l=14;break h;case nf:l=16,a=null;break h}l=29,n=Error(i(130,null===e?"null":typeof e,"")),a=null}return(r=t(l,n,r,s)).elementType=e,r.type=a,r.lanes=o,r}function iJ(e,r,i,n){return(e=t(7,e,n,r)).lanes=i,e}function i0(e,r,i){return(e=t(6,e,null,r)).lanes=i,e}function i1(e){var r=t(18,null,null,0);return r.stateNode=e,r}function i2(e,r,i){return(r=t(4,null!==e.children?e.children:[],e.key,r)).lanes=i,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}function i3(e,t,r,i,n,a,s,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=nO,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=m(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=m(0),this.hiddenUpdates=m(null),this.identifierPrefix=i,this.onUncaughtError=n,this.onCaughtError=a,this.onRecoverableError=s,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function i4(e,r,i,n,a,s,o,l,u,c,h,d){return e=new i3(e,r,i,o,u,c,h,d,l),r=1,!0===s&&(r|=24),s=t(3,null,null,r),e.current=s,s.stateNode=e,r=ee(),r.refCount++,e.pooledCache=r,r.refCount++,s.memoizedState={element:n,isDehydrated:i,cache:r},eP(s),e}function i5(e){var t=e._reactInternals;if(void 0===t)throw"function"==typeof e.render?Error(i(188)):Error(i(268,e=Object.keys(e).join(",")));return null===(e=null!==(e=s(t))?function e(t){var r=t.tag;if(5===r||26===r||27===r||6===r)return t;for(t=t.child;null!==t;){if(null!==(r=e(t)))return r;t=t.sibling}return null}(e):null)?null:nw(e.stateNode)}function i8(e,t,r,i,n,a){n=sS,null===i.context?i.context=n:i.pendingContext=n,(i=eL(t)).payload={element:r},null!==(a=void 0===a?null:a)&&(i.callback=a),null!==(r=eD(e,i,t))&&(im(r,e,t),eB(r,e,t))}function i6(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function i7(e,t){i6(e,t),(e=e.alternate)&&i6(e,t)}var i9={},ne=$T.default,nt=$I.default,nr=Object.assign,ni=Symbol.for("react.element"),nn=Symbol.for("react.transitional.element"),na=Symbol.for("react.portal"),ns=Symbol.for("react.fragment"),no=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),nu=Symbol.for("react.consumer"),nc=Symbol.for("react.context"),nh=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),nA=Symbol.for("react.suspense_list"),np=Symbol.for("react.memo"),nf=Symbol.for("react.lazy"),nm=Symbol.for("react.activity"),ng=Symbol.for("react.memo_cache_sentinel"),ny=Symbol.iterator,nv=Symbol.for("react.client.reference"),nx=Array.isArray,n_=ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nb=e.rendererVersion,nS=e.rendererPackageName,nT=e.extraDevToolsConfig,nw=e.getPublicInstance,nM=e.getRootHostContext,nE=e.getChildHostContext,nC=e.prepareForCommit,nR=e.resetAfterCommit,nN=e.createInstance;e.cloneMutableInstance;var nP=e.appendInitialChild,nI=e.finalizeInitialChildren,nL=e.shouldSetTextContent,nD=e.createTextInstance;e.cloneMutableTextInstance;var nB=e.scheduleTimeout,nF=e.cancelTimeout,nO=e.noTimeout,nU=e.isPrimaryRenderer;e.warnsIfNotActing;var nk=e.supportsMutation,nz=e.supportsPersistence,nV=e.supportsHydration,nq=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var nG=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var nH=e.setCurrentUpdatePriority,nj=e.getCurrentUpdatePriority,nW=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var nX=e.shouldAttemptEagerTransition,nQ=e.detachDeletedInstance;e.requestPostPaintCallback;var n$=e.maySuspendCommit,nY=e.maySuspendCommitOnUpdate,nK=e.maySuspendCommitInSyncRender,nZ=e.preloadInstance,nJ=e.startSuspendingCommit,n0=e.suspendInstance;e.suspendOnActiveViewTransition;var n1=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var n2=e.NotPendingTransition,n3=e.HostTransitionContext,n4=e.resetFormInstance;e.bindToConsole;var n5=e.supportsMicrotasks,n8=e.scheduleMicrotask,n6=e.supportsTestSelectors,n7=e.findFiberRoot,n9=e.getBoundingRect,ae=e.getTextContent,at=e.isHiddenSubtree,ar=e.matchAccessibilityRole,ai=e.setFocusIfFocusable,an=e.setupIntersectionObserver,aa=e.appendChild,as=e.appendChildToContainer,ao=e.commitTextUpdate,al=e.commitMount,au=e.commitUpdate,ac=e.insertBefore,ah=e.insertInContainerBefore,ad=e.removeChild,aA=e.removeChildFromContainer,ap=e.resetTextContent,af=e.hideInstance,am=e.hideTextInstance,ag=e.unhideInstance,ay=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var av=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var ax=e.cloneInstance,a_=e.createContainerChildSet,ab=e.appendChildToContainerChildSet,aS=e.finalizeContainerChildren,aT=e.replaceContainerChildren,aw=e.cloneHiddenInstance,aM=e.cloneHiddenTextInstance,aE=e.isSuspenseInstancePending,aC=e.isSuspenseInstanceFallback,aR=e.getSuspenseInstanceFallbackErrorDetails,aN=e.registerSuspenseInstanceRetry,aP=e.canHydrateFormStateMarker,aI=e.isFormStateMarkerMatching,aL=e.getNextHydratableSibling,aD=e.getNextHydratableSiblingAfterSingleton,aB=e.getFirstHydratableChild,aF=e.getFirstHydratableChildWithinContainer,aO=e.getFirstHydratableChildWithinActivityInstance,aU=e.getFirstHydratableChildWithinSuspenseInstance,ak=e.getFirstHydratableChildWithinSingleton,az=e.canHydrateInstance,aV=e.canHydrateTextInstance,aq=e.canHydrateActivityInstance,aG=e.canHydrateSuspenseInstance,aH=e.hydrateInstance,aj=e.hydrateTextInstance,aW=e.hydrateActivityInstance,aX=e.hydrateSuspenseInstance,aQ=e.getNextHydratableInstanceAfterActivityInstance,a$=e.getNextHydratableInstanceAfterSuspenseInstance,aY=e.commitHydratedInstance,aK=e.commitHydratedContainer,aZ=e.commitHydratedActivityInstance,aJ=e.commitHydratedSuspenseInstance,a0=e.finalizeHydratedChildren,a1=e.flushHydrationEvents;e.clearActivityBoundary;var a2=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var a3=e.clearSuspenseBoundaryFromContainer,a4=e.hideDehydratedBoundary,a5=e.unhideDehydratedBoundary,a8=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var a6,a7,a9=e.validateHydratableInstance,se=e.validateHydratableTextInstance,st=e.supportsResources,sr=e.isHostHoistableType,si=e.getHoistableRoot,sn=e.getResource,sa=e.acquireResource,ss=e.releaseResource,so=e.hydrateHoistable,sl=e.mountHoistable,su=e.unmountHoistable,sc=e.createHoistableInstance,sh=e.prepareToCommitHoistables,sd=e.mayResourceSuspendCommit,sA=e.preloadResource,sp=e.suspendResource,sf=e.supportsSingletons,sm=e.resolveSingletonInstance,sg=e.acquireSingletonInstance,sy=e.releaseSingletonInstance,sv=e.isHostSingletonType,sx=e.isSingletonScope,s_=[],sb=-1,sS={},sT=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(sw(e)/sM|0)|0},sw=Math.log,sM=Math.LN2,sE=256,sC=262144,sR=4194304,sN=nt.unstable_scheduleCallback,sP=nt.unstable_cancelCallback,sI=nt.unstable_shouldYield,sL=nt.unstable_requestPaint,sD=nt.unstable_now,sB=nt.unstable_ImmediatePriority,sF=nt.unstable_UserBlockingPriority,sO=nt.unstable_NormalPriority,sU=nt.unstable_IdlePriority,sk=nt.log,sz=nt.unstable_setDisableYieldValue,sV=null,sq=null,sG="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},sH="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof $S.default&&"function"==typeof $S.default.emit)return void $S.default.emit("uncaughtException",e);console.error(e)},sj=Object.prototype.hasOwnProperty,sW=!1,sX=new WeakMap,sQ=[],s$=0,sY=null,sK=0,sZ=[],sJ=0,s0=null,s1=1,s2="",s3=u(null),s4=u(null),s5=u(null),s8=u(null),s6=null,s7=null,s9=!1,oe=null,ot=!1,or=Error(i(519)),oi=u(null),on=null,oa=null,os="u">typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},oo=nt.unstable_scheduleCallback,ol=nt.unstable_NormalPriority,ou={$$typeof:nc,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},oc=null,oh=null,od=!1,oA=!1,op=!1,of=0,om=null,og=0,oy=0,ov=null,ox=n_.S;n_.S=function(e,t){lL=sD(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===om){var r=om=[];og=0,oy=ec(),ov={status:"pending",value:void 0,then:function(e){r.push(e)}}}og++,t.then(eh,eh)}(0,t),null!==ox&&ox(e,t)};var o_=u(null),ob=Error(i(460)),oS=Error(i(474)),oT=Error(i(542)),ow={then:function(){}},oM=null,oE=null,oC=0,oR=eT(!0),oN=eT(!1),oP=[],oI=0,oL=0,oD=!1,oB=!1,oF=u(null),oO=u(0),oU=u(null),ok=null,oz=u(0),oV=0,oq=null,oG=null,oH=null,oj=!1,oW=!1,oX=!1,oQ=0,o$=0,oY=null,oK=0,oZ={readContext:K,use:e9,useCallback:eY,useContext:eY,useEffect:eY,useImperativeHandle:eY,useLayoutEffect:eY,useInsertionEffect:eY,useMemo:eY,useReducer:eY,useRef:eY,useState:eY,useDebugValue:eY,useDeferredValue:eY,useTransition:eY,useSyncExternalStore:eY,useId:eY,useHostTransitionStatus:eY,useFormState:eY,useActionState:eY,useOptimistic:eY,useMemoCache:eY,useCacheRefresh:eY};oZ.useEffectEvent=eY;var oJ={readContext:K,use:e9,useCallback:function(e,t){return e5().memoizedState=[e,void 0===t?null:t],e},useContext:K,useEffect:tR,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,tE(4194308,4,tD.bind(null,t,e),r)},useLayoutEffect:function(e,t){return tE(4194308,4,e,t)},useInsertionEffect:function(e,t){tE(4,2,e,t)},useMemo:function(e,t){var r=e5();t=void 0===t?null:t;var i=e();return r.memoizedState=[i,t],i},useReducer:function(e,t,r){var i=e5();if(void 0!==r)var n=r(t);else n=t;return i.memoizedState=i.baseState=n,i.queue=e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},e=e.dispatch=tX.bind(null,oq,e),[i.memoizedState,e]},useRef:function(e){return e5().memoizedState={current:e}},useState:function(e){var t=(e=th(e)).queue,r=tQ.bind(null,oq,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:tF,useDeferredValue:function(e,t){return tk(e5(),e,t)},useTransition:function(){var e=th(!1);return e=tV.bind(null,oq,e.queue,!0,!1),e5().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var n=oq,a=e5();if(s9){if(void 0===r)throw Error(i(407));r=r()}else{if(r=t(),null===lp)throw Error(i(349));(127&lm)!=0||ts(n,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,tR(tl.bind(null,n,s,e),[e]),n.flags|=2048,tw(9,{destroy:void 0},to.bind(null,n,s,r,t),null),r},useId:function(){var e=e5(),t=lp.identifierPrefix;if(s9){var r=s2,i=s1;t="_"+t+"R_"+(r=(i&~(1<<32-sT(i)-1)).toString(32)+r),0<(r=oQ++)&&(t+="H"+r.toString(32)),t+="_"}else t="_"+t+"r_"+(r=oK++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:tG,useFormState:tx,useActionState:tx,useOptimistic:function(e){var t=e5();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=tY.bind(null,oq,!0,r),r.dispatch=t,[e,t]},useMemoCache:te,useCacheRefresh:function(){return e5().memoizedState=tW.bind(null,oq)},useEffectEvent:function(e){var t=e5(),r={impl:e};return t.memoizedState=r,function(){if((2&lA)!=0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},o0={readContext:K,use:e9,useCallback:tO,useContext:K,useEffect:tN,useImperativeHandle:tB,useInsertionEffect:tI,useLayoutEffect:tL,useMemo:tU,useReducer:tr,useRef:tM,useState:function(){return tr(tt)},useDebugValue:tF,useDeferredValue:function(e,t){return tz(e8(),oG.memoizedState,e,t)},useTransition:function(){var e=tr(tt)[0],t=e8().memoizedState;return["boolean"==typeof e?e:e7(e),t]},useSyncExternalStore:ta,useId:tH,useHostTransitionStatus:tG,useFormState:t_,useActionState:t_,useOptimistic:function(e,t){return td(e8(),oG,e,t)},useMemoCache:te,useCacheRefresh:tj};o0.useEffectEvent=tP;var o1={readContext:K,use:e9,useCallback:tO,useContext:K,useEffect:tN,useImperativeHandle:tB,useInsertionEffect:tI,useLayoutEffect:tL,useMemo:tU,useReducer:tn,useRef:tM,useState:function(){return tn(tt)},useDebugValue:tF,useDeferredValue:function(e,t){var r=e8();return null===oG?tk(r,e,t):tz(r,oG.memoizedState,e,t)},useTransition:function(){var e=tn(tt)[0],t=e8().memoizedState;return["boolean"==typeof e?e:e7(e),t]},useSyncExternalStore:ta,useId:tH,useHostTransitionStatus:tG,useFormState:tT,useActionState:tT,useOptimistic:function(e,t){var r=e8();return null!==oG?td(r,oG,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:te,useCacheRefresh:tj};o1.useEffectEvent=tP;var o2={enqueueSetState:function(e,t,r){e=e._reactInternals;var i=iA(),n=eL(i);n.payload=t,null!=r&&(n.callback=r),null!==(t=eD(e,n,i))&&(im(t,e,i),eB(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=iA(),n=eL(i);n.tag=1,n.payload=t,null!=r&&(n.callback=r),null!==(t=eD(e,n,i))&&(im(t,e,i),eB(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=iA(),i=eL(r);i.tag=2,null!=t&&(i.callback=t),null!==(t=eD(e,i,r))&&(im(t,e,r),eB(t,e,r))}},o3=Error(i(461)),o4=!1,o5={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},o8=!1,o6=!1,o7=!1,o9="function"==typeof WeakSet?WeakSet:Set,le=null,lt=null,lr=!1,li=null,ln=8192,la={getCacheForType:function(e){var t=K(ou),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return K(ou).controller.signal}},ls=0,lo=1,ll=2,lu=3,lc=4;if("function"==typeof Symbol&&Symbol.for){var lh=Symbol.for;ls=lh("selector.component"),lo=lh("selector.has_pseudo_class"),ll=lh("selector.role"),lu=lh("selector.test_id"),lc=lh("selector.text")}var ld="function"==typeof WeakMap?WeakMap:Map,lA=0,lp=null,lf=null,lm=0,lg=0,ly=null,lv=!1,lx=!1,l_=!1,lb=0,lS=0,lT=0,lw=0,lM=0,lE=0,lC=0,lR=null,lN=null,lP=!1,lI=0,lL=0,lD=1/0,lB=null,lF=null,lO=0,lU=null,lk=null,lz=0,lV=0,lq=null,lG=null,lH=0,lj=null;return i9.attemptContinuousHydration=function(e){if(13===e.tag||31===e.tag){var t=eC(e,0x4000000);null!==t&&im(t,e,0x4000000),i7(e,0x4000000)}},i9.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag||31===e.tag){var t=iA(),r=eC(e,t=_(t));null!==r&&im(r,e,t),i7(e,t)}},i9.attemptSynchronousHydration=function(e){switch(e.tag){case 3:if((e=e.stateNode).current.memoizedState.isDehydrated){var t=d(e.pendingLanes);if(0!==t){for(e.pendingLanes|=2,e.entangledLanes|=2;t;){var r=1<<31-sT(t);e.entanglements[1]|=r,t&=~r}ei(e),(6&lA)==0&&(lD=sD()+500,en(0,!1))}}break;case 31:case 13:null!==(t=eC(e,2))&&im(t,e,2),ix(),i7(e,2)}},i9.batchedUpdates=function(e,t){return e(t)},i9.createComponentSelector=function(e){return{$$typeof:ls,value:e}},i9.createContainer=function(e,t,r,i,n,a,s,o,l,u){return i4(e,t,!1,null,r,i,a,null,s,o,l,u)},i9.createHasPseudoClassSelector=function(e){return{$$typeof:lo,value:e}},i9.createHydrationContainer=function(e,t,r,i,n,a,s,o,l,u,c,h,d,A){var p;return(e=i4(r,i,!0,e,n,a,o,A,l,u,c,h)).context=sS,r=e.current,(n=eL(i=_(i=iA()))).callback=null!=(p=t)?p:null,eD(r,n,i),t=i,e.current.lanes=t,g(e,t),ei(e),e},i9.createPortal=function(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:na,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}},i9.createRoleSelector=function(e){return{$$typeof:ll,value:e}},i9.createTestNameSelector=function(e){return{$$typeof:lu,value:e}},i9.createTextSelector=function(e){return{$$typeof:lc,value:e}},i9.defaultOnCaughtError=function(e){console.error(e)},i9.defaultOnRecoverableError=function(e){sH(e)},i9.defaultOnUncaughtError=function(e){sH(e)},i9.deferredUpdates=function(e){var t=n_.T,r=nj();try{return nH(32),n_.T=null,e()}finally{nH(r),n_.T=t}},i9.discreteUpdates=function(e,t,r,i,n){var a=n_.T,s=nj();try{return nH(2),n_.T=null,e(t,r,i,n)}finally{nH(s),n_.T=a,0===lA&&(lD=sD()+500)}},i9.findAllNodes=id,i9.findBoundingRects=function(e,t){if(!n6)throw Error(i(363));t=id(e,t),e=[];for(var r=0;r<t.length;r++)e.push(n9(t[r]));for(t=e.length-1;0<t;t--){r=e[t];for(var n=r.x,a=n+r.width,s=r.y,o=s+r.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,h=c+u.width,d=u.y,A=d+u.height;if(n>=c&&s>=d&&a<=h&&o<=A){e.splice(t,1);break}if(n!==c||r.width!==u.width||A<s||d>o){if(!(s!==d||r.height!==u.height||h<n||c>a)){c>n&&(u.width+=c-n,u.x=n),h<a&&(u.width=a-c),e.splice(t,1);break}}else{d>s&&(u.height+=d-s,u.y=s),A<o&&(u.height=o-d),e.splice(t,1);break}}}return e},i9.findHostInstance=i5,i9.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=s(e))?function e(t){var r=t.tag;if(5===r||26===r||27===r||6===r)return t;for(t=t.child;null!==t;){if(4!==t.tag&&null!==(r=e(t)))return r;t=t.sibling}return null}(e):null)?null:nw(e.stateNode)},i9.findHostInstanceWithWarning=function(e){return i5(e)},i9.flushPassiveEffects=ik,i9.flushSyncFromReconciler=function(e){var t=lA;lA|=1;var r=n_.T,i=nj();try{if(nH(2),n_.T=null,e)return e()}finally{nH(i),n_.T=r,(6&(lA=t))==0&&en(0,!1)}},i9.flushSyncWork=ix,i9.focusWithin=function(e,t){if(!n6)throw Error(i(363));for(t=Array.from(t=ih(e=il(e),t)),e=0;e<t.length;){var r=t[e++],n=r.tag;if(!at(r)){if((5===n||26===n||27===n)&&ai(r.stateNode))return!0;for(r=r.child;null!==r;)t.push(r),r=r.sibling}}return!1},i9.getFindAllNodesFailureDescription=function(e,t){if(!n6)throw Error(i(363));var r=0,n=[];e=[il(e),0];for(var a=0;a<e.length;){var s=e[a++],o=s.tag,l=e[a++],u=t[l];if((5!==o&&26!==o&&27!==o||!at(s))&&(iu(s,u)&&(n.push(ic(u)),++l>r&&(r=l)),l<t.length))for(s=s.child;null!==s;)e.push(s,l),s=s.sibling}if(r<t.length){for(e=[];r<t.length;r++)e.push(ic(t[r]));return`findAllNodes was able to match part of the selector:
  `+n.join(" > ")+`

No matching component was found for:
  `+e.join(" > ")}return null},i9.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 27:case 5:return nw(e.child.stateNode);default:return e.child.stateNode}},i9.injectIntoDevTools=function(){var e={bundleType:0,version:nb,rendererPackageName:nS,currentDispatcherRef:n_,reconcilerVersion:"19.2.0"};if(null!==nT&&(e.rendererConfig=nT),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{sV=t.inject(e),sq=t}catch{}e=!!t.checkDCE}}return e},i9.isAlreadyRendering=function(){return(6&lA)!=0},i9.observeVisibleRects=function(e,t,r,n){if(!n6)throw Error(i(363));var a=an(e=id(e,t),r,n).disconnect;return{disconnect:function(){a()}}},i9.shouldError=function(){return null},i9.shouldSuspend=function(){return!1},i9.startHostTransition=function(e,t,n,a){if(5!==e.tag)throw Error(i(476));var s=tq(e).queue;tV(e,s,t,n2,null===n?r:function(){var t=tq(e);return null===t.next&&(t=e.alternate.memoizedState),t$(e,t.next.queue,{},iA()),n(a)})},i9.updateContainer=function(e,t,r,i){var n=t.current,a=iA();return i8(n,a,e,t,r,i),a},i9.updateContainerSync=function(e,t,r,i){return i8(t.current,2,e,t,r,i),2},i9},Yu.exports.default=Yu.exports,Object.defineProperty(Yu.exports,"__esModule",{value:!0})),Yl.exports=Yu.exports),(P=Yl.exports)&&P.__esModule&&Object.prototype.hasOwnProperty.call(P,"default"))?P.default:P,Yh={},Yd=/^three(?=[A-Z])/,YA=e=>`${e[0].toUpperCase()}${e.slice(1)}`,Yp=0;function Yf(e){if("function"==typeof e){let t=`${Yp++}`;return Yh[t]=e,t}Object.assign(Yh,e)}function Ym(e,t){let r=YA(e),i=Yh[r];if("primitive"!==e&&!i)throw Error(`R3F: ${r} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if("primitive"===e&&!t.object)throw Error("R3F: Primitives without 'object' are invalid!");if(void 0!==t.args&&!Array.isArray(t.args))throw Error("R3F: The args prop must be an array!")}function Yg(e){if(e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?$0(e.parent,e):$7(e.object)&&!1!==e.props.visible&&(e.object.visible=!0),e.isHidden=!1,$6(e)}}function Yy(e,t,r){let i=t.root.getState();if(e.parent||e.object===i.scene){if(!t.object){var n,a;let e=Yh[YA(t.type)];t.object=null!=(n=t.props.object)?n:new e(...null!=(a=t.props.args)?a:[]),t.object.__r3f=t}if($8(t.object,t.props),t.props.attach)$0(e,t);else if($7(t.object)&&$7(e.object)){let i=e.object.children.indexOf(null==r?void 0:r.object);if(r&&-1!==i){let r=e.object.children.indexOf(t.object);-1!==r?(e.object.children.splice(r,1),e.object.children.splice(r<i?i-1:i,0,t.object)):(t.object.parent=e.object,e.object.children.splice(i,0,t.object),t.object.dispatchEvent({type:"added"}),e.object.dispatchEvent({type:"childadded",child:t.object}))}else e.object.add(t.object)}for(let e of t.children)Yy(t,e);$6(t)}}function Yv(e,t){t&&(t.parent=e,e.children.push(t),Yy(e,t))}function Yx(e,t,r){if(!t||!r)return;t.parent=e;let i=e.children.indexOf(r);-1!==i?e.children.splice(i,0,t):e.children.push(t),Yy(e,t,r)}function Y_(e){if("function"==typeof e.dispose){let t=()=>{try{e.dispose()}catch{}};"undefined"!=typeof IS_REACT_ACT_ENVIRONMENT?t():(0,$I.unstable_scheduleCallback)($I.unstable_IdlePriority,t)}}function Yb(e,t,r){if(!t)return;t.parent=null;let i=e.children.indexOf(t);-1!==i&&e.children.splice(i,1),t.props.attach?$1(e,t):$7(t.object)&&$7(e.object)&&(e.object.remove(t.object),function(e,t){let{internal:r}=e.getState();r.interaction=r.interaction.filter(e=>e!==t),r.initialHits=r.initialHits.filter(e=>e!==t),r.hovered.forEach((e,i)=>{(e.eventObject===t||e.object===t)&&r.hovered.delete(i)}),r.capturedMap.forEach((e,i)=>{Ye(r.capturedMap,t,e,i)})}($V(t),t.object));let n=null!==t.props.dispose&&!1!==r;for(let e=t.children.length-1;e>=0;e--){let r=t.children[e];Yb(t,r,n)}t.children.length=0,delete t.object.__r3f,n&&"primitive"!==t.type&&"Scene"!==t.object.type&&Y_(t.object),void 0===r&&$6(t)}let YS=[],YT=()=>{},Yw={},YM=0,YE=(I={isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:function(e,t,r){var i;return Ym(e=YA(e)in Yh?e:e.replace(Yd,""),t),"primitive"===e&&null!=(i=t.object)&&i.__r3f&&delete t.object.__r3f,$K(t.object,r,e,t)},removeChild:Yb,appendChild:Yv,appendInitialChild:Yv,insertBefore:Yx,appendChildToContainer(e,t){let r=e.getState().scene.__r3f;t&&r&&Yv(r,t)},removeChildFromContainer(e,t){let r=e.getState().scene.__r3f;t&&r&&Yb(r,t)},insertInContainerBefore(e,t,r){let i=e.getState().scene.__r3f;t&&r&&i&&Yx(i,t,r)},getRootHostContext:()=>Yw,getChildHostContext:()=>Yw,commitUpdate(e,t,r,i,n){var a,s,o;Ym(t,i);let l=!1;if("primitive"===e.type&&r.object!==i.object||(null==(a=i.args)?void 0:a.length)!==(null==(s=r.args)?void 0:s.length)?l=!0:null!=(o=i.args)&&o.some((e,t)=>{var i;return e!==(null==(i=r.args)?void 0:i[t])})&&(l=!0),l)YS.push([e,{...i},n]);else{let t=function(e,t){let r={};for(let i in t)if(!$2.includes(i)&&!$$.equ(t[i],e.props[i]))for(let e in r[i]=t[i],t)e.startsWith(`${i}-`)&&(r[e]=t[e]);for(let i in e.props){if($2.includes(i)||t.hasOwnProperty(i))continue;let{root:n,key:a}=$Z(e.object,i);if(n.constructor&&0===n.constructor.length){let e=function(e){let t=$3.get(e.constructor);try{t||(t=new e.constructor,$3.set(e.constructor,t))}catch(e){}return t}(n);$$.und(e)||(r[a]=e[a])}else r[a]=0}return r}(e,i);Object.keys(t).length&&(Object.assign(e.props,t),$8(e.object,t))}(null===n.sibling||(4&n.flags)==0)&&function(){for(let[e]of YS){let t=e.parent;if(t)for(let r of(e.props.attach?$1(t,e):$7(e.object)&&$7(t.object)&&t.object.remove(e.object),e.children))r.props.attach?$1(e,r):$7(r.object)&&$7(e.object)&&e.object.remove(r.object);e.isHidden&&Yg(e),e.object.__r3f&&delete e.object.__r3f,"primitive"!==e.type&&Y_(e.object)}for(let[i,n,a]of YS){i.props=n;let s=i.parent;if(s){let n=Yh[YA(i.type)];i.object=null!=(e=i.props.object)?e:new n(...null!=(t=i.props.args)?t:[]),i.object.__r3f=i;var e,t,r=i.object;for(let e of[a,a.alternate])if(null!==e)if("function"==typeof e.ref){null==e.refCleanup||e.refCleanup();let t=e.ref(r);"function"==typeof t&&(e.refCleanup=t)}else e.ref&&(e.ref.current=r);for(let e of($8(i.object,i.props),i.props.attach?$0(s,i):$7(i.object)&&$7(s.object)&&s.object.add(i.object),i.children))e.props.attach?$0(i,e):$7(e.object)&&$7(i.object)&&i.object.add(e.object);$6(i)}}YS.length=0}()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:e=>null==e?void 0:e.object,prepareForCommit:()=>null,preparePortalMount:e=>$K(e.getState().scene,e,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:function(e){if(!e.isHidden){var t;e.props.attach&&null!=(t=e.parent)&&t.object?$1(e.parent,e):$7(e.object)&&(e.object.visible=!1),e.isHidden=!0,$6(e)}},unhideInstance:Yg,createTextInstance:YT,hideTextInstance:YT,unhideTextInstance:YT,scheduleTimeout:"function"==typeof setTimeout?setTimeout:void 0,cancelTimeout:"function"==typeof clearTimeout?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:$T.createContext(null),setCurrentUpdatePriority(e){YM=e},getCurrentUpdatePriority:()=>YM,resolveUpdatePriority(){var e;if(0!==YM)return YM;switch("undefined"!=typeof window&&(null==(e=window.event)?void 0:e.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return 2;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return 8;default:return 32}},resetFormInstance(){},rendererPackageName:"@react-three/fiber",rendererVersion:"9.5.0",applyViewTransitionName(e,t,r){},restoreViewTransitionName(e,t){},cancelViewTransitionName(e,t,r){},cancelRootViewTransitionName(e){},restoreRootViewTransitionName(e){},InstanceMeasurement:null,measureInstance:e=>null,wasInstanceInViewport:e=>!0,hasInstanceChanged:(e,t)=>!1,hasInstanceAffectedParent:(e,t)=>!1,suspendOnActiveViewTransition(e,t){},startGestureTransition:()=>null,startViewTransition:()=>null,stopViewTransition(e){},createViewTransitionInstance:e=>null,getCurrentGestureOffset(e){throw Error("startGestureTransition is not yet supported in react-three-fiber.")},cloneMutableInstance:(e,t)=>e,cloneMutableTextInstance:e=>e,cloneRootViewTransitionContainer(e){throw Error("Not implemented.")},removeRootViewTransitionClone(e,t){throw Error("Not implemented.")},createFragmentInstance:e=>null,updateFragmentInstanceFiber(e,t){},commitNewChildToFragmentInstance(e,t){},deleteChildFromFragmentInstance(e,t){},measureClonedInstance:e=>null,maySuspendCommitOnUpdate:(e,t,r)=>!1,maySuspendCommitInSyncRender:(e,t)=>!1,startSuspendingCommit:()=>null,getSuspendedCommitReason:(e,t)=>null},(M=Yc(I)).injectIntoDevTools(),M),YC=new Map,YR={objects:"shallow",strict:!1};function YN({store:e,children:t,onCreated:r,rootElement:i}){return $G(()=>{let t=e.getState();t.set(e=>({internal:{...e.internal,active:!0}})),r&&r(t),e.getState().events.connected||null==t.events.connect||t.events.connect(i)},[]),(0,el.jsx)(Yr.Provider,{value:e,children:t})}function YP(e,t){let r=YC.get(e),i=null==r?void 0:r.fiber;if(i){let n=null==r?void 0:r.store.getState();n&&(n.internal.active=!1),YE.updateContainer(null,i,null,()=>{n&&setTimeout(()=>{try{null==n.events.disconnect||n.events.disconnect(),null==(r=n.gl)||null==(i=r.renderLists)||null==i.dispose||i.dispose(),null==(a=n.gl)||null==a.forceContextLoss||a.forceContextLoss(),null!=(s=n.gl)&&s.xr&&n.xr.disconnect();var r,i,a,s,o=n.scene;for(let e in"Scene"!==o.type&&(null==o.dispose||o.dispose()),o){let t=o[e];(null==t?void 0:t.type)!=="Scene"&&(null==t||null==t.dispose||t.dispose())}YC.delete(e),t&&t(e)}catch(e){}},500)})}}let YI=new Set,YL=new Set,YD=new Set;function YB(e,t){if(e.size)for(let{callback:r}of e.values())r(t)}function YF(e,t){switch(e){case"before":return YB(YI,t);case"after":return YB(YL,t);case"tail":return YB(YD,t)}}function YO(e,t,r){let i=t.clock.getDelta();"never"===t.frameloop&&"number"==typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),p=t.internal.subscribers;for(let e=0;e<p.length;e++)(f=p[e]).ref.current(f.store.getState(),i,r);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}let YU=!1,Yk=!1;function Yz(e){for(let r of(g=requestAnimationFrame(Yz),YU=!0,m=0,YF("before",e),Yk=!0,YC.values())){var t;(y=r.store.getState()).internal.active&&("always"===y.frameloop||y.internal.frames>0)&&!(null!=(t=y.gl.xr)&&t.isPresenting)&&(m+=YO(e,y))}if(Yk=!1,YF("after",e),0===m)return YF("tail",e),YU=!1,cancelAnimationFrame(g)}function YV(e,t=1){var r;if(!e)return YC.forEach(e=>YV(e.store.getState(),t));(null==(r=e.gl.xr)||!r.isPresenting)&&e.internal.active&&"never"!==e.frameloop&&(t>1?e.internal.frames=Math.min(60,e.internal.frames+t):Yk?e.internal.frames=2:e.internal.frames=1,YU||(YU=!0,requestAnimationFrame(Yz)))}function Yq(e,t=!0,r,i){if(t&&YF("before",e),r)YO(e,r,i);else for(let t of YC.values())YO(e,t.store.getState());t&&YF("after",e)}let YG={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function YH(e){let{handlePointer:t}=function(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var r;return null==(r=e.__r3f)?void 0:r.handlers["onPointer"+t]}))}function r(t){let{internal:r}=e.getState();for(let e of r.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){let i=e.eventObject.__r3f;if(r.hovered.delete($9(e)),null!=i&&i.eventCount){let r=i.handlers,n={...e,intersections:t};null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(e,t){for(let r=0;r<t.length;r++){let i=t[r].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(n){switch(n){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return t=>{let{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),r([]))})}}return function(a){let{onPointerMissed:s,internal:o}=e.getState();o.lastEvent.current=a;let l="onPointerMove"===n,u="onClick"===n||"onContextMenu"===n||"onDoubleClick"===n,c=function(t,r){let i=e.getState(),n=new Set,a=[],s=r?r(i.internal.interaction):i.internal.interaction;for(let e=0;e<s.length;e++){let t=$Q(s[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let o=s.flatMap(function(e){let r=$Q(e);if(!r||!r.events.enabled||null===r.raycaster.camera)return[];if(void 0===r.raycaster.camera){var i;null==r.events.compute||r.events.compute(t,r,null==(i=r.previousRoot)?void 0:i.getState()),void 0===r.raycaster.camera&&(r.raycaster.camera=null)}return r.raycaster.camera?r.raycaster.intersectObject(e,!0):[]}).sort((e,t)=>{let r=$Q(e.object),i=$Q(t.object);return r&&i&&i.events.priority-r.events.priority||e.distance-t.distance}).filter(e=>{let t=$9(e);return!n.has(t)&&(n.add(t),!0)});for(let e of(i.events.filter&&(o=i.events.filter(o,i)),o)){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&a.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())n.has($9(e.intersection))||a.push(e.intersection);return a}(a,l?t:void 0),h=u?function(t){let{internal:r}=e.getState(),i=t.offsetX-r.initialClick[0],n=t.offsetY-r.initialClick[1];return Math.round(Math.sqrt(i*i+n*n))}(a):0;"onPointerDown"===n&&(o.initialClick=[a.offsetX,a.offsetY],o.initialHits=c.map(e=>e.eventObject)),u&&!c.length&&h<=2&&(i(a,o.interaction),s&&s(a)),l&&r(c),!function(e,t,i,n){if(e.length){let a={stopped:!1};for(let s of e){let o=$Q(s.object);if(o||s.object.traverseAncestors(e=>{let t=$Q(e);if(t)return o=t,!1}),o){let{raycaster:l,pointer:u,camera:c,internal:h}=o,d=new e$(u.x,u.y,0).unproject(c),A=e=>{var t,r;return null!=(t=null==(r=h.capturedMap.get(e))?void 0:r.has(s.eventObject))&&t},p=e=>{let r={intersection:s,target:t.target};h.capturedMap.has(e)?h.capturedMap.get(e).set(s.eventObject,r):h.capturedMap.set(e,new Map([[s.eventObject,r]])),t.target.setPointerCapture(e)},f=e=>{let t=h.capturedMap.get(e);t&&Ye(h.capturedMap,s.eventObject,t,e)},m={};for(let e in t){let r=t[e];"function"!=typeof r&&(m[e]=r)}let g={...s,...m,pointer:u,intersections:e,stopped:a.stopped,delta:i,unprojectedPoint:d,ray:l.ray,camera:c,stopPropagation(){let i="pointerId"in t&&h.capturedMap.get(t.pointerId);(!i||i.has(s.eventObject))&&(g.stopped=a.stopped=!0,h.hovered.size&&Array.from(h.hovered.values()).find(e=>e.eventObject===s.eventObject)&&r([...e.slice(0,e.indexOf(s)),s]))},target:{hasPointerCapture:A,setPointerCapture:p,releasePointerCapture:f},currentTarget:{hasPointerCapture:A,setPointerCapture:p,releasePointerCapture:f},nativeEvent:t};if(n(g),!0===a.stopped)break}}}}(c,a,h,function(e){let t=e.eventObject,r=t.__r3f;if(!(null!=r&&r.eventCount))return;let s=r.handlers;if(l){if(s.onPointerOver||s.onPointerEnter||s.onPointerOut||s.onPointerLeave){let t=$9(e),r=o.hovered.get(t);r?r.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==s.onPointerOver||s.onPointerOver(e),null==s.onPointerEnter||s.onPointerEnter(e))}null==s.onPointerMove||s.onPointerMove(e)}else{let r=s[n];r?(!u||o.initialHits.includes(t))&&(i(a,o.interaction.filter(e=>!o.initialHits.includes(e))),r(e)):u&&o.initialHits.includes(t)&&i(a,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}(e);return{priority:1,enabled:!0,compute(e,t,r){t.pointer.set(e.offsetX/t.size.width*2-1,-(2*(e.offsetY/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(YG).reduce((e,r)=>({...e,[r]:t(r)}),{}),update:()=>{var t;let{events:r,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{let{set:r,events:i}=e.getState();if(null==i.disconnect||i.disconnect(),r(e=>({events:{...e.events,connected:t}})),i.handlers)for(let e in i.handlers){let r=i.handlers[e],[n,a]=YG[e];t.addEventListener(n,r,{passive:a})}},disconnect:()=>{let{set:t,events:r}=e.getState();if(r.connected){if(r.handlers)for(let e in r.handlers){let t=r.handlers[e],[i]=YG[e];r.connected.removeEventListener(i,t)}t(e=>({events:{...e.events,connected:void 0}}))}}}}e.i(8560),e.s(["ACESFilmicToneMapping",()=>4,"AddEquation",()=>100,"AddOperation",()=>2,"AdditiveAnimationBlendMode",()=>2501,"AdditiveBlending",()=>2,"AgXToneMapping",()=>6,"AlphaFormat",()=>1021,"AlwaysCompare",()=>519,"AlwaysDepth",()=>1,"AlwaysStencilFunc",()=>519,"AmbientLight",()=>s6,"AnimationAction",()=>oV,"AnimationClip",()=>sN,"AnimationLoader",()=>sU,"AnimationMixer",()=>oG,"AnimationObjectGroup",()=>oz,"AnimationUtils",()=>sg,"ArcCurve",()=>ao,"ArrayCamera",()=>og,"ArrowHelper",()=>lP,"AttachedBindMode",()=>ed,"Audio",()=>ow,"AudioAnalyser",()=>oP,"AudioContext",()=>oh,"AudioListener",()=>oT,"AudioLoader",()=>od,"AxesHelper",()=>lI,"BackSide",()=>1,"BasicDepthPacking",()=>3200,"BasicShadowMap",()=>0,"BatchedMesh",()=>nE,"Bone",()=>iY,"BooleanKeyframeTrack",()=>sS,"Box2",()=>o8,"Box3",()=>tu,"Box3Helper",()=>lC,"BoxGeometry",()=>r6,"BoxHelper",()=>lE,"BufferAttribute",()=>rN,"BufferGeometry",()=>rX,"BufferGeometryLoader",()=>on,"ByteType",()=>1010,"Cache",()=>sP,"Camera",()=>ii,"CameraHelper",()=>lT,"CanvasTexture",()=>n1,"CapsuleGeometry",()=>n4,"CatmullRomCurve3",()=>aA,"CineonToneMapping",()=>3,"CircleGeometry",()=>n5,"ClampToEdgeWrapping",()=>1001,"Clock",()=>oy,"Color",()=>ry,"ColorKeyframeTrack",()=>sT,"ColorManagement",()=>e2,"CompressedArrayTexture",()=>nJ,"CompressedCubeTexture",()=>n0,"CompressedTexture",()=>nZ,"CompressedTextureLoader",()=>sk,"ConeGeometry",()=>n6,"ConstantAlphaFactor",()=>213,"ConstantColorFactor",()=>211,"Controls",()=>lD,"CubeCamera",()=>iu,"CubeReflectionMapping",()=>301,"CubeRefractionMapping",()=>302,"CubeTexture",()=>ic,"CubeTextureLoader",()=>sq,"CubeUVReflectionMapping",()=>306,"CubicBezierCurve",()=>ag,"CubicBezierCurve3",()=>ay,"CubicInterpolant",()=>sv,"CullFaceBack",()=>1,"CullFaceFront",()=>2,"CullFaceFrontBack",()=>3,"CullFaceNone",()=>0,"Curve",()=>aa,"CurvePath",()=>aw,"CustomBlending",()=>5,"CustomToneMapping",()=>5,"CylinderGeometry",()=>n8,"Cylindrical",()=>o3,"Data3DTexture",()=>to,"DataArrayTexture",()=>ta,"DataTexture",()=>iK,"DataTextureLoader",()=>sG,"DataUtils",()=>rM,"DecrementStencilOp",()=>7683,"DecrementWrapStencilOp",()=>34056,"DefaultLoadingManager",()=>sL,"DepthFormat",()=>1026,"DepthStencilFormat",()=>1027,"DepthTexture",()=>n2,"DetachedBindMode",()=>eA,"DirectionalLight",()=>s8,"DirectionalLightHelper",()=>l_,"DiscreteInterpolant",()=>s_,"DodecahedronGeometry",()=>n9,"DoubleSide",()=>2,"DstAlphaFactor",()=>206,"DstColorFactor",()=>208,"DynamicCopyUsage",()=>35050,"DynamicDrawUsage",()=>35048,"DynamicReadUsage",()=>35049,"EdgesGeometry",()=>an,"EllipseCurve",()=>as,"EqualCompare",()=>514,"EqualDepth",()=>4,"EqualStencilFunc",()=>514,"EquirectangularReflectionMapping",()=>303,"EquirectangularRefractionMapping",()=>304,"Euler",()=>tW,"EventDispatcher",()=>eB,"ExternalTexture",()=>n3,"ExtrudeGeometry",()=>aQ,"FileLoader",()=>sO,"Float16BufferAttribute",()=>rU,"Float32BufferAttribute",()=>rk,"FloatType",()=>1015,"Fog",()=>ig,"FogExp2",()=>im,"FramebufferTexture",()=>nK,"FrontSide",()=>0,"Frustum",()=>no,"FrustumArray",()=>nc,"GLBufferAttribute",()=>o$,"GLSL1",()=>"100","GLSL3",()=>ey,"GreaterCompare",()=>516,"GreaterDepth",()=>6,"GreaterEqualCompare",()=>518,"GreaterEqualDepth",()=>5,"GreaterEqualStencilFunc",()=>518,"GreaterStencilFunc",()=>516,"GridHelper",()=>lm,"Group",()=>id,"HalfFloatType",()=>1016,"HemisphereLight",()=>sW,"HemisphereLightHelper",()=>lf,"IcosahedronGeometry",()=>aY,"ImageBitmapLoader",()=>oc,"ImageLoader",()=>sV,"ImageUtils",()=>e5,"IncrementStencilOp",()=>7682,"IncrementWrapStencilOp",()=>34055,"InstancedBufferAttribute",()=>i1,"InstancedBufferGeometry",()=>oi,"InstancedInterleavedBuffer",()=>oQ,"InstancedMesh",()=>i9,"Int16BufferAttribute",()=>rD,"Int32BufferAttribute",()=>rF,"Int8BufferAttribute",()=>rP,"IntType",()=>1013,"InterleavedBuffer",()=>iv,"InterleavedBufferAttribute",()=>i_,"Interpolant",()=>sy,"InterpolateDiscrete",()=>2300,"InterpolateLinear",()=>2301,"InterpolateSmooth",()=>2302,"InterpolationSamplingMode",()=>e_,"InterpolationSamplingType",()=>ex,"InvertStencilOp",()=>5386,"KeepStencilOp",()=>7680,"KeyframeTrack",()=>sb,"LOD",()=>ik,"LatheGeometry",()=>aK,"Layers",()=>tX,"LessCompare",()=>513,"LessDepth",()=>2,"LessEqualCompare",()=>515,"LessEqualDepth",()=>3,"LessEqualStencilFunc",()=>515,"LessStencilFunc",()=>513,"Light",()=>sj,"LightProbe",()=>oe,"Line",()=>nF,"Line3",()=>ln,"LineBasicMaterial",()=>nC,"LineCurve",()=>av,"LineCurve3",()=>ax,"LineDashedMaterial",()=>sh,"LineLoop",()=>nV,"LineSegments",()=>nz,"LinearFilter",()=>1006,"LinearInterpolant",()=>sx,"LinearMipMapLinearFilter",()=>1008,"LinearMipMapNearestFilter",()=>1007,"LinearMipmapLinearFilter",()=>1008,"LinearMipmapNearestFilter",()=>1007,"LinearSRGBColorSpace",()=>ef,"LinearToneMapping",()=>1,"LinearTransfer",()=>em,"Loader",()=>sD,"LoaderUtils",()=>or,"LoadingManager",()=>sI,"LoopOnce",()=>2200,"LoopPingPong",()=>2202,"LoopRepeat",()=>2201,"MOUSE",()=>ec,"Material",()=>r_,"MaterialLoader",()=>ot,"MathUtils",()=>eW,"Matrix2",()=>o4,"Matrix3",()=>eZ,"Matrix4",()=>tF,"MaxEquation",()=>104,"Mesh",()=>r5,"MeshBasicMaterial",()=>rb,"MeshDepthMaterial",()=>sl,"MeshDistanceMaterial",()=>su,"MeshLambertMaterial",()=>so,"MeshMatcapMaterial",()=>sc,"MeshNormalMaterial",()=>ss,"MeshPhongMaterial",()=>sn,"MeshPhysicalMaterial",()=>si,"MeshStandardMaterial",()=>sr,"MeshToonMaterial",()=>sa,"MinEquation",()=>103,"MirroredRepeatWrapping",()=>1002,"MixOperation",()=>1,"MultiplyBlending",()=>4,"MultiplyOperation",()=>0,"NearestFilter",()=>1003,"NearestMipMapLinearFilter",()=>1005,"NearestMipMapNearestFilter",()=>1004,"NearestMipmapLinearFilter",()=>1005,"NearestMipmapNearestFilter",()=>1004,"NeutralToneMapping",()=>7,"NeverCompare",()=>512,"NeverDepth",()=>0,"NeverStencilFunc",()=>512,"NoBlending",()=>0,"NoColorSpace",()=>"","NoToneMapping",()=>0,"NormalAnimationBlendMode",()=>2500,"NormalBlending",()=>1,"NotEqualCompare",()=>517,"NotEqualDepth",()=>7,"NotEqualStencilFunc",()=>517,"NumberKeyframeTrack",()=>sw,"Object3D",()=>t9,"ObjectLoader",()=>oa,"ObjectSpaceNormalMap",()=>1,"OctahedronGeometry",()=>aZ,"OneFactor",()=>201,"OneMinusConstantAlphaFactor",()=>214,"OneMinusConstantColorFactor",()=>212,"OneMinusDstAlphaFactor",()=>207,"OneMinusDstColorFactor",()=>209,"OneMinusSrcAlphaFactor",()=>205,"OneMinusSrcColorFactor",()=>203,"OrthographicCamera",()=>s4,"PCFShadowMap",()=>1,"PCFSoftShadowMap",()=>2,"PMREMGenerator",()=>l5,"Path",()=>aM,"PerspectiveCamera",()=>il,"Plane",()=>ni,"PlaneGeometry",()=>aJ,"PlaneHelper",()=>lR,"PointLight",()=>s3,"PointLightHelper",()=>lh,"Points",()=>nX,"PointsMaterial",()=>nq,"PolarGridHelper",()=>lg,"PolyhedronGeometry",()=>n7,"PositionalAudio",()=>oN,"PropertyBinding",()=>ok,"PropertyMixer",()=>oI,"QuadraticBezierCurve",()=>a_,"QuadraticBezierCurve3",()=>ab,"Quaternion",()=>eQ,"QuaternionKeyframeTrack",()=>sE,"QuaternionLinearInterpolant",()=>sM,"RED_GREEN_RGTC2_Format",()=>36285,"RED_RGTC1_Format",()=>36283,"REVISION",()=>"181","RGBADepthPacking",()=>3201,"RGBAFormat",()=>1023,"RGBAIntegerFormat",()=>1033,"RGBA_ASTC_10x10_Format",()=>37819,"RGBA_ASTC_10x5_Format",()=>37816,"RGBA_ASTC_10x6_Format",()=>37817,"RGBA_ASTC_10x8_Format",()=>37818,"RGBA_ASTC_12x10_Format",()=>37820,"RGBA_ASTC_12x12_Format",()=>37821,"RGBA_ASTC_4x4_Format",()=>37808,"RGBA_ASTC_5x4_Format",()=>37809,"RGBA_ASTC_5x5_Format",()=>37810,"RGBA_ASTC_6x5_Format",()=>37811,"RGBA_ASTC_6x6_Format",()=>37812,"RGBA_ASTC_8x5_Format",()=>37813,"RGBA_ASTC_8x6_Format",()=>37814,"RGBA_ASTC_8x8_Format",()=>37815,"RGBA_BPTC_Format",()=>36492,"RGBA_ETC2_EAC_Format",()=>37496,"RGBA_PVRTC_2BPPV1_Format",()=>35843,"RGBA_PVRTC_4BPPV1_Format",()=>35842,"RGBA_S3TC_DXT1_Format",()=>33777,"RGBA_S3TC_DXT3_Format",()=>33778,"RGBA_S3TC_DXT5_Format",()=>33779,"RGBDepthPacking",()=>3202,"RGBFormat",()=>1022,"RGBIntegerFormat",()=>1032,"RGB_BPTC_SIGNED_Format",()=>36494,"RGB_BPTC_UNSIGNED_Format",()=>36495,"RGB_ETC1_Format",()=>36196,"RGB_ETC2_Format",()=>37492,"RGB_PVRTC_2BPPV1_Format",()=>35841,"RGB_PVRTC_4BPPV1_Format",()=>35840,"RGB_S3TC_DXT1_Format",()=>33776,"RGDepthPacking",()=>3203,"RGFormat",()=>1030,"RGIntegerFormat",()=>1031,"RawShaderMaterial",()=>st,"Ray",()=>tB,"Raycaster",()=>oK,"RectAreaLight",()=>s7,"RedFormat",()=>1028,"RedIntegerFormat",()=>1029,"ReinhardToneMapping",()=>2,"RenderTarget",()=>ti,"RenderTarget3D",()=>oH,"RepeatWrapping",()=>1e3,"ReplaceStencilOp",()=>7681,"ReverseSubtractEquation",()=>102,"RingGeometry",()=>a0,"SIGNED_RED_GREEN_RGTC2_Format",()=>36286,"SIGNED_RED_RGTC1_Format",()=>36284,"SRGBColorSpace",()=>ep,"SRGBTransfer",()=>eg,"Scene",()=>iy,"ShaderChunk",()=>lk,"ShaderLib",()=>lV,"ShaderMaterial",()=>ir,"ShadowMaterial",()=>se,"Shape",()=>aE,"ShapeGeometry",()=>a1,"ShapePath",()=>lL,"ShapeUtils",()=>aj,"ShortType",()=>1011,"Skeleton",()=>i0,"SkeletonHelper",()=>lc,"SkinnedMesh",()=>i$,"Source",()=>e6,"Sphere",()=>tE,"SphereGeometry",()=>a2,"Spherical",()=>o2,"SphericalHarmonics3",()=>s9,"SplineCurve",()=>aS,"SpotLight",()=>sZ,"SpotLightHelper",()=>ls,"Sprite",()=>iB,"SpriteMaterial",()=>ib,"SrcAlphaFactor",()=>204,"SrcAlphaSaturateFactor",()=>210,"SrcColorFactor",()=>202,"StaticCopyUsage",()=>35046,"StaticDrawUsage",()=>35044,"StaticReadUsage",()=>35045,"StereoCamera",()=>om,"StreamCopyUsage",()=>35042,"StreamDrawUsage",()=>35040,"StreamReadUsage",()=>35041,"StringKeyframeTrack",()=>sC,"SubtractEquation",()=>101,"SubtractiveBlending",()=>3,"TOUCH",()=>eh,"TangentSpaceNormalMap",()=>0,"TetrahedronGeometry",()=>a3,"Texture",()=>tt,"TextureLoader",()=>sH,"TextureUtils",()=>lF,"Timer",()=>o0,"TimestampQuery",()=>ev,"TorusGeometry",()=>a4,"TorusKnotGeometry",()=>a5,"Triangle",()=>rA,"TriangleFanDrawMode",()=>2,"TriangleStripDrawMode",()=>1,"TrianglesDrawMode",()=>0,"TubeGeometry",()=>a8,"UVMapping",()=>300,"Uint16BufferAttribute",()=>rB,"Uint32BufferAttribute",()=>rO,"Uint8BufferAttribute",()=>rI,"Uint8ClampedBufferAttribute",()=>rL,"Uniform",()=>oj,"UniformsGroup",()=>oX,"UniformsLib",()=>lz,"UniformsUtils",()=>it,"UnsignedByteType",()=>1009,"UnsignedInt101111Type",()=>35899,"UnsignedInt248Type",()=>1020,"UnsignedInt5999Type",()=>35902,"UnsignedIntType",()=>1014,"UnsignedShort4444Type",()=>1017,"UnsignedShort5551Type",()=>1018,"UnsignedShortType",()=>1012,"VSMShadowMap",()=>3,"Vector2",()=>eX,"Vector3",()=>e$,"Vector4",()=>tr,"VectorKeyframeTrack",()=>sR,"VideoFrameTexture",()=>nY,"VideoTexture",()=>n$,"WebGL3DRenderTarget",()=>tl,"WebGLArrayRenderTarget",()=>ts,"WebGLCoordinateSystem",()=>2e3,"WebGLCubeRenderTarget",()=>ih,"WebGLRenderTarget",()=>tn,"WebGLRenderer",()=>c$,"WebGLUtils",()=>cU,"WebGPUCoordinateSystem",()=>2001,"WebXRController",()=>ip,"WireframeGeometry",()=>a6,"WrapAroundEnding",()=>2402,"ZeroCurvatureEnding",()=>2400,"ZeroFactor",()=>200,"ZeroSlopeEnding",()=>2401,"ZeroStencilOp",()=>0,"createCanvasElement",()=>eM,"error",()=>eL,"getConsoleFunction",()=>eN,"log",()=>eP,"setConsoleFunction",()=>eR,"warn",()=>eI,"warnOnce",()=>eD],32009);var Yj=e.i(32009);function YW(e,t){let r;return(...i)=>{window.clearTimeout(r),r=window.setTimeout(()=>e(...i),t)}}let YX=["x","y","top","bottom","left","right","width","height"];function YQ({ref:e,children:t,fallback:r,resize:i,style:n,gl:a,events:s=YH,eventSource:o,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:d,orthographic:A,frameloop:p,dpr:f,performance:m,raycaster:g,camera:y,scene:v,onPointerMissed:x,onCreated:_,...b}){let S,T,w;eu.useMemo(()=>Yf(Yj),[]);let M=(S=$U(),T=function(){let e=$U(),[t]=$L.useState(()=>new Map);t.clear();let r=e;for(;r;){let e=r.type;$z(e)&&e!==$F&&!t.has(e)&&t.set(e,$L.use($B(e))),r=r.return}return t}(),w=$L.useMemo(()=>Array.from(T.keys()).reduce((e,t)=>r=>$L.createElement(e,null,$L.createElement(t.Provider,{...r,value:T.get(t)})),e=>$L.createElement($O,{...e})),[T]),$T.useMemo(()=>({children:e})=>{let t=$D(S,!0,e=>e.type===$T.StrictMode)?$T.StrictMode:$T.Fragment;return(0,el.jsx)(t,{children:(0,el.jsx)(w,{children:e})})},[S,w])),[E,C]=function({debounce:e,scroll:t,polyfill:r,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){var n,a,s;let o=r||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");let[l,u]=(0,eu.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,eu.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:l,orientationHandler:null}),h=e?"number"==typeof e?e:e.scroll:null,d=e?"number"==typeof e?e:e.resize:null,A=(0,eu.useRef)(!1);(0,eu.useEffect)(()=>(A.current=!0,()=>void(A.current=!1)));let[p,f,m]=(0,eu.useMemo)(()=>{let e=()=>{let e,t;if(!c.current.element)return;let{left:r,top:n,width:a,height:s,bottom:o,right:l,x:h,y:d}=c.current.element.getBoundingClientRect(),p={left:r,top:n,width:a,height:s,bottom:o,right:l,x:h,y:d};c.current.element instanceof HTMLElement&&i&&(p.height=c.current.element.offsetHeight,p.width=c.current.element.offsetWidth),Object.freeze(p),A.current&&(e=c.current.lastBounds,t=p,!YX.every(r=>e[r]===t[r]))&&u(c.current.lastBounds=p)};return[e,d?YW(e,d):e,h?YW(e,h):e]},[u,i,h,d]);function g(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",m,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function y(){c.current.element&&(c.current.resizeObserver=new o(m),c.current.resizeObserver.observe(c.current.element),t&&c.current.scrollContainers&&c.current.scrollContainers.forEach(e=>e.addEventListener("scroll",m,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}return n=m,a=!!t,(0,eu.useEffect)(()=>{if(a)return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)},[n,a]),s=f,(0,eu.useEffect)(()=>(window.addEventListener("resize",s),()=>void window.removeEventListener("resize",s)),[s]),(0,eu.useEffect)(()=>{g(),y()},[t,m,f]),(0,eu.useEffect)(()=>g,[]),[e=>{e&&e!==c.current.element&&(g(),c.current.element=e,c.current.scrollContainers=function e(t){let r=[];if(!t||t===document.body)return r;let{overflow:i,overflowX:n,overflowY:a}=window.getComputedStyle(t);return[i,n,a].some(e=>"auto"===e||"scroll"===e)&&r.push(t),[...r,...e(t.parentElement)]}(e),y())},l,p]}({scroll:!0,debounce:{scroll:50,resize:0},...i}),R=eu.useRef(null),N=eu.useRef(null);eu.useImperativeHandle(e,()=>R.current);let P=$H(x),[I,L]=eu.useState(!1),[D,B]=eu.useState(!1);if(I)throw I;if(D)throw D;let F=eu.useRef(null);$G(()=>{let e=R.current;if(C.width>0&&C.height>0&&e){let r,i,n,x,b,S,T,w,E,R,I,D,O,U,k,z,V;F.current||(x=null==(n=YC.get(e))?void 0:n.fiber,b=null==n?void 0:n.store,n&&console.warn("R3F.createRoot should only be called once!"),S="function"==typeof reportError?reportError:console.error,U=b||(I=(R=(E=(T=(e,t)=>{let r,i=new e$,n=new e$,a=new e$;function s(e=t().camera,r=n,o=t().size){let{width:l,height:u,top:c,left:h}=o,d=l/u;r.isVector3?a.copy(r):a.set(...r);let A=e.getWorldPosition(i).distanceTo(a);if(e&&e.isOrthographicCamera)return{width:l/e.zoom,height:u/e.zoom,top:c,left:h,factor:1,distance:A,aspect:d};{let t=2*Math.tan(e.fov*Math.PI/180/2)*A,r=l/u*t;return{width:r,height:t,top:c,left:h,factor:l/r,distance:A,aspect:d}}}let o=t=>e(e=>({performance:{...e.performance,current:t}})),l=new eX;return{set:e,get:t,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(e=1)=>YV(t(),e),advance:(e,r)=>Yq(e,r,t()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new oy,pointer:l,mouse:l,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{let e=t();r&&clearTimeout(r),e.performance.current!==e.performance.min&&o(e.performance.min),r=setTimeout(()=>o(t().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:s},setEvents:t=>e(e=>({...e,events:{...e.events,...t}})),setSize:(r,i,a=0,o=0)=>{let l=t().camera,u={width:r,height:i,top:a,left:o};e(e=>({size:u,viewport:{...e.viewport,...s(l,n,u)}}))},setDpr:t=>e(e=>{let r=$X(t);return{viewport:{...e.viewport,dpr:r,initialDpr:e.viewport.initialDpr||r}}}),setFrameloop:(r="always")=>{let i=t().clock;i.stop(),i.elapsedTime=0,"never"!==r&&(i.start(),i.elapsedTime=0),e(()=>({frameloop:r}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:$T.createRef(),active:!1,frames:0,priority:0,subscribe:(e,r,i)=>{let n=t().internal;return n.priority=n.priority+ +(r>0),n.subscribers.push({ref:e,priority:r,store:i}),n.subscribers=n.subscribers.sort((e,t)=>e.priority-t.priority),()=>{let i=t().internal;null!=i&&i.subscribers&&(i.priority=i.priority-(r>0),i.subscribers=i.subscribers.filter(t=>t.ref!==e))}}}}})?$C(T,w):$C).getState()).size,D=R.viewport.dpr,O=R.camera,E.subscribe(()=>{let{camera:e,size:t,viewport:r,gl:i,set:n}=E.getState();if(t.width!==I.width||t.height!==I.height||r.dpr!==D){I=t,D=r.dpr;!e.manual&&(e&&e.isOrthographicCamera?(e.left=-(t.width/2),e.right=t.width/2,e.top=t.height/2,e.bottom=-(t.height/2)):e.aspect=t.width/t.height,e.updateProjectionMatrix());r.dpr>0&&i.setPixelRatio(r.dpr);let n="undefined"!=typeof HTMLCanvasElement&&i.domElement instanceof HTMLCanvasElement;i.setSize(t.width,t.height,n)}e!==O&&(O=e,n(t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}})))}),E.subscribe(e=>YV(e)),E),k=x||YE.createContainer(U,1,null,!1,null,"",S,S,S,null),n||YC.set(e,{fiber:k,store:U}),z=!1,V=null,F.current={async configure(t={}){var n,a;let s;V=new Promise(e=>s=e);let{gl:o,size:l,scene:u,events:c,onCreated:h,shadows:d=!1,linear:A=!1,flat:p=!1,legacy:f=!1,orthographic:m=!1,frameloop:g="always",dpr:y=[1,2],performance:v,raycaster:x,camera:_,onPointerMissed:b}=t,S=U.getState(),T=S.gl;if(!S.gl){let t={canvas:e,powerPreference:"high-performance",antialias:!0,alpha:!0},r="function"==typeof o?await o(t):o;T=Yt(r)?r:new c$({...t,...o}),S.set({gl:T})}let w=S.raycaster;w||S.set({raycaster:w=new oK});let{params:M,...E}=x||{};if($$.equ(E,w,YR)||$8(w,{...E}),$$.equ(M,w.params,YR)||$8(w,{params:{...w.params,...M}}),!S.camera||S.camera===i&&!$$.equ(i,_,YR)){i=_;let e=null==_?void 0:_.isCamera,t=e?_:m?new s4(0,0,0,0,.1,1e3):new il(75,0,.1,1e3);!e&&(t.position.z=5,_&&($8(t,_),!t.manual&&("aspect"in _||"left"in _||"right"in _||"bottom"in _||"top"in _)&&(t.manual=!0,t.updateProjectionMatrix())),S.camera||null!=_&&_.rotation||t.lookAt(0,0,0)),S.set({camera:t}),w.camera=t}if(!S.scene){let e;null!=u&&u.isScene?$K(e=u,U,"",{}):($K(e=new iy,U,"",{}),u&&$8(e,u)),S.set({scene:e})}c&&!S.events.handlers&&S.set({events:c(U)});let C=function(e,t){if(!t&&"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){let{width:t,height:r,top:i,left:n}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:n}}return!t&&"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0,...t}}(e,l);if($$.equ(C,S.size,YR)||S.setSize(C.width,C.height,C.top,C.left),y&&S.viewport.dpr!==$X(y)&&S.setDpr(y),S.frameloop!==g&&S.setFrameloop(g),S.onPointerMissed||S.set({onPointerMissed:b}),v&&!$$.equ(v,S.performance,YR)&&S.set(e=>({performance:{...e.performance,...v}})),!S.xr){let e=(e,t)=>{let r=U.getState();"never"!==r.frameloop&&Yq(e,!0,r,t)},t=()=>{let t=U.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||YV(t)},r={connect(){let e=U.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){let e=U.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"==typeof(null==(n=T.xr)?void 0:n.addEventListener)&&r.connect(),S.set({xr:r})}if(T.shadowMap){let e=T.shadowMap.enabled,t=T.shadowMap.type;T.shadowMap.enabled=!!d,$$.boo(d)?T.shadowMap.type=2:$$.str(d)?T.shadowMap.type=null!=(a=({basic:0,percentage:1,soft:2,variance:3})[d])?a:2:$$.obj(d)&&Object.assign(T.shadowMap,d),(e!==T.shadowMap.enabled||t!==T.shadowMap.type)&&(T.shadowMap.needsUpdate=!0)}return e2.enabled=!f,z||(T.outputColorSpace=A?ef:ep,T.toneMapping=4*!p),S.legacy!==f&&S.set(()=>({legacy:f})),S.linear!==A&&S.set(()=>({linear:A})),S.flat!==p&&S.set(()=>({flat:p})),!o||$$.fun(o)||Yt(o)||$$.equ(o,T,YR)||$8(T,o),r=h,z=!0,s(),this},render(t){return z||V||this.configure(),V.then(()=>{YE.updateContainer((0,el.jsx)(YN,{store:U,children:t,onCreated:r,rootElement:e}),k,null,()=>void 0)}),U},unmount(){YP(e)}}),async function(){await F.current.configure({gl:a,scene:v,events:s,shadows:u,linear:c,flat:h,legacy:d,orthographic:A,frameloop:p,dpr:f,performance:m,raycaster:g,camera:y,size:C,onPointerMissed:(...e)=>null==P.current?void 0:P.current(...e),onCreated:e=>{null==e.events.connect||e.events.connect(o?o&&o.hasOwnProperty("current")?o.current:o:N.current),l&&e.setEvents({compute:(e,t)=>{let r=e[l+"X"],i=e[l+"Y"];t.pointer.set(r/t.size.width*2-1,-(2*(i/t.size.height))+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==_||_(e)}}),F.current.render((0,el.jsx)(M,{children:(0,el.jsx)($W,{set:B,children:(0,el.jsx)(eu.Suspense,{fallback:(0,el.jsx)($j,{set:L}),children:null!=t?t:null})})}))}()}}),eu.useEffect(()=>{let e=R.current;if(e)return()=>YP(e)},[]);let O=o?"none":"auto";return(0,el.jsx)("div",{ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O,...n},...b,children:(0,el.jsx)("div",{ref:E,style:{width:"100%",height:"100%"},children:(0,el.jsx)("canvas",{ref:R,style:{display:"block"},children:r})})})}function Y$(e){return(0,el.jsx)($O,{children:(0,el.jsx)(YQ,{...e})})}function YY(){return(YY=Object.assign.bind()).apply(null,arguments)}var YK=Object.defineProperty;class YZ{constructor(){((e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?YK(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r})(this,"_listeners")}addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let r=this._listeners[e];if(void 0!==r){let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let r=t.slice(0);for(let t=0,i=r.length;t<i;t++)r[t].call(this,e);e.target=null}}}var YJ=Object.defineProperty,Y0=(e,t,r)=>{let i;return(i="symbol"!=typeof t?t+"":t)in e?YJ(e,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[i]=r,r};let Y1=new tB,Y2=new ni,Y3=Math.cos(Math.PI/180*70),Y4=(e,t)=>(e%t+t)%t;class Y5 extends YZ{constructor(e,t){super(),Y0(this,"object"),Y0(this,"domElement"),Y0(this,"enabled",!0),Y0(this,"target",new e$),Y0(this,"minDistance",0),Y0(this,"maxDistance",1/0),Y0(this,"minZoom",0),Y0(this,"maxZoom",1/0),Y0(this,"minPolarAngle",0),Y0(this,"maxPolarAngle",Math.PI),Y0(this,"minAzimuthAngle",-1/0),Y0(this,"maxAzimuthAngle",1/0),Y0(this,"enableDamping",!1),Y0(this,"dampingFactor",.05),Y0(this,"enableZoom",!0),Y0(this,"zoomSpeed",1),Y0(this,"enableRotate",!0),Y0(this,"rotateSpeed",1),Y0(this,"enablePan",!0),Y0(this,"panSpeed",1),Y0(this,"screenSpacePanning",!0),Y0(this,"keyPanSpeed",7),Y0(this,"zoomToCursor",!1),Y0(this,"autoRotate",!1),Y0(this,"autoRotateSpeed",2),Y0(this,"reverseOrbit",!1),Y0(this,"reverseHorizontalOrbit",!1),Y0(this,"reverseVerticalOrbit",!1),Y0(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Y0(this,"mouseButtons",{LEFT:ec.ROTATE,MIDDLE:ec.DOLLY,RIGHT:ec.PAN}),Y0(this,"touches",{ONE:eh.ROTATE,TWO:eh.DOLLY_PAN}),Y0(this,"target0"),Y0(this,"position0"),Y0(this,"zoom0"),Y0(this,"_domElementKeyEvents",null),Y0(this,"getPolarAngle"),Y0(this,"getAzimuthalAngle"),Y0(this,"setPolarAngle"),Y0(this,"setAzimuthalAngle"),Y0(this,"getDistance"),Y0(this,"getZoomScale"),Y0(this,"listenToKeyEvents"),Y0(this,"stopListenToKeyEvents"),Y0(this,"saveState"),Y0(this,"reset"),Y0(this,"update"),Y0(this,"connect"),Y0(this,"dispose"),Y0(this,"dollyIn"),Y0(this,"dollyOut"),Y0(this,"getScale"),Y0(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>u.phi,this.getAzimuthalAngle=()=>u.theta,this.setPolarAngle=e=>{let t=Y4(e,2*Math.PI),i=u.phi;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let n=Math.abs(t-i);2*Math.PI-n<n&&(t<i?t+=2*Math.PI:i+=2*Math.PI),c.phi=t-i,r.update()},this.setAzimuthalAngle=e=>{let t=Y4(e,2*Math.PI),i=u.theta;i<0&&(i+=2*Math.PI),t<0&&(t+=2*Math.PI);let n=Math.abs(t-i);2*Math.PI-n<n&&(t<i?t+=2*Math.PI:i+=2*Math.PI),c.theta=t-i,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Q),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Q),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),o=s.NONE},this.update=(()=>{let t=new e$,n=new e$(0,1,0),a=new eQ().setFromUnitVectors(e.up,n),A=a.clone().invert(),p=new e$,f=new eQ,m=2*Math.PI;return function(){let g=r.object.position;a.setFromUnitVectors(e.up,n),A.copy(a).invert(),t.copy(g).sub(r.target),t.applyQuaternion(a),u.setFromVector3(t),r.autoRotate&&o===s.NONE&&C(2*Math.PI/60/60*r.autoRotateSpeed),r.enableDamping?(u.theta+=c.theta*r.dampingFactor,u.phi+=c.phi*r.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);let y=r.minAzimuthAngle,v=r.maxAzimuthAngle;isFinite(y)&&isFinite(v)&&(y<-Math.PI?y+=m:y>Math.PI&&(y-=m),v<-Math.PI?v+=m:v>Math.PI&&(v-=m),y<=v?u.theta=Math.max(y,Math.min(v,u.theta)):u.theta=u.theta>(y+v)/2?Math.max(y,u.theta):Math.min(v,u.theta)),u.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,u.phi)),u.makeSafe(),!0===r.enableDamping?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),r.zoomToCursor&&T||r.object.isOrthographicCamera?u.radius=B(u.radius):u.radius=B(u.radius*h),t.setFromSpherical(u),t.applyQuaternion(A),g.copy(r.target).add(t),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),!0===r.enableDamping?(c.theta*=1-r.dampingFactor,c.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(c.set(0,0,0),d.set(0,0,0));let x=!1;if(r.zoomToCursor&&T){let i=null;if(r.object instanceof il&&r.object.isPerspectiveCamera){let e=t.length();i=B(e*h);let n=e-i;r.object.position.addScaledVector(b,n),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){let e=new e$(S.x,S.y,0);e.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix(),x=!0;let n=new e$(S.x,S.y,0);n.unproject(r.object),r.object.position.sub(n).add(e),r.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;null!==i&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(i).add(r.object.position):(Y1.origin.copy(r.object.position),Y1.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Y1.direction))<Y3?e.lookAt(r.target):(Y2.setFromNormalAndCoplanarPoint(r.object.up,r.target),Y1.intersectPlane(Y2,r.target))))}else r.object instanceof s4&&r.object.isOrthographicCamera&&(x=1!==h)&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/h)),r.object.updateProjectionMatrix());return h=1,T=!1,!!(x||p.distanceToSquared(r.object.position)>l||8*(1-f.dot(r.object.quaternion))>l)&&(r.dispatchEvent(i),p.copy(r.object.position),f.copy(r.object.quaternion),x=!1,!0)}})(),this.connect=e=>{r.domElement=e,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",$),r.domElement.addEventListener("pointerdown",H),r.domElement.addEventListener("pointercancel",W),r.domElement.addEventListener("wheel",X)},this.dispose=()=>{var e,t,i,n,a,s;r.domElement&&(r.domElement.style.touchAction="auto"),null==(e=r.domElement)||e.removeEventListener("contextmenu",$),null==(t=r.domElement)||t.removeEventListener("pointerdown",H),null==(i=r.domElement)||i.removeEventListener("pointercancel",W),null==(n=r.domElement)||n.removeEventListener("wheel",X),null==(a=r.domElement)||a.ownerDocument.removeEventListener("pointermove",j),null==(s=r.domElement)||s.ownerDocument.removeEventListener("pointerup",W),null!==r._domElementKeyEvents&&r._domElementKeyEvents.removeEventListener("keydown",Q)};const r=this,i={type:"change"},n={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=s.NONE;const l=1e-6,u=new o2,c=new o2;let h=1;const d=new e$,A=new eX,p=new eX,f=new eX,m=new eX,g=new eX,y=new eX,v=new eX,x=new eX,_=new eX,b=new e$,S=new eX;let T=!1;const w=[],M={};function E(){return Math.pow(.95,r.zoomSpeed)}function C(e){r.reverseOrbit||r.reverseHorizontalOrbit?c.theta+=e:c.theta-=e}function R(e){r.reverseOrbit||r.reverseVerticalOrbit?c.phi+=e:c.phi-=e}const N=(()=>{let e=new e$;return function(t,r){e.setFromMatrixColumn(r,0),e.multiplyScalar(-t),d.add(e)}})(),P=(()=>{let e=new e$;return function(t,i){!0===r.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(r.object.up,e)),e.multiplyScalar(t),d.add(e)}})(),I=(()=>{let e=new e$;return function(t,i){let n=r.domElement;if(n&&r.object instanceof il&&r.object.isPerspectiveCamera){let a=r.object.position;e.copy(a).sub(r.target);let s=e.length();N(2*t*(s*=Math.tan(r.object.fov/2*Math.PI/180))/n.clientHeight,r.object.matrix),P(2*i*s/n.clientHeight,r.object.matrix)}else n&&r.object instanceof s4&&r.object.isOrthographicCamera?(N(t*(r.object.right-r.object.left)/r.object.zoom/n.clientWidth,r.object.matrix),P(i*(r.object.top-r.object.bottom)/r.object.zoom/n.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function L(e){r.object instanceof il&&r.object.isPerspectiveCamera||r.object instanceof s4&&r.object.isOrthographicCamera?h=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function D(e){if(!r.zoomToCursor||!r.domElement)return;T=!0;let t=r.domElement.getBoundingClientRect(),i=e.clientX-t.left,n=e.clientY-t.top,a=t.width,s=t.height;S.x=i/a*2-1,S.y=-(n/s*2)+1,b.set(S.x,S.y,1).unproject(r.object).sub(r.object.position).normalize()}function B(e){return Math.max(r.minDistance,Math.min(r.maxDistance,e))}function F(e){A.set(e.clientX,e.clientY)}function O(e){m.set(e.clientX,e.clientY)}function U(){if(1==w.length)A.set(w[0].pageX,w[0].pageY);else{let e=.5*(w[0].pageX+w[1].pageX),t=.5*(w[0].pageY+w[1].pageY);A.set(e,t)}}function k(){if(1==w.length)m.set(w[0].pageX,w[0].pageY);else{let e=.5*(w[0].pageX+w[1].pageX),t=.5*(w[0].pageY+w[1].pageY);m.set(e,t)}}function z(){let e=w[0].pageX-w[1].pageX,t=w[0].pageY-w[1].pageY,r=Math.sqrt(e*e+t*t);v.set(0,r)}function V(e){if(1==w.length)p.set(e.pageX,e.pageY);else{let t=K(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);p.set(r,i)}f.subVectors(p,A).multiplyScalar(r.rotateSpeed);let t=r.domElement;t&&(C(2*Math.PI*f.x/t.clientHeight),R(2*Math.PI*f.y/t.clientHeight)),A.copy(p)}function q(e){if(1==w.length)g.set(e.pageX,e.pageY);else{let t=K(e),r=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);g.set(r,i)}y.subVectors(g,m).multiplyScalar(r.panSpeed),I(y.x,y.y),m.copy(g)}function G(e){var t;let i=K(e),n=e.pageX-i.x,a=e.pageY-i.y,s=Math.sqrt(n*n+a*a);x.set(0,s),_.set(0,Math.pow(x.y/v.y,r.zoomSpeed)),t=_.y,L(h/t),v.copy(x)}function H(e){var t,i,a;!1!==r.enabled&&(0===w.length&&(null==(t=r.domElement)||t.ownerDocument.addEventListener("pointermove",j),null==(i=r.domElement)||i.ownerDocument.addEventListener("pointerup",W)),a=e,w.push(a),"touch"===e.pointerType?function(e){switch(Y(e),w.length){case 1:switch(r.touches.ONE){case eh.ROTATE:if(!1===r.enableRotate)return;U(),o=s.TOUCH_ROTATE;break;case eh.PAN:if(!1===r.enablePan)return;k(),o=s.TOUCH_PAN;break;default:o=s.NONE}break;case 2:switch(r.touches.TWO){case eh.DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&z(),r.enablePan&&k(),o=s.TOUCH_DOLLY_PAN;break;case eh.DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&z(),r.enableRotate&&U(),o=s.TOUCH_DOLLY_ROTATE;break;default:o=s.NONE}break;default:o=s.NONE}o!==s.NONE&&r.dispatchEvent(n)}(e):function(e){let t;switch(e.button){case 0:t=r.mouseButtons.LEFT;break;case 1:t=r.mouseButtons.MIDDLE;break;case 2:t=r.mouseButtons.RIGHT;break;default:t=-1}switch(t){case ec.DOLLY:if(!1===r.enableZoom)return;D(e),v.set(e.clientX,e.clientY),o=s.DOLLY;break;case ec.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enablePan)return;O(e),o=s.PAN}else{if(!1===r.enableRotate)return;F(e),o=s.ROTATE}break;case ec.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===r.enableRotate)return;F(e),o=s.ROTATE}else{if(!1===r.enablePan)return;O(e),o=s.PAN}break;default:o=s.NONE}o!==s.NONE&&r.dispatchEvent(n)}(e))}function j(e){!1!==r.enabled&&("touch"===e.pointerType?function(e){switch(Y(e),o){case s.TOUCH_ROTATE:if(!1===r.enableRotate)return;V(e),r.update();break;case s.TOUCH_PAN:if(!1===r.enablePan)return;q(e),r.update();break;case s.TOUCH_DOLLY_PAN:if(!1===r.enableZoom&&!1===r.enablePan)return;r.enableZoom&&G(e),r.enablePan&&q(e),r.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===r.enableZoom&&!1===r.enableRotate)return;r.enableZoom&&G(e),r.enableRotate&&V(e),r.update();break;default:o=s.NONE}}(e):function(e){if(!1!==r.enabled)switch(o){case s.ROTATE:let t;if(!1===r.enableRotate)return;p.set(e.clientX,e.clientY),f.subVectors(p,A).multiplyScalar(r.rotateSpeed),(t=r.domElement)&&(C(2*Math.PI*f.x/t.clientHeight),R(2*Math.PI*f.y/t.clientHeight)),A.copy(p),r.update();break;case s.DOLLY:var i,n;if(!1===r.enableZoom)return;(x.set(e.clientX,e.clientY),_.subVectors(x,v),_.y>0)?(i=E(),L(h/i)):_.y<0&&(n=E(),L(h*n)),v.copy(x),r.update();break;case s.PAN:if(!1===r.enablePan)return;g.set(e.clientX,e.clientY),y.subVectors(g,m).multiplyScalar(r.panSpeed),I(y.x,y.y),m.copy(g),r.update()}}(e))}function W(e){var t,i,n;(function(e){delete M[e.pointerId];for(let t=0;t<w.length;t++)if(w[t].pointerId==e.pointerId)return void w.splice(t,1)})(e),0===w.length&&(null==(t=r.domElement)||t.releasePointerCapture(e.pointerId),null==(i=r.domElement)||i.ownerDocument.removeEventListener("pointermove",j),null==(n=r.domElement)||n.ownerDocument.removeEventListener("pointerup",W)),r.dispatchEvent(a),o=s.NONE}function X(e){if(!1!==r.enabled&&!1!==r.enableZoom&&(o===s.NONE||o===s.ROTATE)){var t,i;e.preventDefault(),r.dispatchEvent(n),(D(e),e.deltaY<0)?(t=E(),L(h*t)):e.deltaY>0&&(i=E(),L(h/i)),r.update(),r.dispatchEvent(a)}}function Q(e){if(!1!==r.enabled&&!1!==r.enablePan){let t=!1;switch(e.code){case r.keys.UP:I(0,r.keyPanSpeed),t=!0;break;case r.keys.BOTTOM:I(0,-r.keyPanSpeed),t=!0;break;case r.keys.LEFT:I(r.keyPanSpeed,0),t=!0;break;case r.keys.RIGHT:I(-r.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),r.update())}}function $(e){!1!==r.enabled&&e.preventDefault()}function Y(e){let t=M[e.pointerId];void 0===t&&(t=new eX,M[e.pointerId]=t),t.set(e.pageX,e.pageY)}function K(e){return M[(e.pointerId===w[0].pointerId?w[1]:w[0]).pointerId]}this.dollyIn=(e=E())=>{L(h*e),r.update()},this.dollyOut=(e=E())=>{L(h/e),r.update()},this.getScale=()=>h,this.setScale=e=>{L(e),r.update()},this.getZoomScale=()=>E(),void 0!==t&&this.connect(t),this.update()}}let Y8=eu.forwardRef(({makeDefault:e,camera:t,regress:r,domElement:i,enableDamping:n=!0,keyEvents:a=!1,onChange:s,onStart:o,onEnd:l,...u},c)=>{let h=Yn(e=>e.invalidate),d=Yn(e=>e.camera),A=Yn(e=>e.gl),p=Yn(e=>e.events),f=Yn(e=>e.setEvents),m=Yn(e=>e.set),g=Yn(e=>e.get),y=Yn(e=>e.performance),v=t||d,x=i||p.connected||A.domElement,_=eu.useMemo(()=>new Y5(v),[v]);return!function(e,t=0){let r=Yi(),i=r.getState().internal.subscribe,n=$H(e);$G(()=>i(n,t,r),[t,i,r])}(()=>{_.enabled&&_.update()},-1),eu.useEffect(()=>(a&&_.connect(!0===a?x:a),_.connect(x),()=>void _.dispose()),[a,x,r,_,h]),eu.useEffect(()=>{let e=e=>{h(),r&&y.regress(),s&&s(e)},t=e=>{o&&o(e)},i=e=>{l&&l(e)};return _.addEventListener("change",e),_.addEventListener("start",t),_.addEventListener("end",i),()=>{_.removeEventListener("start",t),_.removeEventListener("end",i),_.removeEventListener("change",e)}},[s,o,l,_,h,f]),eu.useEffect(()=>{if(e){let e=g().controls;return m({controls:_}),()=>m({controls:e})}},[e,_]),eu.createElement("primitive",YY({ref:c,object:_,enableDamping:n},u))});var Y6=e.i(83958);function Y7({globeConfig:e,data:t}){let r=(0,eu.useRef)(null),i=(0,eu.useRef)(null),[n,a]=(0,eu.useState)(!1),s={pointSize:1,atmosphereColor:"#ffffff",showAtmosphere:!0,atmosphereAltitude:.1,polygonColor:"rgba(255,255,255,0.7)",globeColor:"#1d072e",emissive:"#000000",emissiveIntensity:.1,shininess:.9,arcTime:2e3,arcLength:.9,rings:1,maxRings:3,...e};return(0,eu.useEffect)(()=>{!r.current&&i.current&&(r.current=new $b,i.current.add(r.current),a(!0))},[]),(0,eu.useEffect)(()=>{if(!r.current||!n)return;let t=r.current.globeMaterial();t.color=new ry(e.globeColor),t.emissive=new ry(e.emissive),t.emissiveIntensity=e.emissiveIntensity||.1,t.shininess=e.shininess||.9},[n,e.globeColor,e.emissive,e.emissiveIntensity,e.shininess]),(0,eu.useEffect)(()=>{if(!r.current||!n||!t)return;let e=[];for(let r=0;r<t.length;r++){let i=t[r];Kt(i.color),e.push({size:s.pointSize,order:i.order,color:i.color,lat:i.startLat,lng:i.startLng}),e.push({size:s.pointSize,order:i.order,color:i.color,lat:i.endLat,lng:i.endLng})}let i=e.filter((e,t,r)=>r.findIndex(t=>["lat","lng"].every(r=>t[r]===e[r]))===t);r.current.hexPolygonsData(Y6.default.features).hexPolygonResolution(3).hexPolygonMargin(.7).showAtmosphere(s.showAtmosphere).atmosphereColor(s.atmosphereColor).atmosphereAltitude(s.atmosphereAltitude).hexPolygonColor(()=>s.polygonColor),r.current.arcsData(t).arcStartLat(e=>+e.startLat).arcStartLng(e=>+e.startLng).arcEndLat(e=>+e.endLat).arcEndLng(e=>+e.endLng).arcColor(e=>e.color).arcAltitude(e=>+e.arcAlt).arcStroke(()=>[.32,.28,.3][Math.round(2*Math.random())]).arcDashLength(s.arcLength).arcDashInitialGap(e=>+e.order).arcDashGap(15).arcDashAnimateTime(()=>s.arcTime),r.current.pointsData(i).pointColor(e=>e.color).pointsMerge(!0).pointAltitude(0).pointRadius(2),r.current.ringsData([]).ringColor(()=>s.polygonColor).ringMaxRadius(s.maxRings).ringPropagationSpeed(3).ringRepeatPeriod(s.arcTime*s.arcLength/s.rings)},[n,t,s.pointSize,s.showAtmosphere,s.atmosphereColor,s.atmosphereAltitude,s.polygonColor,s.arcLength,s.arcTime,s.rings,s.maxRings]),(0,eu.useEffect)(()=>{if(!r.current||!n||!t)return;let e=setInterval(()=>{if(!r.current)return;let e=Kr(0,t.length,Math.floor(4*t.length/5)),i=t.filter((t,r)=>e.includes(r)).map(e=>({lat:e.startLat,lng:e.startLng,color:e.color}));r.current.ringsData(i)},2e3);return()=>{clearInterval(e)}},[n,t]),(0,el.jsx)("group",{ref:i})}function Y9(){let{gl:e,size:t}=Yn();return(0,eu.useEffect)(()=>{e.setPixelRatio(window.devicePixelRatio),e.setSize(t.width,t.height),e.setClearColor(0xffaaff,0)},[]),null}function Ke(e){let{globeConfig:t}=e,r=new iy;return r.fog=new ig(0xffffff,400,2e3),(0,el.jsxs)(Y$,{scene:r,camera:new il(50,1.2,180,1800),children:[(0,el.jsx)(Y9,{}),(0,el.jsx)("ambientLight",{color:t.ambientLight,intensity:.6}),(0,el.jsx)("directionalLight",{color:t.directionalLeftLight,position:new e$(-400,100,400)}),(0,el.jsx)("directionalLight",{color:t.directionalTopLight,position:new e$(-200,500,200)}),(0,el.jsx)("pointLight",{color:t.pointLight,position:new e$(-200,500,200),intensity:.8}),(0,el.jsx)(Y7,{...e}),(0,el.jsx)(Y8,{enablePan:!1,enableZoom:!1,minDistance:300,maxDistance:300,autoRotateSpeed:1,autoRotate:!0,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI-Math.PI/3})]})}function Kt(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,i){return t+t+r+r+i+i});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Kr(e,t,r){let i=[];for(;i.length<r;){let r=Math.floor(Math.random()*(t-e))+e;-1===i.indexOf(r)&&i.push(r)}return i}Yf({ThreeGlobe:$b}),e.s(["Globe",()=>Y7,"WebGLRendererConfig",()=>Y9,"World",()=>Ke,"genRandomNumbers",()=>Kr,"hexToRgb",()=>Kt],6101)},95864,e=>{e.n(e.i(6101))}]);